<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /course/view.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='course';
filename='view.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/course/</a> -> <a href="view.php.html">view.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="view.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="view.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//  Display the course home page.</span>
<a name="l4"><span class="linenum">   4</span></a>  
<a name="l5"><span class="linenum">   5</span></a>      require_once('../config.php');
<a name="l6"><span class="linenum">   6</span></a>      <span class="keyword">require_once</span> <a class="filename" href="../mod/wiki/lib.php.html" onMouseOver="reqPopup(event, 'lib.php', '../mod/wiki/lib.php')">('lib.php')</a>;
<a name="l7"><span class="linenum">   7</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/completionlib.php');
<a name="l8"><span class="linenum">   8</span></a>  
<a name="l9"><span class="linenum">   9</span></a>      <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>          = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('id', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l10"><span class="linenum">  10</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>        = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('name', '', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l11"><span class="linenum">  11</span></a>      <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>        = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('edit', -1, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l12"><span class="linenum">  12</span></a>      <a class="var it5555" onMouseOver="hilite(5555)" onMouseOut="lolite()" onClick="logVariable('hide')" href="../_variables/hide.html">$hide</a>        = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('hide', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l13"><span class="linenum">  13</span></a>      <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a>        = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('show', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l14"><span class="linenum">  14</span></a>      <a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>    = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('idnumber', '', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l15"><span class="linenum">  15</span></a>      <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>   = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('sectionid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l16"><span class="linenum">  16</span></a>      <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>     = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('section', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l17"><span class="linenum">  17</span></a>      <a class="var it8034" onMouseOver="hilite(8034)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a>        = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('move', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l18"><span class="linenum">  18</span></a>      <a class="var it5071" onMouseOver="hilite(5071)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../_variables/marker.html">$marker</a>      = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('marker',-1 , <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l19"><span class="linenum">  19</span></a>      <a class="var it8035" onMouseOver="hilite(8035)" onMouseOut="lolite()" onClick="logVariable('switchrole')" href="../_variables/switchrole.html">$switchrole</a>  = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('switchrole',-1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>); <span class="comment">// Deprecated, use course/switchrole.php instead.</span>
<a name="l20"><span class="linenum">  20</span></a>      <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('modchooser')" href="../_variables/modchooser.html">$modchooser</a>  = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('modchooser', -1, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l21"><span class="linenum">  21</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>      = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('return', 0, <a class="constant" onClick="logConstant('PARAM_LOCALURL')" href="../_constants/PARAM_LOCALURL.html" onMouseOver="constPopup(event,'PARAM_LOCALURL')">PARAM_LOCALURL</a>);
<a name="l22"><span class="linenum">  22</span></a>  
<a name="l23"><span class="linenum">  23</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l24"><span class="linenum">  24</span></a>      if (!empty(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>)) {
<a name="l25"><span class="linenum">  25</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('shortname' =&gt; <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l26"><span class="linenum">  26</span></a>      } else if (!empty(<a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>)) {
<a name="l27"><span class="linenum">  27</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('idnumber' =&gt; <a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>);
<a name="l28"><span class="linenum">  28</span></a>      } else if (!empty(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>)) {
<a name="l29"><span class="linenum">  29</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l30"><span class="linenum">  30</span></a>      }else {
<a name="l31"><span class="linenum">  31</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('unspecifycourseid', 'error');
<a name="l32"><span class="linenum">  32</span></a>      }
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>      <a class="var it5256" onMouseOver="hilite(5256)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a> = array('id' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">    // Sectionid should get priority over section number</span>
<a name="l39"><span class="linenum">  39</span></a>      if (<a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>) {
<a name="l40"><span class="linenum">  40</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_sections', 'section', array('id' =&gt; <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>, 'course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l41"><span class="linenum">  41</span></a>      }
<a name="l42"><span class="linenum">  42</span></a>      if (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l43"><span class="linenum">  43</span></a>          <a class="var it5256" onMouseOver="hilite(5256)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a>['section'] = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>;
<a name="l44"><span class="linenum">  44</span></a>      }
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', <a class="var it5256" onMouseOver="hilite(5256)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a>); <span class="comment">// Defined here to avoid notices on errors etc</span>
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">    // Prevent caching of this page to stop confusion when changing page after making AJAX changes</span>
<a name="l49"><span class="linenum">  49</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_course')" href="../_functions/preload_course.html" onMouseOver="funcPopup(event,'preload_course')">preload_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l52"><span class="linenum">  52</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">    // Remove any switched roles before checking login</span>
<a name="l55"><span class="linenum">  55</span></a>      if (<a class="var it8035" onMouseOver="hilite(8035)" onMouseOut="lolite()" onClick="logVariable('switchrole')" href="../_variables/switchrole.html">$switchrole</a> == 0 &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l56"><span class="linenum">  56</span></a>          <a class="function" onClick="logFunction('role_switch')" href="../_functions/role_switch.html" onMouseOver="funcPopup(event,'role_switch')">role_switch</a>(<a class="var it8035" onMouseOver="hilite(8035)" onMouseOut="lolite()" onClick="logVariable('switchrole')" href="../_variables/switchrole.html">$switchrole</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l57"><span class="linenum">  57</span></a>      }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">    // Switchrole - sanity check in cost-order...</span>
<a name="l62"><span class="linenum">  62</span></a>      <a class="var it8036" onMouseOver="hilite(8036)" onMouseOut="lolite()" onClick="logVariable('reset_user_allowed_editing')" href="../_variables/reset_user_allowed_editing.html">$reset_user_allowed_editing</a> = false;
<a name="l63"><span class="linenum">  63</span></a>      if (<a class="var it8035" onMouseOver="hilite(8035)" onMouseOut="lolite()" onClick="logVariable('switchrole')" href="../_variables/switchrole.html">$switchrole</a> &gt; 0 &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>() &amp;&amp;
<a name="l64"><span class="linenum">  64</span></a>          <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:switchroles', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">        // is this role assignable in this context?</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">        // inquiring minds want to know...</span>
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it8037" onMouseOver="hilite(8037)" onMouseOut="lolite()" onClick="logVariable('aroles')" href="../_variables/aroles.html">$aroles</a> = <a class="function" onClick="logFunction('get_switchable_roles')" href="../_functions/get_switchable_roles.html" onMouseOver="funcPopup(event,'get_switchable_roles')">get_switchable_roles</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l68"><span class="linenum">  68</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it8037" onMouseOver="hilite(8037)" onMouseOut="lolite()" onClick="logVariable('aroles')" href="../_variables/aroles.html">$aroles</a>) &amp;&amp; isset(<a class="var it8037" onMouseOver="hilite(8037)" onMouseOut="lolite()" onClick="logVariable('aroles')" href="../_variables/aroles.html">$aroles</a>[<a class="var it8035" onMouseOver="hilite(8035)" onMouseOut="lolite()" onClick="logVariable('switchrole')" href="../_variables/switchrole.html">$switchrole</a>])) {
<a name="l69"><span class="linenum">  69</span></a>              <a class="function" onClick="logFunction('role_switch')" href="../_functions/role_switch.html" onMouseOver="funcPopup(event,'role_switch')">role_switch</a>(<a class="var it8035" onMouseOver="hilite(8035)" onMouseOut="lolite()" onClick="logVariable('switchrole')" href="../_variables/switchrole.html">$switchrole</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">            // Double check that this role is allowed here</span>
<a name="l71"><span class="linenum">  71</span></a>              <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l72"><span class="linenum">  72</span></a>          }
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // reset course page state - this prevents some weird problems ;-)</span>
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopy')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopy.html">activitycopy</a> = false;
<a name="l75"><span class="linenum">  75</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopycourse')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopycourse.html">activitycopycourse</a> = NULL;
<a name="l76"><span class="linenum">  76</span></a>          unset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopyname')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopyname.html">activitycopyname</a>);
<a name="l77"><span class="linenum">  77</span></a>          unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('modform')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/modform.html">modform</a>);
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = 0;
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it8036" onMouseOver="hilite(8036)" onMouseOut="lolite()" onClick="logVariable('reset_user_allowed_editing')" href="../_variables/reset_user_allowed_editing.html">$reset_user_allowed_editing</a> = true;
<a name="l80"><span class="linenum">  80</span></a>      }
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">    //If course is hosted on an external server, redirect to corresponding</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">    //url with appropriate authentication attached as parameter</span>
<a name="l84"><span class="linenum">  84</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> .'/course/externservercourse.php')) {
<a name="l85"><span class="linenum">  85</span></a>          include <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> .'/course/externservercourse.php';
<a name="l86"><span class="linenum">  86</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('extern_server_course')) {
<a name="l87"><span class="linenum">  87</span></a>              if (<a class="var it8040" onMouseOver="hilite(8040)" onMouseOut="lolite()" onClick="logVariable('extern_url')" href="../_variables/extern_url.html">$extern_url</a> = extern_server_course(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l88"><span class="linenum">  88</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it8040" onMouseOver="hilite(8040)" onMouseOut="lolite()" onClick="logVariable('extern_url')" href="../_variables/extern_url.html">$extern_url</a>);
<a name="l89"><span class="linenum">  89</span></a>              }
<a name="l90"><span class="linenum">  90</span></a>          }
<a name="l91"><span class="linenum">  91</span></a>      }
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../calendar/lib.php.html">/calendar/lib.php</a>');    <span class="comment">/// This is after login because it needs $USER</span>
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">    // Must set layout before gettting section info. See MDL-47555.</span>
<a name="l97"><span class="linenum">  97</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('course');
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      if (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> and <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> &gt; 0) {
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">        // Get section details and check it exists.</span>
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it8041" onMouseOver="hilite(8041)" onMouseOut="lolite()" onClick="logVariable('coursesections')" href="../_variables/coursesections.html">$coursesections</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_section_info')" href="../_functions/get_section_info.html" onMouseOver="funcPopup(event,'get_section_info')">get_section_info</a>(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">        // Check user is allowed to see it.</span>
<a name="l106"><span class="linenum"> 106</span></a>          if (!<a class="var it8041" onMouseOver="hilite(8041)" onMouseOut="lolite()" onClick="logVariable('coursesections')" href="../_variables/coursesections.html">$coursesections</a>-&gt;<a onClick="logVariable('uservisible')" class="var it41439" onMouseOver="hilite(41439)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a>) {
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">            // Note: We actually already know they don't have this capability</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">            // or uservisible would have been true; this is just to get the</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">            // correct error message shown.</span>
<a name="l110"><span class="linenum"> 110</span></a>              <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/course:viewhiddensections', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>      }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">    // Fix course format if it is no longer installed</span>
<a name="l115"><span class="linenum"> 115</span></a>      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('get_format')" href="../_functions/get_format.html" onMouseOver="funcPopup(event,'get_format')">get_format</a>();
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagetype')" href="../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>('course-view-' . <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>);
<a name="l118"><span class="linenum"> 118</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_other_editing_capability')" href="../_functions/set_other_editing_capability.html" onMouseOver="funcPopup(event,'set_other_editing_capability')">set_other_editing_capability</a>('moodle/course:update');
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_other_editing_capability')" href="../_functions/set_other_editing_capability.html" onMouseOver="funcPopup(event,'set_other_editing_capability')">set_other_editing_capability</a>('moodle/course:manageactivities');
<a name="l120"><span class="linenum"> 120</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_other_editing_capability')" href="../_functions/set_other_editing_capability.html" onMouseOver="funcPopup(event,'set_other_editing_capability')">set_other_editing_capability</a>('moodle/course:activityvisibility');
<a name="l121"><span class="linenum"> 121</span></a>      if (<a class="function" onClick="logFunction('course_format_uses_sections')" href="../_functions/course_format_uses_sections.html" onMouseOver="funcPopup(event,'course_format_uses_sections')">course_format_uses_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>)) {
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_other_editing_capability')" href="../_functions/set_other_editing_capability.html" onMouseOver="funcPopup(event,'set_other_editing_capability')">set_other_editing_capability</a>('moodle/course:sectionvisibility');
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_other_editing_capability')" href="../_functions/set_other_editing_capability.html" onMouseOver="funcPopup(event,'set_other_editing_capability')">set_other_editing_capability</a>('moodle/course:movesections');
<a name="l124"><span class="linenum"> 124</span></a>      }
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">    // Preload course format renderer before output starts.</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">    // This is a little hacky but necessary since</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">    // format.php is not included until after output starts</span>
<a name="l129"><span class="linenum"> 129</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/course/format/'.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>.'/renderer.php')) {
<a name="l130"><span class="linenum"> 130</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/course/format/'.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>.'/renderer.php');
<a name="l131"><span class="linenum"> 131</span></a>          if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>('format_'.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>.'_renderer')) {
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">            // call get_renderer only if renderer is defined in format plugin</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">            // otherwise an exception would be thrown</span>
<a name="l134"><span class="linenum"> 134</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('format_'. <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>);
<a name="l135"><span class="linenum"> 135</span></a>          }
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      if (<a class="var it8036" onMouseOver="hilite(8036)" onMouseOut="lolite()" onClick="logVariable('reset_user_allowed_editing')" href="../_variables/reset_user_allowed_editing.html">$reset_user_allowed_editing</a>) {
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">        // ugly hack</span>
<a name="l140"><span class="linenum"> 140</span></a>          unset(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('_user_allowed_editing')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/_user_allowed_editing.html">_user_allowed_editing</a>);
<a name="l141"><span class="linenum"> 141</span></a>      }
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>      if (!isset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a>)) {
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = 0;
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>      if (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>()) {
<a name="l147"><span class="linenum"> 147</span></a>          if ((<a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> == 1) and <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l148"><span class="linenum"> 148</span></a>              <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = 1;
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">            // Redirect to site root if Editing is toggled on frontpage</span>
<a name="l150"><span class="linenum"> 150</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l151"><span class="linenum"> 151</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> .'/?redirect=0');
<a name="l152"><span class="linenum"> 152</span></a>              } else if (!empty(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>)) {
<a name="l153"><span class="linenum"> 153</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l154"><span class="linenum"> 154</span></a>              } else {
<a name="l155"><span class="linenum"> 155</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, array('notifyeditingon' =&gt; 1));
<a name="l156"><span class="linenum"> 156</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l157"><span class="linenum"> 157</span></a>              }
<a name="l158"><span class="linenum"> 158</span></a>          } else if ((<a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> == 0) and <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l159"><span class="linenum"> 159</span></a>              <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = 0;
<a name="l160"><span class="linenum"> 160</span></a>              if(!empty(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopy')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopy.html">activitycopy</a>) &amp;&amp; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopycourse')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopycourse.html">activitycopycourse</a> == <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l161"><span class="linenum"> 161</span></a>                  <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopy')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopy.html">activitycopy</a>       = false;
<a name="l162"><span class="linenum"> 162</span></a>                  <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('activitycopycourse')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/activitycopycourse.html">activitycopycourse</a> = NULL;
<a name="l163"><span class="linenum"> 163</span></a>              }
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">            // Redirect to site root if Editing is toggled on frontpage</span>
<a name="l165"><span class="linenum"> 165</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l166"><span class="linenum"> 166</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> .'/?redirect=0');
<a name="l167"><span class="linenum"> 167</span></a>              } else if (!empty(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>)) {
<a name="l168"><span class="linenum"> 168</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l169"><span class="linenum"> 169</span></a>              } else {
<a name="l170"><span class="linenum"> 170</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l171"><span class="linenum"> 171</span></a>              }
<a name="l172"><span class="linenum"> 172</span></a>          }
<a name="l173"><span class="linenum"> 173</span></a>          if ((<a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('modchooser')" href="../_variables/modchooser.html">$modchooser</a> == 1) &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l174"><span class="linenum"> 174</span></a>              <a class="function" onClick="logFunction('set_user_preference')" href="../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('usemodchooser', <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('modchooser')" href="../_variables/modchooser.html">$modchooser</a>);
<a name="l175"><span class="linenum"> 175</span></a>          } else if ((<a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('modchooser')" href="../_variables/modchooser.html">$modchooser</a> == 0) &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l176"><span class="linenum"> 176</span></a>              <a class="function" onClick="logFunction('set_user_preference')" href="../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('usemodchooser', <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('modchooser')" href="../_variables/modchooser.html">$modchooser</a>);
<a name="l177"><span class="linenum"> 177</span></a>          }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:sectionvisibility', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l180"><span class="linenum"> 180</span></a>              if (<a class="var it5555" onMouseOver="hilite(5555)" onMouseOut="lolite()" onClick="logVariable('hide')" href="../_variables/hide.html">$hide</a> &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l181"><span class="linenum"> 181</span></a>                  <a class="function" onClick="logFunction('set_section_visible')" href="../_functions/set_section_visible.html" onMouseOver="funcPopup(event,'set_section_visible')">set_section_visible</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it5555" onMouseOver="hilite(5555)" onMouseOut="lolite()" onClick="logVariable('hide')" href="../_variables/hide.html">$hide</a>, '0');
<a name="l182"><span class="linenum"> 182</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l183"><span class="linenum"> 183</span></a>              }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>              if (<a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a> &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l186"><span class="linenum"> 186</span></a>                  <a class="function" onClick="logFunction('set_section_visible')" href="../_functions/set_section_visible.html" onMouseOver="funcPopup(event,'set_section_visible')">set_section_visible</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a>, '1');
<a name="l187"><span class="linenum"> 187</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l188"><span class="linenum"> 188</span></a>              }
<a name="l189"><span class="linenum"> 189</span></a>          }
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>          if (!empty(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) &amp;&amp; !empty(<a class="var it8034" onMouseOver="hilite(8034)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a>) &amp;&amp;
<a name="l192"><span class="linenum"> 192</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:movesections', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it8043" onMouseOver="hilite(8043)" onMouseOut="lolite()" onClick="logVariable('destsection')" href="../_variables/destsection.html">$destsection</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> + <a class="var it8034" onMouseOver="hilite(8034)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a>;
<a name="l194"><span class="linenum"> 194</span></a>              if (<a class="function" onClick="logFunction('move_section_to')" href="../_functions/move_section_to.html" onMouseOver="funcPopup(event,'move_section_to')">move_section_to</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it8043" onMouseOver="hilite(8043)" onMouseOut="lolite()" onClick="logVariable('destsection')" href="../_variables/destsection.html">$destsection</a>)) {
<a name="l195"><span class="linenum"> 195</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l196"><span class="linenum"> 196</span></a>                      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/?redirect=0');
<a name="l197"><span class="linenum"> 197</span></a>                  } else {
<a name="l198"><span class="linenum"> 198</span></a>                      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="function" onClick="logFunction('course_get_url')" href="../_functions/course_get_url.html" onMouseOver="funcPopup(event,'course_get_url')">course_get_url</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>));
<a name="l199"><span class="linenum"> 199</span></a>                  }
<a name="l200"><span class="linenum"> 200</span></a>              } else {
<a name="l201"><span class="linenum"> 201</span></a>                  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>('An error occurred while moving a section');
<a name="l202"><span class="linenum"> 202</span></a>              }
<a name="l203"><span class="linenum"> 203</span></a>          }
<a name="l204"><span class="linenum"> 204</span></a>      } else {
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = 0;
<a name="l206"><span class="linenum"> 206</span></a>      }
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>      <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('fromdiscussion')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/fromdiscussion.html">fromdiscussion</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>      if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">        // This course is not a real course.</span>
<a name="l213"><span class="linenum"> 213</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> .'/');
<a name="l214"><span class="linenum"> 214</span></a>      }
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>      <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l217"><span class="linenum"> 217</span></a>      if (<a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('completion-title-manual-y', 'completion');
<a name="l219"><span class="linenum"> 219</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('completion-title-manual-n', 'completion');
<a name="l220"><span class="linenum"> 220</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('completion-alt-manual-y', 'completion');
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('completion-alt-manual-n', 'completion');
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('M.core_completion.init');
<a name="l224"><span class="linenum"> 224</span></a>      }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">    // We are currently keeping the button here from 1.x to help new teachers figure out</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">    // what to do, even though the link also appears in the course admin block.  It also</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">    // means you can back out of a situation where you removed the admin block. :)</span>
<a name="l229"><span class="linenum"> 229</span></a>      if (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>()) {
<a name="l230"><span class="linenum"> 230</span></a>          <a class="var it6743" onMouseOver="hilite(6743)" onMouseOut="lolite()" onClick="logVariable('buttons')" href="../_variables/buttons.html">$buttons</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('edit_button')" href="../_functions/edit_button.html" onMouseOver="funcPopup(event,'edit_button')">edit_button</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_button')" href="../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>(<a class="var it6743" onMouseOver="hilite(6743)" onMouseOut="lolite()" onClick="logVariable('buttons')" href="../_variables/buttons.html">$buttons</a>);
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">    // If viewing a section, make the title more specific</span>
<a name="l235"><span class="linenum"> 235</span></a>      if (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> and <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> &gt; 0 and <a class="function" onClick="logFunction('course_format_uses_sections')" href="../_functions/course_format_uses_sections.html" onMouseOver="funcPopup(event,'course_format_uses_sections')">course_format_uses_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>)) {
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../_variables/sectionname.html">$sectionname</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sectionname', &quot;format_<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>&quot;);
<a name="l237"><span class="linenum"> 237</span></a>          <a class="var it8045" onMouseOver="hilite(8045)" onMouseOut="lolite()" onClick="logVariable('sectiontitle')" href="../_variables/sectiontitle.html">$sectiontitle</a> = <a class="function" onClick="logFunction('get_section_name')" href="../_functions/get_section_name.html" onMouseOver="funcPopup(event,'get_section_name')">get_section_name</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursesectiontitle', 'moodle', array('course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, 'sectiontitle' =&gt; <a class="var it8045" onMouseOver="hilite(8045)" onMouseOut="lolite()" onClick="logVariable('sectiontitle')" href="../_variables/sectiontitle.html">$sectiontitle</a>, 'sectionname' =&gt; <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../_variables/sectionname.html">$sectionname</a>)));
<a name="l239"><span class="linenum"> 239</span></a>      } else {
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursetitle', 'moodle', array('course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>)));
<a name="l241"><span class="linenum"> 241</span></a>      }
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l244"><span class="linenum"> 244</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>      if (<a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">        // This value tracks whether there has been a dynamic change to the page.</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">        // It is used so that if a user does this - (a) set some tickmarks, (b)</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">        // go to another page, (c) clicks Back button - the page will</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">        // automatically reload. Otherwise it would start with the wrong tick</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">        // values.</span>
<a name="l252"><span class="linenum"> 252</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('form', array('action'=&gt;'.', 'method'=&gt;'get'));
<a name="l253"><span class="linenum"> 253</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div');
<a name="l254"><span class="linenum"> 254</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('input', array('type'=&gt;'hidden', 'id'=&gt;'completion_dynamic_change', 'name'=&gt;'completion_dynamic_change', 'value'=&gt;'0'));
<a name="l255"><span class="linenum"> 255</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l256"><span class="linenum"> 256</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('form');
<a name="l257"><span class="linenum"> 257</span></a>      }
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">    // Course wrapper start.</span>
<a name="l260"><span class="linenum"> 260</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'course-content'));
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">    // make sure that section 0 exists (this function will create one if it is missing)</span>
<a name="l263"><span class="linenum"> 263</span></a>      <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, 0);
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">    // get information about course modules and existing module types</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">    // format.php in course formats may rely on presence of these variables</span>
<a name="l267"><span class="linenum"> 267</span></a>      <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l268"><span class="linenum"> 268</span></a>      <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a> = <a class="function" onClick="logFunction('get_module_types_names')" href="../_functions/get_module_types_names.html" onMouseOver="funcPopup(event,'get_module_types_names')">get_module_types_names</a>();
<a name="l269"><span class="linenum"> 269</span></a>      <a class="var it6600" onMouseOver="hilite(6600)" onMouseOut="lolite()" onClick="logVariable('modnamesplural')" href="../_variables/modnamesplural.html">$modnamesplural</a> = <a class="function" onClick="logFunction('get_module_types_names')" href="../_functions/get_module_types_names.html" onMouseOver="funcPopup(event,'get_module_types_names')">get_module_types_names</a>(true);
<a name="l270"><span class="linenum"> 270</span></a>      <a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('modnamesused')" href="../_variables/modnamesused.html">$modnamesused</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_used_module_names')" href="../_functions/get_used_module_names.html" onMouseOver="funcPopup(event,'get_used_module_names')">get_used_module_names</a>();
<a name="l271"><span class="linenum"> 271</span></a>      <a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cms')" href="../_functions/get_cms.html" onMouseOver="funcPopup(event,'get_cms')">get_cms</a>();
<a name="l272"><span class="linenum"> 272</span></a>      <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_section_info_all')" href="../_functions/get_section_info_all.html" onMouseOver="funcPopup(event,'get_section_info_all')">get_section_info_all</a>();
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">    // CAUTION, hacky fundamental variable defintion to follow!</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">    // Note that because of the way course fromats are constructed though</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">    // inclusion we pass parameters around this way..</span>
<a name="l277"><span class="linenum"> 277</span></a>      <a class="var it8047" onMouseOver="hilite(8047)" onMouseOut="lolite()" onClick="logVariable('displaysection')" href="../_variables/displaysection.html">$displaysection</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>;
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">    // Include the actual course format.</span>
<a name="l280"><span class="linenum"> 280</span></a>      <a class="function" onClick="logFunction('require')" href="../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> .'/course/format/'. <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a> .'/format.php');
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">    // Content wrapper end.</span>
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">    // Trigger course viewed event.</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">    // We don't trust $context here. Course format inclusion above executes in the global space. We can't assume</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">    // anything after that point.</span>
<a name="l288"><span class="linenum"> 288</span></a>      <a class="function" onClick="logFunction('course_view')" href="../_functions/course_view.html" onMouseOver="funcPopup(event,'course_view')">course_view</a>(<a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">    // Include course AJAX</span>
<a name="l291"><span class="linenum"> 291</span></a>      <a class="function" onClick="logFunction('include_course_ajax')" href="../_functions/include_course_ajax.html" onMouseOver="funcPopup(event,'include_course_ajax')">include_course_ajax</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('modnamesused')" href="../_variables/modnamesused.html">$modnamesused</a>);
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_renderer': ['get_renderer', 'Get the renderer for a part of Moodle for this theme. ', [['lib','outputlib.php',1790],['mod/assign','locallib.php',2734],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['course/format','lib.php',889],['question/type/multichoice','question.php',137],['question/type/multichoice','question.php',259],['question/type','questionbase.php',275],['grade/grading/form/guide','lib.php',482],['question/behaviour','behaviourbase.php',135],['lib','pagelib.php',797],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49]], 339],
'set_section_visible': ['set_section_visible', 'For a given course section, marks it visible or hidden, and does the same for every activity in that section ', [['course','lib.php',1187]], 13],
'course_format_uses_sections': ['course_format_uses_sections', 'Tells if current course format uses sections ', [['course','lib.php',2384]], 25],
'role_switch': ['role_switch', 'Switches the current user to another role for the current session and only in the given context. ', [['lib','accesslib.php',4322]], 8],
'include_course_ajax': ['include_course_ajax', 'Include the relevant javascript and language strings for the resource toolbox YUI module ', [['course','lib.php',3224]], 2],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2762],['lib','outputrenderers.php',4128],['lib','outputrenderers.php',4201]], 495],
'set_url': ['set_url', 'Set the url specifics ', [['backup/cc/cc_lib','cc_weblink.php',50],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',246],['mod/wiki','pagelib.php',334],['mod/wiki','pagelib.php',421],['mod/wiki','pagelib.php',701],['mod/wiki','pagelib.php',726],['mod/wiki','pagelib.php',840],['mod/wiki','pagelib.php',884],['mod/wiki','pagelib.php',1013],['mod/wiki','pagelib.php',1117],['mod/wiki','pagelib.php',1224],['mod/wiki','pagelib.php',1467],['mod/wiki','pagelib.php',1869],['mod/wiki','pagelib.php',1937],['mod/wiki','pagelib.php',2111],['mod/wiki','pagelib.php',2172],['mod/wiki','pagelib.php',2228],['mod/wiki','pagelib.php',2293],['mod/wiki','pagelib.php',2341],['mod/wiki','pagelib.php',2389],['mod/wiki','pagelib.php',2493],['lib','outputcomponents.php',2823],['lib','pagelib.php',1198]], 574],
'course_view': ['course_view', 'Trigger course viewed event. This API function is used when course view actions happens, usually in course/view.php but also in external functions. ', [['course','lib.php',3760]], 3],
'set_button': ['set_button', 'Specify a fragment of HTML that goes where the \'Turn editing on\' button normally goes. ', [['lib','pagelib.php',1283]], 26],
'empty_tag': ['empty_tag', 'Outputs an empty tag with attributes ', [['lib','outputcomponents.php',1096]], 511],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'preload_course': ['preload_course', 'Preload all contexts instances from course. ', [['lib','accesslib.php',6041]], 7],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'move_section_to': ['move_section_to', 'Moves a section within a course, from a position to another. Be very careful: $section and $destination refer to section number, not id!. ', [['course','lib.php',1766]], 9],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_section_info': ['get_section_info', 'Gets data about specific numbered section. ', [['lib','modinfolib.php',311]], 67],
'course_create_sections_if_missing': ['course_create_sections_if_missing', 'Creates missing course section(s) and rebuilds course cache ', [['course','lib.php',1434]], 16],
'set_cacheable': ['set_cacheable', 'Sets whether the browser should cache this page or not. ', [['lib','pagelib.php',1320]], 27],
'string_for_js': ['string_for_js', 'Make a language string available to JavaScript. ', [['lib','outputrequirementslib.php',1104]], 56],
'start_tag': ['start_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',215],['lib','outputcomponents.php',1075]], 694],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'is_enabled': ['is_enabled', 'Allows hiding this plugin from the submission/feedback screen if it is not enabled. ', [['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['lib','completionlib.php',269],['mod/assign/submission/comments','locallib.php',172],['mod/assign/feedback/editpdf','locallib.php',276],['lib/classes/plugininfo','base.php',371],['lib/classes/plugininfo','tool.php',39],['admin/tool/health','index.php',393],['admin/tool/log/classes/plugininfo','logstore.php',35],['lib/classes/message/inbound','manager.php',37],['lib/classes/plugininfo','mnetservice.php',33],['mod/assignment/classes/plugininfo','assignment.php',32],['lib','adminlib.php',1952],['mod/assign/feedback/offline','locallib.php',365],['lib','medialib.php',318],['lib','medialib.php',634],['lib','medialib.php',1265]], 200],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1050]], 95],
'user_allowed_editing': ['user_allowed_editing', 'Does the user have permission to see this page in editing mode. ', [['lib','pagelib.php',846]], 21],
'confirm_sesskey': ['confirm_sesskey', 'Check the sesskey and return true of false for whether it is valid. (You might like to imagine this function is called sesskey_is_valid().) ', [['lib','sessionlib.php',52]], 315],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 88],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'get_module_types_names': ['get_module_types_names', 'Returns the localised human-readable names of all used modules ', [['course','lib.php',1148]], 16],
'get_format': ['get_format', 'Gets the format for the backup ', [['backup/util/ui','base_ui.class.php',287],['mod/workshop','locallib.php',3869],['course/format','lib.php',213],['backup/controller','restore_controller.class.php',271],['question/format/xml','format.php',1014],['backup/controller','backup_controller.class.php',269]], 43],
'end_tag': ['end_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',261],['lib','outputcomponents.php',1086],['backup/util/xml','xml_writer.class.php',177]], 858],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1822]], 163],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'get_section_name': ['get_section_name', 'Returns the display name of the given section that the course prefers. ', [['course/format/weeks','lib.php',47],['course','lib.php',2370],['course/format/topics','lib.php',47],['course/format','formatlegacy.php',53],['course/format','lib.php',341],['course/format','lib.php',1028]], 49],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_section_info_all': ['get_section_info_all', 'Gets all sections as array from section number => data about section. ', [['lib','modinfolib.php',303]], 27],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers-debug.js',27],['lib/yuilib/3.17.2/timers','timers.js',27]], 454],
'get_used_module_names': ['get_used_module_names', 'Returns array of localised human-readable module names used in this course ', [['lib','modinfolib.php',243]], 8],
'get_switchable_roles': ['get_switchable_roles', 'Gets a list of roles that this user can switch to in a context ', [['lib','accesslib.php',3466]], 4],
'redirect': ['redirect', 'Redirect the browser ', [['','mdeploy.php',1474],['lib','weblib.php',2514]], 948],
'set_pagetype': ['set_pagetype', 'Sets the pagetype to use for this page. ', [['lib','pagelib.php',1048]], 34],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'set_other_editing_capability': ['set_other_editing_capability', 'Some pages let you turn editing on for reasons other than editing blocks. If that is the case, you can pass other capabilities that let the user edit this page here. ', [['lib','pagelib.php',1305]], 13],
'edit_button': ['edit_button', 'Returns HTML to display a "Turn editing on/off" button in a form. ', [['lib','outputrenderers.php',2617]], 2],
'course_get_url': ['course_get_url', 'The URL to use for the specified course (with section) ', [['course','lib.php',3375]], 42],
'get_cms': ['get_cms', '', [['lib','modinfolib.php',218]], 32],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1141]], 419],
'is_array': ['is_array', '', [], 1820],
'class_exists': ['class_exists', '', [], 273],
'file_exists': ['file_exists', '', [], 873],
'function_exists': ['function_exists', '', [], 443],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5824]], 210],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 119]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'PARAM_LOCALURL': ['PARAM_LOCALURL', '', [['lib','moodlelib.php',167]], 64],
'SITEID': ['SITEID', '', [['admin/cli','install.php',217],['','install.php',244],['lib/db','install.php',87],['lib','setup.php',748]], 612],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
