<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /course/lib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='course';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/course/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library of useful functions</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @copyright 1999 Martin Dougiamas  http://dougiamas.com</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package core_course</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/completionlib.php');
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/filelib.php');
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/format/lib.php.html">/course/format/lib.php</a>');
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COURSE_MAX_LOGS_PER_PAGE')" href="../_constants/COURSE_MAX_LOGS_PER_PAGE.html" onMouseOver="constPopup(event,'COURSE_MAX_LOGS_PER_PAGE')">COURSE_MAX_LOGS_PER_PAGE</a>', 1000);       <span class="comment">// Records.</span>
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COURSE_MAX_RECENT_PERIOD')" href="../_constants/COURSE_MAX_RECENT_PERIOD.html" onMouseOver="constPopup(event,'COURSE_MAX_RECENT_PERIOD')">COURSE_MAX_RECENT_PERIOD</a>', 172800);     <span class="comment">// Two days, in seconds.</span>
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">/**</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * Number of courses to display when summaries are included.</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @var int</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @deprecated since 2.4, use $CFG-&gt;courseswithsummarieslimit instead.</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> */</span>
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COURSE_MAX_SUMMARIES_PER_PAGE')" href="../_constants/COURSE_MAX_SUMMARIES_PER_PAGE.html" onMouseOver="constPopup(event,'COURSE_MAX_SUMMARIES_PER_PAGE')">COURSE_MAX_SUMMARIES_PER_PAGE</a>', 10);
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">// Max courses in log dropdown before switching to optional.</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COURSE_MAX_COURSES_PER_DROPDOWN')" href="../_constants/COURSE_MAX_COURSES_PER_DROPDOWN.html" onMouseOver="constPopup(event,'COURSE_MAX_COURSES_PER_DROPDOWN')">COURSE_MAX_COURSES_PER_DROPDOWN</a>', 1000);
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">// Max users in log dropdown before switching to optional.</span>
<a name="l44"><span class="linenum">  44</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COURSE_MAX_USERS_PER_DROPDOWN')" href="../_constants/COURSE_MAX_USERS_PER_DROPDOWN.html" onMouseOver="constPopup(event,'COURSE_MAX_USERS_PER_DROPDOWN')">COURSE_MAX_USERS_PER_DROPDOWN</a>', 1000);
<a name="l45"><span class="linenum">  45</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FRONTPAGENEWS')" href="../_constants/FRONTPAGENEWS.html" onMouseOver="constPopup(event,'FRONTPAGENEWS')">FRONTPAGENEWS</a>', '0');
<a name="l46"><span class="linenum">  46</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FRONTPAGECATEGORYNAMES')" href="../_constants/FRONTPAGECATEGORYNAMES.html" onMouseOver="constPopup(event,'FRONTPAGECATEGORYNAMES')">FRONTPAGECATEGORYNAMES</a>', '2');
<a name="l47"><span class="linenum">  47</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FRONTPAGECATEGORYCOMBO')" href="../_constants/FRONTPAGECATEGORYCOMBO.html" onMouseOver="constPopup(event,'FRONTPAGECATEGORYCOMBO')">FRONTPAGECATEGORYCOMBO</a>', '4');
<a name="l48"><span class="linenum">  48</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FRONTPAGEENROLLEDCOURSELIST')" href="../_constants/FRONTPAGEENROLLEDCOURSELIST.html" onMouseOver="constPopup(event,'FRONTPAGEENROLLEDCOURSELIST')">FRONTPAGEENROLLEDCOURSELIST</a>', '5');
<a name="l49"><span class="linenum">  49</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FRONTPAGEALLCOURSELIST')" href="../_constants/FRONTPAGEALLCOURSELIST.html" onMouseOver="constPopup(event,'FRONTPAGEALLCOURSELIST')">FRONTPAGEALLCOURSELIST</a>', '6');
<a name="l50"><span class="linenum">  50</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FRONTPAGECOURSESEARCH')" href="../_constants/FRONTPAGECOURSESEARCH.html" onMouseOver="constPopup(event,'FRONTPAGECOURSESEARCH')">FRONTPAGECOURSESEARCH</a>', '7');
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">// Important! Replaced with $CFG-&gt;frontpagecourselimit - maximum number of courses displayed on the frontpage.</span>
<a name="l52"><span class="linenum">  52</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('EXCELROWS')" href="../_constants/EXCELROWS.html" onMouseOver="constPopup(event,'EXCELROWS')">EXCELROWS</a>', 65535);
<a name="l53"><span class="linenum">  53</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>', 3);
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('MOD_CLASS_ACTIVITY')" href="../_constants/MOD_CLASS_ACTIVITY.html" onMouseOver="constPopup(event,'MOD_CLASS_ACTIVITY')">MOD_CLASS_ACTIVITY</a>', 0);
<a name="l56"><span class="linenum">  56</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('MOD_CLASS_RESOURCE')" href="../_constants/MOD_CLASS_RESOURCE.html" onMouseOver="constPopup(event,'MOD_CLASS_RESOURCE')">MOD_CLASS_RESOURCE</a>', 1);
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>  function <a class="function" onClick="logFunction('make_log_url')" href="../_functions/make_log_url.html" onMouseOver="funcPopup(event,'make_log_url')">make_log_url</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l59"><span class="linenum">  59</span></a>      switch (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>) {
<a name="l60"><span class="linenum">  60</span></a>          case 'course':
<a name="l61"><span class="linenum">  61</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, 'report/') === 0) {
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">                // there is only one report type, course reports are deprecated</span>
<a name="l63"><span class="linenum">  63</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l64"><span class="linenum">  64</span></a>                  break;
<a name="l65"><span class="linenum">  65</span></a>              }
<a name="l66"><span class="linenum">  66</span></a>          case 'file':
<a name="l67"><span class="linenum">  67</span></a>          case 'login':
<a name="l68"><span class="linenum">  68</span></a>          case 'lib':
<a name="l69"><span class="linenum">  69</span></a>          case 'admin':
<a name="l70"><span class="linenum">  70</span></a>          case 'category':
<a name="l71"><span class="linenum">  71</span></a>          case 'mnet course':
<a name="l72"><span class="linenum">  72</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, '../') === 0) {
<a name="l73"><span class="linenum">  73</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('ltrim')" href="../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, '.');
<a name="l74"><span class="linenum">  74</span></a>              } else {
<a name="l75"><span class="linenum">  75</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/course/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l76"><span class="linenum">  76</span></a>              }
<a name="l77"><span class="linenum">  77</span></a>              break;
<a name="l78"><span class="linenum">  78</span></a>          case 'calendar':
<a name="l79"><span class="linenum">  79</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/calendar/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l80"><span class="linenum">  80</span></a>              break;
<a name="l81"><span class="linenum">  81</span></a>          case 'user':
<a name="l82"><span class="linenum">  82</span></a>          case 'blog':
<a name="l83"><span class="linenum">  83</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l84"><span class="linenum">  84</span></a>              break;
<a name="l85"><span class="linenum">  85</span></a>          case 'upload':
<a name="l86"><span class="linenum">  86</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l87"><span class="linenum">  87</span></a>              break;
<a name="l88"><span class="linenum">  88</span></a>          case 'coursetags':
<a name="l89"><span class="linenum">  89</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = '/'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l90"><span class="linenum">  90</span></a>              break;
<a name="l91"><span class="linenum">  91</span></a>          case 'library':
<a name="l92"><span class="linenum">  92</span></a>          case '':
<a name="l93"><span class="linenum">  93</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = '/';
<a name="l94"><span class="linenum">  94</span></a>              break;
<a name="l95"><span class="linenum">  95</span></a>          case 'message':
<a name="l96"><span class="linenum">  96</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/message/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l97"><span class="linenum">  97</span></a>              break;
<a name="l98"><span class="linenum">  98</span></a>          case 'notes':
<a name="l99"><span class="linenum">  99</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/notes/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l100"><span class="linenum"> 100</span></a>              break;
<a name="l101"><span class="linenum"> 101</span></a>          case 'tag':
<a name="l102"><span class="linenum"> 102</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/tag/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l103"><span class="linenum"> 103</span></a>              break;
<a name="l104"><span class="linenum"> 104</span></a>          case 'role':
<a name="l105"><span class="linenum"> 105</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = '/'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l106"><span class="linenum"> 106</span></a>              break;
<a name="l107"><span class="linenum"> 107</span></a>          case 'grade':
<a name="l108"><span class="linenum"> 108</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/grade/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l109"><span class="linenum"> 109</span></a>              break;
<a name="l110"><span class="linenum"> 110</span></a>          default:
<a name="l111"><span class="linenum"> 111</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = &quot;/mod/<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>/<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&quot;;
<a name="l112"><span class="linenum"> 112</span></a>              break;
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">    //now let's sanitise urls - there might be some ugly nasties:-(</span>
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('?', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>);
<a name="l118"><span class="linenum"> 118</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>, 'http') === 0) {
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>, <a class="constant" onClick="logConstant('PARAM_URL')" href="../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>);
<a name="l120"><span class="linenum"> 120</span></a>      } else {
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>, <a class="constant" onClick="logConstant('PARAM_PATH')" href="../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>);
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = '';
<a name="l125"><span class="linenum"> 125</span></a>      if (<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>) {
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('', <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>);
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a>); <span class="comment">// both &amp; and &amp;amp; are stored in db :-|</span>
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('&amp;', <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a>);
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it35198" onMouseOver="hilite(35198)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../_variables/eq.html">$eq</a> = <a class="phpfunction" onClick="logFunction('urlencode')" href="../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>('=');
<a name="l130"><span class="linenum"> 130</span></a>          foreach (<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>) {
<a name="l131"><span class="linenum"> 131</span></a>              <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a> = <a class="phpfunction" onClick="logFunction('urlencode')" href="../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>(<a class="phpfunction" onClick="logFunction('urldecode')" href="../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>));
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it35198" onMouseOver="hilite(35198)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../_variables/eq.html">$eq</a>, '=', <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>);
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>;
<a name="l134"><span class="linenum"> 134</span></a>          }
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = '?'.<a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('&amp;amp;', <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>);
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      return <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>.<a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a>;
<a name="l139"><span class="linenum"> 139</span></a>  }
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  function <a class="function" onClick="logFunction('build_mnet_logs_array')" href="../_functions/build_mnet_logs_array.html" onMouseOver="funcPopup(event,'build_mnet_logs_array')">build_mnet_logs_array</a>(<a class="var it896" onMouseOver="hilite(896)" onMouseOut="lolite()" onClick="logVariable('hostid')" href="../_variables/hostid.html">$hostid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>=0, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>=0, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>=&quot;l.time ASC&quot;, <a class="var it1013" onMouseOver="hilite(1013)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../_variables/limitfrom.html">$limitfrom</a>='', <a class="var it1014" onMouseOver="hilite(1014)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../_variables/limitnum.html">$limitnum</a>='',
<a name="l143"><span class="linenum"> 143</span></a>                     <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>=&quot;&quot;, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>=0, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>=&quot;&quot;, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>=0) {
<a name="l144"><span class="linenum"> 144</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">    // It is assumed that $date is the GMT time of midnight for that day,</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">    // and so the next 86400 seconds worth of logs are printed.</span>
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">    /// Setup for group handling.</span>
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">    // TODO: I don't understand group/context/etc. enough to be able to do</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">    // something interesting with it here</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">    // What is the context of a remote course?</span>
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">    /// If the group mode is separate, and this user does not have editing privileges,</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">    /// then only the user's group can be viewed.</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">    //if ($course-&gt;groupmode == SEPARATEGROUPS and !has_capability('moodle/course:managegroups', context_course::instance($course-&gt;id))) {</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">    //    $groupid = get_current_group($course-&gt;id);</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">    //}</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">    /// If this course doesn't have groups, no groupid can be specified.</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">    //else if (!$course-&gt;groupmode) {</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">    //    $groupid = 0;</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">    //}</span>
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>      <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = 0;
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>      <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a> = array();
<a name="l168"><span class="linenum"> 168</span></a>      <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = '';
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      <a class="var it10159" onMouseOver="hilite(10159)" onMouseOut="lolite()" onClick="logVariable('qry')" href="../_variables/qry.html">$qry</a> = &quot;SELECT l.*, u.firstname, u.lastname, u.picture
<a name="l171"><span class="linenum"> 171</span></a>                FROM {mnet_log} l
<a name="l172"><span class="linenum"> 172</span></a>                 LEFT JOIN {user} u ON l.userid = u.id
<a name="l173"><span class="linenum"> 173</span></a>                WHERE &quot;;
<a name="l174"><span class="linenum"> 174</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>      <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot;l.hostid = :hostid&quot;;
<a name="l177"><span class="linenum"> 177</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['hostid'] = <a class="var it896" onMouseOver="hilite(896)" onMouseOut="lolite()" onClick="logVariable('hostid')" href="../_variables/hostid.html">$hostid</a>;
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">    // TODO: Is 1 really a magic number referring to the sitename?</span>
<a name="l180"><span class="linenum"> 180</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> || <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a> != 0) {
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND l.course=:courseid&quot;;
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l183"><span class="linenum"> 183</span></a>      }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>      if (<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND l.module = :modname&quot;;
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modname'] = <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>;
<a name="l188"><span class="linenum"> 188</span></a>      }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>      if ('site_errors' === <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>) {
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND ( l.action='error' OR l.action='infected' )&quot;;
<a name="l192"><span class="linenum"> 192</span></a>      } else if (<a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>) {
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">        //TODO: This assumes that modids are the same across sites... probably</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        //not true</span>
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND l.cmid = :modid&quot;;
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modid'] = <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>;
<a name="l197"><span class="linenum"> 197</span></a>      }
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>      if (<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>) {
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it33204" onMouseOver="hilite(33204)" onMouseOut="lolite()" onClick="logVariable('firstletter')" href="../_variables/firstletter.html">$firstletter</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, 0, 1);
<a name="l201"><span class="linenum"> 201</span></a>          if (<a class="var it33204" onMouseOver="hilite(33204)" onMouseOut="lolite()" onClick="logVariable('firstletter')" href="../_variables/firstletter.html">$firstletter</a> == '-') {
<a name="l202"><span class="linenum"> 202</span></a>              <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND &quot;.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>('l.action', ':modaction', false, true, true);
<a name="l203"><span class="linenum"> 203</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modaction'] = '%'.<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, 1).'%';
<a name="l204"><span class="linenum"> 204</span></a>          } else {
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND &quot;.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>('l.action', ':modaction', false);
<a name="l206"><span class="linenum"> 206</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modaction'] = '%'.<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>.'%';
<a name="l207"><span class="linenum"> 207</span></a>          }
<a name="l208"><span class="linenum"> 208</span></a>      }
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>      if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND l.userid = :user&quot;;
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['user'] = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>;
<a name="l213"><span class="linenum"> 213</span></a>      }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      if (<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>) {
<a name="l216"><span class="linenum"> 216</span></a>          <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a> = <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> + 86400;
<a name="l217"><span class="linenum"> 217</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; AND l.time &gt; :date AND l.time &lt; :enddate&quot;;
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['date'] = <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>;
<a name="l219"><span class="linenum"> 219</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['enddate'] = <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>;
<a name="l220"><span class="linenum"> 220</span></a>      }
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = array();
<a name="l223"><span class="linenum"> 223</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['totalcount'] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(&quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>('x') FROM {mnet_log} l WHERE <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l224"><span class="linenum"> 224</span></a>      if(!empty(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['totalcount'])) {
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= &quot; ORDER BY <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>&quot;;
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['logs'] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;<a class="var it10159" onMouseOver="hilite(10159)" onMouseOut="lolite()" onClick="logVariable('qry')" href="../_variables/qry.html">$qry</a> <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it1013" onMouseOver="hilite(1013)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../_variables/limitfrom.html">$limitfrom</a>, <a class="var it1014" onMouseOver="hilite(1014)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../_variables/limitnum.html">$limitnum</a>);
<a name="l227"><span class="linenum"> 227</span></a>      } else {
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['logs'] = array();
<a name="l229"><span class="linenum"> 229</span></a>      }
<a name="l230"><span class="linenum"> 230</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l231"><span class="linenum"> 231</span></a>  }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>  function <a class="function" onClick="logFunction('build_logs_array')" href="../_functions/build_logs_array.html" onMouseOver="funcPopup(event,'build_logs_array')">build_logs_array</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>=0, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>=0, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>=&quot;l.time ASC&quot;, <a class="var it1013" onMouseOver="hilite(1013)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../_variables/limitfrom.html">$limitfrom</a>='', <a class="var it1014" onMouseOver="hilite(1014)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../_variables/limitnum.html">$limitnum</a>='',
<a name="l234"><span class="linenum"> 234</span></a>                     <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>=&quot;&quot;, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>=0, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>=&quot;&quot;, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>=0) {
<a name="l235"><span class="linenum"> 235</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">    // It is assumed that $date is the GMT time of midnight for that day,</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">    // and so the next 86400 seconds worth of logs are printed.</span>
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">    /// Setup for group handling.</span>
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">    /// If the group mode is separate, and this user does not have editing privileges,</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">    /// then only the user's group can be viewed.</span>
<a name="l243"><span class="linenum"> 243</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managegroups', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l244"><span class="linenum"> 244</span></a>          if (isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('currentgroup')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/currentgroup.html">currentgroup</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>])) {
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> =  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('currentgroup')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/currentgroup.html">currentgroup</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l246"><span class="linenum"> 246</span></a>          } else {
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l248"><span class="linenum"> 248</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l249"><span class="linenum"> 249</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l250"><span class="linenum"> 250</span></a>                  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('currentgroup')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/currentgroup.html">currentgroup</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>;
<a name="l251"><span class="linenum"> 251</span></a>              } else {
<a name="l252"><span class="linenum"> 252</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = 0;
<a name="l253"><span class="linenum"> 253</span></a>              }
<a name="l254"><span class="linenum"> 254</span></a>          }
<a name="l255"><span class="linenum"> 255</span></a>      }
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">    /// If this course doesn't have groups, no groupid can be specified.</span>
<a name="l257"><span class="linenum"> 257</span></a>      else if (!<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a>) {
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = 0;
<a name="l259"><span class="linenum"> 259</span></a>      }
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>      <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a> = array();
<a name="l262"><span class="linenum"> 262</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> || <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a> != 0) {
<a name="l265"><span class="linenum"> 265</span></a>          <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = &quot;l.course = :courseid&quot;;
<a name="l266"><span class="linenum"> 266</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l267"><span class="linenum"> 267</span></a>      }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>      if (<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = &quot;l.module = :modname&quot;;
<a name="l271"><span class="linenum"> 271</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modname'] = <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>;
<a name="l272"><span class="linenum"> 272</span></a>      }
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>      if ('site_errors' === <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>) {
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = &quot;( l.action='error' OR l.action='infected' )&quot;;
<a name="l276"><span class="linenum"> 276</span></a>      } else if (<a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>) {
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = &quot;l.cmid = :modid&quot;;
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modid'] = <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>;
<a name="l279"><span class="linenum"> 279</span></a>      }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>      if (<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>) {
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it33204" onMouseOver="hilite(33204)" onMouseOut="lolite()" onClick="logVariable('firstletter')" href="../_variables/firstletter.html">$firstletter</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, 0, 1);
<a name="l283"><span class="linenum"> 283</span></a>          if (<a class="var it33204" onMouseOver="hilite(33204)" onMouseOut="lolite()" onClick="logVariable('firstletter')" href="../_variables/firstletter.html">$firstletter</a> == '-') {
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>('l.action', ':modaction', false, true, true);
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modaction'] = '%'.<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, 1).'%';
<a name="l286"><span class="linenum"> 286</span></a>          } else {
<a name="l287"><span class="linenum"> 287</span></a>              <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>('l.action', ':modaction', false);
<a name="l288"><span class="linenum"> 288</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['modaction'] = '%'.<a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>.'%';
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>      }
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">    /// Getting all members of a group.</span>
<a name="l294"><span class="linenum"> 294</span></a>      if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> and !<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l295"><span class="linenum"> 295</span></a>          if (<a class="var it33206" onMouseOver="hilite(33206)" onMouseOut="lolite()" onClick="logVariable('gusers')" href="../_variables/gusers.html">$gusers</a> = <a class="function" onClick="logFunction('groups_get_members')" href="../_functions/groups_get_members.html" onMouseOver="funcPopup(event,'groups_get_members')">groups_get_members</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l296"><span class="linenum"> 296</span></a>              <a class="var it33206" onMouseOver="hilite(33206)" onMouseOut="lolite()" onClick="logVariable('gusers')" href="../_variables/gusers.html">$gusers</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it33206" onMouseOver="hilite(33206)" onMouseOut="lolite()" onClick="logVariable('gusers')" href="../_variables/gusers.html">$gusers</a>);
<a name="l297"><span class="linenum"> 297</span></a>              <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = 'l.userid IN (' . <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it33206" onMouseOver="hilite(33206)" onMouseOut="lolite()" onClick="logVariable('gusers')" href="../_variables/gusers.html">$gusers</a>) . ')';
<a name="l298"><span class="linenum"> 298</span></a>          } else {
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = 'l.userid = 0'; <span class="comment">// No users in groups, so we want something that will always be false.</span>
<a name="l300"><span class="linenum"> 300</span></a>          }
<a name="l301"><span class="linenum"> 301</span></a>      }
<a name="l302"><span class="linenum"> 302</span></a>      else if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = &quot;l.userid = :userid&quot;;
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'] = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>;
<a name="l305"><span class="linenum"> 305</span></a>      }
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>      if (<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>) {
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a> = <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> + 86400;
<a name="l309"><span class="linenum"> 309</span></a>          <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>[] = &quot;l.time &gt; :date AND l.time &lt; :enddate&quot;;
<a name="l310"><span class="linenum"> 310</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['date'] = <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>;
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['enddate'] = <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>;
<a name="l312"><span class="linenum"> 312</span></a>      }
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>      <a class="var it6875" onMouseOver="hilite(6875)" onMouseOut="lolite()" onClick="logVariable('selector')" href="../_variables/selector.html">$selector</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' AND ', <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../_variables/joins.html">$joins</a>);
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>      <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a> = 0;  <span class="comment">// Initialise</span>
<a name="l317"><span class="linenum"> 317</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = array();
<a name="l318"><span class="linenum"> 318</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['logs'] = <a class="function" onClick="logFunction('get_logs')" href="../_functions/get_logs.html" onMouseOver="funcPopup(event,'get_logs')">get_logs</a>(<a class="var it6875" onMouseOver="hilite(6875)" onMouseOut="lolite()" onClick="logVariable('selector')" href="../_variables/selector.html">$selector</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, <a class="var it1013" onMouseOver="hilite(1013)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../_variables/limitfrom.html">$limitfrom</a>, <a class="var it1014" onMouseOver="hilite(1014)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../_variables/limitnum.html">$limitnum</a>, <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>);
<a name="l319"><span class="linenum"> 319</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['totalcount'] = <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>;
<a name="l320"><span class="linenum"> 320</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l321"><span class="linenum"> 321</span></a>  }
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>  function <a class="function" onClick="logFunction('print_log')" href="../_functions/print_log.html" onMouseOver="funcPopup(event,'print_log')">print_log</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>=0, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>=0, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>=&quot;l.time ASC&quot;, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>=0, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>=100,
<a name="l325"><span class="linenum"> 325</span></a>                     <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>=&quot;&quot;, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>=&quot;&quot;, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>=0, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>=&quot;&quot;, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>=0) {
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>      if (!<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="function" onClick="logFunction('build_logs_array')" href="../_functions/build_logs_array.html" onMouseOver="funcPopup(event,'build_logs_array')">build_logs_array</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>*<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>,
<a name="l330"><span class="linenum"> 330</span></a>                         <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l331"><span class="linenum"> 331</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;No logs found!&quot;);
<a name="l332"><span class="linenum"> 332</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l333"><span class="linenum"> 333</span></a>          exit;
<a name="l334"><span class="linenum"> 334</span></a>      }
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l339"><span class="linenum"> 339</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[0] = '';
<a name="l340"><span class="linenum"> 340</span></a>          if (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> = <a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>('all', 'c.id ASC', 'c.id,c.shortname')) {
<a name="l341"><span class="linenum"> 341</span></a>              foreach (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> as <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>) {
<a name="l342"><span class="linenum"> 342</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('id')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('shortname')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l343"><span class="linenum"> 343</span></a>              }
<a name="l344"><span class="linenum"> 344</span></a>          }
<a name="l345"><span class="linenum"> 345</span></a>      } else {
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l347"><span class="linenum"> 347</span></a>      }
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>      <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a> = <a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['totalcount'];
<a name="l350"><span class="linenum"> 350</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>=0;
<a name="l351"><span class="linenum"> 351</span></a>      <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a> = array();
<a name="l352"><span class="linenum"> 352</span></a>      <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a> = <a class="phpfunction" onClick="logFunction('getdate')" href="../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l353"><span class="linenum"> 353</span></a>      <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a> (0, 0, 0, <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mon&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mday&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;year&quot;]);
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>      <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;strftimedatetime&quot;);
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>      echo &quot;&lt;div class=\&quot;info\&quot;&gt;\n&quot;;
<a name="l358"><span class="linenum"> 358</span></a>      <a class="function" onClick="logFunction('print_string')" href="../_functions/print_string.html" onMouseOver="funcPopup(event,'print_string')">print_string</a>(&quot;displayingrecords&quot;, &quot;&quot;, <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>);
<a name="l359"><span class="linenum"> 359</span></a>      echo &quot;&lt;/div&gt;\n&quot;;
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('paging_bar')" href="../_functions/paging_bar.html" onMouseOver="funcPopup(event,'paging_bar')">paging_bar</a>(<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, &quot;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&amp;perpage=<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>&quot;);
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l364"><span class="linenum"> 364</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('classes')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a> = array('logtable','generaltable');
<a name="l365"><span class="linenum"> 365</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('align')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/align.html">align</a> = array('right', 'left', 'left');
<a name="l366"><span class="linenum"> 366</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a> = array(
<a name="l367"><span class="linenum"> 367</span></a>          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('time'),
<a name="l368"><span class="linenum"> 368</span></a>          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ip_address'),
<a name="l369"><span class="linenum"> 369</span></a>          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fullnameuser'),
<a name="l370"><span class="linenum"> 370</span></a>          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action'),
<a name="l371"><span class="linenum"> 371</span></a>          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('info')
<a name="l372"><span class="linenum"> 372</span></a>      );
<a name="l373"><span class="linenum"> 373</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a> = array();
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l376"><span class="linenum"> 376</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('align')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/align.html">align</a>, 'left');
<a name="l377"><span class="linenum"> 377</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('course'));
<a name="l378"><span class="linenum"> 378</span></a>      }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">    // Make sure that the logs array is an array, even it is empty, to avoid warnings from the foreach.</span>
<a name="l381"><span class="linenum"> 381</span></a>      if (empty(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'])) {
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'] = array();
<a name="l383"><span class="linenum"> 383</span></a>      }
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'] as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>          if (isset(<a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>])) {
<a name="l388"><span class="linenum"> 388</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>];
<a name="l389"><span class="linenum"> 389</span></a>          } else {
<a name="l390"><span class="linenum"> 390</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('log_display', array('module'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>, 'action'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>));
<a name="l391"><span class="linenum"> 391</span></a>              <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>] = <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>;
<a name="l392"><span class="linenum"> 392</span></a>          }
<a name="l393"><span class="linenum"> 393</span></a>          if (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)) {
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">            // ugly hack to make sure fullname is shown correctly</span>
<a name="l395"><span class="linenum"> 395</span></a>              if (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a> == 'user' &amp;&amp; <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a> == <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('firstname', &quot;' '&quot; , 'lastname')) {
<a name="l396"><span class="linenum"> 396</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)), true);
<a name="l397"><span class="linenum"> 397</span></a>              } else {
<a name="l398"><span class="linenum"> 398</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));
<a name="l399"><span class="linenum"> 399</span></a>              }
<a name="l400"><span class="linenum"> 400</span></a>          }
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">        //Filter log-&gt;info</span>
<a name="l403"><span class="linenum"> 403</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">        // If $log-&gt;url has been trimmed short by the db size restriction</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">        // code in add_to_log, keep a note so we don't add a link to a broken url</span>
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it35203" onMouseOver="hilite(35203)" onMouseOut="lolite()" onClick="logVariable('brokenurl')" href="../_variables/brokenurl.html">$brokenurl</a>=(<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('url')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/url.html">url</a>)==100 &amp;&amp; <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('url')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/url.html">url</a>,97)=='...');
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = array();
<a name="l410"><span class="linenum"> 410</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l411"><span class="linenum"> 411</span></a>              if (empty(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>)) {
<a name="l412"><span class="linenum"> 412</span></a>                  <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('site');
<a name="l413"><span class="linenum"> 413</span></a>              } else {
<a name="l414"><span class="linenum"> 414</span></a>                  <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = &quot;&lt;a href=\&quot;{<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>}/course/view.php?id={<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>}\&quot;&gt;&quot;. <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>]).&quot;&lt;/a&gt;&quot;;
<a name="l415"><span class="linenum"> 415</span></a>              }
<a name="l416"><span class="linenum"> 416</span></a>          }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>, '%a').' '.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>, <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a>);
<a name="l419"><span class="linenum"> 419</span></a>  
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;/iplookup/index.php?ip=<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>&amp;user=<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>&quot;);
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_link')" href="../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>, <span class="keyword">new </span><a class="class" onClick="logClass('popup_action')" href="../_classes/popup_action.html" onMouseOver="classPopup(event,'popup_action')">popup_action</a>('click', <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, 'iplookup', array('height' =&gt; 440, 'width' =&gt; 700)));
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;/user/view.php?id={<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>}&amp;course={<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>}&quot;), <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>, <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))));
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it35204" onMouseOver="hilite(35204)" onMouseOut="lolite()" onClick="logVariable('displayaction')" href="../_variables/displayaction.html">$displayaction</a>=&quot;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a> <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>&quot;;
<a name="l426"><span class="linenum"> 426</span></a>          if (<a class="var it35203" onMouseOver="hilite(35203)" onMouseOut="lolite()" onClick="logVariable('brokenurl')" href="../_variables/brokenurl.html">$brokenurl</a>) {
<a name="l427"><span class="linenum"> 427</span></a>              <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="var it35204" onMouseOver="hilite(35204)" onMouseOut="lolite()" onClick="logVariable('displayaction')" href="../_variables/displayaction.html">$displayaction</a>;
<a name="l428"><span class="linenum"> 428</span></a>          } else {
<a name="l429"><span class="linenum"> 429</span></a>              <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <a class="function" onClick="logFunction('make_log_url')" href="../_functions/make_log_url.html" onMouseOver="funcPopup(event,'make_log_url')">make_log_url</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>,<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('url')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l430"><span class="linenum"> 430</span></a>              <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_link')" href="../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it35204" onMouseOver="hilite(35204)" onMouseOut="lolite()" onClick="logVariable('displayaction')" href="../_variables/displayaction.html">$displayaction</a>, <span class="keyword">new </span><a class="class" onClick="logClass('popup_action')" href="../_classes/popup_action.html" onMouseOver="classPopup(event,'popup_action')">popup_action</a>('click', <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, 'fromloglive'), array('height' =&gt; 440, 'width' =&gt; 700));
<a name="l431"><span class="linenum"> 431</span></a>          }
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>[] = <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>;
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a>[] = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>;
<a name="l434"><span class="linenum"> 434</span></a>      }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l437"><span class="linenum"> 437</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('paging_bar')" href="../_functions/paging_bar.html" onMouseOver="funcPopup(event,'paging_bar')">paging_bar</a>(<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, &quot;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&amp;perpage=<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>&quot;);
<a name="l438"><span class="linenum"> 438</span></a>  }
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>  function <a class="function" onClick="logFunction('print_mnet_log')" href="../_functions/print_mnet_log.html" onMouseOver="funcPopup(event,'print_mnet_log')">print_mnet_log</a>(<a class="var it896" onMouseOver="hilite(896)" onMouseOut="lolite()" onClick="logVariable('hostid')" href="../_variables/hostid.html">$hostid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>=0, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>=0, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>=&quot;l.time ASC&quot;, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>=0, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>=100,
<a name="l442"><span class="linenum"> 442</span></a>                     <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>=&quot;&quot;, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>=&quot;&quot;, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>=0, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>=&quot;&quot;, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>=0) {
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>      if (!<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="function" onClick="logFunction('build_mnet_logs_array')" href="../_functions/build_mnet_logs_array.html" onMouseOver="funcPopup(event,'build_mnet_logs_array')">build_mnet_logs_array</a>(<a class="var it896" onMouseOver="hilite(896)" onMouseOut="lolite()" onClick="logVariable('hostid')" href="../_variables/hostid.html">$hostid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>*<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>,
<a name="l447"><span class="linenum"> 447</span></a>                         <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l448"><span class="linenum"> 448</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;No logs found!&quot;);
<a name="l449"><span class="linenum"> 449</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l450"><span class="linenum"> 450</span></a>          exit;
<a name="l451"><span class="linenum"> 451</span></a>      }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[0] = '';
<a name="l455"><span class="linenum"> 455</span></a>          if (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> = <a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>('all', 'c.id ASC', 'c.id,c.shortname,c.visible')) {
<a name="l456"><span class="linenum"> 456</span></a>              foreach (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> as <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>) {
<a name="l457"><span class="linenum"> 457</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('id')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('shortname')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l458"><span class="linenum"> 458</span></a>              }
<a name="l459"><span class="linenum"> 459</span></a>          }
<a name="l460"><span class="linenum"> 460</span></a>      }
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>      <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a> = <a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['totalcount'];
<a name="l463"><span class="linenum"> 463</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>=0;
<a name="l464"><span class="linenum"> 464</span></a>      <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a> = array();
<a name="l465"><span class="linenum"> 465</span></a>      <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a> = <a class="phpfunction" onClick="logFunction('getdate')" href="../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l466"><span class="linenum"> 466</span></a>      <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a> (0, 0, 0, <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mon&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mday&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;year&quot;]);
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>      <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;strftimedatetime&quot;);
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>      echo &quot;&lt;div class=\&quot;info\&quot;&gt;\n&quot;;
<a name="l471"><span class="linenum"> 471</span></a>      <a class="function" onClick="logFunction('print_string')" href="../_functions/print_string.html" onMouseOver="funcPopup(event,'print_string')">print_string</a>(&quot;displayingrecords&quot;, &quot;&quot;, <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>);
<a name="l472"><span class="linenum"> 472</span></a>      echo &quot;&lt;/div&gt;\n&quot;;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('paging_bar')" href="../_functions/paging_bar.html" onMouseOver="funcPopup(event,'paging_bar')">paging_bar</a>(<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, &quot;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&amp;perpage=<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>&quot;);
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>      echo &quot;&lt;table class=\&quot;logtable\&quot; cellpadding=\&quot;3\&quot; cellspacing=\&quot;0\&quot;&gt;\n&quot;;
<a name="l477"><span class="linenum"> 477</span></a>      echo &quot;&lt;tr&gt;&quot;;
<a name="l478"><span class="linenum"> 478</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l479"><span class="linenum"> 479</span></a>          echo &quot;&lt;th class=\&quot;c0 header\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('course').&quot;&lt;/th&gt;\n&quot;;
<a name="l480"><span class="linenum"> 480</span></a>      }
<a name="l481"><span class="linenum"> 481</span></a>      echo &quot;&lt;th class=\&quot;c1 header\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('time').&quot;&lt;/th&gt;\n&quot;;
<a name="l482"><span class="linenum"> 482</span></a>      echo &quot;&lt;th class=\&quot;c2 header\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ip_address').&quot;&lt;/th&gt;\n&quot;;
<a name="l483"><span class="linenum"> 483</span></a>      echo &quot;&lt;th class=\&quot;c3 header\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fullnameuser').&quot;&lt;/th&gt;\n&quot;;
<a name="l484"><span class="linenum"> 484</span></a>      echo &quot;&lt;th class=\&quot;c4 header\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action').&quot;&lt;/th&gt;\n&quot;;
<a name="l485"><span class="linenum"> 485</span></a>      echo &quot;&lt;th class=\&quot;c5 header\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('info').&quot;&lt;/th&gt;\n&quot;;
<a name="l486"><span class="linenum"> 486</span></a>      echo &quot;&lt;/tr&gt;\n&quot;;
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>      if (empty(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'])) {
<a name="l489"><span class="linenum"> 489</span></a>          echo &quot;&lt;/table&gt;\n&quot;;
<a name="l490"><span class="linenum"> 490</span></a>          return;
<a name="l491"><span class="linenum"> 491</span></a>      }
<a name="l492"><span class="linenum"> 492</span></a>  
<a name="l493"><span class="linenum"> 493</span></a>      <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = 1;
<a name="l494"><span class="linenum"> 494</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'] as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('coursename')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/coursename.html">coursename</a>;
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> + 1) % 2;
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>          if (isset(<a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>])) {
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>];
<a name="l501"><span class="linenum"> 501</span></a>          } else {
<a name="l502"><span class="linenum"> 502</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('log_display', array('module'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>, 'action'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>));
<a name="l503"><span class="linenum"> 503</span></a>              <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>] = <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>;
<a name="l504"><span class="linenum"> 504</span></a>          }
<a name="l505"><span class="linenum"> 505</span></a>          if (0 &amp;&amp; <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> &amp;&amp; !empty(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)) {
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">            // ugly hack to make sure fullname is shown correctly</span>
<a name="l507"><span class="linenum"> 507</span></a>              if ((<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a> == 'user') and (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a> == <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('firstname', &quot;' '&quot; , 'lastname'))) {
<a name="l508"><span class="linenum"> 508</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)), true);
<a name="l509"><span class="linenum"> 509</span></a>              } else {
<a name="l510"><span class="linenum"> 510</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));
<a name="l511"><span class="linenum"> 511</span></a>              }
<a name="l512"><span class="linenum"> 512</span></a>          }
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">        //Filter log-&gt;info</span>
<a name="l515"><span class="linenum"> 515</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>          echo '&lt;tr class=&quot;r'.<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>.'&quot;&gt;';
<a name="l518"><span class="linenum"> 518</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l519"><span class="linenum"> 519</span></a>              <a class="var it8904" onMouseOver="hilite(8904)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../_variables/courseshortname.html">$courseshortname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>], true, array('context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>)));
<a name="l520"><span class="linenum"> 520</span></a>              echo &quot;&lt;td class=\&quot;r<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> c0\&quot; &gt;\n&quot;;
<a name="l521"><span class="linenum"> 521</span></a>              echo &quot;    &lt;a href=\&quot;{<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>}/course/view.php?id={<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>}\&quot;&gt;&quot;.<a class="var it8904" onMouseOver="hilite(8904)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../_variables/courseshortname.html">$courseshortname</a>.&quot;&lt;/a&gt;\n&quot;;
<a name="l522"><span class="linenum"> 522</span></a>              echo &quot;&lt;/td&gt;\n&quot;;
<a name="l523"><span class="linenum"> 523</span></a>          }
<a name="l524"><span class="linenum"> 524</span></a>          echo &quot;&lt;td class=\&quot;r<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> c1\&quot; align=\&quot;right\&quot;&gt;&quot;.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>, '%a').
<a name="l525"><span class="linenum"> 525</span></a>               ' '.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>, <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a>).&quot;&lt;/td&gt;\n&quot;;
<a name="l526"><span class="linenum"> 526</span></a>          echo &quot;&lt;td class=\&quot;r<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> c2\&quot; &gt;\n&quot;;
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;/iplookup/index.php?ip=<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>&amp;user=<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>&quot;);
<a name="l528"><span class="linenum"> 528</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_link')" href="../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>, <span class="keyword">new </span><a class="class" onClick="logClass('popup_action')" href="../_classes/popup_action.html" onMouseOver="classPopup(event,'popup_action')">popup_action</a>('click', <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, 'iplookup', array('height' =&gt; 400, 'width' =&gt; 700)));
<a name="l529"><span class="linenum"> 529</span></a>          echo &quot;&lt;/td&gt;\n&quot;;
<a name="l530"><span class="linenum"> 530</span></a>          <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>, <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l531"><span class="linenum"> 531</span></a>          echo &quot;&lt;td class=\&quot;r<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> c3\&quot; &gt;\n&quot;;
<a name="l532"><span class="linenum"> 532</span></a>          echo &quot;    &lt;a href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/user/view.php?id={<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>}\&quot;&gt;<a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>&lt;/a&gt;\n&quot;;
<a name="l533"><span class="linenum"> 533</span></a>          echo &quot;&lt;/td&gt;\n&quot;;
<a name="l534"><span class="linenum"> 534</span></a>          echo &quot;&lt;td class=\&quot;r<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> c4\&quot;&gt;\n&quot;;
<a name="l535"><span class="linenum"> 535</span></a>          echo <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a> .': '.<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>;
<a name="l536"><span class="linenum"> 536</span></a>          echo &quot;&lt;/td&gt;\n&quot;;
<a name="l537"><span class="linenum"> 537</span></a>          echo &quot;&lt;td class=\&quot;r<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> c5\&quot;&gt;{<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>}&lt;/td&gt;\n&quot;;
<a name="l538"><span class="linenum"> 538</span></a>          echo &quot;&lt;/tr&gt;\n&quot;;
<a name="l539"><span class="linenum"> 539</span></a>      }
<a name="l540"><span class="linenum"> 540</span></a>      echo &quot;&lt;/table&gt;\n&quot;;
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('paging_bar')" href="../_functions/paging_bar.html" onMouseOver="funcPopup(event,'paging_bar')">paging_bar</a>(<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, &quot;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>&amp;perpage=<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>&quot;);
<a name="l543"><span class="linenum"> 543</span></a>  }
<a name="l544"><span class="linenum"> 544</span></a>  
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>  function <a class="function" onClick="logFunction('print_log_csv')" href="../_functions/print_log_csv.html" onMouseOver="funcPopup(event,'print_log_csv')">print_log_csv</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>='l.time DESC', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>,
<a name="l547"><span class="linenum"> 547</span></a>                          <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>) {
<a name="l548"><span class="linenum"> 548</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/csvlib.class.php');
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>      <a class="var it35205" onMouseOver="hilite(35205)" onMouseOut="lolite()" onClick="logVariable('csvexporter')" href="../_variables/csvexporter.html">$csvexporter</a> = <span class="keyword">new </span><a class="class" onClick="logClass('csv_export_writer')" href="../_classes/csv_export_writer.html" onMouseOver="classPopup(event,'csv_export_writer')">csv_export_writer</a>('tab');
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a> = array();
<a name="l555"><span class="linenum"> 555</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('course');
<a name="l556"><span class="linenum"> 556</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('time');
<a name="l557"><span class="linenum"> 557</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ip_address');
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fullnameuser');
<a name="l559"><span class="linenum"> 559</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action');
<a name="l560"><span class="linenum"> 560</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('info');
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>      if (!<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="function" onClick="logFunction('build_logs_array')" href="../_functions/build_logs_array.html" onMouseOver="funcPopup(event,'build_logs_array')">build_logs_array</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, '', '',
<a name="l563"><span class="linenum"> 563</span></a>                         <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l564"><span class="linenum"> 564</span></a>          return false;
<a name="l565"><span class="linenum"> 565</span></a>      }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l570"><span class="linenum"> 570</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[0] = '';
<a name="l571"><span class="linenum"> 571</span></a>          if (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> = <a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>('all', 'c.id ASC', 'c.id,c.shortname')) {
<a name="l572"><span class="linenum"> 572</span></a>              foreach (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> as <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>) {
<a name="l573"><span class="linenum"> 573</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('id')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('shortname')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l574"><span class="linenum"> 574</span></a>              }
<a name="l575"><span class="linenum"> 575</span></a>          }
<a name="l576"><span class="linenum"> 576</span></a>      } else {
<a name="l577"><span class="linenum"> 577</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l578"><span class="linenum"> 578</span></a>      }
<a name="l579"><span class="linenum"> 579</span></a>  
<a name="l580"><span class="linenum"> 580</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>=0;
<a name="l581"><span class="linenum"> 581</span></a>      <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a> = array();
<a name="l582"><span class="linenum"> 582</span></a>      <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a> = <a class="phpfunction" onClick="logFunction('getdate')" href="../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l583"><span class="linenum"> 583</span></a>      <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a> (0, 0, 0, <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mon&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mday&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;year&quot;]);
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>      <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;strftimedatetime&quot;);
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>      <a class="var it35205" onMouseOver="hilite(35205)" onMouseOut="lolite()" onClick="logVariable('csvexporter')" href="../_variables/csvexporter.html">$csvexporter</a>-&gt;<a class="function" onClick="logFunction('set_filename')" href="../_functions/set_filename.html" onMouseOver="funcPopup(event,'set_filename')">set_filename</a>('logs', '.txt');
<a name="l588"><span class="linenum"> 588</span></a>      <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = array(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savedat').<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a>));
<a name="l589"><span class="linenum"> 589</span></a>      <a class="var it35205" onMouseOver="hilite(35205)" onMouseOut="lolite()" onClick="logVariable('csvexporter')" href="../_variables/csvexporter.html">$csvexporter</a>-&gt;<a class="function" onClick="logFunction('add_data')" href="../_functions/add_data.html" onMouseOver="funcPopup(event,'add_data')">add_data</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>);
<a name="l590"><span class="linenum"> 590</span></a>      <a class="var it35205" onMouseOver="hilite(35205)" onMouseOut="lolite()" onClick="logVariable('csvexporter')" href="../_variables/csvexporter.html">$csvexporter</a>-&gt;<a class="function" onClick="logFunction('add_data')" href="../_functions/add_data.html" onMouseOver="funcPopup(event,'add_data')">add_data</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>);
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>      if (empty(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'])) {
<a name="l593"><span class="linenum"> 593</span></a>          return true;
<a name="l594"><span class="linenum"> 594</span></a>      }
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'] as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l597"><span class="linenum"> 597</span></a>          if (isset(<a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>])) {
<a name="l598"><span class="linenum"> 598</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>];
<a name="l599"><span class="linenum"> 599</span></a>          } else {
<a name="l600"><span class="linenum"> 600</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('log_display', array('module'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>, 'action'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>));
<a name="l601"><span class="linenum"> 601</span></a>              <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>] = <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>;
<a name="l602"><span class="linenum"> 602</span></a>          }
<a name="l603"><span class="linenum"> 603</span></a>          if (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)) {
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">            // ugly hack to make sure fullname is shown correctly</span>
<a name="l605"><span class="linenum"> 605</span></a>              if ((<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a> == 'user') and (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a> ==  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('firstname', &quot;' '&quot; , 'lastname'))) {
<a name="l606"><span class="linenum"> 606</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)), true);
<a name="l607"><span class="linenum"> 607</span></a>              } else {
<a name="l608"><span class="linenum"> 608</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));
<a name="l609"><span class="linenum"> 609</span></a>              }
<a name="l610"><span class="linenum"> 610</span></a>          }
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">        //Filter log-&gt;info</span>
<a name="l613"><span class="linenum"> 613</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="phpfunction" onClick="logFunction('urldecode')" href="../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));    <span class="comment">// Some XSS protection</span>
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>          <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l617"><span class="linenum"> 617</span></a>          <a class="var it35206" onMouseOver="hilite(35206)" onMouseOut="lolite()" onClick="logVariable('firstField')" href="../_variables/firstField.html">$firstField</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>], true, array('context' =&gt; <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>));
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>, <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>));
<a name="l619"><span class="linenum"> 619</span></a>          <a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>. <a class="function" onClick="logFunction('make_log_url')" href="../_functions/make_log_url.html" onMouseOver="funcPopup(event,'make_log_url')">make_log_url</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>,<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('url')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l620"><span class="linenum"> 620</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = array(<a class="var it35206" onMouseOver="hilite(35206)" onMouseOut="lolite()" onClick="logVariable('firstField')" href="../_variables/firstField.html">$firstField</a>, <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>, <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a>), <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>.' '.<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>.' ('.<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>.')', <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l621"><span class="linenum"> 621</span></a>          <a class="var it35205" onMouseOver="hilite(35205)" onMouseOut="lolite()" onClick="logVariable('csvexporter')" href="../_variables/csvexporter.html">$csvexporter</a>-&gt;<a class="function" onClick="logFunction('add_data')" href="../_functions/add_data.html" onMouseOver="funcPopup(event,'add_data')">add_data</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>);
<a name="l622"><span class="linenum"> 622</span></a>      }
<a name="l623"><span class="linenum"> 623</span></a>      <a class="var it35205" onMouseOver="hilite(35205)" onMouseOut="lolite()" onClick="logVariable('csvexporter')" href="../_variables/csvexporter.html">$csvexporter</a>-&gt;<a class="function" onClick="logFunction('download_file')" href="../_functions/download_file.html" onMouseOver="funcPopup(event,'download_file')">download_file</a>();
<a name="l624"><span class="linenum"> 624</span></a>      return true;
<a name="l625"><span class="linenum"> 625</span></a>  }
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>  function <a class="function" onClick="logFunction('print_log_xls')" href="../_functions/print_log_xls.html" onMouseOver="funcPopup(event,'print_log_xls')">print_log_xls</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>='l.time DESC', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>,
<a name="l629"><span class="linenum"> 629</span></a>                          <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>) {
<a name="l630"><span class="linenum"> 630</span></a>  
<a name="l631"><span class="linenum"> 631</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/excellib.class.php&quot;);
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>      if (!<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="function" onClick="logFunction('build_logs_array')" href="../_functions/build_logs_array.html" onMouseOver="funcPopup(event,'build_logs_array')">build_logs_array</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, '', '',
<a name="l636"><span class="linenum"> 636</span></a>                         <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l637"><span class="linenum"> 637</span></a>          return false;
<a name="l638"><span class="linenum"> 638</span></a>      }
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l643"><span class="linenum"> 643</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[0] = '';
<a name="l644"><span class="linenum"> 644</span></a>          if (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> = <a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>('all', 'c.id ASC', 'c.id,c.shortname')) {
<a name="l645"><span class="linenum"> 645</span></a>              foreach (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> as <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>) {
<a name="l646"><span class="linenum"> 646</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('id')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('shortname')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l647"><span class="linenum"> 647</span></a>              }
<a name="l648"><span class="linenum"> 648</span></a>          }
<a name="l649"><span class="linenum"> 649</span></a>      } else {
<a name="l650"><span class="linenum"> 650</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l651"><span class="linenum"> 651</span></a>      }
<a name="l652"><span class="linenum"> 652</span></a>  
<a name="l653"><span class="linenum"> 653</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>=0;
<a name="l654"><span class="linenum"> 654</span></a>      <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a> = array();
<a name="l655"><span class="linenum"> 655</span></a>      <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a> = <a class="phpfunction" onClick="logFunction('getdate')" href="../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l656"><span class="linenum"> 656</span></a>      <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a> (0, 0, 0, <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mon&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mday&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;year&quot;]);
<a name="l657"><span class="linenum"> 657</span></a>  
<a name="l658"><span class="linenum"> 658</span></a>      <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;strftimedatetime&quot;);
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>      <a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>(<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>)/(<a class="constant" onClick="logConstant('EXCELROWS')" href="../_constants/EXCELROWS.html" onMouseOver="constPopup(event,'EXCELROWS')">EXCELROWS</a>-<a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>+1));
<a name="l661"><span class="linenum"> 661</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = 'logs_'.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backupnameformat', 'langconfig'),99,false);
<a name="l662"><span class="linenum"> 662</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> .= '.xls';
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>      <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MoodleExcelWorkbook')" href="../_classes/moodleexcelworkbook.html" onMouseOver="classPopup(event,'moodleexcelworkbook')">MoodleExcelWorkbook</a>('-');
<a name="l665"><span class="linenum"> 665</span></a>      <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('send')" href="../_functions/send.html" onMouseOver="funcPopup(event,'send')">send</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>      <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a> = array();
<a name="l668"><span class="linenum"> 668</span></a>      <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../_variables/headers.html">$headers</a> = array(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('course'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('time'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ip_address'),
<a name="l669"><span class="linenum"> 669</span></a>                          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fullnameuser'),    <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('info'));
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">    // Creating worksheets</span>
<a name="l672"><span class="linenum"> 672</span></a>      for (<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a> = 1; <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a> &lt;= <a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a>; <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>++) {
<a name="l673"><span class="linenum"> 673</span></a>          <a class="var it5053" onMouseOver="hilite(5053)" onMouseOut="lolite()" onClick="logVariable('sheettitle')" href="../_variables/sheettitle.html">$sheettitle</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('logs').' '.<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>.'-'.<a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a>;
<a name="l674"><span class="linenum"> 674</span></a>          <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>] = <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('add_worksheet')" href="../_functions/add_worksheet.html" onMouseOver="funcPopup(event,'add_worksheet')">add_worksheet</a>(<a class="var it5053" onMouseOver="hilite(5053)" onMouseOut="lolite()" onClick="logVariable('sheettitle')" href="../_variables/sheettitle.html">$sheettitle</a>);
<a name="l675"><span class="linenum"> 675</span></a>          <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>]-&gt;<a class="function" onClick="logFunction('set_column')" href="../_functions/set_column.html" onMouseOver="funcPopup(event,'set_column')">set_column</a>(1, 1, 30);
<a name="l676"><span class="linenum"> 676</span></a>          <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>]-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(0, 0, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savedat').
<a name="l677"><span class="linenum"> 677</span></a>                                      <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a>));
<a name="l678"><span class="linenum"> 678</span></a>          <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('col')" href="../_variables/col.html">$col</a> = 0;
<a name="l679"><span class="linenum"> 679</span></a>          foreach (<a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../_variables/headers.html">$headers</a> as <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l680"><span class="linenum"> 680</span></a>              <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>]-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>-1,<a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('col')" href="../_variables/col.html">$col</a>,<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>,'');
<a name="l681"><span class="linenum"> 681</span></a>              <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('col')" href="../_variables/col.html">$col</a>++;
<a name="l682"><span class="linenum"> 682</span></a>          }
<a name="l683"><span class="linenum"> 683</span></a>      }
<a name="l684"><span class="linenum"> 684</span></a>  
<a name="l685"><span class="linenum"> 685</span></a>      if (empty(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'])) {
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l687"><span class="linenum"> 687</span></a>          return true;
<a name="l688"><span class="linenum"> 688</span></a>      }
<a name="l689"><span class="linenum"> 689</span></a>  
<a name="l690"><span class="linenum"> 690</span></a>      <a class="var it35209" onMouseOver="hilite(35209)" onMouseOut="lolite()" onClick="logVariable('formatDate')" href="../_variables/formatDate.html">$formatDate</a> =&amp; <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('add_format')" href="../_functions/add_format.html" onMouseOver="funcPopup(event,'add_format')">add_format</a>();
<a name="l691"><span class="linenum"> 691</span></a>      <a class="var it35209" onMouseOver="hilite(35209)" onMouseOut="lolite()" onClick="logVariable('formatDate')" href="../_variables/formatDate.html">$formatDate</a>-&gt;<a class="function" onClick="logFunction('set_num_format')" href="../_functions/set_num_format.html" onMouseOver="funcPopup(event,'set_num_format')">set_num_format</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('log_excel_date_format'));
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>      <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = <a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>;
<a name="l694"><span class="linenum"> 694</span></a>      <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a> = 1;
<a name="l695"><span class="linenum"> 695</span></a>      <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a> =&amp; <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>];
<a name="l696"><span class="linenum"> 696</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'] as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l697"><span class="linenum"> 697</span></a>          if (isset(<a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>])) {
<a name="l698"><span class="linenum"> 698</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>];
<a name="l699"><span class="linenum"> 699</span></a>          } else {
<a name="l700"><span class="linenum"> 700</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('log_display', array('module'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>, 'action'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>));
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>] = <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>;
<a name="l702"><span class="linenum"> 702</span></a>          }
<a name="l703"><span class="linenum"> 703</span></a>          if (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)) {
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">            // ugly hack to make sure fullname is shown correctly</span>
<a name="l705"><span class="linenum"> 705</span></a>              if ((<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a> == 'user') and (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a> == <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('firstname', &quot;' '&quot; , 'lastname'))) {
<a name="l706"><span class="linenum"> 706</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)), true);
<a name="l707"><span class="linenum"> 707</span></a>              } else {
<a name="l708"><span class="linenum"> 708</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));
<a name="l709"><span class="linenum"> 709</span></a>              }
<a name="l710"><span class="linenum"> 710</span></a>          }
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">        // Filter log-&gt;info</span>
<a name="l713"><span class="linenum"> 713</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l714"><span class="linenum"> 714</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="phpfunction" onClick="logFunction('urldecode')" href="../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));  <span class="comment">// Some XSS protection</span>
<a name="l715"><span class="linenum"> 715</span></a>  
<a name="l716"><span class="linenum"> 716</span></a>          if (<a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a>&gt;1) {
<a name="l717"><span class="linenum"> 717</span></a>              if (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> &gt; <a class="constant" onClick="logConstant('EXCELROWS')" href="../_constants/EXCELROWS.html" onMouseOver="constPopup(event,'EXCELROWS')">EXCELROWS</a>) {
<a name="l718"><span class="linenum"> 718</span></a>                  <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>++;
<a name="l719"><span class="linenum"> 719</span></a>                  <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a> =&amp; <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>];
<a name="l720"><span class="linenum"> 720</span></a>                  <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = <a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>;
<a name="l721"><span class="linenum"> 721</span></a>              }
<a name="l722"><span class="linenum"> 722</span></a>          }
<a name="l723"><span class="linenum"> 723</span></a>  
<a name="l724"><span class="linenum"> 724</span></a>          <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 0, <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>], true, array('context' =&gt; <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)), '');
<a name="l727"><span class="linenum"> 727</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_date')" href="../_functions/write_date.html" onMouseOver="funcPopup(event,'write_date')">write_date</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 1, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>, <a class="var it35209" onMouseOver="hilite(35209)" onMouseOut="lolite()" onClick="logVariable('formatDate')" href="../_variables/formatDate.html">$formatDate</a>); <span class="comment">// write_date() does conversion/timezone support. MDL-14934</span>
<a name="l728"><span class="linenum"> 728</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 2, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>, '');
<a name="l729"><span class="linenum"> 729</span></a>          <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>, <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>));
<a name="l730"><span class="linenum"> 730</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 3, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>, '');
<a name="l731"><span class="linenum"> 731</span></a>          <a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>. <a class="function" onClick="logFunction('make_log_url')" href="../_functions/make_log_url.html" onMouseOver="funcPopup(event,'make_log_url')">make_log_url</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>,<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('url')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l732"><span class="linenum"> 732</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 4, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>.' '.<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>.' ('.<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>.')', '');
<a name="l733"><span class="linenum"> 733</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 5, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>, '');
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>++;
<a name="l736"><span class="linenum"> 736</span></a>      }
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>      <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l739"><span class="linenum"> 739</span></a>      return true;
<a name="l740"><span class="linenum"> 740</span></a>  }
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>  function <a class="function" onClick="logFunction('print_log_ods')" href="../_functions/print_log_ods.html" onMouseOver="funcPopup(event,'print_log_ods')">print_log_ods</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>='l.time DESC', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>,
<a name="l743"><span class="linenum"> 743</span></a>                          <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>) {
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/odslib.class.php&quot;);
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>      if (!<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="function" onClick="logFunction('build_logs_array')" href="../_functions/build_logs_array.html" onMouseOver="funcPopup(event,'build_logs_array')">build_logs_array</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, '', '',
<a name="l750"><span class="linenum"> 750</span></a>                         <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it3572" onMouseOver="hilite(3572)" onMouseOut="lolite()" onClick="logVariable('modaction')" href="../_variables/modaction.html">$modaction</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)) {
<a name="l751"><span class="linenum"> 751</span></a>          return false;
<a name="l752"><span class="linenum"> 752</span></a>      }
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l757"><span class="linenum"> 757</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[0] = '';
<a name="l758"><span class="linenum"> 758</span></a>          if (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> = <a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>('all', 'c.id ASC', 'c.id,c.shortname')) {
<a name="l759"><span class="linenum"> 759</span></a>              foreach (<a class="var it3584" onMouseOver="hilite(3584)" onMouseOut="lolite()" onClick="logVariable('ccc')" href="../_variables/ccc.html">$ccc</a> as <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>) {
<a name="l760"><span class="linenum"> 760</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('id')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../_variables/cc.html">$cc</a>-&gt;<a onClick="logVariable('shortname')" class="var it45100" onMouseOver="hilite(45100)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l761"><span class="linenum"> 761</span></a>              }
<a name="l762"><span class="linenum"> 762</span></a>          }
<a name="l763"><span class="linenum"> 763</span></a>      } else {
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l765"><span class="linenum"> 765</span></a>      }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>=0;
<a name="l768"><span class="linenum"> 768</span></a>      <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a> = array();
<a name="l769"><span class="linenum"> 769</span></a>      <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a> = <a class="phpfunction" onClick="logFunction('getdate')" href="../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l770"><span class="linenum"> 770</span></a>      <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a> (0, 0, 0, <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mon&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;mday&quot;], <a class="var it4958" onMouseOver="hilite(4958)" onMouseOut="lolite()" onClick="logVariable('tt')" href="../_variables/tt.html">$tt</a>[&quot;year&quot;]);
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>      <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;strftimedatetime&quot;);
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>      <a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>(<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>)/(<a class="constant" onClick="logConstant('EXCELROWS')" href="../_constants/EXCELROWS.html" onMouseOver="constPopup(event,'EXCELROWS')">EXCELROWS</a>-<a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>+1));
<a name="l775"><span class="linenum"> 775</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = 'logs_'.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backupnameformat', 'langconfig'),99,false);
<a name="l776"><span class="linenum"> 776</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> .= '.ods';
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>      <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MoodleODSWorkbook')" href="../_classes/moodleodsworkbook.html" onMouseOver="classPopup(event,'moodleodsworkbook')">MoodleODSWorkbook</a>('-');
<a name="l779"><span class="linenum"> 779</span></a>      <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('send')" href="../_functions/send.html" onMouseOver="funcPopup(event,'send')">send</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>      <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a> = array();
<a name="l782"><span class="linenum"> 782</span></a>      <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../_variables/headers.html">$headers</a> = array(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('course'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('time'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ip_address'),
<a name="l783"><span class="linenum"> 783</span></a>                          <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fullnameuser'),    <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('info'));
<a name="l784"><span class="linenum"> 784</span></a>  
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">    // Creating worksheets</span>
<a name="l786"><span class="linenum"> 786</span></a>      for (<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a> = 1; <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a> &lt;= <a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a>; <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>++) {
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it5053" onMouseOver="hilite(5053)" onMouseOut="lolite()" onClick="logVariable('sheettitle')" href="../_variables/sheettitle.html">$sheettitle</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('logs').' '.<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>.'-'.<a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a>;
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>] = <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('add_worksheet')" href="../_functions/add_worksheet.html" onMouseOver="funcPopup(event,'add_worksheet')">add_worksheet</a>(<a class="var it5053" onMouseOver="hilite(5053)" onMouseOut="lolite()" onClick="logVariable('sheettitle')" href="../_variables/sheettitle.html">$sheettitle</a>);
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>]-&gt;<a class="function" onClick="logFunction('set_column')" href="../_functions/set_column.html" onMouseOver="funcPopup(event,'set_column')">set_column</a>(1, 1, 30);
<a name="l790"><span class="linenum"> 790</span></a>          <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>]-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(0, 0, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savedat').
<a name="l791"><span class="linenum"> 791</span></a>                                      <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it35201" onMouseOver="hilite(35201)" onMouseOut="lolite()" onClick="logVariable('strftimedatetime')" href="../_variables/strftimedatetime.html">$strftimedatetime</a>));
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('col')" href="../_variables/col.html">$col</a> = 0;
<a name="l793"><span class="linenum"> 793</span></a>          foreach (<a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../_variables/headers.html">$headers</a> as <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l794"><span class="linenum"> 794</span></a>              <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>]-&gt;<a class="function" onClick="logFunction('write')" href="../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>-1,<a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('col')" href="../_variables/col.html">$col</a>,<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>,'');
<a name="l795"><span class="linenum"> 795</span></a>              <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('col')" href="../_variables/col.html">$col</a>++;
<a name="l796"><span class="linenum"> 796</span></a>          }
<a name="l797"><span class="linenum"> 797</span></a>      }
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>      if (empty(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'])) {
<a name="l800"><span class="linenum"> 800</span></a>          <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l801"><span class="linenum"> 801</span></a>          return true;
<a name="l802"><span class="linenum"> 802</span></a>      }
<a name="l803"><span class="linenum"> 803</span></a>  
<a name="l804"><span class="linenum"> 804</span></a>      <a class="var it35209" onMouseOver="hilite(35209)" onMouseOut="lolite()" onClick="logVariable('formatDate')" href="../_variables/formatDate.html">$formatDate</a> =&amp; <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('add_format')" href="../_functions/add_format.html" onMouseOver="funcPopup(event,'add_format')">add_format</a>();
<a name="l805"><span class="linenum"> 805</span></a>      <a class="var it35209" onMouseOver="hilite(35209)" onMouseOut="lolite()" onClick="logVariable('formatDate')" href="../_variables/formatDate.html">$formatDate</a>-&gt;<a class="function" onClick="logFunction('set_num_format')" href="../_functions/set_num_format.html" onMouseOver="funcPopup(event,'set_num_format')">set_num_format</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('log_excel_date_format'));
<a name="l806"><span class="linenum"> 806</span></a>  
<a name="l807"><span class="linenum"> 807</span></a>      <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = <a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>;
<a name="l808"><span class="linenum"> 808</span></a>      <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a> = 1;
<a name="l809"><span class="linenum"> 809</span></a>      <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a> =&amp; <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>];
<a name="l810"><span class="linenum"> 810</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>['logs'] as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l811"><span class="linenum"> 811</span></a>          if (isset(<a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>])) {
<a name="l812"><span class="linenum"> 812</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>];
<a name="l813"><span class="linenum"> 813</span></a>          } else {
<a name="l814"><span class="linenum"> 814</span></a>              <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('log_display', array('module'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>, 'action'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>));
<a name="l815"><span class="linenum"> 815</span></a>              <a class="var it35200" onMouseOver="hilite(35200)" onMouseOut="lolite()" onClick="logVariable('ldcache')" href="../_variables/ldcache.html">$ldcache</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>][<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>] = <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>;
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>          if (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)) {
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment">            // ugly hack to make sure fullname is shown correctly</span>
<a name="l819"><span class="linenum"> 819</span></a>              if ((<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a> == 'user') and (<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a> == <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('firstname', &quot;' '&quot; , 'lastname'))) {
<a name="l820"><span class="linenum"> 820</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>)), true);
<a name="l821"><span class="linenum"> 821</span></a>              } else {
<a name="l822"><span class="linenum"> 822</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('mtable')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/mtable.html">mtable</a>, <a class="var it35202" onMouseOver="hilite(35202)" onMouseOut="lolite()" onClick="logVariable('ld')" href="../_variables/ld.html">$ld</a>-&gt;<a onClick="logVariable('field')" class="var it45101" onMouseOver="hilite(45101)" onMouseOut="lolite()" href="../_variables/field.html">field</a>, array('id'=&gt;<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));
<a name="l823"><span class="linenum"> 823</span></a>              }
<a name="l824"><span class="linenum"> 824</span></a>          }
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">        // Filter log-&gt;info</span>
<a name="l827"><span class="linenum"> 827</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l828"><span class="linenum"> 828</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="phpfunction" onClick="logFunction('urldecode')" href="../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>));  <span class="comment">// Some XSS protection</span>
<a name="l829"><span class="linenum"> 829</span></a>  
<a name="l830"><span class="linenum"> 830</span></a>          if (<a class="var it35207" onMouseOver="hilite(35207)" onMouseOut="lolite()" onClick="logVariable('nroPages')" href="../_variables/nroPages.html">$nroPages</a>&gt;1) {
<a name="l831"><span class="linenum"> 831</span></a>              if (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> &gt; <a class="constant" onClick="logConstant('EXCELROWS')" href="../_constants/EXCELROWS.html" onMouseOver="constPopup(event,'EXCELROWS')">EXCELROWS</a>) {
<a name="l832"><span class="linenum"> 832</span></a>                  <a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>++;
<a name="l833"><span class="linenum"> 833</span></a>                  <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a> =&amp; <a class="var it1713" onMouseOver="hilite(1713)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../_variables/worksheet.html">$worksheet</a>[<a class="var it35208" onMouseOver="hilite(35208)" onMouseOut="lolite()" onClick="logVariable('wsnumber')" href="../_variables/wsnumber.html">$wsnumber</a>];
<a name="l834"><span class="linenum"> 834</span></a>                  <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> = <a class="constant" onClick="logConstant('FIRSTUSEDEXCELROW')" href="../_constants/FIRSTUSEDEXCELROW.html" onMouseOver="constPopup(event,'FIRSTUSEDEXCELROW')">FIRSTUSEDEXCELROW</a>;
<a name="l835"><span class="linenum"> 835</span></a>              }
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>  
<a name="l838"><span class="linenum"> 838</span></a>          <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 0, <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('course')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/course.html">course</a>], true, array('context' =&gt; <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)));
<a name="l841"><span class="linenum"> 841</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_date')" href="../_functions/write_date.html" onMouseOver="funcPopup(event,'write_date')">write_date</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 1, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('time')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/time.html">time</a>);
<a name="l842"><span class="linenum"> 842</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 2, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('ip')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/ip.html">ip</a>);
<a name="l843"><span class="linenum"> 843</span></a>          <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>, <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>));
<a name="l844"><span class="linenum"> 844</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 3, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>);
<a name="l845"><span class="linenum"> 845</span></a>          <a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>. <a class="function" onClick="logFunction('make_log_url')" href="../_functions/make_log_url.html" onMouseOver="funcPopup(event,'make_log_url')">make_log_url</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>,<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('url')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l846"><span class="linenum"> 846</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 4, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('module')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/module.html">module</a>.' '.<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('action')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/action.html">action</a>.' ('.<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>.')');
<a name="l847"><span class="linenum"> 847</span></a>          <a class="var it5532" onMouseOver="hilite(5532)" onMouseOut="lolite()" onClick="logVariable('myxls')" href="../_variables/myxls.html">$myxls</a>-&gt;<a class="function" onClick="logFunction('write_string')" href="../_functions/write_string.html" onMouseOver="funcPopup(event,'write_string')">write_string</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>, 5, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>);
<a name="l848"><span class="linenum"> 848</span></a>  
<a name="l849"><span class="linenum"> 849</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>++;
<a name="l850"><span class="linenum"> 850</span></a>      }
<a name="l851"><span class="linenum"> 851</span></a>  
<a name="l852"><span class="linenum"> 852</span></a>      <a class="var it4518" onMouseOver="hilite(4518)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l853"><span class="linenum"> 853</span></a>      return true;
<a name="l854"><span class="linenum"> 854</span></a>  }
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">/**</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment"> * Checks the integrity of the course data.</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment"> *</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment"> * In summary - compares course_sections.sequence and course_modules.section.</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment"> *</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment"> * More detailed, checks that:</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment"> * - course_sections.sequence contains each module id not more than once in the course</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment"> * - for each moduleid from course_sections.sequence the field course_modules.section</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment"> *   refers to the same section id (this means course_sections.sequence is more</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment"> *   important if they are different)</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment"> * - ($fullcheck only) each module in the course is present in one of</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment"> *   course_sections.sequence</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment"> * - ($fullcheck only) removes non-existing course modules from section sequences</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment"> *</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment"> * If there are any mismatches, the changes are made and records are updated in DB.</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment"> *</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment"> * Course cache is NOT rebuilt if there are any errors!</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment"> *</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment"> * This function is used each time when course cache is being rebuilt with $fullcheck = false</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment"> * and in CLI script admin/cli/fix_course_sequence.php with $fullcheck = true</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment"> *</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment"> * @param int $courseid id of the course</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment"> * @param array $rawmods result of funciton {@link get_course_mods()} - containst</span>
<a name="l879"><span class="linenum"> 879</span></a>  <span class="comment"> *     the list of enabled course modules in the course. Retrieved from DB if not specified.</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment"> *     Argument ignored in cashe of $fullcheck, the list is retrieved form DB anyway.</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment"> * @param array $sections records from course_sections table for this course.</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment"> *     Retrieved from DB if not specified</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment"> * @param bool $fullcheck Will add orphaned modules to their sections and remove non-existing</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment"> *     course modules from sequences. Only to be used in site maintenance mode when we are</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment"> *     sure that another user is not in the middle of the process of moving/removing a module.</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment"> * @param bool $checkonly Only performs the check without updating DB, outputs all errors as debug messages.</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment"> * @return array array of messages with found problems. Empty output means everything is ok</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment"> */</span>
<a name="l889"><span class="linenum"> 889</span></a>  function <a class="function" onClick="logFunction('course_integrity_check')" href="../_functions/course_integrity_check.html" onMouseOver="funcPopup(event,'course_integrity_check')">course_integrity_check</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> = null, <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = null, <a class="var it35210" onMouseOver="hilite(35210)" onMouseOut="lolite()" onClick="logVariable('fullcheck')" href="../_variables/fullcheck.html">$fullcheck</a> = false, <a class="var it35211" onMouseOver="hilite(35211)" onMouseOut="lolite()" onClick="logVariable('checkonly')" href="../_variables/checkonly.html">$checkonly</a> = false) {
<a name="l890"><span class="linenum"> 890</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l891"><span class="linenum"> 891</span></a>      <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> = array();
<a name="l892"><span class="linenum"> 892</span></a>      if (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> === null) {
<a name="l893"><span class="linenum"> 893</span></a>          <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_sections', array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>), 'section', 'id,section,sequence');
<a name="l894"><span class="linenum"> 894</span></a>      }
<a name="l895"><span class="linenum"> 895</span></a>      if (<a class="var it35210" onMouseOver="hilite(35210)" onMouseOut="lolite()" onClick="logVariable('fullcheck')" href="../_variables/fullcheck.html">$fullcheck</a>) {
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">        // Retrieve all records from course_modules regardless of module type visibility.</span>
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_modules', array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>), 'id', 'id,section');
<a name="l898"><span class="linenum"> 898</span></a>      }
<a name="l899"><span class="linenum"> 899</span></a>      if (<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> === null) {
<a name="l900"><span class="linenum"> 900</span></a>          <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> = <a class="function" onClick="logFunction('get_course_mods')" href="../_functions/get_course_mods.html" onMouseOver="funcPopup(event,'get_course_mods')">get_course_mods</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l901"><span class="linenum"> 901</span></a>      }
<a name="l902"><span class="linenum"> 902</span></a>      if (!<a class="var it35210" onMouseOver="hilite(35210)" onMouseOut="lolite()" onClick="logVariable('fullcheck')" href="../_variables/fullcheck.html">$fullcheck</a> &amp;&amp; (empty(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>) || empty(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>))) {
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">        // If either of the arrays is empty, no modules are displayed anyway.</span>
<a name="l904"><span class="linenum"> 904</span></a>          return true;
<a name="l905"><span class="linenum"> 905</span></a>      }
<a name="l906"><span class="linenum"> 906</span></a>      <a class="var it35212" onMouseOver="hilite(35212)" onMouseOut="lolite()" onClick="logVariable('debuggingprefix')" href="../_variables/debuggingprefix.html">$debuggingprefix</a> = 'Failed integrity check for course ['.<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>.']. ';
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">    // First make sure that each module id appears in section sequences only once.</span>
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">    // If it appears in several section sequences the last section wins.</span>
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">    // If it appears twice in one section sequence, the first occurence wins.</span>
<a name="l911"><span class="linenum"> 911</span></a>      <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a> = array();
<a name="l912"><span class="linenum"> 912</span></a>      foreach (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a> =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l913"><span class="linenum"> 913</span></a>          <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>]-&gt;newsequence = <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>;
<a name="l914"><span class="linenum"> 914</span></a>          if (!empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>)) {
<a name="l915"><span class="linenum"> 915</span></a>              <a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>);
<a name="l916"><span class="linenum"> 916</span></a>              <a class="var it35214" onMouseOver="hilite(35214)" onMouseOut="lolite()" onClick="logVariable('sequenceunique')" href="../_variables/sequenceunique.html">$sequenceunique</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a>);
<a name="l917"><span class="linenum"> 917</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it35214" onMouseOver="hilite(35214)" onMouseOut="lolite()" onClick="logVariable('sequenceunique')" href="../_variables/sequenceunique.html">$sequenceunique</a>) != <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a>)) {
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">                // Some course module id appears in this section sequence more than once.</span>
<a name="l919"><span class="linenum"> 919</span></a>                  <a class="phpfunction" onClick="logFunction('ksort')" href="../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it35214" onMouseOver="hilite(35214)" onMouseOut="lolite()" onClick="logVariable('sequenceunique')" href="../_variables/sequenceunique.html">$sequenceunique</a>); <span class="comment">// Preserve initial order of modules.</span>
<a name="l920"><span class="linenum"> 920</span></a>                  <a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it35214" onMouseOver="hilite(35214)" onMouseOut="lolite()" onClick="logVariable('sequenceunique')" href="../_variables/sequenceunique.html">$sequenceunique</a>);
<a name="l921"><span class="linenum"> 921</span></a>                  <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>]-&gt;newsequence = <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a>);
<a name="l922"><span class="linenum"> 922</span></a>                  <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="var it35212" onMouseOver="hilite(35212)" onMouseOut="lolite()" onClick="logVariable('debuggingprefix')" href="../_variables/debuggingprefix.html">$debuggingprefix</a>.'Sequence for course section ['.
<a name="l923"><span class="linenum"> 923</span></a>                          <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>.'] is &quot;'.<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>]-&gt;sequence.'&quot;, must be &quot;'.<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>]-&gt;newsequence.'&quot;';
<a name="l924"><span class="linenum"> 924</span></a>              }
<a name="l925"><span class="linenum"> 925</span></a>              foreach (<a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a> as <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>) {
<a name="l926"><span class="linenum"> 926</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>) &amp;&amp; isset(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>])) {
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">                    // Some course module id appears to be in more than one section's sequences.</span>
<a name="l928"><span class="linenum"> 928</span></a>                      <a class="var it35215" onMouseOver="hilite(35215)" onMouseOut="lolite()" onClick="logVariable('wrongsectionid')" href="../_variables/wrongsectionid.html">$wrongsectionid</a> = <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>];
<a name="l929"><span class="linenum"> 929</span></a>                      <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35215" onMouseOver="hilite(35215)" onMouseOut="lolite()" onClick="logVariable('wrongsectionid')" href="../_variables/wrongsectionid.html">$wrongsectionid</a>]-&gt;newsequence = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/,<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>,/&quot;, ',', ','.<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35215" onMouseOver="hilite(35215)" onMouseOut="lolite()" onClick="logVariable('wrongsectionid')" href="../_variables/wrongsectionid.html">$wrongsectionid</a>]-&gt;newsequence. ','), ',');
<a name="l930"><span class="linenum"> 930</span></a>                      <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="var it35212" onMouseOver="hilite(35212)" onMouseOut="lolite()" onClick="logVariable('debuggingprefix')" href="../_variables/debuggingprefix.html">$debuggingprefix</a>.'Course module ['.<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>.'] must be removed from sequence of section ['.
<a name="l931"><span class="linenum"> 931</span></a>                              <a class="var it35215" onMouseOver="hilite(35215)" onMouseOut="lolite()" onClick="logVariable('wrongsectionid')" href="../_variables/wrongsectionid.html">$wrongsectionid</a>.'] because it is also present in sequence of section ['.<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>.']';
<a name="l932"><span class="linenum"> 932</span></a>                  }
<a name="l933"><span class="linenum"> 933</span></a>                  <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>] = <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>;
<a name="l934"><span class="linenum"> 934</span></a>              }
<a name="l935"><span class="linenum"> 935</span></a>          }
<a name="l936"><span class="linenum"> 936</span></a>      }
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">    // Add orphaned modules to their sections if they exist or to section 0 otherwise.</span>
<a name="l939"><span class="linenum"> 939</span></a>      if (<a class="var it35210" onMouseOver="hilite(35210)" onMouseOut="lolite()" onClick="logVariable('fullcheck')" href="../_variables/fullcheck.html">$fullcheck</a>) {
<a name="l940"><span class="linenum"> 940</span></a>          foreach (<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> as <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>) {
<a name="l941"><span class="linenum"> 941</span></a>              if (!isset(<a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>])) {
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">                // This is a module that is not mentioned in course_section.sequence at all.</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">                // Add it to the section $mod-&gt;section or to the last available section.</span>
<a name="l944"><span class="linenum"> 944</span></a>                  if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a> &amp;&amp; isset(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a>])) {
<a name="l945"><span class="linenum"> 945</span></a>                      <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>] = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a>;
<a name="l946"><span class="linenum"> 946</span></a>                  } else {
<a name="l947"><span class="linenum"> 947</span></a>                      <a class="var it8366" onMouseOver="hilite(8366)" onMouseOut="lolite()" onClick="logVariable('firstsection')" href="../_variables/firstsection.html">$firstsection</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>);
<a name="l948"><span class="linenum"> 948</span></a>                      <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>] = <a class="var it8366" onMouseOver="hilite(8366)" onMouseOut="lolite()" onClick="logVariable('firstsection')" href="../_variables/firstsection.html">$firstsection</a>-&gt;<a onClick="logVariable('id')" class="var it43582" onMouseOver="hilite(43582)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l949"><span class="linenum"> 949</span></a>                  }
<a name="l950"><span class="linenum"> 950</span></a>                  <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>]]-&gt;newsequence = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>]]-&gt;newsequence.','.<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, ',');
<a name="l951"><span class="linenum"> 951</span></a>                  <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="var it35212" onMouseOver="hilite(35212)" onMouseOut="lolite()" onClick="logVariable('debuggingprefix')" href="../_variables/debuggingprefix.html">$debuggingprefix</a>.'Course module ['.<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>.'] is missing from sequence of section ['.
<a name="l952"><span class="linenum"> 952</span></a>                          <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>].']';
<a name="l953"><span class="linenum"> 953</span></a>              }
<a name="l954"><span class="linenum"> 954</span></a>          }
<a name="l955"><span class="linenum"> 955</span></a>          foreach (<a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a> as <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> =&gt; <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>) {
<a name="l956"><span class="linenum"> 956</span></a>              if (!isset(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>])) {
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">                // Section $sectionid refers to module id that does not exist.</span>
<a name="l958"><span class="linenum"> 958</span></a>                  <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>]-&gt;newsequence = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/,<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>,/&quot;, ',', ','.<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>]-&gt;newsequence.','), ',');
<a name="l959"><span class="linenum"> 959</span></a>                  <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="var it35212" onMouseOver="hilite(35212)" onMouseOut="lolite()" onClick="logVariable('debuggingprefix')" href="../_variables/debuggingprefix.html">$debuggingprefix</a>.'Course module ['.<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>.
<a name="l960"><span class="linenum"> 960</span></a>                          '] does not exist but is present in the sequence of section ['.<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>.']';
<a name="l961"><span class="linenum"> 961</span></a>              }
<a name="l962"><span class="linenum"> 962</span></a>          }
<a name="l963"><span class="linenum"> 963</span></a>      }
<a name="l964"><span class="linenum"> 964</span></a>  
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment">    // Update changed sections.</span>
<a name="l966"><span class="linenum"> 966</span></a>      if (!<a class="var it35211" onMouseOver="hilite(35211)" onMouseOut="lolite()" onClick="logVariable('checkonly')" href="../_variables/checkonly.html">$checkonly</a> &amp;&amp; !empty(<a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>)) {
<a name="l967"><span class="linenum"> 967</span></a>          foreach (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a> =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l968"><span class="linenum"> 968</span></a>              if (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('newsequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/newsequence.html">newsequence</a> !== <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>) {
<a name="l969"><span class="linenum"> 969</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course_sections', array('id' =&gt; <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>, 'sequence' =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('newsequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/newsequence.html">newsequence</a>));
<a name="l970"><span class="linenum"> 970</span></a>              }
<a name="l971"><span class="linenum"> 971</span></a>          }
<a name="l972"><span class="linenum"> 972</span></a>      }
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment">    // Now make sure that all modules point to the correct sections.</span>
<a name="l975"><span class="linenum"> 975</span></a>      foreach (<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> as <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>) {
<a name="l976"><span class="linenum"> 976</span></a>          if (isset(<a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>]) &amp;&amp; <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>] != <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a>) {
<a name="l977"><span class="linenum"> 977</span></a>              if (!<a class="var it35211" onMouseOver="hilite(35211)" onMouseOut="lolite()" onClick="logVariable('checkonly')" href="../_variables/checkonly.html">$checkonly</a>) {
<a name="l978"><span class="linenum"> 978</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course_modules', array('id' =&gt; <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, 'section' =&gt; <a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>]));
<a name="l979"><span class="linenum"> 979</span></a>              }
<a name="l980"><span class="linenum"> 980</span></a>              <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="var it35212" onMouseOver="hilite(35212)" onMouseOut="lolite()" onClick="logVariable('debuggingprefix')" href="../_variables/debuggingprefix.html">$debuggingprefix</a>.'Course module ['.<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>.
<a name="l981"><span class="linenum"> 981</span></a>                      '] points to section ['.<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a>.'] instead of ['.<a class="var it35213" onMouseOver="hilite(35213)" onMouseOut="lolite()" onClick="logVariable('modsection')" href="../_variables/modsection.html">$modsection</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>].']';
<a name="l982"><span class="linenum"> 982</span></a>          }
<a name="l983"><span class="linenum"> 983</span></a>      }
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>      return <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>;
<a name="l986"><span class="linenum"> 986</span></a>  }
<a name="l987"><span class="linenum"> 987</span></a>  
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">/**</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment"> * For a given course, returns an array of course activity objects</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment"> * Each item in the array contains he following properties:</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment"> */</span>
<a name="l992"><span class="linenum"> 992</span></a>  function <a class="function" onClick="logFunction('get_array_of_activities')" href="../_functions/get_array_of_activities.html" onMouseOver="funcPopup(event,'get_array_of_activities')">get_array_of_activities</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">//  cm - course module id</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">//  mod - name of the module (eg forum)</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment">//  section - the number of the section (eg week or topic)</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">//  name - the name of the instance</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">//  visible - is the instance visible or not</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">//  groupingid - grouping id</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">//  extra - contains extra string to include in any link</span>
<a name="l1000"><span class="linenum">1000</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1001"><span class="linenum">1001</span></a>  
<a name="l1002"><span class="linenum">1002</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>      if (empty(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l1005"><span class="linenum">1005</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('courseidnotfound');
<a name="l1006"><span class="linenum">1006</span></a>      }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>      <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a> = array();
<a name="l1009"><span class="linenum">1009</span></a>  
<a name="l1010"><span class="linenum">1010</span></a>      <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> = <a class="function" onClick="logFunction('get_course_mods')" href="../_functions/get_course_mods.html" onMouseOver="funcPopup(event,'get_course_mods')">get_course_mods</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1011"><span class="linenum">1011</span></a>      if (empty(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>)) {
<a name="l1012"><span class="linenum">1012</span></a>          return <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>; <span class="comment">// always return array</span>
<a name="l1013"><span class="linenum">1013</span></a>      }
<a name="l1014"><span class="linenum">1014</span></a>  
<a name="l1015"><span class="linenum">1015</span></a>      if (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_sections', array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>), 'section ASC', 'id,section,sequence')) {
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">        // First check and correct obvious mismatches between course_sections.sequence and course_modules.section.</span>
<a name="l1017"><span class="linenum">1017</span></a>          if (<a class="var it35217" onMouseOver="hilite(35217)" onMouseOut="lolite()" onClick="logVariable('errormessages')" href="../_variables/errormessages.html">$errormessages</a> = <a class="function" onClick="logFunction('course_integrity_check')" href="../_functions/course_integrity_check.html" onMouseOver="funcPopup(event,'course_integrity_check')">course_integrity_check</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>, <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>)) {
<a name="l1018"><span class="linenum">1018</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>('&lt;br&gt;', <a class="var it35217" onMouseOver="hilite(35217)" onMouseOut="lolite()" onClick="logVariable('errormessages')" href="../_variables/errormessages.html">$errormessages</a>));
<a name="l1019"><span class="linenum">1019</span></a>              <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a> = <a class="function" onClick="logFunction('get_course_mods')" href="../_functions/get_course_mods.html" onMouseOver="funcPopup(event,'get_course_mods')">get_course_mods</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1020"><span class="linenum">1020</span></a>              <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_sections', array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>), 'section ASC', 'id,section,sequence');
<a name="l1021"><span class="linenum">1021</span></a>          }
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">        // Build array of activities.</span>
<a name="l1023"><span class="linenum">1023</span></a>         foreach (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l1024"><span class="linenum">1024</span></a>             if (!empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>)) {
<a name="l1025"><span class="linenum">1025</span></a>                 <a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>);
<a name="l1026"><span class="linenum">1026</span></a>                 foreach (<a class="var it5341" onMouseOver="hilite(5341)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../_variables/sequence.html">$sequence</a> as <a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>) {
<a name="l1027"><span class="linenum">1027</span></a>                     if (empty(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>])) {
<a name="l1028"><span class="linenum">1028</span></a>                         continue;
<a name="l1029"><span class="linenum">1029</span></a>                     }
<a name="l1030"><span class="linenum">1030</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>] = new stdClass();
<a name="l1031"><span class="linenum">1031</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;id               = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;instance;
<a name="l1032"><span class="linenum">1032</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;cm               = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;id;
<a name="l1033"><span class="linenum">1033</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;mod              = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;modname;
<a name="l1034"><span class="linenum">1034</span></a>  
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">                    // Oh dear. Inconsistent names left here for backward compatibility.</span>
<a name="l1036"><span class="linenum">1036</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;section          = <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/section.html">section</a>;
<a name="l1037"><span class="linenum">1037</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;sectionid        = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;section;
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;module           = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;module;
<a name="l1040"><span class="linenum">1040</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;added            = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;added;
<a name="l1041"><span class="linenum">1041</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;score            = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;score;
<a name="l1042"><span class="linenum">1042</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;idnumber         = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;idnumber;
<a name="l1043"><span class="linenum">1043</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;visible          = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;visible;
<a name="l1044"><span class="linenum">1044</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;visibleold       = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;visibleold;
<a name="l1045"><span class="linenum">1045</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;groupmode        = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;groupmode;
<a name="l1046"><span class="linenum">1046</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;groupingid       = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;groupingid;
<a name="l1047"><span class="linenum">1047</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;indent           = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;indent;
<a name="l1048"><span class="linenum">1048</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completion       = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completion;
<a name="l1049"><span class="linenum">1049</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;extra            = &quot;&quot;;
<a name="l1050"><span class="linenum">1050</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completiongradeitemnumber =
<a name="l1051"><span class="linenum">1051</span></a>                             <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completiongradeitemnumber;
<a name="l1052"><span class="linenum">1052</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completionview   = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completionview;
<a name="l1053"><span class="linenum">1053</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completionexpected = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completionexpected;
<a name="l1054"><span class="linenum">1054</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;showdescription  = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;showdescription;
<a name="l1055"><span class="linenum">1055</span></a>                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;availability = <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;availability;
<a name="l1056"><span class="linenum">1056</span></a>  
<a name="l1057"><span class="linenum">1057</span></a>                     <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;mod;
<a name="l1058"><span class="linenum">1058</span></a>                     <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../_variables/functionname.html">$functionname</a> = <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>.&quot;_get_coursemodule_info&quot;;
<a name="l1059"><span class="linenum">1059</span></a>  
<a name="l1060"><span class="linenum">1060</span></a>                     if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/mod/<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>/lib.php&quot;)) {
<a name="l1061"><span class="linenum">1061</span></a>                         continue;
<a name="l1062"><span class="linenum">1062</span></a>                     }
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>                     include_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/mod/<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>/lib.php&quot;);
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>                     if (<a class="var it35218" onMouseOver="hilite(35218)" onMouseOut="lolite()" onClick="logVariable('hasfunction')" href="../_variables/hasfunction.html">$hasfunction</a> = <a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../_variables/functionname.html">$functionname</a>)) {
<a name="l1067"><span class="linenum">1067</span></a>                         if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> = <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../_variables/functionname.html">$functionname</a>(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>])) {
<a name="l1068"><span class="linenum">1068</span></a>                             if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('icon')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>)) {
<a name="l1069"><span class="linenum">1069</span></a>                                 <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;icon = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('icon')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>;
<a name="l1070"><span class="linenum">1070</span></a>                             }
<a name="l1071"><span class="linenum">1071</span></a>                             if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('iconcomponent')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/iconcomponent.html">iconcomponent</a>)) {
<a name="l1072"><span class="linenum">1072</span></a>                                 <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;iconcomponent = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('iconcomponent')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/iconcomponent.html">iconcomponent</a>;
<a name="l1073"><span class="linenum">1073</span></a>                             }
<a name="l1074"><span class="linenum">1074</span></a>                             if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l1075"><span class="linenum">1075</span></a>                                 <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;name = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l1076"><span class="linenum">1076</span></a>                             }
<a name="l1077"><span class="linenum">1077</span></a>                             if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> instanceof cached_cm_info) {
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment">                               // When using cached_cm_info you can include three new fields</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">                               // that aren't available for legacy code</span>
<a name="l1080"><span class="linenum">1080</span></a>                                 if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('content')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/content.html">content</a>)) {
<a name="l1081"><span class="linenum">1081</span></a>                                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;content = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('content')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/content.html">content</a>;
<a name="l1082"><span class="linenum">1082</span></a>                                 }
<a name="l1083"><span class="linenum">1083</span></a>                                 if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('extraclasses')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/extraclasses.html">extraclasses</a>)) {
<a name="l1084"><span class="linenum">1084</span></a>                                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;extraclasses = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('extraclasses')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/extraclasses.html">extraclasses</a>;
<a name="l1085"><span class="linenum">1085</span></a>                                 }
<a name="l1086"><span class="linenum">1086</span></a>                                 if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('iconurl')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/iconurl.html">iconurl</a>)) {
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">                                   // Convert URL to string as it's easier to store. Also serialized object contains \0 byte and can not be written to Postgres DB.</span>
<a name="l1088"><span class="linenum">1088</span></a>                                     <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('iconurl')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/iconurl.html">iconurl</a>);
<a name="l1089"><span class="linenum">1089</span></a>                                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;iconurl = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l1090"><span class="linenum">1090</span></a>                                 }
<a name="l1091"><span class="linenum">1091</span></a>                                 if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('onclick')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a>)) {
<a name="l1092"><span class="linenum">1092</span></a>                                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;onclick = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('onclick')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a>;
<a name="l1093"><span class="linenum">1093</span></a>                                 }
<a name="l1094"><span class="linenum">1094</span></a>                                 if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('customdata')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/customdata.html">customdata</a>)) {
<a name="l1095"><span class="linenum">1095</span></a>                                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;customdata = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('customdata')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/customdata.html">customdata</a>;
<a name="l1096"><span class="linenum">1096</span></a>                                 }
<a name="l1097"><span class="linenum">1097</span></a>                             } else {
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">                               // When using a stdclass, the (horrible) deprecated -&gt;extra field</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">                               // is available for BC</span>
<a name="l1100"><span class="linenum">1100</span></a>                                 if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('extra')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/extra.html">extra</a>)) {
<a name="l1101"><span class="linenum">1101</span></a>                                     <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;extra = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('extra')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/extra.html">extra</a>;
<a name="l1102"><span class="linenum">1102</span></a>                                 }
<a name="l1103"><span class="linenum">1103</span></a>                             }
<a name="l1104"><span class="linenum">1104</span></a>                         }
<a name="l1105"><span class="linenum">1105</span></a>                     }
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment">                   // When there is no modname_get_coursemodule_info function,</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment">                   // but showdescriptions is enabled, then we use the 'intro'</span>
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment">                   // and 'introformat' fields in the module table</span>
<a name="l1109"><span class="linenum">1109</span></a>                     if (!<a class="var it35218" onMouseOver="hilite(35218)" onMouseOut="lolite()" onClick="logVariable('hasfunction')" href="../_variables/hasfunction.html">$hasfunction</a> &amp;&amp; <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;showdescription) {
<a name="l1110"><span class="linenum">1110</span></a>                         if (<a class="var it35219" onMouseOver="hilite(35219)" onMouseOut="lolite()" onClick="logVariable('modvalues')" href="../_variables/modvalues.html">$modvalues</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;modname,
<a name="l1111"><span class="linenum">1111</span></a>                                 array('id' =&gt; <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;instance), 'name, intro, introformat')) {
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">                           // Set content from intro and introformat. Filters are disabled</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">                           // because we  filter it with format_text at display time</span>
<a name="l1114"><span class="linenum">1114</span></a>                             <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;content = <a class="function" onClick="logFunction('format_module_intro')" href="../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;modname,
<a name="l1115"><span class="linenum">1115</span></a>                                     <a class="var it35219" onMouseOver="hilite(35219)" onMouseOut="lolite()" onClick="logVariable('modvalues')" href="../_variables/modvalues.html">$modvalues</a>, <a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;id, false);
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment">                           // To save making another query just below, put name in here</span>
<a name="l1118"><span class="linenum">1118</span></a>                             <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;name = <a class="var it35219" onMouseOver="hilite(35219)" onMouseOut="lolite()" onClick="logVariable('modvalues')" href="../_variables/modvalues.html">$modvalues</a>-&gt;<a onClick="logVariable('name')" class="var it45102" onMouseOver="hilite(45102)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l1119"><span class="linenum">1119</span></a>                         }
<a name="l1120"><span class="linenum">1120</span></a>                     }
<a name="l1121"><span class="linenum">1121</span></a>                     if (!isset(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;name)) {
<a name="l1122"><span class="linenum">1122</span></a>                         <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;name = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;modname, &quot;name&quot;, array(&quot;id&quot;=&gt;<a class="var it12501" onMouseOver="hilite(12501)" onMouseOut="lolite()" onClick="logVariable('rawmods')" href="../_variables/rawmods.html">$rawmods</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;instance));
<a name="l1123"><span class="linenum">1123</span></a>                     }
<a name="l1124"><span class="linenum">1124</span></a>  
<a name="l1125"><span class="linenum">1125</span></a>  <span class="comment">                    // Minimise the database size by unsetting default options when they are</span>
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">                    // 'empty'. This list corresponds to code in the cm_info constructor.</span>
<a name="l1127"><span class="linenum">1127</span></a>                      foreach (array('idnumber', 'groupmode', 'groupingid',
<a name="l1128"><span class="linenum">1128</span></a>                              'indent', 'completion', 'extra', 'extraclasses', 'iconurl', 'onclick', 'content',
<a name="l1129"><span class="linenum">1129</span></a>                              'icon', 'iconcomponent', 'customdata', 'availability', 'completionview',
<a name="l1130"><span class="linenum">1130</span></a>                              'completionexpected', 'score', 'showdescription') as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>) {
<a name="l1131"><span class="linenum">1131</span></a>                         if (property_exists(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>], <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>) &amp;&amp;
<a name="l1132"><span class="linenum">1132</span></a>                                 empty(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;{<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>})) {
<a name="l1133"><span class="linenum">1133</span></a>                             unset(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;{<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>});
<a name="l1134"><span class="linenum">1134</span></a>                         }
<a name="l1135"><span class="linenum">1135</span></a>                     }
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment">                   // Special case: this value is usually set to null, but may be 0</span>
<a name="l1137"><span class="linenum">1137</span></a>                     if (property_exists(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>], 'completiongradeitemnumber') &amp;&amp;
<a name="l1138"><span class="linenum">1138</span></a>                             <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completiongradeitemnumber)) {
<a name="l1139"><span class="linenum">1139</span></a>                         unset(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>[<a class="var it3067" onMouseOver="hilite(3067)" onMouseOut="lolite()" onClick="logVariable('seq')" href="../_variables/seq.html">$seq</a>]-&gt;completiongradeitemnumber);
<a name="l1140"><span class="linenum">1140</span></a>                     }
<a name="l1141"><span class="linenum">1141</span></a>                 }
<a name="l1142"><span class="linenum">1142</span></a>              }
<a name="l1143"><span class="linenum">1143</span></a>          }
<a name="l1144"><span class="linenum">1144</span></a>      }
<a name="l1145"><span class="linenum">1145</span></a>      return <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>;
<a name="l1146"><span class="linenum">1146</span></a>  }
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">/**</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment"> * Returns the localised human-readable names of all used modules</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment"> *</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment"> * @param bool $plural if true returns the plural forms of the names</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment"> * @return array where key is the module name (component name without 'mod_') and</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment"> *     the value is the human-readable string. Array sorted alphabetically by value</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment"> */</span>
<a name="l1155"><span class="linenum">1155</span></a>  function <a class="function" onClick="logFunction('get_module_types_names')" href="../_functions/get_module_types_names.html" onMouseOver="funcPopup(event,'get_module_types_names')">get_module_types_names</a>(<a class="var it8432" onMouseOver="hilite(8432)" onMouseOut="lolite()" onClick="logVariable('plural')" href="../_variables/plural.html">$plural</a> = false) {
<a name="l1156"><span class="linenum">1156</span></a>      static <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a> = null;
<a name="l1157"><span class="linenum">1157</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1158"><span class="linenum">1158</span></a>      if (<a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a> === null) {
<a name="l1159"><span class="linenum">1159</span></a>          <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a> = array(0 =&gt; array(), 1 =&gt; array());
<a name="l1160"><span class="linenum">1160</span></a>          if (<a class="var it6608" onMouseOver="hilite(6608)" onMouseOut="lolite()" onClick="logVariable('allmods')" href="../_variables/allmods.html">$allmods</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;modules&quot;)) {
<a name="l1161"><span class="linenum">1161</span></a>              foreach (<a class="var it6608" onMouseOver="hilite(6608)" onMouseOut="lolite()" onClick="logVariable('allmods')" href="../_variables/allmods.html">$allmods</a> as <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>) {
<a name="l1162"><span class="linenum">1162</span></a>                  if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/mod/<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>/lib.php&quot;) &amp;&amp; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l1163"><span class="linenum">1163</span></a>                      <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a>[0][<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;modulename&quot;, &quot;<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>&quot;);
<a name="l1164"><span class="linenum">1164</span></a>                      <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a>[1][<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;modulenameplural&quot;, &quot;<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>&quot;);
<a name="l1165"><span class="linenum">1165</span></a>                  }
<a name="l1166"><span class="linenum">1166</span></a>              }
<a name="l1167"><span class="linenum">1167</span></a>              <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a>[0]);
<a name="l1168"><span class="linenum">1168</span></a>              <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a>[1]);
<a name="l1169"><span class="linenum">1169</span></a>          }
<a name="l1170"><span class="linenum">1170</span></a>      }
<a name="l1171"><span class="linenum">1171</span></a>      return <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a>[(int)<a class="var it8432" onMouseOver="hilite(8432)" onMouseOut="lolite()" onClick="logVariable('plural')" href="../_variables/plural.html">$plural</a>];
<a name="l1172"><span class="linenum">1172</span></a>  }
<a name="l1173"><span class="linenum">1173</span></a>  
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">/**</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment"> * Set highlighted section. Only one section can be highlighted at the time.</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment"> *</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment"> * @param int $courseid course id</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment"> * @param int $marker highlight section with this number, 0 means remove higlightin</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment"> * @return void</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment"> */</span>
<a name="l1181"><span class="linenum">1181</span></a>  function <a class="function" onClick="logFunction('course_set_marker')" href="../_functions/course_set_marker.html" onMouseOver="funcPopup(event,'course_set_marker')">course_set_marker</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../_variables/marker.html">$marker</a>) {
<a name="l1182"><span class="linenum">1182</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1183"><span class="linenum">1183</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;course&quot;, &quot;marker&quot;, <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../_variables/marker.html">$marker</a>, array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1184"><span class="linenum">1184</span></a>      format_base::<a class="function" onClick="logFunction('reset_course_cache')" href="../_functions/reset_course_cache.html" onMouseOver="funcPopup(event,'reset_course_cache')">reset_course_cache</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1185"><span class="linenum">1185</span></a>  }
<a name="l1186"><span class="linenum">1186</span></a>  
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment">/**</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment"> * For a given course section, marks it visible or hidden,</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment"> * and does the same for every activity in that section</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment"> *</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment"> * @param int $courseid course id</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment"> * @param int $sectionnumber The section number to adjust</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment"> * @param int $visibility The new visibility</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment"> * @return array A list of resources which were hidden in the section</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment"> */</span>
<a name="l1196"><span class="linenum">1196</span></a>  function <a class="function" onClick="logFunction('set_section_visible')" href="../_functions/set_section_visible.html" onMouseOver="funcPopup(event,'set_section_visible')">set_section_visible</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it8794" onMouseOver="hilite(8794)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a>, <a class="var it5051" onMouseOver="hilite(5051)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="../_variables/visibility.html">$visibility</a>) {
<a name="l1197"><span class="linenum">1197</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>      <a class="var it35220" onMouseOver="hilite(35220)" onMouseOut="lolite()" onClick="logVariable('resourcestotoggle')" href="../_variables/resourcestotoggle.html">$resourcestotoggle</a> = array();
<a name="l1200"><span class="linenum">1200</span></a>      if (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;course_sections&quot;, array(&quot;course&quot;=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, &quot;section&quot;=&gt;<a class="var it8794" onMouseOver="hilite(8794)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a>))) {
<a name="l1201"><span class="linenum">1201</span></a>          <a class="function" onClick="logFunction('course_update_section')" href="../_functions/course_update_section.html" onMouseOver="funcPopup(event,'course_update_section')">course_update_section</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, array('visible' =&gt; <a class="var it5051" onMouseOver="hilite(5051)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="../_variables/visibility.html">$visibility</a>));
<a name="l1202"><span class="linenum">1202</span></a>  
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">        // Determine which modules are visible for AJAX update</span>
<a name="l1204"><span class="linenum">1204</span></a>          <a class="var it4191" onMouseOver="hilite(4191)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../_variables/modules.html">$modules</a> = !empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>) ? <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>) : array();
<a name="l1205"><span class="linenum">1205</span></a>          if (!empty(<a class="var it4191" onMouseOver="hilite(4191)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../_variables/modules.html">$modules</a>)) {
<a name="l1206"><span class="linenum">1206</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../_variables/insql.html">$insql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it4191" onMouseOver="hilite(4191)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../_variables/modules.html">$modules</a>);
<a name="l1207"><span class="linenum">1207</span></a>              <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = 'id ' . <a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../_variables/insql.html">$insql</a> . ' AND visible = ?';
<a name="l1208"><span class="linenum">1208</span></a>              <a class="phpfunction" onClick="logFunction('array_push')" href="../_functions/array_push.html" onMouseOver="phpfuncPopup(event,'array_push')">array_push</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it5051" onMouseOver="hilite(5051)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="../_variables/visibility.html">$visibility</a>);
<a name="l1209"><span class="linenum">1209</span></a>              if (!<a class="var it5051" onMouseOver="hilite(5051)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="../_variables/visibility.html">$visibility</a>) {
<a name="l1210"><span class="linenum">1210</span></a>                  <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> .= ' AND visibleold = 1';
<a name="l1211"><span class="linenum">1211</span></a>              }
<a name="l1212"><span class="linenum">1212</span></a>              <a class="var it35220" onMouseOver="hilite(35220)" onMouseOut="lolite()" onClick="logVariable('resourcestotoggle')" href="../_variables/resourcestotoggle.html">$resourcestotoggle</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('course_modules', 'id', <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1213"><span class="linenum">1213</span></a>          }
<a name="l1214"><span class="linenum">1214</span></a>      }
<a name="l1215"><span class="linenum">1215</span></a>      return <a class="var it35220" onMouseOver="hilite(35220)" onMouseOut="lolite()" onClick="logVariable('resourcestotoggle')" href="../_variables/resourcestotoggle.html">$resourcestotoggle</a>;
<a name="l1216"><span class="linenum">1216</span></a>  }
<a name="l1217"><span class="linenum">1217</span></a>  
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">/**</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment"> * Retrieve all metadata for the requested modules</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> *</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> * @param object $course The Course</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment"> * @param array $modnames An array containing the list of modules and their</span>
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment"> * names</span>
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment"> * @param int $sectionreturn The section to return to</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment"> * @return array A list of stdClass objects containing metadata about each</span>
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment"> * module</span>
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment"> */</span>
<a name="l1228"><span class="linenum">1228</span></a>  function <a class="function" onClick="logFunction('get_module_metadata')" href="../_functions/get_module_metadata.html" onMouseOver="funcPopup(event,'get_module_metadata')">get_module_metadata</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a>, <a class="var it2592" onMouseOver="hilite(2592)" onMouseOut="lolite()" onClick="logVariable('sectionreturn')" href="../_variables/sectionreturn.html">$sectionreturn</a> = null) {
<a name="l1229"><span class="linenum">1229</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1230"><span class="linenum">1230</span></a>  
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment">    // get_module_metadata will be called once per section on the page and courses may show</span>
<a name="l1232"><span class="linenum">1232</span></a>  <span class="comment">    // different modules to one another</span>
<a name="l1233"><span class="linenum">1233</span></a>      static <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a> = array();
<a name="l1234"><span class="linenum">1234</span></a>      if (!isset(<a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>])) {
<a name="l1235"><span class="linenum">1235</span></a>          <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array();
<a name="l1236"><span class="linenum">1236</span></a>      }
<a name="l1237"><span class="linenum">1237</span></a>  
<a name="l1238"><span class="linenum">1238</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = array();
<a name="l1239"><span class="linenum">1239</span></a>      <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/mod.php.html">/course/mod.php</a>', array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1240"><span class="linenum">1240</span></a>      if (<a class="var it2592" onMouseOver="hilite(2592)" onMouseOut="lolite()" onClick="logVariable('sectionreturn')" href="../_variables/sectionreturn.html">$sectionreturn</a> !== null) {
<a name="l1241"><span class="linenum">1241</span></a>          <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('sr', <a class="var it2592" onMouseOver="hilite(2592)" onMouseOut="lolite()" onClick="logVariable('sectionreturn')" href="../_variables/sectionreturn.html">$sectionreturn</a>);
<a name="l1242"><span class="linenum">1242</span></a>      }
<a name="l1243"><span class="linenum">1243</span></a>      foreach(<a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../_variables/modnames.html">$modnames</a> as <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> =&gt; <a class="var it35222" onMouseOver="hilite(35222)" onMouseOut="lolite()" onClick="logVariable('modnamestr')" href="../_variables/modnamestr.html">$modnamestr</a>) {
<a name="l1244"><span class="linenum">1244</span></a>          if (!<a class="function" onClick="logFunction('course_allowed_module')" href="../_functions/course_allowed_module.html" onMouseOver="funcPopup(event,'course_allowed_module')">course_allowed_module</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>)) {
<a name="l1245"><span class="linenum">1245</span></a>              continue;
<a name="l1246"><span class="linenum">1246</span></a>          }
<a name="l1247"><span class="linenum">1247</span></a>          if (isset(<a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>])) {
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">            // This module is already cached</span>
<a name="l1249"><span class="linenum">1249</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> += <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>];
<a name="l1250"><span class="linenum">1250</span></a>              continue;
<a name="l1251"><span class="linenum">1251</span></a>          }
<a name="l1252"><span class="linenum">1252</span></a>          <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>] = array();
<a name="l1253"><span class="linenum">1253</span></a>  
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment">        // Create an object for a default representation of this module type in the activity chooser. It will be used</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment">        // if module does not implement callback get_shortcuts() and it will also be passed to the callback if it exists.</span>
<a name="l1256"><span class="linenum">1256</span></a>          <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a> = new stdClass();
<a name="l1257"><span class="linenum">1257</span></a>          <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('title')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="var it35222" onMouseOver="hilite(35222)" onMouseOut="lolite()" onClick="logVariable('modnamestr')" href="../_variables/modnamestr.html">$modnamestr</a>;
<a name="l1258"><span class="linenum">1258</span></a>          <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('name')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>;
<a name="l1259"><span class="linenum">1259</span></a>          <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('link')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/link.html">link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, array('add' =&gt; <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>));
<a name="l1260"><span class="linenum">1260</span></a>          <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('icon')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>('icon', '', <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('name')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, array('class' =&gt; 'icon'));
<a name="l1261"><span class="linenum">1261</span></a>          <a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a> = <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>();
<a name="l1262"><span class="linenum">1262</span></a>          if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>('modulename_help', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>)) {
<a name="l1263"><span class="linenum">1263</span></a>              <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('help')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/help.html">help</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename_help', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>);
<a name="l1264"><span class="linenum">1264</span></a>              if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>('modulename_link', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>)) {  // Link to further info in Moodle docs.
<a name="l1265"><span class="linenum">1265</span></a>                  <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename_link', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>);
<a name="l1266"><span class="linenum">1266</span></a>                  <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('morehelp');
<a name="l1267"><span class="linenum">1267</span></a>                  <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('help')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/help.html">help</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div',
<a name="l1268"><span class="linenum">1268</span></a>                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('doc_link')" href="../_functions/doc_link.html" onMouseOver="funcPopup(event,'doc_link')">doc_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a>, true), array('class' =&gt; 'helpdoclink'));
<a name="l1269"><span class="linenum">1269</span></a>              }
<a name="l1270"><span class="linenum">1270</span></a>          }
<a name="l1271"><span class="linenum">1271</span></a>          <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('archetype')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/archetype.html">archetype</a> = <a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="constant" onClick="logConstant('FEATURE_MOD_ARCHETYPE')" href="../_constants/FEATURE_MOD_ARCHETYPE.html" onMouseOver="constPopup(event,'FEATURE_MOD_ARCHETYPE')">FEATURE_MOD_ARCHETYPE</a>, <a class="constant" onClick="logConstant('MOD_ARCHETYPE_OTHER')" href="../_constants/MOD_ARCHETYPE_OTHER.html" onMouseOver="constPopup(event,'MOD_ARCHETYPE_OTHER')">MOD_ARCHETYPE_OTHER</a>);
<a name="l1272"><span class="linenum">1272</span></a>  
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">        // Legacy support for callback get_types() - do not use any more, use get_shortcuts() instead!</span>
<a name="l1274"><span class="linenum">1274</span></a>          <a class="var it35224" onMouseOver="hilite(35224)" onMouseOut="lolite()" onClick="logVariable('typescallbackexists')" href="../_variables/typescallbackexists.html">$typescallbackexists</a> = <a class="function" onClick="logFunction('component_callback_exists')" href="../_functions/component_callback_exists.html" onMouseOver="funcPopup(event,'component_callback_exists')">component_callback_exists</a>(<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, 'get_types');
<a name="l1275"><span class="linenum">1275</span></a>  
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">        // Each module can implement callback modulename_get_shortcuts() in its lib.php and return the list</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">        // of elements to be added to activity chooser.</span>
<a name="l1278"><span class="linenum">1278</span></a>          <a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="function" onClick="logFunction('component_callback')" href="../_functions/component_callback.html" onMouseOver="funcPopup(event,'component_callback')">component_callback</a>(<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, 'get_shortcuts', array(<a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>), null);
<a name="l1279"><span class="linenum">1279</span></a>          if (<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> !== null) {
<a name="l1280"><span class="linenum">1280</span></a>              foreach (<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> as <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l1281"><span class="linenum">1281</span></a>  <span class="comment">                // Add all items to the return array. All items must have different links, use them as a key in the return array.</span>
<a name="l1282"><span class="linenum">1282</span></a>                  if (!isset(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('archetype')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/archetype.html">archetype</a>)) {
<a name="l1283"><span class="linenum">1283</span></a>                      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('archetype')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/archetype.html">archetype</a> = <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('archetype')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/archetype.html">archetype</a>;
<a name="l1284"><span class="linenum">1284</span></a>                  }
<a name="l1285"><span class="linenum">1285</span></a>                  if (!isset(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('icon')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>)) {
<a name="l1286"><span class="linenum">1286</span></a>                      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('icon')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('icon')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>;
<a name="l1287"><span class="linenum">1287</span></a>                  }
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">                // If plugin returned the only one item with the same link as default item - cache it as $modname,</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">                // otherwise append the link url to the module name.</span>
<a name="l1290"><span class="linenum">1290</span></a>                  <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('name')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>) == 1 &amp;&amp;
<a name="l1291"><span class="linenum">1291</span></a>                      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('link')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/link.html">link</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>() === <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>-&gt;<a onClick="logVariable('link')" class="var it45103" onMouseOver="hilite(45103)" onMouseOut="lolite()" href="../_variables/link.html">link</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>()) ? <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> : <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> . ':' . <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('link')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/link.html">link</a>;
<a name="l1292"><span class="linenum">1292</span></a>  
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">                // If the module provides the helptext property, append it to the help text to match the look and feel</span>
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment">                // of the default course modules.</span>
<a name="l1295"><span class="linenum">1295</span></a>                  if (isset(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('help')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/help.html">help</a>) &amp;&amp; isset(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('helplink')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/helplink.html">helplink</a>)) {
<a name="l1296"><span class="linenum">1296</span></a>                      <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('morehelp');
<a name="l1297"><span class="linenum">1297</span></a>                      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('help')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/help.html">help</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div',
<a name="l1298"><span class="linenum">1298</span></a>                          <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('doc_link')" href="../_functions/doc_link.html" onMouseOver="funcPopup(event,'doc_link')">doc_link</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('helplink')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/helplink.html">helplink</a>, <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a>, true), array('class' =&gt; 'helpdoclink'));
<a name="l1299"><span class="linenum">1299</span></a>                  }
<a name="l1300"><span class="linenum">1300</span></a>                  <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>][<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('name')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>;
<a name="l1301"><span class="linenum">1301</span></a>              }
<a name="l1302"><span class="linenum">1302</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> += <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>];
<a name="l1303"><span class="linenum">1303</span></a>              if (<a class="var it35224" onMouseOver="hilite(35224)" onMouseOut="lolite()" onClick="logVariable('typescallbackexists')" href="../_variables/typescallbackexists.html">$typescallbackexists</a>) {
<a name="l1304"><span class="linenum">1304</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Both callbacks get_shortcuts() and <a class="function" onClick="logFunction('get_types')" href="../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>() are found in module ' . <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> .
<a name="l1305"><span class="linenum">1305</span></a>                      '. Callback <a class="function" onClick="logFunction('get_types')" href="../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>() will be completely ignored', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1306"><span class="linenum">1306</span></a>              }
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">            // If get_shortcuts() callback is defined, the default module action is not added.</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment">            // It is a responsibility of the callback to add it to the return value unless it is not needed.</span>
<a name="l1309"><span class="linenum">1309</span></a>              continue;
<a name="l1310"><span class="linenum">1310</span></a>          }
<a name="l1311"><span class="linenum">1311</span></a>  
<a name="l1312"><span class="linenum">1312</span></a>          if (<a class="var it35224" onMouseOver="hilite(35224)" onMouseOut="lolite()" onClick="logVariable('typescallbackexists')" href="../_variables/typescallbackexists.html">$typescallbackexists</a>) {
<a name="l1313"><span class="linenum">1313</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Callback <a class="function" onClick="logFunction('get_types')" href="../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>() is found in module ' . <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> . ', this functionality is deprecated, ' .
<a name="l1314"><span class="linenum">1314</span></a>                  'please use callback get_shortcuts() instead', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1315"><span class="linenum">1315</span></a>          }
<a name="l1316"><span class="linenum">1316</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('component_callback')" href="../_functions/component_callback.html" onMouseOver="funcPopup(event,'component_callback')">component_callback</a>(<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, 'get_types', array(), <a class="constant" onClick="logConstant('MOD_SUBTYPE_NO_CHILDREN')" href="../_constants/MOD_SUBTYPE_NO_CHILDREN.html" onMouseOver="constPopup(event,'MOD_SUBTYPE_NO_CHILDREN')">MOD_SUBTYPE_NO_CHILDREN</a>);
<a name="l1317"><span class="linenum">1317</span></a>          if (<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> !== <a class="constant" onClick="logConstant('MOD_SUBTYPE_NO_CHILDREN')" href="../_constants/MOD_SUBTYPE_NO_CHILDREN.html" onMouseOver="constPopup(event,'MOD_SUBTYPE_NO_CHILDREN')">MOD_SUBTYPE_NO_CHILDREN</a>) {
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">            // Legacy support for deprecated callback get_types(). To be removed in Moodle 3.5. TODO MDL-53697.</span>
<a name="l1319"><span class="linenum">1319</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>) &gt; 0) {
<a name="l1320"><span class="linenum">1320</span></a>                  <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a> = <a class="var it35222" onMouseOver="hilite(35222)" onMouseOut="lolite()" onClick="logVariable('modnamestr')" href="../_variables/modnamestr.html">$modnamestr</a>;
<a name="l1321"><span class="linenum">1321</span></a>                  <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>('icon', '', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, array('class' =&gt; 'icon'));
<a name="l1322"><span class="linenum">1322</span></a>                  foreach(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l1323"><span class="linenum">1323</span></a>                      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('typestr')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/typestr.html">typestr</a> === '--') {
<a name="l1324"><span class="linenum">1324</span></a>                          continue;
<a name="l1325"><span class="linenum">1325</span></a>                      }
<a name="l1326"><span class="linenum">1326</span></a>                      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('typestr')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/typestr.html">typestr</a>, '--') === 0) {
<a name="l1327"><span class="linenum">1327</span></a>                          <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('--', '', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('typestr')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/typestr.html">typestr</a>);
<a name="l1328"><span class="linenum">1328</span></a>                          continue;
<a name="l1329"><span class="linenum">1329</span></a>                      }
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment">                    // Set the Sub Type metadata.</span>
<a name="l1331"><span class="linenum">1331</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a> = new stdClass();
<a name="l1332"><span class="linenum">1332</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('title')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('activitytypetitle', '',
<a name="l1333"><span class="linenum">1333</span></a>                          (object)['activity' =&gt; <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a>, 'type' =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('typestr')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/typestr.html">typestr</a>]);
<a name="l1334"><span class="linenum">1334</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('type')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('type')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/type.html">type</a>);
<a name="l1335"><span class="linenum">1335</span></a>                      <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/.*type=/', '', <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('type')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/type.html">type</a>);
<a name="l1336"><span class="linenum">1336</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('archetype')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/archetype.html">archetype</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('modclass')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/modclass.html">modclass</a>;
<a name="l1337"><span class="linenum">1337</span></a>  
<a name="l1338"><span class="linenum">1338</span></a>                      if (!empty(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('help')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/help.html">help</a>)) {
<a name="l1339"><span class="linenum">1339</span></a>                          <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('help')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/help.html">help</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('help')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/help.html">help</a>;
<a name="l1340"><span class="linenum">1340</span></a>                      } else if (<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>('help' . <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('name')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>)) {
<a name="l1341"><span class="linenum">1341</span></a>                          <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('help')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/help.html">help</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('help' . <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('name')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>);
<a name="l1342"><span class="linenum">1342</span></a>                      }
<a name="l1343"><span class="linenum">1343</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('link')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/link.html">link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, array('add' =&gt; <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, 'type' =&gt; <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>));
<a name="l1344"><span class="linenum">1344</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('name')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> . ':' . <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('link')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/link.html">link</a>;
<a name="l1345"><span class="linenum">1345</span></a>                      <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('icon')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>;
<a name="l1346"><span class="linenum">1346</span></a>                      <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>][<a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>-&gt;<a onClick="logVariable('name')" class="var it45104" onMouseOver="hilite(45104)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>;
<a name="l1347"><span class="linenum">1347</span></a>                  }
<a name="l1348"><span class="linenum">1348</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> += <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>];
<a name="l1349"><span class="linenum">1349</span></a>              }
<a name="l1350"><span class="linenum">1350</span></a>          } else {
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">            // Neither get_shortcuts() nor get_types() callbacks found, use the default item for the activity chooser.</span>
<a name="l1352"><span class="linenum">1352</span></a>              <a class="var it35221" onMouseOver="hilite(35221)" onMouseOut="lolite()" onClick="logVariable('modlist')" href="../_variables/modlist.html">$modlist</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>][<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>] = <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>;
<a name="l1353"><span class="linenum">1353</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>[<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>] = <a class="var it35223" onMouseOver="hilite(35223)" onMouseOut="lolite()" onClick="logVariable('defaultmodule')" href="../_variables/defaultmodule.html">$defaultmodule</a>;
<a name="l1354"><span class="linenum">1354</span></a>          }
<a name="l1355"><span class="linenum">1355</span></a>      }
<a name="l1356"><span class="linenum">1356</span></a>  
<a name="l1357"><span class="linenum">1357</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>, 'title');
<a name="l1358"><span class="linenum">1358</span></a>      return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>;
<a name="l1359"><span class="linenum">1359</span></a>  }
<a name="l1360"><span class="linenum">1360</span></a>  
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">/**</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment"> * Return the course category context for the category with id $categoryid, except</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment"> * that if $categoryid is 0, return the system context.</span>
<a name="l1364"><span class="linenum">1364</span></a>  <span class="comment"> *</span>
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment"> * @param integer $categoryid a category id or 0.</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment"> * @return context the corresponding context</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment"> */</span>
<a name="l1368"><span class="linenum">1368</span></a>  function <a class="function" onClick="logFunction('get_category_or_system_context')" href="../_functions/get_category_or_system_context.html" onMouseOver="funcPopup(event,'get_category_or_system_context')">get_category_or_system_context</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l1369"><span class="linenum">1369</span></a>      if (<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l1370"><span class="linenum">1370</span></a>          return <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l1371"><span class="linenum">1371</span></a>      } else {
<a name="l1372"><span class="linenum">1372</span></a>          return <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1373"><span class="linenum">1373</span></a>      }
<a name="l1374"><span class="linenum">1374</span></a>  }
<a name="l1375"><span class="linenum">1375</span></a>  
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment">/**</span>
<a name="l1377"><span class="linenum">1377</span></a>  <span class="comment"> * Returns full course categories trees to be used in html_writer::select()</span>
<a name="l1378"><span class="linenum">1378</span></a>  <span class="comment"> *</span>
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment"> * Calls {@link coursecat::make_categories_list()} to build the tree and</span>
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment"> * adds whitespace to denote nesting</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment"> *</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment"> * @return array array mapping coursecat id to the display name</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment"> */</span>
<a name="l1384"><span class="linenum">1384</span></a>  function <a class="function" onClick="logFunction('make_categories_options')" href="../_functions/make_categories_options.html" onMouseOver="funcPopup(event,'make_categories_options')">make_categories_options</a>() {
<a name="l1385"><span class="linenum">1385</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1386"><span class="linenum">1386</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>. '/coursecatlib.php');
<a name="l1387"><span class="linenum">1387</span></a>      <a class="var it4140" onMouseOver="hilite(4140)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a> = <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('make_categories_list')" href="../_functions/make_categories_list.html" onMouseOver="funcPopup(event,'make_categories_list')">make_categories_list</a>('', 0, ' / ');
<a name="l1388"><span class="linenum">1388</span></a>      foreach (<a class="var it4140" onMouseOver="hilite(4140)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1389"><span class="linenum">1389</span></a>  <span class="comment">        // Prefix the value with the number of spaces equal to category depth (number of separators in the value).</span>
<a name="l1390"><span class="linenum">1390</span></a>          <a class="var it4140" onMouseOver="hilite(4140)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="phpfunction" onClick="logFunction('str_repeat')" href="../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>('&amp;nbsp;', <a class="phpfunction" onClick="logFunction('substr_count')" href="../_functions/substr_count.html" onMouseOver="phpfuncPopup(event,'substr_count')">substr_count</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, ' / ')). <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1391"><span class="linenum">1391</span></a>      }
<a name="l1392"><span class="linenum">1392</span></a>      return <a class="var it4140" onMouseOver="hilite(4140)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a>;
<a name="l1393"><span class="linenum">1393</span></a>  }
<a name="l1394"><span class="linenum">1394</span></a>  
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment">/**</span>
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment"> * Print the buttons relating to course requests.</span>
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment"> *</span>
<a name="l1398"><span class="linenum">1398</span></a>  <span class="comment"> * @param object $context current page context.</span>
<a name="l1399"><span class="linenum">1399</span></a>  <span class="comment"> */</span>
<a name="l1400"><span class="linenum">1400</span></a>  function <a class="function" onClick="logFunction('print_course_request_buttons')" href="../_functions/print_course_request_buttons.html" onMouseOver="funcPopup(event,'print_course_request_buttons')">print_course_request_buttons</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1401"><span class="linenum">1401</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1402"><span class="linenum">1402</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablecourserequests')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablecourserequests.html">enablecourserequests</a>)) {
<a name="l1403"><span class="linenum">1403</span></a>          return;
<a name="l1404"><span class="linenum">1404</span></a>      }
<a name="l1405"><span class="linenum">1405</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:create', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:request', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">    /// Print a button to request a new course</span>
<a name="l1407"><span class="linenum">1407</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/request.php.html">/course/request.php</a>'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('requestcourse'), 'get');
<a name="l1408"><span class="linenum">1408</span></a>      }
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">    /// Print a button to manage pending requests</span>
<a name="l1410"><span class="linenum">1410</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:approvecourse', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1411"><span class="linenum">1411</span></a>          <a class="var it1355" onMouseOver="hilite(1355)" onMouseOut="lolite()" onClick="logVariable('disabled')" href="../_variables/disabled.html">$disabled</a> = !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course_request', array());
<a name="l1412"><span class="linenum">1412</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/pending.php.html">/course/pending.php</a>'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursespending'), 'get', array('disabled' =&gt; <a class="var it1355" onMouseOver="hilite(1355)" onMouseOut="lolite()" onClick="logVariable('disabled')" href="../_variables/disabled.html">$disabled</a>));
<a name="l1413"><span class="linenum">1413</span></a>      }
<a name="l1414"><span class="linenum">1414</span></a>  }
<a name="l1415"><span class="linenum">1415</span></a>  
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment">/**</span>
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment"> * Does the user have permission to edit things in this category?</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment"> *</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment"> * @param integer $categoryid The id of the category we are showing, or 0 for system context.</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment"> * @return boolean has_any_capability(array(...), ...); in the appropriate context.</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment"> */</span>
<a name="l1422"><span class="linenum">1422</span></a>  function <a class="function" onClick="logFunction('can_edit_in_category')" href="../_functions/can_edit_in_category.html" onMouseOver="funcPopup(event,'can_edit_in_category')">can_edit_in_category</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a> = 0) {
<a name="l1423"><span class="linenum">1423</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="function" onClick="logFunction('get_category_or_system_context')" href="../_functions/get_category_or_system_context.html" onMouseOver="funcPopup(event,'get_category_or_system_context')">get_category_or_system_context</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>);
<a name="l1424"><span class="linenum">1424</span></a>      return <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/category:manage', 'moodle/course:create'), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1425"><span class="linenum">1425</span></a>  }
<a name="l1426"><span class="linenum">1426</span></a>  
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment">/// MODULE FUNCTIONS /////////////////////////////////////////////////////////////////</span>
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>  function <a class="function" onClick="logFunction('add_course_module')" href="../_functions/add_course_module.html" onMouseOver="funcPopup(event,'add_course_module')">add_course_module</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>) {
<a name="l1430"><span class="linenum">1430</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1431"><span class="linenum">1431</span></a>  
<a name="l1432"><span class="linenum">1432</span></a>      <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('added')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/added.html">added</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1433"><span class="linenum">1433</span></a>      unset(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1434"><span class="linenum">1434</span></a>  
<a name="l1435"><span class="linenum">1435</span></a>      <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;course_modules&quot;, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>);
<a name="l1436"><span class="linenum">1436</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('course')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1437"><span class="linenum">1437</span></a>      return <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>;
<a name="l1438"><span class="linenum">1438</span></a>  }
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">/**</span>
<a name="l1441"><span class="linenum">1441</span></a>  <span class="comment"> * Creates missing course section(s) and rebuilds course cache</span>
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment"> *</span>
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment"> * @param int|stdClass $courseorid course id or course object</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment"> * @param int|array $sections list of relative section numbers to create</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment"> * @return bool if there were any sections created</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> */</span>
<a name="l1447"><span class="linenum">1447</span></a>  function <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>) {
<a name="l1448"><span class="linenum">1448</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1449"><span class="linenum">1449</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>)) {
<a name="l1450"><span class="linenum">1450</span></a>          <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = array(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>);
<a name="l1451"><span class="linenum">1451</span></a>      }
<a name="l1452"><span class="linenum">1452</span></a>      <a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)-&gt;<a class="function" onClick="logFunction('get_section_info_all')" href="../_functions/get_section_info_all.html" onMouseOver="funcPopup(event,'get_section_info_all')">get_section_info_all</a>());
<a name="l1453"><span class="linenum">1453</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)) {
<a name="l1454"><span class="linenum">1454</span></a>          <a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a> = <a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>-&gt;<a onClick="logVariable('id')" class="var it44277" onMouseOver="hilite(44277)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1455"><span class="linenum">1455</span></a>      }
<a name="l1456"><span class="linenum">1456</span></a>      <a class="var it35227" onMouseOver="hilite(35227)" onMouseOut="lolite()" onClick="logVariable('coursechanged')" href="../_variables/coursechanged.html">$coursechanged</a> = false;
<a name="l1457"><span class="linenum">1457</span></a>      foreach (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>) {
<a name="l1458"><span class="linenum">1458</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>, <a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a>)) {
<a name="l1459"><span class="linenum">1459</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a> = new stdClass();
<a name="l1460"><span class="linenum">1460</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>-&gt;<a onClick="logVariable('course')" class="var it45105" onMouseOver="hilite(45105)" onMouseOut="lolite()" href="../_variables/course.html">course</a>   = <a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>;
<a name="l1461"><span class="linenum">1461</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>-&gt;<a onClick="logVariable('section')" class="var it45105" onMouseOver="hilite(45105)" onMouseOut="lolite()" href="../_variables/section.html">section</a>  = <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>;
<a name="l1462"><span class="linenum">1462</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>-&gt;<a onClick="logVariable('summary')" class="var it45105" onMouseOver="hilite(45105)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>  = '';
<a name="l1463"><span class="linenum">1463</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>-&gt;<a onClick="logVariable('summaryformat')" class="var it45105" onMouseOver="hilite(45105)" onMouseOut="lolite()" href="../_variables/summaryformat.html">summaryformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l1464"><span class="linenum">1464</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>-&gt;<a onClick="logVariable('sequence')" class="var it45105" onMouseOver="hilite(45105)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a> = '';
<a name="l1465"><span class="linenum">1465</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;course_sections&quot;, <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>);
<a name="l1466"><span class="linenum">1466</span></a>              <a class="var it35227" onMouseOver="hilite(35227)" onMouseOut="lolite()" onClick="logVariable('coursechanged')" href="../_variables/coursechanged.html">$coursechanged</a> = true;
<a name="l1467"><span class="linenum">1467</span></a>          }
<a name="l1468"><span class="linenum">1468</span></a>      }
<a name="l1469"><span class="linenum">1469</span></a>      if (<a class="var it35227" onMouseOver="hilite(35227)" onMouseOut="lolite()" onClick="logVariable('coursechanged')" href="../_variables/coursechanged.html">$coursechanged</a>) {
<a name="l1470"><span class="linenum">1470</span></a>          <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, true);
<a name="l1471"><span class="linenum">1471</span></a>      }
<a name="l1472"><span class="linenum">1472</span></a>      return <a class="var it35227" onMouseOver="hilite(35227)" onMouseOut="lolite()" onClick="logVariable('coursechanged')" href="../_variables/coursechanged.html">$coursechanged</a>;
<a name="l1473"><span class="linenum">1473</span></a>  }
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment">/**</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment"> * Adds an existing module to the section</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment"> *</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment"> * Updates both tables {course_sections} and {course_modules}</span>
<a name="l1479"><span class="linenum">1479</span></a>  <span class="comment"> *</span>
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment"> * Note: This function does not use modinfo PROVIDED that the section you are</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment"> * adding the module to already exists. If the section does not exist, it will</span>
<a name="l1482"><span class="linenum">1482</span></a>  <span class="comment"> * build modinfo if necessary and create the section.</span>
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment"> *</span>
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment"> * @param int|stdClass $courseorid course id or course object</span>
<a name="l1485"><span class="linenum">1485</span></a>  <span class="comment"> * @param int $cmid id of the module already existing in course_modules table</span>
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment"> * @param int $sectionnum relative number of the section (field course_sections.section)</span>
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment"> *     If section does not exist it will be created</span>
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment"> * @param int|stdClass $beforemod id or object with field id corresponding to the module</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment"> *     before which the module needs to be included. Null for inserting in the</span>
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment"> *     end of the section</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment"> * @return int The course_sections ID where the module is inserted</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment"> */</span>
<a name="l1493"><span class="linenum">1493</span></a>  function <a class="function" onClick="logFunction('course_add_cm_to_section')" href="../_functions/course_add_cm_to_section.html" onMouseOver="funcPopup(event,'course_add_cm_to_section')">course_add_cm_to_section</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>, <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a> = null) {
<a name="l1494"><span class="linenum">1494</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>;
<a name="l1495"><span class="linenum">1495</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a>)) {
<a name="l1496"><span class="linenum">1496</span></a>          <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a> = <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a>-&gt;<a onClick="logVariable('id')" class="var it45106" onMouseOver="hilite(45106)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1497"><span class="linenum">1497</span></a>      }
<a name="l1498"><span class="linenum">1498</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)) {
<a name="l1499"><span class="linenum">1499</span></a>          <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>-&gt;<a onClick="logVariable('id')" class="var it44277" onMouseOver="hilite(44277)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1500"><span class="linenum">1500</span></a>      } else {
<a name="l1501"><span class="linenum">1501</span></a>          <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>;
<a name="l1502"><span class="linenum">1502</span></a>      }
<a name="l1503"><span class="linenum">1503</span></a>  <span class="comment">    // Do not try to use modinfo here, there is no guarantee it is valid!</span>
<a name="l1504"><span class="linenum">1504</span></a>      <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_sections',
<a name="l1505"><span class="linenum">1505</span></a>              array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'section' =&gt; <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l1506"><span class="linenum">1506</span></a>      if (!<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">        // This function call requires modinfo.</span>
<a name="l1508"><span class="linenum">1508</span></a>          <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>);
<a name="l1509"><span class="linenum">1509</span></a>          <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_sections',
<a name="l1510"><span class="linenum">1510</span></a>                  array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'section' =&gt; <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1511"><span class="linenum">1511</span></a>      }
<a name="l1512"><span class="linenum">1512</span></a>  
<a name="l1513"><span class="linenum">1513</span></a>      <a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>));
<a name="l1514"><span class="linenum">1514</span></a>      if (empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>)) {
<a name="l1515"><span class="linenum">1515</span></a>          <a class="var it35216" onMouseOver="hilite(35216)" onMouseOut="lolite()" onClick="logVariable('newsequence')" href="../_variables/newsequence.html">$newsequence</a> = &quot;<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>&quot;;
<a name="l1516"><span class="linenum">1516</span></a>      } else if (<a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a> &amp;&amp; (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a>, <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a>))) {
<a name="l1517"><span class="linenum">1517</span></a>          <a class="var it35229" onMouseOver="hilite(35229)" onMouseOut="lolite()" onClick="logVariable('insertarray')" href="../_variables/insertarray.html">$insertarray</a> = array(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a>);
<a name="l1518"><span class="linenum">1518</span></a>          <a class="phpfunction" onClick="logFunction('array_splice')" href="../_functions/array_splice.html" onMouseOver="phpfuncPopup(event,'array_splice')">array_splice</a>(<a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>[0], 1, <a class="var it35229" onMouseOver="hilite(35229)" onMouseOut="lolite()" onClick="logVariable('insertarray')" href="../_variables/insertarray.html">$insertarray</a>);
<a name="l1519"><span class="linenum">1519</span></a>          <a class="var it35216" onMouseOver="hilite(35216)" onMouseOut="lolite()" onClick="logVariable('newsequence')" href="../_variables/newsequence.html">$newsequence</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a>);
<a name="l1520"><span class="linenum">1520</span></a>      } else {
<a name="l1521"><span class="linenum">1521</span></a>          <a class="var it35216" onMouseOver="hilite(35216)" onMouseOut="lolite()" onClick="logVariable('newsequence')" href="../_variables/newsequence.html">$newsequence</a> = &quot;<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>,<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>&quot;;
<a name="l1522"><span class="linenum">1522</span></a>      }
<a name="l1523"><span class="linenum">1523</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;course_sections&quot;, &quot;sequence&quot;, <a class="var it35216" onMouseOver="hilite(35216)" onMouseOut="lolite()" onClick="logVariable('newsequence')" href="../_variables/newsequence.html">$newsequence</a>, array(&quot;id&quot; =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1524"><span class="linenum">1524</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'section', <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, array('id' =&gt; <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>));
<a name="l1525"><span class="linenum">1525</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)) {
<a name="l1526"><span class="linenum">1526</span></a>          <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>-&gt;<a onClick="logVariable('id')" class="var it44277" onMouseOver="hilite(44277)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, true);
<a name="l1527"><span class="linenum">1527</span></a>      } else {
<a name="l1528"><span class="linenum">1528</span></a>          <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, true);
<a name="l1529"><span class="linenum">1529</span></a>      }
<a name="l1530"><span class="linenum">1530</span></a>      return <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;     <span class="comment">// Return course_sections ID that was used.</span>
<a name="l1531"><span class="linenum">1531</span></a>  }
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment">/**</span>
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment"> * Change the group mode of a course module.</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment"> *</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment"> * Note: Do not forget to trigger the event \core\event\course_module_updated as it needs</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment"> * to be triggered manually, refer to {@link \core\event\course_module_updated::create_from_cm()}.</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment"> *</span>
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment"> * @param int $id course module ID.</span>
<a name="l1540"><span class="linenum">1540</span></a>  <span class="comment"> * @param int $groupmode the new groupmode value.</span>
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment"> * @return bool True if the $groupmode was updated.</span>
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment"> */</span>
<a name="l1543"><span class="linenum">1543</span></a>  function <a class="function" onClick="logFunction('set_coursemodule_groupmode')" href="../_functions/set_coursemodule_groupmode.html" onMouseOver="funcPopup(event,'set_coursemodule_groupmode')">set_coursemodule_groupmode</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../_variables/groupmode.html">$groupmode</a>) {
<a name="l1544"><span class="linenum">1544</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1545"><span class="linenum">1545</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>), 'id,course,groupmode', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1546"><span class="linenum">1546</span></a>      if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a> != <a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../_variables/groupmode.html">$groupmode</a>) {
<a name="l1547"><span class="linenum">1547</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'groupmode', <a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../_variables/groupmode.html">$groupmode</a>, array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1548"><span class="linenum">1548</span></a>          <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1549"><span class="linenum">1549</span></a>      }
<a name="l1550"><span class="linenum">1550</span></a>      return (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a> != <a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../_variables/groupmode.html">$groupmode</a>);
<a name="l1551"><span class="linenum">1551</span></a>  }
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>  function <a class="function" onClick="logFunction('set_coursemodule_idnumber')" href="../_functions/set_coursemodule_idnumber.html" onMouseOver="funcPopup(event,'set_coursemodule_idnumber')">set_coursemodule_idnumber</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>) {
<a name="l1554"><span class="linenum">1554</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1555"><span class="linenum">1555</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>), 'id,course,idnumber', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1556"><span class="linenum">1556</span></a>      if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> != <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>) {
<a name="l1557"><span class="linenum">1557</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'idnumber', <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>, array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1558"><span class="linenum">1558</span></a>          <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1559"><span class="linenum">1559</span></a>      }
<a name="l1560"><span class="linenum">1560</span></a>      return (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> != <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>);
<a name="l1561"><span class="linenum">1561</span></a>  }
<a name="l1562"><span class="linenum">1562</span></a>  
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment">/**</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment"> * Set the visibility of a module and inherent properties.</span>
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment"> *</span>
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment"> * Note: Do not forget to trigger the event \core\event\course_module_updated as it needs</span>
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment"> * to be triggered manually, refer to {@link \core\event\course_module_updated::create_from_cm()}.</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment"> *</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment"> * From 2.4 the parameter $prevstateoverrides has been removed, the logic it triggered</span>
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment"> * has been moved to {@link set_section_visible()} which was the only place from which</span>
<a name="l1571"><span class="linenum">1571</span></a>  <span class="comment"> * the parameter was used.</span>
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment"> *</span>
<a name="l1573"><span class="linenum">1573</span></a>  <span class="comment"> * @param int $id of the module</span>
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment"> * @param int $visible state of the module</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment"> * @return bool false when the module was not found, true otherwise</span>
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment"> */</span>
<a name="l1577"><span class="linenum">1577</span></a>  function <a class="function" onClick="logFunction('set_coursemodule_visible')" href="../_functions/set_coursemodule_visible.html" onMouseOver="funcPopup(event,'set_coursemodule_visible')">set_coursemodule_visible</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>) {
<a name="l1578"><span class="linenum">1578</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1579"><span class="linenum">1579</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1580"><span class="linenum">1580</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l1581"><span class="linenum">1581</span></a>  
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">    // Trigger developer's attention when using the previously removed argument.</span>
<a name="l1583"><span class="linenum">1583</span></a>      if (<a class="phpfunction" onClick="logFunction('func_num_args')" href="../_functions/func_num_args.html" onMouseOver="phpfuncPopup(event,'func_num_args')">func_num_args</a>() &gt; 2) {
<a name="l1584"><span class="linenum">1584</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Wrong number of arguments passed to <a class="function" onClick="logFunction('set_coursemodule_visible')" href="../_functions/set_coursemodule_visible.html" onMouseOver="funcPopup(event,'set_coursemodule_visible')">set_coursemodule_visible</a>(), <a class="var it35230" onMouseOver="hilite(35230)" onMouseOut="lolite()" onClick="logVariable('prevstateoverrides')" href="../_variables/prevstateoverrides.html">$prevstateoverrides</a>
<a name="l1585"><span class="linenum">1585</span></a>              has been removed.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1586"><span class="linenum">1586</span></a>      }
<a name="l1587"><span class="linenum">1587</span></a>  
<a name="l1588"><span class="linenum">1588</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>))) {
<a name="l1589"><span class="linenum">1589</span></a>          return false;
<a name="l1590"><span class="linenum">1590</span></a>      }
<a name="l1591"><span class="linenum">1591</span></a>  
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">    // Create events and propagate visibility to associated grade items if the value has changed.</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">    // Only do this if it's changed to avoid accidently overwriting manual showing/hiding of student grades.</span>
<a name="l1594"><span class="linenum">1594</span></a>      if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('visible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> == <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>) {
<a name="l1595"><span class="linenum">1595</span></a>          return true;
<a name="l1596"><span class="linenum">1596</span></a>      }
<a name="l1597"><span class="linenum">1597</span></a>  
<a name="l1598"><span class="linenum">1598</span></a>      if (!<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('modules', 'name', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('module')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/module.html">module</a>))) {
<a name="l1599"><span class="linenum">1599</span></a>          return false;
<a name="l1600"><span class="linenum">1600</span></a>      }
<a name="l1601"><span class="linenum">1601</span></a>      if (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('instance'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, 'modulename'=&gt;<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>))) {
<a name="l1602"><span class="linenum">1602</span></a>          foreach(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l1603"><span class="linenum">1603</span></a>              if (<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>) {
<a name="l1604"><span class="linenum">1604</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>);
<a name="l1605"><span class="linenum">1605</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('toggle_visibility')" href="../_functions/toggle_visibility.html" onMouseOver="funcPopup(event,'toggle_visibility')">toggle_visibility</a>(true);
<a name="l1606"><span class="linenum">1606</span></a>              } else {
<a name="l1607"><span class="linenum">1607</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>);
<a name="l1608"><span class="linenum">1608</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('toggle_visibility')" href="../_functions/toggle_visibility.html" onMouseOver="funcPopup(event,'toggle_visibility')">toggle_visibility</a>(false);
<a name="l1609"><span class="linenum">1609</span></a>              }
<a name="l1610"><span class="linenum">1610</span></a>          }
<a name="l1611"><span class="linenum">1611</span></a>      }
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">    // Updating visible and visibleold to keep them in sync. Only changing a section visibility will</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">    // affect visibleold to allow for an original visibility restore. See set_section_visible().</span>
<a name="l1615"><span class="linenum">1615</span></a>      <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../_variables/cminfo.html">$cminfo</a> = new stdClass();
<a name="l1616"><span class="linenum">1616</span></a>      <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../_variables/cminfo.html">$cminfo</a>-&gt;<a onClick="logVariable('id')" class="var it43668" onMouseOver="hilite(43668)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l1617"><span class="linenum">1617</span></a>      <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../_variables/cminfo.html">$cminfo</a>-&gt;<a onClick="logVariable('visible')" class="var it43668" onMouseOver="hilite(43668)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>;
<a name="l1618"><span class="linenum">1618</span></a>      <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../_variables/cminfo.html">$cminfo</a>-&gt;<a onClick="logVariable('visibleold')" class="var it43668" onMouseOver="hilite(43668)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>;
<a name="l1619"><span class="linenum">1619</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course_modules', <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../_variables/cminfo.html">$cminfo</a>);
<a name="l1620"><span class="linenum">1620</span></a>  
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment">    // Hide the associated grade items so the teacher doesn't also have to go to the gradebook and hide them there.</span>
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">    // Note that this must be done after updating the row in course_modules, in case</span>
<a name="l1623"><span class="linenum">1623</span></a>  <span class="comment">    // the modules grade_item_update function needs to access $cm-&gt;visible.</span>
<a name="l1624"><span class="linenum">1624</span></a>      if (<a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, <a class="constant" onClick="logConstant('FEATURE_CONTROLS_GRADE_VISIBILITY')" href="../_constants/FEATURE_CONTROLS_GRADE_VISIBILITY.html" onMouseOver="constPopup(event,'FEATURE_CONTROLS_GRADE_VISIBILITY')">FEATURE_CONTROLS_GRADE_VISIBILITY</a>) &amp;&amp;
<a name="l1625"><span class="linenum">1625</span></a>              <a class="function" onClick="logFunction('component_callback_exists')" href="../_functions/component_callback_exists.html" onMouseOver="funcPopup(event,'component_callback_exists')">component_callback_exists</a>('mod_' . <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, 'grade_item_update')) {
<a name="l1626"><span class="linenum">1626</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1627"><span class="linenum">1627</span></a>          <a class="function" onClick="logFunction('component_callback')" href="../_functions/component_callback.html" onMouseOver="funcPopup(event,'component_callback')">component_callback</a>('mod_' . <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, 'grade_item_update', array(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>));
<a name="l1628"><span class="linenum">1628</span></a>      } else {
<a name="l1629"><span class="linenum">1629</span></a>          <a class="var it3403" onMouseOver="hilite(3403)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('itemtype'=&gt;'mod', 'itemmodule'=&gt;<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, 'iteminstance'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, 'courseid'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>));
<a name="l1630"><span class="linenum">1630</span></a>          if (<a class="var it3403" onMouseOver="hilite(3403)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>) {
<a name="l1631"><span class="linenum">1631</span></a>              foreach (<a class="var it3403" onMouseOver="hilite(3403)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> as <a class="var it967" onMouseOver="hilite(967)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l1632"><span class="linenum">1632</span></a>                  <a class="var it967" onMouseOver="hilite(967)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('set_hidden')" href="../_functions/set_hidden.html" onMouseOver="funcPopup(event,'set_hidden')">set_hidden</a>(!<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>);
<a name="l1633"><span class="linenum">1633</span></a>              }
<a name="l1634"><span class="linenum">1634</span></a>          }
<a name="l1635"><span class="linenum">1635</span></a>      }
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1638"><span class="linenum">1638</span></a>      return true;
<a name="l1639"><span class="linenum">1639</span></a>  }
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment">/**</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment"> * Changes the course module name</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment"> *</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment"> * @param int $id course module id</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment"> * @param string $name new value for a name</span>
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment"> * @return bool whether a change was made</span>
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment"> */</span>
<a name="l1648"><span class="linenum">1648</span></a>  function <a class="function" onClick="logFunction('set_coursemodule_name')" href="../_functions/set_coursemodule_name.html" onMouseOver="funcPopup(event,'set_coursemodule_name')">set_coursemodule_name</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l1649"><span class="linenum">1649</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1650"><span class="linenum">1650</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l1651"><span class="linenum">1651</span></a>  
<a name="l1652"><span class="linenum">1652</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>('', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1653"><span class="linenum">1653</span></a>  
<a name="l1654"><span class="linenum">1654</span></a>      <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = new \stdClass();
<a name="l1655"><span class="linenum">1655</span></a>      <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>;
<a name="l1656"><span class="linenum">1656</span></a>  
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">    // Escape strings as they would be by mform.</span>
<a name="l1658"><span class="linenum">1658</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('formatstringstriptags')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/formatstringstriptags.html">formatstringstriptags</a>)) {
<a name="l1659"><span class="linenum">1659</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l1660"><span class="linenum">1660</span></a>      } else {
<a name="l1661"><span class="linenum">1661</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_CLEANHTML')" href="../_constants/PARAM_CLEANHTML.html" onMouseOver="constPopup(event,'PARAM_CLEANHTML')">PARAM_CLEANHTML</a>);
<a name="l1662"><span class="linenum">1662</span></a>      }
<a name="l1663"><span class="linenum">1663</span></a>      if (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a> === <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/name.html">name</a> || <a class="phpfunction" onClick="logFunction('strval')" href="../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) === '') {
<a name="l1664"><span class="linenum">1664</span></a>          return false;
<a name="l1665"><span class="linenum">1665</span></a>      }
<a name="l1666"><span class="linenum">1666</span></a>      if (\<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) &gt; 255) {
<a name="l1667"><span class="linenum">1667</span></a>          throw new \moodle_exception('maximumchars', 'moodle', '', 255);
<a name="l1668"><span class="linenum">1668</span></a>      }
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>      <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1671"><span class="linenum">1671</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l1672"><span class="linenum">1672</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l1673"><span class="linenum">1673</span></a>      \core\event\<a class="class" onClick="logClass('course_module_updated')" href="../_classes/course_module_updated.html" onMouseOver="classPopup(event,'course_module_updated')">course_module_updated</a>::<a class="function" onClick="logFunction('create_from_cm')" href="../_functions/create_from_cm.html" onMouseOver="funcPopup(event,'create_from_cm')">create_from_cm</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1674"><span class="linenum">1674</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1675"><span class="linenum">1675</span></a>  
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">    // Attempt to update the grade item if relevant.</span>
<a name="l1677"><span class="linenum">1677</span></a>      <a class="var it35231" onMouseOver="hilite(35231)" onMouseOut="lolite()" onClick="logVariable('grademodule')" href="../_variables/grademodule.html">$grademodule</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>));
<a name="l1678"><span class="linenum">1678</span></a>      <a class="var it35231" onMouseOver="hilite(35231)" onMouseOut="lolite()" onClick="logVariable('grademodule')" href="../_variables/grademodule.html">$grademodule</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it45107" onMouseOver="hilite(45107)" onMouseOut="lolite()" href="../_variables/cmidnumber.html">cmidnumber</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>;
<a name="l1679"><span class="linenum">1679</span></a>      <a class="var it35231" onMouseOver="hilite(35231)" onMouseOut="lolite()" onClick="logVariable('grademodule')" href="../_variables/grademodule.html">$grademodule</a>-&gt;<a onClick="logVariable('modname')" class="var it45107" onMouseOver="hilite(45107)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>;
<a name="l1680"><span class="linenum">1680</span></a>      <a class="function" onClick="logFunction('grade_update_mod_grades')" href="../_functions/grade_update_mod_grades.html" onMouseOver="funcPopup(event,'grade_update_mod_grades')">grade_update_mod_grades</a>(<a class="var it35231" onMouseOver="hilite(35231)" onMouseOut="lolite()" onClick="logVariable('grademodule')" href="../_variables/grademodule.html">$grademodule</a>);
<a name="l1681"><span class="linenum">1681</span></a>  
<a name="l1682"><span class="linenum">1682</span></a>      return true;
<a name="l1683"><span class="linenum">1683</span></a>  }
<a name="l1684"><span class="linenum">1684</span></a>  
<a name="l1685"><span class="linenum">1685</span></a>  <span class="comment">/**</span>
<a name="l1686"><span class="linenum">1686</span></a>  <span class="comment"> * This function will handle the whole deletion process of a module. This includes calling</span>
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment"> * the modules delete_instance function, deleting files, events, grades, conditional data,</span>
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment"> * the data in the course_module and course_sections table and adding a module deletion</span>
<a name="l1689"><span class="linenum">1689</span></a>  <span class="comment"> * event to the DB.</span>
<a name="l1690"><span class="linenum">1690</span></a>  <span class="comment"> *</span>
<a name="l1691"><span class="linenum">1691</span></a>  <span class="comment"> * @param int $cmid the course module id</span>
<a name="l1692"><span class="linenum">1692</span></a>  <span class="comment"> * @since Moodle 2.5</span>
<a name="l1693"><span class="linenum">1693</span></a>  <span class="comment"> */</span>
<a name="l1694"><span class="linenum">1694</span></a>  function <a class="function" onClick="logFunction('course_delete_module')" href="../_functions/course_delete_module.html" onMouseOver="funcPopup(event,'course_delete_module')">course_delete_module</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>) {
<a name="l1695"><span class="linenum">1695</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1696"><span class="linenum">1696</span></a>  
<a name="l1697"><span class="linenum">1697</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1698"><span class="linenum">1698</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/questionlib.php');
<a name="l1699"><span class="linenum">1699</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blog/lib.php.html">/blog/lib.php</a>');
<a name="l1700"><span class="linenum">1700</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l1701"><span class="linenum">1701</span></a>  
<a name="l1702"><span class="linenum">1702</span></a>  <span class="comment">    // Get the course module.</span>
<a name="l1703"><span class="linenum">1703</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id' =&gt; <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>))) {
<a name="l1704"><span class="linenum">1704</span></a>          return true;
<a name="l1705"><span class="linenum">1705</span></a>      }
<a name="l1706"><span class="linenum">1706</span></a>  
<a name="l1707"><span class="linenum">1707</span></a>  <span class="comment">    // Get the module context.</span>
<a name="l1708"><span class="linenum">1708</span></a>      <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1709"><span class="linenum">1709</span></a>  
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment">    // Get the course module name.</span>
<a name="l1711"><span class="linenum">1711</span></a>      <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('modules', 'name', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('module')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/module.html">module</a>), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1712"><span class="linenum">1712</span></a>  
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment">    // Get the file location of the delete_instance function for this module.</span>
<a name="l1714"><span class="linenum">1714</span></a>      <a class="var it27161" onMouseOver="hilite(27161)" onMouseOut="lolite()" onClick="logVariable('modlib')" href="../_variables/modlib.html">$modlib</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/mod/<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>/lib.php&quot;;
<a name="l1715"><span class="linenum">1715</span></a>  
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment">    // Include the file required to call the delete_instance function for this module.</span>
<a name="l1717"><span class="linenum">1717</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it27161" onMouseOver="hilite(27161)" onMouseOut="lolite()" onClick="logVariable('modlib')" href="../_variables/modlib.html">$modlib</a>)) {
<a name="l1718"><span class="linenum">1718</span></a>          require_once(<a class="var it27161" onMouseOver="hilite(27161)" onMouseOut="lolite()" onClick="logVariable('modlib')" href="../_variables/modlib.html">$modlib</a>);
<a name="l1719"><span class="linenum">1719</span></a>      } else {
<a name="l1720"><span class="linenum">1720</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotdeletemodulemissinglib', '', '', null,
<a name="l1721"><span class="linenum">1721</span></a>              &quot;Cannot delete this module as the file mod/<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>/lib.php is missing.&quot;);
<a name="l1722"><span class="linenum">1722</span></a>      }
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>      <a class="var it35232" onMouseOver="hilite(35232)" onMouseOut="lolite()" onClick="logVariable('deleteinstancefunction')" href="../_variables/deleteinstancefunction.html">$deleteinstancefunction</a> = <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a> . '_delete_instance';
<a name="l1725"><span class="linenum">1725</span></a>  
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment">    // Ensure the delete_instance function exists for this module.</span>
<a name="l1727"><span class="linenum">1727</span></a>      if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it35232" onMouseOver="hilite(35232)" onMouseOut="lolite()" onClick="logVariable('deleteinstancefunction')" href="../_variables/deleteinstancefunction.html">$deleteinstancefunction</a>)) {
<a name="l1728"><span class="linenum">1728</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotdeletemodulemissingfunc', '', '', null,
<a name="l1729"><span class="linenum">1729</span></a>              &quot;Cannot delete this module as the function {<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>}_delete_instance is missing in mod/<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>/lib.php.&quot;);
<a name="l1730"><span class="linenum">1730</span></a>      }
<a name="l1731"><span class="linenum">1731</span></a>  
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment">    // Allow plugins to use this course module before we completely delete it.</span>
<a name="l1733"><span class="linenum">1733</span></a>      if (<a class="var it10064" onMouseOver="hilite(10064)" onMouseOut="lolite()" onClick="logVariable('pluginsfunction')" href="../_variables/pluginsfunction.html">$pluginsfunction</a> = <a class="function" onClick="logFunction('get_plugins_with_function')" href="../_functions/get_plugins_with_function.html" onMouseOver="funcPopup(event,'get_plugins_with_function')">get_plugins_with_function</a>('pre_course_module_delete')) {
<a name="l1734"><span class="linenum">1734</span></a>          foreach (<a class="var it10064" onMouseOver="hilite(10064)" onMouseOut="lolite()" onClick="logVariable('pluginsfunction')" href="../_variables/pluginsfunction.html">$pluginsfunction</a> as <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> =&gt; <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>) {
<a name="l1735"><span class="linenum">1735</span></a>              foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> as <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('pluginfunction')" href="../_variables/pluginfunction.html">$pluginfunction</a>) {
<a name="l1736"><span class="linenum">1736</span></a>                  <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('pluginfunction')" href="../_variables/pluginfunction.html">$pluginfunction</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1737"><span class="linenum">1737</span></a>              }
<a name="l1738"><span class="linenum">1738</span></a>          }
<a name="l1739"><span class="linenum">1739</span></a>      }
<a name="l1740"><span class="linenum">1740</span></a>  
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment">    // Delete activity context questions and question categories.</span>
<a name="l1742"><span class="linenum">1742</span></a>      <a class="function" onClick="logFunction('question_delete_activity')" href="../_functions/question_delete_activity.html" onMouseOver="funcPopup(event,'question_delete_activity')">question_delete_activity</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1743"><span class="linenum">1743</span></a>  
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment">    // Call the delete_instance function, if it returns false throw an exception.</span>
<a name="l1745"><span class="linenum">1745</span></a>      if (!<a class="var it35232" onMouseOver="hilite(35232)" onMouseOut="lolite()" onClick="logVariable('deleteinstancefunction')" href="../_variables/deleteinstancefunction.html">$deleteinstancefunction</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>)) {
<a name="l1746"><span class="linenum">1746</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotdeletemoduleinstance', '', '', null,
<a name="l1747"><span class="linenum">1747</span></a>              &quot;Cannot delete the module <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a> (instance).&quot;);
<a name="l1748"><span class="linenum">1748</span></a>      }
<a name="l1749"><span class="linenum">1749</span></a>  
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment">    // Remove all module files in case modules forget to do that.</span>
<a name="l1751"><span class="linenum">1751</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1752"><span class="linenum">1752</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1753"><span class="linenum">1753</span></a>  
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment">    // Delete events from calendar.</span>
<a name="l1755"><span class="linenum">1755</span></a>      if (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('instance' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, 'modulename' =&gt; <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>))) {
<a name="l1756"><span class="linenum">1756</span></a>          foreach(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l1757"><span class="linenum">1757</span></a>              <a class="var it12895" onMouseOver="hilite(12895)" onMouseOut="lolite()" onClick="logVariable('calendarevent')" href="../_variables/calendarevent.html">$calendarevent</a> = <a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1758"><span class="linenum">1758</span></a>              <a class="var it12895" onMouseOver="hilite(12895)" onMouseOut="lolite()" onClick="logVariable('calendarevent')" href="../_variables/calendarevent.html">$calendarevent</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1759"><span class="linenum">1759</span></a>          }
<a name="l1760"><span class="linenum">1760</span></a>      }
<a name="l1761"><span class="linenum">1761</span></a>  
<a name="l1762"><span class="linenum">1762</span></a>  <span class="comment">    // Delete grade items, outcome items and grades attached to modules.</span>
<a name="l1763"><span class="linenum">1763</span></a>      if (<a class="var it3403" onMouseOver="hilite(3403)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('itemtype' =&gt; 'mod', 'itemmodule' =&gt; <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>,
<a name="l1764"><span class="linenum">1764</span></a>                                                     'iteminstance' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, 'courseid' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>))) {
<a name="l1765"><span class="linenum">1765</span></a>          foreach (<a class="var it3403" onMouseOver="hilite(3403)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> as <a class="var it967" onMouseOver="hilite(967)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l1766"><span class="linenum">1766</span></a>              <a class="var it967" onMouseOver="hilite(967)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('moddelete');
<a name="l1767"><span class="linenum">1767</span></a>          }
<a name="l1768"><span class="linenum">1768</span></a>      }
<a name="l1769"><span class="linenum">1769</span></a>  
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment">    // Delete completion and availability data; it is better to do this even if the</span>
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment">    // features are not turned on, in case they were turned on previously (these will be</span>
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment">    // very quick on an empty table).</span>
<a name="l1773"><span class="linenum">1773</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_modules_completion', array('coursemoduleid' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1774"><span class="linenum">1774</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_completion_criteria', array('moduleinstance' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1775"><span class="linenum">1775</span></a>                                                              'course' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>,
<a name="l1776"><span class="linenum">1776</span></a>                                                              'criteriatype' =&gt; <a class="constant" onClick="logConstant('COMPLETION_CRITERIA_TYPE_ACTIVITY')" href="../_constants/COMPLETION_CRITERIA_TYPE_ACTIVITY.html" onMouseOver="constPopup(event,'COMPLETION_CRITERIA_TYPE_ACTIVITY')">COMPLETION_CRITERIA_TYPE_ACTIVITY</a>));
<a name="l1777"><span class="linenum">1777</span></a>  
<a name="l1778"><span class="linenum">1778</span></a>  <span class="comment">    // Delete all tag instances associated with the instance of this module.</span>
<a name="l1779"><span class="linenum">1779</span></a>      <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('delete_instances')" href="../_functions/delete_instances.html" onMouseOver="funcPopup(event,'delete_instances')">delete_instances</a>('mod_' . <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, null, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1780"><span class="linenum">1780</span></a>      <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('remove_all_item_tags')" href="../_functions/remove_all_item_tags.html" onMouseOver="funcPopup(event,'remove_all_item_tags')">remove_all_item_tags</a>('core', 'course_modules', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1781"><span class="linenum">1781</span></a>  
<a name="l1782"><span class="linenum">1782</span></a>  <span class="comment">    // Notify the competency subsystem.</span>
<a name="l1783"><span class="linenum">1783</span></a>      \core_competency\<a class="class" onClick="logClass('api')" href="../_classes/api.html" onMouseOver="classPopup(event,'api')">api</a>::<a class="function" onClick="logFunction('hook_course_module_deleted')" href="../_functions/hook_course_module_deleted.html" onMouseOver="funcPopup(event,'hook_course_module_deleted')">hook_course_module_deleted</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1784"><span class="linenum">1784</span></a>  
<a name="l1785"><span class="linenum">1785</span></a>  <span class="comment">    // Delete the context.</span>
<a name="l1786"><span class="linenum">1786</span></a>      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('delete_instance')" href="../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>(<a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1787"><span class="linenum">1787</span></a>  
<a name="l1788"><span class="linenum">1788</span></a>  <span class="comment">    // Delete the module from the course_modules table.</span>
<a name="l1789"><span class="linenum">1789</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_modules', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1790"><span class="linenum">1790</span></a>  
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment">    // Delete module from that section.</span>
<a name="l1792"><span class="linenum">1792</span></a>      if (!<a class="function" onClick="logFunction('delete_mod_from_section')" href="../_functions/delete_mod_from_section.html" onMouseOver="funcPopup(event,'delete_mod_from_section')">delete_mod_from_section</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('section')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/section.html">section</a>)) {
<a name="l1793"><span class="linenum">1793</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotdeletemodulefromsection', '', '', null,
<a name="l1794"><span class="linenum">1794</span></a>              &quot;Cannot delete the module <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a> (instance) from section.&quot;);
<a name="l1795"><span class="linenum">1795</span></a>      }
<a name="l1796"><span class="linenum">1796</span></a>  
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment">    // Trigger event for course module delete action.</span>
<a name="l1798"><span class="linenum">1798</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_module_deleted')" href="../_classes/course_module_deleted.html" onMouseOver="classPopup(event,'course_module_deleted')">course_module_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1799"><span class="linenum">1799</span></a>          'courseid' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>,
<a name="l1800"><span class="linenum">1800</span></a>          'context'  =&gt; <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>,
<a name="l1801"><span class="linenum">1801</span></a>          'objectid' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1802"><span class="linenum">1802</span></a>          'other'    =&gt; array(
<a name="l1803"><span class="linenum">1803</span></a>              'modulename' =&gt; <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>,
<a name="l1804"><span class="linenum">1804</span></a>              'instanceid'   =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>,
<a name="l1805"><span class="linenum">1805</span></a>          )
<a name="l1806"><span class="linenum">1806</span></a>      ));
<a name="l1807"><span class="linenum">1807</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course_modules', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1808"><span class="linenum">1808</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1809"><span class="linenum">1809</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1810"><span class="linenum">1810</span></a>  }
<a name="l1811"><span class="linenum">1811</span></a>  
<a name="l1812"><span class="linenum">1812</span></a>  function <a class="function" onClick="logFunction('delete_mod_from_section')" href="../_functions/delete_mod_from_section.html" onMouseOver="funcPopup(event,'delete_mod_from_section')">delete_mod_from_section</a>(<a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>, <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>) {
<a name="l1813"><span class="linenum">1813</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1814"><span class="linenum">1814</span></a>  
<a name="l1815"><span class="linenum">1815</span></a>      if (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;course_sections&quot;, array(&quot;id&quot;=&gt;<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>)) ) {
<a name="l1816"><span class="linenum">1816</span></a>  
<a name="l1817"><span class="linenum">1817</span></a>          <a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>);
<a name="l1818"><span class="linenum">1818</span></a>  
<a name="l1819"><span class="linenum">1819</span></a>          if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a> (<a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a>, <a class="var it3571" onMouseOver="hilite(3571)" onMouseOut="lolite()" onClick="logVariable('modid')" href="../_variables/modid.html">$modid</a>)) {
<a name="l1820"><span class="linenum">1820</span></a>              <a class="phpfunction" onClick="logFunction('array_splice')" href="../_functions/array_splice.html" onMouseOver="phpfuncPopup(event,'array_splice')">array_splice</a>(<a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>[0], 1);
<a name="l1821"><span class="linenum">1821</span></a>              <a class="var it35216" onMouseOver="hilite(35216)" onMouseOut="lolite()" onClick="logVariable('newsequence')" href="../_variables/newsequence.html">$newsequence</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it35228" onMouseOver="hilite(35228)" onMouseOut="lolite()" onClick="logVariable('modarray')" href="../_variables/modarray.html">$modarray</a>);
<a name="l1822"><span class="linenum">1822</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;course_sections&quot;, &quot;sequence&quot;, <a class="var it35216" onMouseOver="hilite(35216)" onMouseOut="lolite()" onClick="logVariable('newsequence')" href="../_variables/newsequence.html">$newsequence</a>, array(&quot;id&quot;=&gt;<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1823"><span class="linenum">1823</span></a>              <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('course')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, true);
<a name="l1824"><span class="linenum">1824</span></a>              return true;
<a name="l1825"><span class="linenum">1825</span></a>          } else {
<a name="l1826"><span class="linenum">1826</span></a>              return false;
<a name="l1827"><span class="linenum">1827</span></a>          }
<a name="l1828"><span class="linenum">1828</span></a>  
<a name="l1829"><span class="linenum">1829</span></a>      }
<a name="l1830"><span class="linenum">1830</span></a>      return false;
<a name="l1831"><span class="linenum">1831</span></a>  }
<a name="l1832"><span class="linenum">1832</span></a>  
<a name="l1833"><span class="linenum">1833</span></a>  <span class="comment">/**</span>
<a name="l1834"><span class="linenum">1834</span></a>  <span class="comment"> * Moves a section within a course, from a position to another.</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment"> * Be very careful: $section and $destination refer to section number,</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment"> * not id!.</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment"> *</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1839"><span class="linenum">1839</span></a>  <span class="comment"> * @param int $section Section number (not id!!!)</span>
<a name="l1840"><span class="linenum">1840</span></a>  <span class="comment"> * @param int $destination</span>
<a name="l1841"><span class="linenum">1841</span></a>  <span class="comment"> * @param bool $ignorenumsections</span>
<a name="l1842"><span class="linenum">1842</span></a>  <span class="comment"> * @return boolean Result</span>
<a name="l1843"><span class="linenum">1843</span></a>  <span class="comment"> */</span>
<a name="l1844"><span class="linenum">1844</span></a>  function <a class="function" onClick="logFunction('move_section_to')" href="../_functions/move_section_to.html" onMouseOver="funcPopup(event,'move_section_to')">move_section_to</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a>, <a class="var it35233" onMouseOver="hilite(35233)" onMouseOut="lolite()" onClick="logVariable('ignorenumsections')" href="../_variables/ignorenumsections.html">$ignorenumsections</a> = false) {
<a name="l1845"><span class="linenum">1845</span></a>  <span class="comment">/// Moves a whole course section up and down within the course</span>
<a name="l1846"><span class="linenum">1846</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>      if (!<a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a> &amp;&amp; <a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a> != 0) {
<a name="l1849"><span class="linenum">1849</span></a>          return true;
<a name="l1850"><span class="linenum">1850</span></a>      }
<a name="l1851"><span class="linenum">1851</span></a>  
<a name="l1852"><span class="linenum">1852</span></a>  <span class="comment">    // compartibility with course formats using field 'numsections'</span>
<a name="l1853"><span class="linenum">1853</span></a>      <a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('get_format_options')" href="../_functions/get_format_options.html" onMouseOver="funcPopup(event,'get_format_options')">get_format_options</a>();
<a name="l1854"><span class="linenum">1854</span></a>      if ((!<a class="var it35233" onMouseOver="hilite(35233)" onMouseOut="lolite()" onClick="logVariable('ignorenumsections')" href="../_variables/ignorenumsections.html">$ignorenumsections</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('numsections', <a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>) &amp;&amp;
<a name="l1855"><span class="linenum">1855</span></a>              (<a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a> &gt; <a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['numsections'])) || (<a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a> &lt; 1)) {
<a name="l1856"><span class="linenum">1856</span></a>          return false;
<a name="l1857"><span class="linenum">1857</span></a>      }
<a name="l1858"><span class="linenum">1858</span></a>  
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">    // Get all sections for this course and re-order them (2 of them should now share the same section number)</span>
<a name="l1860"><span class="linenum">1860</span></a>      if (!<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('course_sections', array('course' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>),
<a name="l1861"><span class="linenum">1861</span></a>              'section ASC, id ASC', 'id, section')) {
<a name="l1862"><span class="linenum">1862</span></a>          return false;
<a name="l1863"><span class="linenum">1863</span></a>      }
<a name="l1864"><span class="linenum">1864</span></a>  
<a name="l1865"><span class="linenum">1865</span></a>      <a class="var it35234" onMouseOver="hilite(35234)" onMouseOut="lolite()" onClick="logVariable('movedsections')" href="../_variables/movedsections.html">$movedsections</a> = <a class="function" onClick="logFunction('reorder_sections')" href="../_functions/reorder_sections.html" onMouseOver="funcPopup(event,'reorder_sections')">reorder_sections</a>(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a>);
<a name="l1866"><span class="linenum">1866</span></a>  
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment">    // Update all sections. Do this in 2 steps to avoid breaking database</span>
<a name="l1868"><span class="linenum">1868</span></a>  <span class="comment">    // uniqueness constraint</span>
<a name="l1869"><span class="linenum">1869</span></a>      <a class="var it4224" onMouseOver="hilite(4224)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('start_delegated_transaction')" href="../_functions/start_delegated_transaction.html" onMouseOver="funcPopup(event,'start_delegated_transaction')">start_delegated_transaction</a>();
<a name="l1870"><span class="linenum">1870</span></a>      foreach (<a class="var it35234" onMouseOver="hilite(35234)" onMouseOut="lolite()" onClick="logVariable('movedsections')" href="../_variables/movedsections.html">$movedsections</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>) {
<a name="l1871"><span class="linenum">1871</span></a>          if (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] !== <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>) {
<a name="l1872"><span class="linenum">1872</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_sections', 'section', -<a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>, array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>));
<a name="l1873"><span class="linenum">1873</span></a>          }
<a name="l1874"><span class="linenum">1874</span></a>      }
<a name="l1875"><span class="linenum">1875</span></a>      foreach (<a class="var it35234" onMouseOver="hilite(35234)" onMouseOut="lolite()" onClick="logVariable('movedsections')" href="../_variables/movedsections.html">$movedsections</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>) {
<a name="l1876"><span class="linenum">1876</span></a>          if (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] !== <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>) {
<a name="l1877"><span class="linenum">1877</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_sections', 'section', <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>, array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>));
<a name="l1878"><span class="linenum">1878</span></a>          }
<a name="l1879"><span class="linenum">1879</span></a>      }
<a name="l1880"><span class="linenum">1880</span></a>  
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">    // If we move the highlighted section itself, then just highlight the destination.</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment">    // Adjust the higlighted section location if we move something over it either direction.</span>
<a name="l1883"><span class="linenum">1883</span></a>      if (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> == <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a>) {
<a name="l1884"><span class="linenum">1884</span></a>          <a class="function" onClick="logFunction('course_set_marker')" href="../_functions/course_set_marker.html" onMouseOver="funcPopup(event,'course_set_marker')">course_set_marker</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a>);
<a name="l1885"><span class="linenum">1885</span></a>      } elseif (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> &gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a> &amp;&amp; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a> &gt;= <a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a>) {
<a name="l1886"><span class="linenum">1886</span></a>          <a class="function" onClick="logFunction('course_set_marker')" href="../_functions/course_set_marker.html" onMouseOver="funcPopup(event,'course_set_marker')">course_set_marker</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a>+1);
<a name="l1887"><span class="linenum">1887</span></a>      } elseif (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> &lt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a> &amp;&amp; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a> &lt;= <a class="var it2549" onMouseOver="hilite(2549)" onMouseOut="lolite()" onClick="logVariable('destination')" href="../_variables/destination.html">$destination</a>) {
<a name="l1888"><span class="linenum">1888</span></a>          <a class="function" onClick="logFunction('course_set_marker')" href="../_functions/course_set_marker.html" onMouseOver="funcPopup(event,'course_set_marker')">course_set_marker</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('marker')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/marker.html">marker</a>-1);
<a name="l1889"><span class="linenum">1889</span></a>      }
<a name="l1890"><span class="linenum">1890</span></a>  
<a name="l1891"><span class="linenum">1891</span></a>      <a class="var it4224" onMouseOver="hilite(4224)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a>-&gt;<a class="function" onClick="logFunction('allow_commit')" href="../_functions/allow_commit.html" onMouseOver="funcPopup(event,'allow_commit')">allow_commit</a>();
<a name="l1892"><span class="linenum">1892</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, true);
<a name="l1893"><span class="linenum">1893</span></a>      return true;
<a name="l1894"><span class="linenum">1894</span></a>  }
<a name="l1895"><span class="linenum">1895</span></a>  
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">/**</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * This method will delete a course section and may delete all modules inside it.</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> *</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment"> * No permissions are checked here, use {@link course_can_delete_section()} to</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment"> * check if section can actually be deleted.</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment"> *</span>
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment"> * @param int|stdClass $course</span>
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment"> * @param int|stdClass|section_info $section</span>
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment"> * @param bool $forcedeleteifnotempty if set to false section will not be deleted if it has modules in it.</span>
<a name="l1905"><span class="linenum">1905</span></a>  <span class="comment"> * @return bool whether section was deleted</span>
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment"> */</span>
<a name="l1907"><span class="linenum">1907</span></a>  function <a class="function" onClick="logFunction('course_delete_section')" href="../_functions/course_delete_section.html" onMouseOver="funcPopup(event,'course_delete_section')">course_delete_section</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it11886" onMouseOver="hilite(11886)" onMouseOut="lolite()" onClick="logVariable('forcedeleteifnotempty')" href="../_variables/forcedeleteifnotempty.html">$forcedeleteifnotempty</a> = true) {
<a name="l1908"><span class="linenum">1908</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1909"><span class="linenum">1909</span></a>  
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment">    // Prepare variables.</span>
<a name="l1911"><span class="linenum">1911</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) ? <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> : (int)<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l1912"><span class="linenum">1912</span></a>      <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a> = (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>)) ? <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/section.html">section</a> : (int)<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>;
<a name="l1913"><span class="linenum">1913</span></a>      <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_sections', array('course' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'section' =&gt; <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>));
<a name="l1914"><span class="linenum">1914</span></a>      if (!<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment">        // No section exists, can't proceed.</span>
<a name="l1916"><span class="linenum">1916</span></a>          return false;
<a name="l1917"><span class="linenum">1917</span></a>      }
<a name="l1918"><span class="linenum">1918</span></a>      <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1919"><span class="linenum">1919</span></a>      <a class="var it5126" onMouseOver="hilite(5126)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../_variables/sectionname.html">$sectionname</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>-&gt;<a class="function" onClick="logFunction('get_section_name')" href="../_functions/get_section_name.html" onMouseOver="funcPopup(event,'get_section_name')">get_section_name</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l1920"><span class="linenum">1920</span></a>  
<a name="l1921"><span class="linenum">1921</span></a>  <span class="comment">    // Delete section.</span>
<a name="l1922"><span class="linenum">1922</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>-&gt;<a class="function" onClick="logFunction('delete_section')" href="../_functions/delete_section.html" onMouseOver="funcPopup(event,'delete_section')">delete_section</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it11886" onMouseOver="hilite(11886)" onMouseOut="lolite()" onClick="logVariable('forcedeleteifnotempty')" href="../_variables/forcedeleteifnotempty.html">$forcedeleteifnotempty</a>);
<a name="l1923"><span class="linenum">1923</span></a>  
<a name="l1924"><span class="linenum">1924</span></a>  <span class="comment">    // Trigger an event for course section deletion.</span>
<a name="l1925"><span class="linenum">1925</span></a>      if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l1926"><span class="linenum">1926</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1927"><span class="linenum">1927</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_section_deleted')" href="../_classes/course_section_deleted.html" onMouseOver="classPopup(event,'course_section_deleted')">course_section_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(
<a name="l1928"><span class="linenum">1928</span></a>                  array(
<a name="l1929"><span class="linenum">1929</span></a>                      'objectid' =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1930"><span class="linenum">1930</span></a>                      'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>,
<a name="l1931"><span class="linenum">1931</span></a>                      'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l1932"><span class="linenum">1932</span></a>                      'other' =&gt; array(
<a name="l1933"><span class="linenum">1933</span></a>                          'sectionnum' =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/section.html">section</a>,
<a name="l1934"><span class="linenum">1934</span></a>                          'sectionname' =&gt; <a class="var it5126" onMouseOver="hilite(5126)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../_variables/sectionname.html">$sectionname</a>,
<a name="l1935"><span class="linenum">1935</span></a>                      )
<a name="l1936"><span class="linenum">1936</span></a>                  )
<a name="l1937"><span class="linenum">1937</span></a>              );
<a name="l1938"><span class="linenum">1938</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course_sections', <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l1939"><span class="linenum">1939</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1940"><span class="linenum">1940</span></a>      }
<a name="l1941"><span class="linenum">1941</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l1942"><span class="linenum">1942</span></a>  }
<a name="l1943"><span class="linenum">1943</span></a>  
<a name="l1944"><span class="linenum">1944</span></a>  <span class="comment">/**</span>
<a name="l1945"><span class="linenum">1945</span></a>  <span class="comment"> * Updates the course section</span>
<a name="l1946"><span class="linenum">1946</span></a>  <span class="comment"> *</span>
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment"> * This function does not check permissions or clean values - this has to be done prior to calling it.</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment"> *</span>
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment"> * @param int|stdClass $course</span>
<a name="l1950"><span class="linenum">1950</span></a>  <span class="comment"> * @param stdClass $section record from course_sections table - it will be updated with the new values</span>
<a name="l1951"><span class="linenum">1951</span></a>  <span class="comment"> * @param array|stdClass $data</span>
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment"> */</span>
<a name="l1953"><span class="linenum">1953</span></a>  function <a class="function" onClick="logFunction('course_update_section')" href="../_functions/course_update_section.html" onMouseOver="funcPopup(event,'course_update_section')">course_update_section</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l1954"><span class="linenum">1954</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1955"><span class="linenum">1955</span></a>  
<a name="l1956"><span class="linenum">1956</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) ? <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> : (int)<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l1957"><span class="linenum">1957</span></a>  
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment">    // Some fields can not be updated using this method.</span>
<a name="l1959"><span class="linenum">1959</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = array_diff_key((array)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, array('id', 'course', 'section', 'sequence'));
<a name="l1960"><span class="linenum">1960</span></a>      <a class="var it35235" onMouseOver="hilite(35235)" onMouseOut="lolite()" onClick="logVariable('changevisibility')" href="../_variables/changevisibility.html">$changevisibility</a> = (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('visible', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) &amp;&amp; (bool)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['visible'] != (bool)<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('visible')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>);
<a name="l1961"><span class="linenum">1961</span></a>      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('name', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) &amp;&amp; \<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['name']) &gt; 255) {
<a name="l1962"><span class="linenum">1962</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('maximumchars', 'moodle', '', 255);
<a name="l1963"><span class="linenum">1963</span></a>      }
<a name="l1964"><span class="linenum">1964</span></a>  
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment">    // Update record in the DB and course format options.</span>
<a name="l1966"><span class="linenum">1966</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'] = <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1967"><span class="linenum">1967</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course_sections', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l1968"><span class="linenum">1968</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, true);
<a name="l1969"><span class="linenum">1969</span></a>      <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)-&gt;<a class="function" onClick="logFunction('update_section_format_options')" href="../_functions/update_section_format_options.html" onMouseOver="funcPopup(event,'update_section_format_options')">update_section_format_options</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l1970"><span class="linenum">1970</span></a>  
<a name="l1971"><span class="linenum">1971</span></a>  <span class="comment">    // Update fields of the $section object.</span>
<a name="l1972"><span class="linenum">1972</span></a>      foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1973"><span class="linenum">1973</span></a>          if (property_exists(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l1974"><span class="linenum">1974</span></a>              <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1975"><span class="linenum">1975</span></a>          }
<a name="l1976"><span class="linenum">1976</span></a>      }
<a name="l1977"><span class="linenum">1977</span></a>  
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">    // Trigger an event for course section update.</span>
<a name="l1979"><span class="linenum">1979</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_section_updated')" href="../_classes/course_section_updated.html" onMouseOver="classPopup(event,'course_section_updated')">course_section_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(
<a name="l1980"><span class="linenum">1980</span></a>          array(
<a name="l1981"><span class="linenum">1981</span></a>              'objectid' =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1982"><span class="linenum">1982</span></a>              'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>,
<a name="l1983"><span class="linenum">1983</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>),
<a name="l1984"><span class="linenum">1984</span></a>              'other' =&gt; array('sectionnum' =&gt; <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/section.html">section</a>)
<a name="l1985"><span class="linenum">1985</span></a>          )
<a name="l1986"><span class="linenum">1986</span></a>      );
<a name="l1987"><span class="linenum">1987</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1988"><span class="linenum">1988</span></a>  
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment">    // If section visibility was changed, hide the modules in this section too.</span>
<a name="l1990"><span class="linenum">1990</span></a>      if (<a class="var it35235" onMouseOver="hilite(35235)" onMouseOut="lolite()" onClick="logVariable('changevisibility')" href="../_variables/changevisibility.html">$changevisibility</a> &amp;&amp; !empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>)) {
<a name="l1991"><span class="linenum">1991</span></a>          <a class="var it4191" onMouseOver="hilite(4191)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../_variables/modules.html">$modules</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sequence')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/sequence.html">sequence</a>);
<a name="l1992"><span class="linenum">1992</span></a>          foreach (<a class="var it4191" onMouseOver="hilite(4191)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../_variables/modules.html">$modules</a> as <a class="var it2352" onMouseOver="hilite(2352)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../_variables/moduleid.html">$moduleid</a>) {
<a name="l1993"><span class="linenum">1993</span></a>              if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>(null, <a class="var it2352" onMouseOver="hilite(2352)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../_variables/moduleid.html">$moduleid</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)) {
<a name="l1994"><span class="linenum">1994</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['visible']) {
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment">                    // As we unhide the section, we use the previously saved visibility stored in visibleold.</span>
<a name="l1996"><span class="linenum">1996</span></a>                      <a class="function" onClick="logFunction('set_coursemodule_visible')" href="../_functions/set_coursemodule_visible.html" onMouseOver="funcPopup(event,'set_coursemodule_visible')">set_coursemodule_visible</a>(<a class="var it2352" onMouseOver="hilite(2352)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../_variables/moduleid.html">$moduleid</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a>);
<a name="l1997"><span class="linenum">1997</span></a>                  } else {
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment">                    // We hide the section, so we hide the module but we store the original state in visibleold.</span>
<a name="l1999"><span class="linenum">1999</span></a>                      <a class="function" onClick="logFunction('set_coursemodule_visible')" href="../_functions/set_coursemodule_visible.html" onMouseOver="funcPopup(event,'set_coursemodule_visible')">set_coursemodule_visible</a>(<a class="var it2352" onMouseOver="hilite(2352)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../_variables/moduleid.html">$moduleid</a>, 0);
<a name="l2000"><span class="linenum">2000</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'visibleold', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('visible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>, array('id' =&gt; <a class="var it2352" onMouseOver="hilite(2352)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../_variables/moduleid.html">$moduleid</a>));
<a name="l2001"><span class="linenum">2001</span></a>                  }
<a name="l2002"><span class="linenum">2002</span></a>                  \core\event\<a class="class" onClick="logClass('course_module_updated')" href="../_classes/course_module_updated.html" onMouseOver="classPopup(event,'course_module_updated')">course_module_updated</a>::<a class="function" onClick="logFunction('create_from_cm')" href="../_functions/create_from_cm.html" onMouseOver="funcPopup(event,'create_from_cm')">create_from_cm</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2003"><span class="linenum">2003</span></a>              }
<a name="l2004"><span class="linenum">2004</span></a>          }
<a name="l2005"><span class="linenum">2005</span></a>      }
<a name="l2006"><span class="linenum">2006</span></a>  }
<a name="l2007"><span class="linenum">2007</span></a>  
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment">/**</span>
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment"> * Checks if the current user can delete a section (if course format allows it and user has proper permissions).</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment"> *</span>
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment"> * @param int|stdClass $course</span>
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment"> * @param int|stdClass|section_info $section</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment"> * @return bool</span>
<a name="l2014"><span class="linenum">2014</span></a>  <span class="comment"> */</span>
<a name="l2015"><span class="linenum">2015</span></a>  function <a class="function" onClick="logFunction('course_can_delete_section')" href="../_functions/course_can_delete_section.html" onMouseOver="funcPopup(event,'course_can_delete_section')">course_can_delete_section</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l2016"><span class="linenum">2016</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>)) {
<a name="l2017"><span class="linenum">2017</span></a>          <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/section.html">section</a>;
<a name="l2018"><span class="linenum">2018</span></a>      }
<a name="l2019"><span class="linenum">2019</span></a>      if (!<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment">        // Not possible to delete 0-section.</span>
<a name="l2021"><span class="linenum">2021</span></a>          return false;
<a name="l2022"><span class="linenum">2022</span></a>      }
<a name="l2023"><span class="linenum">2023</span></a>  <span class="comment">    // Course format should allow to delete sections.</span>
<a name="l2024"><span class="linenum">2024</span></a>      if (!<a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('can_delete_section')" href="../_functions/can_delete_section.html" onMouseOver="funcPopup(event,'can_delete_section')">can_delete_section</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>)) {
<a name="l2025"><span class="linenum">2025</span></a>          return false;
<a name="l2026"><span class="linenum">2026</span></a>      }
<a name="l2027"><span class="linenum">2027</span></a>  <span class="comment">    // Make sure user has capability to update course and move sections.</span>
<a name="l2028"><span class="linenum">2028</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) ? <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> : <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2029"><span class="linenum">2029</span></a>      if (!<a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(array('moodle/course:movesections', 'moodle/course:update'), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2030"><span class="linenum">2030</span></a>          return false;
<a name="l2031"><span class="linenum">2031</span></a>      }
<a name="l2032"><span class="linenum">2032</span></a>  <span class="comment">    // Make sure user has capability to delete each activity in this section.</span>
<a name="l2033"><span class="linenum">2033</span></a>      <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2034"><span class="linenum">2034</span></a>      if (!empty(<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('sections')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../_variables/sections.html">sections</a>[<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>])) {
<a name="l2035"><span class="linenum">2035</span></a>          foreach (<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('sections')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../_variables/sections.html">sections</a>[<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>] as <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>) {
<a name="l2036"><span class="linenum">2036</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:manageactivities', <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>))) {
<a name="l2037"><span class="linenum">2037</span></a>                  return false;
<a name="l2038"><span class="linenum">2038</span></a>              }
<a name="l2039"><span class="linenum">2039</span></a>          }
<a name="l2040"><span class="linenum">2040</span></a>      }
<a name="l2041"><span class="linenum">2041</span></a>      return true;
<a name="l2042"><span class="linenum">2042</span></a>  }
<a name="l2043"><span class="linenum">2043</span></a>  
<a name="l2044"><span class="linenum">2044</span></a>  <span class="comment">/**</span>
<a name="l2045"><span class="linenum">2045</span></a>  <span class="comment"> * Reordering algorithm for course sections. Given an array of section-&gt;section indexed by section-&gt;id,</span>
<a name="l2046"><span class="linenum">2046</span></a>  <span class="comment"> * an original position number and a target position number, rebuilds the array so that the</span>
<a name="l2047"><span class="linenum">2047</span></a>  <span class="comment"> * move is made without any duplication of section positions.</span>
<a name="l2048"><span class="linenum">2048</span></a>  <span class="comment"> * Note: The target_position is the position AFTER WHICH the moved section will be inserted. If you want to</span>
<a name="l2049"><span class="linenum">2049</span></a>  <span class="comment"> * insert a section before the first one, you must give 0 as the target (section 0 can never be moved).</span>
<a name="l2050"><span class="linenum">2050</span></a>  <span class="comment"> *</span>
<a name="l2051"><span class="linenum">2051</span></a>  <span class="comment"> * @param array $sections</span>
<a name="l2052"><span class="linenum">2052</span></a>  <span class="comment"> * @param int $origin_position</span>
<a name="l2053"><span class="linenum">2053</span></a>  <span class="comment"> * @param int $target_position</span>
<a name="l2054"><span class="linenum">2054</span></a>  <span class="comment"> * @return array</span>
<a name="l2055"><span class="linenum">2055</span></a>  <span class="comment"> */</span>
<a name="l2056"><span class="linenum">2056</span></a>  function <a class="function" onClick="logFunction('reorder_sections')" href="../_functions/reorder_sections.html" onMouseOver="funcPopup(event,'reorder_sections')">reorder_sections</a>(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>, <a class="var it35236" onMouseOver="hilite(35236)" onMouseOut="lolite()" onClick="logVariable('origin_position')" href="../_variables/origin_position.html">$origin_position</a>, <a class="var it35237" onMouseOver="hilite(35237)" onMouseOut="lolite()" onClick="logVariable('target_position')" href="../_variables/target_position.html">$target_position</a>) {
<a name="l2057"><span class="linenum">2057</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>)) {
<a name="l2058"><span class="linenum">2058</span></a>          return false;
<a name="l2059"><span class="linenum">2059</span></a>      }
<a name="l2060"><span class="linenum">2060</span></a>  
<a name="l2061"><span class="linenum">2061</span></a>  <span class="comment">    // We can't move section position 0</span>
<a name="l2062"><span class="linenum">2062</span></a>      if (<a class="var it35236" onMouseOver="hilite(35236)" onMouseOut="lolite()" onClick="logVariable('origin_position')" href="../_variables/origin_position.html">$origin_position</a> &lt; 1) {
<a name="l2063"><span class="linenum">2063</span></a>          echo &quot;We can't move section position 0&quot;;
<a name="l2064"><span class="linenum">2064</span></a>          return false;
<a name="l2065"><span class="linenum">2065</span></a>      }
<a name="l2066"><span class="linenum">2066</span></a>  
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">    // Locate origin section in sections array</span>
<a name="l2068"><span class="linenum">2068</span></a>      if (!<a class="var it35238" onMouseOver="hilite(35238)" onMouseOut="lolite()" onClick="logVariable('origin_key')" href="../_variables/origin_key.html">$origin_key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it35236" onMouseOver="hilite(35236)" onMouseOut="lolite()" onClick="logVariable('origin_position')" href="../_variables/origin_position.html">$origin_position</a>, <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>)) {
<a name="l2069"><span class="linenum">2069</span></a>          echo &quot;searched position not in sections array&quot;;
<a name="l2070"><span class="linenum">2070</span></a>          return false; <span class="comment">// searched position not in sections array</span>
<a name="l2071"><span class="linenum">2071</span></a>      }
<a name="l2072"><span class="linenum">2072</span></a>  
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">    // Extract origin section</span>
<a name="l2074"><span class="linenum">2074</span></a>      <a class="var it35239" onMouseOver="hilite(35239)" onMouseOut="lolite()" onClick="logVariable('origin_section')" href="../_variables/origin_section.html">$origin_section</a> = <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35238" onMouseOver="hilite(35238)" onMouseOut="lolite()" onClick="logVariable('origin_key')" href="../_variables/origin_key.html">$origin_key</a>];
<a name="l2075"><span class="linenum">2075</span></a>      unset(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35238" onMouseOver="hilite(35238)" onMouseOut="lolite()" onClick="logVariable('origin_key')" href="../_variables/origin_key.html">$origin_key</a>]);
<a name="l2076"><span class="linenum">2076</span></a>  
<a name="l2077"><span class="linenum">2077</span></a>  <span class="comment">    // Find offset of target position (stupid PHP's array_splice requires offset instead of key index!)</span>
<a name="l2078"><span class="linenum">2078</span></a>      <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../_variables/found.html">$found</a> = false;
<a name="l2079"><span class="linenum">2079</span></a>      <a class="var it35240" onMouseOver="hilite(35240)" onMouseOut="lolite()" onClick="logVariable('append_array')" href="../_variables/append_array.html">$append_array</a> = array();
<a name="l2080"><span class="linenum">2080</span></a>      foreach (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>) {
<a name="l2081"><span class="linenum">2081</span></a>          if (<a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../_variables/found.html">$found</a>) {
<a name="l2082"><span class="linenum">2082</span></a>              <a class="var it35240" onMouseOver="hilite(35240)" onMouseOut="lolite()" onClick="logVariable('append_array')" href="../_variables/append_array.html">$append_array</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>;
<a name="l2083"><span class="linenum">2083</span></a>              unset(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l2084"><span class="linenum">2084</span></a>          }
<a name="l2085"><span class="linenum">2085</span></a>          if (<a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a> == <a class="var it35237" onMouseOver="hilite(35237)" onMouseOut="lolite()" onClick="logVariable('target_position')" href="../_variables/target_position.html">$target_position</a>) {
<a name="l2086"><span class="linenum">2086</span></a>              if (<a class="var it35237" onMouseOver="hilite(35237)" onMouseOut="lolite()" onClick="logVariable('target_position')" href="../_variables/target_position.html">$target_position</a> &lt; <a class="var it35236" onMouseOver="hilite(35236)" onMouseOut="lolite()" onClick="logVariable('origin_position')" href="../_variables/origin_position.html">$origin_position</a>) {
<a name="l2087"><span class="linenum">2087</span></a>                  <a class="var it35240" onMouseOver="hilite(35240)" onMouseOut="lolite()" onClick="logVariable('append_array')" href="../_variables/append_array.html">$append_array</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>;
<a name="l2088"><span class="linenum">2088</span></a>                  unset(<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l2089"><span class="linenum">2089</span></a>              }
<a name="l2090"><span class="linenum">2090</span></a>              <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../_variables/found.html">$found</a> = true;
<a name="l2091"><span class="linenum">2091</span></a>          }
<a name="l2092"><span class="linenum">2092</span></a>      }
<a name="l2093"><span class="linenum">2093</span></a>  
<a name="l2094"><span class="linenum">2094</span></a>  <span class="comment">    // Append moved section</span>
<a name="l2095"><span class="linenum">2095</span></a>      <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it35238" onMouseOver="hilite(35238)" onMouseOut="lolite()" onClick="logVariable('origin_key')" href="../_variables/origin_key.html">$origin_key</a>] = <a class="var it35239" onMouseOver="hilite(35239)" onMouseOut="lolite()" onClick="logVariable('origin_section')" href="../_variables/origin_section.html">$origin_section</a>;
<a name="l2096"><span class="linenum">2096</span></a>  
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment">    // Append rest of array (if applicable)</span>
<a name="l2098"><span class="linenum">2098</span></a>      if (!empty(<a class="var it35240" onMouseOver="hilite(35240)" onMouseOut="lolite()" onClick="logVariable('append_array')" href="../_variables/append_array.html">$append_array</a>)) {
<a name="l2099"><span class="linenum">2099</span></a>          foreach (<a class="var it35240" onMouseOver="hilite(35240)" onMouseOut="lolite()" onClick="logVariable('append_array')" href="../_variables/append_array.html">$append_array</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>) {
<a name="l2100"><span class="linenum">2100</span></a>              <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>;
<a name="l2101"><span class="linenum">2101</span></a>          }
<a name="l2102"><span class="linenum">2102</span></a>      }
<a name="l2103"><span class="linenum">2103</span></a>  
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment">    // Renumber positions</span>
<a name="l2105"><span class="linenum">2105</span></a>      <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a> = 0;
<a name="l2106"><span class="linenum">2106</span></a>      foreach (<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>) {
<a name="l2107"><span class="linenum">2107</span></a>          <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>;
<a name="l2108"><span class="linenum">2108</span></a>          <a class="var it752" onMouseOver="hilite(752)" onMouseOut="lolite()" onClick="logVariable('position')" href="../_variables/position.html">$position</a>++;
<a name="l2109"><span class="linenum">2109</span></a>      }
<a name="l2110"><span class="linenum">2110</span></a>  
<a name="l2111"><span class="linenum">2111</span></a>      return <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>;
<a name="l2112"><span class="linenum">2112</span></a>  
<a name="l2113"><span class="linenum">2113</span></a>  }
<a name="l2114"><span class="linenum">2114</span></a>  
<a name="l2115"><span class="linenum">2115</span></a>  <span class="comment">/**</span>
<a name="l2116"><span class="linenum">2116</span></a>  <span class="comment"> * Move the module object $mod to the specified $section</span>
<a name="l2117"><span class="linenum">2117</span></a>  <span class="comment"> * If $beforemod exists then that is the module</span>
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment"> * before which $modid should be inserted</span>
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment"> *</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment"> * @param stdClass|cm_info $mod</span>
<a name="l2121"><span class="linenum">2121</span></a>  <span class="comment"> * @param stdClass|section_info $section</span>
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment"> * @param int|stdClass $beforemod id or object with field id corresponding to the module</span>
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment"> *     before which the module needs to be included. Null for inserting in the</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment"> *     end of the section</span>
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment"> * @return int new value for module visibility (0 or 1)</span>
<a name="l2126"><span class="linenum">2126</span></a>  <span class="comment"> */</span>
<a name="l2127"><span class="linenum">2127</span></a>  function <a class="function" onClick="logFunction('moveto_module')" href="../_functions/moveto_module.html" onMouseOver="funcPopup(event,'moveto_module')">moveto_module</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a>=NULL) {
<a name="l2128"><span class="linenum">2128</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2129"><span class="linenum">2129</span></a>  
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">    // Current module visibility state - return value of this function.</span>
<a name="l2131"><span class="linenum">2131</span></a>      <a class="var it35241" onMouseOver="hilite(35241)" onMouseOut="lolite()" onClick="logVariable('modvisible')" href="../_variables/modvisible.html">$modvisible</a> = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l2132"><span class="linenum">2132</span></a>  
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">    // Remove original module from original section.</span>
<a name="l2134"><span class="linenum">2134</span></a>      if (! <a class="function" onClick="logFunction('delete_mod_from_section')" href="../_functions/delete_mod_from_section.html" onMouseOver="funcPopup(event,'delete_mod_from_section')">delete_mod_from_section</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a>)) {
<a name="l2135"><span class="linenum">2135</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;Could not delete module from existing section&quot;);
<a name="l2136"><span class="linenum">2136</span></a>      }
<a name="l2137"><span class="linenum">2137</span></a>  
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment">    // If moving to a hidden section then hide module.</span>
<a name="l2139"><span class="linenum">2139</span></a>      if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('section')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/section.html">section</a> != <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2140"><span class="linenum">2140</span></a>          if (!<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('visible')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2141"><span class="linenum">2141</span></a>  <span class="comment">            // Module was visible but must become hidden after moving to hidden section.</span>
<a name="l2142"><span class="linenum">2142</span></a>              <a class="var it35241" onMouseOver="hilite(35241)" onMouseOut="lolite()" onClick="logVariable('modvisible')" href="../_variables/modvisible.html">$modvisible</a> = 0;
<a name="l2143"><span class="linenum">2143</span></a>              <a class="function" onClick="logFunction('set_coursemodule_visible')" href="../_functions/set_coursemodule_visible.html" onMouseOver="funcPopup(event,'set_coursemodule_visible')">set_coursemodule_visible</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 0);
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment">            // Set visibleold to 1 so module will be visible when section is made visible.</span>
<a name="l2145"><span class="linenum">2145</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'visibleold', 1, array('id' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2146"><span class="linenum">2146</span></a>          }
<a name="l2147"><span class="linenum">2147</span></a>          if (<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('visible')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment">            // Hidden module was moved to the visible section, restore the module visibility from visibleold.</span>
<a name="l2149"><span class="linenum">2149</span></a>              <a class="function" onClick="logFunction('set_coursemodule_visible')" href="../_functions/set_coursemodule_visible.html" onMouseOver="funcPopup(event,'set_coursemodule_visible')">set_coursemodule_visible</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visibleold')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a>);
<a name="l2150"><span class="linenum">2150</span></a>              <a class="var it35241" onMouseOver="hilite(35241)" onMouseOut="lolite()" onClick="logVariable('modvisible')" href="../_variables/modvisible.html">$modvisible</a> = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visibleold')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a>;
<a name="l2151"><span class="linenum">2151</span></a>          }
<a name="l2152"><span class="linenum">2152</span></a>      }
<a name="l2153"><span class="linenum">2153</span></a>  
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">    // Add the module into the new section.</span>
<a name="l2155"><span class="linenum">2155</span></a>      <a class="function" onClick="logFunction('course_add_cm_to_section')" href="../_functions/course_add_cm_to_section.html" onMouseOver="funcPopup(event,'course_add_cm_to_section')">course_add_cm_to_section</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('course')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it43306" onMouseOver="hilite(43306)" onMouseOut="lolite()" href="../_variables/section.html">section</a>, <a class="var it2587" onMouseOver="hilite(2587)" onMouseOut="lolite()" onClick="logVariable('beforemod')" href="../_variables/beforemod.html">$beforemod</a>);
<a name="l2156"><span class="linenum">2156</span></a>      return <a class="var it35241" onMouseOver="hilite(35241)" onMouseOut="lolite()" onClick="logVariable('modvisible')" href="../_variables/modvisible.html">$modvisible</a>;
<a name="l2157"><span class="linenum">2157</span></a>  }
<a name="l2158"><span class="linenum">2158</span></a>  
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">/**</span>
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment"> * Returns the list of all editing actions that current user can perform on the module</span>
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment"> *</span>
<a name="l2162"><span class="linenum">2162</span></a>  <span class="comment"> * @param cm_info $mod The module to produce editing buttons for</span>
<a name="l2163"><span class="linenum">2163</span></a>  <span class="comment"> * @param int $indent The current indenting (default -1 means no move left-right actions)</span>
<a name="l2164"><span class="linenum">2164</span></a>  <span class="comment"> * @param int $sr The section to link back to (used for creating the links)</span>
<a name="l2165"><span class="linenum">2165</span></a>  <span class="comment"> * @return array array of action_link or pix_icon objects</span>
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment"> */</span>
<a name="l2167"><span class="linenum">2167</span></a>  function <a class="function" onClick="logFunction('course_get_cm_edit_actions')" href="../_functions/course_get_cm_edit_actions.html" onMouseOver="funcPopup(event,'course_get_cm_edit_actions')">course_get_cm_edit_actions</a>(cm_info <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, <a class="var it2595" onMouseOver="hilite(2595)" onMouseOut="lolite()" onClick="logVariable('indent')" href="../_variables/indent.html">$indent</a> = -1, <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a> = null) {
<a name="l2168"><span class="linenum">2168</span></a>      global <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2169"><span class="linenum">2169</span></a>  
<a name="l2170"><span class="linenum">2170</span></a>      static <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>;
<a name="l2171"><span class="linenum">2171</span></a>  
<a name="l2172"><span class="linenum">2172</span></a>      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('course')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/course.html">course</a>);
<a name="l2173"><span class="linenum">2173</span></a>      <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2174"><span class="linenum">2174</span></a>  
<a name="l2175"><span class="linenum">2175</span></a>      <a class="var it35242" onMouseOver="hilite(35242)" onMouseOut="lolite()" onClick="logVariable('editcaps')" href="../_variables/editcaps.html">$editcaps</a> = array('moodle/course:manageactivities', 'moodle/course:activityvisibility', 'moodle/role:assign');
<a name="l2176"><span class="linenum">2176</span></a>      <a class="var it35243" onMouseOver="hilite(35243)" onMouseOut="lolite()" onClick="logVariable('dupecaps')" href="../_variables/dupecaps.html">$dupecaps</a> = array('moodle/backup:backuptargetimport', 'moodle/restore:restoretargetimport');
<a name="l2177"><span class="linenum">2177</span></a>  
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment">    // No permission to edit anything.</span>
<a name="l2179"><span class="linenum">2179</span></a>      if (!<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(<a class="var it35242" onMouseOver="hilite(35242)" onMouseOut="lolite()" onClick="logVariable('editcaps')" href="../_variables/editcaps.html">$editcaps</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>) and !<a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it35243" onMouseOver="hilite(35243)" onMouseOut="lolite()" onClick="logVariable('dupecaps')" href="../_variables/dupecaps.html">$dupecaps</a>, <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l2180"><span class="linenum">2180</span></a>          return array();
<a name="l2181"><span class="linenum">2181</span></a>      }
<a name="l2182"><span class="linenum">2182</span></a>  
<a name="l2183"><span class="linenum">2183</span></a>      <a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:manageactivities', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>);
<a name="l2184"><span class="linenum">2184</span></a>  
<a name="l2185"><span class="linenum">2185</span></a>      if (!isset(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>)) {
<a name="l2186"><span class="linenum">2186</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('get_strings')" href="../_functions/get_strings.html" onMouseOver="funcPopup(event,'get_strings')">get_strings</a>(array('delete', 'move', 'moveright', 'moveleft',
<a name="l2187"><span class="linenum">2187</span></a>              'editsettings', 'duplicate', 'hide', 'show'), 'moodle');
<a name="l2188"><span class="linenum">2188</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('assign')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/assign.html">assign</a>         = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assignroles', 'role');
<a name="l2189"><span class="linenum">2189</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('groupsnone')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/groupsnone.html">groupsnone</a>     = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('clicktochangeinbrackets', 'moodle', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;groupsnone&quot;));
<a name="l2190"><span class="linenum">2190</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('groupsseparate')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/groupsseparate.html">groupsseparate</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('clicktochangeinbrackets', 'moodle', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;groupsseparate&quot;));
<a name="l2191"><span class="linenum">2191</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('groupsvisible')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/groupsvisible.html">groupsvisible</a>  = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('clicktochangeinbrackets', 'moodle', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;groupsvisible&quot;));
<a name="l2192"><span class="linenum">2192</span></a>      }
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>      <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/mod.php.html">/course/mod.php</a>', array('sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l2195"><span class="linenum">2195</span></a>  
<a name="l2196"><span class="linenum">2196</span></a>      if (<a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a> !== null) {
<a name="l2197"><span class="linenum">2197</span></a>          <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('sr', <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a>);
<a name="l2198"><span class="linenum">2198</span></a>      }
<a name="l2199"><span class="linenum">2199</span></a>      <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a> = array();
<a name="l2200"><span class="linenum">2200</span></a>  
<a name="l2201"><span class="linenum">2201</span></a>  <span class="comment">    // Update.</span>
<a name="l2202"><span class="linenum">2202</span></a>      if (<a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a>) {
<a name="l2203"><span class="linenum">2203</span></a>          <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['update'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2204"><span class="linenum">2204</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('update' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2205"><span class="linenum">2205</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/edit', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('editsettings')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/editsettings.html">editsettings</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2206"><span class="linenum">2206</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('editsettings')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/editsettings.html">editsettings</a>,
<a name="l2207"><span class="linenum">2207</span></a>              array('class' =&gt; 'editing_update', 'data-action' =&gt; 'update')
<a name="l2208"><span class="linenum">2208</span></a>          );
<a name="l2209"><span class="linenum">2209</span></a>      }
<a name="l2210"><span class="linenum">2210</span></a>  
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment">    // Indent.</span>
<a name="l2212"><span class="linenum">2212</span></a>      if (<a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a> &amp;&amp; <a class="var it2595" onMouseOver="hilite(2595)" onMouseOut="lolite()" onClick="logVariable('indent')" href="../_variables/indent.html">$indent</a> &gt;= 0) {
<a name="l2213"><span class="linenum">2213</span></a>          <a class="var it35248" onMouseOver="hilite(35248)" onMouseOut="lolite()" onClick="logVariable('indentlimits')" href="../_variables/indentlimits.html">$indentlimits</a> = new stdClass();
<a name="l2214"><span class="linenum">2214</span></a>          <a class="var it35248" onMouseOver="hilite(35248)" onMouseOut="lolite()" onClick="logVariable('indentlimits')" href="../_variables/indentlimits.html">$indentlimits</a>-&gt;<a onClick="logVariable('min')" class="var it45108" onMouseOver="hilite(45108)" onMouseOut="lolite()" href="../_variables/min.html">min</a> = 0;
<a name="l2215"><span class="linenum">2215</span></a>          <a class="var it35248" onMouseOver="hilite(35248)" onMouseOut="lolite()" onClick="logVariable('indentlimits')" href="../_variables/indentlimits.html">$indentlimits</a>-&gt;<a onClick="logVariable('max')" class="var it45108" onMouseOver="hilite(45108)" onMouseOut="lolite()" href="../_variables/max.html">max</a> = 16;
<a name="l2216"><span class="linenum">2216</span></a>          if (<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {   // Exchange arrows on RTL
<a name="l2217"><span class="linenum">2217</span></a>              <a class="var it11133" onMouseOver="hilite(11133)" onMouseOut="lolite()" onClick="logVariable('rightarrow')" href="../_variables/rightarrow.html">$rightarrow</a> = 't/left';
<a name="l2218"><span class="linenum">2218</span></a>              <a class="var it11134" onMouseOver="hilite(11134)" onMouseOut="lolite()" onClick="logVariable('leftarrow')" href="../_variables/leftarrow.html">$leftarrow</a>  = 't/right';
<a name="l2219"><span class="linenum">2219</span></a>          } else {
<a name="l2220"><span class="linenum">2220</span></a>              <a class="var it11133" onMouseOver="hilite(11133)" onMouseOut="lolite()" onClick="logVariable('rightarrow')" href="../_variables/rightarrow.html">$rightarrow</a> = 't/right';
<a name="l2221"><span class="linenum">2221</span></a>              <a class="var it11134" onMouseOver="hilite(11134)" onMouseOut="lolite()" onClick="logVariable('leftarrow')" href="../_variables/leftarrow.html">$leftarrow</a>  = 't/left';
<a name="l2222"><span class="linenum">2222</span></a>          }
<a name="l2223"><span class="linenum">2223</span></a>  
<a name="l2224"><span class="linenum">2224</span></a>          if (<a class="var it2595" onMouseOver="hilite(2595)" onMouseOut="lolite()" onClick="logVariable('indent')" href="../_variables/indent.html">$indent</a> &gt;= <a class="var it35248" onMouseOver="hilite(35248)" onMouseOut="lolite()" onClick="logVariable('indentlimits')" href="../_variables/indentlimits.html">$indentlimits</a>-&gt;<a onClick="logVariable('max')" class="var it45108" onMouseOver="hilite(45108)" onMouseOut="lolite()" href="../_variables/max.html">max</a>) {
<a name="l2225"><span class="linenum">2225</span></a>              <a class="var it35249" onMouseOver="hilite(35249)" onMouseOut="lolite()" onClick="logVariable('enabledclass')" href="../_variables/enabledclass.html">$enabledclass</a> = 'hidden';
<a name="l2226"><span class="linenum">2226</span></a>          } else {
<a name="l2227"><span class="linenum">2227</span></a>              <a class="var it35249" onMouseOver="hilite(35249)" onMouseOut="lolite()" onClick="logVariable('enabledclass')" href="../_variables/enabledclass.html">$enabledclass</a> = '';
<a name="l2228"><span class="linenum">2228</span></a>          }
<a name="l2229"><span class="linenum">2229</span></a>          <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['moveright'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2230"><span class="linenum">2230</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('id' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'indent' =&gt; '1')),
<a name="l2231"><span class="linenum">2231</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>(<a class="var it11133" onMouseOver="hilite(11133)" onMouseOut="lolite()" onClick="logVariable('rightarrow')" href="../_variables/rightarrow.html">$rightarrow</a>, <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('moveright')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/moveright.html">moveright</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2232"><span class="linenum">2232</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('moveright')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/moveright.html">moveright</a>,
<a name="l2233"><span class="linenum">2233</span></a>              array('class' =&gt; 'editing_moveright ' . <a class="var it35249" onMouseOver="hilite(35249)" onMouseOut="lolite()" onClick="logVariable('enabledclass')" href="../_variables/enabledclass.html">$enabledclass</a>, 'data-action' =&gt; 'moveright', 'data-keepopen' =&gt; true)
<a name="l2234"><span class="linenum">2234</span></a>          );
<a name="l2235"><span class="linenum">2235</span></a>  
<a name="l2236"><span class="linenum">2236</span></a>          if (<a class="var it2595" onMouseOver="hilite(2595)" onMouseOut="lolite()" onClick="logVariable('indent')" href="../_variables/indent.html">$indent</a> &lt;= <a class="var it35248" onMouseOver="hilite(35248)" onMouseOut="lolite()" onClick="logVariable('indentlimits')" href="../_variables/indentlimits.html">$indentlimits</a>-&gt;<a onClick="logVariable('min')" class="var it45108" onMouseOver="hilite(45108)" onMouseOut="lolite()" href="../_variables/min.html">min</a>) {
<a name="l2237"><span class="linenum">2237</span></a>              <a class="var it35249" onMouseOver="hilite(35249)" onMouseOut="lolite()" onClick="logVariable('enabledclass')" href="../_variables/enabledclass.html">$enabledclass</a> = 'hidden';
<a name="l2238"><span class="linenum">2238</span></a>          } else {
<a name="l2239"><span class="linenum">2239</span></a>              <a class="var it35249" onMouseOver="hilite(35249)" onMouseOut="lolite()" onClick="logVariable('enabledclass')" href="../_variables/enabledclass.html">$enabledclass</a> = '';
<a name="l2240"><span class="linenum">2240</span></a>          }
<a name="l2241"><span class="linenum">2241</span></a>          <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['moveleft'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2242"><span class="linenum">2242</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('id' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'indent' =&gt; '-1')),
<a name="l2243"><span class="linenum">2243</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>(<a class="var it11134" onMouseOver="hilite(11134)" onMouseOut="lolite()" onClick="logVariable('leftarrow')" href="../_variables/leftarrow.html">$leftarrow</a>, <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('moveleft')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/moveleft.html">moveleft</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2244"><span class="linenum">2244</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('moveleft')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/moveleft.html">moveleft</a>,
<a name="l2245"><span class="linenum">2245</span></a>              array('class' =&gt; 'editing_moveleft ' . <a class="var it35249" onMouseOver="hilite(35249)" onMouseOut="lolite()" onClick="logVariable('enabledclass')" href="../_variables/enabledclass.html">$enabledclass</a>, 'data-action' =&gt; 'moveleft', 'data-keepopen' =&gt; true)
<a name="l2246"><span class="linenum">2246</span></a>          );
<a name="l2247"><span class="linenum">2247</span></a>  
<a name="l2248"><span class="linenum">2248</span></a>      }
<a name="l2249"><span class="linenum">2249</span></a>  
<a name="l2250"><span class="linenum">2250</span></a>  <span class="comment">    // Hide/Show.</span>
<a name="l2251"><span class="linenum">2251</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:activityvisibility', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>)) {
<a name="l2252"><span class="linenum">2252</span></a>          if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2253"><span class="linenum">2253</span></a>              <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['hide'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2254"><span class="linenum">2254</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('hide' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2255"><span class="linenum">2255</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/hide', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('hide')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/hide.html">hide</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2256"><span class="linenum">2256</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('hide')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/hide.html">hide</a>,
<a name="l2257"><span class="linenum">2257</span></a>                  array('class' =&gt; 'editing_hide', 'data-action' =&gt; 'hide')
<a name="l2258"><span class="linenum">2258</span></a>              );
<a name="l2259"><span class="linenum">2259</span></a>          } else {
<a name="l2260"><span class="linenum">2260</span></a>              <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['show'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2261"><span class="linenum">2261</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('show' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2262"><span class="linenum">2262</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/show', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('show')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/show.html">show</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2263"><span class="linenum">2263</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('show')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/show.html">show</a>,
<a name="l2264"><span class="linenum">2264</span></a>                  array('class' =&gt; 'editing_show', 'data-action' =&gt; 'show')
<a name="l2265"><span class="linenum">2265</span></a>              );
<a name="l2266"><span class="linenum">2266</span></a>          }
<a name="l2267"><span class="linenum">2267</span></a>      }
<a name="l2268"><span class="linenum">2268</span></a>  
<a name="l2269"><span class="linenum">2269</span></a>  <span class="comment">    // Duplicate (require both target import caps to be able to duplicate and backup2 support, see modduplicate.php)</span>
<a name="l2270"><span class="linenum">2270</span></a>      if (<a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it35243" onMouseOver="hilite(35243)" onMouseOut="lolite()" onClick="logVariable('dupecaps')" href="../_variables/dupecaps.html">$dupecaps</a>, <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>) &amp;&amp;
<a name="l2271"><span class="linenum">2271</span></a>              <a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('modname')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>)) {
<a name="l2272"><span class="linenum">2272</span></a>          <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['duplicate'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2273"><span class="linenum">2273</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('duplicate' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2274"><span class="linenum">2274</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/copy', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('duplicate')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/duplicate.html">duplicate</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2275"><span class="linenum">2275</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('duplicate')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/duplicate.html">duplicate</a>,
<a name="l2276"><span class="linenum">2276</span></a>              array('class' =&gt; 'editing_duplicate', 'data-action' =&gt; 'duplicate', 'data-sr' =&gt; <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a>)
<a name="l2277"><span class="linenum">2277</span></a>          );
<a name="l2278"><span class="linenum">2278</span></a>      }
<a name="l2279"><span class="linenum">2279</span></a>  
<a name="l2280"><span class="linenum">2280</span></a>  <span class="comment">    // Groupmode.</span>
<a name="l2281"><span class="linenum">2281</span></a>      if (<a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a> &amp;&amp; !<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('coursegroupmodeforce')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/coursegroupmodeforce.html">coursegroupmodeforce</a>) {
<a name="l2282"><span class="linenum">2282</span></a>          if (<a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('modname')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>, 0)) {
<a name="l2283"><span class="linenum">2283</span></a>              if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('effectivegroupmode')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/effectivegroupmode.html">effectivegroupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>) {
<a name="l2284"><span class="linenum">2284</span></a>                  <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('nextgroupmode')" href="../_variables/nextgroupmode.html">$nextgroupmode</a> = <a class="constant" onClick="logConstant('VISIBLEGROUPS')" href="../_constants/VISIBLEGROUPS.html" onMouseOver="constPopup(event,'VISIBLEGROUPS')">VISIBLEGROUPS</a>;
<a name="l2285"><span class="linenum">2285</span></a>                  <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a> = <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('groupsseparate')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/groupsseparate.html">groupsseparate</a>;
<a name="l2286"><span class="linenum">2286</span></a>                  <a class="var it35252" onMouseOver="hilite(35252)" onMouseOut="lolite()" onClick="logVariable('actionname')" href="../_variables/actionname.html">$actionname</a> = 'groupsseparate';
<a name="l2287"><span class="linenum">2287</span></a>                  <a class="var it35253" onMouseOver="hilite(35253)" onMouseOut="lolite()" onClick="logVariable('groupimage')" href="../_variables/groupimage.html">$groupimage</a> = 'i/groups';
<a name="l2288"><span class="linenum">2288</span></a>              } else if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('effectivegroupmode')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/effectivegroupmode.html">effectivegroupmode</a> == <a class="constant" onClick="logConstant('VISIBLEGROUPS')" href="../_constants/VISIBLEGROUPS.html" onMouseOver="constPopup(event,'VISIBLEGROUPS')">VISIBLEGROUPS</a>) {
<a name="l2289"><span class="linenum">2289</span></a>                  <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('nextgroupmode')" href="../_variables/nextgroupmode.html">$nextgroupmode</a> = <a class="constant" onClick="logConstant('NOGROUPS')" href="../_constants/NOGROUPS.html" onMouseOver="constPopup(event,'NOGROUPS')">NOGROUPS</a>;
<a name="l2290"><span class="linenum">2290</span></a>                  <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a> = <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('groupsvisible')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/groupsvisible.html">groupsvisible</a>;
<a name="l2291"><span class="linenum">2291</span></a>                  <a class="var it35252" onMouseOver="hilite(35252)" onMouseOut="lolite()" onClick="logVariable('actionname')" href="../_variables/actionname.html">$actionname</a> = 'groupsvisible';
<a name="l2292"><span class="linenum">2292</span></a>                  <a class="var it35253" onMouseOver="hilite(35253)" onMouseOut="lolite()" onClick="logVariable('groupimage')" href="../_variables/groupimage.html">$groupimage</a> = 'i/groupv';
<a name="l2293"><span class="linenum">2293</span></a>              } else {
<a name="l2294"><span class="linenum">2294</span></a>                  <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('nextgroupmode')" href="../_variables/nextgroupmode.html">$nextgroupmode</a> = <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>;
<a name="l2295"><span class="linenum">2295</span></a>                  <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a> = <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('groupsnone')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/groupsnone.html">groupsnone</a>;
<a name="l2296"><span class="linenum">2296</span></a>                  <a class="var it35252" onMouseOver="hilite(35252)" onMouseOut="lolite()" onClick="logVariable('actionname')" href="../_variables/actionname.html">$actionname</a> = 'groupsnone';
<a name="l2297"><span class="linenum">2297</span></a>                  <a class="var it35253" onMouseOver="hilite(35253)" onMouseOut="lolite()" onClick="logVariable('groupimage')" href="../_variables/groupimage.html">$groupimage</a> = 'i/groupn';
<a name="l2298"><span class="linenum">2298</span></a>              }
<a name="l2299"><span class="linenum">2299</span></a>  
<a name="l2300"><span class="linenum">2300</span></a>              <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>[<a class="var it35252" onMouseOver="hilite(35252)" onMouseOut="lolite()" onClick="logVariable('actionname')" href="../_variables/actionname.html">$actionname</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_primary')" href="../_classes/action_menu_link_primary.html" onMouseOver="classPopup(event,'action_menu_link_primary')">action_menu_link_primary</a>(
<a name="l2301"><span class="linenum">2301</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('id' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'groupmode' =&gt; <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('nextgroupmode')" href="../_variables/nextgroupmode.html">$nextgroupmode</a>)),
<a name="l2302"><span class="linenum">2302</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>(<a class="var it35253" onMouseOver="hilite(35253)" onMouseOut="lolite()" onClick="logVariable('groupimage')" href="../_variables/groupimage.html">$groupimage</a>, null, 'moodle', array('class' =&gt; 'iconsmall')),
<a name="l2303"><span class="linenum">2303</span></a>                  <a class="var it23746" onMouseOver="hilite(23746)" onMouseOut="lolite()" onClick="logVariable('grouptitle')" href="../_variables/grouptitle.html">$grouptitle</a>,
<a name="l2304"><span class="linenum">2304</span></a>                  array('class' =&gt; 'editing_'. <a class="var it35252" onMouseOver="hilite(35252)" onMouseOut="lolite()" onClick="logVariable('actionname')" href="../_variables/actionname.html">$actionname</a>, 'data-action' =&gt; <a class="var it35252" onMouseOver="hilite(35252)" onMouseOut="lolite()" onClick="logVariable('actionname')" href="../_variables/actionname.html">$actionname</a>, 'data-nextgroupmode' =&gt; <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('nextgroupmode')" href="../_variables/nextgroupmode.html">$nextgroupmode</a>, 'aria-live' =&gt; 'assertive')
<a name="l2305"><span class="linenum">2305</span></a>              );
<a name="l2306"><span class="linenum">2306</span></a>          } else {
<a name="l2307"><span class="linenum">2307</span></a>              <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['nogroupsupport'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_filler')" href="../_classes/action_menu_filler.html" onMouseOver="classPopup(event,'action_menu_filler')">action_menu_filler</a>();
<a name="l2308"><span class="linenum">2308</span></a>          }
<a name="l2309"><span class="linenum">2309</span></a>      }
<a name="l2310"><span class="linenum">2310</span></a>  
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment">    // Assign.</span>
<a name="l2312"><span class="linenum">2312</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:assign', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>)){
<a name="l2313"><span class="linenum">2313</span></a>          <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['assign'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2314"><span class="linenum">2314</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/assign.php.html">/admin/roles/assign.php</a>', array('contextid' =&gt; <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2315"><span class="linenum">2315</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/assignroles', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('assign')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/assign.html">assign</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2316"><span class="linenum">2316</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('assign')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/assign.html">assign</a>,
<a name="l2317"><span class="linenum">2317</span></a>              array('class' =&gt; 'editing_assign', 'data-action' =&gt; 'assignroles')
<a name="l2318"><span class="linenum">2318</span></a>          );
<a name="l2319"><span class="linenum">2319</span></a>      }
<a name="l2320"><span class="linenum">2320</span></a>  
<a name="l2321"><span class="linenum">2321</span></a>  <span class="comment">    // Delete.</span>
<a name="l2322"><span class="linenum">2322</span></a>      if (<a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a>) {
<a name="l2323"><span class="linenum">2323</span></a>          <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>['delete'] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l2324"><span class="linenum">2324</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('delete' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2325"><span class="linenum">2325</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/delete', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('delete')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/delete.html">delete</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2326"><span class="linenum">2326</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('delete')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/delete.html">delete</a>,
<a name="l2327"><span class="linenum">2327</span></a>              array('class' =&gt; 'editing_delete', 'data-action' =&gt; 'delete')
<a name="l2328"><span class="linenum">2328</span></a>          );
<a name="l2329"><span class="linenum">2329</span></a>      }
<a name="l2330"><span class="linenum">2330</span></a>  
<a name="l2331"><span class="linenum">2331</span></a>      return <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('actions')" href="../_variables/actions.html">$actions</a>;
<a name="l2332"><span class="linenum">2332</span></a>  }
<a name="l2333"><span class="linenum">2333</span></a>  
<a name="l2334"><span class="linenum">2334</span></a>  <span class="comment">/**</span>
<a name="l2335"><span class="linenum">2335</span></a>  <span class="comment"> * Returns the move action.</span>
<a name="l2336"><span class="linenum">2336</span></a>  <span class="comment"> *</span>
<a name="l2337"><span class="linenum">2337</span></a>  <span class="comment"> * @param cm_info $mod The module to produce a move button for</span>
<a name="l2338"><span class="linenum">2338</span></a>  <span class="comment"> * @param int $sr The section to link back to (used for creating the links)</span>
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment"> * @return The markup for the move action, or an empty string if not available.</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment"> */</span>
<a name="l2341"><span class="linenum">2341</span></a>  function <a class="function" onClick="logFunction('course_get_cm_move')" href="../_functions/course_get_cm_move.html" onMouseOver="funcPopup(event,'course_get_cm_move')">course_get_cm_move</a>(cm_info <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a> = null) {
<a name="l2342"><span class="linenum">2342</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2343"><span class="linenum">2343</span></a>  
<a name="l2344"><span class="linenum">2344</span></a>      static <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>;
<a name="l2345"><span class="linenum">2345</span></a>      static <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>;
<a name="l2346"><span class="linenum">2346</span></a>  
<a name="l2347"><span class="linenum">2347</span></a>      <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2348"><span class="linenum">2348</span></a>      <a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:manageactivities', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>);
<a name="l2349"><span class="linenum">2349</span></a>  
<a name="l2350"><span class="linenum">2350</span></a>      if (!isset(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>)) {
<a name="l2351"><span class="linenum">2351</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('get_strings')" href="../_functions/get_strings.html" onMouseOver="funcPopup(event,'get_strings')">get_strings</a>(array('move'));
<a name="l2352"><span class="linenum">2352</span></a>      }
<a name="l2353"><span class="linenum">2353</span></a>  
<a name="l2354"><span class="linenum">2354</span></a>      if (!isset(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>)) {
<a name="l2355"><span class="linenum">2355</span></a>          <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/mod.php.html">/course/mod.php</a>', array('sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l2356"><span class="linenum">2356</span></a>  
<a name="l2357"><span class="linenum">2357</span></a>          if (<a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a> !== null) {
<a name="l2358"><span class="linenum">2358</span></a>              <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('sr', <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a>);
<a name="l2359"><span class="linenum">2359</span></a>          }
<a name="l2360"><span class="linenum">2360</span></a>      }
<a name="l2361"><span class="linenum">2361</span></a>  
<a name="l2362"><span class="linenum">2362</span></a>      if (<a class="var it2715" onMouseOver="hilite(2715)" onMouseOut="lolite()" onClick="logVariable('hasmanageactivities')" href="../_variables/hasmanageactivities.html">$hasmanageactivities</a>) {
<a name="l2363"><span class="linenum">2363</span></a>          <a class="var it3705" onMouseOver="hilite(3705)" onMouseOut="lolite()" onClick="logVariable('pixicon')" href="../_variables/pixicon.html">$pixicon</a> = 'i/dragdrop';
<a name="l2364"><span class="linenum">2364</span></a>  
<a name="l2365"><span class="linenum">2365</span></a>          if (!<a class="function" onClick="logFunction('course_ajax_enabled')" href="../_functions/course_ajax_enabled.html" onMouseOver="funcPopup(event,'course_ajax_enabled')">course_ajax_enabled</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>())) {
<a name="l2366"><span class="linenum">2366</span></a>  <span class="comment">            // Override for course frontpage until we get drag/drop working there.</span>
<a name="l2367"><span class="linenum">2367</span></a>              <a class="var it3705" onMouseOver="hilite(3705)" onMouseOut="lolite()" onClick="logVariable('pixicon')" href="../_variables/pixicon.html">$pixicon</a> = 't/move';
<a name="l2368"><span class="linenum">2368</span></a>          }
<a name="l2369"><span class="linenum">2369</span></a>  
<a name="l2370"><span class="linenum">2370</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(
<a name="l2371"><span class="linenum">2371</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, array('copy' =&gt; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)),
<a name="l2372"><span class="linenum">2372</span></a>              <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>(<a class="var it3705" onMouseOver="hilite(3705)" onMouseOut="lolite()" onClick="logVariable('pixicon')" href="../_variables/pixicon.html">$pixicon</a>, <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>-&gt;<a onClick="logVariable('move')" class="var it43856" onMouseOver="hilite(43856)" onMouseOut="lolite()" href="../_variables/move.html">move</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l2373"><span class="linenum">2373</span></a>              array('class' =&gt; 'editing_move', 'data-action' =&gt; 'move')
<a name="l2374"><span class="linenum">2374</span></a>          );
<a name="l2375"><span class="linenum">2375</span></a>      }
<a name="l2376"><span class="linenum">2376</span></a>      return '';
<a name="l2377"><span class="linenum">2377</span></a>  }
<a name="l2378"><span class="linenum">2378</span></a>  
<a name="l2379"><span class="linenum">2379</span></a>  <span class="comment">/**</span>
<a name="l2380"><span class="linenum">2380</span></a>  <span class="comment"> * given a course object with shortname &amp; fullname, this function will</span>
<a name="l2381"><span class="linenum">2381</span></a>  <span class="comment"> * truncate the the number of chars allowed and add ... if it was too long</span>
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment"> */</span>
<a name="l2383"><span class="linenum">2383</span></a>  function <a class="function" onClick="logFunction('course_format_name')" href="../_functions/course_format_name.html" onMouseOver="funcPopup(event,'course_format_name')">course_format_name</a> (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>,<a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('max')" href="../_variables/max.html">$max</a>=100) {
<a name="l2384"><span class="linenum">2384</span></a>  
<a name="l2385"><span class="linenum">2385</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2386"><span class="linenum">2386</span></a>      <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>, true, array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>));
<a name="l2387"><span class="linenum">2387</span></a>      <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, true, array('context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l2388"><span class="linenum">2388</span></a>      <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>.': '. <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>;
<a name="l2389"><span class="linenum">2389</span></a>      if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>) &lt;= <a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('max')" href="../_variables/max.html">$max</a>) {
<a name="l2390"><span class="linenum">2390</span></a>          return <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>;
<a name="l2391"><span class="linenum">2391</span></a>      }
<a name="l2392"><span class="linenum">2392</span></a>      else {
<a name="l2393"><span class="linenum">2393</span></a>          return <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,0,<a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('max')" href="../_variables/max.html">$max</a>-3).'...';
<a name="l2394"><span class="linenum">2394</span></a>      }
<a name="l2395"><span class="linenum">2395</span></a>  }
<a name="l2396"><span class="linenum">2396</span></a>  
<a name="l2397"><span class="linenum">2397</span></a>  <span class="comment">/**</span>
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment"> * Is the user allowed to add this type of module to this course?</span>
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment"> * @param object $course the course settings. Only $course-&gt;id is used.</span>
<a name="l2400"><span class="linenum">2400</span></a>  <span class="comment"> * @param string $modname the module name. E.g. 'forum' or 'quiz'.</span>
<a name="l2401"><span class="linenum">2401</span></a>  <span class="comment"> * @return bool whether the current user is allowed to add this type of module to this course.</span>
<a name="l2402"><span class="linenum">2402</span></a>  <span class="comment"> */</span>
<a name="l2403"><span class="linenum">2403</span></a>  function <a class="function" onClick="logFunction('course_allowed_module')" href="../_functions/course_allowed_module.html" onMouseOver="funcPopup(event,'course_allowed_module')">course_allowed_module</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l2404"><span class="linenum">2404</span></a>      if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>)) {
<a name="l2405"><span class="linenum">2405</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Function course_allowed_module no longer
<a name="l2406"><span class="linenum">2406</span></a>                  supports numeric module ids. Please update your code to pass the module name.');
<a name="l2407"><span class="linenum">2407</span></a>      }
<a name="l2408"><span class="linenum">2408</span></a>  
<a name="l2409"><span class="linenum">2409</span></a>      <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> = 'mod/' . <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> . ':addinstance';
<a name="l2410"><span class="linenum">2410</span></a>      if (!<a class="function" onClick="logFunction('get_capability_info')" href="../_functions/get_capability_info.html" onMouseOver="funcPopup(event,'get_capability_info')">get_capability_info</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>)) {
<a name="l2411"><span class="linenum">2411</span></a>  <span class="comment">        // Debug warning that the capability does not exist, but no more than once per page.</span>
<a name="l2412"><span class="linenum">2412</span></a>          static <a class="var it28664" onMouseOver="hilite(28664)" onMouseOut="lolite()" onClick="logVariable('warned')" href="../_variables/warned.html">$warned</a> = array();
<a name="l2413"><span class="linenum">2413</span></a>          <a class="var it10538" onMouseOver="hilite(10538)" onMouseOut="lolite()" onClick="logVariable('archetype')" href="../_variables/archetype.html">$archetype</a> = <a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="constant" onClick="logConstant('FEATURE_MOD_ARCHETYPE')" href="../_constants/FEATURE_MOD_ARCHETYPE.html" onMouseOver="constPopup(event,'FEATURE_MOD_ARCHETYPE')">FEATURE_MOD_ARCHETYPE</a>, <a class="constant" onClick="logConstant('MOD_ARCHETYPE_OTHER')" href="../_constants/MOD_ARCHETYPE_OTHER.html" onMouseOver="constPopup(event,'MOD_ARCHETYPE_OTHER')">MOD_ARCHETYPE_OTHER</a>);
<a name="l2414"><span class="linenum">2414</span></a>          if (!isset(<a class="var it28664" onMouseOver="hilite(28664)" onMouseOut="lolite()" onClick="logVariable('warned')" href="../_variables/warned.html">$warned</a>[<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>]) &amp;&amp; <a class="var it10538" onMouseOver="hilite(10538)" onMouseOut="lolite()" onClick="logVariable('archetype')" href="../_variables/archetype.html">$archetype</a> !== <a class="constant" onClick="logConstant('MOD_ARCHETYPE_SYSTEM')" href="../_constants/MOD_ARCHETYPE_SYSTEM.html" onMouseOver="constPopup(event,'MOD_ARCHETYPE_SYSTEM')">MOD_ARCHETYPE_SYSTEM</a>) {
<a name="l2415"><span class="linenum">2415</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The module ' . <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a> . ' does not define the standard capability ' .
<a name="l2416"><span class="linenum">2416</span></a>                      <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> , <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l2417"><span class="linenum">2417</span></a>              <a class="var it28664" onMouseOver="hilite(28664)" onMouseOut="lolite()" onClick="logVariable('warned')" href="../_variables/warned.html">$warned</a>[<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>] = 1;
<a name="l2418"><span class="linenum">2418</span></a>          }
<a name="l2419"><span class="linenum">2419</span></a>  
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment">        // If the capability does not exist, the module can always be added.</span>
<a name="l2421"><span class="linenum">2421</span></a>          return true;
<a name="l2422"><span class="linenum">2422</span></a>      }
<a name="l2423"><span class="linenum">2423</span></a>  
<a name="l2424"><span class="linenum">2424</span></a>      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2425"><span class="linenum">2425</span></a>      return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>, <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l2426"><span class="linenum">2426</span></a>  }
<a name="l2427"><span class="linenum">2427</span></a>  
<a name="l2428"><span class="linenum">2428</span></a>  <span class="comment">/**</span>
<a name="l2429"><span class="linenum">2429</span></a>  <span class="comment"> * Efficiently moves many courses around while maintaining</span>
<a name="l2430"><span class="linenum">2430</span></a>  <span class="comment"> * sortorder in order.</span>
<a name="l2431"><span class="linenum">2431</span></a>  <span class="comment"> *</span>
<a name="l2432"><span class="linenum">2432</span></a>  <span class="comment"> * @param array $courseids is an array of course ids</span>
<a name="l2433"><span class="linenum">2433</span></a>  <span class="comment"> * @param int $categoryid</span>
<a name="l2434"><span class="linenum">2434</span></a>  <span class="comment"> * @return bool success</span>
<a name="l2435"><span class="linenum">2435</span></a>  <span class="comment"> */</span>
<a name="l2436"><span class="linenum">2436</span></a>  function <a class="function" onClick="logFunction('move_courses')" href="../_functions/move_courses.html" onMouseOver="funcPopup(event,'move_courses')">move_courses</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>, <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l2437"><span class="linenum">2437</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2438"><span class="linenum">2438</span></a>  
<a name="l2439"><span class="linenum">2439</span></a>      if (empty(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>)) {
<a name="l2440"><span class="linenum">2440</span></a>  <span class="comment">        // Nothing to do.</span>
<a name="l2441"><span class="linenum">2441</span></a>          return false;
<a name="l2442"><span class="linenum">2442</span></a>      }
<a name="l2443"><span class="linenum">2443</span></a>  
<a name="l2444"><span class="linenum">2444</span></a>      if (!<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>))) {
<a name="l2445"><span class="linenum">2445</span></a>          return false;
<a name="l2446"><span class="linenum">2446</span></a>      }
<a name="l2447"><span class="linenum">2447</span></a>  
<a name="l2448"><span class="linenum">2448</span></a>      <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>);
<a name="l2449"><span class="linenum">2449</span></a>      <a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2450"><span class="linenum">2450</span></a>      <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1;
<a name="l2451"><span class="linenum">2451</span></a>  
<a name="l2452"><span class="linenum">2452</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>);
<a name="l2453"><span class="linenum">2453</span></a>      <a class="var it15774" onMouseOver="hilite(15774)" onMouseOut="lolite()" onClick="logVariable('dbcourses')" href="../_variables/dbcourses.html">$dbcourses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('course', 'id ' . <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, '', 'id, category, shortname, fullname');
<a name="l2454"><span class="linenum">2454</span></a>      foreach (<a class="var it15774" onMouseOver="hilite(15774)" onMouseOut="lolite()" onClick="logVariable('dbcourses')" href="../_variables/dbcourses.html">$dbcourses</a> as <a class="var it8357" onMouseOver="hilite(8357)" onMouseOut="lolite()" onClick="logVariable('dbcourse')" href="../_variables/dbcourse.html">$dbcourse</a>) {
<a name="l2455"><span class="linenum">2455</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = new stdClass();
<a name="l2456"><span class="linenum">2456</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it8357" onMouseOver="hilite(8357)" onMouseOut="lolite()" onClick="logVariable('dbcourse')" href="../_variables/dbcourse.html">$dbcourse</a>-&gt;<a onClick="logVariable('id')" class="var it43943" onMouseOver="hilite(43943)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2457"><span class="linenum">2457</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/category.html">category</a>  = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2458"><span class="linenum">2458</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> + <a class="constant" onClick="logConstant('MAX_COURSES_IN_CATEGORY')" href="../_constants/MAX_COURSES_IN_CATEGORY.html" onMouseOver="constPopup(event,'MAX_COURSES_IN_CATEGORY')">MAX_COURSES_IN_CATEGORY</a> - <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l2459"><span class="linenum">2459</span></a>          if (<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('visible')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> == 0) {
<a name="l2460"><span class="linenum">2460</span></a>  <span class="comment">            // Hide the course when moving into hidden category, do not update the visibleold flag - we want to get</span>
<a name="l2461"><span class="linenum">2461</span></a>  <span class="comment">            // to previous state if somebody unhides the category.</span>
<a name="l2462"><span class="linenum">2462</span></a>              <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 0;
<a name="l2463"><span class="linenum">2463</span></a>          }
<a name="l2464"><span class="linenum">2464</span></a>  
<a name="l2465"><span class="linenum">2465</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2466"><span class="linenum">2466</span></a>  
<a name="l2467"><span class="linenum">2467</span></a>  <span class="comment">        // Update context, so it can be passed to event.</span>
<a name="l2468"><span class="linenum">2468</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2469"><span class="linenum">2469</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('update_moved')" href="../_functions/update_moved.html" onMouseOver="funcPopup(event,'update_moved')">update_moved</a>(<a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a>);
<a name="l2470"><span class="linenum">2470</span></a>  
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment">        // Trigger a course updated event.</span>
<a name="l2472"><span class="linenum">2472</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_updated')" href="../_classes/course_updated.html" onMouseOver="classPopup(event,'course_updated')">course_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2473"><span class="linenum">2473</span></a>              'objectid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2474"><span class="linenum">2474</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>),
<a name="l2475"><span class="linenum">2475</span></a>              'other' =&gt; array('shortname' =&gt; <a class="var it8357" onMouseOver="hilite(8357)" onMouseOut="lolite()" onClick="logVariable('dbcourse')" href="../_variables/dbcourse.html">$dbcourse</a>-&gt;<a onClick="logVariable('shortname')" class="var it43943" onMouseOver="hilite(43943)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>,
<a name="l2476"><span class="linenum">2476</span></a>                               'fullname' =&gt; <a class="var it8357" onMouseOver="hilite(8357)" onMouseOut="lolite()" onClick="logVariable('dbcourse')" href="../_variables/dbcourse.html">$dbcourse</a>-&gt;<a onClick="logVariable('fullname')" class="var it43943" onMouseOver="hilite(43943)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>)
<a name="l2477"><span class="linenum">2477</span></a>          ));
<a name="l2478"><span class="linenum">2478</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course', 'move', 'edit.php?id=' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2479"><span class="linenum">2479</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2480"><span class="linenum">2480</span></a>      }
<a name="l2481"><span class="linenum">2481</span></a>      <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2482"><span class="linenum">2482</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l2483"><span class="linenum">2483</span></a>  
<a name="l2484"><span class="linenum">2484</span></a>      return true;
<a name="l2485"><span class="linenum">2485</span></a>  }
<a name="l2486"><span class="linenum">2486</span></a>  
<a name="l2487"><span class="linenum">2487</span></a>  <span class="comment">/**</span>
<a name="l2488"><span class="linenum">2488</span></a>  <span class="comment"> * Returns the display name of the given section that the course prefers</span>
<a name="l2489"><span class="linenum">2489</span></a>  <span class="comment"> *</span>
<a name="l2490"><span class="linenum">2490</span></a>  <span class="comment"> * Implementation of this function is provided by course format</span>
<a name="l2491"><span class="linenum">2491</span></a>  <span class="comment"> * @see format_base::get_section_name()</span>
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment"> *</span>
<a name="l2493"><span class="linenum">2493</span></a>  <span class="comment"> * @param int|stdClass $courseorid The course to get the section name for (object or just course id)</span>
<a name="l2494"><span class="linenum">2494</span></a>  <span class="comment"> * @param int|stdClass $section Section object from database or just field course_sections.section</span>
<a name="l2495"><span class="linenum">2495</span></a>  <span class="comment"> * @return string Display name that the course format prefers, e.g. &quot;Week 2&quot;</span>
<a name="l2496"><span class="linenum">2496</span></a>  <span class="comment"> */</span>
<a name="l2497"><span class="linenum">2497</span></a>  function <a class="function" onClick="logFunction('get_section_name')" href="../_functions/get_section_name.html" onMouseOver="funcPopup(event,'get_section_name')">get_section_name</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l2498"><span class="linenum">2498</span></a>      return <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)-&gt;<a class="function" onClick="logFunction('get_section_name')" href="../_functions/get_section_name.html" onMouseOver="funcPopup(event,'get_section_name')">get_section_name</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l2499"><span class="linenum">2499</span></a>  }
<a name="l2500"><span class="linenum">2500</span></a>  
<a name="l2501"><span class="linenum">2501</span></a>  <span class="comment">/**</span>
<a name="l2502"><span class="linenum">2502</span></a>  <span class="comment"> * Tells if current course format uses sections</span>
<a name="l2503"><span class="linenum">2503</span></a>  <span class="comment"> *</span>
<a name="l2504"><span class="linenum">2504</span></a>  <span class="comment"> * @param string $format Course format ID e.g. 'weeks' $course-&gt;format</span>
<a name="l2505"><span class="linenum">2505</span></a>  <span class="comment"> * @return bool</span>
<a name="l2506"><span class="linenum">2506</span></a>  <span class="comment"> */</span>
<a name="l2507"><span class="linenum">2507</span></a>  function <a class="function" onClick="logFunction('course_format_uses_sections')" href="../_functions/course_format_uses_sections.html" onMouseOver="funcPopup(event,'course_format_uses_sections')">course_format_uses_sections</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l2508"><span class="linenum">2508</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = new stdClass();
<a name="l2509"><span class="linenum">2509</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l2510"><span class="linenum">2510</span></a>      return <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('uses_sections')" href="../_functions/uses_sections.html" onMouseOver="funcPopup(event,'uses_sections')">uses_sections</a>();
<a name="l2511"><span class="linenum">2511</span></a>  }
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment">/**</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment"> * Returns the information about the ajax support in the given source format</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment"> *</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment"> * The returned object's property (boolean)capable indicates that</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment"> * the course format supports Moodle course ajax features.</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment"> *</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment"> * @param string $format</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment"> * @return stdClass</span>
<a name="l2521"><span class="linenum">2521</span></a>  <span class="comment"> */</span>
<a name="l2522"><span class="linenum">2522</span></a>  function <a class="function" onClick="logFunction('course_format_ajax_support')" href="../_functions/course_format_ajax_support.html" onMouseOver="funcPopup(event,'course_format_ajax_support')">course_format_ajax_support</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l2523"><span class="linenum">2523</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = new stdClass();
<a name="l2524"><span class="linenum">2524</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l2525"><span class="linenum">2525</span></a>      return <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('supports_ajax')" href="../_functions/supports_ajax.html" onMouseOver="funcPopup(event,'supports_ajax')">supports_ajax</a>();
<a name="l2526"><span class="linenum">2526</span></a>  }
<a name="l2527"><span class="linenum">2527</span></a>  
<a name="l2528"><span class="linenum">2528</span></a>  <span class="comment">/**</span>
<a name="l2529"><span class="linenum">2529</span></a>  <span class="comment"> * Can the current user delete this course?</span>
<a name="l2530"><span class="linenum">2530</span></a>  <span class="comment"> * Course creators have exception,</span>
<a name="l2531"><span class="linenum">2531</span></a>  <span class="comment"> * 1 day after the creation they can sill delete the course.</span>
<a name="l2532"><span class="linenum">2532</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2533"><span class="linenum">2533</span></a>  <span class="comment"> * @return boolean</span>
<a name="l2534"><span class="linenum">2534</span></a>  <span class="comment"> */</span>
<a name="l2535"><span class="linenum">2535</span></a>  function <a class="function" onClick="logFunction('can_delete_course')" href="../_functions/can_delete_course.html" onMouseOver="funcPopup(event,'can_delete_course')">can_delete_course</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l2536"><span class="linenum">2536</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2537"><span class="linenum">2537</span></a>  
<a name="l2538"><span class="linenum">2538</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l2539"><span class="linenum">2539</span></a>  
<a name="l2540"><span class="linenum">2540</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:delete', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2541"><span class="linenum">2541</span></a>          return true;
<a name="l2542"><span class="linenum">2542</span></a>      }
<a name="l2543"><span class="linenum">2543</span></a>  
<a name="l2544"><span class="linenum">2544</span></a>  <span class="comment">    // hack: now try to find out if creator created this course recently (1 day)</span>
<a name="l2545"><span class="linenum">2545</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:create', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2546"><span class="linenum">2546</span></a>          return false;
<a name="l2547"><span class="linenum">2547</span></a>      }
<a name="l2548"><span class="linenum">2548</span></a>  
<a name="l2549"><span class="linenum">2549</span></a>      <a class="var it9468" onMouseOver="hilite(9468)" onMouseOut="lolite()" onClick="logVariable('since')" href="../_variables/since.html">$since</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - 60*60*24;
<a name="l2550"><span class="linenum">2550</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l2551"><span class="linenum">2551</span></a>  
<a name="l2552"><span class="linenum">2552</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a> &lt; <a class="var it9468" onMouseOver="hilite(9468)" onMouseOut="lolite()" onClick="logVariable('since')" href="../_variables/since.html">$since</a>) {
<a name="l2553"><span class="linenum">2553</span></a>          return false; <span class="comment">// Return if the course was not created in last 24 hours.</span>
<a name="l2554"><span class="linenum">2554</span></a>      }
<a name="l2555"><span class="linenum">2555</span></a>  
<a name="l2556"><span class="linenum">2556</span></a>      <a class="var it35254" onMouseOver="hilite(35254)" onMouseOut="lolite()" onClick="logVariable('logmanger')" href="../_variables/logmanger.html">$logmanger</a> = <a class="function" onClick="logFunction('get_log_manager')" href="../_functions/get_log_manager.html" onMouseOver="funcPopup(event,'get_log_manager')">get_log_manager</a>();
<a name="l2557"><span class="linenum">2557</span></a>      <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('readers')" href="../_variables/readers.html">$readers</a> = <a class="var it35254" onMouseOver="hilite(35254)" onMouseOut="lolite()" onClick="logVariable('logmanger')" href="../_variables/logmanger.html">$logmanger</a>-&gt;<a class="function" onClick="logFunction('get_readers')" href="../_functions/get_readers.html" onMouseOver="funcPopup(event,'get_readers')">get_readers</a>('\core\log\sql_reader');
<a name="l2558"><span class="linenum">2558</span></a>      <a class="var it3557" onMouseOver="hilite(3557)" onMouseOut="lolite()" onClick="logVariable('reader')" href="../_variables/reader.html">$reader</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('readers')" href="../_variables/readers.html">$readers</a>);
<a name="l2559"><span class="linenum">2559</span></a>  
<a name="l2560"><span class="linenum">2560</span></a>      if (empty(<a class="var it3557" onMouseOver="hilite(3557)" onMouseOut="lolite()" onClick="logVariable('reader')" href="../_variables/reader.html">$reader</a>)) {
<a name="l2561"><span class="linenum">2561</span></a>          return false; <span class="comment">// No log reader found.</span>
<a name="l2562"><span class="linenum">2562</span></a>      }
<a name="l2563"><span class="linenum">2563</span></a>  
<a name="l2564"><span class="linenum">2564</span></a>  <span class="comment">    // A proper reader.</span>
<a name="l2565"><span class="linenum">2565</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = &quot;userid = :userid AND courseid = :courseid AND eventname = :eventname AND timecreated &gt; :since&quot;;
<a name="l2566"><span class="linenum">2566</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('userid' =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'since' =&gt; <a class="var it9468" onMouseOver="hilite(9468)" onMouseOut="lolite()" onClick="logVariable('since')" href="../_variables/since.html">$since</a>, 'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'eventname' =&gt; '\core\event\course_created');
<a name="l2567"><span class="linenum">2567</span></a>  
<a name="l2568"><span class="linenum">2568</span></a>      return (bool)<a class="var it3557" onMouseOver="hilite(3557)" onMouseOut="lolite()" onClick="logVariable('reader')" href="../_variables/reader.html">$reader</a>-&gt;<a class="function" onClick="logFunction('get_events_select_count')" href="../_functions/get_events_select_count.html" onMouseOver="funcPopup(event,'get_events_select_count')">get_events_select_count</a>(<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l2569"><span class="linenum">2569</span></a>  }
<a name="l2570"><span class="linenum">2570</span></a>  
<a name="l2571"><span class="linenum">2571</span></a>  <span class="comment">/**</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment"> * Save the Your name for 'Some role' strings.</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment"> *</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment"> * @param integer $courseid the id of this course.</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment"> * @param array $data the data that came from the course settings form.</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment"> */</span>
<a name="l2577"><span class="linenum">2577</span></a>  function <a class="function" onClick="logFunction('save_local_role_names')" href="../_functions/save_local_role_names.html" onMouseOver="funcPopup(event,'save_local_role_names')">save_local_role_names</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l2578"><span class="linenum">2578</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2579"><span class="linenum">2579</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l2580"><span class="linenum">2580</span></a>  
<a name="l2581"><span class="linenum">2581</span></a>      foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it2227" onMouseOver="hilite(2227)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../_variables/fieldname.html">$fieldname</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2582"><span class="linenum">2582</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it2227" onMouseOver="hilite(2227)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../_variables/fieldname.html">$fieldname</a>, 'role_') !== 0) {
<a name="l2583"><span class="linenum">2583</span></a>              continue;
<a name="l2584"><span class="linenum">2584</span></a>          }
<a name="l2585"><span class="linenum">2585</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2583" onMouseOver="hilite(2583)" onMouseOut="lolite()" onClick="logVariable('ignored')" href="../_variables/ignored.html">$ignored</a>, <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it2227" onMouseOver="hilite(2227)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../_variables/fieldname.html">$fieldname</a>);
<a name="l2586"><span class="linenum">2586</span></a>  
<a name="l2587"><span class="linenum">2587</span></a>  <span class="comment">        // make up our mind whether we want to delete, update or insert</span>
<a name="l2588"><span class="linenum">2588</span></a>          if (!<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2589"><span class="linenum">2589</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('role_names', array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'roleid' =&gt; <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>));
<a name="l2590"><span class="linenum">2590</span></a>  
<a name="l2591"><span class="linenum">2591</span></a>          } else if (<a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('role_names', array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'roleid' =&gt; <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>))) {
<a name="l2592"><span class="linenum">2592</span></a>              <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a>-&gt;<a onClick="logVariable('name')" class="var it44397" onMouseOver="hilite(44397)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l2593"><span class="linenum">2593</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('role_names', <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a>);
<a name="l2594"><span class="linenum">2594</span></a>  
<a name="l2595"><span class="linenum">2595</span></a>          } else {
<a name="l2596"><span class="linenum">2596</span></a>              <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a> = new stdClass;
<a name="l2597"><span class="linenum">2597</span></a>              <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a>-&gt;<a onClick="logVariable('contextid')" class="var it44397" onMouseOver="hilite(44397)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2598"><span class="linenum">2598</span></a>              <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a>-&gt;<a onClick="logVariable('roleid')" class="var it44397" onMouseOver="hilite(44397)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a> = <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>;
<a name="l2599"><span class="linenum">2599</span></a>              <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a>-&gt;<a onClick="logVariable('name')" class="var it44397" onMouseOver="hilite(44397)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l2600"><span class="linenum">2600</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('role_names', <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rolename')" href="../_variables/rolename.html">$rolename</a>);
<a name="l2601"><span class="linenum">2601</span></a>          }
<a name="l2602"><span class="linenum">2602</span></a>  <span class="comment">        // This will ensure the course contacts cache is purged..</span>
<a name="l2603"><span class="linenum">2603</span></a>          <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('role_assignment_changed')" href="../_functions/role_assignment_changed.html" onMouseOver="funcPopup(event,'role_assignment_changed')">role_assignment_changed</a>(<a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l2604"><span class="linenum">2604</span></a>      }
<a name="l2605"><span class="linenum">2605</span></a>  }
<a name="l2606"><span class="linenum">2606</span></a>  
<a name="l2607"><span class="linenum">2607</span></a>  <span class="comment">/**</span>
<a name="l2608"><span class="linenum">2608</span></a>  <span class="comment"> * Returns options to use in course overviewfiles filemanager</span>
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment"> *</span>
<a name="l2610"><span class="linenum">2610</span></a>  <span class="comment"> * @param null|stdClass|course_in_list|int $course either object that has 'id' property or just the course id;</span>
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment"> *     may be empty if course does not exist yet (course create form)</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment"> * @return array|null array of options such as maxfiles, maxbytes, accepted_types, etc.</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment"> *     or null if overviewfiles are disabled</span>
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment"> */</span>
<a name="l2615"><span class="linenum">2615</span></a>  function <a class="function" onClick="logFunction('course_overviewfiles_options')" href="../_functions/course_overviewfiles_options.html" onMouseOver="funcPopup(event,'course_overviewfiles_options')">course_overviewfiles_options</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2616"><span class="linenum">2616</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2617"><span class="linenum">2617</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfileslimit')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfileslimit.html">courseoverviewfileslimit</a>)) {
<a name="l2618"><span class="linenum">2618</span></a>          return null;
<a name="l2619"><span class="linenum">2619</span></a>      }
<a name="l2620"><span class="linenum">2620</span></a>      <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/\s*,\s*/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfilesext')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfilesext.html">courseoverviewfilesext</a>), -1, PREG_SPLIT_NO_EMPTY);
<a name="l2621"><span class="linenum">2621</span></a>      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('*', <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>) || empty(<a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>)) {
<a name="l2622"><span class="linenum">2622</span></a>          <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a> = '*';
<a name="l2623"><span class="linenum">2623</span></a>      } else {
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment">        // Since config for $CFG-&gt;courseoverviewfilesext is a text box, human factor must be considered.</span>
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment">        // Make sure extensions are prefixed with dot unless they are valid typegroups</span>
<a name="l2626"><span class="linenum">2626</span></a>          foreach (<a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l2627"><span class="linenum">2627</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, 0, 1) !== '.') {
<a name="l2628"><span class="linenum">2628</span></a>                  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>. '/filelib.php');
<a name="l2629"><span class="linenum">2629</span></a>                  if (!<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('file_get_typegroup')" href="../_functions/file_get_typegroup.html" onMouseOver="funcPopup(event,'file_get_typegroup')">file_get_typegroup</a>('extension', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>))) {
<a name="l2630"><span class="linenum">2630</span></a>  <span class="comment">                    // It does not start with dot and is not a valid typegroup, this is most likely extension.</span>
<a name="l2631"><span class="linenum">2631</span></a>                      <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = '.'. <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l2632"><span class="linenum">2632</span></a>                      <a class="var it35255" onMouseOver="hilite(35255)" onMouseOut="lolite()" onClick="logVariable('corrected')" href="../_variables/corrected.html">$corrected</a> = true;
<a name="l2633"><span class="linenum">2633</span></a>                  }
<a name="l2634"><span class="linenum">2634</span></a>              }
<a name="l2635"><span class="linenum">2635</span></a>          }
<a name="l2636"><span class="linenum">2636</span></a>          if (!empty(<a class="var it35255" onMouseOver="hilite(35255)" onMouseOut="lolite()" onClick="logVariable('corrected')" href="../_variables/corrected.html">$corrected</a>)) {
<a name="l2637"><span class="linenum">2637</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('courseoverviewfilesext', <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>));
<a name="l2638"><span class="linenum">2638</span></a>          }
<a name="l2639"><span class="linenum">2639</span></a>      }
<a name="l2640"><span class="linenum">2640</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(
<a name="l2641"><span class="linenum">2641</span></a>          'maxfiles' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfileslimit')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfileslimit.html">courseoverviewfileslimit</a>,
<a name="l2642"><span class="linenum">2642</span></a>          'maxbytes' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maxbytes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/maxbytes.html">maxbytes</a>,
<a name="l2643"><span class="linenum">2643</span></a>          'subdirs' =&gt; 0,
<a name="l2644"><span class="linenum">2644</span></a>          'accepted_types' =&gt; <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>
<a name="l2645"><span class="linenum">2645</span></a>      );
<a name="l2646"><span class="linenum">2646</span></a>      if (!empty(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2647"><span class="linenum">2647</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'] = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2648"><span class="linenum">2648</span></a>      } else if (is_int(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) &amp;&amp; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> &gt; 0) {
<a name="l2649"><span class="linenum">2649</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'] = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2650"><span class="linenum">2650</span></a>      }
<a name="l2651"><span class="linenum">2651</span></a>      return <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l2652"><span class="linenum">2652</span></a>  }
<a name="l2653"><span class="linenum">2653</span></a>  
<a name="l2654"><span class="linenum">2654</span></a>  <span class="comment">/**</span>
<a name="l2655"><span class="linenum">2655</span></a>  <span class="comment"> * Create a course and either return a $course object</span>
<a name="l2656"><span class="linenum">2656</span></a>  <span class="comment"> *</span>
<a name="l2657"><span class="linenum">2657</span></a>  <span class="comment"> * Please note this functions does not verify any access control,</span>
<a name="l2658"><span class="linenum">2658</span></a>  <span class="comment"> * the calling code is responsible for all validation (usually it is the form definition).</span>
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment"> *</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment"> * @param array $editoroptions course description editor options</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment"> * @param object $data  - all the data needed for an entry in the 'course' table</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment"> * @return object new course instance</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment"> */</span>
<a name="l2664"><span class="linenum">2664</span></a>  function <a class="function" onClick="logFunction('create_course')" href="../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = NULL) {
<a name="l2665"><span class="linenum">2665</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2666"><span class="linenum">2666</span></a>  
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">    //check the categoryid - must be given for all new courses</span>
<a name="l2668"><span class="linenum">2668</span></a>      <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2669"><span class="linenum">2669</span></a>  
<a name="l2670"><span class="linenum">2670</span></a>  <span class="comment">    // Check if the shortname already exists.</span>
<a name="l2671"><span class="linenum">2671</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>)) {
<a name="l2672"><span class="linenum">2672</span></a>          if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course', array('shortname' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>))) {
<a name="l2673"><span class="linenum">2673</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('shortnametaken', '', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>);
<a name="l2674"><span class="linenum">2674</span></a>          }
<a name="l2675"><span class="linenum">2675</span></a>      }
<a name="l2676"><span class="linenum">2676</span></a>  
<a name="l2677"><span class="linenum">2677</span></a>  <span class="comment">    // Check if the idnumber already exists.</span>
<a name="l2678"><span class="linenum">2678</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l2679"><span class="linenum">2679</span></a>          if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course', array('idnumber' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>))) {
<a name="l2680"><span class="linenum">2680</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('courseidnumbertaken', '', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>);
<a name="l2681"><span class="linenum">2681</span></a>          }
<a name="l2682"><span class="linenum">2682</span></a>      }
<a name="l2683"><span class="linenum">2683</span></a>  
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">    // Check if timecreated is given.</span>
<a name="l2685"><span class="linenum">2685</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>  = !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>) ? <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a> : <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2686"><span class="linenum">2686</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>;
<a name="l2687"><span class="linenum">2687</span></a>  
<a name="l2688"><span class="linenum">2688</span></a>  <span class="comment">    // place at beginning of any category</span>
<a name="l2689"><span class="linenum">2689</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = 0;
<a name="l2690"><span class="linenum">2690</span></a>  
<a name="l2691"><span class="linenum">2691</span></a>      if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">        // summary text is updated later, we need context to store the files first</span>
<a name="l2693"><span class="linenum">2693</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a> = '';
<a name="l2694"><span class="linenum">2694</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary_format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary_format.html">summary_format</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l2695"><span class="linenum">2695</span></a>      }
<a name="l2696"><span class="linenum">2696</span></a>  
<a name="l2697"><span class="linenum">2697</span></a>      if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l2698"><span class="linenum">2698</span></a>  <span class="comment">        // data not from form, add missing visibility info</span>
<a name="l2699"><span class="linenum">2699</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('visible')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l2700"><span class="linenum">2700</span></a>      }
<a name="l2701"><span class="linenum">2701</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l2702"><span class="linenum">2702</span></a>  
<a name="l2703"><span class="linenum">2703</span></a>      <a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('course', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2704"><span class="linenum">2704</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2705"><span class="linenum">2705</span></a>  
<a name="l2706"><span class="linenum">2706</span></a>      if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l2707"><span class="linenum">2707</span></a>  <span class="comment">        // Save the files used in the summary editor and store</span>
<a name="l2708"><span class="linenum">2708</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'summary', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'course', 'summary', 0);
<a name="l2709"><span class="linenum">2709</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'summary', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>, array('id'=&gt;<a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a>));
<a name="l2710"><span class="linenum">2710</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'summaryformat', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary_format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary_format.html">summary_format</a>, array('id'=&gt;<a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a>));
<a name="l2711"><span class="linenum">2711</span></a>      }
<a name="l2712"><span class="linenum">2712</span></a>      if (<a class="var it3116" onMouseOver="hilite(3116)" onMouseOut="lolite()" onClick="logVariable('overviewfilesoptions')" href="../_variables/overviewfilesoptions.html">$overviewfilesoptions</a> = <a class="function" onClick="logFunction('course_overviewfiles_options')" href="../_functions/course_overviewfiles_options.html" onMouseOver="funcPopup(event,'course_overviewfiles_options')">course_overviewfiles_options</a>(<a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a>)) {
<a name="l2713"><span class="linenum">2713</span></a>  <span class="comment">        // Save the course overviewfiles</span>
<a name="l2714"><span class="linenum">2714</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_filemanager')" href="../_functions/file_postupdate_standard_filemanager.html" onMouseOver="funcPopup(event,'file_postupdate_standard_filemanager')">file_postupdate_standard_filemanager</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'overviewfiles', <a class="var it3116" onMouseOver="hilite(3116)" onMouseOut="lolite()" onClick="logVariable('overviewfilesoptions')" href="../_variables/overviewfilesoptions.html">$overviewfilesoptions</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'course', 'overviewfiles', 0);
<a name="l2715"><span class="linenum">2715</span></a>      }
<a name="l2716"><span class="linenum">2716</span></a>  
<a name="l2717"><span class="linenum">2717</span></a>  <span class="comment">    // update course format options</span>
<a name="l2718"><span class="linenum">2718</span></a>      <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a>)-&gt;<a class="function" onClick="logFunction('update_course_format_options')" href="../_functions/update_course_format_options.html" onMouseOver="funcPopup(event,'update_course_format_options')">update_course_format_options</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2719"><span class="linenum">2719</span></a>  
<a name="l2720"><span class="linenum">2720</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it24472" onMouseOver="hilite(24472)" onMouseOut="lolite()" onClick="logVariable('newcourseid')" href="../_variables/newcourseid.html">$newcourseid</a>)-&gt;<a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>();
<a name="l2721"><span class="linenum">2721</span></a>  
<a name="l2722"><span class="linenum">2722</span></a>      <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2723"><span class="linenum">2723</span></a>  <span class="comment">    // purge appropriate caches in case fix_course_sortorder() did not change anything</span>
<a name="l2724"><span class="linenum">2724</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l2725"><span class="linenum">2725</span></a>  
<a name="l2726"><span class="linenum">2726</span></a>  <span class="comment">    // new context created - better mark it as dirty</span>
<a name="l2727"><span class="linenum">2727</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('mark_dirty')" href="../_functions/mark_dirty.html" onMouseOver="funcPopup(event,'mark_dirty')">mark_dirty</a>();
<a name="l2728"><span class="linenum">2728</span></a>  
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment">    // Trigger a course created event.</span>
<a name="l2730"><span class="linenum">2730</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_created')" href="../_classes/course_created.html" onMouseOver="classPopup(event,'course_created')">course_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2731"><span class="linenum">2731</span></a>          'objectid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2732"><span class="linenum">2732</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>),
<a name="l2733"><span class="linenum">2733</span></a>          'other' =&gt; array('shortname' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>,
<a name="l2734"><span class="linenum">2734</span></a>              'fullname' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>)
<a name="l2735"><span class="linenum">2735</span></a>      ));
<a name="l2736"><span class="linenum">2736</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2737"><span class="linenum">2737</span></a>  
<a name="l2738"><span class="linenum">2738</span></a>  <span class="comment">    // Setup the blocks</span>
<a name="l2739"><span class="linenum">2739</span></a>      <a class="function" onClick="logFunction('blocks_add_default_course_blocks')" href="../_functions/blocks_add_default_course_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_course_blocks')">blocks_add_default_course_blocks</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2740"><span class="linenum">2740</span></a>  
<a name="l2741"><span class="linenum">2741</span></a>  <span class="comment">    // Create a default section.</span>
<a name="l2742"><span class="linenum">2742</span></a>      <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, 0);
<a name="l2743"><span class="linenum">2743</span></a>  
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment">    // Save any custom role names.</span>
<a name="l2745"><span class="linenum">2745</span></a>      <a class="function" onClick="logFunction('save_local_role_names')" href="../_functions/save_local_role_names.html" onMouseOver="funcPopup(event,'save_local_role_names')">save_local_role_names</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, (array)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2746"><span class="linenum">2746</span></a>  
<a name="l2747"><span class="linenum">2747</span></a>  <span class="comment">    // set up enrolments</span>
<a name="l2748"><span class="linenum">2748</span></a>      <a class="function" onClick="logFunction('enrol_course_updated')" href="../_functions/enrol_course_updated.html" onMouseOver="funcPopup(event,'enrol_course_updated')">enrol_course_updated</a>(true, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2749"><span class="linenum">2749</span></a>  
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment">    // Update course tags.</span>
<a name="l2751"><span class="linenum">2751</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('tags')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/tags.html">tags</a>)) {
<a name="l2752"><span class="linenum">2752</span></a>          <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('set_item_tags')" href="../_functions/set_item_tags.html" onMouseOver="funcPopup(event,'set_item_tags')">set_item_tags</a>('core', 'course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('tags')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/tags.html">tags</a>);
<a name="l2753"><span class="linenum">2753</span></a>      }
<a name="l2754"><span class="linenum">2754</span></a>  
<a name="l2755"><span class="linenum">2755</span></a>      return <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l2756"><span class="linenum">2756</span></a>  }
<a name="l2757"><span class="linenum">2757</span></a>  
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment">/**</span>
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment"> * Update a course.</span>
<a name="l2760"><span class="linenum">2760</span></a>  <span class="comment"> *</span>
<a name="l2761"><span class="linenum">2761</span></a>  <span class="comment"> * Please note this functions does not verify any access control,</span>
<a name="l2762"><span class="linenum">2762</span></a>  <span class="comment"> * the calling code is responsible for all validation (usually it is the form definition).</span>
<a name="l2763"><span class="linenum">2763</span></a>  <span class="comment"> *</span>
<a name="l2764"><span class="linenum">2764</span></a>  <span class="comment"> * @param object $data  - all the data needed for an entry in the 'course' table</span>
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment"> * @param array $editoroptions course description editor options</span>
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment"> * @return void</span>
<a name="l2767"><span class="linenum">2767</span></a>  <span class="comment"> */</span>
<a name="l2768"><span class="linenum">2768</span></a>  function <a class="function" onClick="logFunction('update_course')" href="../_functions/update_course.html" onMouseOver="funcPopup(event,'update_course')">update_course</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = NULL) {
<a name="l2769"><span class="linenum">2769</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2770"><span class="linenum">2770</span></a>  
<a name="l2771"><span class="linenum">2771</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2772"><span class="linenum">2772</span></a>  
<a name="l2773"><span class="linenum">2773</span></a>      <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)-&gt;<a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>();
<a name="l2774"><span class="linenum">2774</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>   = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('id')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2775"><span class="linenum">2775</span></a>  
<a name="l2776"><span class="linenum">2776</span></a>      if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l2777"><span class="linenum">2777</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'summary', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'course', 'summary', 0);
<a name="l2778"><span class="linenum">2778</span></a>      }
<a name="l2779"><span class="linenum">2779</span></a>      if (<a class="var it3116" onMouseOver="hilite(3116)" onMouseOut="lolite()" onClick="logVariable('overviewfilesoptions')" href="../_variables/overviewfilesoptions.html">$overviewfilesoptions</a> = <a class="function" onClick="logFunction('course_overviewfiles_options')" href="../_functions/course_overviewfiles_options.html" onMouseOver="funcPopup(event,'course_overviewfiles_options')">course_overviewfiles_options</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2780"><span class="linenum">2780</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_filemanager')" href="../_functions/file_postupdate_standard_filemanager.html" onMouseOver="funcPopup(event,'file_postupdate_standard_filemanager')">file_postupdate_standard_filemanager</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'overviewfiles', <a class="var it3116" onMouseOver="hilite(3116)" onMouseOut="lolite()" onClick="logVariable('overviewfilesoptions')" href="../_variables/overviewfilesoptions.html">$overviewfilesoptions</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'course', 'overviewfiles', 0);
<a name="l2781"><span class="linenum">2781</span></a>      }
<a name="l2782"><span class="linenum">2782</span></a>  
<a name="l2783"><span class="linenum">2783</span></a>  <span class="comment">    // Check we don't have a duplicate shortname.</span>
<a name="l2784"><span class="linenum">2784</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>) &amp;&amp; <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('shortname')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>) {
<a name="l2785"><span class="linenum">2785</span></a>          if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>('SELECT id from {course} WHERE shortname = ? AND id &lt;&gt; ?', array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l2786"><span class="linenum">2786</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('shortnametaken', '', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>);
<a name="l2787"><span class="linenum">2787</span></a>          }
<a name="l2788"><span class="linenum">2788</span></a>      }
<a name="l2789"><span class="linenum">2789</span></a>  
<a name="l2790"><span class="linenum">2790</span></a>  <span class="comment">    // Check we don't have a duplicate idnumber.</span>
<a name="l2791"><span class="linenum">2791</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>) &amp;&amp; <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('idnumber')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>) {
<a name="l2792"><span class="linenum">2792</span></a>          if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>('SELECT id from {course} WHERE idnumber = ? AND id &lt;&gt; ?', array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l2793"><span class="linenum">2793</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('courseidnumbertaken', '', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>);
<a name="l2794"><span class="linenum">2794</span></a>          }
<a name="l2795"><span class="linenum">2795</span></a>      }
<a name="l2796"><span class="linenum">2796</span></a>  
<a name="l2797"><span class="linenum">2797</span></a>      if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>) or empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>)) {
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment">        // prevent nulls and 0 in category field</span>
<a name="l2799"><span class="linenum">2799</span></a>          unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>);
<a name="l2800"><span class="linenum">2800</span></a>      }
<a name="l2801"><span class="linenum">2801</span></a>      <a class="var it35257" onMouseOver="hilite(35257)" onMouseOut="lolite()" onClick="logVariable('changesincoursecat')" href="../_variables/changesincoursecat.html">$changesincoursecat</a> = <a class="var it35258" onMouseOver="hilite(35258)" onMouseOut="lolite()" onClick="logVariable('movecat')" href="../_variables/movecat.html">$movecat</a> = (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>) and <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('category')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/category.html">category</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>);
<a name="l2802"><span class="linenum">2802</span></a>  
<a name="l2803"><span class="linenum">2803</span></a>      if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l2804"><span class="linenum">2804</span></a>  <span class="comment">        // data not from form, add missing visibility info</span>
<a name="l2805"><span class="linenum">2805</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('visible')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l2806"><span class="linenum">2806</span></a>      }
<a name="l2807"><span class="linenum">2807</span></a>  
<a name="l2808"><span class="linenum">2808</span></a>      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> != <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('visible')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2809"><span class="linenum">2809</span></a>  <span class="comment">        // reset the visibleold flag when manually hiding/unhiding course</span>
<a name="l2810"><span class="linenum">2810</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l2811"><span class="linenum">2811</span></a>          <a class="var it35257" onMouseOver="hilite(35257)" onMouseOut="lolite()" onClick="logVariable('changesincoursecat')" href="../_variables/changesincoursecat.html">$changesincoursecat</a> = true;
<a name="l2812"><span class="linenum">2812</span></a>      } else {
<a name="l2813"><span class="linenum">2813</span></a>          if (<a class="var it35258" onMouseOver="hilite(35258)" onMouseOut="lolite()" onClick="logVariable('movecat')" href="../_variables/movecat.html">$movecat</a>) {
<a name="l2814"><span class="linenum">2814</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>));
<a name="l2815"><span class="linenum">2815</span></a>              if (empty(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('visible')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">                // make sure when moving into hidden category the course is hidden automatically</span>
<a name="l2817"><span class="linenum">2817</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 0;
<a name="l2818"><span class="linenum">2818</span></a>              }
<a name="l2819"><span class="linenum">2819</span></a>          }
<a name="l2820"><span class="linenum">2820</span></a>      }
<a name="l2821"><span class="linenum">2821</span></a>  
<a name="l2822"><span class="linenum">2822</span></a>  <span class="comment">    // Update with the new data</span>
<a name="l2823"><span class="linenum">2823</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2824"><span class="linenum">2824</span></a>  <span class="comment">    // make sure the modinfo cache is reset</span>
<a name="l2825"><span class="linenum">2825</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2826"><span class="linenum">2826</span></a>  
<a name="l2827"><span class="linenum">2827</span></a>  <span class="comment">    // update course format options with full course data</span>
<a name="l2828"><span class="linenum">2828</span></a>      <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)-&gt;<a class="function" onClick="logFunction('update_course_format_options')" href="../_functions/update_course_format_options.html" onMouseOver="funcPopup(event,'update_course_format_options')">update_course_format_options</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>);
<a name="l2829"><span class="linenum">2829</span></a>  
<a name="l2830"><span class="linenum">2830</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2831"><span class="linenum">2831</span></a>  
<a name="l2832"><span class="linenum">2832</span></a>      if (<a class="var it35258" onMouseOver="hilite(35258)" onMouseOut="lolite()" onClick="logVariable('movecat')" href="../_variables/movecat.html">$movecat</a>) {
<a name="l2833"><span class="linenum">2833</span></a>          <a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/category.html">category</a>);
<a name="l2834"><span class="linenum">2834</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('update_moved')" href="../_functions/update_moved.html" onMouseOver="funcPopup(event,'update_moved')">update_moved</a>(<a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a>);
<a name="l2835"><span class="linenum">2835</span></a>      }
<a name="l2836"><span class="linenum">2836</span></a>      <a class="var it35259" onMouseOver="hilite(35259)" onMouseOut="lolite()" onClick="logVariable('fixcoursesortorder')" href="../_variables/fixcoursesortorder.html">$fixcoursesortorder</a> = <a class="var it35258" onMouseOver="hilite(35258)" onMouseOut="lolite()" onClick="logVariable('movecat')" href="../_variables/movecat.html">$movecat</a> || (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>) &amp;&amp; (<a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('sortorder')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>));
<a name="l2837"><span class="linenum">2837</span></a>      if (<a class="var it35259" onMouseOver="hilite(35259)" onMouseOut="lolite()" onClick="logVariable('fixcoursesortorder')" href="../_variables/fixcoursesortorder.html">$fixcoursesortorder</a>) {
<a name="l2838"><span class="linenum">2838</span></a>          <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2839"><span class="linenum">2839</span></a>      }
<a name="l2840"><span class="linenum">2840</span></a>  
<a name="l2841"><span class="linenum">2841</span></a>  <span class="comment">    // purge appropriate caches in case fix_course_sortorder() did not change anything</span>
<a name="l2842"><span class="linenum">2842</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l2843"><span class="linenum">2843</span></a>      if (<a class="var it35257" onMouseOver="hilite(35257)" onMouseOut="lolite()" onClick="logVariable('changesincoursecat')" href="../_variables/changesincoursecat.html">$changesincoursecat</a>) {
<a name="l2844"><span class="linenum">2844</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l2845"><span class="linenum">2845</span></a>      }
<a name="l2846"><span class="linenum">2846</span></a>  
<a name="l2847"><span class="linenum">2847</span></a>  <span class="comment">    // Test for and remove blocks which aren't appropriate anymore</span>
<a name="l2848"><span class="linenum">2848</span></a>      <a class="function" onClick="logFunction('blocks_remove_inappropriate')" href="../_functions/blocks_remove_inappropriate.html" onMouseOver="funcPopup(event,'blocks_remove_inappropriate')">blocks_remove_inappropriate</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2849"><span class="linenum">2849</span></a>  
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment">    // Save any custom role names.</span>
<a name="l2851"><span class="linenum">2851</span></a>      <a class="function" onClick="logFunction('save_local_role_names')" href="../_functions/save_local_role_names.html" onMouseOver="funcPopup(event,'save_local_role_names')">save_local_role_names</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2852"><span class="linenum">2852</span></a>  
<a name="l2853"><span class="linenum">2853</span></a>  <span class="comment">    // update enrol settings</span>
<a name="l2854"><span class="linenum">2854</span></a>      <a class="function" onClick="logFunction('enrol_course_updated')" href="../_functions/enrol_course_updated.html" onMouseOver="funcPopup(event,'enrol_course_updated')">enrol_course_updated</a>(false, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2855"><span class="linenum">2855</span></a>  
<a name="l2856"><span class="linenum">2856</span></a>  <span class="comment">    // Update course tags.</span>
<a name="l2857"><span class="linenum">2857</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('tags')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/tags.html">tags</a>)) {
<a name="l2858"><span class="linenum">2858</span></a>          <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('set_item_tags')" href="../_functions/set_item_tags.html" onMouseOver="funcPopup(event,'set_item_tags')">set_item_tags</a>('core', 'course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('tags')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/tags.html">tags</a>);
<a name="l2859"><span class="linenum">2859</span></a>      }
<a name="l2860"><span class="linenum">2860</span></a>  
<a name="l2861"><span class="linenum">2861</span></a>  <span class="comment">    // Trigger a course updated event.</span>
<a name="l2862"><span class="linenum">2862</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_updated')" href="../_classes/course_updated.html" onMouseOver="classPopup(event,'course_updated')">course_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2863"><span class="linenum">2863</span></a>          'objectid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2864"><span class="linenum">2864</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>),
<a name="l2865"><span class="linenum">2865</span></a>          'other' =&gt; array('shortname' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>,
<a name="l2866"><span class="linenum">2866</span></a>                           'fullname' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>)
<a name="l2867"><span class="linenum">2867</span></a>      ));
<a name="l2868"><span class="linenum">2868</span></a>  
<a name="l2869"><span class="linenum">2869</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course', 'update', 'edit.php?id=' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2870"><span class="linenum">2870</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2871"><span class="linenum">2871</span></a>  
<a name="l2872"><span class="linenum">2872</span></a>      if (<a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('format')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/format.html">format</a> !== <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>) {
<a name="l2873"><span class="linenum">2873</span></a>  <span class="comment">        // Remove all options stored for the previous format</span>
<a name="l2874"><span class="linenum">2874</span></a>  <span class="comment">        // We assume that new course format migrated everything it needed watching trigger</span>
<a name="l2875"><span class="linenum">2875</span></a>  <span class="comment">        // 'course_updated' and in method format_XXX::update_course_format_options()</span>
<a name="l2876"><span class="linenum">2876</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_format_options',
<a name="l2877"><span class="linenum">2877</span></a>                  array('courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'format' =&gt; <a class="var it9184" onMouseOver="hilite(9184)" onMouseOut="lolite()" onClick="logVariable('oldcourse')" href="../_variables/oldcourse.html">$oldcourse</a>-&gt;<a onClick="logVariable('format')" class="var it44292" onMouseOver="hilite(44292)" onMouseOut="lolite()" href="../_variables/format.html">format</a>));
<a name="l2878"><span class="linenum">2878</span></a>      }
<a name="l2879"><span class="linenum">2879</span></a>  }
<a name="l2880"><span class="linenum">2880</span></a>  
<a name="l2881"><span class="linenum">2881</span></a>  <span class="comment">/**</span>
<a name="l2882"><span class="linenum">2882</span></a>  <span class="comment"> * Average number of participants</span>
<a name="l2883"><span class="linenum">2883</span></a>  <span class="comment"> * @return integer</span>
<a name="l2884"><span class="linenum">2884</span></a>  <span class="comment"> */</span>
<a name="l2885"><span class="linenum">2885</span></a>  function <a class="function" onClick="logFunction('average_number_of_participants')" href="../_functions/average_number_of_participants.html" onMouseOver="funcPopup(event,'average_number_of_participants')">average_number_of_participants</a>() {
<a name="l2886"><span class="linenum">2886</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2887"><span class="linenum">2887</span></a>  
<a name="l2888"><span class="linenum">2888</span></a>  <span class="comment">    //count total of enrolments for visible course (except front page)</span>
<a name="l2889"><span class="linenum">2889</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) FROM (
<a name="l2890"><span class="linenum">2890</span></a>          SELECT DISTINCT ue.userid, e.courseid
<a name="l2891"><span class="linenum">2891</span></a>          FROM {user_enrolments} ue, {enrol} e, {course} c
<a name="l2892"><span class="linenum">2892</span></a>          WHERE ue.enrolid = e.id
<a name="l2893"><span class="linenum">2893</span></a>              AND e.courseid &lt;&gt; :siteid
<a name="l2894"><span class="linenum">2894</span></a>              AND c.id = e.courseid
<a name="l2895"><span class="linenum">2895</span></a>              AND c.visible = 1) total';
<a name="l2896"><span class="linenum">2896</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('siteid' =&gt; <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2897"><span class="linenum">2897</span></a>      <a class="var it35260" onMouseOver="hilite(35260)" onMouseOut="lolite()" onClick="logVariable('enrolmenttotal')" href="../_variables/enrolmenttotal.html">$enrolmenttotal</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l2898"><span class="linenum">2898</span></a>  
<a name="l2899"><span class="linenum">2899</span></a>  
<a name="l2900"><span class="linenum">2900</span></a>  <span class="comment">    //count total of visible courses (minus front page)</span>
<a name="l2901"><span class="linenum">2901</span></a>      <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('course', array('visible' =&gt; 1));
<a name="l2902"><span class="linenum">2902</span></a>      <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a> = <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a> - 1 ;
<a name="l2903"><span class="linenum">2903</span></a>  
<a name="l2904"><span class="linenum">2904</span></a>  <span class="comment">    //average of enrolment</span>
<a name="l2905"><span class="linenum">2905</span></a>      if (empty(<a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a>)) {
<a name="l2906"><span class="linenum">2906</span></a>          <a class="var it35261" onMouseOver="hilite(35261)" onMouseOut="lolite()" onClick="logVariable('participantaverage')" href="../_variables/participantaverage.html">$participantaverage</a> = 0;
<a name="l2907"><span class="linenum">2907</span></a>      } else {
<a name="l2908"><span class="linenum">2908</span></a>          <a class="var it35261" onMouseOver="hilite(35261)" onMouseOut="lolite()" onClick="logVariable('participantaverage')" href="../_variables/participantaverage.html">$participantaverage</a> = <a class="var it35260" onMouseOver="hilite(35260)" onMouseOut="lolite()" onClick="logVariable('enrolmenttotal')" href="../_variables/enrolmenttotal.html">$enrolmenttotal</a> / <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a>;
<a name="l2909"><span class="linenum">2909</span></a>      }
<a name="l2910"><span class="linenum">2910</span></a>  
<a name="l2911"><span class="linenum">2911</span></a>      return <a class="var it35261" onMouseOver="hilite(35261)" onMouseOut="lolite()" onClick="logVariable('participantaverage')" href="../_variables/participantaverage.html">$participantaverage</a>;
<a name="l2912"><span class="linenum">2912</span></a>  }
<a name="l2913"><span class="linenum">2913</span></a>  
<a name="l2914"><span class="linenum">2914</span></a>  <span class="comment">/**</span>
<a name="l2915"><span class="linenum">2915</span></a>  <span class="comment"> * Average number of course modules</span>
<a name="l2916"><span class="linenum">2916</span></a>  <span class="comment"> * @return integer</span>
<a name="l2917"><span class="linenum">2917</span></a>  <span class="comment"> */</span>
<a name="l2918"><span class="linenum">2918</span></a>  function <a class="function" onClick="logFunction('average_number_of_courses_modules')" href="../_functions/average_number_of_courses_modules.html" onMouseOver="funcPopup(event,'average_number_of_courses_modules')">average_number_of_courses_modules</a>() {
<a name="l2919"><span class="linenum">2919</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2920"><span class="linenum">2920</span></a>  
<a name="l2921"><span class="linenum">2921</span></a>  <span class="comment">    //count total of visible course module (except front page)</span>
<a name="l2922"><span class="linenum">2922</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) FROM (
<a name="l2923"><span class="linenum">2923</span></a>          SELECT cm.course, cm.module
<a name="l2924"><span class="linenum">2924</span></a>          FROM {course} c, {course_modules} cm
<a name="l2925"><span class="linenum">2925</span></a>          WHERE c.id = cm.course
<a name="l2926"><span class="linenum">2926</span></a>              AND c.id &lt;&gt; :siteid
<a name="l2927"><span class="linenum">2927</span></a>              AND cm.visible = 1
<a name="l2928"><span class="linenum">2928</span></a>              AND c.visible = 1) total';
<a name="l2929"><span class="linenum">2929</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('siteid' =&gt; <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2930"><span class="linenum">2930</span></a>      <a class="var it35262" onMouseOver="hilite(35262)" onMouseOut="lolite()" onClick="logVariable('moduletotal')" href="../_variables/moduletotal.html">$moduletotal</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l2931"><span class="linenum">2931</span></a>  
<a name="l2932"><span class="linenum">2932</span></a>  
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment">    //count total of visible courses (minus front page)</span>
<a name="l2934"><span class="linenum">2934</span></a>      <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('course', array('visible' =&gt; 1));
<a name="l2935"><span class="linenum">2935</span></a>      <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a> = <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a> - 1 ;
<a name="l2936"><span class="linenum">2936</span></a>  
<a name="l2937"><span class="linenum">2937</span></a>  <span class="comment">    //average of course module</span>
<a name="l2938"><span class="linenum">2938</span></a>      if (empty(<a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a>)) {
<a name="l2939"><span class="linenum">2939</span></a>          <a class="var it35263" onMouseOver="hilite(35263)" onMouseOut="lolite()" onClick="logVariable('coursemoduleaverage')" href="../_variables/coursemoduleaverage.html">$coursemoduleaverage</a> = 0;
<a name="l2940"><span class="linenum">2940</span></a>      } else {
<a name="l2941"><span class="linenum">2941</span></a>          <a class="var it35263" onMouseOver="hilite(35263)" onMouseOut="lolite()" onClick="logVariable('coursemoduleaverage')" href="../_variables/coursemoduleaverage.html">$coursemoduleaverage</a> = <a class="var it35262" onMouseOver="hilite(35262)" onMouseOut="lolite()" onClick="logVariable('moduletotal')" href="../_variables/moduletotal.html">$moduletotal</a> / <a class="var it5082" onMouseOver="hilite(5082)" onMouseOut="lolite()" onClick="logVariable('coursetotal')" href="../_variables/coursetotal.html">$coursetotal</a>;
<a name="l2942"><span class="linenum">2942</span></a>      }
<a name="l2943"><span class="linenum">2943</span></a>  
<a name="l2944"><span class="linenum">2944</span></a>      return <a class="var it35263" onMouseOver="hilite(35263)" onMouseOut="lolite()" onClick="logVariable('coursemoduleaverage')" href="../_variables/coursemoduleaverage.html">$coursemoduleaverage</a>;
<a name="l2945"><span class="linenum">2945</span></a>  }
<a name="l2946"><span class="linenum">2946</span></a>  
<a name="l2947"><span class="linenum">2947</span></a>  <span class="comment">/**</span>
<a name="l2948"><span class="linenum">2948</span></a>  <span class="comment"> * This class pertains to course requests and contains methods associated with</span>
<a name="l2949"><span class="linenum">2949</span></a>  <span class="comment"> * create, approving, and removing course requests.</span>
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment"> *</span>
<a name="l2951"><span class="linenum">2951</span></a>  <span class="comment"> * Please note we do not allow embedded images here because there is no context</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment"> * to store them with proper access control.</span>
<a name="l2953"><span class="linenum">2953</span></a>  <span class="comment"> *</span>
<a name="l2954"><span class="linenum">2954</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l2955"><span class="linenum">2955</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2956"><span class="linenum">2956</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l2957"><span class="linenum">2957</span></a>  <span class="comment"> *</span>
<a name="l2958"><span class="linenum">2958</span></a>  <span class="comment"> * @property-read int $id</span>
<a name="l2959"><span class="linenum">2959</span></a>  <span class="comment"> * @property-read string $fullname</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment"> * @property-read string $shortname</span>
<a name="l2961"><span class="linenum">2961</span></a>  <span class="comment"> * @property-read string $summary</span>
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment"> * @property-read int $summaryformat</span>
<a name="l2963"><span class="linenum">2963</span></a>  <span class="comment"> * @property-read int $summarytrust</span>
<a name="l2964"><span class="linenum">2964</span></a>  <span class="comment"> * @property-read string $reason</span>
<a name="l2965"><span class="linenum">2965</span></a>  <span class="comment"> * @property-read int $requester</span>
<a name="l2966"><span class="linenum">2966</span></a>  <span class="comment"> */</span>
<a name="l2967"><span class="linenum">2967</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('course_request')" href="../_classes/course_request.html" onMouseOver="classPopup(event,'course_request')">course_request</a> {
<a name="l2968"><span class="linenum">2968</span></a>  
<a name="l2969"><span class="linenum">2969</span></a>      <span class="comment">/**</span>
<a name="l2970"><span class="linenum">2970</span></a>  <span class="comment">     * This is the stdClass that stores the properties for the course request</span>
<a name="l2971"><span class="linenum">2971</span></a>  <span class="comment">     * and is externally accessed through the __get magic method</span>
<a name="l2972"><span class="linenum">2972</span></a>  <span class="comment">     * @var stdClass</span>
<a name="l2973"><span class="linenum">2973</span></a>  <span class="comment">     */</span>
<a name="l2974"><span class="linenum">2974</span></a>      protected <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>;
<a name="l2975"><span class="linenum">2975</span></a>  
<a name="l2976"><span class="linenum">2976</span></a>      <span class="comment">/**</span>
<a name="l2977"><span class="linenum">2977</span></a>  <span class="comment">     * An array of options for the summary editor used by course request forms.</span>
<a name="l2978"><span class="linenum">2978</span></a>  <span class="comment">     * This is initially set by {@link summary_editor_options()}</span>
<a name="l2979"><span class="linenum">2979</span></a>  <span class="comment">     * @var array</span>
<a name="l2980"><span class="linenum">2980</span></a>  <span class="comment">     * @static</span>
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment">     */</span>
<a name="l2982"><span class="linenum">2982</span></a>      protected static <a class="var it35264" onMouseOver="hilite(35264)" onMouseOut="lolite()" onClick="logVariable('summaryeditoroptions')" href="../_variables/summaryeditoroptions.html">$summaryeditoroptions</a>;
<a name="l2983"><span class="linenum">2983</span></a>  
<a name="l2984"><span class="linenum">2984</span></a>      <span class="comment">/**</span>
<a name="l2985"><span class="linenum">2985</span></a>  <span class="comment">     * Static function to prepare the summary editor for working with a course</span>
<a name="l2986"><span class="linenum">2986</span></a>  <span class="comment">     * request.</span>
<a name="l2987"><span class="linenum">2987</span></a>  <span class="comment">     *</span>
<a name="l2988"><span class="linenum">2988</span></a>  <span class="comment">     * @static</span>
<a name="l2989"><span class="linenum">2989</span></a>  <span class="comment">     * @param null|stdClass $data Optional, an object containing the default values</span>
<a name="l2990"><span class="linenum">2990</span></a>  <span class="comment">     *                       for the form, these may be modified when preparing the</span>
<a name="l2991"><span class="linenum">2991</span></a>  <span class="comment">     *                       editor so this should be called before creating the form</span>
<a name="l2992"><span class="linenum">2992</span></a>  <span class="comment">     * @return stdClass An object that can be used to set the default values for</span>
<a name="l2993"><span class="linenum">2993</span></a>  <span class="comment">     *                   an mforms form</span>
<a name="l2994"><span class="linenum">2994</span></a>  <span class="comment">     */</span>
<a name="l2995"><span class="linenum">2995</span></a>      public static function <a class="function" onClick="logFunction('prepare')" href="../_functions/prepare.html" onMouseOver="funcPopup(event,'prepare')">prepare</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>=null) {
<a name="l2996"><span class="linenum">2996</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> === null) {
<a name="l2997"><span class="linenum">2997</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = new stdClass;
<a name="l2998"><span class="linenum">2998</span></a>          }
<a name="l2999"><span class="linenum">2999</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_prepare_standard_editor')" href="../_functions/file_prepare_standard_editor.html" onMouseOver="funcPopup(event,'file_prepare_standard_editor')">file_prepare_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'summary', self::<a class="function" onClick="logFunction('summary_editor_options')" href="../_functions/summary_editor_options.html" onMouseOver="funcPopup(event,'summary_editor_options')">summary_editor_options</a>());
<a name="l3000"><span class="linenum">3000</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>;
<a name="l3001"><span class="linenum">3001</span></a>      }
<a name="l3002"><span class="linenum">3002</span></a>  
<a name="l3003"><span class="linenum">3003</span></a>      <span class="comment">/**</span>
<a name="l3004"><span class="linenum">3004</span></a>  <span class="comment">     * Static function to create a new course request when passed an array of properties</span>
<a name="l3005"><span class="linenum">3005</span></a>  <span class="comment">     * for it.</span>
<a name="l3006"><span class="linenum">3006</span></a>  <span class="comment">     *</span>
<a name="l3007"><span class="linenum">3007</span></a>  <span class="comment">     * This function also handles saving any files that may have been used in the editor</span>
<a name="l3008"><span class="linenum">3008</span></a>  <span class="comment">     *</span>
<a name="l3009"><span class="linenum">3009</span></a>  <span class="comment">     * @static</span>
<a name="l3010"><span class="linenum">3010</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l3011"><span class="linenum">3011</span></a>  <span class="comment">     * @return course_request The newly created course request</span>
<a name="l3012"><span class="linenum">3012</span></a>  <span class="comment">     */</span>
<a name="l3013"><span class="linenum">3013</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l3014"><span class="linenum">3014</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3015"><span class="linenum">3015</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('requester')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/requester.html">requester</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3016"><span class="linenum">3016</span></a>  
<a name="l3017"><span class="linenum">3017</span></a>  <span class="comment">        // Setting the default category if none set.</span>
<a name="l3018"><span class="linenum">3018</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a>) || empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('requestcategoryselection')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/requestcategoryselection.html">requestcategoryselection</a>)) {
<a name="l3019"><span class="linenum">3019</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultrequestcategory')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultrequestcategory.html">defaultrequestcategory</a>;
<a name="l3020"><span class="linenum">3020</span></a>          }
<a name="l3021"><span class="linenum">3021</span></a>  
<a name="l3022"><span class="linenum">3022</span></a>  <span class="comment">        // Summary is a required field so copy the text over</span>
<a name="l3023"><span class="linenum">3023</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>       = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary_editor.html">summary_editor</a>['text'];
<a name="l3024"><span class="linenum">3024</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summaryformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summaryformat.html">summaryformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('summary_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/summary_editor.html">summary_editor</a>['format'];
<a name="l3025"><span class="linenum">3025</span></a>  
<a name="l3026"><span class="linenum">3026</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('course_request', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l3027"><span class="linenum">3027</span></a>  
<a name="l3028"><span class="linenum">3028</span></a>  <span class="comment">        // Create a new course_request object and return it</span>
<a name="l3029"><span class="linenum">3029</span></a>          <a class="var it1899" onMouseOver="hilite(1899)" onMouseOut="lolite()" onClick="logVariable('request')" href="../_variables/request.html">$request</a> = <span class="keyword">new </span><a class="class" onClick="logClass('course_request')" href="../_classes/course_request.html" onMouseOver="classPopup(event,'course_request')">course_request</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l3030"><span class="linenum">3030</span></a>  
<a name="l3031"><span class="linenum">3031</span></a>  <span class="comment">        // Notify the admin if required.</span>
<a name="l3032"><span class="linenum">3032</span></a>          if (<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> = <a class="function" onClick="logFunction('get_users_from_config')" href="../_functions/get_users_from_config.html" onMouseOver="funcPopup(event,'get_users_from_config')">get_users_from_config</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courserequestnotify')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courserequestnotify.html">courserequestnotify</a>, 'moodle/site:approvecourse')) {
<a name="l3033"><span class="linenum">3033</span></a>  
<a name="l3034"><span class="linenum">3034</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass;
<a name="l3035"><span class="linenum">3035</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('link')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/link.html">link</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/course/pending.php&quot;;
<a name="l3036"><span class="linenum">3036</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('user')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/user.html">user</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>);
<a name="l3037"><span class="linenum">3037</span></a>              <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courserequest');
<a name="l3038"><span class="linenum">3038</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courserequestnotifyemail', 'admin', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l3039"><span class="linenum">3039</span></a>              foreach (<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> as <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l3040"><span class="linenum">3040</span></a>                  <a class="var it1899" onMouseOver="hilite(1899)" onMouseOut="lolite()" onClick="logVariable('request')" href="../_variables/request.html">$request</a>-&gt;<a class="function" onClick="logFunction('notify')" href="../_functions/notify.html" onMouseOver="funcPopup(event,'notify')">notify</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, 'courserequested', <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>);
<a name="l3041"><span class="linenum">3041</span></a>              }
<a name="l3042"><span class="linenum">3042</span></a>          }
<a name="l3043"><span class="linenum">3043</span></a>  
<a name="l3044"><span class="linenum">3044</span></a>          return <a class="var it1899" onMouseOver="hilite(1899)" onMouseOut="lolite()" onClick="logVariable('request')" href="../_variables/request.html">$request</a>;
<a name="l3045"><span class="linenum">3045</span></a>      }
<a name="l3046"><span class="linenum">3046</span></a>  
<a name="l3047"><span class="linenum">3047</span></a>      <span class="comment">/**</span>
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment">     * Returns an array of options to use with a summary editor</span>
<a name="l3049"><span class="linenum">3049</span></a>  <span class="comment">     *</span>
<a name="l3050"><span class="linenum">3050</span></a>  <span class="comment">     * @uses course_request::$summaryeditoroptions</span>
<a name="l3051"><span class="linenum">3051</span></a>  <span class="comment">     * @return array An array of options to use with the editor</span>
<a name="l3052"><span class="linenum">3052</span></a>  <span class="comment">     */</span>
<a name="l3053"><span class="linenum">3053</span></a>      public static function <a class="function" onClick="logFunction('summary_editor_options')" href="../_functions/summary_editor_options.html" onMouseOver="funcPopup(event,'summary_editor_options')">summary_editor_options</a>() {
<a name="l3054"><span class="linenum">3054</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3055"><span class="linenum">3055</span></a>          if (self::<a class="var it35264" onMouseOver="hilite(35264)" onMouseOut="lolite()" onClick="logVariable('summaryeditoroptions')" href="../_variables/summaryeditoroptions.html">$summaryeditoroptions</a> === null) {
<a name="l3056"><span class="linenum">3056</span></a>              self::<a class="var it35264" onMouseOver="hilite(35264)" onMouseOut="lolite()" onClick="logVariable('summaryeditoroptions')" href="../_variables/summaryeditoroptions.html">$summaryeditoroptions</a> = array('maxfiles' =&gt; 0, 'maxbytes'=&gt;0);
<a name="l3057"><span class="linenum">3057</span></a>          }
<a name="l3058"><span class="linenum">3058</span></a>          return self::<a class="var it35264" onMouseOver="hilite(35264)" onMouseOut="lolite()" onClick="logVariable('summaryeditoroptions')" href="../_variables/summaryeditoroptions.html">$summaryeditoroptions</a>;
<a name="l3059"><span class="linenum">3059</span></a>      }
<a name="l3060"><span class="linenum">3060</span></a>  
<a name="l3061"><span class="linenum">3061</span></a>      <span class="comment">/**</span>
<a name="l3062"><span class="linenum">3062</span></a>  <span class="comment">     * Loads the properties for this course request object. Id is required and if</span>
<a name="l3063"><span class="linenum">3063</span></a>  <span class="comment">     * only id is provided then we load the rest of the properties from the database</span>
<a name="l3064"><span class="linenum">3064</span></a>  <span class="comment">     *</span>
<a name="l3065"><span class="linenum">3065</span></a>  <span class="comment">     * @param stdClass|int $properties Either an object containing properties</span>
<a name="l3066"><span class="linenum">3066</span></a>  <span class="comment">     *                      or the course_request id to load</span>
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment">     */</span>
<a name="l3068"><span class="linenum">3068</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>) {
<a name="l3069"><span class="linenum">3069</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3070"><span class="linenum">3070</span></a>          if (empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l3071"><span class="linenum">3071</span></a>              if (empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l3072"><span class="linenum">3072</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('You must provide a course request id when creating a course_request object');
<a name="l3073"><span class="linenum">3073</span></a>              }
<a name="l3074"><span class="linenum">3074</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>;
<a name="l3075"><span class="linenum">3075</span></a>              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a> = new stdClass;
<a name="l3076"><span class="linenum">3076</span></a>              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = (int)<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l3077"><span class="linenum">3077</span></a>              unset(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l3078"><span class="linenum">3078</span></a>          }
<a name="l3079"><span class="linenum">3079</span></a>          if (empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('requester')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/requester.html">requester</a>)) {
<a name="l3080"><span class="linenum">3080</span></a>              if (!(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_request', array('id' =&gt; <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)))) {
<a name="l3081"><span class="linenum">3081</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('unknowncourserequest');
<a name="l3082"><span class="linenum">3082</span></a>              }
<a name="l3083"><span class="linenum">3083</span></a>          } else {
<a name="l3084"><span class="linenum">3084</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>;
<a name="l3085"><span class="linenum">3085</span></a>          }
<a name="l3086"><span class="linenum">3086</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision = null;
<a name="l3087"><span class="linenum">3087</span></a>      }
<a name="l3088"><span class="linenum">3088</span></a>  
<a name="l3089"><span class="linenum">3089</span></a>      <span class="comment">/**</span>
<a name="l3090"><span class="linenum">3090</span></a>  <span class="comment">     * Returns the requested property</span>
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment">     *</span>
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment">     * @param string $key</span>
<a name="l3093"><span class="linenum">3093</span></a>  <span class="comment">     * @return mixed</span>
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment">     */</span>
<a name="l3095"><span class="linenum">3095</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l3096"><span class="linenum">3096</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l3097"><span class="linenum">3097</span></a>      }
<a name="l3098"><span class="linenum">3098</span></a>  
<a name="l3099"><span class="linenum">3099</span></a>      <span class="comment">/**</span>
<a name="l3100"><span class="linenum">3100</span></a>  <span class="comment">     * Override this to ensure empty($request-&gt;blah) calls return a reliable answer...</span>
<a name="l3101"><span class="linenum">3101</span></a>  <span class="comment">     *</span>
<a name="l3102"><span class="linenum">3102</span></a>  <span class="comment">     * This is required because we define the __get method</span>
<a name="l3103"><span class="linenum">3103</span></a>  <span class="comment">     *</span>
<a name="l3104"><span class="linenum">3104</span></a>  <span class="comment">     * @param mixed $key</span>
<a name="l3105"><span class="linenum">3105</span></a>  <span class="comment">     * @return bool True is it not empty, false otherwise</span>
<a name="l3106"><span class="linenum">3106</span></a>  <span class="comment">     */</span>
<a name="l3107"><span class="linenum">3107</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l3108"><span class="linenum">3108</span></a>          return (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>));
<a name="l3109"><span class="linenum">3109</span></a>      }
<a name="l3110"><span class="linenum">3110</span></a>  
<a name="l3111"><span class="linenum">3111</span></a>      <span class="comment">/**</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment">     * Returns the user who requested this course</span>
<a name="l3113"><span class="linenum">3113</span></a>  <span class="comment">     *</span>
<a name="l3114"><span class="linenum">3114</span></a>  <span class="comment">     * Uses a static var to cache the results and cut down the number of db queries</span>
<a name="l3115"><span class="linenum">3115</span></a>  <span class="comment">     *</span>
<a name="l3116"><span class="linenum">3116</span></a>  <span class="comment">     * @staticvar array $requesters An array of cached users</span>
<a name="l3117"><span class="linenum">3117</span></a>  <span class="comment">     * @return stdClass The user who requested the course</span>
<a name="l3118"><span class="linenum">3118</span></a>  <span class="comment">     */</span>
<a name="l3119"><span class="linenum">3119</span></a>      public function <a class="function" onClick="logFunction('get_requester')" href="../_functions/get_requester.html" onMouseOver="funcPopup(event,'get_requester')">get_requester</a>() {
<a name="l3120"><span class="linenum">3120</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3121"><span class="linenum">3121</span></a>          static <a class="var it35267" onMouseOver="hilite(35267)" onMouseOut="lolite()" onClick="logVariable('requesters')" href="../_variables/requesters.html">$requesters</a>= array();
<a name="l3122"><span class="linenum">3122</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;requester, <a class="var it35267" onMouseOver="hilite(35267)" onMouseOut="lolite()" onClick="logVariable('requesters')" href="../_variables/requesters.html">$requesters</a>)) {
<a name="l3123"><span class="linenum">3123</span></a>              <a class="var it35267" onMouseOver="hilite(35267)" onMouseOut="lolite()" onClick="logVariable('requesters')" href="../_variables/requesters.html">$requesters</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;requester] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;requester));
<a name="l3124"><span class="linenum">3124</span></a>          }
<a name="l3125"><span class="linenum">3125</span></a>          return <a class="var it35267" onMouseOver="hilite(35267)" onMouseOut="lolite()" onClick="logVariable('requesters')" href="../_variables/requesters.html">$requesters</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;requester];
<a name="l3126"><span class="linenum">3126</span></a>      }
<a name="l3127"><span class="linenum">3127</span></a>  
<a name="l3128"><span class="linenum">3128</span></a>      <span class="comment">/**</span>
<a name="l3129"><span class="linenum">3129</span></a>  <span class="comment">     * Checks that the shortname used by the course does not conflict with any other</span>
<a name="l3130"><span class="linenum">3130</span></a>  <span class="comment">     * courses that exist</span>
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment">     *</span>
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">     * @param string|null $shortnamemark The string to append to the requests shortname</span>
<a name="l3133"><span class="linenum">3133</span></a>  <span class="comment">     *                     should a conflict be found</span>
<a name="l3134"><span class="linenum">3134</span></a>  <span class="comment">     * @return bool true is there is a conflict, false otherwise</span>
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment">     */</span>
<a name="l3136"><span class="linenum">3136</span></a>      public function <a class="function" onClick="logFunction('check_shortname_collision')" href="../_functions/check_shortname_collision.html" onMouseOver="funcPopup(event,'check_shortname_collision')">check_shortname_collision</a>(<a class="var it35268" onMouseOver="hilite(35268)" onMouseOut="lolite()" onClick="logVariable('shortnamemark')" href="../_variables/shortnamemark.html">$shortnamemark</a> = '[*]') {
<a name="l3137"><span class="linenum">3137</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3138"><span class="linenum">3138</span></a>  
<a name="l3139"><span class="linenum">3139</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision !== null) {
<a name="l3140"><span class="linenum">3140</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision;
<a name="l3141"><span class="linenum">3141</span></a>          }
<a name="l3142"><span class="linenum">3142</span></a>  
<a name="l3143"><span class="linenum">3143</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;shortname)) {
<a name="l3144"><span class="linenum">3144</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Attempting to check a course request shortname before it has been set', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3145"><span class="linenum">3145</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision = false;
<a name="l3146"><span class="linenum">3146</span></a>          } else if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course', array('shortname' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;shortname))) {
<a name="l3147"><span class="linenum">3147</span></a>              if (!empty(<a class="var it35268" onMouseOver="hilite(35268)" onMouseOut="lolite()" onClick="logVariable('shortnamemark')" href="../_variables/shortnamemark.html">$shortnamemark</a>)) {
<a name="l3148"><span class="linenum">3148</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;shortname .= ' '.<a class="var it35268" onMouseOver="hilite(35268)" onMouseOut="lolite()" onClick="logVariable('shortnamemark')" href="../_variables/shortnamemark.html">$shortnamemark</a>;
<a name="l3149"><span class="linenum">3149</span></a>              }
<a name="l3150"><span class="linenum">3150</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision = true;
<a name="l3151"><span class="linenum">3151</span></a>          } else {
<a name="l3152"><span class="linenum">3152</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision = false;
<a name="l3153"><span class="linenum">3153</span></a>          }
<a name="l3154"><span class="linenum">3154</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;collision;
<a name="l3155"><span class="linenum">3155</span></a>      }
<a name="l3156"><span class="linenum">3156</span></a>  
<a name="l3157"><span class="linenum">3157</span></a>      <span class="comment">/**</span>
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment">     * Returns the category where this course request should be created</span>
<a name="l3159"><span class="linenum">3159</span></a>  <span class="comment">     *</span>
<a name="l3160"><span class="linenum">3160</span></a>  <span class="comment">     * Note that we don't check here that user has a capability to view</span>
<a name="l3161"><span class="linenum">3161</span></a>  <span class="comment">     * hidden categories if he has capabilities 'moodle/site:approvecourse' and</span>
<a name="l3162"><span class="linenum">3162</span></a>  <span class="comment">     * 'moodle/course:changecategory'</span>
<a name="l3163"><span class="linenum">3163</span></a>  <span class="comment">     *</span>
<a name="l3164"><span class="linenum">3164</span></a>  <span class="comment">     * @return coursecat</span>
<a name="l3165"><span class="linenum">3165</span></a>  <span class="comment">     */</span>
<a name="l3166"><span class="linenum">3166</span></a>      public function <a class="function" onClick="logFunction('get_category')" href="../_functions/get_category.html" onMouseOver="funcPopup(event,'get_category')">get_category</a>() {
<a name="l3167"><span class="linenum">3167</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3168"><span class="linenum">3168</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/coursecatlib.php');
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment">        // If the category is not set, if the current user does not have the rights to change the category, or if the</span>
<a name="l3170"><span class="linenum">3170</span></a>  <span class="comment">        // category does not exist, we set the default category to the course to be approved.</span>
<a name="l3171"><span class="linenum">3171</span></a>  <span class="comment">        // The system level is used because the capability moodle/site:approvecourse is based on a system level.</span>
<a name="l3172"><span class="linenum">3172</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;category) || !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:changecategory', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()) ||
<a name="l3173"><span class="linenum">3173</span></a>                  (!<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;category, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>, true))) {
<a name="l3174"><span class="linenum">3174</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultrequestcategory')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultrequestcategory.html">defaultrequestcategory</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>, true);
<a name="l3175"><span class="linenum">3175</span></a>          }
<a name="l3176"><span class="linenum">3176</span></a>          if (!<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l3177"><span class="linenum">3177</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('get_default')" href="../_functions/get_default.html" onMouseOver="funcPopup(event,'get_default')">get_default</a>();
<a name="l3178"><span class="linenum">3178</span></a>          }
<a name="l3179"><span class="linenum">3179</span></a>          return <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l3180"><span class="linenum">3180</span></a>      }
<a name="l3181"><span class="linenum">3181</span></a>  
<a name="l3182"><span class="linenum">3182</span></a>      <span class="comment">/**</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment">     * This function approves the request turning it into a course</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment">     *</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment">     * This function converts the course request into a course, at the same time</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment">     * transferring any files used in the summary to the new course and then removing</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment">     * the course request and the files associated with it.</span>
<a name="l3188"><span class="linenum">3188</span></a>  <span class="comment">     *</span>
<a name="l3189"><span class="linenum">3189</span></a>  <span class="comment">     * @return int The id of the course that was created from this request</span>
<a name="l3190"><span class="linenum">3190</span></a>  <span class="comment">     */</span>
<a name="l3191"><span class="linenum">3191</span></a>      public function <a class="function" onClick="logFunction('approve')" href="../_functions/approve.html" onMouseOver="funcPopup(event,'approve')">approve</a>() {
<a name="l3192"><span class="linenum">3192</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l3193"><span class="linenum">3193</span></a>  
<a name="l3194"><span class="linenum">3194</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;requester, 'deleted'=&gt;0), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3195"><span class="linenum">3195</span></a>  
<a name="l3196"><span class="linenum">3196</span></a>          <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('moodlecourse');
<a name="l3197"><span class="linenum">3197</span></a>  
<a name="l3198"><span class="linenum">3198</span></a>  <span class="comment">        // Transfer appropriate settings</span>
<a name="l3199"><span class="linenum">3199</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>);
<a name="l3200"><span class="linenum">3200</span></a>          unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3201"><span class="linenum">3201</span></a>          unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reason')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/reason.html">reason</a>);
<a name="l3202"><span class="linenum">3202</span></a>          unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('requester')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/requester.html">requester</a>);
<a name="l3203"><span class="linenum">3203</span></a>  
<a name="l3204"><span class="linenum">3204</span></a>  <span class="comment">        // Set category</span>
<a name="l3205"><span class="linenum">3205</span></a>          <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_category')" href="../_functions/get_category.html" onMouseOver="funcPopup(event,'get_category')">get_category</a>();
<a name="l3206"><span class="linenum">3206</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('category')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/category.html">category</a> = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3207"><span class="linenum">3207</span></a>  <span class="comment">        // Set misc settings</span>
<a name="l3208"><span class="linenum">3208</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('requested')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/requested.html">requested</a> = 1;
<a name="l3209"><span class="linenum">3209</span></a>  
<a name="l3210"><span class="linenum">3210</span></a>  <span class="comment">        // Apply course default settings</span>
<a name="l3211"><span class="linenum">3211</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/format.html">format</a>             = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('format')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/format.html">format</a>;
<a name="l3212"><span class="linenum">3212</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('newsitems')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/newsitems.html">newsitems</a>          = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('newsitems')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/newsitems.html">newsitems</a>;
<a name="l3213"><span class="linenum">3213</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('showgrades')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/showgrades.html">showgrades</a>         = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('showgrades')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/showgrades.html">showgrades</a>;
<a name="l3214"><span class="linenum">3214</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('showreports')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/showreports.html">showreports</a>        = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('showreports')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/showreports.html">showreports</a>;
<a name="l3215"><span class="linenum">3215</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('maxbytes')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/maxbytes.html">maxbytes</a>           = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('maxbytes')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/maxbytes.html">maxbytes</a>;
<a name="l3216"><span class="linenum">3216</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a>          = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('groupmode')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a>;
<a name="l3217"><span class="linenum">3217</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('groupmodeforce')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/groupmodeforce.html">groupmodeforce</a>     = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('groupmodeforce')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/groupmodeforce.html">groupmodeforce</a>;
<a name="l3218"><span class="linenum">3218</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>            = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('visible')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l3219"><span class="linenum">3219</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a>         = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l3220"><span class="linenum">3220</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('lang')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>               = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('lang')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>;
<a name="l3221"><span class="linenum">3221</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('enablecompletion')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/enablecompletion.html">enablecompletion</a>   = <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('courseconfig')" href="../_variables/courseconfig.html">$courseconfig</a>-&gt;<a onClick="logVariable('enablecompletion')" class="var it43447" onMouseOver="hilite(43447)" onMouseOut="lolite()" href="../_variables/enablecompletion.html">enablecompletion</a>;
<a name="l3222"><span class="linenum">3222</span></a>  
<a name="l3223"><span class="linenum">3223</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('create_course')" href="../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l3224"><span class="linenum">3224</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3225"><span class="linenum">3225</span></a>  
<a name="l3226"><span class="linenum">3226</span></a>  <span class="comment">        // add enrol instances</span>
<a name="l3227"><span class="linenum">3227</span></a>          if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('enrol', array('courseid'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'enrol'=&gt;'manual'))) {
<a name="l3228"><span class="linenum">3228</span></a>              if (<a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../_variables/manual.html">$manual</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('manual')) {
<a name="l3229"><span class="linenum">3229</span></a>                  <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../_variables/manual.html">$manual</a>-&gt;<a class="function" onClick="logFunction('add_default_instance')" href="../_functions/add_default_instance.html" onMouseOver="funcPopup(event,'add_default_instance')">add_default_instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3230"><span class="linenum">3230</span></a>              }
<a name="l3231"><span class="linenum">3231</span></a>          }
<a name="l3232"><span class="linenum">3232</span></a>  
<a name="l3233"><span class="linenum">3233</span></a>  <span class="comment">        // enrol the requester as teacher if necessary</span>
<a name="l3234"><span class="linenum">3234</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('creatornewroleid')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/creatornewroleid.html">creatornewroleid</a>) and !<a class="function" onClick="logFunction('is_viewing')" href="../_functions/is_viewing.html" onMouseOver="funcPopup(event,'is_viewing')">is_viewing</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, 'moodle/role:assign') and !<a class="function" onClick="logFunction('is_enrolled')" href="../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, 'moodle/role:assign')) {
<a name="l3235"><span class="linenum">3235</span></a>              <a class="function" onClick="logFunction('enrol_try_internal_enrol')" href="../_functions/enrol_try_internal_enrol.html" onMouseOver="funcPopup(event,'enrol_try_internal_enrol')">enrol_try_internal_enrol</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('creatornewroleid')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/creatornewroleid.html">creatornewroleid</a>);
<a name="l3236"><span class="linenum">3236</span></a>          }
<a name="l3237"><span class="linenum">3237</span></a>  
<a name="l3238"><span class="linenum">3238</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l3239"><span class="linenum">3239</span></a>  
<a name="l3240"><span class="linenum">3240</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l3241"><span class="linenum">3241</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('name')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, true, array('context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l3242"><span class="linenum">3242</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('url')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/url.html">url</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>.'/course/view.php?id=' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3243"><span class="linenum">3243</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify')" href="../_functions/notify.html" onMouseOver="funcPopup(event,'notify')">notify</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, 'courserequestapproved', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courseapprovedsubject'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courseapprovedemail2', 'moodle', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>));
<a name="l3244"><span class="linenum">3244</span></a>  
<a name="l3245"><span class="linenum">3245</span></a>          return <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3246"><span class="linenum">3246</span></a>      }
<a name="l3247"><span class="linenum">3247</span></a>  
<a name="l3248"><span class="linenum">3248</span></a>      <span class="comment">/**</span>
<a name="l3249"><span class="linenum">3249</span></a>  <span class="comment">     * Reject a course request</span>
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment">     *</span>
<a name="l3251"><span class="linenum">3251</span></a>  <span class="comment">     * This function rejects a course request, emailing the requesting user the</span>
<a name="l3252"><span class="linenum">3252</span></a>  <span class="comment">     * provided notice and then removing the request from the database</span>
<a name="l3253"><span class="linenum">3253</span></a>  <span class="comment">     *</span>
<a name="l3254"><span class="linenum">3254</span></a>  <span class="comment">     * @param string $notice The message to display to the user</span>
<a name="l3255"><span class="linenum">3255</span></a>  <span class="comment">     */</span>
<a name="l3256"><span class="linenum">3256</span></a>      public function <a class="function" onClick="logFunction('reject')" href="../_functions/reject.html" onMouseOver="funcPopup(event,'reject')">reject</a>(<a class="var it2710" onMouseOver="hilite(2710)" onMouseOut="lolite()" onClick="logVariable('notice')" href="../_variables/notice.html">$notice</a>) {
<a name="l3257"><span class="linenum">3257</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3258"><span class="linenum">3258</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;requester), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3259"><span class="linenum">3259</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify')" href="../_functions/notify.html" onMouseOver="funcPopup(event,'notify')">notify</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, 'courserequestrejected', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courserejectsubject'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courserejectemail', 'moodle', <a class="var it2710" onMouseOver="hilite(2710)" onMouseOut="lolite()" onClick="logVariable('notice')" href="../_variables/notice.html">$notice</a>));
<a name="l3260"><span class="linenum">3260</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l3261"><span class="linenum">3261</span></a>      }
<a name="l3262"><span class="linenum">3262</span></a>  
<a name="l3263"><span class="linenum">3263</span></a>      <span class="comment">/**</span>
<a name="l3264"><span class="linenum">3264</span></a>  <span class="comment">     * Deletes the course request and any associated files</span>
<a name="l3265"><span class="linenum">3265</span></a>  <span class="comment">     */</span>
<a name="l3266"><span class="linenum">3266</span></a>      public function <a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>() {
<a name="l3267"><span class="linenum">3267</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3268"><span class="linenum">3268</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_request', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l3269"><span class="linenum">3269</span></a>      }
<a name="l3270"><span class="linenum">3270</span></a>  
<a name="l3271"><span class="linenum">3271</span></a>      <span class="comment">/**</span>
<a name="l3272"><span class="linenum">3272</span></a>  <span class="comment">     * Send a message from one user to another using events_trigger</span>
<a name="l3273"><span class="linenum">3273</span></a>  <span class="comment">     *</span>
<a name="l3274"><span class="linenum">3274</span></a>  <span class="comment">     * @param object $touser</span>
<a name="l3275"><span class="linenum">3275</span></a>  <span class="comment">     * @param object $fromuser</span>
<a name="l3276"><span class="linenum">3276</span></a>  <span class="comment">     * @param string $name</span>
<a name="l3277"><span class="linenum">3277</span></a>  <span class="comment">     * @param string $subject</span>
<a name="l3278"><span class="linenum">3278</span></a>  <span class="comment">     * @param string $message</span>
<a name="l3279"><span class="linenum">3279</span></a>  <span class="comment">     */</span>
<a name="l3280"><span class="linenum">3280</span></a>      protected function <a class="function" onClick="logFunction('notify')" href="../_functions/notify.html" onMouseOver="funcPopup(event,'notify')">notify</a>(<a class="var it35269" onMouseOver="hilite(35269)" onMouseOut="lolite()" onClick="logVariable('touser')" href="../_variables/touser.html">$touser</a>, <a class="var it35270" onMouseOver="hilite(35270)" onMouseOut="lolite()" onClick="logVariable('fromuser')" href="../_variables/fromuser.html">$fromuser</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>='courserequested', <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>) {
<a name="l3281"><span class="linenum">3281</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l3282"><span class="linenum">3282</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/component.html">component</a>         = 'moodle';
<a name="l3283"><span class="linenum">3283</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/name.html">name</a>              = <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l3284"><span class="linenum">3284</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/userfrom.html">userfrom</a>          = <a class="var it35270" onMouseOver="hilite(35270)" onMouseOut="lolite()" onClick="logVariable('fromuser')" href="../_variables/fromuser.html">$fromuser</a>;
<a name="l3285"><span class="linenum">3285</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/userto.html">userto</a>            = <a class="var it35269" onMouseOver="hilite(35269)" onMouseOut="lolite()" onClick="logVariable('touser')" href="../_variables/touser.html">$touser</a>;
<a name="l3286"><span class="linenum">3286</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/subject.html">subject</a>           = <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>;
<a name="l3287"><span class="linenum">3287</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/fullmessage.html">fullmessage</a>       = <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>;
<a name="l3288"><span class="linenum">3288</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/fullmessageformat.html">fullmessageformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l3289"><span class="linenum">3289</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/fullmessagehtml.html">fullmessagehtml</a>   = '';
<a name="l3290"><span class="linenum">3290</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/smallmessage.html">smallmessage</a>      = '';
<a name="l3291"><span class="linenum">3291</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/notification.html">notification</a>      = 1;
<a name="l3292"><span class="linenum">3292</span></a>          <a class="function" onClick="logFunction('message_send')" href="../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>);
<a name="l3293"><span class="linenum">3293</span></a>      }
<a name="l3294"><span class="linenum">3294</span></a>  }
<a name="l3295"><span class="linenum">3295</span></a>  
<a name="l3296"><span class="linenum">3296</span></a>  <span class="comment">/**</span>
<a name="l3297"><span class="linenum">3297</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l3298"><span class="linenum">3298</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l3299"><span class="linenum">3299</span></a>  <span class="comment"> * @param context $parentcontext Block's parent context</span>
<a name="l3300"><span class="linenum">3300</span></a>  <span class="comment"> * @param context $currentcontext Current context of block</span>
<a name="l3301"><span class="linenum">3301</span></a>  <span class="comment"> * @return array array of page types</span>
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment"> */</span>
<a name="l3303"><span class="linenum">3303</span></a>  function <a class="function" onClick="logFunction('course_page_type_list')" href="../_functions/course_page_type_list.html" onMouseOver="funcPopup(event,'course_page_type_list')">course_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l3304"><span class="linenum">3304</span></a>      if (<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> === 'course-index' || <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> === 'course-index-category') {
<a name="l3305"><span class="linenum">3305</span></a>  <span class="comment">        // For courses and categories browsing pages (/course/index.php) add option to show on ANY category page</span>
<a name="l3306"><span class="linenum">3306</span></a>          <a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a> = array('*' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype'),
<a name="l3307"><span class="linenum">3307</span></a>              'course-index-*' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-course-index-x', 'pagetype'),
<a name="l3308"><span class="linenum">3308</span></a>          );
<a name="l3309"><span class="linenum">3309</span></a>      } else if (<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> &amp;&amp; (!(<a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>(false)) || <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it43118" onMouseOver="hilite(43118)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>)) {
<a name="l3310"><span class="linenum">3310</span></a>  <span class="comment">        // We know for sure that despite pagetype starts with 'course-' this is not a page in course context (i.e. /course/search.php, etc.)</span>
<a name="l3311"><span class="linenum">3311</span></a>          <a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a> = array('*' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype'));
<a name="l3312"><span class="linenum">3312</span></a>      } else {
<a name="l3313"><span class="linenum">3313</span></a>  <span class="comment">        // Otherwise consider it a page inside a course even if $currentcontext is null</span>
<a name="l3314"><span class="linenum">3314</span></a>          <a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a> = array('*' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype'),
<a name="l3315"><span class="linenum">3315</span></a>              'course-*' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-course-x', 'pagetype'),
<a name="l3316"><span class="linenum">3316</span></a>              'course-view-*' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-course-view-x', 'pagetype')
<a name="l3317"><span class="linenum">3317</span></a>          );
<a name="l3318"><span class="linenum">3318</span></a>      }
<a name="l3319"><span class="linenum">3319</span></a>      return <a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a>;
<a name="l3320"><span class="linenum">3320</span></a>  }
<a name="l3321"><span class="linenum">3321</span></a>  
<a name="l3322"><span class="linenum">3322</span></a>  <span class="comment">/**</span>
<a name="l3323"><span class="linenum">3323</span></a>  <span class="comment"> * Determine whether course ajax should be enabled for the specified course</span>
<a name="l3324"><span class="linenum">3324</span></a>  <span class="comment"> *</span>
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment"> * @param stdClass $course The course to test against</span>
<a name="l3326"><span class="linenum">3326</span></a>  <span class="comment"> * @return boolean Whether course ajax is enabled or note</span>
<a name="l3327"><span class="linenum">3327</span></a>  <span class="comment"> */</span>
<a name="l3328"><span class="linenum">3328</span></a>  function <a class="function" onClick="logFunction('course_ajax_enabled')" href="../_functions/course_ajax_enabled.html" onMouseOver="funcPopup(event,'course_ajax_enabled')">course_ajax_enabled</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l3329"><span class="linenum">3329</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l3330"><span class="linenum">3330</span></a>  
<a name="l3331"><span class="linenum">3331</span></a>  <span class="comment">    // The user must be editing for AJAX to be included</span>
<a name="l3332"><span class="linenum">3332</span></a>      if (!<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>()) {
<a name="l3333"><span class="linenum">3333</span></a>          return false;
<a name="l3334"><span class="linenum">3334</span></a>      }
<a name="l3335"><span class="linenum">3335</span></a>  
<a name="l3336"><span class="linenum">3336</span></a>  <span class="comment">    // Check that the theme suports</span>
<a name="l3337"><span class="linenum">3337</span></a>      if (!<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('theme')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>-&gt;enablecourseajax) {
<a name="l3338"><span class="linenum">3338</span></a>          return false;
<a name="l3339"><span class="linenum">3339</span></a>      }
<a name="l3340"><span class="linenum">3340</span></a>  
<a name="l3341"><span class="linenum">3341</span></a>  <span class="comment">    // Check that the course format supports ajax functionality</span>
<a name="l3342"><span class="linenum">3342</span></a>  <span class="comment">    // The site 'format' doesn't have information on course format support</span>
<a name="l3343"><span class="linenum">3343</span></a>      if (<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a> !== <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l3344"><span class="linenum">3344</span></a>          <a class="var it35271" onMouseOver="hilite(35271)" onMouseOut="lolite()" onClick="logVariable('courseformatajaxsupport')" href="../_variables/courseformatajaxsupport.html">$courseformatajaxsupport</a> = <a class="function" onClick="logFunction('course_format_ajax_support')" href="../_functions/course_format_ajax_support.html" onMouseOver="funcPopup(event,'course_format_ajax_support')">course_format_ajax_support</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>);
<a name="l3345"><span class="linenum">3345</span></a>          if (!<a class="var it35271" onMouseOver="hilite(35271)" onMouseOut="lolite()" onClick="logVariable('courseformatajaxsupport')" href="../_variables/courseformatajaxsupport.html">$courseformatajaxsupport</a>-&gt;<a onClick="logVariable('capable')" class="var it45109" onMouseOver="hilite(45109)" onMouseOut="lolite()" href="../_variables/capable.html">capable</a>) {
<a name="l3346"><span class="linenum">3346</span></a>              return false;
<a name="l3347"><span class="linenum">3347</span></a>          }
<a name="l3348"><span class="linenum">3348</span></a>      }
<a name="l3349"><span class="linenum">3349</span></a>  
<a name="l3350"><span class="linenum">3350</span></a>  <span class="comment">    // All conditions have been met so course ajax should be enabled</span>
<a name="l3351"><span class="linenum">3351</span></a>      return true;
<a name="l3352"><span class="linenum">3352</span></a>  }
<a name="l3353"><span class="linenum">3353</span></a>  
<a name="l3354"><span class="linenum">3354</span></a>  <span class="comment">/**</span>
<a name="l3355"><span class="linenum">3355</span></a>  <span class="comment"> * Include the relevant javascript and language strings for the resource</span>
<a name="l3356"><span class="linenum">3356</span></a>  <span class="comment"> * toolbox YUI module</span>
<a name="l3357"><span class="linenum">3357</span></a>  <span class="comment"> *</span>
<a name="l3358"><span class="linenum">3358</span></a>  <span class="comment"> * @param integer $id The ID of the course being applied to</span>
<a name="l3359"><span class="linenum">3359</span></a>  <span class="comment"> * @param array $usedmodules An array containing the names of the modules in use on the page</span>
<a name="l3360"><span class="linenum">3360</span></a>  <span class="comment"> * @param array $enabledmodules An array containing the names of the enabled (visible) modules on this site</span>
<a name="l3361"><span class="linenum">3361</span></a>  <span class="comment"> * @param stdClass $config An object containing configuration parameters for ajax modules including:</span>
<a name="l3362"><span class="linenum">3362</span></a>  <span class="comment"> *          * resourceurl   The URL to post changes to for resource changes</span>
<a name="l3363"><span class="linenum">3363</span></a>  <span class="comment"> *          * sectionurl    The URL to post changes to for section changes</span>
<a name="l3364"><span class="linenum">3364</span></a>  <span class="comment"> *          * pageparams    Additional parameters to pass through in the post</span>
<a name="l3365"><span class="linenum">3365</span></a>  <span class="comment"> * @return bool</span>
<a name="l3366"><span class="linenum">3366</span></a>  <span class="comment"> */</span>
<a name="l3367"><span class="linenum">3367</span></a>  function <a class="function" onClick="logFunction('include_course_ajax')" href="../_functions/include_course_ajax.html" onMouseOver="funcPopup(event,'include_course_ajax')">include_course_ajax</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it35272" onMouseOver="hilite(35272)" onMouseOut="lolite()" onClick="logVariable('usedmodules')" href="../_variables/usedmodules.html">$usedmodules</a> = array(), <a class="var it35273" onMouseOver="hilite(35273)" onMouseOut="lolite()" onClick="logVariable('enabledmodules')" href="../_variables/enabledmodules.html">$enabledmodules</a> = null, <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = null) {
<a name="l3368"><span class="linenum">3368</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l3369"><span class="linenum">3369</span></a>  
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment">    // Ensure that ajax should be included</span>
<a name="l3371"><span class="linenum">3371</span></a>      if (!<a class="function" onClick="logFunction('course_ajax_enabled')" href="../_functions/course_ajax_enabled.html" onMouseOver="funcPopup(event,'course_ajax_enabled')">course_ajax_enabled</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l3372"><span class="linenum">3372</span></a>          return false;
<a name="l3373"><span class="linenum">3373</span></a>      }
<a name="l3374"><span class="linenum">3374</span></a>  
<a name="l3375"><span class="linenum">3375</span></a>      if (!<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>) {
<a name="l3376"><span class="linenum">3376</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = new stdClass();
<a name="l3377"><span class="linenum">3377</span></a>      }
<a name="l3378"><span class="linenum">3378</span></a>  
<a name="l3379"><span class="linenum">3379</span></a>  <span class="comment">    // The URL to use for resource changes</span>
<a name="l3380"><span class="linenum">3380</span></a>      if (!isset(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('resourceurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/resourceurl.html">resourceurl</a>)) {
<a name="l3381"><span class="linenum">3381</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('resourceurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/resourceurl.html">resourceurl</a> = '<a class="filename" href="../course/rest.php.html">/course/rest.php</a>';
<a name="l3382"><span class="linenum">3382</span></a>      }
<a name="l3383"><span class="linenum">3383</span></a>  
<a name="l3384"><span class="linenum">3384</span></a>  <span class="comment">    // The URL to use for section changes</span>
<a name="l3385"><span class="linenum">3385</span></a>      if (!isset(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('sectionurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/sectionurl.html">sectionurl</a>)) {
<a name="l3386"><span class="linenum">3386</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('sectionurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/sectionurl.html">sectionurl</a> = '<a class="filename" href="../course/rest.php.html">/course/rest.php</a>';
<a name="l3387"><span class="linenum">3387</span></a>      }
<a name="l3388"><span class="linenum">3388</span></a>  
<a name="l3389"><span class="linenum">3389</span></a>  <span class="comment">    // Any additional parameters which need to be included on page submission</span>
<a name="l3390"><span class="linenum">3390</span></a>      if (!isset(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('pageparams')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/pageparams.html">pageparams</a>)) {
<a name="l3391"><span class="linenum">3391</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('pageparams')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/pageparams.html">pageparams</a> = array();
<a name="l3392"><span class="linenum">3392</span></a>      }
<a name="l3393"><span class="linenum">3393</span></a>  
<a name="l3394"><span class="linenum">3394</span></a>  <span class="comment">    // Include toolboxes</span>
<a name="l3395"><span class="linenum">3395</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-course-toolboxes',
<a name="l3396"><span class="linenum">3396</span></a>              'M.course.init_resource_toolbox',
<a name="l3397"><span class="linenum">3397</span></a>              array(array(
<a name="l3398"><span class="linenum">3398</span></a>                  'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3399"><span class="linenum">3399</span></a>                  'ajaxurl' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('resourceurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/resourceurl.html">resourceurl</a>,
<a name="l3400"><span class="linenum">3400</span></a>                  'config' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>,
<a name="l3401"><span class="linenum">3401</span></a>              ))
<a name="l3402"><span class="linenum">3402</span></a>      );
<a name="l3403"><span class="linenum">3403</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-course-toolboxes',
<a name="l3404"><span class="linenum">3404</span></a>              'M.course.init_section_toolbox',
<a name="l3405"><span class="linenum">3405</span></a>              array(array(
<a name="l3406"><span class="linenum">3406</span></a>                  'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3407"><span class="linenum">3407</span></a>                  'format' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>,
<a name="l3408"><span class="linenum">3408</span></a>                  'ajaxurl' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('sectionurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/sectionurl.html">sectionurl</a>,
<a name="l3409"><span class="linenum">3409</span></a>                  'config' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>,
<a name="l3410"><span class="linenum">3410</span></a>              ))
<a name="l3411"><span class="linenum">3411</span></a>      );
<a name="l3412"><span class="linenum">3412</span></a>  
<a name="l3413"><span class="linenum">3413</span></a>  <span class="comment">    // Include course dragdrop</span>
<a name="l3414"><span class="linenum">3414</span></a>      if (<a class="function" onClick="logFunction('course_format_uses_sections')" href="../_functions/course_format_uses_sections.html" onMouseOver="funcPopup(event,'course_format_uses_sections')">course_format_uses_sections</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>)) {
<a name="l3415"><span class="linenum">3415</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-course-dragdrop', 'M.course.init_section_dragdrop',
<a name="l3416"><span class="linenum">3416</span></a>              array(array(
<a name="l3417"><span class="linenum">3417</span></a>                  'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3418"><span class="linenum">3418</span></a>                  'ajaxurl' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('sectionurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/sectionurl.html">sectionurl</a>,
<a name="l3419"><span class="linenum">3419</span></a>                  'config' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>,
<a name="l3420"><span class="linenum">3420</span></a>              )), null, true);
<a name="l3421"><span class="linenum">3421</span></a>  
<a name="l3422"><span class="linenum">3422</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-course-dragdrop', 'M.course.init_resource_dragdrop',
<a name="l3423"><span class="linenum">3423</span></a>              array(array(
<a name="l3424"><span class="linenum">3424</span></a>                  'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3425"><span class="linenum">3425</span></a>                  'ajaxurl' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('resourceurl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/resourceurl.html">resourceurl</a>,
<a name="l3426"><span class="linenum">3426</span></a>                  'config' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>,
<a name="l3427"><span class="linenum">3427</span></a>              )), null, true);
<a name="l3428"><span class="linenum">3428</span></a>      }
<a name="l3429"><span class="linenum">3429</span></a>  
<a name="l3430"><span class="linenum">3430</span></a>  <span class="comment">    // Require various strings for the command toolbox</span>
<a name="l3431"><span class="linenum">3431</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array(
<a name="l3432"><span class="linenum">3432</span></a>              'moveleft',
<a name="l3433"><span class="linenum">3433</span></a>              'deletechecktype',
<a name="l3434"><span class="linenum">3434</span></a>              'deletechecktypename',
<a name="l3435"><span class="linenum">3435</span></a>              'edittitle',
<a name="l3436"><span class="linenum">3436</span></a>              'edittitleinstructions',
<a name="l3437"><span class="linenum">3437</span></a>              'show',
<a name="l3438"><span class="linenum">3438</span></a>              'hide',
<a name="l3439"><span class="linenum">3439</span></a>              'highlight',
<a name="l3440"><span class="linenum">3440</span></a>              'highlightoff',
<a name="l3441"><span class="linenum">3441</span></a>              'groupsnone',
<a name="l3442"><span class="linenum">3442</span></a>              'groupsvisible',
<a name="l3443"><span class="linenum">3443</span></a>              'groupsseparate',
<a name="l3444"><span class="linenum">3444</span></a>              'clicktochangeinbrackets',
<a name="l3445"><span class="linenum">3445</span></a>              'markthistopic',
<a name="l3446"><span class="linenum">3446</span></a>              'markedthistopic',
<a name="l3447"><span class="linenum">3447</span></a>              'movesection',
<a name="l3448"><span class="linenum">3448</span></a>              'movecoursemodule',
<a name="l3449"><span class="linenum">3449</span></a>              'movecoursesection',
<a name="l3450"><span class="linenum">3450</span></a>              'movecontent',
<a name="l3451"><span class="linenum">3451</span></a>              'tocontent',
<a name="l3452"><span class="linenum">3452</span></a>              'emptydragdropregion',
<a name="l3453"><span class="linenum">3453</span></a>              'afterresource',
<a name="l3454"><span class="linenum">3454</span></a>              'aftersection',
<a name="l3455"><span class="linenum">3455</span></a>              'totopofsection',
<a name="l3456"><span class="linenum">3456</span></a>          ), 'moodle');
<a name="l3457"><span class="linenum">3457</span></a>  
<a name="l3458"><span class="linenum">3458</span></a>  <span class="comment">    // Include section-specific strings for formats which support sections.</span>
<a name="l3459"><span class="linenum">3459</span></a>      if (<a class="function" onClick="logFunction('course_format_uses_sections')" href="../_functions/course_format_uses_sections.html" onMouseOver="funcPopup(event,'course_format_uses_sections')">course_format_uses_sections</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>)) {
<a name="l3460"><span class="linenum">3460</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array(
<a name="l3461"><span class="linenum">3461</span></a>                  'showfromothers',
<a name="l3462"><span class="linenum">3462</span></a>                  'hidefromothers',
<a name="l3463"><span class="linenum">3463</span></a>              ), 'format_' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>);
<a name="l3464"><span class="linenum">3464</span></a>      }
<a name="l3465"><span class="linenum">3465</span></a>  
<a name="l3466"><span class="linenum">3466</span></a>  <span class="comment">    // For confirming resource deletion we need the name of the module in question</span>
<a name="l3467"><span class="linenum">3467</span></a>      foreach (<a class="var it35272" onMouseOver="hilite(35272)" onMouseOut="lolite()" onClick="logVariable('usedmodules')" href="../_variables/usedmodules.html">$usedmodules</a> as <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> =&gt; <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l3468"><span class="linenum">3468</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('pluginname', <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l3469"><span class="linenum">3469</span></a>      }
<a name="l3470"><span class="linenum">3470</span></a>  
<a name="l3471"><span class="linenum">3471</span></a>  <span class="comment">    // Load drag and drop upload AJAX.</span>
<a name="l3472"><span class="linenum">3472</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/dnduploadlib.php.html">/course/dnduploadlib.php</a>');
<a name="l3473"><span class="linenum">3473</span></a>      <a class="function" onClick="logFunction('dndupload_add_to_course')" href="../_functions/dndupload_add_to_course.html" onMouseOver="funcPopup(event,'dndupload_add_to_course')">dndupload_add_to_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it35273" onMouseOver="hilite(35273)" onMouseOut="lolite()" onClick="logVariable('enabledmodules')" href="../_variables/enabledmodules.html">$enabledmodules</a>);
<a name="l3474"><span class="linenum">3474</span></a>  
<a name="l3475"><span class="linenum">3475</span></a>      return true;
<a name="l3476"><span class="linenum">3476</span></a>  }
<a name="l3477"><span class="linenum">3477</span></a>  
<a name="l3478"><span class="linenum">3478</span></a>  <span class="comment">/**</span>
<a name="l3479"><span class="linenum">3479</span></a>  <span class="comment"> * Returns the sorted list of available course formats, filtered by enabled if necessary</span>
<a name="l3480"><span class="linenum">3480</span></a>  <span class="comment"> *</span>
<a name="l3481"><span class="linenum">3481</span></a>  <span class="comment"> * @param bool $enabledonly return only formats that are enabled</span>
<a name="l3482"><span class="linenum">3482</span></a>  <span class="comment"> * @return array array of sorted format names</span>
<a name="l3483"><span class="linenum">3483</span></a>  <span class="comment"> */</span>
<a name="l3484"><span class="linenum">3484</span></a>  function <a class="function" onClick="logFunction('get_sorted_course_formats')" href="../_functions/get_sorted_course_formats.html" onMouseOver="funcPopup(event,'get_sorted_course_formats')">get_sorted_course_formats</a>(<a class="var it9259" onMouseOver="hilite(9259)" onMouseOut="lolite()" onClick="logVariable('enabledonly')" href="../_variables/enabledonly.html">$enabledonly</a> = false) {
<a name="l3485"><span class="linenum">3485</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3486"><span class="linenum">3486</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('format');
<a name="l3487"><span class="linenum">3487</span></a>  
<a name="l3488"><span class="linenum">3488</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('format_plugins_sortorder')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/format_plugins_sortorder.html">format_plugins_sortorder</a>)) {
<a name="l3489"><span class="linenum">3489</span></a>          <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('format_plugins_sortorder')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/format_plugins_sortorder.html">format_plugins_sortorder</a>);
<a name="l3490"><span class="linenum">3490</span></a>          <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="phpfunction" onClick="logFunction('array_intersect')" href="../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>)),
<a name="l3491"><span class="linenum">3491</span></a>                      <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>), <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>));
<a name="l3492"><span class="linenum">3492</span></a>      } else {
<a name="l3493"><span class="linenum">3493</span></a>          <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>);
<a name="l3494"><span class="linenum">3494</span></a>      }
<a name="l3495"><span class="linenum">3495</span></a>      if (!<a class="var it9259" onMouseOver="hilite(9259)" onMouseOut="lolite()" onClick="logVariable('enabledonly')" href="../_variables/enabledonly.html">$enabledonly</a>) {
<a name="l3496"><span class="linenum">3496</span></a>          return <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>;
<a name="l3497"><span class="linenum">3497</span></a>      }
<a name="l3498"><span class="linenum">3498</span></a>      <a class="var it16355" onMouseOver="hilite(16355)" onMouseOut="lolite()" onClick="logVariable('sortedformats')" href="../_variables/sortedformats.html">$sortedformats</a> = array();
<a name="l3499"><span class="linenum">3499</span></a>      foreach (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a> as <a class="var it5873" onMouseOver="hilite(5873)" onMouseOut="lolite()" onClick="logVariable('formatname')" href="../_variables/formatname.html">$formatname</a>) {
<a name="l3500"><span class="linenum">3500</span></a>          if (!<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('format_'.<a class="var it5873" onMouseOver="hilite(5873)" onMouseOut="lolite()" onClick="logVariable('formatname')" href="../_variables/formatname.html">$formatname</a>, 'disabled')) {
<a name="l3501"><span class="linenum">3501</span></a>              <a class="var it16355" onMouseOver="hilite(16355)" onMouseOut="lolite()" onClick="logVariable('sortedformats')" href="../_variables/sortedformats.html">$sortedformats</a>[] = <a class="var it5873" onMouseOver="hilite(5873)" onMouseOut="lolite()" onClick="logVariable('formatname')" href="../_variables/formatname.html">$formatname</a>;
<a name="l3502"><span class="linenum">3502</span></a>          }
<a name="l3503"><span class="linenum">3503</span></a>      }
<a name="l3504"><span class="linenum">3504</span></a>      return <a class="var it16355" onMouseOver="hilite(16355)" onMouseOut="lolite()" onClick="logVariable('sortedformats')" href="../_variables/sortedformats.html">$sortedformats</a>;
<a name="l3505"><span class="linenum">3505</span></a>  }
<a name="l3506"><span class="linenum">3506</span></a>  
<a name="l3507"><span class="linenum">3507</span></a>  <span class="comment">/**</span>
<a name="l3508"><span class="linenum">3508</span></a>  <span class="comment"> * The URL to use for the specified course (with section)</span>
<a name="l3509"><span class="linenum">3509</span></a>  <span class="comment"> *</span>
<a name="l3510"><span class="linenum">3510</span></a>  <span class="comment"> * @param int|stdClass $courseorid The course to get the section name for (either object or just course id)</span>
<a name="l3511"><span class="linenum">3511</span></a>  <span class="comment"> * @param int|stdClass $section Section object from database or just field course_sections.section</span>
<a name="l3512"><span class="linenum">3512</span></a>  <span class="comment"> *     if omitted the course view page is returned</span>
<a name="l3513"><span class="linenum">3513</span></a>  <span class="comment"> * @param array $options options for view URL. At the moment core uses:</span>
<a name="l3514"><span class="linenum">3514</span></a>  <span class="comment"> *     'navigation' (bool) if true and section has no separate page, the function returns null</span>
<a name="l3515"><span class="linenum">3515</span></a>  <span class="comment"> *     'sr' (int) used by multipage formats to specify to which section to return</span>
<a name="l3516"><span class="linenum">3516</span></a>  <span class="comment"> * @return moodle_url The url of course</span>
<a name="l3517"><span class="linenum">3517</span></a>  <span class="comment"> */</span>
<a name="l3518"><span class="linenum">3518</span></a>  function <a class="function" onClick="logFunction('course_get_url')" href="../_functions/course_get_url.html" onMouseOver="funcPopup(event,'course_get_url')">course_get_url</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = null, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l3519"><span class="linenum">3519</span></a>      return <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)-&gt;<a class="function" onClick="logFunction('get_view_url')" href="../_functions/get_view_url.html" onMouseOver="funcPopup(event,'get_view_url')">get_view_url</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l3520"><span class="linenum">3520</span></a>  }
<a name="l3521"><span class="linenum">3521</span></a>  
<a name="l3522"><span class="linenum">3522</span></a>  <span class="comment">/**</span>
<a name="l3523"><span class="linenum">3523</span></a>  <span class="comment"> * Create a module.</span>
<a name="l3524"><span class="linenum">3524</span></a>  <span class="comment"> *</span>
<a name="l3525"><span class="linenum">3525</span></a>  <span class="comment"> * It includes:</span>
<a name="l3526"><span class="linenum">3526</span></a>  <span class="comment"> *      - capability checks and other checks</span>
<a name="l3527"><span class="linenum">3527</span></a>  <span class="comment"> *      - create the module from the module info</span>
<a name="l3528"><span class="linenum">3528</span></a>  <span class="comment"> *</span>
<a name="l3529"><span class="linenum">3529</span></a>  <span class="comment"> * @param object $module</span>
<a name="l3530"><span class="linenum">3530</span></a>  <span class="comment"> * @return object the created module info</span>
<a name="l3531"><span class="linenum">3531</span></a>  <span class="comment"> * @throws moodle_exception if user is not allowed to perform the action or module is not allowed in this course</span>
<a name="l3532"><span class="linenum">3532</span></a>  <span class="comment"> */</span>
<a name="l3533"><span class="linenum">3533</span></a>  function <a class="function" onClick="logFunction('create_module')" href="../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>(<a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>) {
<a name="l3534"><span class="linenum">3534</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3535"><span class="linenum">3535</span></a>  
<a name="l3536"><span class="linenum">3536</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../course/modlib.php.html">/course/modlib.php</a>');
<a name="l3537"><span class="linenum">3537</span></a>  
<a name="l3538"><span class="linenum">3538</span></a>  <span class="comment">    // Check manadatory attributs.</span>
<a name="l3539"><span class="linenum">3539</span></a>      <a class="var it21826" onMouseOver="hilite(21826)" onMouseOut="lolite()" onClick="logVariable('mandatoryfields')" href="../_variables/mandatoryfields.html">$mandatoryfields</a> = array('modulename', 'course', 'section', 'visible');
<a name="l3540"><span class="linenum">3540</span></a>      if (<a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('modulename')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>, <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>, true)) {
<a name="l3541"><span class="linenum">3541</span></a>          <a class="var it21826" onMouseOver="hilite(21826)" onMouseOut="lolite()" onClick="logVariable('mandatoryfields')" href="../_variables/mandatoryfields.html">$mandatoryfields</a>[] = 'introeditor';
<a name="l3542"><span class="linenum">3542</span></a>      }
<a name="l3543"><span class="linenum">3543</span></a>      foreach(<a class="var it21826" onMouseOver="hilite(21826)" onMouseOut="lolite()" onClick="logVariable('mandatoryfields')" href="../_variables/mandatoryfields.html">$mandatoryfields</a> as <a class="var it35277" onMouseOver="hilite(35277)" onMouseOut="lolite()" onClick="logVariable('mandatoryfield')" href="../_variables/mandatoryfield.html">$mandatoryfield</a>) {
<a name="l3544"><span class="linenum">3544</span></a>          if (!isset(<a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;{<a class="var it35277" onMouseOver="hilite(35277)" onMouseOut="lolite()" onClick="logVariable('mandatoryfield')" href="../_variables/mandatoryfield.html">$mandatoryfield</a>})) {
<a name="l3545"><span class="linenum">3545</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('createmodulemissingattribut', '', '', <a class="var it35277" onMouseOver="hilite(35277)" onMouseOut="lolite()" onClick="logVariable('mandatoryfield')" href="../_variables/mandatoryfield.html">$mandatoryfield</a>);
<a name="l3546"><span class="linenum">3546</span></a>          }
<a name="l3547"><span class="linenum">3547</span></a>      }
<a name="l3548"><span class="linenum">3548</span></a>  
<a name="l3549"><span class="linenum">3549</span></a>  <span class="comment">    // Some additional checks (capability / existing instances).</span>
<a name="l3550"><span class="linenum">3550</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('course')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3551"><span class="linenum">3551</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>) = <a class="function" onClick="logFunction('can_add_moduleinfo')" href="../_functions/can_add_moduleinfo.html" onMouseOver="funcPopup(event,'can_add_moduleinfo')">can_add_moduleinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('modulename')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>, <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('section')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/section.html">section</a>);
<a name="l3552"><span class="linenum">3552</span></a>  
<a name="l3553"><span class="linenum">3553</span></a>  <span class="comment">    // Add the module.</span>
<a name="l3554"><span class="linenum">3554</span></a>      <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('module')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/module.html">module</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3555"><span class="linenum">3555</span></a>      <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a> = <a class="function" onClick="logFunction('add_moduleinfo')" href="../_functions/add_moduleinfo.html" onMouseOver="funcPopup(event,'add_moduleinfo')">add_moduleinfo</a>(<a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null);
<a name="l3556"><span class="linenum">3556</span></a>  
<a name="l3557"><span class="linenum">3557</span></a>      return <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>;
<a name="l3558"><span class="linenum">3558</span></a>  }
<a name="l3559"><span class="linenum">3559</span></a>  
<a name="l3560"><span class="linenum">3560</span></a>  <span class="comment">/**</span>
<a name="l3561"><span class="linenum">3561</span></a>  <span class="comment"> * Update a module.</span>
<a name="l3562"><span class="linenum">3562</span></a>  <span class="comment"> *</span>
<a name="l3563"><span class="linenum">3563</span></a>  <span class="comment"> * It includes:</span>
<a name="l3564"><span class="linenum">3564</span></a>  <span class="comment"> *      - capability and other checks</span>
<a name="l3565"><span class="linenum">3565</span></a>  <span class="comment"> *      - update the module</span>
<a name="l3566"><span class="linenum">3566</span></a>  <span class="comment"> *</span>
<a name="l3567"><span class="linenum">3567</span></a>  <span class="comment"> * @param object $module</span>
<a name="l3568"><span class="linenum">3568</span></a>  <span class="comment"> * @return object the updated module info</span>
<a name="l3569"><span class="linenum">3569</span></a>  <span class="comment"> * @throws moodle_exception if current user is not allowed to update the module</span>
<a name="l3570"><span class="linenum">3570</span></a>  <span class="comment"> */</span>
<a name="l3571"><span class="linenum">3571</span></a>  function <a class="function" onClick="logFunction('update_module')" href="../_functions/update_module.html" onMouseOver="funcPopup(event,'update_module')">update_module</a>(<a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>) {
<a name="l3572"><span class="linenum">3572</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3573"><span class="linenum">3573</span></a>  
<a name="l3574"><span class="linenum">3574</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../course/modlib.php.html">/course/modlib.php</a>');
<a name="l3575"><span class="linenum">3575</span></a>  
<a name="l3576"><span class="linenum">3576</span></a>  <span class="comment">    // Check the course module exists.</span>
<a name="l3577"><span class="linenum">3577</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>('', <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/coursemodule.html">coursemodule</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3578"><span class="linenum">3578</span></a>  
<a name="l3579"><span class="linenum">3579</span></a>  <span class="comment">    // Check the course exists.</span>
<a name="l3580"><span class="linenum">3580</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3581"><span class="linenum">3581</span></a>  
<a name="l3582"><span class="linenum">3582</span></a>  <span class="comment">    // Some checks (capaibility / existing instances).</span>
<a name="l3583"><span class="linenum">3583</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('cw')" href="../_variables/cw.html">$cw</a>) = <a class="function" onClick="logFunction('can_update_moduleinfo')" href="../_functions/can_update_moduleinfo.html" onMouseOver="funcPopup(event,'can_update_moduleinfo')">can_update_moduleinfo</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l3584"><span class="linenum">3584</span></a>  
<a name="l3585"><span class="linenum">3585</span></a>  <span class="comment">    // Retrieve few information needed by update_moduleinfo.</span>
<a name="l3586"><span class="linenum">3586</span></a>      <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('modulename')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>;
<a name="l3587"><span class="linenum">3587</span></a>      if (!isset(<a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('scale')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/scale.html">scale</a>)) {
<a name="l3588"><span class="linenum">3588</span></a>          <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('scale')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/scale.html">scale</a> = 0;
<a name="l3589"><span class="linenum">3589</span></a>      }
<a name="l3590"><span class="linenum">3590</span></a>      <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>-&gt;<a onClick="logVariable('type')" class="var it43887" onMouseOver="hilite(43887)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = 'mod';
<a name="l3591"><span class="linenum">3591</span></a>  
<a name="l3592"><span class="linenum">3592</span></a>  <span class="comment">    // Update the module.</span>
<a name="l3593"><span class="linenum">3593</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>) = <a class="function" onClick="logFunction('update_moduleinfo')" href="../_functions/update_moduleinfo.html" onMouseOver="funcPopup(event,'update_moduleinfo')">update_moduleinfo</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null);
<a name="l3594"><span class="linenum">3594</span></a>  
<a name="l3595"><span class="linenum">3595</span></a>      return <a class="var it8913" onMouseOver="hilite(8913)" onMouseOut="lolite()" onClick="logVariable('moduleinfo')" href="../_variables/moduleinfo.html">$moduleinfo</a>;
<a name="l3596"><span class="linenum">3596</span></a>  }
<a name="l3597"><span class="linenum">3597</span></a>  
<a name="l3598"><span class="linenum">3598</span></a>  <span class="comment">/**</span>
<a name="l3599"><span class="linenum">3599</span></a>  <span class="comment"> * Duplicate a module on the course for ajax.</span>
<a name="l3600"><span class="linenum">3600</span></a>  <span class="comment"> *</span>
<a name="l3601"><span class="linenum">3601</span></a>  <span class="comment"> * @see mod_duplicate_module()</span>
<a name="l3602"><span class="linenum">3602</span></a>  <span class="comment"> * @param object $course The course</span>
<a name="l3603"><span class="linenum">3603</span></a>  <span class="comment"> * @param object $cm The course module to duplicate</span>
<a name="l3604"><span class="linenum">3604</span></a>  <span class="comment"> * @param int $sr The section to link back to (used for creating the links)</span>
<a name="l3605"><span class="linenum">3605</span></a>  <span class="comment"> * @throws moodle_exception if the plugin doesn't support duplication</span>
<a name="l3606"><span class="linenum">3606</span></a>  <span class="comment"> * @return Object containing:</span>
<a name="l3607"><span class="linenum">3607</span></a>  <span class="comment"> * - fullcontent: The HTML markup for the created CM</span>
<a name="l3608"><span class="linenum">3608</span></a>  <span class="comment"> * - cmid: The CMID of the newly created CM</span>
<a name="l3609"><span class="linenum">3609</span></a>  <span class="comment"> * - redirect: Whether to trigger a redirect following this change</span>
<a name="l3610"><span class="linenum">3610</span></a>  <span class="comment"> */</span>
<a name="l3611"><span class="linenum">3611</span></a>  function <a class="function" onClick="logFunction('mod_duplicate_activity')" href="../_functions/mod_duplicate_activity.html" onMouseOver="funcPopup(event,'mod_duplicate_activity')">mod_duplicate_activity</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a> = null) {
<a name="l3612"><span class="linenum">3612</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l3613"><span class="linenum">3613</span></a>  
<a name="l3614"><span class="linenum">3614</span></a>      <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a> = <a class="function" onClick="logFunction('duplicate_module')" href="../_functions/duplicate_module.html" onMouseOver="funcPopup(event,'duplicate_module')">duplicate_module</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l3615"><span class="linenum">3615</span></a>  
<a name="l3616"><span class="linenum">3616</span></a>      <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../_variables/resp.html">$resp</a> = new stdClass();
<a name="l3617"><span class="linenum">3617</span></a>      if (<a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>) {
<a name="l3618"><span class="linenum">3618</span></a>          <a class="var it4705" onMouseOver="hilite(4705)" onMouseOut="lolite()" onClick="logVariable('courserenderer')" href="../_variables/courserenderer.html">$courserenderer</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'course');
<a name="l3619"><span class="linenum">3619</span></a>          <a class="var it12965" onMouseOver="hilite(12965)" onMouseOut="lolite()" onClick="logVariable('completioninfo')" href="../_variables/completioninfo.html">$completioninfo</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3620"><span class="linenum">3620</span></a>          <a class="var it12966" onMouseOver="hilite(12966)" onMouseOut="lolite()" onClick="logVariable('modulehtml')" href="../_variables/modulehtml.html">$modulehtml</a> = <a class="var it4705" onMouseOver="hilite(4705)" onMouseOut="lolite()" onClick="logVariable('courserenderer')" href="../_variables/courserenderer.html">$courserenderer</a>-&gt;<a class="function" onClick="logFunction('course_section_cm')" href="../_functions/course_section_cm.html" onMouseOver="funcPopup(event,'course_section_cm')">course_section_cm</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it12965" onMouseOver="hilite(12965)" onMouseOut="lolite()" onClick="logVariable('completioninfo')" href="../_variables/completioninfo.html">$completioninfo</a>,
<a name="l3621"><span class="linenum">3621</span></a>                  <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>, null, array());
<a name="l3622"><span class="linenum">3622</span></a>  
<a name="l3623"><span class="linenum">3623</span></a>          <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../_variables/resp.html">$resp</a>-&gt;<a onClick="logVariable('fullcontent')" class="var it43386" onMouseOver="hilite(43386)" onMouseOut="lolite()" href="../_variables/fullcontent.html">fullcontent</a> = <a class="var it4705" onMouseOver="hilite(4705)" onMouseOut="lolite()" onClick="logVariable('courserenderer')" href="../_variables/courserenderer.html">$courserenderer</a>-&gt;<a class="function" onClick="logFunction('course_section_cm_list_item')" href="../_functions/course_section_cm_list_item.html" onMouseOver="funcPopup(event,'course_section_cm_list_item')">course_section_cm_list_item</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it12965" onMouseOver="hilite(12965)" onMouseOut="lolite()" onClick="logVariable('completioninfo')" href="../_variables/completioninfo.html">$completioninfo</a>, <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>, <a class="var it2713" onMouseOver="hilite(2713)" onMouseOut="lolite()" onClick="logVariable('sr')" href="../_variables/sr.html">$sr</a>);
<a name="l3624"><span class="linenum">3624</span></a>          <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../_variables/resp.html">$resp</a>-&gt;<a onClick="logVariable('cmid')" class="var it43386" onMouseOver="hilite(43386)" onMouseOut="lolite()" href="../_variables/cmid.html">cmid</a> = <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>-&gt;<a onClick="logVariable('id')" class="var it43923" onMouseOver="hilite(43923)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3625"><span class="linenum">3625</span></a>      } else {
<a name="l3626"><span class="linenum">3626</span></a>  <span class="comment">        // Trigger a redirect.</span>
<a name="l3627"><span class="linenum">3627</span></a>          <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../_variables/resp.html">$resp</a>-&gt;<a onClick="logVariable('redirect')" class="var it43386" onMouseOver="hilite(43386)" onMouseOut="lolite()" href="../_variables/redirect.html">redirect</a> = true;
<a name="l3628"><span class="linenum">3628</span></a>      }
<a name="l3629"><span class="linenum">3629</span></a>      return <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../_variables/resp.html">$resp</a>;
<a name="l3630"><span class="linenum">3630</span></a>  }
<a name="l3631"><span class="linenum">3631</span></a>  
<a name="l3632"><span class="linenum">3632</span></a>  <span class="comment">/**</span>
<a name="l3633"><span class="linenum">3633</span></a>  <span class="comment"> * Api to duplicate a module.</span>
<a name="l3634"><span class="linenum">3634</span></a>  <span class="comment"> *</span>
<a name="l3635"><span class="linenum">3635</span></a>  <span class="comment"> * @param object $course course object.</span>
<a name="l3636"><span class="linenum">3636</span></a>  <span class="comment"> * @param object $cm course module object to be duplicated.</span>
<a name="l3637"><span class="linenum">3637</span></a>  <span class="comment"> * @since Moodle 2.8</span>
<a name="l3638"><span class="linenum">3638</span></a>  <span class="comment"> *</span>
<a name="l3639"><span class="linenum">3639</span></a>  <span class="comment"> * @throws Exception</span>
<a name="l3640"><span class="linenum">3640</span></a>  <span class="comment"> * @throws coding_exception</span>
<a name="l3641"><span class="linenum">3641</span></a>  <span class="comment"> * @throws moodle_exception</span>
<a name="l3642"><span class="linenum">3642</span></a>  <span class="comment"> * @throws restore_controller_exception</span>
<a name="l3643"><span class="linenum">3643</span></a>  <span class="comment"> *</span>
<a name="l3644"><span class="linenum">3644</span></a>  <span class="comment"> * @return cm_info|null cminfo object if we sucessfully duplicated the mod and found the new cm.</span>
<a name="l3645"><span class="linenum">3645</span></a>  <span class="comment"> */</span>
<a name="l3646"><span class="linenum">3646</span></a>  function <a class="function" onClick="logFunction('duplicate_module')" href="../_functions/duplicate_module.html" onMouseOver="funcPopup(event,'duplicate_module')">duplicate_module</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) {
<a name="l3647"><span class="linenum">3647</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l3648"><span class="linenum">3648</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../backup/util/includes/backup_includes.php.html">/backup/util/includes/backup_includes.php</a>');
<a name="l3649"><span class="linenum">3649</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../backup/util/includes/restore_includes.php.html">/backup/util/includes/restore_includes.php</a>');
<a name="l3650"><span class="linenum">3650</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l3651"><span class="linenum">3651</span></a>  
<a name="l3652"><span class="linenum">3652</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>          = new stdClass();
<a name="l3653"><span class="linenum">3653</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('modtype')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/modtype.html">modtype</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>);
<a name="l3654"><span class="linenum">3654</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('modname')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l3655"><span class="linenum">3655</span></a>  
<a name="l3656"><span class="linenum">3656</span></a>      if (!<a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>)) {
<a name="l3657"><span class="linenum">3657</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('duplicatenosupport', 'error', '', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l3658"><span class="linenum">3658</span></a>      }
<a name="l3659"><span class="linenum">3659</span></a>  
<a name="l3660"><span class="linenum">3660</span></a>  <span class="comment">    // Backup the activity.</span>
<a name="l3661"><span class="linenum">3661</span></a>  
<a name="l3662"><span class="linenum">3662</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller')" href="../_classes/backup_controller.html" onMouseOver="classPopup(event,'backup_controller')">backup_controller</a>(backup::TYPE_1ACTIVITY, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, backup::<a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>,
<a name="l3663"><span class="linenum">3663</span></a>              backup::INTERACTIVE_NO, backup::MODE_IMPORT, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3664"><span class="linenum">3664</span></a>  
<a name="l3665"><span class="linenum">3665</span></a>      <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../_variables/backupid.html">$backupid</a>       = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_backupid')" href="../_functions/get_backupid.html" onMouseOver="funcPopup(event,'get_backupid')">get_backupid</a>();
<a name="l3666"><span class="linenum">3666</span></a>      <a class="var it30755" onMouseOver="hilite(30755)" onMouseOut="lolite()" onClick="logVariable('backupbasepath')" href="../_variables/backupbasepath.html">$backupbasepath</a> = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_plan')" href="../_functions/get_plan.html" onMouseOver="funcPopup(event,'get_plan')">get_plan</a>()-&gt;<a class="function" onClick="logFunction('get_basepath')" href="../_functions/get_basepath.html" onMouseOver="funcPopup(event,'get_basepath')">get_basepath</a>();
<a name="l3667"><span class="linenum">3667</span></a>  
<a name="l3668"><span class="linenum">3668</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('execute_plan')" href="../_functions/execute_plan.html" onMouseOver="funcPopup(event,'execute_plan')">execute_plan</a>();
<a name="l3669"><span class="linenum">3669</span></a>  
<a name="l3670"><span class="linenum">3670</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('destroy')" href="../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l3671"><span class="linenum">3671</span></a>  
<a name="l3672"><span class="linenum">3672</span></a>  <span class="comment">    // Restore the backup immediately.</span>
<a name="l3673"><span class="linenum">3673</span></a>  
<a name="l3674"><span class="linenum">3674</span></a>      <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('restore_controller')" href="../_classes/restore_controller.html" onMouseOver="classPopup(event,'restore_controller')">restore_controller</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../_variables/backupid.html">$backupid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3675"><span class="linenum">3675</span></a>              backup::INTERACTIVE_NO, backup::MODE_IMPORT, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, backup::TARGET_CURRENT_ADDING);
<a name="l3676"><span class="linenum">3676</span></a>  
<a name="l3677"><span class="linenum">3677</span></a>      <a class="var it13823" onMouseOver="hilite(13823)" onMouseOut="lolite()" onClick="logVariable('cmcontext')" href="../_variables/cmcontext.html">$cmcontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3678"><span class="linenum">3678</span></a>      if (!<a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a>-&gt;<a class="function" onClick="logFunction('execute_precheck')" href="../_functions/execute_precheck.html" onMouseOver="funcPopup(event,'execute_precheck')">execute_precheck</a>()) {
<a name="l3679"><span class="linenum">3679</span></a>          <a class="var it3501" onMouseOver="hilite(3501)" onMouseOut="lolite()" onClick="logVariable('precheckresults')" href="../_variables/precheckresults.html">$precheckresults</a> = <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a>-&gt;<a class="function" onClick="logFunction('get_precheck_results')" href="../_functions/get_precheck_results.html" onMouseOver="funcPopup(event,'get_precheck_results')">get_precheck_results</a>();
<a name="l3680"><span class="linenum">3680</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3501" onMouseOver="hilite(3501)" onMouseOut="lolite()" onClick="logVariable('precheckresults')" href="../_variables/precheckresults.html">$precheckresults</a>) &amp;&amp; !empty(<a class="var it3501" onMouseOver="hilite(3501)" onMouseOut="lolite()" onClick="logVariable('precheckresults')" href="../_variables/precheckresults.html">$precheckresults</a>['errors'])) {
<a name="l3681"><span class="linenum">3681</span></a>              if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('keeptempdirectoriesonbackup')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/keeptempdirectoriesonbackup.html">keeptempdirectoriesonbackup</a>)) {
<a name="l3682"><span class="linenum">3682</span></a>                  <a class="function" onClick="logFunction('fulldelete')" href="../_functions/fulldelete.html" onMouseOver="funcPopup(event,'fulldelete')">fulldelete</a>(<a class="var it30755" onMouseOver="hilite(30755)" onMouseOut="lolite()" onClick="logVariable('backupbasepath')" href="../_variables/backupbasepath.html">$backupbasepath</a>);
<a name="l3683"><span class="linenum">3683</span></a>              }
<a name="l3684"><span class="linenum">3684</span></a>          }
<a name="l3685"><span class="linenum">3685</span></a>      }
<a name="l3686"><span class="linenum">3686</span></a>  
<a name="l3687"><span class="linenum">3687</span></a>      <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a>-&gt;<a class="function" onClick="logFunction('execute_plan')" href="../_functions/execute_plan.html" onMouseOver="funcPopup(event,'execute_plan')">execute_plan</a>();
<a name="l3688"><span class="linenum">3688</span></a>  
<a name="l3689"><span class="linenum">3689</span></a>  <span class="comment">    // Now a bit hacky part follows - we try to get the cmid of the newly</span>
<a name="l3690"><span class="linenum">3690</span></a>  <span class="comment">    // restored copy of the module.</span>
<a name="l3691"><span class="linenum">3691</span></a>      <a class="var it12940" onMouseOver="hilite(12940)" onMouseOut="lolite()" onClick="logVariable('newcmid')" href="../_variables/newcmid.html">$newcmid</a> = null;
<a name="l3692"><span class="linenum">3692</span></a>      <a class="var it110" onMouseOver="hilite(110)" onMouseOut="lolite()" onClick="logVariable('tasks')" href="../_variables/tasks.html">$tasks</a> = <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a>-&gt;<a class="function" onClick="logFunction('get_plan')" href="../_functions/get_plan.html" onMouseOver="funcPopup(event,'get_plan')">get_plan</a>()-&gt;<a class="function" onClick="logFunction('get_tasks')" href="../_functions/get_tasks.html" onMouseOver="funcPopup(event,'get_tasks')">get_tasks</a>();
<a name="l3693"><span class="linenum">3693</span></a>      foreach (<a class="var it110" onMouseOver="hilite(110)" onMouseOut="lolite()" onClick="logVariable('tasks')" href="../_variables/tasks.html">$tasks</a> as <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../_variables/task.html">$task</a>) {
<a name="l3694"><span class="linenum">3694</span></a>          if (<a class="phpfunction" onClick="logFunction('is_subclass_of')" href="../_functions/is_subclass_of.html" onMouseOver="phpfuncPopup(event,'is_subclass_of')">is_subclass_of</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../_variables/task.html">$task</a>, 'restore_activity_task')) {
<a name="l3695"><span class="linenum">3695</span></a>              if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_old_contextid')" href="../_functions/get_old_contextid.html" onMouseOver="funcPopup(event,'get_old_contextid')">get_old_contextid</a>() == <a class="var it13823" onMouseOver="hilite(13823)" onMouseOut="lolite()" onClick="logVariable('cmcontext')" href="../_variables/cmcontext.html">$cmcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43120" onMouseOver="hilite(43120)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l3696"><span class="linenum">3696</span></a>                  <a class="var it12940" onMouseOver="hilite(12940)" onMouseOut="lolite()" onClick="logVariable('newcmid')" href="../_variables/newcmid.html">$newcmid</a> = <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_moduleid')" href="../_functions/get_moduleid.html" onMouseOver="funcPopup(event,'get_moduleid')">get_moduleid</a>();
<a name="l3697"><span class="linenum">3697</span></a>                  break;
<a name="l3698"><span class="linenum">3698</span></a>              }
<a name="l3699"><span class="linenum">3699</span></a>          }
<a name="l3700"><span class="linenum">3700</span></a>      }
<a name="l3701"><span class="linenum">3701</span></a>  
<a name="l3702"><span class="linenum">3702</span></a>  <span class="comment">    // If we know the cmid of the new course module, let us move it</span>
<a name="l3703"><span class="linenum">3703</span></a>  <span class="comment">    // right below the original one. otherwise it will stay at the</span>
<a name="l3704"><span class="linenum">3704</span></a>  <span class="comment">    // end of the section.</span>
<a name="l3705"><span class="linenum">3705</span></a>      if (<a class="var it12940" onMouseOver="hilite(12940)" onMouseOut="lolite()" onClick="logVariable('newcmid')" href="../_variables/newcmid.html">$newcmid</a>) {
<a name="l3706"><span class="linenum">3706</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3707"><span class="linenum">3707</span></a>          <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a> = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it12940" onMouseOver="hilite(12940)" onMouseOut="lolite()" onClick="logVariable('newcmid')" href="../_variables/newcmid.html">$newcmid</a>);
<a name="l3708"><span class="linenum">3708</span></a>          <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_sections', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('section')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/section.html">section</a>, 'course' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>));
<a name="l3709"><span class="linenum">3709</span></a>          <a class="function" onClick="logFunction('moveto_module')" href="../_functions/moveto_module.html" onMouseOver="funcPopup(event,'moveto_module')">moveto_module</a>(<a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l3710"><span class="linenum">3710</span></a>          <a class="function" onClick="logFunction('moveto_module')" href="../_functions/moveto_module.html" onMouseOver="funcPopup(event,'moveto_module')">moveto_module</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>, <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>);
<a name="l3711"><span class="linenum">3711</span></a>  
<a name="l3712"><span class="linenum">3712</span></a>  <span class="comment">        // Trigger course module created event. We can trigger the event only if we know the newcmid.</span>
<a name="l3713"><span class="linenum">3713</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_module_created')" href="../_classes/course_module_created.html" onMouseOver="classPopup(event,'course_module_created')">course_module_created</a>::<a class="function" onClick="logFunction('create_from_cm')" href="../_functions/create_from_cm.html" onMouseOver="funcPopup(event,'create_from_cm')">create_from_cm</a>(<a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>);
<a name="l3714"><span class="linenum">3714</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3715"><span class="linenum">3715</span></a>      }
<a name="l3716"><span class="linenum">3716</span></a>      <a class="function" onClick="logFunction('rebuild_course_cache')" href="../_functions/rebuild_course_cache.html" onMouseOver="funcPopup(event,'rebuild_course_cache')">rebuild_course_cache</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>);
<a name="l3717"><span class="linenum">3717</span></a>  
<a name="l3718"><span class="linenum">3718</span></a>      <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a>-&gt;<a class="function" onClick="logFunction('destroy')" href="../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l3719"><span class="linenum">3719</span></a>  
<a name="l3720"><span class="linenum">3720</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('keeptempdirectoriesonbackup')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/keeptempdirectoriesonbackup.html">keeptempdirectoriesonbackup</a>)) {
<a name="l3721"><span class="linenum">3721</span></a>          <a class="function" onClick="logFunction('fulldelete')" href="../_functions/fulldelete.html" onMouseOver="funcPopup(event,'fulldelete')">fulldelete</a>(<a class="var it30755" onMouseOver="hilite(30755)" onMouseOut="lolite()" onClick="logVariable('backupbasepath')" href="../_variables/backupbasepath.html">$backupbasepath</a>);
<a name="l3722"><span class="linenum">3722</span></a>      }
<a name="l3723"><span class="linenum">3723</span></a>  
<a name="l3724"><span class="linenum">3724</span></a>      return isset(<a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a>) ? <a class="var it21179" onMouseOver="hilite(21179)" onMouseOut="lolite()" onClick="logVariable('newcm')" href="../_variables/newcm.html">$newcm</a> : null;
<a name="l3725"><span class="linenum">3725</span></a>  }
<a name="l3726"><span class="linenum">3726</span></a>  
<a name="l3727"><span class="linenum">3727</span></a>  <span class="comment">/**</span>
<a name="l3728"><span class="linenum">3728</span></a>  <span class="comment"> * Compare two objects to find out their correct order based on timestamp (to be used by usort).</span>
<a name="l3729"><span class="linenum">3729</span></a>  <span class="comment"> * Sorts by descending order of time.</span>
<a name="l3730"><span class="linenum">3730</span></a>  <span class="comment"> *</span>
<a name="l3731"><span class="linenum">3731</span></a>  <span class="comment"> * @param stdClass $a First object</span>
<a name="l3732"><span class="linenum">3732</span></a>  <span class="comment"> * @param stdClass $b Second object</span>
<a name="l3733"><span class="linenum">3733</span></a>  <span class="comment"> * @return int 0,1,-1 representing the order</span>
<a name="l3734"><span class="linenum">3734</span></a>  <span class="comment"> */</span>
<a name="l3735"><span class="linenum">3735</span></a>  function <a class="function" onClick="logFunction('compare_activities_by_time_desc')" href="../_functions/compare_activities_by_time_desc.html" onMouseOver="funcPopup(event,'compare_activities_by_time_desc')">compare_activities_by_time_desc</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>) {
<a name="l3736"><span class="linenum">3736</span></a>  <span class="comment">    // Make sure the activities actually have a timestamp property.</span>
<a name="l3737"><span class="linenum">3737</span></a>      if ((!property_exists(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, 'timestamp')) &amp;&amp; (!property_exists(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>, 'timestamp'))) {
<a name="l3738"><span class="linenum">3738</span></a>          return 0;
<a name="l3739"><span class="linenum">3739</span></a>      }
<a name="l3740"><span class="linenum">3740</span></a>  <span class="comment">    // We treat instances without timestamp as if they have a timestamp of 0.</span>
<a name="l3741"><span class="linenum">3741</span></a>      if ((!property_exists(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, 'timestamp')) &amp;&amp; (property_exists(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>,'timestamp'))) {
<a name="l3742"><span class="linenum">3742</span></a>          return 1;
<a name="l3743"><span class="linenum">3743</span></a>      }
<a name="l3744"><span class="linenum">3744</span></a>      if ((property_exists(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, 'timestamp')) &amp;&amp; (!property_exists(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>, 'timestamp'))) {
<a name="l3745"><span class="linenum">3745</span></a>          return -1;
<a name="l3746"><span class="linenum">3746</span></a>      }
<a name="l3747"><span class="linenum">3747</span></a>      if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a> == <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a onClick="logVariable('timestamp')" class="var it43356" onMouseOver="hilite(43356)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a>) {
<a name="l3748"><span class="linenum">3748</span></a>          return 0;
<a name="l3749"><span class="linenum">3749</span></a>      }
<a name="l3750"><span class="linenum">3750</span></a>      return (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a> &gt; <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a onClick="logVariable('timestamp')" class="var it43356" onMouseOver="hilite(43356)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a>) ? -1 : 1;
<a name="l3751"><span class="linenum">3751</span></a>  }
<a name="l3752"><span class="linenum">3752</span></a>  
<a name="l3753"><span class="linenum">3753</span></a>  <span class="comment">/**</span>
<a name="l3754"><span class="linenum">3754</span></a>  <span class="comment"> * Compare two objects to find out their correct order based on timestamp (to be used by usort).</span>
<a name="l3755"><span class="linenum">3755</span></a>  <span class="comment"> * Sorts by ascending order of time.</span>
<a name="l3756"><span class="linenum">3756</span></a>  <span class="comment"> *</span>
<a name="l3757"><span class="linenum">3757</span></a>  <span class="comment"> * @param stdClass $a First object</span>
<a name="l3758"><span class="linenum">3758</span></a>  <span class="comment"> * @param stdClass $b Second object</span>
<a name="l3759"><span class="linenum">3759</span></a>  <span class="comment"> * @return int 0,1,-1 representing the order</span>
<a name="l3760"><span class="linenum">3760</span></a>  <span class="comment"> */</span>
<a name="l3761"><span class="linenum">3761</span></a>  function <a class="function" onClick="logFunction('compare_activities_by_time_asc')" href="../_functions/compare_activities_by_time_asc.html" onMouseOver="funcPopup(event,'compare_activities_by_time_asc')">compare_activities_by_time_asc</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>) {
<a name="l3762"><span class="linenum">3762</span></a>  <span class="comment">    // Make sure the activities actually have a timestamp property.</span>
<a name="l3763"><span class="linenum">3763</span></a>      if ((!property_exists(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, 'timestamp')) &amp;&amp; (!property_exists(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>, 'timestamp'))) {
<a name="l3764"><span class="linenum">3764</span></a>        return 0;
<a name="l3765"><span class="linenum">3765</span></a>      }
<a name="l3766"><span class="linenum">3766</span></a>  <span class="comment">    // We treat instances without timestamp as if they have a timestamp of 0.</span>
<a name="l3767"><span class="linenum">3767</span></a>      if ((!property_exists(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, 'timestamp')) &amp;&amp; (property_exists(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>, 'timestamp'))) {
<a name="l3768"><span class="linenum">3768</span></a>          return -1;
<a name="l3769"><span class="linenum">3769</span></a>      }
<a name="l3770"><span class="linenum">3770</span></a>      if ((property_exists(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, 'timestamp')) &amp;&amp; (!property_exists(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>, 'timestamp'))) {
<a name="l3771"><span class="linenum">3771</span></a>          return 1;
<a name="l3772"><span class="linenum">3772</span></a>      }
<a name="l3773"><span class="linenum">3773</span></a>      if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a> == <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a onClick="logVariable('timestamp')" class="var it43356" onMouseOver="hilite(43356)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a>) {
<a name="l3774"><span class="linenum">3774</span></a>          return 0;
<a name="l3775"><span class="linenum">3775</span></a>      }
<a name="l3776"><span class="linenum">3776</span></a>      return (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a> &lt; <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a onClick="logVariable('timestamp')" class="var it43356" onMouseOver="hilite(43356)" onMouseOut="lolite()" href="../_variables/timestamp.html">timestamp</a>) ? -1 : 1;
<a name="l3777"><span class="linenum">3777</span></a>  }
<a name="l3778"><span class="linenum">3778</span></a>  
<a name="l3779"><span class="linenum">3779</span></a>  <span class="comment">/**</span>
<a name="l3780"><span class="linenum">3780</span></a>  <span class="comment"> * Changes the visibility of a course.</span>
<a name="l3781"><span class="linenum">3781</span></a>  <span class="comment"> *</span>
<a name="l3782"><span class="linenum">3782</span></a>  <span class="comment"> * @param int $courseid The course to change.</span>
<a name="l3783"><span class="linenum">3783</span></a>  <span class="comment"> * @param bool $show True to make it visible, false otherwise.</span>
<a name="l3784"><span class="linenum">3784</span></a>  <span class="comment"> * @return bool</span>
<a name="l3785"><span class="linenum">3785</span></a>  <span class="comment"> */</span>
<a name="l3786"><span class="linenum">3786</span></a>  function <a class="function" onClick="logFunction('course_change_visibility')" href="../_functions/course_change_visibility.html" onMouseOver="funcPopup(event,'course_change_visibility')">course_change_visibility</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it1794" onMouseOver="hilite(1794)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a> = true) {
<a name="l3787"><span class="linenum">3787</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = new stdClass;
<a name="l3788"><span class="linenum">3788</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>;
<a name="l3789"><span class="linenum">3789</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = (<a class="var it1794" onMouseOver="hilite(1794)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a>) ? '1' : '0';
<a name="l3790"><span class="linenum">3790</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l3791"><span class="linenum">3791</span></a>      <a class="function" onClick="logFunction('update_course')" href="../_functions/update_course.html" onMouseOver="funcPopup(event,'update_course')">update_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3792"><span class="linenum">3792</span></a>      return true;
<a name="l3793"><span class="linenum">3793</span></a>  }
<a name="l3794"><span class="linenum">3794</span></a>  
<a name="l3795"><span class="linenum">3795</span></a>  <span class="comment">/**</span>
<a name="l3796"><span class="linenum">3796</span></a>  <span class="comment"> * Changes the course sortorder by one, moving it up or down one in respect to sort order.</span>
<a name="l3797"><span class="linenum">3797</span></a>  <span class="comment"> *</span>
<a name="l3798"><span class="linenum">3798</span></a>  <span class="comment"> * @param stdClass|course_in_list $course</span>
<a name="l3799"><span class="linenum">3799</span></a>  <span class="comment"> * @param bool $up If set to true the course will be moved up one. Otherwise down one.</span>
<a name="l3800"><span class="linenum">3800</span></a>  <span class="comment"> * @return bool</span>
<a name="l3801"><span class="linenum">3801</span></a>  <span class="comment"> */</span>
<a name="l3802"><span class="linenum">3802</span></a>  function <a class="function" onClick="logFunction('course_change_sortorder_by_one')" href="../_functions/course_change_sortorder_by_one.html" onMouseOver="funcPopup(event,'course_change_sortorder_by_one')">course_change_sortorder_by_one</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('up')" href="../_variables/up.html">$up</a>) {
<a name="l3803"><span class="linenum">3803</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3804"><span class="linenum">3804</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/category.html">category</a>);
<a name="l3805"><span class="linenum">3805</span></a>      if (<a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('up')" href="../_variables/up.html">$up</a>) {
<a name="l3806"><span class="linenum">3806</span></a>          <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = 'sortorder &lt; ? AND category = ?';
<a name="l3807"><span class="linenum">3807</span></a>          <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a> = 'sortorder DESC';
<a name="l3808"><span class="linenum">3808</span></a>      } else {
<a name="l3809"><span class="linenum">3809</span></a>          <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = 'sortorder &gt; ? AND category = ?';
<a name="l3810"><span class="linenum">3810</span></a>          <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a> = 'sortorder ASC';
<a name="l3811"><span class="linenum">3811</span></a>      }
<a name="l3812"><span class="linenum">3812</span></a>      <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l3813"><span class="linenum">3813</span></a>      <a class="var it35278" onMouseOver="hilite(35278)" onMouseOut="lolite()" onClick="logVariable('swapcourse')" href="../_variables/swapcourse.html">$swapcourse</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('course', <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>, '*', 0, 1);
<a name="l3814"><span class="linenum">3814</span></a>      if (<a class="var it35278" onMouseOver="hilite(35278)" onMouseOut="lolite()" onClick="logVariable('swapcourse')" href="../_variables/swapcourse.html">$swapcourse</a>) {
<a name="l3815"><span class="linenum">3815</span></a>          <a class="var it35278" onMouseOver="hilite(35278)" onMouseOut="lolite()" onClick="logVariable('swapcourse')" href="../_variables/swapcourse.html">$swapcourse</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it35278" onMouseOver="hilite(35278)" onMouseOut="lolite()" onClick="logVariable('swapcourse')" href="../_variables/swapcourse.html">$swapcourse</a>);
<a name="l3816"><span class="linenum">3816</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'sortorder', <a class="var it35278" onMouseOver="hilite(35278)" onMouseOut="lolite()" onClick="logVariable('swapcourse')" href="../_variables/swapcourse.html">$swapcourse</a>-&gt;<a onClick="logVariable('sortorder')" class="var it45110" onMouseOver="hilite(45110)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>, array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3817"><span class="linenum">3817</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'sortorder', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>, array('id' =&gt; <a class="var it35278" onMouseOver="hilite(35278)" onMouseOut="lolite()" onClick="logVariable('swapcourse')" href="../_variables/swapcourse.html">$swapcourse</a>-&gt;<a onClick="logVariable('id')" class="var it45110" onMouseOver="hilite(45110)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3818"><span class="linenum">3818</span></a>  <span class="comment">        // Finally reorder courses.</span>
<a name="l3819"><span class="linenum">3819</span></a>          <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l3820"><span class="linenum">3820</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l3821"><span class="linenum">3821</span></a>          return true;
<a name="l3822"><span class="linenum">3822</span></a>      }
<a name="l3823"><span class="linenum">3823</span></a>      return false;
<a name="l3824"><span class="linenum">3824</span></a>  }
<a name="l3825"><span class="linenum">3825</span></a>  
<a name="l3826"><span class="linenum">3826</span></a>  <span class="comment">/**</span>
<a name="l3827"><span class="linenum">3827</span></a>  <span class="comment"> * Changes the sort order of courses in a category so that the first course appears after the second.</span>
<a name="l3828"><span class="linenum">3828</span></a>  <span class="comment"> *</span>
<a name="l3829"><span class="linenum">3829</span></a>  <span class="comment"> * @param int|stdClass $courseorid The course to focus on.</span>
<a name="l3830"><span class="linenum">3830</span></a>  <span class="comment"> * @param int $moveaftercourseid The course to shifter after or 0 if you want it to be the first course in the category.</span>
<a name="l3831"><span class="linenum">3831</span></a>  <span class="comment"> * @return bool</span>
<a name="l3832"><span class="linenum">3832</span></a>  <span class="comment"> */</span>
<a name="l3833"><span class="linenum">3833</span></a>  function <a class="function" onClick="logFunction('course_change_sortorder_after_course')" href="../_functions/course_change_sortorder_after_course.html" onMouseOver="funcPopup(event,'course_change_sortorder_after_course')">course_change_sortorder_after_course</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>, <a class="var it20147" onMouseOver="hilite(20147)" onMouseOut="lolite()" onClick="logVariable('moveaftercourseid')" href="../_variables/moveaftercourseid.html">$moveaftercourseid</a>) {
<a name="l3834"><span class="linenum">3834</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3835"><span class="linenum">3835</span></a>  
<a name="l3836"><span class="linenum">3836</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>)) {
<a name="l3837"><span class="linenum">3837</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>);
<a name="l3838"><span class="linenum">3838</span></a>      } else {
<a name="l3839"><span class="linenum">3839</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it11871" onMouseOver="hilite(11871)" onMouseOut="lolite()" onClick="logVariable('courseorid')" href="../_variables/courseorid.html">$courseorid</a>;
<a name="l3840"><span class="linenum">3840</span></a>      }
<a name="l3841"><span class="linenum">3841</span></a>  
<a name="l3842"><span class="linenum">3842</span></a>      if ((int)<a class="var it20147" onMouseOver="hilite(20147)" onMouseOut="lolite()" onClick="logVariable('moveaftercourseid')" href="../_variables/moveaftercourseid.html">$moveaftercourseid</a> === 0) {
<a name="l3843"><span class="linenum">3843</span></a>  <span class="comment">        // We've moving the course to the start of the queue.</span>
<a name="l3844"><span class="linenum">3844</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT sortorder
<a name="l3845"><span class="linenum">3845</span></a>                        FROM {course}
<a name="l3846"><span class="linenum">3846</span></a>                       WHERE category = :categoryid
<a name="l3847"><span class="linenum">3847</span></a>                    ORDER BY sortorder';
<a name="l3848"><span class="linenum">3848</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l3849"><span class="linenum">3849</span></a>              'categoryid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;category
<a name="l3850"><span class="linenum">3850</span></a>          );
<a name="l3851"><span class="linenum">3851</span></a>          <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('IGNORE_MULTIPLE')" href="../_constants/IGNORE_MULTIPLE.html" onMouseOver="constPopup(event,'IGNORE_MULTIPLE')">IGNORE_MULTIPLE</a>);
<a name="l3852"><span class="linenum">3852</span></a>  
<a name="l3853"><span class="linenum">3853</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'UPDATE {course}
<a name="l3854"><span class="linenum">3854</span></a>                     SET sortorder = sortorder + 1
<a name="l3855"><span class="linenum">3855</span></a>                   WHERE category = :categoryid
<a name="l3856"><span class="linenum">3856</span></a>                     AND id &lt;&gt; :id';
<a name="l3857"><span class="linenum">3857</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l3858"><span class="linenum">3858</span></a>              'categoryid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/category.html">category</a>,
<a name="l3859"><span class="linenum">3859</span></a>              'id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3860"><span class="linenum">3860</span></a>          );
<a name="l3861"><span class="linenum">3861</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l3862"><span class="linenum">3862</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'sortorder', <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>, array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3863"><span class="linenum">3863</span></a>      } else if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> === <a class="var it20147" onMouseOver="hilite(20147)" onMouseOut="lolite()" onClick="logVariable('moveaftercourseid')" href="../_variables/moveaftercourseid.html">$moveaftercourseid</a>) {
<a name="l3864"><span class="linenum">3864</span></a>  <span class="comment">        // They're the same - moronic.</span>
<a name="l3865"><span class="linenum">3865</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Invalid move after course given.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3866"><span class="linenum">3866</span></a>          return false;
<a name="l3867"><span class="linenum">3867</span></a>      } else {
<a name="l3868"><span class="linenum">3868</span></a>  <span class="comment">        // Moving this course after the given course. It could be before it could be after.</span>
<a name="l3869"><span class="linenum">3869</span></a>          <a class="var it35279" onMouseOver="hilite(35279)" onMouseOut="lolite()" onClick="logVariable('moveaftercourse')" href="../_variables/moveaftercourse.html">$moveaftercourse</a> = <a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it20147" onMouseOver="hilite(20147)" onMouseOut="lolite()" onClick="logVariable('moveaftercourseid')" href="../_variables/moveaftercourseid.html">$moveaftercourseid</a>);
<a name="l3870"><span class="linenum">3870</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/category.html">category</a> !== <a class="var it35279" onMouseOver="hilite(35279)" onMouseOut="lolite()" onClick="logVariable('moveaftercourse')" href="../_variables/moveaftercourse.html">$moveaftercourse</a>-&gt;<a onClick="logVariable('category')" class="var it45111" onMouseOver="hilite(45111)" onMouseOut="lolite()" href="../_variables/category.html">category</a>) {
<a name="l3871"><span class="linenum">3871</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Cannot re-order courses. The given courses do not belong to the same category.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3872"><span class="linenum">3872</span></a>              return false;
<a name="l3873"><span class="linenum">3873</span></a>          }
<a name="l3874"><span class="linenum">3874</span></a>  <span class="comment">        // Increment all courses in the same category that are ordered after the moveafter course.</span>
<a name="l3875"><span class="linenum">3875</span></a>  <span class="comment">        // This makes a space for the course we're moving.</span>
<a name="l3876"><span class="linenum">3876</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'UPDATE {course}
<a name="l3877"><span class="linenum">3877</span></a>                         SET sortorder = sortorder + 1
<a name="l3878"><span class="linenum">3878</span></a>                       WHERE category = :categoryid
<a name="l3879"><span class="linenum">3879</span></a>                         AND sortorder &gt; :sortorder';
<a name="l3880"><span class="linenum">3880</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l3881"><span class="linenum">3881</span></a>              'categoryid' =&gt; <a class="var it35279" onMouseOver="hilite(35279)" onMouseOut="lolite()" onClick="logVariable('moveaftercourse')" href="../_variables/moveaftercourse.html">$moveaftercourse</a>-&gt;<a onClick="logVariable('category')" class="var it45111" onMouseOver="hilite(45111)" onMouseOut="lolite()" href="../_variables/category.html">category</a>,
<a name="l3882"><span class="linenum">3882</span></a>              'sortorder' =&gt; <a class="var it35279" onMouseOver="hilite(35279)" onMouseOut="lolite()" onClick="logVariable('moveaftercourse')" href="../_variables/moveaftercourse.html">$moveaftercourse</a>-&gt;sortorder
<a name="l3883"><span class="linenum">3883</span></a>          );
<a name="l3884"><span class="linenum">3884</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l3885"><span class="linenum">3885</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'sortorder', <a class="var it35279" onMouseOver="hilite(35279)" onMouseOut="lolite()" onClick="logVariable('moveaftercourse')" href="../_variables/moveaftercourse.html">$moveaftercourse</a>-&gt;<a onClick="logVariable('sortorder')" class="var it45111" onMouseOver="hilite(45111)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> + 1, array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3886"><span class="linenum">3886</span></a>      }
<a name="l3887"><span class="linenum">3887</span></a>      <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l3888"><span class="linenum">3888</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l3889"><span class="linenum">3889</span></a>      return true;
<a name="l3890"><span class="linenum">3890</span></a>  }
<a name="l3891"><span class="linenum">3891</span></a>  
<a name="l3892"><span class="linenum">3892</span></a>  <span class="comment">/**</span>
<a name="l3893"><span class="linenum">3893</span></a>  <span class="comment"> * Trigger course viewed event. This API function is used when course view actions happens,</span>
<a name="l3894"><span class="linenum">3894</span></a>  <span class="comment"> * usually in course/view.php but also in external functions.</span>
<a name="l3895"><span class="linenum">3895</span></a>  <span class="comment"> *</span>
<a name="l3896"><span class="linenum">3896</span></a>  <span class="comment"> * @param stdClass  $context course context object</span>
<a name="l3897"><span class="linenum">3897</span></a>  <span class="comment"> * @param int $sectionnumber section number</span>
<a name="l3898"><span class="linenum">3898</span></a>  <span class="comment"> * @since Moodle 2.9</span>
<a name="l3899"><span class="linenum">3899</span></a>  <span class="comment"> */</span>
<a name="l3900"><span class="linenum">3900</span></a>  function <a class="function" onClick="logFunction('course_view')" href="../_functions/course_view.html" onMouseOver="funcPopup(event,'course_view')">course_view</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it8794" onMouseOver="hilite(8794)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a> = 0) {
<a name="l3901"><span class="linenum">3901</span></a>  
<a name="l3902"><span class="linenum">3902</span></a>      <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a> = array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l3903"><span class="linenum">3903</span></a>  
<a name="l3904"><span class="linenum">3904</span></a>      if (!empty(<a class="var it8794" onMouseOver="hilite(8794)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a>)) {
<a name="l3905"><span class="linenum">3905</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>['other']['coursesectionnumber'] = <a class="var it8794" onMouseOver="hilite(8794)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a>;
<a name="l3906"><span class="linenum">3906</span></a>      }
<a name="l3907"><span class="linenum">3907</span></a>  
<a name="l3908"><span class="linenum">3908</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_viewed')" href="../_classes/course_viewed.html" onMouseOver="classPopup(event,'course_viewed')">course_viewed</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>);
<a name="l3909"><span class="linenum">3909</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3910"><span class="linenum">3910</span></a>  }
<a name="l3911"><span class="linenum">3911</span></a>  
<a name="l3912"><span class="linenum">3912</span></a>  <span class="comment">/**</span>
<a name="l3913"><span class="linenum">3913</span></a>  <span class="comment"> * Returns courses tagged with a specified tag.</span>
<a name="l3914"><span class="linenum">3914</span></a>  <span class="comment"> *</span>
<a name="l3915"><span class="linenum">3915</span></a>  <span class="comment"> * @param core_tag_tag $tag</span>
<a name="l3916"><span class="linenum">3916</span></a>  <span class="comment"> * @param bool $exclusivemode if set to true it means that no other entities tagged with this tag</span>
<a name="l3917"><span class="linenum">3917</span></a>  <span class="comment"> *             are displayed on the page and the per-page limit may be bigger</span>
<a name="l3918"><span class="linenum">3918</span></a>  <span class="comment"> * @param int $fromctx context id where the link was displayed, may be used by callbacks</span>
<a name="l3919"><span class="linenum">3919</span></a>  <span class="comment"> *            to display items in the same context first</span>
<a name="l3920"><span class="linenum">3920</span></a>  <span class="comment"> * @param int $ctx context id where to search for records</span>
<a name="l3921"><span class="linenum">3921</span></a>  <span class="comment"> * @param bool $rec search in subcontexts as well</span>
<a name="l3922"><span class="linenum">3922</span></a>  <span class="comment"> * @param int $page 0-based number of page being displayed</span>
<a name="l3923"><span class="linenum">3923</span></a>  <span class="comment"> * @return \core_tag\output\tagindex</span>
<a name="l3924"><span class="linenum">3924</span></a>  <span class="comment"> */</span>
<a name="l3925"><span class="linenum">3925</span></a>  function <a class="function" onClick="logFunction('course_get_tagged_courses')" href="../_functions/course_get_tagged_courses.html" onMouseOver="funcPopup(event,'course_get_tagged_courses')">course_get_tagged_courses</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a> = false, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../_variables/fromctx.html">$fromctx</a> = 0, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a> = 0, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a> = 1, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = 0) {
<a name="l3926"><span class="linenum">3926</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l3927"><span class="linenum">3927</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/coursecatlib.php');
<a name="l3928"><span class="linenum">3928</span></a>  
<a name="l3929"><span class="linenum">3929</span></a>      <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a> = <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a> ? <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('coursesperpage')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/coursesperpage.html">coursesperpage</a> : 5;
<a name="l3930"><span class="linenum">3930</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a> = array(
<a name="l3931"><span class="linenum">3931</span></a>          'limit' =&gt; <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>,
<a name="l3932"><span class="linenum">3932</span></a>          'offset' =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> * <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>,
<a name="l3933"><span class="linenum">3933</span></a>          'viewmoreurl' =&gt; null,
<a name="l3934"><span class="linenum">3934</span></a>      );
<a name="l3935"><span class="linenum">3935</span></a>  
<a name="l3936"><span class="linenum">3936</span></a>      <a class="var it4705" onMouseOver="hilite(4705)" onMouseOut="lolite()" onClick="logVariable('courserenderer')" href="../_variables/courserenderer.html">$courserenderer</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'course');
<a name="l3937"><span class="linenum">3937</span></a>      <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a> = <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('search_courses_count')" href="../_functions/search_courses_count.html" onMouseOver="funcPopup(event,'search_courses_count')">search_courses_count</a>(array('tagid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'ctx' =&gt; <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>, 'rec' =&gt; <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>));
<a name="l3938"><span class="linenum">3938</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="var it4705" onMouseOver="hilite(4705)" onMouseOut="lolite()" onClick="logVariable('courserenderer')" href="../_variables/courserenderer.html">$courserenderer</a>-&gt;<a class="function" onClick="logFunction('tagged_courses')" href="../_functions/tagged_courses.html" onMouseOver="funcPopup(event,'tagged_courses')">tagged_courses</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a>, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>, <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>);
<a name="l3939"><span class="linenum">3939</span></a>      <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('totalpages')" href="../_variables/totalpages.html">$totalpages</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>(<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a> / <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>);
<a name="l3940"><span class="linenum">3940</span></a>  
<a name="l3941"><span class="linenum">3941</span></a>      return new core_tag\output\tagindex(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>, 'core', 'course', <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>,
<a name="l3942"><span class="linenum">3942</span></a>              <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a>, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../_variables/fromctx.html">$fromctx</a>, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('totalpages')" href="../_variables/totalpages.html">$totalpages</a>);
<a name="l3943"><span class="linenum">3943</span></a>  }
<a name="l3944"><span class="linenum">3944</span></a>  
<a name="l3945"><span class="linenum">3945</span></a>  <span class="comment">/**</span>
<a name="l3946"><span class="linenum">3946</span></a>  <span class="comment"> * Implements callback inplace_editable() allowing to edit values in-place</span>
<a name="l3947"><span class="linenum">3947</span></a>  <span class="comment"> *</span>
<a name="l3948"><span class="linenum">3948</span></a>  <span class="comment"> * @param string $itemtype</span>
<a name="l3949"><span class="linenum">3949</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l3950"><span class="linenum">3950</span></a>  <span class="comment"> * @param mixed $newvalue</span>
<a name="l3951"><span class="linenum">3951</span></a>  <span class="comment"> * @return \core\output\inplace_editable</span>
<a name="l3952"><span class="linenum">3952</span></a>  <span class="comment"> */</span>
<a name="l3953"><span class="linenum">3953</span></a>  function <a class="function" onClick="logFunction('core_course_inplace_editable')" href="../_functions/core_course_inplace_editable.html" onMouseOver="funcPopup(event,'core_course_inplace_editable')">core_course_inplace_editable</a>(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a>) {
<a name="l3954"><span class="linenum">3954</span></a>      if (<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a> === 'activityname') {
<a name="l3955"><span class="linenum">3955</span></a>          return \core_course\output\<a class="class" onClick="logClass('course_module_name')" href="../_classes/course_module_name.html" onMouseOver="classPopup(event,'course_module_name')">course_module_name</a>::<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a>);
<a name="l3956"><span class="linenum">3956</span></a>      }
<a name="l3957"><span class="linenum">3957</span></a>  }
<a name="l3958"><span class="linenum">3958</span></a>  
<a name="l3959"><span class="linenum">3959</span></a>  <span class="comment">/**</span>
<a name="l3960"><span class="linenum">3960</span></a>  <span class="comment"> * Returns course modules tagged with a specified tag ready for output on tag/index.php page</span>
<a name="l3961"><span class="linenum">3961</span></a>  <span class="comment"> *</span>
<a name="l3962"><span class="linenum">3962</span></a>  <span class="comment"> * This is a callback used by the tag area core/course_modules to search for course modules</span>
<a name="l3963"><span class="linenum">3963</span></a>  <span class="comment"> * tagged with a specific tag.</span>
<a name="l3964"><span class="linenum">3964</span></a>  <span class="comment"> *</span>
<a name="l3965"><span class="linenum">3965</span></a>  <span class="comment"> * @param core_tag_tag $tag</span>
<a name="l3966"><span class="linenum">3966</span></a>  <span class="comment"> * @param bool $exclusivemode if set to true it means that no other entities tagged with this tag</span>
<a name="l3967"><span class="linenum">3967</span></a>  <span class="comment"> *             are displayed on the page and the per-page limit may be bigger</span>
<a name="l3968"><span class="linenum">3968</span></a>  <span class="comment"> * @param int $fromcontextid context id where the link was displayed, may be used by callbacks</span>
<a name="l3969"><span class="linenum">3969</span></a>  <span class="comment"> *            to display items in the same context first</span>
<a name="l3970"><span class="linenum">3970</span></a>  <span class="comment"> * @param int $contextid context id where to search for records</span>
<a name="l3971"><span class="linenum">3971</span></a>  <span class="comment"> * @param bool $recursivecontext search in subcontexts as well</span>
<a name="l3972"><span class="linenum">3972</span></a>  <span class="comment"> * @param int $page 0-based number of page being displayed</span>
<a name="l3973"><span class="linenum">3973</span></a>  <span class="comment"> * @return \core_tag\output\tagindex</span>
<a name="l3974"><span class="linenum">3974</span></a>  <span class="comment"> */</span>
<a name="l3975"><span class="linenum">3975</span></a>  function <a class="function" onClick="logFunction('course_get_tagged_course_modules')" href="../_functions/course_get_tagged_course_modules.html" onMouseOver="funcPopup(event,'course_get_tagged_course_modules')">course_get_tagged_course_modules</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a> = false, <a class="var it35280" onMouseOver="hilite(35280)" onMouseOut="lolite()" onClick="logVariable('fromcontextid')" href="../_variables/fromcontextid.html">$fromcontextid</a> = 0, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = 0,
<a name="l3976"><span class="linenum">3976</span></a>                                            <a class="var it35281" onMouseOver="hilite(35281)" onMouseOut="lolite()" onClick="logVariable('recursivecontext')" href="../_variables/recursivecontext.html">$recursivecontext</a> = 1, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = 0) {
<a name="l3977"><span class="linenum">3977</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l3978"><span class="linenum">3978</span></a>      <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a> = <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a> ? 20 : 5;
<a name="l3979"><span class="linenum">3979</span></a>  
<a name="l3980"><span class="linenum">3980</span></a>  <span class="comment">    // Build select query.</span>
<a name="l3981"><span class="linenum">3981</span></a>      <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l3982"><span class="linenum">3982</span></a>      <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = &quot;SELECT cm.id AS cmid, c.id AS courseid, <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a>
<a name="l3983"><span class="linenum">3983</span></a>                  FROM {course_modules} cm
<a name="l3984"><span class="linenum">3984</span></a>                  JOIN {tag_instance} tt ON cm.id = tt.itemid
<a name="l3985"><span class="linenum">3985</span></a>                  JOIN {course} c ON cm.course = c.id
<a name="l3986"><span class="linenum">3986</span></a>                  JOIN {context} ctx ON ctx.instanceid = cm.id AND ctx.contextlevel = :coursemodulecontextlevel
<a name="l3987"><span class="linenum">3987</span></a>                 WHERE tt.itemtype = :itemtype AND tt.tagid = :tagid AND tt.component = :component
<a name="l3988"><span class="linenum">3988</span></a>                  AND c.id %COURSEFILTER% AND cm.id %ITEMFILTER%&quot;;
<a name="l3989"><span class="linenum">3989</span></a>  
<a name="l3990"><span class="linenum">3990</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('itemtype' =&gt; 'course_modules', 'tagid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'component' =&gt; 'core',
<a name="l3991"><span class="linenum">3991</span></a>          'coursemodulecontextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>);
<a name="l3992"><span class="linenum">3992</span></a>      if (<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l3993"><span class="linenum">3993</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>);
<a name="l3994"><span class="linenum">3994</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> .= <a class="var it35281" onMouseOver="hilite(35281)" onMouseOut="lolite()" onClick="logVariable('recursivecontext')" href="../_variables/recursivecontext.html">$recursivecontext</a> ? ' AND (ctx.id = :contextid OR ctx.path LIKE :path)' : ' AND ctx.id = :contextid';
<a name="l3995"><span class="linenum">3995</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3996"><span class="linenum">3996</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['path'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>.'/%';
<a name="l3997"><span class="linenum">3997</span></a>      }
<a name="l3998"><span class="linenum">3998</span></a>  
<a name="l3999"><span class="linenum">3999</span></a>      <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> .= ' ORDER BY';
<a name="l4000"><span class="linenum">4000</span></a>      if (<a class="var it35280" onMouseOver="hilite(35280)" onMouseOut="lolite()" onClick="logVariable('fromcontextid')" href="../_variables/fromcontextid.html">$fromcontextid</a>) {
<a name="l4001"><span class="linenum">4001</span></a>  <span class="comment">        // In order-clause specify that modules from inside &quot;fromctx&quot; context should be returned first.</span>
<a name="l4002"><span class="linenum">4002</span></a>          <a class="var it1072" onMouseOver="hilite(1072)" onMouseOut="lolite()" onClick="logVariable('fromcontext')" href="../_variables/fromcontext.html">$fromcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it35280" onMouseOver="hilite(35280)" onMouseOut="lolite()" onClick="logVariable('fromcontextid')" href="../_variables/fromcontextid.html">$fromcontextid</a>);
<a name="l4003"><span class="linenum">4003</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> .= ' (CASE WHEN ctx.id = :fromcontextid OR ctx.path LIKE :frompath THEN 0 ELSE 1 END),';
<a name="l4004"><span class="linenum">4004</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['fromcontextid'] = <a class="var it1072" onMouseOver="hilite(1072)" onMouseOut="lolite()" onClick="logVariable('fromcontext')" href="../_variables/fromcontext.html">$fromcontext</a>-&gt;<a onClick="logVariable('id')" class="var it45112" onMouseOver="hilite(45112)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l4005"><span class="linenum">4005</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['frompath'] = <a class="var it1072" onMouseOver="hilite(1072)" onMouseOut="lolite()" onClick="logVariable('fromcontext')" href="../_variables/fromcontext.html">$fromcontext</a>-&gt;<a onClick="logVariable('path')" class="var it45112" onMouseOver="hilite(45112)" onMouseOut="lolite()" href="../_variables/path.html">path</a>.'/%';
<a name="l4006"><span class="linenum">4006</span></a>      }
<a name="l4007"><span class="linenum">4007</span></a>      <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> .= ' c.sortorder, cm.id';
<a name="l4008"><span class="linenum">4008</span></a>      <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('totalpages')" href="../_variables/totalpages.html">$totalpages</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> + 1;
<a name="l4009"><span class="linenum">4009</span></a>  
<a name="l4010"><span class="linenum">4010</span></a>  <span class="comment">    // Use core_tag_index_builder to build and filter the list of items.</span>
<a name="l4011"><span class="linenum">4011</span></a>  <span class="comment">    // Request one item more than we need so we know if next page exists.</span>
<a name="l4012"><span class="linenum">4012</span></a>      <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_tag_index_builder')" href="../_classes/core_tag_index_builder.html" onMouseOver="classPopup(event,'core_tag_index_builder')">core_tag_index_builder</a>('core', 'course_modules', <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> * <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a> + 1);
<a name="l4013"><span class="linenum">4013</span></a>      while (<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a> = <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('has_item_that_needs_access_check')" href="../_functions/has_item_that_needs_access_check.html" onMouseOver="funcPopup(event,'has_item_that_needs_access_check')">has_item_that_needs_access_check</a>()) {
<a name="l4014"><span class="linenum">4014</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>);
<a name="l4015"><span class="linenum">4015</span></a>          <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('courseid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>;
<a name="l4016"><span class="linenum">4016</span></a>          if (!<a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)) {
<a name="l4017"><span class="linenum">4017</span></a>              <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('set_accessible')" href="../_functions/set_accessible.html" onMouseOver="funcPopup(event,'set_accessible')">set_accessible</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>, false);
<a name="l4018"><span class="linenum">4018</span></a>              continue;
<a name="l4019"><span class="linenum">4019</span></a>          }
<a name="l4020"><span class="linenum">4020</span></a>          <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l4021"><span class="linenum">4021</span></a>  <span class="comment">        // Set accessibility of this item and all other items in the same course.</span>
<a name="l4022"><span class="linenum">4022</span></a>          <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('walk')" href="../_functions/walk.html" onMouseOver="funcPopup(event,'walk')">walk</a>(function (<a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('taggeditem')" href="../_variables/taggeditem.html">$taggeditem</a>) use (<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>, <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>) {
<a name="l4023"><span class="linenum">4023</span></a>              if (<a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('taggeditem')" href="../_variables/taggeditem.html">$taggeditem</a>-&gt;<a onClick="logVariable('courseid')" class="var it45113" onMouseOver="hilite(45113)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> == <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l4024"><span class="linenum">4024</span></a>                  <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('taggeditem')" href="../_variables/taggeditem.html">$taggeditem</a>-&gt;<a onClick="logVariable('cmid')" class="var it45113" onMouseOver="hilite(45113)" onMouseOut="lolite()" href="../_variables/cmid.html">cmid</a>);
<a name="l4025"><span class="linenum">4025</span></a>                  <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('set_accessible')" href="../_functions/set_accessible.html" onMouseOver="funcPopup(event,'set_accessible')">set_accessible</a>(<a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('taggeditem')" href="../_variables/taggeditem.html">$taggeditem</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a>);
<a name="l4026"><span class="linenum">4026</span></a>              }
<a name="l4027"><span class="linenum">4027</span></a>          });
<a name="l4028"><span class="linenum">4028</span></a>      }
<a name="l4029"><span class="linenum">4029</span></a>  
<a name="l4030"><span class="linenum">4030</span></a>      <a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('get_items')" href="../_functions/get_items.html" onMouseOver="funcPopup(event,'get_items')">get_items</a>();
<a name="l4031"><span class="linenum">4031</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>) &gt; <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>) {
<a name="l4032"><span class="linenum">4032</span></a>          <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('totalpages')" href="../_variables/totalpages.html">$totalpages</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> + 2; <span class="comment">// We don't need exact page count, just indicate that the next page exists.</span>
<a name="l4033"><span class="linenum">4033</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>);
<a name="l4034"><span class="linenum">4034</span></a>      }
<a name="l4035"><span class="linenum">4035</span></a>  
<a name="l4036"><span class="linenum">4036</span></a>  <span class="comment">    // Build the display contents.</span>
<a name="l4037"><span class="linenum">4037</span></a>      if (<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>) {
<a name="l4038"><span class="linenum">4038</span></a>          <a class="var it1078" onMouseOver="hilite(1078)" onMouseOut="lolite()" onClick="logVariable('tagfeed')" href="../_variables/tagfeed.html">$tagfeed</a> = new core_tag\output\tagfeed();
<a name="l4039"><span class="linenum">4039</span></a>          foreach (<a class="var it644" onMouseOver="hilite(644)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> as <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l4040"><span class="linenum">4040</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>);
<a name="l4041"><span class="linenum">4041</span></a>              <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('builder')" href="../_variables/builder.html">$builder</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('courseid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l4042"><span class="linenum">4042</span></a>              <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l4043"><span class="linenum">4043</span></a>              <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('cmid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/cmid.html">cmid</a>);
<a name="l4044"><span class="linenum">4044</span></a>              <a class="var it1080" onMouseOver="hilite(1080)" onMouseOut="lolite()" onClick="logVariable('courseurl')" href="../_variables/courseurl.html">$courseurl</a> = <a class="function" onClick="logFunction('course_get_url')" href="../_functions/course_get_url.html" onMouseOver="funcPopup(event,'course_get_url')">course_get_url</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('courseid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>);
<a name="l4045"><span class="linenum">4045</span></a>              <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('cmname')" href="../_variables/cmname.html">$cmname</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a class="function" onClick="logFunction('get_formatted_name')" href="../_functions/get_formatted_name.html" onMouseOver="funcPopup(event,'get_formatted_name')">get_formatted_name</a>();
<a name="l4046"><span class="linenum">4046</span></a>              if (!<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a>) {
<a name="l4047"><span class="linenum">4047</span></a>                  <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('cmname')" href="../_variables/cmname.html">$cmname</a> = <a class="function" onClick="logFunction('shorten_text')" href="../_functions/shorten_text.html" onMouseOver="funcPopup(event,'shorten_text')">shorten_text</a>(<a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('cmname')" href="../_variables/cmname.html">$cmname</a>, 100);
<a name="l4048"><span class="linenum">4048</span></a>              }
<a name="l4049"><span class="linenum">4049</span></a>              <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('cmname')" href="../_variables/cmname.html">$cmname</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('url')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/url.html">url</a>?:<a class="var it1080" onMouseOver="hilite(1080)" onMouseOut="lolite()" onClick="logVariable('courseurl')" href="../_variables/courseurl.html">$courseurl</a>, <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('cmname')" href="../_variables/cmname.html">$cmname</a>);
<a name="l4050"><span class="linenum">4050</span></a>              <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, true,
<a name="l4051"><span class="linenum">4051</span></a>                      array('context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('courseid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>)));
<a name="l4052"><span class="linenum">4052</span></a>              <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it1080" onMouseOver="hilite(1080)" onMouseOut="lolite()" onClick="logVariable('courseurl')" href="../_variables/courseurl.html">$courseurl</a>, <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a>);
<a name="l4053"><span class="linenum">4053</span></a>              <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('img', array('src' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a class="function" onClick="logFunction('get_icon_url')" href="../_functions/get_icon_url.html" onMouseOver="funcPopup(event,'get_icon_url')">get_icon_url</a>()));
<a name="l4054"><span class="linenum">4054</span></a>              <a class="var it1078" onMouseOver="hilite(1078)" onMouseOut="lolite()" onClick="logVariable('tagfeed')" href="../_variables/tagfeed.html">$tagfeed</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>, <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('cmname')" href="../_variables/cmname.html">$cmname</a>, <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a>);
<a name="l4055"><span class="linenum">4055</span></a>          }
<a name="l4056"><span class="linenum">4056</span></a>  
<a name="l4057"><span class="linenum">4057</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render_from_template')" href="../_functions/render_from_template.html" onMouseOver="funcPopup(event,'render_from_template')">render_from_template</a>('core_tag/tagfeed',
<a name="l4058"><span class="linenum">4058</span></a>                  <a class="var it1078" onMouseOver="hilite(1078)" onMouseOut="lolite()" onClick="logVariable('tagfeed')" href="../_variables/tagfeed.html">$tagfeed</a>-&gt;<a class="function" onClick="logFunction('export_for_template')" href="../_functions/export_for_template.html" onMouseOver="funcPopup(event,'export_for_template')">export_for_template</a>(<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>));
<a name="l4059"><span class="linenum">4059</span></a>  
<a name="l4060"><span class="linenum">4060</span></a>          return new core_tag\output\tagindex(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>, 'core', 'course_modules', <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>,
<a name="l4061"><span class="linenum">4061</span></a>                  <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../_variables/exclusivemode.html">$exclusivemode</a>, <a class="var it35280" onMouseOver="hilite(35280)" onMouseOut="lolite()" onClick="logVariable('fromcontextid')" href="../_variables/fromcontextid.html">$fromcontextid</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it35281" onMouseOver="hilite(35281)" onMouseOut="lolite()" onClick="logVariable('recursivecontext')" href="../_variables/recursivecontext.html">$recursivecontext</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('totalpages')" href="../_variables/totalpages.html">$totalpages</a>);
<a name="l4062"><span class="linenum">4062</span></a>      }
<a name="l4063"><span class="linenum">4063</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'print_string': ['print_string', 'Prints out a translated string. ', [['lib','moodlelib.php',6877]], 458],
'set_legacy_logdata': ['set_legacy_logdata', 'Return the legacy event log data. ', [['lib/classes/event','webservice_function_called.php',87],['mod/workshop/classes/event','assessable_uploaded.php',122],['lib/classes/event','role_capabilities_updated.php',83],['mod/assign/classes/event','base.php',99],['lib/classes/event','course_resources_list_viewed.php',78],['lib/classes/event','tag_updated.php',76],['lib/classes/event','course_updated.php',103],['lib/classes/event','course_category_updated.php',78],['lib/classes/event','webservice_login_failed.php',91],['lib/classes/event','content_viewed.php',98]], 55],
'course_format_name': ['course_format_name', 'given a course object with shortname & fullname, this function will truncate the the number of chars allowed and add ... if it was too long ', [['course','lib.php',2379]], 0],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1796]], 155],
'shorten_text': ['shorten_text', 'Given some text (which may contain HTML) and an ideal length, this function truncates the text neatly on a word boundary if possible ', [['lib','moodlelib.php',7822]], 87],
'save_local_role_names': ['save_local_role_names', 'Save the Your name for \'Some role\' strings. ', [['course','lib.php',2571]], 2],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_install.php',64],['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50]], 85],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'update_module': ['update_module', 'Update a module. ', [['course','lib.php',3560]], 2],
'course_overviewfiles_options': ['course_overviewfiles_options', 'Returns options to use in course overviewfiles filemanager ', [['course','lib.php',2607]], 5],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'delete_instance': ['delete_instance', 'Delete all data related to a given workshop module instance ', [['mod/workshop/eval','lib.php',59],['mod/workshop/allocation/scheduled','lib.php',200],['mod/workshop/eval/best','lib.php',125],['mod/workshop/form','lib.php',118],['lib','enrollib.php',1849],['mod/workshop/allocation/random','lib.php',243],['mod/assign/submission/file','locallib.php',447],['mod/workshop/form/rubric','lib.php',405],['mod/assign/feedback/comments','locallib.php',485],['mod/workshop/form/comments','lib.php',360],['mod/workshop/allocation/manual','lib.php',349],['lib','accesslib.php',6111],['mod/assign','assignmentplugin.php',525],['mod/workshop/allocation','lib.php',62],['mod/assign','locallib.php',715],['mod/workshop/form/accumulative','lib.php',375],['mod/workshop/form/numerrors','lib.php',394],['mod/assign/submission/onlinetext','locallib.php',550],['mod/assign/feedback/file','locallib.php',320],['mod/assign/feedback/editpdf','locallib.php',324],['tag/classes','tag.php',473],['enrol/lti','lib.php',145]], 37],
'mark_dirty': ['mark_dirty', 'Mark a context as dirty (with timestamp) so as to force reloading of the context. ', [['lib','accesslib.php',5843]], 40],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'compare_activities_by_time_desc': ['compare_activities_by_time_desc', 'Compare two objects to find out their correct order based on timestamp (to be used by usort). Sorts by descending order of time. ', [['course','lib.php',3727]], 0],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1542]], 65],
'course_get_url': ['course_get_url', 'The URL to use for the specified course (with section) ', [['course','lib.php',3507]], 58],
'set_item_tags': ['set_item_tags', 'Sets the list of tag instances for one item (table record). ', [['tag/classes','tag.php',666]], 57],
'update_section_format_options': ['update_section_format_options', 'Updates format options for a section ', [['course/format','lib.php',791]], 4],
'is_viewing': ['is_viewing', 'Returns true if the user has moodle/course:view capability in the course, this is intended for admins, managers (aka small admins), inspectors, etc. ', [['lib','accesslib.php',2005]], 25],
'get_types': ['get_types', 'Returns an array of media that this media instance applies to ', [['lib','csslib.php',2087],['repository','lib.php',689],['lib/classes','filetypes.php',277]], 15],
'get_plan': ['get_plan', '', [['backup/controller','backup_controller.class.php',302],['backup/controller','restore_controller.class.php',309]], 50],
'get_tasks': ['get_tasks', 'Gets all backup tasks from the controller ', [['backup/util/ui','base_ui.class.php',183],['backup/util/plan','base_plan.class.php',78]], 21],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2038]], 145],
'check_shortname_collision': ['check_shortname_collision', 'Checks that the shortname used by the course does not conflict with any other courses that exist ', [['course','lib.php',3128]], 1],
'message_send': ['message_send', 'Called when a message provider wants to send a message. This functions checks the message recipient\'s message processor configuration then sends the message to the configured processors ', [['lib','messagelib.php',29]], 94],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'get_backupid': ['get_backupid', '', [['backup/util/plan','backup_task.class.php',42],['backup/util/plan','backup_plan.class.php',66],['backup/util/ui','backup_ui.class.php',114],['backup/util/ui','backup_ui_stage.class.php',53],['backup/controller','backup_controller.class.php',240],['backup/util/plan','backup_step.class.php',42]], 68],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'get_course_context': ['get_course_context', '', [['lib','deprecatedlib.php',1907],['lib','accesslib.php',5764],['lib','accesslib.php',6909],['lib','accesslib.php',7170],['lib','accesslib.php',7381],['mod/assign','gradingtable.php',1372],['mod/assign','locallib.php',1268]], 86],
'sql_concat': ['sql_concat', '', [['lib/dml','pdo_moodle_database.php',537],['lib/dml','oci_native_moodle_database.php',1602],['lib/dml','sqlite3_pdo_moodle_database.php',361],['lib/dml','pgsql_native_moodle_database.php',1225],['lib/dml','mssql_native_moodle_database.php',1258],['lib/dml','mysqli_native_moodle_database.php',1556],['lib/dml','sqlsrv_native_moodle_database.php',1324],['lib/dml/tests','dml_test.php',5554]], 74],
'fix_course_sortorder': ['fix_course_sortorder', 'Fixes course category and course sortorder, also verifies category and course parents and paths. (circular references are not fixed) ', [['lib','datalib.php',854]], 19],
'delete_instances': ['delete_instances', 'Bulk delete all tag instances for a component or tag area ', [['tag/classes','tag.php',500]], 7],
'has_all_capabilities': ['has_all_capabilities', 'Check if the user has all the capabilities in a list. ', [['lib','accesslib.php',521]], 31],
'duplicate_module': ['duplicate_module', 'Api to duplicate a module. ', [['course','lib.php',3632]], 4],
'execute_precheck': ['execute_precheck', 'Execute the restore prechecks to detect any problem before proceed with restore ', [['backup/controller','restore_controller.class.php',355]], 21],
'can_update_moduleinfo': ['can_update_moduleinfo', 'Check if user is allowed to update module info and returns related item/data to the module. ', [['course','modlib.php',440]], 2],
'get_basepath': ['get_basepath', '', [['backup/util/plan','backup_plan.class.php',82],['backup/util/plan','restore_plan.class.php',89],['backup/util/plan','base_step.class.php',112],['backup/util/plan','base_task.class.php',113]], 36],
'average_number_of_participants': ['average_number_of_participants', 'Average number of participants ', [['course','lib.php',2881]], 2],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'mod_duplicate_activity': ['mod_duplicate_activity', 'Duplicate a module on the course for ajax. ', [['course','lib.php',3598]], 1],
'add_course_module': ['add_course_module', '', [['course','lib.php',1429]], 4],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1846]], 52],
'execute_plan': ['execute_plan', 'Executes the backup ', [['backup/controller','backup_controller.class.php',306],['backup/controller','restore_controller.class.php',321]], 38],
'update_moduleinfo': ['update_moduleinfo', 'Update the module info. This function doesn\'t check the user capabilities. It updates the course module and the module instance. Then execute common action to create/update module process (trigger event, rebuild cache, save plagiarism settings...). ', [['course','modlib.php',467]], 2],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5250],['lib','accesslib.php',6079]], 61],
'get_icon_url': ['get_icon_url', '', [['lib','modinfolib.php',1349]], 7],
'get_items': ['get_items', 'Get all items in this feedback or this template ', [['mod/feedback/classes','structure.php',106],['lib/simplepie/library','SimplePie.php',2813],['admin/tool/recyclebin/classes','category_bin.php',81],['admin/tool/recyclebin/classes','course_bin.php',77],['tag/classes','index_builder.php',194],['lib','navigationlib.php',3159],['grade','lib.php',2681],['admin/tool/customlang','locallib.php',413],['blocks/rss_client/classes/output','feed.php',156]], 59],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'make_categories_options': ['make_categories_options', 'Returns full course categories trees to be used in html_writer::select() ', [['course','lib.php',1376]], 3],
'course_change_sortorder_by_one': ['course_change_sortorder_by_one', 'Changes the course sortorder by one, moving it up or down one in respect to sort order. ', [['course','lib.php',3795]], 6],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'fulldelete': ['fulldelete', 'Recursively delete the file or folder with path $location. That is, if it is a file delete it. If it is a folder, delete all its content then delete it. If $location does not exist to start, that is not considered an error. ', [['lib','filelib.php',2370]], 39],
'moveto_module': ['moveto_module', 'Move the module object $mod to the specified $section If $beforemod exists then that is the module before which $modid should be inserted ', [['course','lib.php',2115]], 17],
'set_coursemodule_name': ['set_coursemodule_name', 'Changes the course module name ', [['course','lib.php',1641]], 1],
'summary_editor_options': ['summary_editor_options', 'Returns an array of options to use with a summary editor ', [['course','lib.php',3047]], 2],
'set_filename': ['set_filename', 'Set the filename for the uploaded csv file ', [['lib','csvlib.class.php',466],['lib/classes/dataformat','base.php',56]], 10],
'get_section_name': ['get_section_name', 'Returns the display name of the given section that the course prefers. ', [['course/format/weeks','lib.php',47],['course/format','lib.php',341],['course/format','lib.php',1114],['course/format','formatlegacy.php',53],['course/format/topics','lib.php',47],['course','lib.php',2487]], 60],
'get_requester': ['get_requester', 'Returns the user who requested this course ', [['course','lib.php',3111]], 1],
'question_delete_activity': ['question_delete_activity', 'All question categories and their questions are deleted for this activity. ', [['lib','questionlib.php',518]], 3],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'average_number_of_courses_modules': ['average_number_of_courses_modules', 'Average number of course modules ', [['course','lib.php',2914]], 2],
'course_view': ['course_view', 'Trigger course viewed event. This API function is used when course view actions happens, usually in course/view.php but also in external functions. ', [['course','lib.php',3892]], 3],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'course_format_uses_sections': ['course_format_uses_sections', 'Tells if current course format uses sections ', [['course','lib.php',2501]], 25],
'course_section_cm_list_item': ['course_section_cm_list_item', 'Renders HTML to display one course module for display within a section. ', [['course','renderer.php',892]], 4],
'include_course_ajax': ['include_course_ajax', 'Include the relevant javascript and language strings for the resource toolbox YUI module ', [['course','lib.php',3354]], 2],
'download_file': ['download_file', 'Download the csv file. ', [['lib','csvlib.class.php',502],['lib','boxlib.php',71],['repository/skydrive','microsoftliveapi.php',91],['lib','googleapi.php',191]], 9],
'string_for_js': ['string_for_js', 'Make a language string available to JavaScript. ', [['lib','outputrequirementslib.php',1120]], 64],
'get_array_of_activities': ['get_array_of_activities', 'For a given course, returns an array of course activity objects Each item in the array contains he following properties: ', [['course','lib.php',988]], 1],
'get_courses': ['get_courses', 'Returns list of courses, for whole site, or category ', [['lib','datalib.php',592],['course','externallib.php',394],['badges/criteria','award_criteria_courseset.php',76],['lib','coursecatlib.php',1436]], 55],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',1977]], 289],
'set_accessible': ['set_accessible', 'Marks record or group of records as accessible (or not accessible) ', [['tag/classes','index_builder.php',273]], 4],
'sql_like': ['sql_like', 'Returns \'LIKE\' part of a query. ', [['lib/dml','oci_native_moodle_database.php',1575],['lib/dml','pgsql_native_moodle_database.php',1188],['lib/dml','mssql_native_moodle_database.php',1224],['lib/dml','mysqli_native_moodle_database.php',1514],['lib/dml','moodle_database.php',2053],['lib/dml','sqlsrv_native_moodle_database.php',1291]], 159],
'pix_icon': ['pix_icon', 'Return HTML for a pix_icon. ', [['lib','outputrenderers.php',2161]], 504],
'get_strings': ['get_strings', 'Converts an array of strings to their localized value. ', [['lib','moodlelib.php',6862],['lib/external','externallib.php',156]], 56],
'get_section_info_all': ['get_section_info_all', 'Gets all sections as array from section number => data about section. ', [['lib','modinfolib.php',303]], 27],
'user_is_editing': ['user_is_editing', 'Should the current user see this page in editing mode. That is, are they allowed to edit this page, and are they currently in editing mode. ', [['lib','pagelib.php',855]], 52],
'get_course_mods': ['get_course_mods', 'Just gets a raw list of all modules in a course ', [['lib','datalib.php',1217]], 7],
'get_formatted_name': ['get_formatted_name', 'Returns the name to display on course/overview page, formatted and passed through filters ', [['lib','modinfolib.php',1279],['lib','coursecatlib.php',2149],['lib','coursecatlib.php',3005]], 52],
'course_section_cm': ['course_section_cm', 'Renders HTML to display one course module in a course section ', [['course','renderer.php',914]], 3],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'add_worksheet': ['add_worksheet', 'Create one Moodle Worksheet ', [['lib','excellib.class.php',70],['lib','odslib.class.php',46]], 20],
'course_get_cm_edit_actions': ['course_get_cm_edit_actions', 'Returns the list of all editing actions that current user can perform on the module ', [['course','lib.php',2159]], 3],
'yui_module': ['yui_module', 'Creates a JavaScript function call that requires one or more modules to be loaded. ', [['lib','outputrequirementslib.php',1023]], 81],
'__get': ['__get', '', [['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/minify/lib','JSMinPlus.php',1686],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121],['user/classes/output/myprofile','category.php',185],['lib/adodb','adodb-active-record.inc.php',295],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Socket','Client.php',91],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/simplepie/library/SimplePie','IRI.php',168],['lib/horde/framework/Horde','Variables.php',150],['mod/lesson','locallib.php',2028],['lib','modinfolib.php',124],['lib','modinfolib.php',1138],['lib','modinfolib.php',2577],['lib','adminlib.php',1071],['lib/dml','database_column_info.php',87],['lib/classes/message/inbound','handler.php',79],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib','navigationlib.php',5107],['lib/classes/plugininfo','block.php',44],['lib/classes/message','message.php',187],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/horde/framework/Horde/Support','Array.php',116],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['admin/tool/monitor/classes','subscription.php',54],['lib','pagelib.php',761],['user/classes/output/myprofile','tree.php',144],['lib/horde/framework/Horde','Stream.php',74],['lib/adodb','adodb-active-recordx.inc.php',341],['lib','accesslib.php',5286],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/minify/lib/MrClay/Cli','Arg.php',170],['tag/classes/output','tagindex.php',123],['calendar/tests','rrule_manager_tests.php',523],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['lib/classes/plugininfo','mod.php',43],['course','lib.php',3089],['lib/classes/plugininfo','base.php',177],['lib/classes/event','base.php',909],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib','coursecatlib.php',131],['lib','coursecatlib.php',2943],['tag/classes','tag.php',89],['lib/google/src/Google','Model.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['calendar','lib.php',2077],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['mod/quiz','renderer.php',1349],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['user/classes/output/myprofile','node.php',106],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib/pear/Net/GeoIP','Location.php',158]], 20],
'set_num_format': ['set_num_format', 'Set the numerical format of the format. It can be date, time, currency, etc... ', [['lib','excellib.class.php',825],['lib','odslib.class.php',710]], 2],
'course_create_sections_if_missing': ['course_create_sections_if_missing', 'Creates missing course section(s) and rebuilds course cache ', [['course','lib.php',1440]], 16],
'blocks_remove_inappropriate': ['blocks_remove_inappropriate', 'Actually delete from the database any blocks that are currently on this page, but which should not be there according to blocks_name_allowed_in_format. ', [['lib','blocklib.php',1974]], 1],
'set_section_visible': ['set_section_visible', 'For a given course section, marks it visible or hidden, and does the same for every activity in that section ', [['course','lib.php',1187]], 13],
'supports_ajax': ['supports_ajax', 'Returns the information about the ajax support in the given source format ', [['course/format/weeks','lib.php',136],['course/format','lib.php',372],['course/format','formatlegacy.php',143],['course/format/topics','lib.php',133]], 3],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'write': ['write', 'Write settings.xml to XML format ', [['lib/phpexcel/PHPExcel/Writer/OpenDocument','Settings.php',30],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Pop3.php',35],['lib/phpexcel/PHPExcel/Writer/OpenDocument/Cell','Comment.php',39],['auth/cas/CAS/CAS/PGTStorage','File.php',188],['lib/tcpdf','tcpdf.php',6254],['backup/util/xml/output','xml_output.class.php',103],['admin/tool/log/classes/helper','buffered_writer.php',53],['lib/phpexcel/PHPExcel/Writer/OpenDocument','Meta.php',30],['lib/horde/framework/Horde','Secret.php',62],['lib','excellib.class.php',270],['backup/util/xml','xml_writer.class.php',224],['lib/google/src/Google/Logger','File.php',74],['lib/phpexcel/PHPExcel/Writer/OpenDocument','Styles.php',30],['lib','odslib.class.php',261],['lib/phpexcel/PHPExcel/Writer/OpenDocument','Content.php',42],['lib/google/src/Google/Logger','Null.php',37],['admin/tool/log/classes/log','writer.php',30],['auth/cas/CAS/CAS/PGTStorage','Db.php',340],['lib/phpexcel/PHPExcel/Writer/OpenDocument','Mimetype.php',30],['lib/google/src/Google/Logger','Psr.php',87],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',187],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Socket.php',38],['lib/google/src/Google/Service','CloudMonitoring.php',387]], 213],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'print_log_csv': ['print_log_csv', '', [['course','lib.php',546]], 0],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1073]], 1292],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'send': ['send', 'Send the request to the server - decode and return the response ', [['mnet/xmlrpc','client.php',128],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',126],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',116],['auth/cas/CAS/CAS/Request','RequestInterface.php',136],['lib/horde/framework/Horde/Mail/Transport','Mock.php',91],['auth/cas/CAS/CAS/Request','MultiRequestInterface.php',75],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',179],['lib/horde/framework/Horde/Mime','Part.php',1679],['auth/cas/CAS/CAS/Request','AbstractRequest.php',223],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',65],['backup/util/xml/output','file_xml_output.class.php',66],['lib/jabber/XMPP','BOSH.php',150],['lib/horde/framework/Horde/Mail/Transport','Null.php',54],['lib','excellib.class.php',132],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',158],['auth/cas/CAS/CAS/ProxiedService','Http.php',62],['lib/google/src/Google/Service','Gmail.php',816],['lib/google/src/Google/Service','Gmail.php',1145],['lib','odslib.class.php',84],['auth/cas/CAS/CAS/Request','CurlMultiRequest.php',99],['lib/horde/framework/Horde/Mime','Mail.php',372],['mod/lti/classes/local/ltiservice','response.php',205],['lib/horde/framework/Horde/Mail/Transport','Mail.php',60],['lib/phpmailer','class.phpmailer.php',1168],['backup/util/xml/output','memory_xml_output.class.php',59],['lib/jabber/XMPP','XMLStream.php',677],['lib/pear/Auth','RADIUS.php',380],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',89]], 193],
'course_change_sortorder_after_course': ['course_change_sortorder_after_course', 'Changes the sort order of courses in a category so that the first course appears after the second. ', [['course','lib.php',3826]], 4],
'get_records_menu': ['get_records_menu', 'Get the first two columns from a number of records as an associative array where all the given conditions met. ', [['lib/dml','moodle_database.php',1375]], 75],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'set_hidden': ['set_hidden', 'Set the hidden status of grade_item and all grades. ', [['lib/grade','grade_item.php',632],['lib/grade','grade_category.php',2578],['lib/grade','grade_object.php',444],['lib/grade','grade_grade.php',624]], 32],
'build_logs_array': ['build_logs_array', '', [['course','lib.php',233]], 4],
'print_log_xls': ['print_log_xls', '', [['course','lib.php',628]], 0],
'course_set_marker': ['course_set_marker', 'Set highlighted section. Only one section can be highlighted at the time. ', [['course','lib.php',1174]], 8],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1588]], 138],
'can_access_course': ['can_access_course', 'Checks if current user has access to the course ', [['tag/classes','index_builder.php',335],['lib','accesslib.php',2130]], 19],
'print_log_ods': ['print_log_ods', '', [['course','lib.php',742]], 0],
'update_moved': ['update_moved', 'Update context info after moving context in the tree structure. ', [['lib','accesslib.php',5470]], 6],
'add_format': ['add_format', 'Create one cell Format. ', [['lib','excellib.class.php',80],['lib','odslib.class.php',58],['lib/portfolio','caller.php',438]], 73],
'__isset': ['__isset', 'Overload __isset() to provide access via properties ', [['lib/simplepie/library/SimplePie','IRI.php',221],['lib/horde/framework/Horde','Variables.php',111],['mod/lesson','locallib.php',2044],['lib','modinfolib.php',140],['lib','modinfolib.php',1178],['lib','modinfolib.php',2545],['lib','adminlib.php',1101],['lib/dml','database_column_info.php',102],['lib/classes/message','message.php',218],['lib/horde/framework/Horde/Support','Array.php',128],['admin/tool/monitor/classes','subscription.php',68],['lib','accesslib.php',5305],['lib/mustache/src/Mustache','HelperCollection.php',99],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',170],['tag/classes/output','tagindex.php',133],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',115],['lib/horde/framework/Horde/Support','ObjectStub.php',57],['course','lib.php',3099],['lib/classes/event','base.php',942],['lib','coursecatlib.php',155],['lib','coursecatlib.php',2933],['tag/classes','tag.php',99],['lib/google/src/Google','Model.php',286],['calendar','lib.php',2096],['lib/horde/framework/Horde/Support','Stub.php',53],['lib/pear/Net/GeoIP','Location.php',187]], 2],
'reset_course_cache': ['reset_course_cache', 'Resets cache for the course (or all caches) To be called from {@link rebuild_course_cache()} ', [['course/format','lib.php',192]], 9],
'toggle_visibility': ['toggle_visibility', 'Toggles the visibility of an event ', [['calendar','lib.php',2598]], 6],
'print_mnet_log': ['print_mnet_log', '', [['course','lib.php',441]], 0],
'write_date': ['write_date', 'Write one date somewhere in the worksheet. ', [['lib','excellib.class.php',222],['lib','odslib.class.php',205]], 5],
'get_events_select_count': ['get_events_select_count', '', [['admin/tool/log/store/standard/classes/log','store.php',139],['admin/tool/log/store/legacy/classes/log','store.php',157],['admin/tool/log/store/database/classes/log','store.php',241],['lib/classes/log','sql_reader.php',54]], 6],
'grade_update_mod_grades': ['grade_update_mod_grades', 'Force full update of module grades in central gradebook ', [['lib','gradelib.php',1345]], 6],
'asort_objects_by_property': ['asort_objects_by_property', 'Locale aware sort of objects by a property in common to all objects ', [['lib/classes','collator.php',249]], 37],
'get_module_metadata': ['get_module_metadata', 'Retrieve all metadata for the requested modules ', [['course','lib.php',1218]], 5],
'blocks_add_default_course_blocks': ['blocks_add_default_course_blocks', 'Add the default blocks to a course. ', [['lib','blocklib.php',2234]], 2],
'purge_by_event': ['purge_by_event', 'Purges a cache of all information on a given event. ', [['cache/classes','helper.php',303]], 30],
'plugin_supports': ['plugin_supports', 'Checks whether a plugin supports a specified feature. ', [['lib','moodlelib.php',7486]], 60],
'set_coursemodule_visible': ['set_coursemodule_visible', 'Set the visibility of a module and inherent properties. ', [['course','lib.php',1563]], 35],
'delete_section': ['delete_section', 'Deletes a section ', [['course/format','lib.php',970]], 3],
'get_readers': ['get_readers', '', [['lib/classes/log','dummy_manager.php',31],['report/loglive/classes','renderable.php',126],['report/log/classes','renderable.php',166],['admin/tool/log/classes/log','manager.php',93],['lib/classes/log','manager.php',38]], 33],
'enrol_try_internal_enrol': ['enrol_try_internal_enrol', 'Try to enrol user via default internal auth plugin. ', [['lib','enrollib.php',903]], 5],
'move_courses': ['move_courses', 'Efficiently moves many courses around while maintaining sortorder in order. ', [['course','lib.php',2428]], 4],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'fetch_all': ['fetch_all', 'Finds and returns all grade_item instances based on params. ', [['lib/grade','grade_item.php',385],['lib/grade','grade_category.php',209],['lib/grade','grade_scale.php',100],['lib/grade','grade_object.php',138],['completion','data_object.php',165],['lib/grade','grade_grade.php',645],['lib/grade','grade_outcome.php',193],['completion','completion_aggregation.php',79],['completion/criteria','completion_criteria.php',153],['completion','completion_criteria_completion.php',84]], 66],
'build_mnet_logs_array': ['build_mnet_logs_array', '', [['course','lib.php',142]], 1],
'get_category': ['get_category', 'Get a category for the feed ', [['lib/simplepie/library','SimplePie.php',2013],['lib/simplepie/library/SimplePie','Source.php',140],['lib/simplepie/library/SimplePie','Enclosure.php',328],['lib/simplepie/library/SimplePie','Item.php',410],['course','lib.php',3157]], 2],
'get_moduleid': ['get_moduleid', '', [['backup/moodle2','backup_block_task.class.php',88],['backup/moodle2','restore_activity_task.class.php',99],['backup/moodle2','backup_activity_task.class.php',75]], 16],
'add_moduleinfo': ['add_moduleinfo', 'Add course module. ', [['course','modlib.php',32]], 4],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'hook_course_module_deleted': ['hook_course_module_deleted', 'Action to perform when a course module is deleted. ', [['competency/classes','api.php',4668]], 2],
'print_log': ['print_log', '', [['course','lib.php',324]], 0],
'component_callback': ['component_callback', 'Invoke component\'s callback functions ', [['lib','moodlelib.php',7413]], 28],
'get_old_contextid': ['get_old_contextid', '', [['backup/moodle2','restore_activity_task.class.php',119],['backup/moodle2','restore_block_task.class.php',141],['backup/util/plan','restore_task.class.php',90]], 13],
'notify': ['notify', 'Print a bold message in an optional color. ', [['lib','deprecatedlib.php',911],['course','lib.php',3271]], 74],
'course_can_delete_section': ['course_can_delete_section', 'Checks if the current user can delete a section (if course format allows it and user has proper permissions). ', [['course','lib.php',2008]], 13],
'get_course': ['get_course', 'Get the course id. ', [['course','moodleform_mod.php',132],['search/classes','engine.php',102],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',722],['tag/classes','index_builder.php',296],['lib','modinfolib.php',180],['lib','modinfolib.php',1424],['lib','modinfolib.php',2706],['lib','datalib.php',568],['availability/classes','info.php',70],['mod/assign','locallib.php',1316],['admin/tool/uploadcourse/classes','processor.php',232],['enrol','locallib.php',912],['search/tests/fixtures','mock_search_engine.php',56]], 302],
'print_course_request_buttons': ['print_course_request_buttons', 'Print the buttons relating to course requests. ', [['course','lib.php',1395]], 2],
'get_fieldset_select': ['get_fieldset_select', 'Selects records and return values of chosen field as an array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1608]], 32],
'set_coursemodule_idnumber': ['set_coursemodule_idnumber', '', [['course','lib.php',1553]], 1],
'file_get_typegroup': ['file_get_typegroup', 'Returns array of elements of type $element in type group(s) ', [['lib','filelib.php',1719]], 14],
'tagged_courses': ['tagged_courses', 'Renders html to print list of courses tagged with particular tag ', [['course','renderer.php',1882]], 1],
'course_get_tagged_courses': ['course_get_tagged_courses', 'Returns courses tagged with a specified tag. ', [['course','lib.php',3912]], 0],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6066]], 56],
'walk': ['walk', 'Helper function for walking the Mustache token parse tree. ', [['lib/mustache/src/Mustache','Compiler.php',75],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',3459],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',4554],['tag/classes','index_builder.php',264]], 49],
'delete_mod_from_section': ['delete_mod_from_section', '', [['course','lib.php',1812]], 3],
'add_default_instance': ['add_default_instance', 'Add new instance of enrol plugin with default settings. ', [['enrol/manual','lib.php',123],['lib','enrollib.php',1814],['enrol/self','lib.php',318],['enrol/guest','lib.php',263]], 7],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'prepare': ['prepare', '', [['lib/adodb/drivers','adodb-odbtp.inc.php',465],['lib/mustache/src/Mustache','Compiler.php',576],['lib/adodb/drivers','adodb-ibase.inc.php',330],['lib/htmlpurifier/HTMLPurifier/URIFilter','HostBlacklist.php',23],['lib/htmlpurifier/HTMLPurifier/Injector','RemoveEmpty.php',41],['lib/adodb/drivers','adodb-odbc.inc.php',492],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableExternal.php',19],['lib/htmlpurifier/HTMLPurifier','Injector.php',88],['lib/adodb/drivers','adodb-pdo.inc.php',402],['lib/htmlpurifier/HTMLPurifier','URIFilter.php',51],['lib','outputcomponents.php',2393],['lib/adodb/drivers','adodb-oci8po.inc.php',44],['admin/tool/uploadcourse/classes','course.php',400],['lib/adodb/drivers','adodb-mssql.inc.php',644],['lib/adodb/drivers','adodb-mssqlnative.inc.php',507],['lib/adodb','adodb.inc.php',790],['lib/htmlpurifier/HTMLPurifier/Injector','RemoveSpansWithoutAttributes.php',34],['lib/htmlpurifier/HTMLPurifier/URIFilter','SafeIframe.php',33],['lib/adodb/drivers','adodb-db2.inc.php',616],['lib/htmlpurifier/HTMLPurifier/Injector','SafeObject.php',54],['mod/scorm','renderer.php',144],['course','lib.php',2984],['lib/adodb/drivers','adodb-oci8.inc.php',1016],['lib/adodb/drivers','adodb-mysqli.inc.php',727],['lib/htmlpurifier/HTMLPurifier/URIFilter','Munge.php',44],['lib/htmlpurifier/HTMLPurifier/Injector','PurifierLinkify.php',29],['lib/htmlpurifier/HTMLPurifier/URIFilter','MakeAbsolute.php',26],['lib/adodb/drivers','adodb-ads.inc.php',508]], 123],
'course_ajax_enabled': ['course_ajax_enabled', 'Determine whether course ajax should be enabled for the specified course ', [['course','lib.php',3322]], 5],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'enrol_get_plugin': ['enrol_get_plugin', 'Returns instance of enrol plugin ', [['lib','enrollib.php',111]], 156],
'course_get_cm_move': ['course_get_cm_move', 'Returns the move action. ', [['course','lib.php',2334]], 1],
'paging_bar': ['paging_bar', 'Returns HTML to display a single paging bar to provide access to other pages  (usually in a search) ', [['lib','outputrenderers.php',3006]], 59],
'course_integrity_check': ['course_integrity_check', 'Checks the integrity of the course data. ', [['course','lib.php',856]], 9],
'action_link': ['action_link', 'Renders a special html link with attached action ', [['lib','outputrenderers.php',1623],['report/loglive/classes','table_log.php',285],['report/log/classes','table_log.php',332]], 75],
'course_get_tagged_course_modules': ['course_get_tagged_course_modules', 'Returns course modules tagged with a specified tag ready for output on tag/index.php page ', [['course','lib.php',3959]], 7],
'course_update_section': ['course_update_section', 'Updates the course section ', [['course','lib.php',1944]], 3],
'get_users_from_config': ['get_users_from_config', 'Use this function to get a list of users from a config setting of type admin_setting_users_with_capability. ', [['lib','moodlelib.php',1550]], 2],
'enrol_course_updated': ['enrol_course_updated', 'Update enrol instances after course edit form submission ', [['lib','enrollib.php',364]], 3],
'groups_get_members': ['groups_get_members', 'Returns the users in the specified group. ', [['lib','grouplib.php',416]], 9],
'get_logs': ['get_logs', 'Returns the logs ', [['backup/util/structure','backup_nested_element.class.php',173],['lib','datalib.php',1674],['mod/workshop/allocation','lib.php',168]], 4],
'file_prepare_standard_editor': ['file_prepare_standard_editor', 'Prepares \'editor\' formslib element from data in database ', [['lib','filelib.php',108]], 41],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'get_coursemodule_from_id': ['get_coursemodule_from_id', 'Given an id of a course module, finds the coursemodule description ', [['lib','datalib.php',1238]], 212],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'file_postupdate_standard_editor': ['file_postupdate_standard_editor', 'Prepares the content of the \'editor\' form element with embedded media files to be saved in database ', [['lib','filelib.php',202]], 45],
'course_add_cm_to_section': ['course_add_cm_to_section', 'Adds an existing module to the section ', [['course','lib.php',1475]], 11],
'write_string': ['write_string', 'Write one string somewhere in the worksheet. ', [['lib','excellib.class.php',180],['lib','odslib.class.php',142]], 113],
'doc_link': ['doc_link', 'Returns document link for performance issue ', [['report/performance','locallib.php',94],['lib','outputrenderers.php',2137]], 18],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'move_section_to': ['move_section_to', 'Moves a section within a course, from a position to another. Be very careful: $section and $destination refer to section number, not id!. ', [['course','lib.php',1833]], 9],
'get_format_options': ['get_format_options', 'Returns the format options stored for this course or course section ', [['course/format','lib.php',571]], 18],
'can_delete_course': ['can_delete_course', 'Can the current user delete this course? Course creators have exception, 1 day after the creation they can sill delete the course. ', [['course','lib.php',2528]], 4],
'has_item_that_needs_access_check': ['has_item_that_needs_access_check', 'Returns the first row from the SQL result that we don\'t know whether it is accessible by user or not. ', [['tag/classes','index_builder.php',232]], 4],
'approve': ['approve', 'Marks a comment as not spam. (comments.approve) ', [['lib/google/src/Google/Service','Blogger.php',1049],['lib/google/src/Google/Service','AndroidEnterprise.php',1735],['course','lib.php',3182]], 4],
'reorder_sections': ['reorder_sections', 'Reordering algorithm for course sections. Given an array of section->section indexed by section->id, an original position number and a target position number, rebuilds the array so that the move is made without any duplication of section positions. Note: The target_position is the position AFTER WHICH the moved section will be inserted. If you want to insert a section before the first one, you must give 0 as the target (section 0 can never be moved). ', [['course','lib.php',2044]], 4],
'get_view_url': ['get_view_url', 'The URL to use for the specified course (with section) ', [['course/format/weeks','lib.php',89],['course/format','lib.php',398],['course/format','lib.php',1124],['course/format','formatlegacy.php',72],['course/format/social','lib.php',38],['course/format/singleactivity','lib.php',39],['course/format/topics','lib.php',86],['tag/classes','tag.php',409]], 10],
'set_column': ['set_column', 'Sets the width (and other settings) of one column. ', [['lib','excellib.class.php',331],['lib','odslib.class.php',328]], 13],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'update_course': ['update_course', 'Will update a moodle course with new values from LDAP A field will be updated only if it is marked to be updated on sync in plugin settings ', [['enrol/ldap','lib.php',1025],['course','lib.php',2758]], 44],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 99],
'start_delegated_transaction': ['start_delegated_transaction', 'On DBs that support it, switch to transaction mode and begin a transaction you\'ll need to ensure you call allow_commit() on the returned object or your changes *will* be lost. ', [['lib/dml','moodle_database.php',2393]], 145],
'course_delete_module': ['course_delete_module', 'This function will handle the whole deletion process of a module. This includes calling the modules delete_instance function, deleting files, events, grades, conditional data, the data in the course_module and course_sections table and adding a module deletion event to the DB. ', [['course','lib.php',1685]], 26],
'update_course_format_options': ['update_course_format_options', 'Updates format options for a course ', [['course/format/weeks','lib.php',327],['course/format','lib.php',777],['course/format','formatlegacy.php',322],['course/format/topics','lib.php',322]], 10],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'get_log_manager': ['get_log_manager', 'Get instance of log manager. ', [['lib','datalib.php',1520]], 51],
'rebuild_course_cache': ['rebuild_course_cache', 'Rebuilds or resets the cached list of course activities stored in MUC. ', [['lib','modinfolib.php',2179]], 40],
'create_from_cm': ['create_from_cm', 'Set data to create new event from course module. ', [['lib/classes/event','course_module_updated.php',140],['lib/classes/event','course_module_created.php',57]], 12],
'course_allowed_module': ['course_allowed_module', 'Is the user allowed to add this type of module to this course? ', [['course','lib.php',2397]], 6],
'course_delete_section': ['course_delete_section', 'This method will delete a course section and may delete all modules inside it. ', [['course','lib.php',1896]], 11],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'get_module_types_names': ['get_module_types_names', 'Returns the localised human-readable names of all used modules ', [['course','lib.php',1148]], 14],
'empty_tag': ['empty_tag', 'Outputs an empty tag with attributes ', [['lib','outputcomponents.php',1106]], 522],
'component_callback_exists': ['component_callback_exists', 'Determine if a component callback exists and return the function name to call. Note that this function will include the required library files so that the functioname returned can be called directly. ', [['lib','moodlelib.php',7438]], 9],
'allow_commit': ['allow_commit', 'Commit delegated transaction. The real database commit SQL is executed only after committing all delegated transactions. ', [['lib/dml','moodle_transaction.php',78]], 135],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'export_for_template': ['export_for_template', 'Export the document data to be used as a template context. ', [['search/classes','document.php',550],['blocks/lp/classes/output','summary.php',80],['lib/classes/output','inplace_editable.php',211],['report/competency/classes/output','report.php',68],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',58],['admin/tool/templatelibrary/classes/output','list_templates_page.php',41],['mod/feedback/classes/output','summary.php',65],['admin/tool/lp/classes/output','plan_page.php',58],['blocks/lp/classes/output','plans_to_review_page.php',55],['report/competency/classes/output','user_course_navigation.php',64],['mod/lti/classes/output','tool_configure_page.php',41],['admin/tool/lp/classes/output','competency_plan_navigation.php',69],['lib','outputcomponents.php',52],['lib','outputcomponents.php',559],['tag/classes/output','taglist.php',98],['blocks/rss_client/classes/output','footer.php',77],['admin/tool/lp/classes/output','user_competency_course_navigation.php',70],['mod/assign/classes/output','grading_app.php',76],['admin/tool/lp/classes/output','user_evidence_list_page.php',81],['blocks/rss_client/classes/output','block.php',56],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',64],['admin/tool/lp/classes/output','competency_summary.php',74],['mod/forum/classes/output','forum_post.php',133],['tag/classes/output','tagcollsearchable.php',56],['blocks/rss_client/classes/output','channel_image.php',74],['admin/tool/lp/classes/output','related_competencies.php',58],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',78],['blocks/lp/classes/output','competencies_to_review_page.php',56],['tag/classes/output','tagisstandard.php',52],['tag/classes/output','tagindex.php',143],['lib/classes/output','notification.php',178],['admin/tool/lp/classes/output','manage_competencies_page.php',85],['blocks/rss_client/classes/output','item.php',111],['tag/classes/output','tagflag.php',52],['admin/tool/lp/classes/output','user_competency_summary.php',60],['course/classes/output','course_module_name.php',65],['admin/tool/lp/classes/output','template_competencies_page.php',87],['mod/lti/classes/output','external_registration_return_page.php',41],['admin/tool/lp/classes/output','plans_page.php',78],['admin/tool/lp/classes/output','manage_templates_page.php',75],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',82],['admin/tool/lp/classes/output','user_evidence_page.php',58],['blocks/rss_client/classes/output','feed.php',88],['tag/classes/output','tagcloud.php',106],['admin/tool/lp/classes/output','course_competencies_page.php',102],['mod/assign','renderable.php',604],['tag/classes/output','tag.php',70],['tag/classes/output','tagfeed.php',73],['tag/classes/output','tagareaenabled.php',51]], 90],
'get_sorted_course_formats': ['get_sorted_course_formats', 'Returns the sorted list of available course formats, filtered by enabled if necessary ', [['course','lib.php',3478]], 5],
'add_data': ['add_data', 'Add data to the temporary file in csv format ', [['lib','csvlib.class.php',431],['lib','tablelib.php',730],['lib','tablelib.php',1656],['lib','tablelib.php',1755]], 42],
'get_default': ['get_default', 'Returns id of the default tag collection ', [['tag/classes','collection.php',117],['lib','adminlib.php',1964],['lib','coursecatlib.php',294]], 32],
'table': ['table', 'Log a table in the firebug console ', [['lib/minify/lib','FirePHP.php',454],['lib/adodb','adodb-perf.inc.php',234],['lib','outputcomponents.php',1497]], 257],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'remove_all_item_tags': ['remove_all_item_tags', 'Removes all tags from an item. ', [['tag/classes','tag.php',732]], 11],
'course_change_visibility': ['course_change_visibility', 'Changes the visibility of a course. ', [['course','lib.php',3779]], 6],
'course_format_ajax_support': ['course_format_ajax_support', 'Returns the information about the ajax support in the given source format ', [['course','lib.php',2513]], 1],
'file_postupdate_standard_filemanager': ['file_postupdate_standard_filemanager', 'Saves files modified by File manager formslib element ', [['lib','filelib.php',291]], 17],
'set_coursemodule_groupmode': ['set_coursemodule_groupmode', 'Change the group mode of a course module. ', [['course','lib.php',1533]], 3],
'get_capability_info': ['get_capability_info', 'Returns capability information (cached) ', [['lib','accesslib.php',2961]], 13],
'make_categories_list': ['make_categories_list', 'This function is deprecated! For list of categories use coursecat::make_all_categories($requiredcapability, $excludeid, $separator) For parents of one particular category use coursecat::get($id)->get_parents() ', [['lib','deprecatedlib.php',1398],['lib','coursecatlib.php',2187]], 23],
'can_delete_section': ['can_delete_section', 'Whether this format allows to delete sections ', [['course/format/weeks','lib.php',424],['course/format','lib.php',955],['course/format/topics','lib.php',374]], 1],
'strings_for_js': ['strings_for_js', 'Make an array of language strings available for JS. ', [['lib','outputrequirementslib.php',1183],['enrol','locallib.php',1311]], 73],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'get_category_or_system_context': ['get_category_or_system_context', 'Return the course category context for the category with id $categoryid, except that if $categoryid is 0, return the system context. ', [['course','lib.php',1361]], 5],
'reject': ['reject', 'Reject a course request ', [['course','lib.php',3248]], 49],
'make_log_url': ['make_log_url', '', [['course','lib.php',58]], 5],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'dndupload_add_to_course': ['dndupload_add_to_course', 'Add the Javascript to enable drag and drop upload to a course page ', [['course','dnduploadlib.php',32]], 1],
'uses_sections': ['uses_sections', 'Returns true if this course format uses sections ', [['course/format/weeks','lib.php',38],['course/format','lib.php',283],['course/format','formatlegacy.php',36],['course/format/topics','lib.php',38]], 5],
'get_precheck_results': ['get_precheck_results', '', [['backup/controller','restore_controller.class.php',400]], 8],
'role_assignment_changed': ['role_assignment_changed', 'Resets course contact caches when role assignments were changed ', [['lib','coursecatlib.php',673]], 5],
'get_cm': ['get_cm', 'Returns the current course module ', [['mod/feedback/classes','complete_form.php',245],['search/classes','base_mod.php',51],['mod/feedback/classes','structure.php',72],['mod/quiz','attemptlib.php',215],['mod/quiz','attemptlib.php',742],['lib','modinfolib.php',222],['comment','lib.php',1010]], 137],
'get_plugins_with_function': ['get_plugins_with_function', 'Get a list of all the plugins that define a certain API function in a certain file. ', [['lib','moodlelib.php',7249]], 18],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',992]], 123],
'compare_activities_by_time_asc': ['compare_activities_by_time_asc', 'Compare two objects to find out their correct order based on timestamp (to be used by usort). Sorts by ascending order of time. ', [['course','lib.php',3753]], 0],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 108],
'create_module': ['create_module', 'Create a test activity module. ', [['lib/testing/generator','data_generator.php',481],['course','lib.php',3522]], 762],
'core_course_inplace_editable': ['core_course_inplace_editable', 'Implements callback inplace_editable() allowing to edit values in-place ', [['course','lib.php',3945]], 0],
'can_add_moduleinfo': ['can_add_moduleinfo', 'Check that the user can add a module. Also returns some information like the module, context and course section info. The fucntion create the course section if it doesn\'t exist. ', [['course','modlib.php',412]], 2],
'can_edit_in_category': ['can_edit_in_category', 'Does the user have permission to edit things in this category? ', [['course','lib.php',1416]], 3],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'search_courses_count': ['search_courses_count', 'Returns number of courses in the search results ', [['lib','coursecatlib.php',1407]], 10],
'destroy': ['destroy', 'Destroys a variable in the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',57],['backup/util/settings','base_setting.class.php',125],['backup/converter','convertlib.php',255],['lib/adodb','adodb-xmlschema.inc.php',156],['lib/adodb','adodb-xmlschema.inc.php',2190],['backup/util/ui','backup_ui_setting.class.php',78],['backup/util/ui','base_ui.class.php',97],['backup/util/structure','base_final_element.class.php',53],['backup/util/plan','backup_plan.class.php',51],['backup/util/settings','setting_dependency.class.php',81],['backup/util/loggers','base_logger.class.php',74],['lib/adodb','adodb-xmlschema03.inc.php',174],['lib/adodb','adodb-xmlschema03.inc.php',2372],['backup/util/plan','base_plan.class.php',192],['backup/util/plan','restore_plan.class.php',62],['backup/controller','backup_controller.class.php',146],['backup/util/structure','base_nested_element.class.php',62],['repository/flickr_public','image.php',65],['backup/util/plan','base_step.class.php',60],['backup/util/ui','restore_ui_stage.class.php',208],['backup/controller','restore_controller.class.php',158],['backup/util/plan','base_task.class.php',199]], 504],
'course_page_type_list': ['course_page_type_list', 'Return a list of page types ', [['course','lib.php',3296]], 4],
'right_to_left': ['right_to_left', 'Returns true if the user is using a right-to-left language. ', [['lib','weblib.php',3109],['lib','javascript-static.js',1156]], 63],
'render_from_template': ['render_from_template', 'Renders a template by name with the given context. ', [['lib','outputrenderers.php',137]], 69],
'create_course': ['create_course', 'Creates the actual course. ', [['admin/tool/generator/classes','course_backend.php',246],['lib/testing/generator','data_generator.php',366],['enrol/ldap','lib.php',949],['course','lib.php',2654]], 1178],
'defined': ['defined', '', [], 4731],
'urlencode': ['urlencode', '', [], 200],
'is_subclass_of': ['is_subclass_of', '', [], 33],
'array_merge': ['array_merge', '', [], 2944],
'array_unshift': ['array_unshift', '', [], 115],
'strval': ['strval', '', [], 151],
'array_diff': ['array_diff', '', [], 102],
'strip_tags': ['strip_tags', '', [], 150],
'substr_count': ['substr_count', '', [], 72],
'getdate': ['getdate', '', [], 227],
'func_num_args': ['func_num_args', '', [], 37],
'array_reverse': ['array_reverse', '', [], 130],
'ceil': ['ceil', '', [], 236],
'function_exists': ['function_exists', '', [], 419],
'ltrim': ['ltrim', '', [], 92],
'array_keys': ['array_keys', '', [], 1256],
'str_replace': ['str_replace', '', [], 1648],
'array_unique': ['array_unique', '', [], 171],
'preg_replace': ['preg_replace', '', [], 917],
'array_key_exists': ['array_key_exists', '', [], 1445],
'reset': ['reset', '', [], 1213],
'array_splice': ['array_splice', '', [], 52],
'strpos': ['strpos', '', [], 1604],
'array_pop': ['array_pop', '', [], 483],
'is_array': ['is_array', '', [], 1608],
'preg_split': ['preg_split', '', [], 146],
'implode': ['implode', '', [], 1281],
'trim': ['trim', '', [], 1948],
'array_values': ['array_values', '', [], 342],
'define': ['define', '', [], 2373],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'is_numeric': ['is_numeric', '', [], 672],
'time': ['time', '', [], 1959],
'array_search': ['array_search', '', [], 170],
'array_intersect': ['array_intersect', '', [], 50],
'is_null': ['is_null', '', [], 2003],
'mktime': ['mktime', '', [], 50],
'asort': ['asort', '', [], 114],
'link': ['link', '', [], 695],
'substr': ['substr', '', [], 2823],
'array_shift': ['array_shift', '', [], 700],
'in_array': ['in_array', '', [], 1234],
'is_object': ['is_object', '', [], 544],
'array_push': ['array_push', '', [], 240],
'str_repeat': ['str_repeat', '', [], 156],
'explode': ['explode', '', [], 1572],
'urldecode': ['urldecode', '', [], 53],
'ksort': ['ksort', '', [], 153]};
CLASS_DATA={
'csv_export_writer': ['csv_export_writer', 'Utitily class for exporting of CSV files. ', [['lib','csvlib.class.php',365]], 10],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1951]], 75],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'html_table': ['html_table', 'Holds all the information required to render a <table> by {@link core_renderer::table()} ', [['lib','outputcomponents.php',2011]], 225],
'course_module_name': ['course_module_name', 'Class to prepare a course module name for display and in-place editing ', [['course/classes/output','course_module_name.php',31]], 1],
'coursecat': ['coursecat', 'Class to store, cache, render and manage course category ', [['lib','coursecatlib.php',28]], 276],
'restore_controller': ['restore_controller', 'Class implementing the controller of any restore process ', [['backup/controller','restore_controller.class.php',25]], 32],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 139],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'course_created': ['course_created', 'Course created event class. ', [['lib/classes/event','course_created.php',29]], 1],
'course_module_updated': ['course_module_updated', 'Class course_module_updated ', [['lib/classes/event','course_module_updated.php',28]], 12],
'course_updated': ['course_updated', 'Course updated event class. ', [['lib/classes/event','course_updated.php',29]], 2],
'core_tag_tag': ['core_tag_tag', 'Represents one tag and also contains lots of useful tag-related methods as static functions. ', [['tag/classes','tag.php',27]], 352],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141],
'course_module_created': ['course_module_created', 'Class course_module_created ', [['lib/classes/event','course_module_created.php',28]], 6],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 152],
'action_menu_link_secondary': ['action_menu_link_secondary', 'A secondary action menu action ', [['lib','outputcomponents.php',3681]], 47],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'action_menu_link_primary': ['action_menu_link_primary', 'A primary action menu action ', [['lib','outputcomponents.php',3659]], 4],
'action_menu_filler': ['action_menu_filler', 'An action menu filler ', [['lib','outputcomponents.php',3597]], 2],
'popup_action': ['popup_action', 'Component action for a popup window. ', [['lib','outputactions.php',114]], 31],
'course_request': ['course_request', 'This class pertains to course requests and contains methods associated with create, approving, and removing course requests. ', [['course','lib.php',2947]], 13],
'api': ['api', 'Class for doing things with cohort roles. ', [['admin/tool/cohortroles/classes','api.php',30],['admin/tool/mobile/classes','api.php',31],['competency/classes','api.php',41],['lib/classes/update','api.php',33],['admin/tool/templatelibrary/classes','api.php',33]], 699],
'course_section_updated': ['course_section_updated', 'Course section updated event class. ', [['lib/classes/event','course_section_updated.php',29]], 2],
'moodleexcelworkbook': ['moodleexcelworkbook', 'Define and operate over one Moodle Workbook. ', [['lib','excellib.class.php',27]], 6],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 246],
'moodleodsworkbook': ['moodleodsworkbook', 'ODS workbook abstraction. ', [['lib','odslib.class.php',31]], 6],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 275],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6585]], 194],
'core_tag_index_builder': ['core_tag_index_builder', 'Helper to build tag index ', [['tag/classes','index_builder.php',27]], 4],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'course_module_deleted': ['course_module_deleted', 'Class course_module_deleted ', [['lib/classes/event','course_module_deleted.php',28]], 3],
'backup_controller': ['backup_controller', 'Class implementing the controller of any backup process ', [['backup/controller','backup_controller.class.php',25]], 31],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'course_section_deleted': ['course_section_deleted', 'Course section deleted event class. ', [['lib/classes/event','course_section_deleted.php',29]], 1],
'course_viewed': ['course_viewed', 'Course viewed event class. ', [['lib/classes/event','course_viewed.php',28]], 5]};
CONST_DATA={
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 165],
'EXCELROWS': ['EXCELROWS', '', [['course','lib.php',52]], 5],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'MAX_COURSES_IN_CATEGORY': ['MAX_COURSES_IN_CATEGORY', '', [['lib','datalib.php',35]], 12],
'FRONTPAGECATEGORYCOMBO': ['FRONTPAGECATEGORYCOMBO', '', [['course','lib.php',47]], 3],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 190],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'COURSE_MAX_RECENT_PERIOD': ['COURSE_MAX_RECENT_PERIOD', '', [['course','lib.php',32]], 5],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608],
'FRONTPAGECOURSESEARCH': ['FRONTPAGECOURSESEARCH', '', [['course','lib.php',50]], 3],
'MOD_ARCHETYPE_OTHER': ['MOD_ARCHETYPE_OTHER', '', [['lib','moodlelib.php',443]], 5],
'FRONTPAGEALLCOURSELIST': ['FRONTPAGEALLCOURSELIST', '', [['course','lib.php',49]], 4],
'COURSE_MAX_LOGS_PER_PAGE': ['COURSE_MAX_LOGS_PER_PAGE', '', [['course','lib.php',31]], 1],
'MOD_ARCHETYPE_SYSTEM': ['MOD_ARCHETYPE_SYSTEM', '', [['lib','moodlelib.php',449]], 6],
'FIRSTUSEDEXCELROW': ['FIRSTUSEDEXCELROW', '', [['course','lib.php',53]], 9],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'IGNORE_MULTIPLE': ['IGNORE_MULTIPLE', '', [['lib','dmllib.php',50]], 43],
'COURSE_MAX_COURSES_PER_DROPDOWN': ['COURSE_MAX_COURSES_PER_DROPDOWN', '', [['course','lib.php',42]], 3],
'COURSE_MAX_SUMMARIES_PER_PAGE': ['COURSE_MAX_SUMMARIES_PER_PAGE', '', [['course','lib.php',39]], 1],
'COMPLETION_CRITERIA_TYPE_ACTIVITY': ['COMPLETION_CRITERIA_TYPE_ACTIVITY', '', [['completion/criteria','completion_criteria.php',53]], 21],
'PARAM_PATH': ['PARAM_PATH', '', [['lib','moodlelib.php',178]], 175],
'MOD_SUBTYPE_NO_CHILDREN': ['MOD_SUBTYPE_NO_CHILDREN', '', [['lib','moodlelib.php',456]], 4],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'MOD_CLASS_ACTIVITY': ['MOD_CLASS_ACTIVITY', '', [['course','lib.php',55]], 6],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'FRONTPAGEENROLLEDCOURSELIST': ['FRONTPAGEENROLLEDCOURSELIST', '', [['course','lib.php',48]], 4],
'FEATURE_MOD_ARCHETYPE': ['FEATURE_MOD_ARCHETYPE', '', [['lib','moodlelib.php',424]], 13],
'FEATURE_CONTROLS_GRADE_VISIBILITY': ['FEATURE_CONTROLS_GRADE_VISIBILITY', '', [['lib','moodlelib.php',400]], 4],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'MOD_CLASS_RESOURCE': ['MOD_CLASS_RESOURCE', '', [['course','lib.php',56]], 5],
'PARAM_CLEANHTML': ['PARAM_CLEANHTML', '', [['lib','moodlelib.php',123]], 44],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 35],
'NOGROUPS': ['NOGROUPS', '', [['lib','grouplib.php',29]], 58],
'FRONTPAGECATEGORYNAMES': ['FRONTPAGECATEGORYNAMES', '', [['course','lib.php',46]], 3],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'FRONTPAGENEWS': ['FRONTPAGENEWS', '', [['course','lib.php',45]], 3],
'COURSE_MAX_USERS_PER_DROPDOWN': ['COURSE_MAX_USERS_PER_DROPDOWN', '', [['course','lib.php',44]], 5],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'VISIBLEGROUPS': ['VISIBLEGROUPS', '', [['lib','grouplib.php',39]], 113],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
