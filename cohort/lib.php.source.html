<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /cohort/lib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='cohort';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/cohort/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Cohort related management functions, this file needs to be included manually.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core_cohort</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2010 Petr Skoda  {@link http://skodak.org}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COHORT_ALL')" href="../_constants/COHORT_ALL.html" onMouseOver="constPopup(event,'COHORT_ALL')">COHORT_ALL</a>', 0);
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COHORT_COUNT_MEMBERS')" href="../_constants/COHORT_COUNT_MEMBERS.html" onMouseOver="constPopup(event,'COHORT_COUNT_MEMBERS')">COHORT_COUNT_MEMBERS</a>', 1);
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COHORT_COUNT_ENROLLED_MEMBERS')" href="../_constants/COHORT_COUNT_ENROLLED_MEMBERS.html" onMouseOver="constPopup(event,'COHORT_COUNT_ENROLLED_MEMBERS')">COHORT_COUNT_ENROLLED_MEMBERS</a>', 3);
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COHORT_WITH_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_MEMBERS_ONLY')">COHORT_WITH_MEMBERS_ONLY</a>', 5);
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COHORT_WITH_ENROLLED_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_ENROLLED_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_ENROLLED_MEMBERS_ONLY')">COHORT_WITH_ENROLLED_MEMBERS_ONLY</a>', 17);
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('COHORT_WITH_NOTENROLLED_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_NOTENROLLED_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_NOTENROLLED_MEMBERS_ONLY')">COHORT_WITH_NOTENROLLED_MEMBERS_ONLY</a>', 23);
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">/**</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * Add new cohort.</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> *</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @param  stdClass $cohort</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @return int new cohort id</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> */</span>
<a name="l40"><span class="linenum">  40</span></a>  function <a class="function" onClick="logFunction('cohort_add_cohort')" href="../_functions/cohort_add_cohort.html" onMouseOver="funcPopup(event,'cohort_add_cohort')">cohort_add_cohort</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>) {
<a name="l41"><span class="linenum">  41</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('name')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l44"><span class="linenum">  44</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Missing cohort name in <a class="function" onClick="logFunction('cohort_add_cohort')" href="../_functions/cohort_add_cohort.html" onMouseOver="funcPopup(event,'cohort_add_cohort')">cohort_add_cohort</a>().');
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('idnumber')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('idnumber')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = NULL;
<a name="l48"><span class="linenum">  48</span></a>      }
<a name="l49"><span class="linenum">  49</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('description')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/description.html">description</a>)) {
<a name="l50"><span class="linenum">  50</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('description')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = '';
<a name="l51"><span class="linenum">  51</span></a>      }
<a name="l52"><span class="linenum">  52</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a>)) {
<a name="l53"><span class="linenum">  53</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l54"><span class="linenum">  54</span></a>      }
<a name="l55"><span class="linenum">  55</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('visible')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l56"><span class="linenum">  56</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('visible')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 1;
<a name="l57"><span class="linenum">  57</span></a>      }
<a name="l58"><span class="linenum">  58</span></a>      if (empty(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('component')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l59"><span class="linenum">  59</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('component')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = '';
<a name="l60"><span class="linenum">  60</span></a>      }
<a name="l61"><span class="linenum">  61</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>)) {
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l63"><span class="linenum">  63</span></a>      }
<a name="l64"><span class="linenum">  64</span></a>      if (!isset(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a>)) {
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>;
<a name="l66"><span class="linenum">  66</span></a>      }
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>      <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('cohort', <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('cohort_created')" href="../_classes/cohort_created.html" onMouseOver="classPopup(event,'cohort_created')">cohort_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l71"><span class="linenum">  71</span></a>          'context' =&gt; context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>),
<a name="l72"><span class="linenum">  72</span></a>          'objectid' =&gt; <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l73"><span class="linenum">  73</span></a>      ));
<a name="l74"><span class="linenum">  74</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('cohort', <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l75"><span class="linenum">  75</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      return <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l78"><span class="linenum">  78</span></a>  }
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">/**</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> * Update existing cohort.</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * @param  stdClass $cohort</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * @return void</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> */</span>
<a name="l85"><span class="linenum">  85</span></a>  function <a class="function" onClick="logFunction('cohort_update_cohort')" href="../_functions/cohort_update_cohort.html" onMouseOver="funcPopup(event,'cohort_update_cohort')">cohort_update_cohort</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>) {
<a name="l86"><span class="linenum">  86</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l87"><span class="linenum">  87</span></a>      if (property_exists(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>, 'component') and empty(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('component')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">        // prevent NULLs</span>
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('component')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = '';
<a name="l90"><span class="linenum">  90</span></a>      }
<a name="l91"><span class="linenum">  91</span></a>      <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l92"><span class="linenum">  92</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('cohort', <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('cohort_updated')" href="../_classes/cohort_updated.html" onMouseOver="classPopup(event,'cohort_updated')">cohort_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l95"><span class="linenum">  95</span></a>          'context' =&gt; context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>),
<a name="l96"><span class="linenum">  96</span></a>          'objectid' =&gt; <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l97"><span class="linenum">  97</span></a>      ));
<a name="l98"><span class="linenum">  98</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l99"><span class="linenum">  99</span></a>  }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> * Delete cohort.</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * @param  stdClass $cohort</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> * @return void</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> */</span>
<a name="l106"><span class="linenum"> 106</span></a>  function <a class="function" onClick="logFunction('cohort_delete_cohort')" href="../_functions/cohort_delete_cohort.html" onMouseOver="funcPopup(event,'cohort_delete_cohort')">cohort_delete_cohort</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>) {
<a name="l107"><span class="linenum"> 107</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>      if (<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('component')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/component.html">component</a>) {
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">        // TODO: add component delete callback</span>
<a name="l111"><span class="linenum"> 111</span></a>      }
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('cohort_members', array('cohortid'=&gt;<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l114"><span class="linenum"> 114</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('cohort', array('id'=&gt;<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">    // Notify the competency subsystem.</span>
<a name="l117"><span class="linenum"> 117</span></a>      \core_competency\<a class="class" onClick="logClass('api')" href="../_classes/api.html" onMouseOver="classPopup(event,'api')">api</a>::<a class="function" onClick="logFunction('hook_cohort_deleted')" href="../_functions/hook_cohort_deleted.html" onMouseOver="funcPopup(event,'hook_cohort_deleted')">hook_cohort_deleted</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('cohort_deleted')" href="../_classes/cohort_deleted.html" onMouseOver="classPopup(event,'cohort_deleted')">cohort_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l120"><span class="linenum"> 120</span></a>          'context' =&gt; context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>),
<a name="l121"><span class="linenum"> 121</span></a>          'objectid' =&gt; <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('id')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l122"><span class="linenum"> 122</span></a>      ));
<a name="l123"><span class="linenum"> 123</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('cohort', <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l125"><span class="linenum"> 125</span></a>  }
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">/**</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> * Somehow deal with cohorts when deleting course category,</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> * we can not just delete them because they might be used in enrol</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * plugins or referenced in external systems.</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> * @param  stdClass|coursecat $category</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment"> * @return void</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment"> */</span>
<a name="l134"><span class="linenum"> 134</span></a>  function <a class="function" onClick="logFunction('cohort_delete_category')" href="../_functions/cohort_delete_category.html" onMouseOver="funcPopup(event,'cohort_delete_category')">cohort_delete_category</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l135"><span class="linenum"> 135</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">    // TODO: make sure that cohorts are really, really not used anywhere and delete, for now just move to parent or system context</span>
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../_variables/oldcontext.html">$oldcontext</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>      if (<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> and <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id'=&gt;<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>))) {
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('id')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;UPDATE {cohort} SET contextid = :newcontext WHERE contextid = :oldcontext&quot;;
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('oldcontext'=&gt;<a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../_variables/oldcontext.html">$oldcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43400" onMouseOver="hilite(43400)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'newcontext'=&gt;<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l144"><span class="linenum"> 144</span></a>      } else {
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;UPDATE {cohort} SET contextid = :newcontext WHERE contextid = :oldcontext&quot;;
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('oldcontext'=&gt;<a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../_variables/oldcontext.html">$oldcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43400" onMouseOver="hilite(43400)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'newcontext'=&gt;<a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a>-&gt;<a onClick="logVariable('id')" class="var it43085" onMouseOver="hilite(43085)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l148"><span class="linenum"> 148</span></a>      }
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l151"><span class="linenum"> 151</span></a>  }
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">/**</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment"> * Add cohort member</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment"> * @param  int $cohortid</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment"> * @param  int $userid</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment"> * @return void</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment"> */</span>
<a name="l159"><span class="linenum"> 159</span></a>  function <a class="function" onClick="logFunction('cohort_add_member')" href="../_functions/cohort_add_member.html" onMouseOver="funcPopup(event,'cohort_add_member')">cohort_add_member</a>(<a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l160"><span class="linenum"> 160</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l161"><span class="linenum"> 161</span></a>      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('cohort_members', array('cohortid'=&gt;<a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>))) {
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">        // No duplicates!</span>
<a name="l163"><span class="linenum"> 163</span></a>          return;
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = new stdClass();
<a name="l166"><span class="linenum"> 166</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('cohortid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/cohortid.html">cohortid</a>  = <a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>;
<a name="l167"><span class="linenum"> 167</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>    = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l168"><span class="linenum"> 168</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timeadded')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/timeadded.html">timeadded</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l169"><span class="linenum"> 169</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('cohort_members', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>      <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('cohort', array('id' =&gt; <a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('cohort_member_added')" href="../_classes/cohort_member_added.html" onMouseOver="classPopup(event,'cohort_member_added')">cohort_member_added</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l174"><span class="linenum"> 174</span></a>          'context' =&gt; context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>),
<a name="l175"><span class="linenum"> 175</span></a>          'objectid' =&gt; <a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>,
<a name="l176"><span class="linenum"> 176</span></a>          'relateduserid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>,
<a name="l177"><span class="linenum"> 177</span></a>      ));
<a name="l178"><span class="linenum"> 178</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('cohort', <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l179"><span class="linenum"> 179</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l180"><span class="linenum"> 180</span></a>  }
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">/**</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment"> * Remove cohort member</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment"> * @param  int $cohortid</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment"> * @param  int $userid</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment"> * @return void</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment"> */</span>
<a name="l188"><span class="linenum"> 188</span></a>  function <a class="function" onClick="logFunction('cohort_remove_member')" href="../_functions/cohort_remove_member.html" onMouseOver="funcPopup(event,'cohort_remove_member')">cohort_remove_member</a>(<a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l189"><span class="linenum"> 189</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l190"><span class="linenum"> 190</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('cohort_members', array('cohortid'=&gt;<a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>));
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('cohort', array('id' =&gt; <a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('cohort_member_removed')" href="../_classes/cohort_member_removed.html" onMouseOver="classPopup(event,'cohort_member_removed')">cohort_member_removed</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l195"><span class="linenum"> 195</span></a>          'context' =&gt; context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>),
<a name="l196"><span class="linenum"> 196</span></a>          'objectid' =&gt; <a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>,
<a name="l197"><span class="linenum"> 197</span></a>          'relateduserid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>,
<a name="l198"><span class="linenum"> 198</span></a>      ));
<a name="l199"><span class="linenum"> 199</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('cohort', <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>);
<a name="l200"><span class="linenum"> 200</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l201"><span class="linenum"> 201</span></a>  }
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">/**</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment"> * Is this user a cohort member?</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment"> * @param int $cohortid</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment"> * @return bool</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment"> */</span>
<a name="l209"><span class="linenum"> 209</span></a>  function <a class="function" onClick="logFunction('cohort_is_member')" href="../_functions/cohort_is_member.html" onMouseOver="funcPopup(event,'cohort_is_member')">cohort_is_member</a>(<a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l210"><span class="linenum"> 210</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('cohort_members', array('cohortid'=&gt;<a class="var it2629" onMouseOver="hilite(2629)" onMouseOut="lolite()" onClick="logVariable('cohortid')" href="../_variables/cohortid.html">$cohortid</a>, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>));
<a name="l213"><span class="linenum"> 213</span></a>  }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">/**</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment"> * Returns the list of cohorts visible to the current user in the given course.</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment"> *</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment"> * The following fields are returned in each record: id, name, contextid, idnumber, visible</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment"> * Fields memberscnt and enrolledcnt will be also returned if requested</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment"> *</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment"> * @param context $currentcontext</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment"> * @param int $withmembers one of the COHORT_XXX constants that allows to return non empty cohorts only</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment"> *      or cohorts with enroled/not enroled users, or just return members count</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * @param int $offset</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> * @param int $limit</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * @param string $search</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * @return array</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> */</span>
<a name="l229"><span class="linenum"> 229</span></a>  function <a class="function" onClick="logFunction('cohort_get_available_cohorts')" href="../_functions/cohort_get_available_cohorts.html" onMouseOver="funcPopup(event,'cohort_get_available_cohorts')">cohort_get_available_cohorts</a>(<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>, <a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a> = 0, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> = 0, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = 25, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> = '') {
<a name="l230"><span class="linenum"> 230</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">    // Build context subquery. Find the list of parent context where user is able to see any or visible-only cohorts.</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">    // Since this method is normally called for the current course all parent contexts are already preloaded.</span>
<a name="l236"><span class="linenum"> 236</span></a>      <a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('contextsany')" href="../_variables/contextsany.html">$contextsany</a> = <a class="phpfunction" onClick="logFunction('array_filter')" href="../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>(),
<a name="l237"><span class="linenum"> 237</span></a>          <a class="phpfunction" onClick="logFunction('create_function')" href="../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>', 'return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(&quot;moodle/cohort:view&quot;, context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>));'));
<a name="l238"><span class="linenum"> 238</span></a>      <a class="var it7763" onMouseOver="hilite(7763)" onMouseOut="lolite()" onClick="logVariable('contextsvisible')" href="../_variables/contextsvisible.html">$contextsvisible</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>(), <a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('contextsany')" href="../_variables/contextsany.html">$contextsany</a>);
<a name="l239"><span class="linenum"> 239</span></a>      if (empty(<a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('contextsany')" href="../_variables/contextsany.html">$contextsany</a>) &amp;&amp; empty(<a class="var it7763" onMouseOver="hilite(7763)" onMouseOut="lolite()" onClick="logVariable('contextsvisible')" href="../_variables/contextsvisible.html">$contextsvisible</a>)) {
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">        // User does not have any permissions to view cohorts.</span>
<a name="l241"><span class="linenum"> 241</span></a>          return array();
<a name="l242"><span class="linenum"> 242</span></a>      }
<a name="l243"><span class="linenum"> 243</span></a>      <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('subqueries')" href="../_variables/subqueries.html">$subqueries</a> = array();
<a name="l244"><span class="linenum"> 244</span></a>      if (!empty(<a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('contextsany')" href="../_variables/contextsany.html">$contextsany</a>)) {
<a name="l245"><span class="linenum"> 245</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it7765" onMouseOver="hilite(7765)" onMouseOut="lolite()" onClick="logVariable('parentsql')" href="../_variables/parentsql.html">$parentsql</a>, <a class="var it7766" onMouseOver="hilite(7766)" onMouseOut="lolite()" onClick="logVariable('params1')" href="../_variables/params1.html">$params1</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('contextsany')" href="../_variables/contextsany.html">$contextsany</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'ctxa');
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('subqueries')" href="../_variables/subqueries.html">$subqueries</a>[] = 'c.contextid ' . <a class="var it7765" onMouseOver="hilite(7765)" onMouseOut="lolite()" onClick="logVariable('parentsql')" href="../_variables/parentsql.html">$parentsql</a>;
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it7766" onMouseOver="hilite(7766)" onMouseOut="lolite()" onClick="logVariable('params1')" href="../_variables/params1.html">$params1</a>);
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>      if (!empty(<a class="var it7763" onMouseOver="hilite(7763)" onMouseOut="lolite()" onClick="logVariable('contextsvisible')" href="../_variables/contextsvisible.html">$contextsvisible</a>)) {
<a name="l250"><span class="linenum"> 250</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it7765" onMouseOver="hilite(7765)" onMouseOut="lolite()" onClick="logVariable('parentsql')" href="../_variables/parentsql.html">$parentsql</a>, <a class="var it7766" onMouseOver="hilite(7766)" onMouseOut="lolite()" onClick="logVariable('params1')" href="../_variables/params1.html">$params1</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it7763" onMouseOver="hilite(7763)" onMouseOut="lolite()" onClick="logVariable('contextsvisible')" href="../_variables/contextsvisible.html">$contextsvisible</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'ctxv');
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('subqueries')" href="../_variables/subqueries.html">$subqueries</a>[] = '(c.visible = 1 AND c.contextid ' . <a class="var it7765" onMouseOver="hilite(7765)" onMouseOut="lolite()" onClick="logVariable('parentsql')" href="../_variables/parentsql.html">$parentsql</a>. ')';
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it7766" onMouseOver="hilite(7766)" onMouseOut="lolite()" onClick="logVariable('params1')" href="../_variables/params1.html">$params1</a>);
<a name="l253"><span class="linenum"> 253</span></a>      }
<a name="l254"><span class="linenum"> 254</span></a>      <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> = '(' . <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' OR ', <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('subqueries')" href="../_variables/subqueries.html">$subqueries</a>) . ')';
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">    // Build the rest of the query.</span>
<a name="l257"><span class="linenum"> 257</span></a>      <a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../_variables/fromsql.html">$fromsql</a> = &quot;&quot;;
<a name="l258"><span class="linenum"> 258</span></a>      <a class="var it7768" onMouseOver="hilite(7768)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../_variables/fieldssql.html">$fieldssql</a> = 'c.id, c.name, c.contextid, c.idnumber, c.visible';
<a name="l259"><span class="linenum"> 259</span></a>      <a class="var it7769" onMouseOver="hilite(7769)" onMouseOut="lolite()" onClick="logVariable('groupbysql')" href="../_variables/groupbysql.html">$groupbysql</a> = '';
<a name="l260"><span class="linenum"> 260</span></a>      <a class="var it7770" onMouseOver="hilite(7770)" onMouseOut="lolite()" onClick="logVariable('havingsql')" href="../_variables/havingsql.html">$havingsql</a> = '';
<a name="l261"><span class="linenum"> 261</span></a>      if (<a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a>) {
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it7768" onMouseOver="hilite(7768)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../_variables/fieldssql.html">$fieldssql</a> .= ', s.memberscnt';
<a name="l263"><span class="linenum"> 263</span></a>          <a class="var it7771" onMouseOver="hilite(7771)" onMouseOut="lolite()" onClick="logVariable('subfields')" href="../_variables/subfields.html">$subfields</a> = &quot;c.id, <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT cm.userid) AS memberscnt&quot;;
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it7769" onMouseOver="hilite(7769)" onMouseOut="lolite()" onClick="logVariable('groupbysql')" href="../_variables/groupbysql.html">$groupbysql</a> = &quot; GROUP BY c.id&quot;;
<a name="l265"><span class="linenum"> 265</span></a>          <a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../_variables/fromsql.html">$fromsql</a> = &quot; LEFT JOIN {cohort_members} cm ON cm.cohortid = c.id &quot;;
<a name="l266"><span class="linenum"> 266</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a>,
<a name="l267"><span class="linenum"> 267</span></a>                  array(<a class="constant" onClick="logConstant('COHORT_COUNT_ENROLLED_MEMBERS')" href="../_constants/COHORT_COUNT_ENROLLED_MEMBERS.html" onMouseOver="constPopup(event,'COHORT_COUNT_ENROLLED_MEMBERS')">COHORT_COUNT_ENROLLED_MEMBERS</a>, <a class="constant" onClick="logConstant('COHORT_WITH_ENROLLED_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_ENROLLED_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_ENROLLED_MEMBERS_ONLY')">COHORT_WITH_ENROLLED_MEMBERS_ONLY</a>, <a class="constant" onClick="logConstant('COHORT_WITH_NOTENROLLED_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_NOTENROLLED_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_NOTENROLLED_MEMBERS_ONLY')">COHORT_WITH_NOTENROLLED_MEMBERS_ONLY</a>))) {
<a name="l268"><span class="linenum"> 268</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../_variables/esql.html">$esql</a>, <a class="var it6258" onMouseOver="hilite(6258)" onMouseOut="lolite()" onClick="logVariable('params2')" href="../_variables/params2.html">$params2</a>) = <a class="function" onClick="logFunction('get_enrolled_sql')" href="../_functions/get_enrolled_sql.html" onMouseOver="funcPopup(event,'get_enrolled_sql')">get_enrolled_sql</a>(<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>);
<a name="l269"><span class="linenum"> 269</span></a>              <a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../_variables/fromsql.html">$fromsql</a> .= &quot; LEFT <a class="function" onClick="logFunction('JOIN')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> (<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../_variables/esql.html">$esql</a>) u ON u.id = cm.userid &quot;;
<a name="l270"><span class="linenum"> 270</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it6258" onMouseOver="hilite(6258)" onMouseOut="lolite()" onClick="logVariable('params2')" href="../_variables/params2.html">$params2</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l271"><span class="linenum"> 271</span></a>              <a class="var it7768" onMouseOver="hilite(7768)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../_variables/fieldssql.html">$fieldssql</a> .= ', s.enrolledcnt';
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it7771" onMouseOver="hilite(7771)" onMouseOut="lolite()" onClick="logVariable('subfields')" href="../_variables/subfields.html">$subfields</a> .= ', <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT u.id) AS enrolledcnt';
<a name="l273"><span class="linenum"> 273</span></a>          }
<a name="l274"><span class="linenum"> 274</span></a>          if (<a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a> == <a class="constant" onClick="logConstant('COHORT_WITH_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_MEMBERS_ONLY')">COHORT_WITH_MEMBERS_ONLY</a>) {
<a name="l275"><span class="linenum"> 275</span></a>              <a class="var it7770" onMouseOver="hilite(7770)" onMouseOut="lolite()" onClick="logVariable('havingsql')" href="../_variables/havingsql.html">$havingsql</a> = &quot; HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT cm.userid) &gt; 0&quot;;
<a name="l276"><span class="linenum"> 276</span></a>          } else if (<a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a> == <a class="constant" onClick="logConstant('COHORT_WITH_ENROLLED_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_ENROLLED_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_ENROLLED_MEMBERS_ONLY')">COHORT_WITH_ENROLLED_MEMBERS_ONLY</a>) {
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it7770" onMouseOver="hilite(7770)" onMouseOut="lolite()" onClick="logVariable('havingsql')" href="../_variables/havingsql.html">$havingsql</a> = &quot; HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT u.id) &gt; 0&quot;;
<a name="l278"><span class="linenum"> 278</span></a>          } else if (<a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a> == <a class="constant" onClick="logConstant('COHORT_WITH_NOTENROLLED_MEMBERS_ONLY')" href="../_constants/COHORT_WITH_NOTENROLLED_MEMBERS_ONLY.html" onMouseOver="constPopup(event,'COHORT_WITH_NOTENROLLED_MEMBERS_ONLY')">COHORT_WITH_NOTENROLLED_MEMBERS_ONLY</a>) {
<a name="l279"><span class="linenum"> 279</span></a>              <a class="var it7770" onMouseOver="hilite(7770)" onMouseOut="lolite()" onClick="logVariable('havingsql')" href="../_variables/havingsql.html">$havingsql</a> = &quot; HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT cm.userid) &gt; <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT u.id)&quot;;
<a name="l280"><span class="linenum"> 280</span></a>          }
<a name="l281"><span class="linenum"> 281</span></a>      }
<a name="l282"><span class="linenum"> 282</span></a>      if (<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>) {
<a name="l283"><span class="linenum"> 283</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it7772" onMouseOver="hilite(7772)" onMouseOut="lolite()" onClick="logVariable('searchsql')" href="../_variables/searchsql.html">$searchsql</a>, <a class="var it7773" onMouseOver="hilite(7773)" onMouseOut="lolite()" onClick="logVariable('searchparams')" href="../_variables/searchparams.html">$searchparams</a>) = <a class="function" onClick="logFunction('cohort_get_search_query')" href="../_functions/cohort_get_search_query.html" onMouseOver="funcPopup(event,'cohort_get_search_query')">cohort_get_search_query</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>);
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> .= ' AND ' . <a class="var it7772" onMouseOver="hilite(7772)" onMouseOut="lolite()" onClick="logVariable('searchsql')" href="../_variables/searchsql.html">$searchsql</a>;
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it7773" onMouseOver="hilite(7773)" onMouseOut="lolite()" onClick="logVariable('searchparams')" href="../_variables/searchparams.html">$searchparams</a>);
<a name="l286"><span class="linenum"> 286</span></a>      }
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>      if (<a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('withmembers')" href="../_variables/withmembers.html">$withmembers</a>) {
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT &quot; . <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('c.', 'cohort.', <a class="var it7768" onMouseOver="hilite(7768)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../_variables/fieldssql.html">$fieldssql</a>) . &quot;
<a name="l290"><span class="linenum"> 290</span></a>                    FROM {cohort} cohort
<a name="l291"><span class="linenum"> 291</span></a>                    <a class="function" onClick="logFunction('JOIN')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> (SELECT <a class="var it7771" onMouseOver="hilite(7771)" onMouseOut="lolite()" onClick="logVariable('subfields')" href="../_variables/subfields.html">$subfields</a>
<a name="l292"><span class="linenum"> 292</span></a>                            FROM {cohort} c <a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../_variables/fromsql.html">$fromsql</a>
<a name="l293"><span class="linenum"> 293</span></a>                           WHERE <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> <a class="var it7769" onMouseOver="hilite(7769)" onMouseOut="lolite()" onClick="logVariable('groupbysql')" href="../_variables/groupbysql.html">$groupbysql</a> <a class="var it7770" onMouseOver="hilite(7770)" onMouseOut="lolite()" onClick="logVariable('havingsql')" href="../_variables/havingsql.html">$havingsql</a>
<a name="l294"><span class="linenum"> 294</span></a>                          ) s ON cohort.id = s.id
<a name="l295"><span class="linenum"> 295</span></a>                ORDER BY cohort.name, cohort.idnumber&quot;;
<a name="l296"><span class="linenum"> 296</span></a>      } else {
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT <a class="var it7768" onMouseOver="hilite(7768)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../_variables/fieldssql.html">$fieldssql</a>
<a name="l298"><span class="linenum"> 298</span></a>                    FROM {cohort} c <a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../_variables/fromsql.html">$fromsql</a>
<a name="l299"><span class="linenum"> 299</span></a>                   WHERE <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a>
<a name="l300"><span class="linenum"> 300</span></a>                ORDER BY c.name, c.idnumber&quot;;
<a name="l301"><span class="linenum"> 301</span></a>      }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l304"><span class="linenum"> 304</span></a>  }
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">/**</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment"> * Check if cohort exists and user is allowed to access it from the given context.</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment"> *</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment"> * @param stdClass|int $cohortorid cohort object or id</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment"> * @param context $currentcontext current context (course) where visibility is checked</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment"> * @return boolean</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment"> */</span>
<a name="l313"><span class="linenum"> 313</span></a>  function <a class="function" onClick="logFunction('cohort_can_view_cohort')" href="../_functions/cohort_can_view_cohort.html" onMouseOver="funcPopup(event,'cohort_can_view_cohort')">cohort_can_view_cohort</a>(<a class="var it7774" onMouseOver="hilite(7774)" onMouseOut="lolite()" onClick="logVariable('cohortorid')" href="../_variables/cohortorid.html">$cohortorid</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l314"><span class="linenum"> 314</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l315"><span class="linenum"> 315</span></a>      if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it7774" onMouseOver="hilite(7774)" onMouseOut="lolite()" onClick="logVariable('cohortorid')" href="../_variables/cohortorid.html">$cohortorid</a>)) {
<a name="l316"><span class="linenum"> 316</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('cohort', array('id' =&gt; <a class="var it7774" onMouseOver="hilite(7774)" onMouseOut="lolite()" onClick="logVariable('cohortorid')" href="../_variables/cohortorid.html">$cohortorid</a>), 'id, contextid, visible');
<a name="l317"><span class="linenum"> 317</span></a>      } else {
<a name="l318"><span class="linenum"> 318</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a> = <a class="var it7774" onMouseOver="hilite(7774)" onMouseOut="lolite()" onClick="logVariable('cohortorid')" href="../_variables/cohortorid.html">$cohortorid</a>;
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>      if (<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>())) {
<a name="l322"><span class="linenum"> 322</span></a>          if (<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('visible')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l323"><span class="linenum"> 323</span></a>              return true;
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>          <a class="var it7775" onMouseOver="hilite(7775)" onMouseOut="lolite()" onClick="logVariable('cohortcontext')" href="../_variables/cohortcontext.html">$cohortcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('cohort')" href="../_variables/cohort.html">$cohort</a>-&gt;<a onClick="logVariable('contextid')" class="var it43123" onMouseOver="hilite(43123)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>);
<a name="l326"><span class="linenum"> 326</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/cohort:view', <a class="var it7775" onMouseOver="hilite(7775)" onMouseOut="lolite()" onClick="logVariable('cohortcontext')" href="../_variables/cohortcontext.html">$cohortcontext</a>)) {
<a name="l327"><span class="linenum"> 327</span></a>              return true;
<a name="l328"><span class="linenum"> 328</span></a>          }
<a name="l329"><span class="linenum"> 329</span></a>      }
<a name="l330"><span class="linenum"> 330</span></a>      return false;
<a name="l331"><span class="linenum"> 331</span></a>  }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">/**</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * Produces a part of SQL query to filter cohorts by the search string</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> *</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> * Called from {@link cohort_get_cohorts()}, {@link cohort_get_all_cohorts()} and {@link cohort_get_available_cohorts()}</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> *</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * @access private</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> *</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment"> * @param string $search search string</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment"> * @param string $tablealias alias of cohort table in the SQL query (highly recommended if other tables are used in query)</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment"> * @return array of two elements - SQL condition and array of named parameters</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment"> */</span>
<a name="l344"><span class="linenum"> 344</span></a>  function <a class="function" onClick="logFunction('cohort_get_search_query')" href="../_functions/cohort_get_search_query.html" onMouseOver="funcPopup(event,'cohort_get_search_query')">cohort_get_search_query</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>, <a class="var it2625" onMouseOver="hilite(2625)" onMouseOut="lolite()" onClick="logVariable('tablealias')" href="../_variables/tablealias.html">$tablealias</a> = '') {
<a name="l345"><span class="linenum"> 345</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l346"><span class="linenum"> 346</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l347"><span class="linenum"> 347</span></a>      if (empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>)) {
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">        // This function should not be called if there is no search string, just in case return dummy query.</span>
<a name="l349"><span class="linenum"> 349</span></a>          return array('1=1', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l350"><span class="linenum"> 350</span></a>      }
<a name="l351"><span class="linenum"> 351</span></a>      if (<a class="var it2625" onMouseOver="hilite(2625)" onMouseOut="lolite()" onClick="logVariable('tablealias')" href="../_variables/tablealias.html">$tablealias</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it2625" onMouseOver="hilite(2625)" onMouseOut="lolite()" onClick="logVariable('tablealias')" href="../_variables/tablealias.html">$tablealias</a>, -1) !== '.') {
<a name="l352"><span class="linenum"> 352</span></a>          <a class="var it2625" onMouseOver="hilite(2625)" onMouseOut="lolite()" onClick="logVariable('tablealias')" href="../_variables/tablealias.html">$tablealias</a> .= '.';
<a name="l353"><span class="linenum"> 353</span></a>      }
<a name="l354"><span class="linenum"> 354</span></a>      <a class="var it7776" onMouseOver="hilite(7776)" onMouseOut="lolite()" onClick="logVariable('searchparam')" href="../_variables/searchparam.html">$searchparam</a> = '%' . <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like_escape')" href="../_functions/sql_like_escape.html" onMouseOver="funcPopup(event,'sql_like_escape')">sql_like_escape</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>) . '%';
<a name="l355"><span class="linenum"> 355</span></a>      <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../_variables/conditions.html">$conditions</a> = array();
<a name="l356"><span class="linenum"> 356</span></a>      <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = array('name', 'idnumber', 'description');
<a name="l357"><span class="linenum"> 357</span></a>      <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> = 0;
<a name="l358"><span class="linenum"> 358</span></a>      foreach (<a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> as <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) {
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../_variables/conditions.html">$conditions</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>(<a class="var it2625" onMouseOver="hilite(2625)" onMouseOut="lolite()" onClick="logVariable('tablealias')" href="../_variables/tablealias.html">$tablealias</a> . <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, ':csearch' . <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>, false);
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['csearch' . <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>] = <a class="var it7776" onMouseOver="hilite(7776)" onMouseOut="lolite()" onClick="logVariable('searchparam')" href="../_variables/searchparam.html">$searchparam</a>;
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>++;
<a name="l362"><span class="linenum"> 362</span></a>      }
<a name="l363"><span class="linenum"> 363</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = '(' . <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' OR ', <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../_variables/conditions.html">$conditions</a>) . ')';
<a name="l364"><span class="linenum"> 364</span></a>      return array(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l365"><span class="linenum"> 365</span></a>  }
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">/**</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment"> * Get all the cohorts defined in given context.</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment"> *</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment"> * The function does not check user capability to view/manage cohorts in the given context</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment"> * assuming that it has been already verified.</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"> *</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment"> * @param int $contextid</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment"> * @param int $page number of the current page</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment"> * @param int $perpage items per page</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment"> * @param string $search search string</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment"> * @return array    Array(totalcohorts =&gt; int, cohorts =&gt; array, allcohorts =&gt; int)</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment"> */</span>
<a name="l379"><span class="linenum"> 379</span></a>  function <a class="function" onClick="logFunction('cohort_get_cohorts')" href="../_functions/cohort_get_cohorts.html" onMouseOver="funcPopup(event,'cohort_get_cohorts')">cohort_get_cohorts</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = 0, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a> = 25, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> = '') {
<a name="l380"><span class="linenum"> 380</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>      <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = &quot;SELECT *&quot;;
<a name="l383"><span class="linenum"> 383</span></a>      <a class="var it7777" onMouseOver="hilite(7777)" onMouseOut="lolite()" onClick="logVariable('countfields')" href="../_variables/countfields.html">$countfields</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(1)&quot;;
<a name="l384"><span class="linenum"> 384</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot; FROM {cohort}
<a name="l385"><span class="linenum"> 385</span></a>               WHERE contextid = :contextid&quot;;
<a name="l386"><span class="linenum"> 386</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>);
<a name="l387"><span class="linenum"> 387</span></a>      <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a> = &quot; ORDER BY name ASC, idnumber ASC&quot;;
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>      if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>)) {
<a name="l390"><span class="linenum"> 390</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it7778" onMouseOver="hilite(7778)" onMouseOut="lolite()" onClick="logVariable('searchcondition')" href="../_variables/searchcondition.html">$searchcondition</a>, <a class="var it7773" onMouseOver="hilite(7773)" onMouseOut="lolite()" onClick="logVariable('searchparams')" href="../_variables/searchparams.html">$searchparams</a>) = <a class="function" onClick="logFunction('cohort_get_search_query')" href="../_functions/cohort_get_search_query.html" onMouseOver="funcPopup(event,'cohort_get_search_query')">cohort_get_search_query</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>);
<a name="l391"><span class="linenum"> 391</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= ' AND ' . <a class="var it7778" onMouseOver="hilite(7778)" onMouseOut="lolite()" onClick="logVariable('searchcondition')" href="../_variables/searchcondition.html">$searchcondition</a>;
<a name="l392"><span class="linenum"> 392</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it7773" onMouseOver="hilite(7773)" onMouseOut="lolite()" onClick="logVariable('searchparams')" href="../_variables/searchparams.html">$searchparams</a>);
<a name="l393"><span class="linenum"> 393</span></a>      }
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>      <a class="var it7779" onMouseOver="hilite(7779)" onMouseOut="lolite()" onClick="logVariable('totalcohorts')" href="../_variables/totalcohorts.html">$totalcohorts</a> = <a class="var it7780" onMouseOver="hilite(7780)" onMouseOut="lolite()" onClick="logVariable('allcohorts')" href="../_variables/allcohorts.html">$allcohorts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('cohort', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l396"><span class="linenum"> 396</span></a>      if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>)) {
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it7779" onMouseOver="hilite(7779)" onMouseOut="lolite()" onClick="logVariable('totalcohorts')" href="../_variables/totalcohorts.html">$totalcohorts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it7777" onMouseOver="hilite(7777)" onMouseOut="lolite()" onClick="logVariable('countfields')" href="../_variables/countfields.html">$countfields</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l398"><span class="linenum"> 398</span></a>      }
<a name="l399"><span class="linenum"> 399</span></a>      <a class="var it7781" onMouseOver="hilite(7781)" onMouseOut="lolite()" onClick="logVariable('cohorts')" href="../_variables/cohorts.html">$cohorts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> . <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>*<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>);
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>      return array('totalcohorts' =&gt; <a class="var it7779" onMouseOver="hilite(7779)" onMouseOut="lolite()" onClick="logVariable('totalcohorts')" href="../_variables/totalcohorts.html">$totalcohorts</a>, 'cohorts' =&gt; <a class="var it7781" onMouseOver="hilite(7781)" onMouseOut="lolite()" onClick="logVariable('cohorts')" href="../_variables/cohorts.html">$cohorts</a>, 'allcohorts' =&gt; <a class="var it7780" onMouseOver="hilite(7780)" onMouseOut="lolite()" onClick="logVariable('allcohorts')" href="../_variables/allcohorts.html">$allcohorts</a>);
<a name="l402"><span class="linenum"> 402</span></a>  }
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">/**</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment"> * Get all the cohorts defined anywhere in system.</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment"> *</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment"> * The function assumes that user capability to view/manage cohorts on system level</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment"> * has already been verified. This function only checks if such capabilities have been</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment"> * revoked in child (categories) contexts.</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment"> *</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment"> * @param int $page number of the current page</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment"> * @param int $perpage items per page</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment"> * @param string $search search string</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> * @return array    Array(totalcohorts =&gt; int, cohorts =&gt; array, allcohorts =&gt; int)</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> */</span>
<a name="l416"><span class="linenum"> 416</span></a>  function <a class="function" onClick="logFunction('cohort_get_all_cohorts')" href="../_functions/cohort_get_all_cohorts.html" onMouseOver="funcPopup(event,'cohort_get_all_cohorts')">cohort_get_all_cohorts</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = 0, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a> = 25, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> = '') {
<a name="l417"><span class="linenum"> 417</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>      <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = &quot;SELECT c.*, &quot;.<a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l420"><span class="linenum"> 420</span></a>      <a class="var it7777" onMouseOver="hilite(7777)" onMouseOut="lolite()" onClick="logVariable('countfields')" href="../_variables/countfields.html">$countfields</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*)&quot;;
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot; FROM {cohort} c
<a name="l422"><span class="linenum"> 422</span></a>               JOIN {context} ctx ON ctx.id = c.contextid &quot;;
<a name="l423"><span class="linenum"> 423</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l424"><span class="linenum"> 424</span></a>      <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> = '';
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>      if (<a class="var it7782" onMouseOver="hilite(7782)" onMouseOut="lolite()" onClick="logVariable('excludedcontexts')" href="../_variables/excludedcontexts.html">$excludedcontexts</a> = <a class="function" onClick="logFunction('cohort_get_invisible_contexts')" href="../_functions/cohort_get_invisible_contexts.html" onMouseOver="funcPopup(event,'cohort_get_invisible_contexts')">cohort_get_invisible_contexts</a>()) {
<a name="l427"><span class="linenum"> 427</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it7783" onMouseOver="hilite(7783)" onMouseOut="lolite()" onClick="logVariable('excludedsql')" href="../_variables/excludedsql.html">$excludedsql</a>, <a class="var it7784" onMouseOver="hilite(7784)" onMouseOut="lolite()" onClick="logVariable('excludedparams')" href="../_variables/excludedparams.html">$excludedparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it7782" onMouseOver="hilite(7782)" onMouseOut="lolite()" onClick="logVariable('excludedcontexts')" href="../_variables/excludedcontexts.html">$excludedcontexts</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'excl', false);
<a name="l428"><span class="linenum"> 428</span></a>          <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> = ' WHERE c.contextid '.<a class="var it7783" onMouseOver="hilite(7783)" onMouseOut="lolite()" onClick="logVariable('excludedsql')" href="../_variables/excludedsql.html">$excludedsql</a>;
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it7784" onMouseOver="hilite(7784)" onMouseOut="lolite()" onClick="logVariable('excludedparams')" href="../_variables/excludedparams.html">$excludedparams</a>);
<a name="l430"><span class="linenum"> 430</span></a>      }
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>      <a class="var it7779" onMouseOver="hilite(7779)" onMouseOut="lolite()" onClick="logVariable('totalcohorts')" href="../_variables/totalcohorts.html">$totalcohorts</a> = <a class="var it7780" onMouseOver="hilite(7780)" onMouseOut="lolite()" onClick="logVariable('allcohorts')" href="../_variables/allcohorts.html">$allcohorts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it7777" onMouseOver="hilite(7777)" onMouseOut="lolite()" onClick="logVariable('countfields')" href="../_variables/countfields.html">$countfields</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> . <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>      if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>)) {
<a name="l435"><span class="linenum"> 435</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it7778" onMouseOver="hilite(7778)" onMouseOut="lolite()" onClick="logVariable('searchcondition')" href="../_variables/searchcondition.html">$searchcondition</a>, <a class="var it7773" onMouseOver="hilite(7773)" onMouseOut="lolite()" onClick="logVariable('searchparams')" href="../_variables/searchparams.html">$searchparams</a>) = <a class="function" onClick="logFunction('cohort_get_search_query')" href="../_functions/cohort_get_search_query.html" onMouseOver="funcPopup(event,'cohort_get_search_query')">cohort_get_search_query</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>, 'c');
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> .= (<a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> ? ' AND ' : ' WHERE ') . <a class="var it7778" onMouseOver="hilite(7778)" onMouseOut="lolite()" onClick="logVariable('searchcondition')" href="../_variables/searchcondition.html">$searchcondition</a>;
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it7773" onMouseOver="hilite(7773)" onMouseOut="lolite()" onClick="logVariable('searchparams')" href="../_variables/searchparams.html">$searchparams</a>);
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it7779" onMouseOver="hilite(7779)" onMouseOut="lolite()" onClick="logVariable('totalcohorts')" href="../_variables/totalcohorts.html">$totalcohorts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it7777" onMouseOver="hilite(7777)" onMouseOut="lolite()" onClick="logVariable('countfields')" href="../_variables/countfields.html">$countfields</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> . <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l439"><span class="linenum"> 439</span></a>      }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>      <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a> = &quot; ORDER BY c.name ASC, c.idnumber ASC&quot;;
<a name="l442"><span class="linenum"> 442</span></a>      <a class="var it7781" onMouseOver="hilite(7781)" onMouseOut="lolite()" onClick="logVariable('cohorts')" href="../_variables/cohorts.html">$cohorts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> . <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> . <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../_variables/order.html">$order</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>*<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../_variables/perpage.html">$perpage</a>);
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">    // Preload used contexts, they will be used to check view/manage/assign capabilities and display categories names.</span>
<a name="l445"><span class="linenum"> 445</span></a>      foreach (<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7781" onMouseOver="hilite(7781)" onMouseOut="lolite()" onClick="logVariable('cohorts')" href="../_variables/cohorts.html">$cohorts</a>) as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l446"><span class="linenum"> 446</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it7781" onMouseOver="hilite(7781)" onMouseOut="lolite()" onClick="logVariable('cohorts')" href="../_variables/cohorts.html">$cohorts</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l447"><span class="linenum"> 447</span></a>      }
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>      return array('totalcohorts' =&gt; <a class="var it7779" onMouseOver="hilite(7779)" onMouseOut="lolite()" onClick="logVariable('totalcohorts')" href="../_variables/totalcohorts.html">$totalcohorts</a>, 'cohorts' =&gt; <a class="var it7781" onMouseOver="hilite(7781)" onMouseOut="lolite()" onClick="logVariable('cohorts')" href="../_variables/cohorts.html">$cohorts</a>, 'allcohorts' =&gt; <a class="var it7780" onMouseOver="hilite(7780)" onMouseOut="lolite()" onClick="logVariable('allcohorts')" href="../_variables/allcohorts.html">$allcohorts</a>);
<a name="l450"><span class="linenum"> 450</span></a>  }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">/**</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment"> * Returns list of contexts where cohorts are present but current user does not have capability to view/manage them.</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment"> *</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment"> * This function is called from {@link cohort_get_all_cohorts()} to ensure correct pagination in rare cases when user</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment"> * is revoked capability in child contexts. It assumes that user's capability to view/manage cohorts on system</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment"> * level has already been verified.</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment"> *</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment"> * @access private</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment"> *</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment"> * @return array array of context ids</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment"> */</span>
<a name="l463"><span class="linenum"> 463</span></a>  function <a class="function" onClick="logFunction('cohort_get_invisible_contexts')" href="../_functions/cohort_get_invisible_contexts.html" onMouseOver="funcPopup(event,'cohort_get_invisible_contexts')">cohort_get_invisible_contexts</a>() {
<a name="l464"><span class="linenum"> 464</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l465"><span class="linenum"> 465</span></a>      if (<a class="function" onClick="logFunction('is_siteadmin')" href="../_functions/is_siteadmin.html" onMouseOver="funcPopup(event,'is_siteadmin')">is_siteadmin</a>()) {
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">        // Shortcut, admin can do anything and can not be prohibited from any context.</span>
<a name="l467"><span class="linenum"> 467</span></a>          return array();
<a name="l468"><span class="linenum"> 468</span></a>      }
<a name="l469"><span class="linenum"> 469</span></a>      <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(&quot;SELECT DISTINCT ctx.id, &quot;.<a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx').&quot; &quot;.
<a name="l470"><span class="linenum"> 470</span></a>          &quot;FROM {context} ctx JOIN {cohort} c ON ctx.id = c.contextid &quot;);
<a name="l471"><span class="linenum"> 471</span></a>      <a class="var it7782" onMouseOver="hilite(7782)" onMouseOut="lolite()" onClick="logVariable('excludedcontexts')" href="../_variables/excludedcontexts.html">$excludedcontexts</a> = array();
<a name="l472"><span class="linenum"> 472</span></a>      foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>) {
<a name="l473"><span class="linenum"> 473</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>);
<a name="l474"><span class="linenum"> 474</span></a>          if (!<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/cohort:manage', 'moodle/cohort:view'), context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>-&gt;<a onClick="logVariable('id')" class="var it43401" onMouseOver="hilite(43401)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l475"><span class="linenum"> 475</span></a>              <a class="var it7782" onMouseOver="hilite(7782)" onMouseOut="lolite()" onClick="logVariable('excludedcontexts')" href="../_variables/excludedcontexts.html">$excludedcontexts</a>[] = <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../_variables/ctx.html">$ctx</a>-&gt;<a onClick="logVariable('id')" class="var it43401" onMouseOver="hilite(43401)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l476"><span class="linenum"> 476</span></a>          }
<a name="l477"><span class="linenum"> 477</span></a>      }
<a name="l478"><span class="linenum"> 478</span></a>      return <a class="var it7782" onMouseOver="hilite(7782)" onMouseOut="lolite()" onClick="logVariable('excludedcontexts')" href="../_variables/excludedcontexts.html">$excludedcontexts</a>;
<a name="l479"><span class="linenum"> 479</span></a>  }
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">/**</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> * Returns navigation controls (tabtree) to be displayed on cohort management pages</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment"> *</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment"> * @param context $context system or category context where cohorts controls are about to be displayed</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> * @param moodle_url $currenturl</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"> * @return null|renderable</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment"> */</span>
<a name="l488"><span class="linenum"> 488</span></a>  function <a class="function" onClick="logFunction('cohort_edit_controls')" href="../_functions/cohort_edit_controls.html" onMouseOver="funcPopup(event,'cohort_edit_controls')">cohort_edit_controls</a>(context <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, moodle_url <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../_variables/currenturl.html">$currenturl</a>) {
<a name="l489"><span class="linenum"> 489</span></a>      <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a> = array();
<a name="l490"><span class="linenum"> 490</span></a>      <a class="var it1248" onMouseOver="hilite(1248)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../_variables/currenttab.html">$currenttab</a> = 'view';
<a name="l491"><span class="linenum"> 491</span></a>      <a class="var it1976" onMouseOver="hilite(1976)" onMouseOut="lolite()" onClick="logVariable('viewurl')" href="../_variables/viewurl.html">$viewurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../cohort/index.php.html">/cohort/index.php</a>', array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l492"><span class="linenum"> 492</span></a>      if ((<a class="var it7786" onMouseOver="hilite(7786)" onMouseOut="lolite()" onClick="logVariable('searchquery')" href="../_variables/searchquery.html">$searchquery</a> = <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('get_param')" href="../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>('search'))) {
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it1976" onMouseOver="hilite(1976)" onMouseOut="lolite()" onClick="logVariable('viewurl')" href="../_variables/viewurl.html">$viewurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('search', <a class="var it7786" onMouseOver="hilite(7786)" onMouseOut="lolite()" onClick="logVariable('searchquery')" href="../_variables/searchquery.html">$searchquery</a>);
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l496"><span class="linenum"> 496</span></a>          <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>('view', <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it1976" onMouseOver="hilite(1976)" onMouseOut="lolite()" onClick="logVariable('viewurl')" href="../_variables/viewurl.html">$viewurl</a>, array('showall' =&gt; 0)), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('systemcohorts', 'cohort'));
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>('viewall', <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it1976" onMouseOver="hilite(1976)" onMouseOut="lolite()" onClick="logVariable('viewurl')" href="../_variables/viewurl.html">$viewurl</a>, array('showall' =&gt; 1)), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('allcohorts', 'cohort'));
<a name="l498"><span class="linenum"> 498</span></a>          if (<a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('get_param')" href="../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>('showall')) {
<a name="l499"><span class="linenum"> 499</span></a>              <a class="var it1248" onMouseOver="hilite(1248)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../_variables/currenttab.html">$currenttab</a> = 'viewall';
<a name="l500"><span class="linenum"> 500</span></a>          }
<a name="l501"><span class="linenum"> 501</span></a>      } else {
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>('view', <a class="var it1976" onMouseOver="hilite(1976)" onMouseOut="lolite()" onClick="logVariable('viewurl')" href="../_variables/viewurl.html">$viewurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cohorts', 'cohort'));
<a name="l503"><span class="linenum"> 503</span></a>      }
<a name="l504"><span class="linenum"> 504</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/cohort:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l505"><span class="linenum"> 505</span></a>          <a class="var it7787" onMouseOver="hilite(7787)" onMouseOut="lolite()" onClick="logVariable('addurl')" href="../_variables/addurl.html">$addurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../cohort/edit.php.html">/cohort/edit.php</a>', array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l506"><span class="linenum"> 506</span></a>          <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>('addcohort', <a class="var it7787" onMouseOver="hilite(7787)" onMouseOut="lolite()" onClick="logVariable('addurl')" href="../_variables/addurl.html">$addurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addcohort', 'cohort'));
<a name="l507"><span class="linenum"> 507</span></a>          if (<a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('get_path')" href="../_functions/get_path.html" onMouseOver="funcPopup(event,'get_path')">get_path</a>() === <a class="var it7787" onMouseOver="hilite(7787)" onMouseOut="lolite()" onClick="logVariable('addurl')" href="../_variables/addurl.html">$addurl</a>-&gt;<a class="function" onClick="logFunction('get_path')" href="../_functions/get_path.html" onMouseOver="funcPopup(event,'get_path')">get_path</a>() &amp;&amp; !<a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('id')) {
<a name="l508"><span class="linenum"> 508</span></a>              <a class="var it1248" onMouseOver="hilite(1248)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../_variables/currenttab.html">$currenttab</a> = 'addcohort';
<a name="l509"><span class="linenum"> 509</span></a>          }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>          <a class="var it5228" onMouseOver="hilite(5228)" onMouseOut="lolite()" onClick="logVariable('uploadurl')" href="../_variables/uploadurl.html">$uploadurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../cohort/upload.php.html">/cohort/upload.php</a>', array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l512"><span class="linenum"> 512</span></a>          <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>('uploadcohorts', <a class="var it5228" onMouseOver="hilite(5228)" onMouseOut="lolite()" onClick="logVariable('uploadurl')" href="../_variables/uploadurl.html">$uploadurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('uploadcohorts', 'cohort'));
<a name="l513"><span class="linenum"> 513</span></a>          if (<a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('get_path')" href="../_functions/get_path.html" onMouseOver="funcPopup(event,'get_path')">get_path</a>() === <a class="var it5228" onMouseOver="hilite(5228)" onMouseOut="lolite()" onClick="logVariable('uploadurl')" href="../_variables/uploadurl.html">$uploadurl</a>-&gt;<a class="function" onClick="logFunction('get_path')" href="../_functions/get_path.html" onMouseOver="funcPopup(event,'get_path')">get_path</a>()) {
<a name="l514"><span class="linenum"> 514</span></a>              <a class="var it1248" onMouseOver="hilite(1248)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../_variables/currenttab.html">$currenttab</a> = 'uploadcohorts';
<a name="l515"><span class="linenum"> 515</span></a>          }
<a name="l516"><span class="linenum"> 516</span></a>      }
<a name="l517"><span class="linenum"> 517</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>) &gt; 1) {
<a name="l518"><span class="linenum"> 518</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('tabtree')" href="../_classes/tabtree.html" onMouseOver="classPopup(event,'tabtree')">tabtree</a>(<a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>, <a class="var it1248" onMouseOver="hilite(1248)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../_variables/currenttab.html">$currenttab</a>);
<a name="l519"><span class="linenum"> 519</span></a>      }
<a name="l520"><span class="linenum"> 520</span></a>      return null;
<a name="l521"><span class="linenum"> 521</span></a>  }
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">/**</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment"> * Implements callback inplace_editable() allowing to edit values in-place</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment"> *</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment"> * @param string $itemtype</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment"> * @param mixed $newvalue</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment"> * @return \core\output\inplace_editable</span>
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment"> */</span>
<a name="l531"><span class="linenum"> 531</span></a>  function <a class="function" onClick="logFunction('core_cohort_inplace_editable')" href="../_functions/core_cohort_inplace_editable.html" onMouseOver="funcPopup(event,'core_cohort_inplace_editable')">core_cohort_inplace_editable</a>(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a>) {
<a name="l532"><span class="linenum"> 532</span></a>      if (<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a> === 'cohortname') {
<a name="l533"><span class="linenum"> 533</span></a>          return \core_cohort\output\<a class="class" onClick="logClass('cohortname')" href="../_classes/cohortname.html" onMouseOver="classPopup(event,'cohortname')">cohortname</a>::<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a>);
<a name="l534"><span class="linenum"> 534</span></a>      } else if (<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a> === 'cohortidnumber') {
<a name="l535"><span class="linenum"> 535</span></a>          return \core_cohort\output\<a class="class" onClick="logClass('cohortidnumber')" href="../_classes/cohortidnumber.html" onMouseOver="classPopup(event,'cohortidnumber')">cohortidnumber</a>::<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a>);
<a name="l536"><span class="linenum"> 536</span></a>      }
<a name="l537"><span class="linenum"> 537</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_enrolled_sql': ['get_enrolled_sql', 'Returns array with sql code and parameters returning all ids of users enrolled into course. ', [['lib','accesslib.php',2247]], 47],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'cohort_add_member': ['cohort_add_member', 'Add cohort member ', [['cohort','lib.php',153]], 70],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6066]], 56],
'cohort_delete_category': ['cohort_delete_category', 'Somehow deal with cohorts when deleting course category, we can not just delete them because they might be used in enrol plugins or referenced in external systems. ', [['cohort','lib.php',127]], 3],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_parent_context_ids': ['get_parent_context_ids', 'Returns parent contexts of this context in reversed order, i.e. parent first, then grand parent, etc. ', [['lib','accesslib.php',5725]], 55],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'cohort_can_view_cohort': ['cohort_can_view_cohort', 'Check if cohort exists and user is allowed to access it from the given context. ', [['cohort','lib.php',306]], 2],
'cohort_get_search_query': ['cohort_get_search_query', 'Produces a part of SQL query to filter cohorts by the search string ', [['cohort','lib.php',333]], 3],
'get_path': ['get_path', '', [['backup/util/structure','restore_path_element.class.php',102],['lib','weblib.php',880],['competency/tests','persistent_test.php',530],['mod/lti/service/profile/classes/local/resource','profile.php',59],['backup/converter/moodle1','lib.php',1040],['mod/lti/classes/local/ltiservice','resource_base.php',103]], 56],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1796]], 155],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'cohort_get_invisible_contexts': ['cohort_get_invisible_contexts', 'Returns list of contexts where cohorts are present but current user does not have capability to view/manage them. ', [['cohort','lib.php',452]], 1],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5250],['lib','accesslib.php',6079]], 61],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'cohort_edit_controls': ['cohort_edit_controls', 'Returns navigation controls (tabtree) to be displayed on cohort management pages ', [['cohort','lib.php',481]], 3],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'core_cohort_inplace_editable': ['core_cohort_inplace_editable', 'Implements callback inplace_editable() allowing to edit values in-place ', [['cohort','lib.php',523]], 0],
'cohort_is_member': ['cohort_is_member', 'Is this user a cohort member? ', [['cohort','lib.php',203]], 3],
'is_siteadmin': ['is_siteadmin', 'Check if the user is an admin at the site level. ', [['lib','accesslib.php',602]], 95],
'hook_cohort_deleted': ['hook_cohort_deleted', 'Action to perform when a cohort is deleted. ', [['competency/classes','api.php',4709]], 1],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'sql_like': ['sql_like', 'Returns \'LIKE\' part of a query. ', [['lib/dml','oci_native_moodle_database.php',1575],['lib/dml','pgsql_native_moodle_database.php',1188],['lib/dml','mssql_native_moodle_database.php',1224],['lib/dml','mysqli_native_moodle_database.php',1514],['lib/dml','moodle_database.php',2053],['lib/dml','sqlsrv_native_moodle_database.php',1291]], 159],
'cohort_get_available_cohorts': ['cohort_get_available_cohorts', 'Returns the list of cohorts visible to the current user in the given course. ', [['cohort','lib.php',215]], 33],
'cohort_add_cohort': ['cohort_add_cohort', 'Add new cohort. ', [['cohort','lib.php',34]], 11],
'cohort_delete_cohort': ['cohort_delete_cohort', 'Delete cohort. ', [['cohort','lib.php',101]], 8],
'cohort_update_cohort': ['cohort_update_cohort', 'Update existing cohort. ', [['cohort','lib.php',80]], 9],
'cohort_get_cohorts': ['cohort_get_cohorts', 'Get all the cohorts defined in given context. ', [['cohort','lib.php',367]], 13],
'get_param': ['get_param', 'Returns a given parameter value from the URL. ', [['lib','weblib.php',899]], 11],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'cohort_remove_member': ['cohort_remove_member', 'Remove cohort member ', [['cohort','lib.php',182]], 21],
'cohort_get_all_cohorts': ['cohort_get_all_cohorts', 'Get all the cohorts defined anywhere in system. ', [['cohort','lib.php',404]], 8],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'sql_like_escape': ['sql_like_escape', 'Escape sql LIKE special characters like \'_\' or \'%\'. ', [['lib/dml','moodle_database.php',2073]], 26],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'array_diff': ['array_diff', '', [], 102],
'array_keys': ['array_keys', '', [], 1256],
'str_replace': ['str_replace', '', [], 1648],
'create_function': ['create_function', '', [], 43],
'defined': ['defined', '', [], 4731],
'implode': ['implode', '', [], 1281],
'array_filter': ['array_filter', '', [], 70],
'substr': ['substr', '', [], 2823],
'in_array': ['in_array', '', [], 1234],
'array_merge': ['array_merge', '', [], 2944],
'define': ['define', '', [], 2373],
'count': ['count', '', [], 4095],
'is_numeric': ['is_numeric', '', [], 672],
'time': ['time', '', [], 1959]};
CLASS_DATA={
'api': ['api', 'Class for doing things with cohort roles. ', [['admin/tool/cohortroles/classes','api.php',30],['admin/tool/mobile/classes','api.php',31],['competency/classes','api.php',41],['lib/classes/update','api.php',33],['admin/tool/templatelibrary/classes','api.php',33]], 699],
'cohort_member_added': ['cohort_member_added', 'User added to a cohort event class. ', [['lib/classes/event','cohort_member_added.php',28]], 1],
'cohort_updated': ['cohort_updated', 'Cohort updated event class. ', [['lib/classes/event','cohort_updated.php',28]], 1],
'cohort_deleted': ['cohort_deleted', 'Cohort deleted event class. ', [['lib/classes/event','cohort_deleted.php',28]], 1],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'cohortname': ['cohortname', 'Class to prepare a cohort name for display. ', [['cohort/classes/output','cohortname.php',29]], 1],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6585]], 194],
'cohortidnumber': ['cohortidnumber', 'Class to prepare a cohort idnumber for display. ', [['cohort/classes/output','cohortidnumber.php',29]], 1],
'tabobject': ['tabobject', 'Stores one tab ', [['lib','outputcomponents.php',3002]], 71],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'cohort_member_removed': ['cohort_member_removed', 'User removed from a cohort event class. ', [['lib/classes/event','cohort_member_removed.php',28]], 1],
'cohort_created': ['cohort_created', 'Cohort created event class. ', [['lib/classes/event','cohort_created.php',28]], 1],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'tabtree': ['tabtree', 'Stores tabs list ', [['lib','outputcomponents.php',3181]], 2]};
CONST_DATA={
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'COHORT_WITH_ENROLLED_MEMBERS_ONLY': ['COHORT_WITH_ENROLLED_MEMBERS_ONLY', '', [['cohort','lib.php',31]], 7],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'COHORT_COUNT_ENROLLED_MEMBERS': ['COHORT_COUNT_ENROLLED_MEMBERS', '', [['cohort','lib.php',29]], 2],
'COHORT_ALL': ['COHORT_ALL', '', [['cohort','lib.php',27]], 13],
'COHORT_WITH_NOTENROLLED_MEMBERS_ONLY': ['COHORT_WITH_NOTENROLLED_MEMBERS_ONLY', '', [['cohort','lib.php',32]], 6],
'COHORT_WITH_MEMBERS_ONLY': ['COHORT_WITH_MEMBERS_ONLY', '', [['cohort','lib.php',30]], 11],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'COHORT_COUNT_MEMBERS': ['COHORT_COUNT_MEMBERS', '', [['cohort','lib.php',28]], 1]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
