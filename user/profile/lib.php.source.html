<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /user/profile/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='user/profile';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/user/profile/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Profile field API library file.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package core_user</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2007 onwards Shane Elliot {@link http://pukunui.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('PROFILE_VISIBLE_ALL')" href="../../_constants/PROFILE_VISIBLE_ALL.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_ALL')">PROFILE_VISIBLE_ALL</a>',     '2'); <span class="comment">// Only visible for users with moodle/user:update capability.</span>
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('PROFILE_VISIBLE_PRIVATE')" href="../../_constants/PROFILE_VISIBLE_PRIVATE.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_PRIVATE')">PROFILE_VISIBLE_PRIVATE</a>', '1'); <span class="comment">// Either we are viewing our own profile or we have moodle/user:update capability.</span>
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('PROFILE_VISIBLE_NONE')" href="../../_constants/PROFILE_VISIBLE_NONE.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_NONE')">PROFILE_VISIBLE_NONE</a>',    '0'); <span class="comment">// Only visible for moodle/user:update capability.</span>
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Base class for the customisable profile fields.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @package core_user</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @copyright  2007 onwards Shane Elliot {@link http://pukunui.com}</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> */</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('profile_field_base')" href="../../_classes/profile_field_base.html" onMouseOver="classPopup(event,'profile_field_base')">profile_field_base</a> {
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">    // These 2 variables are really what we're interested in.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">    // Everything else can be extracted from them.</span>
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">    /** @var int */</span>
<a name="l42"><span class="linenum">  42</span></a>      public <a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>;
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">    /** @var int */</span>
<a name="l45"><span class="linenum">  45</span></a>      public <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">    /** @var stdClass */</span>
<a name="l48"><span class="linenum">  48</span></a>      public <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>;
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">    /** @var string */</span>
<a name="l51"><span class="linenum">  51</span></a>      public <a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('inputname')" href="../../_variables/inputname.html">$inputname</a>;
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">    /** @var mixed */</span>
<a name="l54"><span class="linenum">  54</span></a>      public <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">    /** @var string */</span>
<a name="l57"><span class="linenum">  57</span></a>      public <a class="var it23510" onMouseOver="hilite(23510)" onMouseOut="lolite()" onClick="logVariable('dataformat')" href="../../_variables/dataformat.html">$dataformat</a>;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      <span class="comment">/**</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * Constructor method.</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * @param int $fieldid id of the profile from the user_info_field table</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * @param int $userid id of the user for whom we are displaying data</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     */</span>
<a name="l64"><span class="linenum">  64</span></a>      public function <a class="function" onClick="logFunction('profile_field_base')" href="../../_functions/profile_field_base.html" onMouseOver="funcPopup(event,'profile_field_base')">profile_field_base</a>(<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>=0, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0) {
<a name="l65"><span class="linenum">  65</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_fieldid')" href="../../_functions/set_fieldid.html" onMouseOver="funcPopup(event,'set_fieldid')">set_fieldid</a>(<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>);
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_userid')" href="../../_functions/set_userid.html" onMouseOver="funcPopup(event,'set_userid')">set_userid</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l69"><span class="linenum">  69</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_data')" href="../../_functions/load_data.html" onMouseOver="funcPopup(event,'load_data')">load_data</a>();
<a name="l70"><span class="linenum">  70</span></a>      }
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * Abstract method: Adds the profile field to the moodle form class</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @abstract The following methods must be overwritten by child classes</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * @param moodleform $mform instance of the moodleform class</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     */</span>
<a name="l77"><span class="linenum">  77</span></a>      public function <a class="function" onClick="logFunction('edit_field_add')" href="../../_functions/edit_field_add.html" onMouseOver="funcPopup(event,'edit_field_add')">edit_field_add</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l78"><span class="linenum">  78</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('mustbeoveride', 'debug', '', 'edit_field_add');
<a name="l79"><span class="linenum">  79</span></a>      }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <span class="comment">/**</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * Display the data for this field</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * @return string</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     */</span>
<a name="l85"><span class="linenum">  85</span></a>      public function <a class="function" onClick="logFunction('display_data')" href="../../_functions/display_data.html" onMouseOver="funcPopup(event,'display_data')">display_data</a>() {
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass();
<a name="l87"><span class="linenum">  87</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = false;
<a name="l88"><span class="linenum">  88</span></a>          return <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>, <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l89"><span class="linenum">  89</span></a>      }
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>      <span class="comment">/**</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * Print out the form field in the edit profile page</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     * @param moodleform $mform instance of the moodleform class</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     * @return bool</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     */</span>
<a name="l96"><span class="linenum">  96</span></a>      public function <a class="function" onClick="logFunction('edit_field')" href="../../_functions/edit_field.html" onMouseOver="funcPopup(event,'edit_field')">edit_field</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l97"><span class="linenum">  97</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;visible != <a class="constant" onClick="logConstant('PROFILE_VISIBLE_NONE')" href="../../_constants/PROFILE_VISIBLE_NONE.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_NONE')">PROFILE_VISIBLE_NONE</a>
<a name="l98"><span class="linenum">  98</span></a>            or <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:update', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('edit_field_add')" href="../../_functions/edit_field_add.html" onMouseOver="funcPopup(event,'edit_field_add')">edit_field_add</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l101"><span class="linenum"> 101</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('edit_field_set_default')" href="../../_functions/edit_field_set_default.html" onMouseOver="funcPopup(event,'edit_field_set_default')">edit_field_set_default</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l102"><span class="linenum"> 102</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('edit_field_set_required')" href="../../_functions/edit_field_set_required.html" onMouseOver="funcPopup(event,'edit_field_set_required')">edit_field_set_required</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l103"><span class="linenum"> 103</span></a>              return true;
<a name="l104"><span class="linenum"> 104</span></a>          }
<a name="l105"><span class="linenum"> 105</span></a>          return false;
<a name="l106"><span class="linenum"> 106</span></a>      }
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>      <span class="comment">/**</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     * Tweaks the edit form</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * @param moodleform $mform instance of the moodleform class</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * @return bool</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     */</span>
<a name="l113"><span class="linenum"> 113</span></a>      public function <a class="function" onClick="logFunction('edit_after_data')" href="../../_functions/edit_after_data.html" onMouseOver="funcPopup(event,'edit_after_data')">edit_after_data</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l114"><span class="linenum"> 114</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;visible != <a class="constant" onClick="logConstant('PROFILE_VISIBLE_NONE')" href="../../_constants/PROFILE_VISIBLE_NONE.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_NONE')">PROFILE_VISIBLE_NONE</a>
<a name="l115"><span class="linenum"> 115</span></a>            or <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:update', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l116"><span class="linenum"> 116</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('edit_field_set_locked')" href="../../_functions/edit_field_set_locked.html" onMouseOver="funcPopup(event,'edit_field_set_locked')">edit_field_set_locked</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l117"><span class="linenum"> 117</span></a>              return true;
<a name="l118"><span class="linenum"> 118</span></a>          }
<a name="l119"><span class="linenum"> 119</span></a>          return false;
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * Saves the data coming from form</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @param stdClass $usernew data coming from the form</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @return mixed returns data id if success of db insert/update, false on fail, 0 if not permitted</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     */</span>
<a name="l127"><span class="linenum"> 127</span></a>      public function <a class="function" onClick="logFunction('edit_save_data')" href="../../_functions/edit_save_data.html" onMouseOver="funcPopup(event,'edit_save_data')">edit_save_data</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>) {
<a name="l128"><span class="linenum"> 128</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>          if (!isset(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>})) {
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">            // Field not present in form, probably locked and invisible - skip it.</span>
<a name="l132"><span class="linenum"> 132</span></a>              return;
<a name="l133"><span class="linenum"> 133</span></a>          }
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>} = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('edit_save_data_preprocess')" href="../../_functions/edit_save_data_preprocess.html" onMouseOver="funcPopup(event,'edit_save_data_preprocess')">edit_save_data_preprocess</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>}, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>  = <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('id')" class="var it39654" onMouseOver="hilite(39654)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l140"><span class="linenum"> 140</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id;
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('data')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>    = <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>};
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>          if (<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('user_info_data', 'id', array('userid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, 'fieldid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>))) {
<a name="l144"><span class="linenum"> 144</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>;
<a name="l145"><span class="linenum"> 145</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('user_info_data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l146"><span class="linenum"> 146</span></a>          } else {
<a name="l147"><span class="linenum"> 147</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('user_info_data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l148"><span class="linenum"> 148</span></a>          }
<a name="l149"><span class="linenum"> 149</span></a>      }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      <span class="comment">/**</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * Validate the form field from profile page</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     *</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * @param stdClass $usernew</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * @return  string  contains error message otherwise null</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     */</span>
<a name="l157"><span class="linenum"> 157</span></a>      public function <a class="function" onClick="logFunction('edit_validate_field')" href="../../_functions/edit_validate_field.html" onMouseOver="funcPopup(event,'edit_validate_field')">edit_validate_field</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>) {
<a name="l158"><span class="linenum"> 158</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a> = array();
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">        // Get input value.</span>
<a name="l162"><span class="linenum"> 162</span></a>          if (isset(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>})) {
<a name="l163"><span class="linenum"> 163</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>}) &amp;&amp; isset(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>}['text'])) {
<a name="l164"><span class="linenum"> 164</span></a>                  <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>}['text'];
<a name="l165"><span class="linenum"> 165</span></a>              } else {
<a name="l166"><span class="linenum"> 166</span></a>                  <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>};
<a name="l167"><span class="linenum"> 167</span></a>              }
<a name="l168"><span class="linenum"> 168</span></a>          } else {
<a name="l169"><span class="linenum"> 169</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = '';
<a name="l170"><span class="linenum"> 170</span></a>          }
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">        // Check for uniqueness of data if required.</span>
<a name="l173"><span class="linenum"> 173</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_unique')" href="../../_functions/is_unique.html" onMouseOver="funcPopup(event,'is_unique')">is_unique</a>() &amp;&amp; ((<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> !== '') || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_required')" href="../../_functions/is_required.html" onMouseOver="funcPopup(event,'is_required')">is_required</a>())) {
<a name="l174"><span class="linenum"> 174</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>('
<a name="l175"><span class="linenum"> 175</span></a>                      SELECT id, userid
<a name="l176"><span class="linenum"> 176</span></a>                        FROM {user_info_data}
<a name="l177"><span class="linenum"> 177</span></a>                       WHERE fieldid = ?
<a name="l178"><span class="linenum"> 178</span></a>                         AND ' . <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_compare_text')" href="../../_functions/sql_compare_text.html" onMouseOver="funcPopup(event,'sql_compare_text')">sql_compare_text</a>('data', 255) . ' = ' . <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_compare_text')" href="../../_functions/sql_compare_text.html" onMouseOver="funcPopup(event,'sql_compare_text')">sql_compare_text</a>('?', 255),
<a name="l179"><span class="linenum"> 179</span></a>                      array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>));
<a name="l180"><span class="linenum"> 180</span></a>              if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l181"><span class="linenum"> 181</span></a>                  <a class="var it3149" onMouseOver="hilite(3149)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a> = false;
<a name="l182"><span class="linenum"> 182</span></a>                  foreach (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> as <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../_variables/v.html">$v</a>) {
<a name="l183"><span class="linenum"> 183</span></a>                      if (<a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../_variables/v.html">$v</a>-&gt;<a onClick="logVariable('userid')" class="var it39462" onMouseOver="hilite(39462)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('id')" class="var it39654" onMouseOver="hilite(39654)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l184"><span class="linenum"> 184</span></a>                          <a class="var it3149" onMouseOver="hilite(3149)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a> = true;
<a name="l185"><span class="linenum"> 185</span></a>                          break;
<a name="l186"><span class="linenum"> 186</span></a>                      }
<a name="l187"><span class="linenum"> 187</span></a>                  }
<a name="l188"><span class="linenum"> 188</span></a>                  if (!<a class="var it3149" onMouseOver="hilite(3149)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a>) {
<a name="l189"><span class="linenum"> 189</span></a>                      <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('valuealreadyused');
<a name="l190"><span class="linenum"> 190</span></a>                  }
<a name="l191"><span class="linenum"> 191</span></a>              }
<a name="l192"><span class="linenum"> 192</span></a>          }
<a name="l193"><span class="linenum"> 193</span></a>          return <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a>;
<a name="l194"><span class="linenum"> 194</span></a>      }
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>      <span class="comment">/**</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * Sets the default data for the field in the form object</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     * @param  moodleform $mform instance of the moodleform class</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     */</span>
<a name="l200"><span class="linenum"> 200</span></a>      public function <a class="function" onClick="logFunction('edit_field_set_default')" href="../../_functions/edit_field_set_default.html" onMouseOver="funcPopup(event,'edit_field_set_default')">edit_field_set_default</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l201"><span class="linenum"> 201</span></a>          if (!empty(<a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>)) {
<a name="l202"><span class="linenum"> 202</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;defaultdata);
<a name="l203"><span class="linenum"> 203</span></a>          }
<a name="l204"><span class="linenum"> 204</span></a>      }
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>      <span class="comment">/**</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     * Sets the required flag for the field in the form object</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     *</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">     * @param moodleform $mform instance of the moodleform class</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     */</span>
<a name="l211"><span class="linenum"> 211</span></a>      public function <a class="function" onClick="logFunction('edit_field_set_required')" href="../../_functions/edit_field_set_required.html" onMouseOver="funcPopup(event,'edit_field_set_required')">edit_field_set_required</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l212"><span class="linenum"> 212</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l213"><span class="linenum"> 213</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_required')" href="../../_functions/is_required.html" onMouseOver="funcPopup(event,'is_required')">is_required</a>() &amp;&amp; (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || <a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>())) {
<a name="l214"><span class="linenum"> 214</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l215"><span class="linenum"> 215</span></a>          }
<a name="l216"><span class="linenum"> 216</span></a>      }
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>      <span class="comment">/**</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * HardFreeze the field if locked.</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * @param moodleform $mform instance of the moodleform class</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     */</span>
<a name="l222"><span class="linenum"> 222</span></a>      public function <a class="function" onClick="logFunction('edit_field_set_locked')" href="../../_functions/edit_field_set_locked.html" onMouseOver="funcPopup(event,'edit_field_set_locked')">edit_field_set_locked</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l223"><span class="linenum"> 223</span></a>          if (!<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('elementExists')" href="../../_functions/elementexists.html" onMouseOver="funcPopup(event,'elementexists')">elementExists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>)) {
<a name="l224"><span class="linenum"> 224</span></a>              return;
<a name="l225"><span class="linenum"> 225</span></a>          }
<a name="l226"><span class="linenum"> 226</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>() and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:update', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l227"><span class="linenum"> 227</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('hardFreeze')" href="../../_functions/hardfreeze.html" onMouseOver="funcPopup(event,'hardfreeze')">hardFreeze</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>);
<a name="l228"><span class="linenum"> 228</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setConstant')" href="../../_functions/setconstant.html" onMouseOver="funcPopup(event,'setconstant')">setConstant</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>);
<a name="l229"><span class="linenum"> 229</span></a>          }
<a name="l230"><span class="linenum"> 230</span></a>      }
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>      <span class="comment">/**</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">     * Hook for child classess to process the data before it gets saved in database</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     * @param stdClass $datarecord The object that will be used to save the record</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     * @return  mixed</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     */</span>
<a name="l238"><span class="linenum"> 238</span></a>      public function <a class="function" onClick="logFunction('edit_save_data_preprocess')" href="../../_functions/edit_save_data_preprocess.html" onMouseOver="funcPopup(event,'edit_save_data_preprocess')">edit_save_data_preprocess</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it15937" onMouseOver="hilite(15937)" onMouseOut="lolite()" onClick="logVariable('datarecord')" href="../../_variables/datarecord.html">$datarecord</a>) {
<a name="l239"><span class="linenum"> 239</span></a>          return <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>      <span class="comment">/**</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     * Loads a user object with data for this field ready for the edit profile</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * form</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * @param stdClass $user a user object</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     */</span>
<a name="l247"><span class="linenum"> 247</span></a>      public function <a class="function" onClick="logFunction('edit_load_user_data')" href="../../_functions/edit_load_user_data.html" onMouseOver="funcPopup(event,'edit_load_user_data')">edit_load_user_data</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l248"><span class="linenum"> 248</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> !== null) {
<a name="l249"><span class="linenum"> 249</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a>} = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>;
<a name="l250"><span class="linenum"> 250</span></a>          }
<a name="l251"><span class="linenum"> 251</span></a>      }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      <span class="comment">/**</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * Check if the field data should be loaded into the user object</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * By default it is, but for field types where the data may be potentially</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     * large, the child class should override this and return false</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * @return bool</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     */</span>
<a name="l259"><span class="linenum"> 259</span></a>      public function <a class="function" onClick="logFunction('is_user_object_data')" href="../../_functions/is_user_object_data.html" onMouseOver="funcPopup(event,'is_user_object_data')">is_user_object_data</a>() {
<a name="l260"><span class="linenum"> 260</span></a>          return true;
<a name="l261"><span class="linenum"> 261</span></a>      }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      <span class="comment">/**</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">     * Accessor method: set the userid for this instance</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * @param integer $userid id from the user table</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     */</span>
<a name="l268"><span class="linenum"> 268</span></a>      public function <a class="function" onClick="logFunction('set_userid')" href="../../_functions/set_userid.html" onMouseOver="funcPopup(event,'set_userid')">set_userid</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l270"><span class="linenum"> 270</span></a>      }
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>      <span class="comment">/**</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * Accessor method: set the fieldid for this instance</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @param integer $fieldid id from the user_info_field table</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     */</span>
<a name="l277"><span class="linenum"> 277</span></a>      public function <a class="function" onClick="logFunction('set_fieldid')" href="../../_functions/set_fieldid.html" onMouseOver="funcPopup(event,'set_fieldid')">set_fieldid</a>(<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>) {
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a> = <a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>;
<a name="l279"><span class="linenum"> 279</span></a>      }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>      <span class="comment">/**</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * Accessor method: Load the field record and user data associated with the</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     * object's fieldid and userid</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     */</span>
<a name="l286"><span class="linenum"> 286</span></a>      public function <a class="function" onClick="logFunction('load_data')" href="../../_functions/load_data.html" onMouseOver="funcPopup(event,'load_data')">load_data</a>() {
<a name="l287"><span class="linenum"> 287</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">        // Load the field object.</span>
<a name="l290"><span class="linenum"> 290</span></a>          if ((<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a> == 0) <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (!(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user_info_field', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>))))) {
<a name="l291"><span class="linenum"> 291</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a> = null;
<a name="l292"><span class="linenum"> 292</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a> = '';
<a name="l293"><span class="linenum"> 293</span></a>          } else {
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>;
<a name="l295"><span class="linenum"> 295</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('inputname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/inputname.html">inputname</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('shortname')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>;
<a name="l296"><span class="linenum"> 296</span></a>          }
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>)) {
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('userid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, 'fieldid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>);
<a name="l300"><span class="linenum"> 300</span></a>              if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user_info_data', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'data, dataformat')) {
<a name="l301"><span class="linenum"> 301</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('data')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>;
<a name="l302"><span class="linenum"> 302</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dataformat')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dataformat.html">dataformat</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dataformat')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/dataformat.html">dataformat</a>;
<a name="l303"><span class="linenum"> 303</span></a>              } else {
<a name="l304"><span class="linenum"> 304</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;defaultdata;
<a name="l305"><span class="linenum"> 305</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dataformat')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dataformat.html">dataformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l306"><span class="linenum"> 306</span></a>              }
<a name="l307"><span class="linenum"> 307</span></a>          } else {
<a name="l308"><span class="linenum"> 308</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = null;
<a name="l309"><span class="linenum"> 309</span></a>          }
<a name="l310"><span class="linenum"> 310</span></a>      }
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>      <span class="comment">/**</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     * Check if the field data is visible to the current user</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     * @return bool</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     */</span>
<a name="l317"><span class="linenum"> 317</span></a>      public function <a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() {
<a name="l318"><span class="linenum"> 318</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>          switch (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;visible) {
<a name="l321"><span class="linenum"> 321</span></a>              case <a class="constant" onClick="logConstant('PROFILE_VISIBLE_ALL')" href="../../_constants/PROFILE_VISIBLE_ALL.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_ALL')">PROFILE_VISIBLE_ALL</a>:
<a name="l322"><span class="linenum"> 322</span></a>                  return true;
<a name="l323"><span class="linenum"> 323</span></a>              case <a class="constant" onClick="logConstant('PROFILE_VISIBLE_PRIVATE')" href="../../_constants/PROFILE_VISIBLE_PRIVATE.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_PRIVATE')">PROFILE_VISIBLE_PRIVATE</a>:
<a name="l324"><span class="linenum"> 324</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l325"><span class="linenum"> 325</span></a>                      return true;
<a name="l326"><span class="linenum"> 326</span></a>                  } else {
<a name="l327"><span class="linenum"> 327</span></a>                      return <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewalldetails',
<a name="l328"><span class="linenum"> 328</span></a>                              <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>));
<a name="l329"><span class="linenum"> 329</span></a>                  }
<a name="l330"><span class="linenum"> 330</span></a>              default:
<a name="l331"><span class="linenum"> 331</span></a>                  return <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewalldetails',
<a name="l332"><span class="linenum"> 332</span></a>                          <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>));
<a name="l333"><span class="linenum"> 333</span></a>          }
<a name="l334"><span class="linenum"> 334</span></a>      }
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>      <span class="comment">/**</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     * Check if the field data is considered empty</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     * @return boolean</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     */</span>
<a name="l341"><span class="linenum"> 341</span></a>      public function <a class="function" onClick="logFunction('is_empty')" href="../../_functions/is_empty.html" onMouseOver="funcPopup(event,'is_empty')">is_empty</a>() {
<a name="l342"><span class="linenum"> 342</span></a>          return ( (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> != '0') and empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>));
<a name="l343"><span class="linenum"> 343</span></a>      }
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      <span class="comment">/**</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     * Check if the field is required on the edit profile page</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     * @return bool</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     */</span>
<a name="l350"><span class="linenum"> 350</span></a>      public function <a class="function" onClick="logFunction('is_required')" href="../../_functions/is_required.html" onMouseOver="funcPopup(event,'is_required')">is_required</a>() {
<a name="l351"><span class="linenum"> 351</span></a>          return (boolean)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;required;
<a name="l352"><span class="linenum"> 352</span></a>      }
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>      <span class="comment">/**</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     * Check if the field is locked on the edit profile page</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     * @return bool</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     */</span>
<a name="l359"><span class="linenum"> 359</span></a>      public function <a class="function" onClick="logFunction('is_locked')" href="../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>() {
<a name="l360"><span class="linenum"> 360</span></a>          return (boolean)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;locked;
<a name="l361"><span class="linenum"> 361</span></a>      }
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>      <span class="comment">/**</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     * Check if the field data should be unique</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * @return bool</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     */</span>
<a name="l368"><span class="linenum"> 368</span></a>      public function <a class="function" onClick="logFunction('is_unique')" href="../../_functions/is_unique.html" onMouseOver="funcPopup(event,'is_unique')">is_unique</a>() {
<a name="l369"><span class="linenum"> 369</span></a>          return (boolean)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;forceunique;
<a name="l370"><span class="linenum"> 370</span></a>      }
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>      <span class="comment">/**</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     * Check if the field should appear on the signup page</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * @internal This method should not generally be overwritten by child classes.</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     * @return bool</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     */</span>
<a name="l377"><span class="linenum"> 377</span></a>      public function <a class="function" onClick="logFunction('is_signup_field')" href="../../_functions/is_signup_field.html" onMouseOver="funcPopup(event,'is_signup_field')">is_signup_field</a>() {
<a name="l378"><span class="linenum"> 378</span></a>          return (boolean)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;signup;
<a name="l379"><span class="linenum"> 379</span></a>      }
<a name="l380"><span class="linenum"> 380</span></a>  }
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">/**</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment"> * Loads user profile field data into the user object.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment"> * @param stdClass $user</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment"> */</span>
<a name="l386"><span class="linenum"> 386</span></a>  function <a class="function" onClick="logFunction('profile_load_data')" href="../../_functions/profile_load_data.html" onMouseOver="funcPopup(event,'profile_load_data')">profile_load_data</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l387"><span class="linenum"> 387</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field')) {
<a name="l390"><span class="linenum"> 390</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l391"><span class="linenum"> 391</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l392"><span class="linenum"> 392</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l393"><span class="linenum"> 393</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l394"><span class="linenum"> 394</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('edit_load_user_data')" href="../../_functions/edit_load_user_data.html" onMouseOver="funcPopup(event,'edit_load_user_data')">edit_load_user_data</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l395"><span class="linenum"> 395</span></a>          }
<a name="l396"><span class="linenum"> 396</span></a>      }
<a name="l397"><span class="linenum"> 397</span></a>  }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">/**</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment"> * Print out the customisable categories and fields for a users profile</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment"> *</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment"> * @param moodleform $mform instance of the moodleform class</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment"> * @param int $userid id of user whose profile is being edited.</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment"> */</span>
<a name="l405"><span class="linenum"> 405</span></a>  function <a class="function" onClick="logFunction('profile_definition')" href="../../_functions/profile_definition.html" onMouseOver="funcPopup(event,'profile_definition')">profile_definition</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l406"><span class="linenum"> 406</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">    // If user is &quot;admin&quot; fields are displayed regardless.</span>
<a name="l409"><span class="linenum"> 409</span></a>      <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:update', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>      if (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_category', null, 'sortorder ASC')) {
<a name="l412"><span class="linenum"> 412</span></a>          foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>) {
<a name="l413"><span class="linenum"> 413</span></a>              if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field', array('categoryid' =&gt; <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'sortorder ASC')) {
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">                // Check first if *any* fields will be displayed.</span>
<a name="l416"><span class="linenum"> 416</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../_variables/display.html">$display</a> = false;
<a name="l417"><span class="linenum"> 417</span></a>                  foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l418"><span class="linenum"> 418</span></a>                      if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('visible')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a> != <a class="constant" onClick="logConstant('PROFILE_VISIBLE_NONE')" href="../../_constants/PROFILE_VISIBLE_NONE.html" onMouseOver="constPopup(event,'PROFILE_VISIBLE_NONE')">PROFILE_VISIBLE_NONE</a>) {
<a name="l419"><span class="linenum"> 419</span></a>                          <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../_variables/display.html">$display</a> = true;
<a name="l420"><span class="linenum"> 420</span></a>                      }
<a name="l421"><span class="linenum"> 421</span></a>                  }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">                // Display the header and the fields.</span>
<a name="l424"><span class="linenum"> 424</span></a>                  if (<a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../_variables/display.html">$display</a> or <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>) {
<a name="l425"><span class="linenum"> 425</span></a>                      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'category_'.<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>));
<a name="l426"><span class="linenum"> 426</span></a>                      foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l427"><span class="linenum"> 427</span></a>                          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l428"><span class="linenum"> 428</span></a>                          <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l429"><span class="linenum"> 429</span></a>                          <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l430"><span class="linenum"> 430</span></a>                          <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('edit_field')" href="../../_functions/edit_field.html" onMouseOver="funcPopup(event,'edit_field')">edit_field</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l431"><span class="linenum"> 431</span></a>                      }
<a name="l432"><span class="linenum"> 432</span></a>                  }
<a name="l433"><span class="linenum"> 433</span></a>              }
<a name="l434"><span class="linenum"> 434</span></a>          }
<a name="l435"><span class="linenum"> 435</span></a>      }
<a name="l436"><span class="linenum"> 436</span></a>  }
<a name="l437"><span class="linenum"> 437</span></a>  
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">/**</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment"> * Adds profile fields to user edit forms.</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"> * @param moodleform $mform</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> */</span>
<a name="l443"><span class="linenum"> 443</span></a>  function <a class="function" onClick="logFunction('profile_definition_after_data')" href="../../_functions/profile_definition_after_data.html" onMouseOver="funcPopup(event,'profile_definition_after_data')">profile_definition_after_data</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l444"><span class="linenum"> 444</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>      <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &lt; 0) ? 0 : (int)<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field')) {
<a name="l449"><span class="linenum"> 449</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l450"><span class="linenum"> 450</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l451"><span class="linenum"> 451</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l452"><span class="linenum"> 452</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l453"><span class="linenum"> 453</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('edit_after_data')" href="../../_functions/edit_after_data.html" onMouseOver="funcPopup(event,'edit_after_data')">edit_after_data</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l454"><span class="linenum"> 454</span></a>          }
<a name="l455"><span class="linenum"> 455</span></a>      }
<a name="l456"><span class="linenum"> 456</span></a>  }
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">/**</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment"> * Validates profile data.</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment"> * @param stdClass $usernew</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment"> * @param array $files</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment"> * @return array</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment"> */</span>
<a name="l464"><span class="linenum"> 464</span></a>  function <a class="function" onClick="logFunction('profile_validation')" href="../../_functions/profile_validation.html" onMouseOver="funcPopup(event,'profile_validation')">profile_validation</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>, <a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>) {
<a name="l465"><span class="linenum"> 465</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>      <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('err')" href="../../_variables/err.html">$err</a> = array();
<a name="l468"><span class="linenum"> 468</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field')) {
<a name="l469"><span class="linenum"> 469</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l470"><span class="linenum"> 470</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l471"><span class="linenum"> 471</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l472"><span class="linenum"> 472</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('id')" class="var it39654" onMouseOver="hilite(39654)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l473"><span class="linenum"> 473</span></a>              <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('err')" href="../../_variables/err.html">$err</a> += <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('edit_validate_field')" href="../../_functions/edit_validate_field.html" onMouseOver="funcPopup(event,'edit_validate_field')">edit_validate_field</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>, <a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>);
<a name="l474"><span class="linenum"> 474</span></a>          }
<a name="l475"><span class="linenum"> 475</span></a>      }
<a name="l476"><span class="linenum"> 476</span></a>      return <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('err')" href="../../_variables/err.html">$err</a>;
<a name="l477"><span class="linenum"> 477</span></a>  }
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">/**</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment"> * Saves profile data for a user.</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"> * @param stdClass $usernew</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> */</span>
<a name="l483"><span class="linenum"> 483</span></a>  function <a class="function" onClick="logFunction('profile_save_data')" href="../../_functions/profile_save_data.html" onMouseOver="funcPopup(event,'profile_save_data')">profile_save_data</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>) {
<a name="l484"><span class="linenum"> 484</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field')) {
<a name="l487"><span class="linenum"> 487</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l488"><span class="linenum"> 488</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l489"><span class="linenum"> 489</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l490"><span class="linenum"> 490</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('id')" class="var it39654" onMouseOver="hilite(39654)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l491"><span class="linenum"> 491</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('edit_save_data')" href="../../_functions/edit_save_data.html" onMouseOver="funcPopup(event,'edit_save_data')">edit_save_data</a>(<a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>);
<a name="l492"><span class="linenum"> 492</span></a>          }
<a name="l493"><span class="linenum"> 493</span></a>      }
<a name="l494"><span class="linenum"> 494</span></a>  }
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">/**</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment"> * Display profile fields.</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment"> */</span>
<a name="l500"><span class="linenum"> 500</span></a>  function <a class="function" onClick="logFunction('profile_display_fields')" href="../../_functions/profile_display_fields.html" onMouseOver="funcPopup(event,'profile_display_fields')">profile_display_fields</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l501"><span class="linenum"> 501</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>      if (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_category', null, 'sortorder ASC')) {
<a name="l504"><span class="linenum"> 504</span></a>          foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>) {
<a name="l505"><span class="linenum"> 505</span></a>              if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field', array('categoryid' =&gt; <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'sortorder ASC')) {
<a name="l506"><span class="linenum"> 506</span></a>                  foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l507"><span class="linenum"> 507</span></a>                      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l508"><span class="linenum"> 508</span></a>                      <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l509"><span class="linenum"> 509</span></a>                      <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l510"><span class="linenum"> 510</span></a>                      if (<a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() and !<a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('is_empty')" href="../../_functions/is_empty.html" onMouseOver="funcPopup(event,'is_empty')">is_empty</a>()) {
<a name="l511"><span class="linenum"> 511</span></a>                          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('dt', <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a onClick="logVariable('field')" class="var it39672" onMouseOver="hilite(39672)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name));
<a name="l512"><span class="linenum"> 512</span></a>                          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('dd', <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('display_data')" href="../../_functions/display_data.html" onMouseOver="funcPopup(event,'display_data')">display_data</a>());
<a name="l513"><span class="linenum"> 513</span></a>                      }
<a name="l514"><span class="linenum"> 514</span></a>                  }
<a name="l515"><span class="linenum"> 515</span></a>              }
<a name="l516"><span class="linenum"> 516</span></a>          }
<a name="l517"><span class="linenum"> 517</span></a>      }
<a name="l518"><span class="linenum"> 518</span></a>  }
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">/**</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment"> * Adds code snippet to a moodle form object for custom profile fields that</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment"> * should appear on the signup page</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment"> * @param moodleform $mform moodle form object</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment"> */</span>
<a name="l525"><span class="linenum"> 525</span></a>  function <a class="function" onClick="logFunction('profile_signup_fields')" href="../../_functions/profile_signup_fields.html" onMouseOver="funcPopup(event,'profile_signup_fields')">profile_signup_fields</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l526"><span class="linenum"> 526</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l527"><span class="linenum"> 527</span></a>  
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">    // Only retrieve required custom fields (with category information)</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">    // results are sort by categories, then by fields.</span>
<a name="l530"><span class="linenum"> 530</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT uf.id as fieldid, ic.id as categoryid, ic.name as categoryname, uf.datatype
<a name="l531"><span class="linenum"> 531</span></a>                  FROM {user_info_field} uf
<a name="l532"><span class="linenum"> 532</span></a>                  JOIN {user_info_category} ic
<a name="l533"><span class="linenum"> 533</span></a>                  ON uf.categoryid = ic.id AND uf.signup = 1 AND uf.visible&lt;&gt;0
<a name="l534"><span class="linenum"> 534</span></a>                  ORDER BY ic.sortorder ASC, uf.sortorder ASC&quot;;
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>      if ( <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>)) {
<a name="l537"><span class="linenum"> 537</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">            // Check if we change the categories.</span>
<a name="l539"><span class="linenum"> 539</span></a>              if (!isset(<a class="var it12638" onMouseOver="hilite(12638)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../../_variables/currentcat.html">$currentcat</a>) || <a class="var it12638" onMouseOver="hilite(12638)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../../_variables/currentcat.html">$currentcat</a> != <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('categoryid')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a>) {
<a name="l540"><span class="linenum"> 540</span></a>                   <a class="var it12638" onMouseOver="hilite(12638)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../../_variables/currentcat.html">$currentcat</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('categoryid')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a>;
<a name="l541"><span class="linenum"> 541</span></a>                   <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'category_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('categoryid')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a>, <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('categoryname')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/categoryname.html">categoryname</a>));
<a name="l542"><span class="linenum"> 542</span></a>              }
<a name="l543"><span class="linenum"> 543</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l544"><span class="linenum"> 544</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l545"><span class="linenum"> 545</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>);
<a name="l546"><span class="linenum"> 546</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('edit_field')" href="../../_functions/edit_field.html" onMouseOver="funcPopup(event,'edit_field')">edit_field</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l547"><span class="linenum"> 547</span></a>          }
<a name="l548"><span class="linenum"> 548</span></a>      }
<a name="l549"><span class="linenum"> 549</span></a>  }
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">/**</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment"> * Returns an object with the custom profile fields set for the given user</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment"> * @param integer $userid</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment"> * @return stdClass</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment"> */</span>
<a name="l556"><span class="linenum"> 556</span></a>  function <a class="function" onClick="logFunction('profile_user_record')" href="../../_functions/profile_user_record.html" onMouseOver="funcPopup(event,'profile_user_record')">profile_user_record</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l557"><span class="linenum"> 557</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>      <a class="var it23511" onMouseOver="hilite(23511)" onMouseOut="lolite()" onClick="logVariable('usercustomfields')" href="../../_variables/usercustomfields.html">$usercustomfields</a> = new stdClass();
<a name="l560"><span class="linenum"> 560</span></a>  
<a name="l561"><span class="linenum"> 561</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field')) {
<a name="l562"><span class="linenum"> 562</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l563"><span class="linenum"> 563</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/user/profile/field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>.'/field.class.php');
<a name="l564"><span class="linenum"> 564</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l566"><span class="linenum"> 566</span></a>              if (<a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('is_user_object_data')" href="../../_functions/is_user_object_data.html" onMouseOver="funcPopup(event,'is_user_object_data')">is_user_object_data</a>()) {
<a name="l567"><span class="linenum"> 567</span></a>                  <a class="var it23511" onMouseOver="hilite(23511)" onMouseOut="lolite()" onClick="logVariable('usercustomfields')" href="../../_variables/usercustomfields.html">$usercustomfields</a>-&gt;{<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('shortname')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>} = <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a onClick="logVariable('data')" class="var it39672" onMouseOver="hilite(39672)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>;
<a name="l568"><span class="linenum"> 568</span></a>              }
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      return <a class="var it23511" onMouseOver="hilite(23511)" onMouseOut="lolite()" onClick="logVariable('usercustomfields')" href="../../_variables/usercustomfields.html">$usercustomfields</a>;
<a name="l573"><span class="linenum"> 573</span></a>  }
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">/**</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment"> * Obtains a list of all available custom profile fields, indexed by id.</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment"> *</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment"> * Some profile fields are not included in the user object data (see</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment"> * profile_user_record function above). Optionally, you can obtain only those</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment"> * fields that are included in the user object.</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment"> *</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment"> * To be clear, this function returns the available fields, and does not</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment"> * return the field values for a particular user.</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment"> *</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment"> * @param bool $onlyinuserobject True if you only want the ones in $USER</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment"> * @return array Array of field objects from database (indexed by id)</span>
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment"> * @since Moodle 2.7.1</span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment"> */</span>
<a name="l589"><span class="linenum"> 589</span></a>  function <a class="function" onClick="logFunction('profile_get_custom_fields')" href="../../_functions/profile_get_custom_fields.html" onMouseOver="funcPopup(event,'profile_get_custom_fields')">profile_get_custom_fields</a>(<a class="var it23512" onMouseOver="hilite(23512)" onMouseOut="lolite()" onClick="logVariable('onlyinuserobject')" href="../../_variables/onlyinuserobject.html">$onlyinuserobject</a> = false) {
<a name="l590"><span class="linenum"> 590</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">    // Get all the fields.</span>
<a name="l593"><span class="linenum"> 593</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_info_field', null, 'id ASC');
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">    // If only doing the user object ones, unset the rest.</span>
<a name="l596"><span class="linenum"> 596</span></a>      if (<a class="var it23512" onMouseOver="hilite(23512)" onMouseOut="lolite()" onClick="logVariable('onlyinuserobject')" href="../../_variables/onlyinuserobject.html">$onlyinuserobject</a>) {
<a name="l597"><span class="linenum"> 597</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l598"><span class="linenum"> 598</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '/user/profile/field/' .
<a name="l599"><span class="linenum"> 599</span></a>                      <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a> . '/field.class.php');
<a name="l600"><span class="linenum"> 600</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'profile_field_' . <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('datatype')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/datatype.html">datatype</a>;
<a name="l601"><span class="linenum"> 601</span></a>              <a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>();
<a name="l602"><span class="linenum"> 602</span></a>              if (!<a class="var it10724" onMouseOver="hilite(10724)" onMouseOut="lolite()" onClick="logVariable('formfield')" href="../../_variables/formfield.html">$formfield</a>-&gt;<a class="function" onClick="logFunction('is_user_object_data')" href="../../_functions/is_user_object_data.html" onMouseOver="funcPopup(event,'is_user_object_data')">is_user_object_data</a>()) {
<a name="l603"><span class="linenum"> 603</span></a>                  unset(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>[<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>]);
<a name="l604"><span class="linenum"> 604</span></a>              }
<a name="l605"><span class="linenum"> 605</span></a>          }
<a name="l606"><span class="linenum"> 606</span></a>      }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>      return <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>;
<a name="l609"><span class="linenum"> 609</span></a>  }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">/**</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment"> * Load custom profile fields into user object</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment"> *</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment"> * Please note originally in 1.9 we were using the custom field names directly,</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment"> * but it was causing unexpected collisions when adding new fields to user table,</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment"> * so instead we now use 'profile_' prefix.</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment"> *</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment"> * @param stdClass $user user object</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment"> */</span>
<a name="l620"><span class="linenum"> 620</span></a>  function <a class="function" onClick="logFunction('profile_load_custom_fields')" href="../../_functions/profile_load_custom_fields.html" onMouseOver="funcPopup(event,'profile_load_custom_fields')">profile_load_custom_fields</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l621"><span class="linenum"> 621</span></a>      <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('profile')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/profile.html">profile</a> = (array)<a class="function" onClick="logFunction('profile_user_record')" href="../../_functions/profile_user_record.html" onMouseOver="funcPopup(event,'profile_user_record')">profile_user_record</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l622"><span class="linenum"> 622</span></a>  }
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">/**</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment"> * Trigger a user profile viewed event.</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment"> *</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment"> * @param stdClass  $user user  object</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment"> * @param stdClass  $context  context object (course or user)</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment"> * @param stdClass  $course course  object</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment"> * @since Moodle 2.9</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment"> */</span>
<a name="l632"><span class="linenum"> 632</span></a>  function <a class="function" onClick="logFunction('profile_view')" href="../../_functions/profile_view.html" onMouseOver="funcPopup(event,'profile_view')">profile_view</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = null) {
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>      <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a> = array(
<a name="l635"><span class="linenum"> 635</span></a>          'objectid' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l636"><span class="linenum"> 636</span></a>          'relateduserid' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l637"><span class="linenum"> 637</span></a>          'context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>
<a name="l638"><span class="linenum"> 638</span></a>      );
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>      if (!empty(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>)) {
<a name="l641"><span class="linenum"> 641</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>['courseid'] = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l642"><span class="linenum"> 642</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>['other'] = array(
<a name="l643"><span class="linenum"> 643</span></a>              'courseid' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l644"><span class="linenum"> 644</span></a>              'courseshortname' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>,
<a name="l645"><span class="linenum"> 645</span></a>              'coursefullname' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;fullname
<a name="l646"><span class="linenum"> 646</span></a>          );
<a name="l647"><span class="linenum"> 647</span></a>      }
<a name="l648"><span class="linenum"> 648</span></a>  
<a name="l649"><span class="linenum"> 649</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('user_profile_viewed')" href="../../_classes/user_profile_viewed.html" onMouseOver="classPopup(event,'user_profile_viewed')">user_profile_viewed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>);
<a name="l650"><span class="linenum"> 650</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('user', <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l651"><span class="linenum"> 651</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l652"><span class="linenum"> 652</span></a>  }
<a name="l653"><span class="linenum"> 653</span></a>  
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'setdefault': ['setdefault', 'Set the field default ', [['lib/xmldb','xmldb_field.php',246],['lib/google/src/Google/Service','YouTube.php',7343],['lib/google/src/Google/Service','YouTube.php',8783],['lib','formslib.php',1857]], 684],
'is_locked': ['is_locked', 'Returns the locked state of this grade_item (if the grade_item is locked OR no specific $userid is given) or the locked state of a specific grade within this item if a specific $userid is given and the grade_item is unlocked. ', [['lib/grade','grade_item.php',476],['backup/util/settings','setting_dependency.class.php',187],['backup/util/settings','setting_dependency.class.php',340],['backup/util/settings','setting_dependency.class.php',534],['backup/util/settings','setting_dependency.class.php',598],['user/profile','lib.php',354],['lib/grade','grade_grade.php',265],['lib/grade','grade_category.php',2312],['lib','badgeslib.php',317]], 57],
'load_data': ['load_data', 'Loads the config data from database to put on the form during initial form display ', [['message/output/popup','message_output_popup.php',87],['mod/chat','locallib.php',49],['mod/assign','locallib.php',7421],['user/profile','lib.php',281],['mod/forum','locallib.php',64],['grade/report/user/tests','externallib_test.php',43],['mod/data','locallib.php',75],['message/output/airnotifier','message_output_airnotifier.php',188],['mod/glossary','locallib.php',51],['mod/glossary','locallib.php',233],['message/output/jabber','message_output_jabber.php',125],['message/output/email','message_output_email.php',180]], 9],
'set_fieldid': ['set_fieldid', 'Accessor method: set the fieldid for this instance ', [['user/profile','lib.php',272]], 1],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'is_signup_field': ['is_signup_field', 'Check if the field should appear on the signup page ', [['user/profile','lib.php',372]], 0],
'profile_definition_after_data': ['profile_definition_after_data', 'Adds profile fields to user edit forms. ', [['user/profile','lib.php',438]], 3],
'hardfreeze': ['hardfreeze', 'Displays elements without HTML input tags. This method is different to freeze() in that it makes sure no hidden elements are included in the form. Note: If you want to make sure the submitted value is ignored, please use setDefaults(). ', [['lib','formslib.php',2425]], 68],
'profile_validation': ['profile_validation', 'Validates profile data. ', [['user/profile','lib.php',458]], 3],
'edit_field_set_required': ['edit_field_set_required', 'Sets the required flag for the field in the form object ', [['user/profile','lib.php',206]], 1],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'edit_field_set_default': ['edit_field_set_default', 'Sets the default data for the field in the form object ', [['user/profile','lib.php',196],['user/profile/field/menu','field.class.php',84]], 1],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'edit_load_user_data': ['edit_load_user_data', 'Loads a user object with data for this field ready for the edit profile form ', [['user/profile','lib.php',242],['user/profile/field/textarea','field.class.php',65],['user/profile/field/menu','field.class.php',113]], 1],
'display_data': ['display_data', 'Overwrite the base class to display the data for this field ', [['user/profile/field/text','field.class.php',33],['user/profile','lib.php',81],['user/profile/field/checkbox','field.class.php',72],['user/profile/field/textarea','field.class.php',76],['user/profile/field/datetime','field.class.php',95]], 3],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'edit_after_data': ['edit_after_data', 'Tweaks the edit form ', [['user/profile','lib.php',108]], 1],
'is_required': ['is_required', 'Check if the field is required on the edit profile page ', [['user/profile','lib.php',345]], 3],
'setconstant': ['setconstant', 'Set constant value not overridden by _POST or _GET note: this does not work for complex names with [] :-( ', [['lib','formslib.php',1901]], 51],
'profile_get_custom_fields': ['profile_get_custom_fields', 'Obtains a list of all available custom profile fields, indexed by id. ', [['user/profile','lib.php',575]], 5],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'profile_definition': ['profile_definition', 'Print out the customisable categories and fields for a users profile ', [['user/profile','lib.php',399]], 3],
'is_unique': ['is_unique', 'Check if the field data should be unique ', [['user/profile','lib.php',363]], 1],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 552],
'is_empty': ['is_empty', 'Returns true or false, depending on whether this block has any content to display and whether the user has permission to view the block ', [['blocks','moodleblock.class.php',181],['blocks','moodleblock.class.php',706],['mod/assign','assignmentplugin.php',540],['mod/assign/submission/file','locallib.php',474],['mod/assign/submission/onlinetext','locallib.php',551],['mod/assign/submission/comments','locallib.php',78],['user/profile','lib.php',336],['mod/assign/feedback/editpdf','locallib.php',247],['mod/wiki/diff','difflib.php',354],['mod/assign/feedback/file','locallib.php',270],['mod/assign/feedback/comments','locallib.php',471],['mod/assign/feedback/offline','locallib.php',62],['availability/classes','tree.php',624]], 17],
'profile_save_data': ['profile_save_data', 'Saves profile data for a user. ', [['user/profile','lib.php',479]], 10],
'profile_view': ['profile_view', 'Trigger a user profile viewed event. ', [['user/profile','lib.php',624]], 6],
'edit_field': ['edit_field', 'Print out the form field in the edit profile page ', [['user/profile','lib.php',91]], 2],
'edit_save_data_preprocess': ['edit_save_data_preprocess', 'Hook for child classess to process the data before it gets saved in database ', [['user/profile','lib.php',232],['user/profile/field/textarea','field.class.php',51],['user/profile/field/datetime','field.class.php',70],['user/profile/field/menu','field.class.php',99]], 2],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1063],['lib/zend/Zend/Service','Technorati.php',228]], 1254],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',757]], 262],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'profile_signup_fields': ['profile_signup_fields', 'Adds code snippet to a moodle form object for custom profile fields that should appear on the signup page ', [['user/profile','lib.php',520]], 1],
'edit_field_add': ['edit_field_add', 'Add fields for editing a text profile field. ', [['user/profile/field/text','field.class.php',57],['user/profile','lib.php',72],['user/profile/field/checkbox','field.class.php',56],['user/profile/field/textarea','field.class.php',33],['user/profile/field/datetime','field.class.php',33],['user/profile/field/menu','field.class.php',75]], 1],
'profile_load_custom_fields': ['profile_load_custom_fields', 'Load custom profile fields into user object ', [['user/profile','lib.php',611]], 5],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1922]], 237],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'elementexists': ['elementexists', 'Returns true if element is in the form ', [['lib/pear/HTML','QuickForm.php',361]], 95],
'addrule': ['addrule', 'Adds a validation rule for the given field ', [['lib','formslib.php',1984],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',322],['lib/pear/HTML','QuickForm.php',1006]], 283],
'profile_user_record': ['profile_user_record', 'Returns an object with the custom profile fields set for the given user ', [['user/profile','lib.php',551]], 3],
'profile_load_data': ['profile_load_data', 'Loads user profile field data into the user object. ', [['user/profile','lib.php',382]], 6],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'sql_compare_text': ['sql_compare_text', 'Returns the SQL text to be used to compare one TEXT (clob) column with one varchar column, because some RDBMS doesn\'t support such direct comparisons. ', [['lib/dml','moodle_database.php',1991]], 83],
'profile_field_base': ['profile_field_base', 'Constructor method. ', [['user/profile','lib.php',59]], 2],
'edit_validate_field': ['edit_validate_field', 'Validate the form field from profile page ', [['user/profile','lib.php',151]], 2],
'set_userid': ['set_userid', 'Accessor method: set the userid for this instance ', [['user/profile','lib.php',263]], 1],
'is_user_object_data': ['is_user_object_data', 'Check if the field data should be loaded into the user object By default it is, but for field types where the data may be potentially large, the child class should override this and return false ', [['user/profile','lib.php',253],['user/profile/field/textarea','field.class.php',43]], 2],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'edit_field_set_locked': ['edit_field_set_locked', 'HardFreeze the field if locked. ', [['user/profile','lib.php',218],['user/profile/field/menu','field.class.php',125]], 1],
'is_visible': ['is_visible', 'Is this plugin enaled? ', [['mod/assign','assignmentplugin.php',287],['repository/coursefiles','lib.php',167],['user/profile','lib.php',312],['repository','lib.php',1829],['backup/cc/cc_lib','cc_converters.php',113]], 56],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'edit_save_data': ['edit_save_data', 'Saves the data coming from form ', [['user/profile','lib.php',122]], 1],
'profile_display_fields': ['profile_display_fields', 'Display profile fields. ', [['user/profile','lib.php',496]], 0],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'is_array': ['is_array', '', [], 1820],
'define': ['define', '', [], 2170]};
CLASS_DATA={
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'user_profile_viewed': ['user_profile_viewed', 'The user profile viewed event class. ', [['lib/classes/event','user_profile_viewed.php',29]], 3],
'profile_field_base': ['profile_field_base', 'Base class for the customisable profile fields. ', [['user/profile','lib.php',29]], 5],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6347]], 288],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832]};
CONST_DATA={
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 378],
'PROFILE_VISIBLE_ALL': ['PROFILE_VISIBLE_ALL', '', [['user/profile','lib.php',25]], 5],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 999],
'PROFILE_VISIBLE_NONE': ['PROFILE_VISIBLE_NONE', '', [['user/profile','lib.php',27]], 5],
'PROFILE_VISIBLE_PRIVATE': ['PROFILE_VISIBLE_PRIVATE', '', [['user/profile','lib.php',26]], 3]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
