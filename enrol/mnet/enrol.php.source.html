<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /enrol/mnet/enrol.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='enrol/mnet';
filename='enrol.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/enrol/mnet/</a> -> <a href="enrol.php.html">enrol.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="enrol.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="enrol.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Implements the XML-RPC methods this plugin publishes to MNet peers</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * This file must be named enrol.php because current MNet framework has the</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * filename hardcoded in XML-RPC path and we want to be compatible with</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * Moodle 1.x MNet clients. There is a proposal in MDL-21993 to allow</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * map XMP-RPC calls to whatever file, function, class or methods. Once this</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * is fixed, this file will be probably renamed to mnetlib.php (which could</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * be a common name of a plugin library containing functions/methods callable</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * via MNet framework.</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @package    enrol_mnet</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @copyright  2010 David Mudrak &lt;david@moodle.com&gt;</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> */</span>
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * MNet server-side methods that are part of mnetservice_enrol</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * The weird name of the class tries to follow a pattern</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * {plugintype}_{pluginnname}_mnetservice_{servicename}</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> *</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * Class methods are compatible with API 1 of the service used by Moodle 1.x</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * and 2.0 peers. The API version might become a part of class name but it is</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * not neccessary due to how xml-rcp methods are/will be mapped to php methods.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> */</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('enrol_mnet_mnetservice_enrol')" href="../../_classes/enrol_mnet_mnetservice_enrol.html" onMouseOver="classPopup(event,'enrol_mnet_mnetservice_enrol')">enrol_mnet_mnetservice_enrol</a> {
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * Returns list of courses that we offer to the caller for remote enrolment of their users</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     *</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * Since Moodle 2.0, courses are made available for MNet peers by creating an instance</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * of enrol_mnet plugin for the course. Hidden courses are not returned. If there are two</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * instances - one specific for the host and one for 'All hosts', the setting of the specific</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * one is used. The id of the peer is kept in customint1, no other custom fields are used.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     *</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * @uses mnet_remote_client Callable via XML-RPC only</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * @return array</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     */</span>
<a name="l58"><span class="linenum">  58</span></a>      public function <a class="function" onClick="logFunction('available_courses')" href="../../_functions/available_courses.html" onMouseOver="funcPopup(event,'available_courses')">available_courses</a>() {
<a name="l59"><span class="linenum">  59</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l60"><span class="linenum">  60</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/filelib.php');
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>          if (!<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a> = <a class="function" onClick="logFunction('get_mnet_remote_client')" href="../../_functions/get_mnet_remote_client.html" onMouseOver="funcPopup(event,'get_mnet_remote_client')">get_mnet_remote_client</a>()) {
<a name="l63"><span class="linenum">  63</span></a>              die('Callable via XML-RPC only');
<a name="l64"><span class="linenum">  64</span></a>          }
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">        // we call our id as 'remoteid' because it will be sent to the peer</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">        // the column aliases are required by MNet protocol API for clients 1.x and 2.0</span>
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT c.id AS remoteid, c.fullname, c.shortname, c.idnumber, c.summary, c.summaryformat,
<a name="l69"><span class="linenum">  69</span></a>                         c.sortorder, c.startdate, cat.id AS cat_id, cat.name AS cat_name,
<a name="l70"><span class="linenum">  70</span></a>                         cat.description AS cat_description, cat.descriptionformat AS cat_descriptionformat,
<a name="l71"><span class="linenum">  71</span></a>                         e.cost, e.currency, e.roleid AS defaultroleid, r.name AS defaultrolename,
<a name="l72"><span class="linenum">  72</span></a>                         e.customint1
<a name="l73"><span class="linenum">  73</span></a>                    FROM {enrol} e
<a name="l74"><span class="linenum">  74</span></a>              INNER JOIN {course} c ON c.id = e.courseid
<a name="l75"><span class="linenum">  75</span></a>              INNER JOIN {course_categories} cat ON cat.id = c.category
<a name="l76"><span class="linenum">  76</span></a>              INNER JOIN {role} r ON r.id = e.roleid
<a name="l77"><span class="linenum">  77</span></a>                   WHERE e.enrol = 'mnet'
<a name="l78"><span class="linenum">  78</span></a>                         AND (e.customint1 = 0 OR e.customint1 = ?)
<a name="l79"><span class="linenum">  79</span></a>                         AND c.visible = 1
<a name="l80"><span class="linenum">  80</span></a>                ORDER BY cat.sortorder, c.sortorder, c.shortname&quot;;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = array();
<a name="l85"><span class="linenum">  85</span></a>          foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">            // use the record if it does not exist yet or is host-specific</span>
<a name="l87"><span class="linenum">  87</span></a>              if (empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('remoteid')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/remoteid.html">remoteid</a>]) <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('customint1')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/customint1.html">customint1</a> &gt; 0)) {
<a name="l88"><span class="linenum">  88</span></a>                  unset(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('customint1')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/customint1.html">customint1</a>); <span class="comment">// the client does not need to know this</span>
<a name="l89"><span class="linenum">  89</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('remoteid')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/remoteid.html">remoteid</a>);
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">                // Rewrite file URLs so that they are correct</span>
<a name="l91"><span class="linenum">  91</span></a>                  <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('summary')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/summary.html">summary</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('summary')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/summary.html">summary</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'course', 'summary', false);
<a name="l92"><span class="linenum">  92</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('remoteid')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/remoteid.html">remoteid</a>] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l93"><span class="linenum">  93</span></a>              }
<a name="l94"><span class="linenum">  94</span></a>          }
<a name="l95"><span class="linenum">  95</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>          return <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>); <span class="comment">// can not use keys for backward compatibility</span>
<a name="l98"><span class="linenum">  98</span></a>      }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>      <span class="comment">/**</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     * This method has never been implemented in Moodle MNet API</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     *</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * @uses mnet_remote_client Callable via XML-RPC only</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     * @return array empty array</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     */</span>
<a name="l106"><span class="linenum"> 106</span></a>      public function <a class="function" onClick="logFunction('user_enrolments')" href="../../_functions/user_enrolments.html" onMouseOver="funcPopup(event,'user_enrolments')">user_enrolments</a>() {
<a name="l107"><span class="linenum"> 107</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>          if (!<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a> = <a class="function" onClick="logFunction('get_mnet_remote_client')" href="../../_functions/get_mnet_remote_client.html" onMouseOver="funcPopup(event,'get_mnet_remote_client')">get_mnet_remote_client</a>()) {
<a name="l110"><span class="linenum"> 110</span></a>              die('Callable via XML-RPC only');
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>          return array();
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>      <span class="comment">/**</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * Enrol remote user to our course</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     *</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     * If we do not have local record for the remote user in our database,</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * it gets created here.</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     *</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @uses mnet_remote_client Callable via XML-RPC only</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @param array $userdata user details {@see mnet_fields_to_import()}</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @param int $courseid our local course id</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @return bool true if the enrolment has been successful, throws exception otherwise</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     */</span>
<a name="l126"><span class="linenum"> 126</span></a>      public function <a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(array <a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l127"><span class="linenum"> 127</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l128"><span class="linenum"> 128</span></a>          <span class="keyword">require_once</span> <a class="filename" href="../../grade/grading/form/rubric/lib.php.html" onMouseOver="reqPopup(event, 'lib.php', '../../grade/grading/form/rubric/lib.php')">(__DIR__.'/lib.php')</a>;
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>          if (!<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a> = <a class="function" onClick="logFunction('get_mnet_remote_client')" href="../../_functions/get_mnet_remote_client.html" onMouseOver="funcPopup(event,'get_mnet_remote_client')">get_mnet_remote_client</a>()) {
<a name="l131"><span class="linenum"> 131</span></a>              die('Callable via XML-RPC only');
<a name="l132"><span class="linenum"> 132</span></a>          }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>          if (empty(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>['username'])) {
<a name="l135"><span class="linenum"> 135</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5021, 'emptyusername', 'enrol_mnet');
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">        // do we know the remote user?</span>
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('username'=&gt;<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>['username'], 'mnethostid'=&gt;<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>          if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> === false) {
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">            // here we could check the setting if the enrol_mnet is allowed to auto-register</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">            // users {@link http://tracker.moodle.org/browse/MDL-21327}</span>
<a name="l144"><span class="linenum"> 144</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('mnet_strip_user')" href="../../_functions/mnet_strip_user.html" onMouseOver="funcPopup(event,'mnet_strip_user')">mnet_strip_user</a>((object)<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>, <a class="function" onClick="logFunction('mnet_fields_to_import')" href="../../_functions/mnet_fields_to_import.html" onMouseOver="funcPopup(event,'mnet_fields_to_import')">mnet_fields_to_import</a>(<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>));
<a name="l145"><span class="linenum"> 145</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('mnethostid')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/mnethostid.html">mnethostid</a> = <a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l146"><span class="linenum"> 146</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('auth')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a> = 'mnet';
<a name="l147"><span class="linenum"> 147</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('confirmed')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/confirmed.html">confirmed</a> = 1;
<a name="l148"><span class="linenum"> 148</span></a>              try {
<a name="l149"><span class="linenum"> 149</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('user', <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l150"><span class="linenum"> 150</span></a>              } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l151"><span class="linenum"> 151</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5011, 'couldnotcreateuser', 'enrol_mnet');
<a name="l152"><span class="linenum"> 152</span></a>              }
<a name="l153"><span class="linenum"> 153</span></a>          }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>          if (! <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l156"><span class="linenum"> 156</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5012, 'coursenotfound', 'enrol_mnet');
<a name="l157"><span class="linenum"> 157</span></a>          }
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('available_courses')" href="../../_functions/available_courses.html" onMouseOver="funcPopup(event,'available_courses')">available_courses</a>();
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it37410" onMouseOver="hilite(37410)" onMouseOut="lolite()" onClick="logVariable('isavailable')" href="../../_variables/isavailable.html">$isavailable</a> = false;
<a name="l161"><span class="linenum"> 161</span></a>          foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> as <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>) {
<a name="l162"><span class="linenum"> 162</span></a>              if (<a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>-&gt;<a onClick="logVariable('remoteid')" class="var it44570" onMouseOver="hilite(44570)" onMouseOut="lolite()" href="../../_variables/remoteid.html">remoteid</a> == <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l163"><span class="linenum"> 163</span></a>                  <a class="var it37410" onMouseOver="hilite(37410)" onMouseOut="lolite()" onClick="logVariable('isavailable')" href="../../_variables/isavailable.html">$isavailable</a> = true;
<a name="l164"><span class="linenum"> 164</span></a>                  break;
<a name="l165"><span class="linenum"> 165</span></a>              }
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>          if (!<a class="var it37410" onMouseOver="hilite(37410)" onMouseOut="lolite()" onClick="logVariable('isavailable')" href="../../_variables/isavailable.html">$isavailable</a>) {
<a name="l168"><span class="linenum"> 168</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5013, 'courseunavailable', 'enrol_mnet');
<a name="l169"><span class="linenum"> 169</span></a>          }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">        // try to load host specific enrol_mnet instance first</span>
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol'=&gt;'mnet', 'customint1'=&gt;<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> === false) {
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">            // if not found, try to load instance for all hosts</span>
<a name="l176"><span class="linenum"> 176</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol'=&gt;'mnet', 'customint1'=&gt;0), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l177"><span class="linenum"> 177</span></a>          }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> === false) {
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">            // this should not happen as the course was returned by {@see self::available_courses()}</span>
<a name="l181"><span class="linenum"> 181</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5017, 'noenrolinstance', 'enrol_mnet');
<a name="l182"><span class="linenum"> 182</span></a>          }
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>          if (!<a class="var it747" onMouseOver="hilite(747)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../_variables/enrol.html">$enrol</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('mnet')) {
<a name="l185"><span class="linenum"> 185</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5018, 'couldnotinstantiate', 'enrol_mnet');
<a name="l186"><span class="linenum"> 186</span></a>          }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>          try {
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it747" onMouseOver="hilite(747)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../_variables/enrol.html">$enrol</a>-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('roleid')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/roleid.html">roleid</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>          } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l192"><span class="linenum"> 192</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5019, 'couldnotenrol', 'enrol_mnet', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l193"><span class="linenum"> 193</span></a>          }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>          return true;
<a name="l196"><span class="linenum"> 196</span></a>      }
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>      <span class="comment">/**</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     * Unenrol remote user from our course</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     *</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     * Only users enrolled via enrol_mnet plugin can be unenrolled remotely. If the</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * remote user is enrolled into the local course via some other enrol plugin</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     * (enrol_manual for example), the remote host can't touch such enrolment. Please</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     * do not report this behaviour as bug, it is a feature ;-)</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     *</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     * @uses mnet_remote_client Callable via XML-RPC only</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     * @param string $username of the remote user</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     * @param int $courseid of our local course</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">     * @return bool true if the unenrolment has been successful, throws exception otherwise</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     */</span>
<a name="l211"><span class="linenum"> 211</span></a>      public function <a class="function" onClick="logFunction('unenrol_user')" href="../../_functions/unenrol_user.html" onMouseOver="funcPopup(event,'unenrol_user')">unenrol_user</a>(<a class="var it200" onMouseOver="hilite(200)" onMouseOut="lolite()" onClick="logVariable('username')" href="../../_variables/username.html">$username</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l212"><span class="linenum"> 212</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>          if (!<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a> = <a class="function" onClick="logFunction('get_mnet_remote_client')" href="../../_functions/get_mnet_remote_client.html" onMouseOver="funcPopup(event,'get_mnet_remote_client')">get_mnet_remote_client</a>()) {
<a name="l215"><span class="linenum"> 215</span></a>              die('Callable via XML-RPC only');
<a name="l216"><span class="linenum"> 216</span></a>          }
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('username'=&gt;<a class="var it200" onMouseOver="hilite(200)" onMouseOut="lolite()" onClick="logVariable('username')" href="../../_variables/username.html">$username</a>, 'mnethostid'=&gt;<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>          if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> === false) {
<a name="l221"><span class="linenum"> 221</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5014, 'usernotfound', 'enrol_mnet');
<a name="l222"><span class="linenum"> 222</span></a>          }
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>          if (! <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l225"><span class="linenum"> 225</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5012, 'coursenotfound', 'enrol_mnet');
<a name="l226"><span class="linenum"> 226</span></a>          }
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('available_courses')" href="../../_functions/available_courses.html" onMouseOver="funcPopup(event,'available_courses')">available_courses</a>();
<a name="l229"><span class="linenum"> 229</span></a>          <a class="var it37410" onMouseOver="hilite(37410)" onMouseOut="lolite()" onClick="logVariable('isavailable')" href="../../_variables/isavailable.html">$isavailable</a> = false;
<a name="l230"><span class="linenum"> 230</span></a>          foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> as <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>) {
<a name="l231"><span class="linenum"> 231</span></a>              if (<a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>-&gt;<a onClick="logVariable('remoteid')" class="var it44570" onMouseOver="hilite(44570)" onMouseOut="lolite()" href="../../_variables/remoteid.html">remoteid</a> == <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l232"><span class="linenum"> 232</span></a>                  <a class="var it37410" onMouseOver="hilite(37410)" onMouseOut="lolite()" onClick="logVariable('isavailable')" href="../../_variables/isavailable.html">$isavailable</a> = true;
<a name="l233"><span class="linenum"> 233</span></a>                  break;
<a name="l234"><span class="linenum"> 234</span></a>              }
<a name="l235"><span class="linenum"> 235</span></a>          }
<a name="l236"><span class="linenum"> 236</span></a>          if (!<a class="var it37410" onMouseOver="hilite(37410)" onMouseOut="lolite()" onClick="logVariable('isavailable')" href="../../_variables/isavailable.html">$isavailable</a>) {
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">            // if they can not enrol, they can not unenrol</span>
<a name="l238"><span class="linenum"> 238</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5013, 'courseunavailable', 'enrol_mnet');
<a name="l239"><span class="linenum"> 239</span></a>          }
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">        // try to load host specific enrol_mnet instance first</span>
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol'=&gt;'mnet', 'customint1'=&gt;<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> === false) {
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">            // if not found, try to load instance for all hosts</span>
<a name="l246"><span class="linenum"> 246</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol'=&gt;'mnet', 'customint1'=&gt;0), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it37411" onMouseOver="hilite(37411)" onMouseOut="lolite()" onClick="logVariable('instanceforall')" href="../../_variables/instanceforall.html">$instanceforall</a> = true;
<a name="l248"><span class="linenum"> 248</span></a>          }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> === false) {
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">            // this should not happen as the course was returned by {@see self::available_courses()}</span>
<a name="l252"><span class="linenum"> 252</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5017, 'noenrolinstance', 'enrol_mnet');
<a name="l253"><span class="linenum"> 253</span></a>          }
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>          if (!<a class="var it747" onMouseOver="hilite(747)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../_variables/enrol.html">$enrol</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('mnet')) {
<a name="l256"><span class="linenum"> 256</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5018, 'couldnotinstantiate', 'enrol_mnet');
<a name="l257"><span class="linenum"> 257</span></a>          }
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>          if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('user_enrolments', array('enrolid'=&gt;<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid'=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l260"><span class="linenum"> 260</span></a>              try {
<a name="l261"><span class="linenum"> 261</span></a>                  <a class="var it747" onMouseOver="hilite(747)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../_variables/enrol.html">$enrol</a>-&gt;<a class="function" onClick="logFunction('unenrol_user')" href="../../_functions/unenrol_user.html" onMouseOver="funcPopup(event,'unenrol_user')">unenrol_user</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>              } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l264"><span class="linenum"> 264</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5020, 'couldnotunenrol', 'enrol_mnet', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l265"><span class="linenum"> 265</span></a>              }
<a name="l266"><span class="linenum"> 266</span></a>          }
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>          if (empty(<a class="var it37411" onMouseOver="hilite(37411)" onMouseOut="lolite()" onClick="logVariable('instanceforall')" href="../../_variables/instanceforall.html">$instanceforall</a>)) {
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">            // if the user was enrolled via 'All hosts' instance and the specific one</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">            // was created after that, the first enrolment would be kept.</span>
<a name="l271"><span class="linenum"> 271</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol'=&gt;'mnet', 'customint1'=&gt;0), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>              if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>) {
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">                // repeat the same procedure for 'All hosts' instance, too. Note that as the host specific</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">                // instance exists, it will be used for the future enrolments</span>
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>                  if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('user_enrolments', array('enrolid'=&gt;<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid'=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l278"><span class="linenum"> 278</span></a>                      try {
<a name="l279"><span class="linenum"> 279</span></a>                          <a class="var it747" onMouseOver="hilite(747)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../_variables/enrol.html">$enrol</a>-&gt;<a class="function" onClick="logFunction('unenrol_user')" href="../../_functions/unenrol_user.html" onMouseOver="funcPopup(event,'unenrol_user')">unenrol_user</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>                      } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l282"><span class="linenum"> 282</span></a>                          throw <span class="keyword">new </span><a class="class" onClick="logClass('mnet_server_exception')" href="../../_classes/mnet_server_exception.html" onMouseOver="classPopup(event,'mnet_server_exception')">mnet_server_exception</a>(5020, 'couldnotunenrol', 'enrol_mnet', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l283"><span class="linenum"> 283</span></a>                      }
<a name="l284"><span class="linenum"> 284</span></a>                  }
<a name="l285"><span class="linenum"> 285</span></a>              }
<a name="l286"><span class="linenum"> 286</span></a>          }
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>          return true;
<a name="l289"><span class="linenum"> 289</span></a>      }
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>      <span class="comment">/**</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     * Returns a list of users from the client server who are enrolled in our course</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     *</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">     * Suitable instance of enrol_mnet must be created in the course. This method will not</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     * return any information about the enrolments in courses that are not available for</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     * remote enrolment, even if their users are enrolled into them via other plugin</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     * (note the difference from {@link self::user_enrolments()}).</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     *</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     * This method will return enrolment information for users from hosts regardless</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     * the enrolment plugin. It does not matter if the user was enrolled remotely by</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     * their admin or locally. Once the course is available for remote enrolments, we</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * will tell them everything about their users.</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     *</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     * In Moodle 1.x the returned array used to be indexed by username. The side effect</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * of MDL-19219 fix is that we do not need to use such index and therefore we can</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * return all enrolment records. MNet clients 1.x will only use the last record for</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     * the student, if she is enrolled via multiple plugins.</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     *</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * @uses mnet_remote_client Callable via XML-RPC only</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * @param int $courseid ID of our course</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * @param string|array $roles comma separated list of role shortnames (or array of them)</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     * @return array</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     */</span>
<a name="l314"><span class="linenum"> 314</span></a>      public function <a class="function" onClick="logFunction('course_enrolments')" href="../../_functions/course_enrolments.html" onMouseOver="funcPopup(event,'course_enrolments')">course_enrolments</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>=null) {
<a name="l315"><span class="linenum"> 315</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>          if (!<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a> = <a class="function" onClick="logFunction('get_mnet_remote_client')" href="../../_functions/get_mnet_remote_client.html" onMouseOver="funcPopup(event,'get_mnet_remote_client')">get_mnet_remote_client</a>()) {
<a name="l318"><span class="linenum"> 318</span></a>              die('Callable via XML-RPC only');
<a name="l319"><span class="linenum"> 319</span></a>          }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT u.username, r.shortname, r.name, e.enrol, ue.timemodified
<a name="l322"><span class="linenum"> 322</span></a>                    FROM {user_enrolments} ue
<a name="l323"><span class="linenum"> 323</span></a>                    JOIN {user} u ON ue.userid = u.id
<a name="l324"><span class="linenum"> 324</span></a>                    JOIN {enrol} e ON ue.enrolid = e.id
<a name="l325"><span class="linenum"> 325</span></a>                    JOIN {role} r ON e.roleid = r.id
<a name="l326"><span class="linenum"> 326</span></a>                   WHERE u.mnethostid = :mnethostid
<a name="l327"><span class="linenum"> 327</span></a>                         AND e.courseid = :courseid
<a name="l328"><span class="linenum"> 328</span></a>                         AND u.id &lt;&gt; :guestid
<a name="l329"><span class="linenum"> 329</span></a>                         AND u.confirmed = 1
<a name="l330"><span class="linenum"> 330</span></a>                         AND u.deleted = 0&quot;;
<a name="l331"><span class="linenum"> 331</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['mnethostid'] = <a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('id')" class="var it44569" onMouseOver="hilite(44569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l332"><span class="linenum"> 332</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseid'] = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>;
<a name="l333"><span class="linenum"> 333</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['guestid'] = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('siteguest')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/siteguest.html">siteguest</a>;
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>)) {
<a name="l336"><span class="linenum"> 336</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>)) {
<a name="l337"><span class="linenum"> 337</span></a>                  <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>);
<a name="l338"><span class="linenum"> 338</span></a>              }
<a name="l339"><span class="linenum"> 339</span></a>              <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>('trim', <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>);
<a name="l340"><span class="linenum"> 340</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it37412" onMouseOver="hilite(37412)" onMouseOut="lolite()" onClick="logVariable('rsql')" href="../../_variables/rsql.html">$rsql</a>, <a class="var it29079" onMouseOver="hilite(29079)" onMouseOut="lolite()" onClick="logVariable('rparams')" href="../../_variables/rparams.html">$rparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l341"><span class="linenum"> 341</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; AND r.shortname <a class="var it37412" onMouseOver="hilite(37412)" onMouseOut="lolite()" onClick="logVariable('rsql')" href="../../_variables/rsql.html">$rsql</a>&quot;;
<a name="l342"><span class="linenum"> 342</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it29079" onMouseOver="hilite(29079)" onMouseOut="lolite()" onClick="logVariable('rparams')" href="../../_variables/rparams.html">$rparams</a>);
<a name="l343"><span class="linenum"> 343</span></a>          }
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it13756" onMouseOver="hilite(13756)" onMouseOut="lolite()" onClick="logVariable('sortparams')" href="../../_variables/sortparams.html">$sortparams</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>('u');
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; ORDER BY <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>&quot;;
<a name="l347"><span class="linenum"> 347</span></a>  
<a name="l348"><span class="linenum"> 348</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it13756" onMouseOver="hilite(13756)" onMouseOut="lolite()" onClick="logVariable('sortparams')" href="../../_variables/sortparams.html">$sortparams</a>));
<a name="l349"><span class="linenum"> 349</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a> = array();
<a name="l350"><span class="linenum"> 350</span></a>          foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l351"><span class="linenum"> 351</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a>[] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>;
<a name="l352"><span class="linenum"> 352</span></a>          }
<a name="l353"><span class="linenum"> 353</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>          return <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a>;
<a name="l356"><span class="linenum"> 356</span></a>      }
<a name="l357"><span class="linenum"> 357</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'unenrol_user': ['unenrol_user', 'Unenrol user from course, the last unenrolment removes all remaining roles. ', [['lib','enrollib.php',1434],['enrol','locallib.php',641],['enrol/lti','lib.php',167],['enrol/mnet','enrol.php',198],['enrol/guest','lib.php',76]], 59],
'enrol_user': ['enrol_user', 'Enrol user into course via enrol instance. ', [['enrol/flatfile','lib.php',144],['lib','enrollib.php',1270],['lib/testing/generator','data_generator.php',891],['enrol/lti/classes','helper.php',233],['enrol/self','externallib.php',122],['enrol/mnet','enrol.php',115],['enrol/guest','lib.php',60]], 745],
'mnet_fields_to_import': ['mnet_fields_to_import', 'return an array of the profile fields to import from the given host, when creating/updating user accounts ', [['mnet','lib.php',856]], 2],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'user_enrolments': ['user_enrolments', 'This method has never been implemented in Moodle MNet API ', [['enrol/mnet','enrol.php',100]], 0],
'mnet_strip_user': ['mnet_strip_user', 'given a user object (or array) and a list of allowed fields, strip out all the fields that should not be included. This can be used both for outgoing data and incoming data. ', [['mnet','lib.php',892]], 4],
'enrol_get_plugin': ['enrol_get_plugin', 'Returns instance of enrol plugin ', [['lib','enrollib.php',111]], 156],
'get_mnet_remote_client': ['get_mnet_remote_client', 'during xmlrpc server code execution, any code wishing to access information about the remote peer must use this to get it. ', [['lib','moodlelib.php',9463]], 19],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'available_courses': ['available_courses', 'Returns list of courses that we offer to the caller for remote enrolment of their users ', [['enrol/mnet','enrol.php',47]], 2],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 556],
'course_enrolments': ['course_enrolments', 'Returns a list of users from the client server who are enrolled in our course ', [['enrol/mnet','enrol.php',291]], 0],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'users_order_by_sql': ['users_order_by_sql', 'This function generates the standard ORDER BY clause for use when generating lists of users. If you don\'t have a reason to use a different order, then you should use this method to generate the order when displaying lists of users. ', [['lib','datalib.php',290]], 62],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'array_merge': ['array_merge', '', [], 2944],
'defined': ['defined', '', [], 4731],
'array_map': ['array_map', '', [], 169],
'is_null': ['is_null', '', [], 2003],
'array_values': ['array_values', '', [], 342],
'time': ['time', '', [], 1959],
'is_array': ['is_array', '', [], 1608],
'explode': ['explode', '', [], 1572]};
CLASS_DATA={
'enrol_mnet_mnetservice_enrol': ['enrol_mnet_mnetservice_enrol', 'MNet server-side methods that are part of mnetservice_enrol ', [['enrol/mnet','enrol.php',35]], 0],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'mnet_server_exception': ['mnet_server_exception', 'mnet server exception.  extends moodle_exception, but takes slightly different arguments. and unlike the rest of moodle, the actual int error code is used. this exception should only be used during an xmlrpc server request, ie, not for client requests. ', [['mnet/xmlrpc','serverlib.php',661]], 44]};
CONST_DATA={
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
