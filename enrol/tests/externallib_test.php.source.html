<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /enrol/tests/externallib_test.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='enrol/tests';
filename='externallib_test.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/enrol/tests/</a> -> <a href="externallib_test.php.html">externallib_test.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="externallib_test.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="externallib_test.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l18"><span class="linenum">  18</span></a>  
<a name="l19"><span class="linenum">  19</span></a>  global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l20"><span class="linenum">  20</span></a>  
<a name="l21"><span class="linenum">  21</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../webservice/tests/helpers.php.html">/webservice/tests/helpers.php</a>');
<a name="l22"><span class="linenum">  22</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../enrol/externallib.php.html">/enrol/externallib.php</a>');
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">/**</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * Enrol external PHPunit tests</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * @package    core_enrol</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @category   external</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @copyright  2012 Jerome Mouneyrac</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @since Moodle 2.4</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_enrol_externallib_testcase')" href="../../_classes/core_enrol_externallib_testcase.html" onMouseOver="classPopup(event,'core_enrol_externallib_testcase')">core_enrol_externallib_testcase</a> extends externallib_advanced_testcase {
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>      <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * Test get_enrolled_users</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      public function <a class="function" onClick="logFunction('test_get_enrolled_users')" href="../../_functions/test_get_enrolled_users.html" onMouseOver="funcPopup(event,'test_get_enrolled_users')">test_get_enrolled_users</a>() {
<a name="l39"><span class="linenum">  39</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l44"><span class="linenum">  44</span></a>          <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user1')" href="../../_variables/user1.html">$user1</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it168" onMouseOver="hilite(168)" onMouseOut="lolite()" onClick="logVariable('user2')" href="../../_variables/user2.html">$user2</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l46"><span class="linenum">  46</span></a>          <a class="var it4298" onMouseOver="hilite(4298)" onMouseOut="lolite()" onClick="logVariable('user3')" href="../../_variables/user3.html">$user3</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setUser')" href="../../_functions/setuser.html" onMouseOver="funcPopup(event,'setuser')">setUser</a>(<a class="var it4298" onMouseOver="hilite(4298)" onMouseOut="lolite()" onClick="logVariable('user3')" href="../../_variables/user3.html">$user3</a>);
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">        // Set the required capabilities by the external function.</span>
<a name="l50"><span class="linenum">  50</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assignUserCapability')" href="../../_functions/assignusercapability.html" onMouseOver="funcPopup(event,'assignusercapability')">assignUserCapability</a>('moodle/course:viewparticipants', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l52"><span class="linenum">  52</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assignUserCapability')" href="../../_functions/assignusercapability.html" onMouseOver="funcPopup(event,'assignusercapability')">assignUserCapability</a>('moodle/user:viewdetails', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">        // Enrol the users in the course.</span>
<a name="l55"><span class="linenum">  55</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user1')" href="../../_variables/user1.html">$user1</a>-&gt;<a onClick="logVariable('id')" class="var it39641" onMouseOver="hilite(39641)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'manual');
<a name="l56"><span class="linenum">  56</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it168" onMouseOver="hilite(168)" onMouseOut="lolite()" onClick="logVariable('user2')" href="../../_variables/user2.html">$user2</a>-&gt;<a onClick="logVariable('id')" class="var it39847" onMouseOver="hilite(39847)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'manual');
<a name="l57"><span class="linenum">  57</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it4298" onMouseOver="hilite(4298)" onMouseOut="lolite()" onClick="logVariable('user3')" href="../../_variables/user3.html">$user3</a>-&gt;<a onClick="logVariable('id')" class="var it39846" onMouseOver="hilite(39846)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'manual');
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        // Call the external function.</span>
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">        // We need to execute the return values cleaning process to simulate the web service server.</span>
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users_returns')" href="../../_functions/get_enrolled_users_returns.html" onMouseOver="funcPopup(event,'get_enrolled_users_returns')">get_enrolled_users_returns</a>(), <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>);
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">        // Check the result set.</span>
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(3, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>));
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayHasKey('email', <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>[0]);
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">        // Call the function with some parameters set.</span>
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(
<a name="l71"><span class="linenum">  71</span></a>              array('name' =&gt; 'limitfrom', 'value' =&gt; 2),
<a name="l72"><span class="linenum">  72</span></a>              array('name' =&gt; 'limitnumber', 'value' =&gt; 1),
<a name="l73"><span class="linenum">  73</span></a>              array('name' =&gt; 'userfields', 'value' =&gt; 'id')
<a name="l74"><span class="linenum">  74</span></a>          ));
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">        // We need to execute the return values cleaning process to simulate the web service server.</span>
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users_returns')" href="../../_functions/get_enrolled_users_returns.html" onMouseOver="funcPopup(event,'get_enrolled_users_returns')">get_enrolled_users_returns</a>(), <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>);
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">        // Check the result set, we should only get the 3rd result, which is $user3.</span>
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertCount(1, <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>);
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it4298" onMouseOver="hilite(4298)" onMouseOut="lolite()" onClick="logVariable('user3')" href="../../_variables/user3.html">$user3</a>-&gt;<a onClick="logVariable('id')" class="var it39846" onMouseOver="hilite(39846)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>[0]['id']);
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayHasKey('id', <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>[0]);
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('email', <a class="var it21470" onMouseOver="hilite(21470)" onMouseOut="lolite()" onClick="logVariable('enrolledusers')" href="../../_variables/enrolledusers.html">$enrolledusers</a>[0]);
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">        // Call without required capability.</span>
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unassignUserCapability')" href="../../_functions/unassignusercapability.html" onMouseOver="funcPopup(event,'unassignusercapability')">unassignUserCapability</a>('moodle/course:viewparticipants', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l87"><span class="linenum">  87</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;setExpectedException('moodle_exception');
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l89"><span class="linenum">  89</span></a>      }
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>      <span class="comment">/**</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * Test get_users_courses</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     */</span>
<a name="l94"><span class="linenum">  94</span></a>      public function <a class="function" onClick="logFunction('test_get_users_courses')" href="../../_functions/test_get_users_courses.html" onMouseOver="funcPopup(event,'test_get_users_courses')">test_get_users_courses</a>() {
<a name="l95"><span class="linenum">  95</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it21568" onMouseOver="hilite(21568)" onMouseOut="lolite()" onClick="logVariable('coursedata1')" href="../../_variables/coursedata1.html">$coursedata1</a> = array(
<a name="l100"><span class="linenum"> 100</span></a>              'summary'          =&gt; 'Lightwork Course 1 description',
<a name="l101"><span class="linenum"> 101</span></a>              'summaryformat'    =&gt; <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>,
<a name="l102"><span class="linenum"> 102</span></a>              'lang'             =&gt; 'en',
<a name="l103"><span class="linenum"> 103</span></a>              'enablecompletion' =&gt; true,
<a name="l104"><span class="linenum"> 104</span></a>              'showgrades'       =&gt; true
<a name="l105"><span class="linenum"> 105</span></a>          );
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>(<a class="var it21568" onMouseOver="hilite(21568)" onMouseOut="lolite()" onClick="logVariable('coursedata1')" href="../../_variables/coursedata1.html">$coursedata1</a>);
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it1875" onMouseOver="hilite(1875)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l109"><span class="linenum"> 109</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = array(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>, <a class="var it1875" onMouseOver="hilite(1875)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>);
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">        // Enrol $USER in the courses.</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">        // We use the manual plugin.</span>
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a> = null;
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a> = array();
<a name="l115"><span class="linenum"> 115</span></a>          foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l116"><span class="linenum"> 116</span></a>              <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l117"><span class="linenum"> 117</span></a>              <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assignUserCapability')" href="../../_functions/assignusercapability.html" onMouseOver="funcPopup(event,'assignusercapability')">assignUserCapability</a>('moodle/course:viewparticipants',
<a name="l118"><span class="linenum"> 118</span></a>                      <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;id, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'manual');
<a name="l121"><span class="linenum"> 121</span></a>          }
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">        // Call the external function.</span>
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it21569" onMouseOver="hilite(21569)" onMouseOut="lolite()" onClick="logVariable('enrolledincourses')" href="../../_variables/enrolledincourses.html">$enrolledincourses</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_users_courses')" href="../../_functions/get_users_courses.html" onMouseOver="funcPopup(event,'get_users_courses')">get_users_courses</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">        // We need to execute the return values cleaning process to simulate the web service server.</span>
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it21569" onMouseOver="hilite(21569)" onMouseOut="lolite()" onClick="logVariable('enrolledincourses')" href="../../_variables/enrolledincourses.html">$enrolledincourses</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_users_courses_returns')" href="../../_functions/get_users_courses_returns.html" onMouseOver="funcPopup(event,'get_users_courses_returns')">get_users_courses_returns</a>(), <a class="var it21569" onMouseOver="hilite(21569)" onMouseOut="lolite()" onClick="logVariable('enrolledincourses')" href="../../_variables/enrolledincourses.html">$enrolledincourses</a>);
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">        // Check we retrieve the good total number of enrolled users.</span>
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it21569" onMouseOver="hilite(21569)" onMouseOut="lolite()" onClick="logVariable('enrolledincourses')" href="../../_variables/enrolledincourses.html">$enrolledincourses</a>));
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">        // We need to format summary and summaryformat before to compare them with those values returned by the webservice.</span>
<a name="l133"><span class="linenum"> 133</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('summary')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/summary.html">summary</a>, <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('summaryformat')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/summaryformat.html">summaryformat</a>) =
<a name="l134"><span class="linenum"> 134</span></a>               <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('summary')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/summary.html">summary</a>, <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('summaryformat')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/summaryformat.html">summaryformat</a>, <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;id, 'course', 'summary', 0);
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">        // Check there are no differences between $course1 properties and course values returned by the webservice</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">        // only for those fields listed in the $coursedata1 array.</span>
<a name="l138"><span class="linenum"> 138</span></a>          foreach (<a class="var it21569" onMouseOver="hilite(21569)" onMouseOut="lolite()" onClick="logVariable('enrolledincourses')" href="../../_variables/enrolledincourses.html">$enrolledincourses</a> as <a class="var it21570" onMouseOver="hilite(21570)" onMouseOut="lolite()" onClick="logVariable('courseenrol')" href="../../_variables/courseenrol.html">$courseenrol</a>) {
<a name="l139"><span class="linenum"> 139</span></a>              if (<a class="var it21570" onMouseOver="hilite(21570)" onMouseOut="lolite()" onClick="logVariable('courseenrol')" href="../../_variables/courseenrol.html">$courseenrol</a>['id'] == <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l140"><span class="linenum"> 140</span></a>                  foreach (<a class="var it21568" onMouseOver="hilite(21568)" onMouseOut="lolite()" onClick="logVariable('coursedata1')" href="../../_variables/coursedata1.html">$coursedata1</a> as <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l141"><span class="linenum"> 141</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it21570" onMouseOver="hilite(21570)" onMouseOut="lolite()" onClick="logVariable('courseenrol')" href="../../_variables/courseenrol.html">$courseenrol</a>[<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>], <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>);
<a name="l142"><span class="linenum"> 142</span></a>                  }
<a name="l143"><span class="linenum"> 143</span></a>              }
<a name="l144"><span class="linenum"> 144</span></a>          }
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      <span class="comment">/**</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * Test get_enrolled_users_with_capability</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     */</span>
<a name="l150"><span class="linenum"> 150</span></a>      public function <a class="function" onClick="logFunction('test_get_enrolled_users_with_capability')" href="../../_functions/test_get_enrolled_users_with_capability.html" onMouseOver="funcPopup(event,'test_get_enrolled_users_with_capability')">test_get_enrolled_users_with_capability</a> () {
<a name="l151"><span class="linenum"> 151</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user1')" href="../../_variables/user1.html">$user1</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('coursedata')" href="../../_variables/coursedata.html">$coursedata</a>['idnumber'] = 'idnumbercourse1';
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('coursedata')" href="../../_variables/coursedata.html">$coursedata</a>['fullname'] = 'Lightwork Course 1';
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('coursedata')" href="../../_variables/coursedata.html">$coursedata</a>['summary'] = 'Lightwork Course 1 description';
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('coursedata')" href="../../_variables/coursedata.html">$coursedata</a>['summaryformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>  = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>(<a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('coursedata')" href="../../_variables/coursedata.html">$coursedata</a>);
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">        // Create a manual enrolment record.</span>
<a name="l164"><span class="linenum"> 164</span></a>          <a class="var it21571" onMouseOver="hilite(21571)" onMouseOut="lolite()" onClick="logVariable('manual_enrol_data')" href="../../_variables/manual_enrol_data.html">$manual_enrol_data</a>['enrol'] = 'manual';
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it21571" onMouseOver="hilite(21571)" onMouseOut="lolite()" onClick="logVariable('manual_enrol_data')" href="../../_variables/manual_enrol_data.html">$manual_enrol_data</a>['status'] = 0;
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it21571" onMouseOver="hilite(21571)" onMouseOut="lolite()" onClick="logVariable('manual_enrol_data')" href="../../_variables/manual_enrol_data.html">$manual_enrol_data</a>['courseid'] = <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('enrolid')" href="../../_variables/enrolid.html">$enrolid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('enrol', <a class="var it21571" onMouseOver="hilite(21571)" onMouseOut="lolite()" onClick="logVariable('manual_enrol_data')" href="../../_variables/manual_enrol_data.html">$manual_enrol_data</a>);
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">        // Create the users and give them capabilities in the course context.</span>
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assignUserCapability')" href="../../_functions/assignusercapability.html" onMouseOver="funcPopup(event,'assignusercapability')">assignUserCapability</a>('moodle/course:viewparticipants', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 3);
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">        // Create 2 students.</span>
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('student1')" href="../../_variables/student1.html">$student1</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l175"><span class="linenum"> 175</span></a>          <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('student2')" href="../../_variables/student2.html">$student2</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">        // Give the capability to student2.</span>
<a name="l178"><span class="linenum"> 178</span></a>          <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('moodle/course:viewparticipants', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, 3, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l179"><span class="linenum"> 179</span></a>          <a class="function" onClick="logFunction('role_assign')" href="../../_functions/role_assign.html" onMouseOver="funcPopup(event,'role_assign')">role_assign</a>(3, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('student2')" href="../../_variables/student2.html">$student2</a>-&gt;<a onClick="logVariable('id')" class="var it39647" onMouseOver="hilite(39647)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l180"><span class="linenum"> 180</span></a>          <a class="function" onClick="logFunction('accesslib_clear_all_caches_for_unit_testing')" href="../../_functions/accesslib_clear_all_caches_for_unit_testing.html" onMouseOver="funcPopup(event,'accesslib_clear_all_caches_for_unit_testing')">accesslib_clear_all_caches_for_unit_testing</a>();
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">        // Enrol both the user and the students in the course.</span>
<a name="l183"><span class="linenum"> 183</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['status'] = 0;
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['enrolid'] = <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('enrolid')" href="../../_variables/enrolid.html">$enrolid</a>;
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['userid'] = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('user_enrolments', <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>);
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['status'] = 0;
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['enrolid'] = <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('enrolid')" href="../../_variables/enrolid.html">$enrolid</a>;
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['userid'] = <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('student1')" href="../../_variables/student1.html">$student1</a>-&gt;<a onClick="logVariable('id')" class="var it39645" onMouseOver="hilite(39645)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('user_enrolments', <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>);
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['status'] = 0;
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['enrolid'] = <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('enrolid')" href="../../_variables/enrolid.html">$enrolid</a>;
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>['userid'] = <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('student2')" href="../../_variables/student2.html">$student2</a>-&gt;<a onClick="logVariable('id')" class="var it39647" onMouseOver="hilite(39647)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('user_enrolments', <a class="var it21572" onMouseOver="hilite(21572)" onMouseOut="lolite()" onClick="logVariable('user_enrolment_data')" href="../../_variables/user_enrolment_data.html">$user_enrolment_data</a>);
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(&quot;coursecapabilities&quot; =&gt; array('courseid' =&gt; <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l199"><span class="linenum"> 199</span></a>              'capabilities' =&gt; array('moodle/course:viewparticipants')));
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array();
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users_with_capability')" href="../../_functions/get_enrolled_users_with_capability.html" onMouseOver="funcPopup(event,'get_enrolled_users_with_capability')">get_enrolled_users_with_capability</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">        // We need to execute the return values cleaning process to simulate the web service server.</span>
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users_with_capability_returns')" href="../../_functions/get_enrolled_users_with_capability_returns.html" onMouseOver="funcPopup(event,'get_enrolled_users_with_capability_returns')">get_enrolled_users_with_capability_returns</a>(), <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">        // Check an array containing the expected user for the course capability is returned.</span>
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[0];
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a>['courseid']);
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('moodle/course:viewparticipants', <a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a>['capability']);
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a>['users']));
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">        // Now doing the query again with options.</span>
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l214"><span class="linenum"> 214</span></a>              &quot;coursecapabilities&quot; =&gt; array(
<a name="l215"><span class="linenum"> 215</span></a>                  'courseid' =&gt; <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l216"><span class="linenum"> 216</span></a>                  'capabilities' =&gt; array('moodle/course:viewparticipants')
<a name="l217"><span class="linenum"> 217</span></a>              )
<a name="l218"><span class="linenum"> 218</span></a>          );
<a name="l219"><span class="linenum"> 219</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l220"><span class="linenum"> 220</span></a>              array('name' =&gt; 'limitfrom', 'value' =&gt; 1),
<a name="l221"><span class="linenum"> 221</span></a>              array('name' =&gt; 'limitnumber', 'value' =&gt; 1),
<a name="l222"><span class="linenum"> 222</span></a>              array('name' =&gt; 'userfields', 'value' =&gt; 'id')
<a name="l223"><span class="linenum"> 223</span></a>          );
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users_with_capability')" href="../../_functions/get_enrolled_users_with_capability.html" onMouseOver="funcPopup(event,'get_enrolled_users_with_capability')">get_enrolled_users_with_capability</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">        // We need to execute the return values cleaning process to simulate the web service server.</span>
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_enrolled_users_with_capability_returns')" href="../../_functions/get_enrolled_users_with_capability_returns.html" onMouseOver="funcPopup(event,'get_enrolled_users_with_capability_returns')">get_enrolled_users_with_capability_returns</a>(), <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">        // Check an array containing the expected user for the course capability is returned.</span>
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[0]['users'];
<a name="l232"><span class="linenum"> 232</span></a>          <a class="var it21574" onMouseOver="hilite(21574)" onMouseOut="lolite()" onClick="logVariable('expecteduser')" href="../../_variables/expecteduser.html">$expecteduser</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a>);
<a name="l233"><span class="linenum"> 233</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(1, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it21573" onMouseOver="hilite(21573)" onMouseOut="lolite()" onClick="logVariable('expecteduserlist')" href="../../_variables/expecteduserlist.html">$expecteduserlist</a>));
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('student2')" href="../../_variables/student2.html">$student2</a>-&gt;<a onClick="logVariable('id')" class="var it39647" onMouseOver="hilite(39647)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it21574" onMouseOver="hilite(21574)" onMouseOut="lolite()" onClick="logVariable('expecteduser')" href="../../_variables/expecteduser.html">$expecteduser</a>['id']);
<a name="l235"><span class="linenum"> 235</span></a>      }
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>      <span class="comment">/**</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     * Test get_course_enrolment_methods</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     */</span>
<a name="l240"><span class="linenum"> 240</span></a>      public function <a class="function" onClick="logFunction('test_get_course_enrolment_methods')" href="../../_functions/test_get_course_enrolment_methods.html" onMouseOver="funcPopup(event,'test_get_course_enrolment_methods')">test_get_course_enrolment_methods</a>() {
<a name="l241"><span class="linenum"> 241</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">        // Get enrolment plugins.</span>
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('selfplugin')" href="../../_variables/selfplugin.html">$selfplugin</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('self');
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertNotEmpty')" href="../../_functions/assertnotempty.html" onMouseOver="funcPopup(event,'assertnotempty')">assertNotEmpty</a>(<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('selfplugin')" href="../../_variables/selfplugin.html">$selfplugin</a>);
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it11339" onMouseOver="hilite(11339)" onMouseOut="lolite()" onClick="logVariable('manualplugin')" href="../../_variables/manualplugin.html">$manualplugin</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('manual');
<a name="l249"><span class="linenum"> 249</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertNotEmpty')" href="../../_functions/assertnotempty.html" onMouseOver="funcPopup(event,'assertnotempty')">assertNotEmpty</a>(<a class="var it11339" onMouseOver="hilite(11339)" onMouseOut="lolite()" onClick="logVariable('manualplugin')" href="../../_variables/manualplugin.html">$manualplugin</a>);
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('role', array('shortname'=&gt;'student'));
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertNotEmpty')" href="../../_functions/assertnotempty.html" onMouseOver="funcPopup(event,'assertnotempty')">assertNotEmpty</a>(<a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>);
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>          <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it1875" onMouseOver="hilite(1875)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a> = self::<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">        // Add enrolment methods for course.</span>
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it9398" onMouseOver="hilite(9398)" onMouseOut="lolite()" onClick="logVariable('instanceid1')" href="../../_variables/instanceid1.html">$instanceid1</a> = <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('selfplugin')" href="../../_variables/selfplugin.html">$selfplugin</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>, array('status' =&gt; <a class="constant" onClick="logConstant('ENROL_INSTANCE_ENABLED')" href="../../_constants/ENROL_INSTANCE_ENABLED.html" onMouseOver="constPopup(event,'ENROL_INSTANCE_ENABLED')">ENROL_INSTANCE_ENABLED</a>,
<a name="l259"><span class="linenum"> 259</span></a>                                                                  'name' =&gt; 'Test instance 1',
<a name="l260"><span class="linenum"> 260</span></a>                                                                  'customint6' =&gt; 1,
<a name="l261"><span class="linenum"> 261</span></a>                                                                  'roleid' =&gt; <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it9399" onMouseOver="hilite(9399)" onMouseOut="lolite()" onClick="logVariable('instanceid2')" href="../../_variables/instanceid2.html">$instanceid2</a> = <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('selfplugin')" href="../../_variables/selfplugin.html">$selfplugin</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>, array('status' =&gt; <a class="constant" onClick="logConstant('ENROL_INSTANCE_DISABLED')" href="../../_constants/ENROL_INSTANCE_DISABLED.html" onMouseOver="constPopup(event,'ENROL_INSTANCE_DISABLED')">ENROL_INSTANCE_DISABLED</a>,
<a name="l263"><span class="linenum"> 263</span></a>                                                                  'name' =&gt; 'Test instance 2',
<a name="l264"><span class="linenum"> 264</span></a>                                                                  'roleid' =&gt; <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>          <a class="var it9400" onMouseOver="hilite(9400)" onMouseOut="lolite()" onClick="logVariable('instanceid3')" href="../../_variables/instanceid3.html">$instanceid3</a> = <a class="var it11339" onMouseOver="hilite(11339)" onMouseOut="lolite()" onClick="logVariable('manualplugin')" href="../../_variables/manualplugin.html">$manualplugin</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>, array('status' =&gt; <a class="constant" onClick="logConstant('ENROL_INSTANCE_ENABLED')" href="../../_constants/ENROL_INSTANCE_ENABLED.html" onMouseOver="constPopup(event,'ENROL_INSTANCE_ENABLED')">ENROL_INSTANCE_ENABLED</a>,
<a name="l267"><span class="linenum"> 267</span></a>                                                                  'name' =&gt; 'Test instance 3'));
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('enrol', array('courseid' =&gt; <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'status' =&gt; <a class="constant" onClick="logConstant('ENROL_INSTANCE_ENABLED')" href="../../_constants/ENROL_INSTANCE_ENABLED.html" onMouseOver="constPopup(event,'ENROL_INSTANCE_ENABLED')">ENROL_INSTANCE_ENABLED</a>));
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertCount(2, <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>);
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">        // Check if information is returned.</span>
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_course_enrolment_methods')" href="../../_functions/get_course_enrolment_methods.html" onMouseOver="funcPopup(event,'get_course_enrolment_methods')">get_course_enrolment_methods</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l274"><span class="linenum"> 274</span></a>          <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_course_enrolment_methods_returns')" href="../../_functions/get_course_enrolment_methods_returns.html" onMouseOver="funcPopup(event,'get_course_enrolment_methods_returns')">get_course_enrolment_methods_returns</a>(),
<a name="l275"><span class="linenum"> 275</span></a>                                                              <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>);
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">        // Enrolment information is currently returned by self enrolment plugin, so count == 1.</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">        // This should be changed as we implement get_enrol_info() for other enrolment plugins.</span>
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertCount(1, <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>);
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a> = <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>[0];
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it39547" onMouseOver="hilite(39547)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['courseid']);
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('self', <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['type']);
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertTrue')" href="../../_functions/asserttrue.html" onMouseOver="funcPopup(event,'asserttrue')">assertTrue</a>(<a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['status']);
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertFalse')" href="../../_functions/assertfalse.html" onMouseOver="funcPopup(event,'assertfalse')">assertFalse</a>(isset(<a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['wsfunction']));
<a name="l285"><span class="linenum"> 285</span></a>  
<a name="l286"><span class="linenum"> 286</span></a>          <a class="var it21576" onMouseOver="hilite(21576)" onMouseOut="lolite()" onClick="logVariable('instanceid4')" href="../../_variables/instanceid4.html">$instanceid4</a> = <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('selfplugin')" href="../../_variables/selfplugin.html">$selfplugin</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it1875" onMouseOver="hilite(1875)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>, array('status' =&gt; <a class="constant" onClick="logConstant('ENROL_INSTANCE_ENABLED')" href="../../_constants/ENROL_INSTANCE_ENABLED.html" onMouseOver="constPopup(event,'ENROL_INSTANCE_ENABLED')">ENROL_INSTANCE_ENABLED</a>,
<a name="l287"><span class="linenum"> 287</span></a>                                                                  'name' =&gt; 'Test instance 4',
<a name="l288"><span class="linenum"> 288</span></a>                                                                  'roleid' =&gt; <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l289"><span class="linenum"> 289</span></a>                                                                  'customint6' =&gt; 1,
<a name="l290"><span class="linenum"> 290</span></a>                                                                  'password' =&gt; 'test'));
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a> = <a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_course_enrolment_methods')" href="../../_functions/get_course_enrolment_methods.html" onMouseOver="funcPopup(event,'get_course_enrolment_methods')">get_course_enrolment_methods</a>(<a class="var it1875" onMouseOver="hilite(1875)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it39642" onMouseOver="hilite(39642)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a> = <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a>::<a class="function" onClick="logFunction('clean_returnvalue')" href="../../_functions/clean_returnvalue.html" onMouseOver="funcPopup(event,'clean_returnvalue')">clean_returnvalue</a>(<a class="class" onClick="logClass('core_enrol_external')" href="../../_classes/core_enrol_external.html" onMouseOver="classPopup(event,'core_enrol_external')">core_enrol_external</a>::<a class="function" onClick="logFunction('get_course_enrolment_methods_returns')" href="../../_functions/get_course_enrolment_methods_returns.html" onMouseOver="funcPopup(event,'get_course_enrolment_methods_returns')">get_course_enrolment_methods_returns</a>(),
<a name="l293"><span class="linenum"> 293</span></a>                                                              <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>);
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertCount(1, <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>);
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a> = <a class="var it9401" onMouseOver="hilite(9401)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethods')" href="../../_variables/enrolmentmethods.html">$enrolmentmethods</a>[0];
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it1875" onMouseOver="hilite(1875)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it39642" onMouseOver="hilite(39642)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['courseid']);
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('self', <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['type']);
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertTrue')" href="../../_functions/asserttrue.html" onMouseOver="funcPopup(event,'asserttrue')">assertTrue</a>(<a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['status']);
<a name="l300"><span class="linenum"> 300</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('enrol_self_get_instance_info', <a class="var it21575" onMouseOver="hilite(21575)" onMouseOut="lolite()" onClick="logVariable('enrolmentmethod')" href="../../_variables/enrolmentmethod.html">$enrolmentmethod</a>['wsfunction']);
<a name="l301"><span class="linenum"> 301</span></a>      }
<a name="l302"><span class="linenum"> 302</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'assertequals': ['assertequals', 'Asserts that two variables are equal. ', [['lib/tests','completionlib_test.php',76]], 8905],
'assignusercapability': ['assignusercapability', 'Assign a capability to $USER The function creates a student $USER if $USER->id is empty ', [['webservice/tests','helpers.php',36]], 127],
'create_user': ['create_user', 'Create a test user ', [['lib/testing/generator','data_generator.php',137]], 821],
'get_enrolled_users_with_capability': ['get_enrolled_users_with_capability', 'Return users that have the capabilities for each course specified. For each course and capability specified, a list of the users that are enrolled in the course and have that capability are returned. ', [['enrol','externallib.php',79]], 2],
'clean_returnvalue': ['clean_returnvalue', 'Clean response If a response attribute is unknown from the description, we just ignore the attribute. If a response attribute is incorrect, invalid_response_exception is thrown. Note: this function is similar to validate parameters, however it is distinct because parameters validation must be distinct from cleaning return values. ', [['lib','externallib.php',253]], 260],
'accesslib_clear_all_caches_for_unit_testing': ['accesslib_clear_all_caches_for_unit_testing', 'Clears accesslib\'s private caches. ONLY BE USED BY UNIT TESTS ', [['lib','accesslib.php',208]], 37],
'get_enrolled_users_returns': ['get_enrolled_users_returns', 'Returns description of method result value ', [['enrol','externallib.php',498],['enrol','externallib.php',915]], 3],
'role_assign': ['role_assign', 'Assigns the specified role to a user in the context. ', [['lib/testing/generator','data_generator.php',885],['lib','accesslib.php',1666],['enrol','externallib.php',1008]], 172],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'resetaftertest': ['resetaftertest', 'Reset everything after current test. ', [['lib/phpunit/classes','advanced_testcase.php',239]], 1055],
'test_get_users_courses': ['test_get_users_courses', 'Test get_users_courses ', [['enrol/tests','externallib_test.php',91]], 0],
'asserttrue': ['asserttrue', '', [['lib/phpunit/classes','unittestcase.php',78]], 3049],
'test_get_course_enrolment_methods': ['test_get_course_enrolment_methods', 'Test get_course_enrolment_methods ', [['enrol/tests','externallib_test.php',237]], 0],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'getdatagenerator': ['getdatagenerator', 'Get data generator ', [['lib/phpunit/classes','advanced_testcase.php',517]], 2915],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'get_users_courses': ['get_users_courses', 'Get list of courses user is enrolled in (only active enrolments are returned). Please note the current user must be able to access the course, otherwise the course is not included. ', [['enrol','externallib.php',288],['enrol','externallib.php',961]], 2],
'enrol_user': ['enrol_user', 'Enrol remote user to our course ', [['enrol/mnet','enrol.php',115],['lib/testing/generator','data_generator.php',848],['enrol/guest','lib.php',54],['lib','enrollib.php',1269],['enrol/flatfile','lib.php',144]], 472],
'unassignusercapability': ['unassignusercapability', 'Unassign a capability to $USER. ', [['webservice/tests','helpers.php',67]], 41],
'get_course_enrolment_methods_returns': ['get_course_enrolment_methods_returns', 'Returns description of get_course_enrolment_methods() result value ', [['enrol','externallib.php',620]], 2],
'test_get_enrolled_users_with_capability': ['test_get_enrolled_users_with_capability', 'Test get_enrolled_users_with_capability ', [['enrol/tests','externallib_test.php',147]], 0],
'assign_capability': ['assign_capability', '', [['lib/tests','coursecatlib_test.php',66],['lib','accesslib.php',1543]], 118],
'assertfalse': ['assertfalse', '', [['lib/phpunit/classes','unittestcase.php',89]], 1882],
'add_instance': ['add_instance', 'Add new instance of enrol plugin. ', [['enrol/guest','lib.php',345],['lib','enrollib.php',1670],['mod/assign','locallib.php',562],['enrol/manual','lib.php',174]], 76],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'test_get_enrolled_users': ['test_get_enrolled_users', 'Test get_enrolled_users ', [['enrol/tests','externallib_test.php',35]], 0],
'setuser': ['setuser', 'Set current $USER, reset access cache. ', [['lib/phpunit/classes','advanced_testcase.php',461],['lib/google/src/Google/Service','Replicapoolupdater.php',542],['lib/google/src/Google/Service','Drive.php',2706],['lib/google/src/Google/Service','Autoscaler.php',1004],['lib/google/src/Google/Service','Appsactivity.php',269],['lib/google/src/Google/Service','Appsactivity.php',416],['lib/google/src/Google/Service','Container.php',698],['lib/google/src/Google/Service','Compute.php',9429],['lib/zend/Zend/Gdata/Calendar','EventQuery.php',148],['lib/google/src/Google/Service','Replicapool.php',1077],['lib/google/src/Google/Service','Resourceviews.php',816],['lib/zend/Zend/Gdata/Photos','UserQuery.php',127]], 483],
'create_course': ['create_course', 'Create a test course ', [['lib/testing/generator','data_generator.php',356],['course','lib.php',2535],['enrol/ldap','lib.php',950],['admin/tool/generator/classes','course_backend.php',246]], 861],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'assertnotempty': ['assertnotempty', '', [['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',98]], 339],
'enrol_get_plugin': ['enrol_get_plugin', 'Returns instance of enrol plugin ', [['lib','enrollib.php',111]], 144],
'get_users_courses_returns': ['get_users_courses_returns', 'Returns description of method result value ', [['enrol','externallib.php',337],['enrol','externallib.php',975]], 2],
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',721]], 31],
'get_course_enrolment_methods': ['get_course_enrolment_methods', 'Get list of active course enrolment methods for current user. ', [['enrol','externallib.php',594]], 2],
'get_enrolled_users_with_capability_returns': ['get_enrolled_users_with_capability_returns', 'Returns description of method result value ', [['enrol','externallib.php',187]], 2],
'get_enrolled_users': ['get_enrolled_users', 'Returns list of users enrolled into course. ', [['lib','accesslib.php',2438],['enrol','externallib.php',390],['enrol','externallib.php',821]], 51],
'count': ['count', '', [], 3984],
'defined': ['defined', '', [], 4098],
'reset': ['reset', '', [], 1070]};
CLASS_DATA={
'core_enrol_external': ['core_enrol_external', 'Enrol external functions ', [['enrol','externallib.php',34]], 22],
'core_enrol_externallib_testcase': ['core_enrol_externallib_testcase', 'Enrol external PHPunit tests ', [['enrol/tests','externallib_test.php',24]], 0],
'external_api': ['external_api', 'Base class for external api methods. ', [['lib','externallib.php',139]], 302],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197]};
CONST_DATA={
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 378],
'ENROL_INSTANCE_DISABLED': ['ENROL_INSTANCE_DISABLED', '', [['lib','enrollib.php',34]], 39],
'ENROL_INSTANCE_ENABLED': ['ENROL_INSTANCE_ENABLED', '', [['lib','enrollib.php',31]], 92],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'CAP_ALLOW': ['CAP_ALLOW', '', [['lib','accesslib.php',135]], 1292]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
