<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of lib.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='enrol/imsenterprise';
filename='lib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/enrol/imsenterprise/</a> -> <a href="lib.php.source.html">lib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="lib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>IMS Enterprise file enrolment plugin. This plugin lets the user specify an IMS Enterprise file to be processed. The IMS Enterprise file is mainly parsed on a regular cron, but can also be imported via the UI (Admin Settings).</b></p>
<table>
<tr><td align="right">Author: </td><td>Eugene Venter - based on code by Dan Stowell</td></tr>
<tr><td align="right">Copyright: </td><td>2010 Eugene Venter</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>818 lines (39 kb)</td></tr>
<tr><td align="right">Included or required: </td><td><a href="lib.php.xref.html">1 time</a></td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>1 time</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>1 file<br>&nbsp;<a href="../../enrol/imsenterprise/locallib.php.html">enrol/imsenterprise/locallib.php</a>
</td></tr>
</table>
<h3>Defines 1 class</h3>
<div class="inset">
<p><b>enrol_imsenterprise_plugin::</b> (16 methods):<br>
&nbsp;&nbsp;<a href="#cron">cron</a>()<br>
&nbsp;&nbsp;<a href="#full_tag_found_in_cache">full_tag_found_in_cache</a>()<br>
&nbsp;&nbsp;<a href="#remove_tag_from_cache">remove_tag_from_cache</a>()<br>
&nbsp;&nbsp;<a href="#get_recstatus">get_recstatus</a>()<br>
&nbsp;&nbsp;<a href="#process_group_tag">process_group_tag</a>()<br>
&nbsp;&nbsp;<a href="#process_person_tag">process_person_tag</a>()<br>
&nbsp;&nbsp;<a href="#process_membership_tag">process_membership_tag</a>()<br>
&nbsp;&nbsp;<a href="#process_properties_tag">process_properties_tag</a>()<br>
&nbsp;&nbsp;<a href="#log_line">log_line</a>()<br>
&nbsp;&nbsp;<a href="#decode_timeframe">decode_timeframe</a>()<br>
&nbsp;&nbsp;<a href="#load_role_mappings">load_role_mappings</a>()<br>
&nbsp;&nbsp;<a href="#load_course_mappings">load_course_mappings</a>()<br>
&nbsp;&nbsp;<a href="#enrol_imsenterprise_allow_group_member_remove">enrol_imsenterprise_allow_group_member_remove</a>()<br>
&nbsp;&nbsp;<a href="#get_default_category_id">get_default_category_id</a>()<br>
&nbsp;&nbsp;<a href="#can_delete_instance">can_delete_instance</a>()<br>
&nbsp;&nbsp;<a href="#can_hide_show_instance">can_hide_show_instance</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="enrol_imsenterprise_plugin"><b>enrol_imsenterprise_plugin</b></a>&nbsp;&nbsp;- <a href="../../_classes/enrol_imsenterprise_plugin.html"><small>X-Ref</small></a>
</p>
<b>IMS Enterprise file enrolment plugin.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cron" onClick="logFunction('cron', 'lib.php.source.html#l67')" href="lib.php.source.html#l67">cron</a>()&nbsp;&nbsp;
<a href="../../_functions/cron.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Read in an IMS Enterprise file.<BR>
Originally designed to handle v1.1 files but should be able to handle<BR>
earlier types as well, I believe.<BR>
This cron feature has been converted to a scheduled task and it can now be scheduled<BR>
from the UI.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="full_tag_found_in_cache" onClick="logFunction('full_tag_found_in_cache', 'lib.php.source.html#l221')" href="lib.php.source.html#l221">full_tag_found_in_cache</a>(<a href="../../_variables/tagname.html">$tagname</a>, <a href="../../_variables/latestline.html">$latestline</a>)&nbsp;&nbsp;
<a href="../../_functions/full_tag_found_in_cache.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if a complete tag is found in the cached data, which usually happens<BR>
when the end of the tag has only just been loaded into the cache.<BR>
</b><BR><b>param:</b> string $tagname Name of tag to look for<br>
<b>param:</b> string $latestline The very last line in the cache (used for speeding up the match)<br>
<b>return:</b> bool|string false, or the contents of the tag (including start and end).<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="remove_tag_from_cache" onClick="logFunction('remove_tag_from_cache', 'lib.php.source.html#l240')" href="lib.php.source.html#l240">remove_tag_from_cache</a>(<a href="../../_variables/tagname.html">$tagname</a>)&nbsp;&nbsp;
<a href="../../_functions/remove_tag_from_cache.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Remove complete tag from the cached data (including all its contents) - so<BR>
that the cache doesn't grow to unmanageable size<BR>
</b><BR><b>param:</b> string $tagname Name of tag to look for<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_recstatus" onClick="logFunction('get_recstatus', 'lib.php.source.html#l252')" href="lib.php.source.html#l252">get_recstatus</a>(<a href="../../_variables/tagdata.html">$tagdata</a>, <a href="../../_variables/tagname.html">$tagname</a>)&nbsp;&nbsp;
<a href="../../_functions/get_recstatus.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Very simple convenience function to return the &quot;recstatus&quot; found in person/group/role tags.<BR>
1=Add, 2=Update, 3=Delete, as specified by IMS, and we also use 0 to indicate &quot;unspecified&quot;.<BR>
</b><BR><b>param:</b> string $tagdata the tag XML data<br>
<b>param:</b> string $tagname the name of the tag we're interested in<br>
<b>return:</b> int recstatus value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_group_tag" onClick="logFunction('process_group_tag', 'lib.php.source.html#l268')" href="lib.php.source.html#l268">process_group_tag</a>(<a href="../../_variables/tagcontents.html">$tagcontents</a>)&nbsp;&nbsp;
<a href="../../_functions/process_group_tag.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the group tag. This defines a Moodle course.<BR>
</b><BR><b>param:</b> string $tagcontents The raw contents of the XML element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_person_tag" onClick="logFunction('process_person_tag', 'lib.php.source.html#l401')" href="lib.php.source.html#l401">process_person_tag</a>(<a href="../../_variables/tagcontents.html">$tagcontents</a>)&nbsp;&nbsp;
<a href="../../_functions/process_person_tag.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the person tag. This defines a Moodle user.<BR>
</b><BR><b>param:</b> string $tagcontents The raw contents of the XML element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_membership_tag" onClick="logFunction('process_membership_tag', 'lib.php.source.html#l519')" href="lib.php.source.html#l519">process_membership_tag</a>(<a href="../../_variables/tagcontents.html">$tagcontents</a>)&nbsp;&nbsp;
<a href="../../_functions/process_membership_tag.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the membership tag. This defines whether the specified Moodle users<BR>
should be added/removed as teachers/students.<BR>
</b><BR><b>param:</b> string $tagcontents The raw contents of the XML element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_properties_tag" onClick="logFunction('process_properties_tag', 'lib.php.source.html#l677')" href="lib.php.source.html#l677">process_properties_tag</a>(<a href="../../_variables/tagcontents.html">$tagcontents</a>)&nbsp;&nbsp;
<a href="../../_functions/process_properties_tag.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the properties tag. The only data from this element<BR>
that is relevant is whether a &lt;target&gt; is specified.<BR>
</b><BR><b>param:</b> string $tagcontents The raw contents of the XML element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="log_line" onClick="logFunction('log_line', 'lib.php.source.html#l694')" href="lib.php.source.html#l694">log_line</a>(<a href="../../_variables/string.html">$string</a>)&nbsp;&nbsp;
<a href="../../_functions/log_line.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Store logging information. This does two things: uses the {@link mtrace()}<BR>
function to print info to screen/STDOUT, and also writes log to a text file<BR>
if a path has been specified.<BR>
</b><BR><b>param:</b> string $string Text to write (newline will be added automatically)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="decode_timeframe" onClick="logFunction('decode_timeframe', 'lib.php.source.html#l710')" href="lib.php.source.html#l710">decode_timeframe</a>(<a href="../../_variables/string.html">$string</a>)&nbsp;&nbsp;
<a href="../../_functions/decode_timeframe.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the INNER contents of a &lt;timeframe&gt; tag, to return beginning/ending dates.<BR>
</b><BR><b>param:</b> string $string tag to decode.<br>
<b>return:</b> stdClass beginning and/or ending is returned, in unix time, zero indicating not specified.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_role_mappings" onClick="logFunction('load_role_mappings', 'lib.php.source.html#l731')" href="lib.php.source.html#l731">load_role_mappings</a>()&nbsp;&nbsp;
<a href="../../_functions/load_role_mappings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load the role mappings (from the config), so we can easily refer to<BR>
how an IMS-E role corresponds to a Moodle role<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_course_mappings" onClick="logFunction('load_course_mappings', 'lib.php.source.html#l747')" href="lib.php.source.html#l747">load_course_mappings</a>()&nbsp;&nbsp;
<a href="../../_functions/load_course_mappings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load the name mappings (from the config), so we can easily refer to<BR>
how an IMS-E course properties corresponds to a Moodle course properties<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_imsenterprise_allow_group_member_remove" onClick="logFunction('enrol_imsenterprise_allow_group_member_remove', 'lib.php.source.html#l763')" href="lib.php.source.html#l763">enrol_imsenterprise_allow_group_member_remove</a>(<a href="../../_variables/itemid.html">$itemid</a>, <a href="../../_variables/groupid.html">$groupid</a>, <a href="../../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../../_functions/enrol_imsenterprise_allow_group_member_remove.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called whenever anybody tries (from the normal interface) to remove a group<BR>
member which is registered as being created by this component. (Not called<BR>
when deleting an entire group or course at once.)<BR>
</b><BR><b>param:</b> int $itemid Item ID that was stored in the group_members entry<br>
<b>param:</b> int $groupid Group ID<br>
<b>param:</b> int $userid User ID being removed from group<br>
<b>return:</b> bool True if the remove is permitted, false to give an error<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default_category_id" onClick="logFunction('get_default_category_id', 'lib.php.source.html#l777')" href="lib.php.source.html#l777">get_default_category_id</a>()&nbsp;&nbsp;
<a href="../../_functions/get_default_category_id.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the default category id (often known as 'Miscellaneous'),<BR>
statically cached to avoid multiple DB lookups on big imports.<BR>
</b><BR><b>return:</b> int id of default category.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_delete_instance" onClick="logFunction('can_delete_instance', 'lib.php.source.html#l797')" href="lib.php.source.html#l797">can_delete_instance</a>(<a href="../../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../../_functions/can_delete_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is it possible to delete enrol instance via standard UI?<BR>
</b><BR><b>param:</b> object $instance<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_hide_show_instance" onClick="logFunction('can_hide_show_instance', 'lib.php.source.html#l808')" href="lib.php.source.html#l808">can_hide_show_instance</a>(<a href="../../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../../_functions/can_hide_show_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is it possible to hide/show enrol instance via standard UI?<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
