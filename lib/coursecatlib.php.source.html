<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/coursecatlib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='coursecatlib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="coursecatlib.php.html">coursecatlib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="coursecatlib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="coursecatlib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Contains class coursecat reponsible for course category operations</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @subpackage course</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2013 Marina Glancy</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Class to store, cache, render and manage course category</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @property-read int $id</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @property-read string $name</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @property-read string $idnumber</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @property-read string $description</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @property-read int $descriptionformat</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @property-read int $parent</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @property-read int $sortorder</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @property-read int $coursecount</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @property-read int $visible</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * @property-read int $visibleold</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * @property-read int $timemodified</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * @property-read int $depth</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * @property-read string $path</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * @property-read string $theme</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> *</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * @package    core</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * @subpackage course</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * @copyright  2013 Marina Glancy</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> */</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a> <span class="keyword">implements</span> <a class="class" onClick="logClass('renderable')" href="../_classes/renderable.html" onMouseOver="classPopup(event,'renderable')">renderable</a>, cacheable_object, IteratorAggregate {
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">    /** @var coursecat stores pseudo category with id=0. Use coursecat::get(0) to retrieve */</span>
<a name="l53"><span class="linenum">  53</span></a>      protected static <a class="var it36424" onMouseOver="hilite(36424)" onMouseOut="lolite()" onClick="logVariable('coursecat0')" href="../_variables/coursecat0.html">$coursecat0</a>;
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">    /** @var array list of all fields and their short name and default value for caching */</span>
<a name="l56"><span class="linenum">  56</span></a>      protected static <a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a> = array(
<a name="l57"><span class="linenum">  57</span></a>          'id' =&gt; array('id', 0),
<a name="l58"><span class="linenum">  58</span></a>          'name' =&gt; array('na', ''),
<a name="l59"><span class="linenum">  59</span></a>          'idnumber' =&gt; array('in', null),
<a name="l60"><span class="linenum">  60</span></a>          'description' =&gt; null, // Not cached.
<a name="l61"><span class="linenum">  61</span></a>          'descriptionformat' =&gt; null, // Not cached.
<a name="l62"><span class="linenum">  62</span></a>          'parent' =&gt; array('pa', 0),
<a name="l63"><span class="linenum">  63</span></a>          'sortorder' =&gt; array('so', 0),
<a name="l64"><span class="linenum">  64</span></a>          'coursecount' =&gt; array('cc', 0),
<a name="l65"><span class="linenum">  65</span></a>          'visible' =&gt; array('vi', 1),
<a name="l66"><span class="linenum">  66</span></a>          'visibleold' =&gt; null, // Not cached.
<a name="l67"><span class="linenum">  67</span></a>          'timemodified' =&gt; null, // Not cached.
<a name="l68"><span class="linenum">  68</span></a>          'depth' =&gt; array('dh', 1),
<a name="l69"><span class="linenum">  69</span></a>          'path' =&gt; array('ph', null),
<a name="l70"><span class="linenum">  70</span></a>          'theme' =&gt; null, // Not cached.
<a name="l71"><span class="linenum">  71</span></a>      );
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">    /** @var int */</span>
<a name="l74"><span class="linenum">  74</span></a>      protected <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">    /** @var string */</span>
<a name="l77"><span class="linenum">  77</span></a>      protected <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = '';
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">    /** @var string */</span>
<a name="l80"><span class="linenum">  80</span></a>      protected <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a> = null;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">    /** @var string */</span>
<a name="l83"><span class="linenum">  83</span></a>      protected <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = false;
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">    /** @var int */</span>
<a name="l86"><span class="linenum">  86</span></a>      protected <a class="var it2649" onMouseOver="hilite(2649)" onMouseOut="lolite()" onClick="logVariable('descriptionformat')" href="../_variables/descriptionformat.html">$descriptionformat</a> = false;
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">    /** @var int */</span>
<a name="l89"><span class="linenum">  89</span></a>      protected <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = 0;
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    /** @var int */</span>
<a name="l92"><span class="linenum">  92</span></a>      protected <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = 0;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    /** @var int */</span>
<a name="l95"><span class="linenum">  95</span></a>      protected <a class="var it3683" onMouseOver="hilite(3683)" onMouseOut="lolite()" onClick="logVariable('coursecount')" href="../_variables/coursecount.html">$coursecount</a> = false;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">    /** @var int */</span>
<a name="l98"><span class="linenum">  98</span></a>      protected <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a> = 1;
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">    /** @var int */</span>
<a name="l101"><span class="linenum"> 101</span></a>      protected <a class="var it12503" onMouseOver="hilite(12503)" onMouseOut="lolite()" onClick="logVariable('visibleold')" href="../_variables/visibleold.html">$visibleold</a> = false;
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">    /** @var int */</span>
<a name="l104"><span class="linenum"> 104</span></a>      protected <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../_variables/timemodified.html">$timemodified</a> = false;
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">    /** @var int */</span>
<a name="l107"><span class="linenum"> 107</span></a>      protected <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0;
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">    /** @var string */</span>
<a name="l110"><span class="linenum"> 110</span></a>      protected <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = '';
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">    /** @var string */</span>
<a name="l113"><span class="linenum"> 113</span></a>      protected <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('theme')" href="../_variables/theme.html">$theme</a> = false;
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">    /** @var bool */</span>
<a name="l116"><span class="linenum"> 116</span></a>      protected <a class="var it36426" onMouseOver="hilite(36426)" onMouseOut="lolite()" onClick="logVariable('fromcache')" href="../_variables/fromcache.html">$fromcache</a>;
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">    /** @var bool */</span>
<a name="l119"><span class="linenum"> 119</span></a>      protected <a class="var it36427" onMouseOver="hilite(36427)" onMouseOut="lolite()" onClick="logVariable('hasmanagecapability')" href="../_variables/hasmanagecapability.html">$hasmanagecapability</a> = null;
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>      <span class="comment">/**</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * Magic setter method, we do not want anybody to modify properties from the outside</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     *</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @param string $name</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     */</span>
<a name="l127"><span class="linenum"> 127</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l128"><span class="linenum"> 128</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Can not change coursecat instance properties!', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l129"><span class="linenum"> 129</span></a>      }
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>      <span class="comment">/**</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     * Magic method getter, redirects to read only values. Queries from DB the fields that were not cached</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     *</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     * @param string $name</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * @return mixed</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     */</span>
<a name="l137"><span class="linenum"> 137</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l138"><span class="linenum"> 138</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l139"><span class="linenum"> 139</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a>)) {
<a name="l140"><span class="linenum"> 140</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> === false) {
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">                // Property was not retrieved from DB, retrieve all not retrieved fields.</span>
<a name="l142"><span class="linenum"> 142</span></a>                  <a class="var it36428" onMouseOver="hilite(36428)" onMouseOut="lolite()" onClick="logVariable('notretrievedfields')" href="../_variables/notretrievedfields.html">$notretrievedfields</a> = array_diff_key(self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a>, <a class="phpfunction" onClick="logFunction('array_filter')" href="../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a>));
<a name="l143"><span class="linenum"> 143</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>),
<a name="l144"><span class="linenum"> 144</span></a>                          <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36428" onMouseOver="hilite(36428)" onMouseOut="lolite()" onClick="logVariable('notretrievedfields')" href="../_variables/notretrievedfields.html">$notretrievedfields</a>)), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l145"><span class="linenum"> 145</span></a>                  foreach (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l146"><span class="linenum"> 146</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l147"><span class="linenum"> 147</span></a>                  }
<a name="l148"><span class="linenum"> 148</span></a>              }
<a name="l149"><span class="linenum"> 149</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l150"><span class="linenum"> 150</span></a>          }
<a name="l151"><span class="linenum"> 151</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid coursecat property accessed! '.<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l152"><span class="linenum"> 152</span></a>          return null;
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>      <span class="comment">/**</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * Full support for isset on our magic read only properties.</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     *</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     * @param string $name</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     * @return bool</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">     */</span>
<a name="l161"><span class="linenum"> 161</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l162"><span class="linenum"> 162</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a>)) {
<a name="l163"><span class="linenum"> 163</span></a>              return isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l164"><span class="linenum"> 164</span></a>          }
<a name="l165"><span class="linenum"> 165</span></a>          return false;
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>      <span class="comment">/**</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * All properties are read only, sorry.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     *</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * @param string $name</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     */</span>
<a name="l173"><span class="linenum"> 173</span></a>      public function <a class="function" onClick="logFunction('__unset')" href="../_functions/__unset.html" onMouseOver="funcPopup(event,'__unset')">__unset</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l174"><span class="linenum"> 174</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Can not unset coursecat instance properties!', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l175"><span class="linenum"> 175</span></a>      }
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>      <span class="comment">/**</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * Create an iterator because magic vars can't be seen by 'foreach'.</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     *</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * implementing method from interface IteratorAggregate</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     *</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @return ArrayIterator</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      public function <a class="function" onClick="logFunction('getIterator')" href="../_functions/getiterator.html" onMouseOver="funcPopup(event,'getiterator')">getIterator</a>() {
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a> = array();
<a name="l186"><span class="linenum"> 186</span></a>          foreach (self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a> as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> =&gt; <a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../_variables/unused.html">$unused</a>) {
<a name="l187"><span class="linenum"> 187</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> !== false) {
<a name="l188"><span class="linenum"> 188</span></a>                  <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>;
<a name="l189"><span class="linenum"> 189</span></a>              }
<a name="l190"><span class="linenum"> 190</span></a>          }
<a name="l191"><span class="linenum"> 191</span></a>          return new ArrayIterator(<a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>);
<a name="l192"><span class="linenum"> 192</span></a>      }
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      <span class="comment">/**</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     * Constructor</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">     *</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * Constructor is protected, use coursecat::get($id) to retrieve category</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     *</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     * @param stdClass $record record from DB (may not contain all fields)</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * @param bool $fromcache whether it is being restored from cache</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     */</span>
<a name="l202"><span class="linenum"> 202</span></a>      protected function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(stdClass <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>, <a class="var it36426" onMouseOver="hilite(36426)" onMouseOut="lolite()" onClick="logVariable('fromcache')" href="../_variables/fromcache.html">$fromcache</a> = false) {
<a name="l203"><span class="linenum"> 203</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l204"><span class="linenum"> 204</span></a>          foreach (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a>) {
<a name="l205"><span class="linenum"> 205</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a>)) {
<a name="l206"><span class="linenum"> 206</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a>;
<a name="l207"><span class="linenum"> 207</span></a>              }
<a name="l208"><span class="linenum"> 208</span></a>          }
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fromcache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/fromcache.html">fromcache</a> = <a class="var it36426" onMouseOver="hilite(36426)" onMouseOut="lolite()" onClick="logVariable('fromcache')" href="../_variables/fromcache.html">$fromcache</a>;
<a name="l210"><span class="linenum"> 210</span></a>      }
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      <span class="comment">/**</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * Returns coursecat object for requested category</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     *</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * If category is not visible to user it is treated as non existing</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     * unless $alwaysreturnhidden is set to true</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     *</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * If id is 0, the pseudo object for root category is returned (convenient</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * for calling other functions such as get_children())</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     *</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * @param int $id category id</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * @param int $strictness whether to throw an exception (MUST_EXIST) or</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     *     return null (IGNORE_MISSING) in case the category is not found or</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     *     not visible to current user</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     * @param bool $alwaysreturnhidden set to true if you want an object to be</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     *     returned even if this category is not visible to the current user</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     *     (category is hidden and user does not have</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     *     'moodle/category:viewhiddencategories' capability). Use with care!</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @return null|coursecat</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     */</span>
<a name="l232"><span class="linenum"> 232</span></a>      public static function <a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../_variables/strictness.html">$strictness</a> = <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, <a class="var it36429" onMouseOver="hilite(36429)" onMouseOut="lolite()" onClick="logVariable('alwaysreturnhidden')" href="../_variables/alwaysreturnhidden.html">$alwaysreturnhidden</a> = false) {
<a name="l233"><span class="linenum"> 233</span></a>          if (!<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l234"><span class="linenum"> 234</span></a>              if (!isset(self::<a class="var it36424" onMouseOver="hilite(36424)" onMouseOut="lolite()" onClick="logVariable('coursecat0')" href="../_variables/coursecat0.html">$coursecat0</a>)) {
<a name="l235"><span class="linenum"> 235</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = new stdClass();
<a name="l236"><span class="linenum"> 236</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = 0;
<a name="l237"><span class="linenum"> 237</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 1;
<a name="l238"><span class="linenum"> 238</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('depth')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a> = 0;
<a name="l239"><span class="linenum"> 239</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('path')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/path.html">path</a> = '';
<a name="l240"><span class="linenum"> 240</span></a>                  self::<a class="var it36424" onMouseOver="hilite(36424)" onMouseOut="lolite()" onClick="logVariable('coursecat0')" href="../_variables/coursecat0.html">$coursecat0</a> = <span class="keyword">new </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l241"><span class="linenum"> 241</span></a>              }
<a name="l242"><span class="linenum"> 242</span></a>              return self::<a class="var it36424" onMouseOver="hilite(36424)" onMouseOut="lolite()" onClick="logVariable('coursecat0')" href="../_variables/coursecat0.html">$coursecat0</a>;
<a name="l243"><span class="linenum"> 243</span></a>          }
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it36430" onMouseOver="hilite(36430)" onMouseOut="lolite()" onClick="logVariable('coursecatrecordcache')" href="../_variables/coursecatrecordcache.html">$coursecatrecordcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecatrecords');
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a> = <a class="var it36430" onMouseOver="hilite(36430)" onMouseOut="lolite()" onClick="logVariable('coursecatrecordcache')" href="../_variables/coursecatrecordcache.html">$coursecatrecordcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l246"><span class="linenum"> 246</span></a>          if (<a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a> === false) {
<a name="l247"><span class="linenum"> 247</span></a>              if (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('cc.id = :id', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>))) {
<a name="l248"><span class="linenum"> 248</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l249"><span class="linenum"> 249</span></a>                  <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a> = <span class="keyword">new </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">                // Store in cache.</span>
<a name="l251"><span class="linenum"> 251</span></a>                  <a class="var it36430" onMouseOver="hilite(36430)" onMouseOut="lolite()" onClick="logVariable('coursecatrecordcache')" href="../_variables/coursecatrecordcache.html">$coursecatrecordcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a>);
<a name="l252"><span class="linenum"> 252</span></a>              }
<a name="l253"><span class="linenum"> 253</span></a>          }
<a name="l254"><span class="linenum"> 254</span></a>          if (<a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a> &amp;&amp; (<a class="var it36429" onMouseOver="hilite(36429)" onMouseOut="lolite()" onClick="logVariable('alwaysreturnhidden')" href="../_variables/alwaysreturnhidden.html">$alwaysreturnhidden</a> || <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a>-&gt;<a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>())) {
<a name="l255"><span class="linenum"> 255</span></a>              return <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a>;
<a name="l256"><span class="linenum"> 256</span></a>          } else {
<a name="l257"><span class="linenum"> 257</span></a>              if (<a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../_variables/strictness.html">$strictness</a> == <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>) {
<a name="l258"><span class="linenum"> 258</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('unknowncategory');
<a name="l259"><span class="linenum"> 259</span></a>              }
<a name="l260"><span class="linenum"> 260</span></a>          }
<a name="l261"><span class="linenum"> 261</span></a>          return null;
<a name="l262"><span class="linenum"> 262</span></a>      }
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>      <span class="comment">/**</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     * Load many coursecat objects.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     *</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * @global moodle_database $DB</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * @param array $ids An array of category ID's to load.</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * @return coursecat[]</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     */</span>
<a name="l271"><span class="linenum"> 271</span></a>      public static function <a class="function" onClick="logFunction('get_many')" href="../_functions/get_many.html" onMouseOver="funcPopup(event,'get_many')">get_many</a>(array <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>) {
<a name="l272"><span class="linenum"> 272</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it36430" onMouseOver="hilite(36430)" onMouseOut="lolite()" onClick="logVariable('coursecatrecordcache')" href="../_variables/coursecatrecordcache.html">$coursecatrecordcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecatrecords');
<a name="l274"><span class="linenum"> 274</span></a>          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it36430" onMouseOver="hilite(36430)" onMouseOut="lolite()" onClick="logVariable('coursecatrecordcache')" href="../_variables/coursecatrecordcache.html">$coursecatrecordcache</a>-&gt;<a class="function" onClick="logFunction('get_many')" href="../_functions/get_many.html" onMouseOver="funcPopup(event,'get_many')">get_many</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>);
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it23302" onMouseOver="hilite(23302)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a> = array();
<a name="l276"><span class="linenum"> 276</span></a>          foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l277"><span class="linenum"> 277</span></a>              if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> === false) {
<a name="l278"><span class="linenum"> 278</span></a>                  <a class="var it23302" onMouseOver="hilite(23302)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a>[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l279"><span class="linenum"> 279</span></a>              }
<a name="l280"><span class="linenum"> 280</span></a>          }
<a name="l281"><span class="linenum"> 281</span></a>          if (!empty(<a class="var it23302" onMouseOver="hilite(23302)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a>)) {
<a name="l282"><span class="linenum"> 282</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it23302" onMouseOver="hilite(23302)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l283"><span class="linenum"> 283</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('cc.id '.<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it36431" onMouseOver="hilite(36431)" onMouseOut="lolite()" onClick="logVariable('toset')" href="../_variables/toset.html">$toset</a> = array();
<a name="l285"><span class="linenum"> 285</span></a>              foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l286"><span class="linenum"> 286</span></a>                  <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l287"><span class="linenum"> 287</span></a>                  <a class="var it36431" onMouseOver="hilite(36431)" onMouseOut="lolite()" onClick="logVariable('toset')" href="../_variables/toset.html">$toset</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l288"><span class="linenum"> 288</span></a>              }
<a name="l289"><span class="linenum"> 289</span></a>              <a class="var it36430" onMouseOver="hilite(36430)" onMouseOut="lolite()" onClick="logVariable('coursecatrecordcache')" href="../_variables/coursecatrecordcache.html">$coursecatrecordcache</a>-&gt;<a class="function" onClick="logFunction('set_many')" href="../_functions/set_many.html" onMouseOver="funcPopup(event,'set_many')">set_many</a>(<a class="var it36431" onMouseOver="hilite(36431)" onMouseOut="lolite()" onClick="logVariable('toset')" href="../_variables/toset.html">$toset</a>);
<a name="l290"><span class="linenum"> 290</span></a>          }
<a name="l291"><span class="linenum"> 291</span></a>          return <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>;
<a name="l292"><span class="linenum"> 292</span></a>      }
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      <span class="comment">/**</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     * Returns the first found category</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     *</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     * Note that if there are no categories visible to the current user on the first level,</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     * the invisible category may be returned</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     *</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     * @return coursecat</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     */</span>
<a name="l302"><span class="linenum"> 302</span></a>      public static function <a class="function" onClick="logFunction('get_default')" href="../_functions/get_default.html" onMouseOver="funcPopup(event,'get_default')">get_default</a>() {
<a name="l303"><span class="linenum"> 303</span></a>          if (<a class="var it36432" onMouseOver="hilite(36432)" onMouseOut="lolite()" onClick="logVariable('visiblechildren')" href="../_variables/visiblechildren.html">$visiblechildren</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0)-&gt;<a class="function" onClick="logFunction('get_children')" href="../_functions/get_children.html" onMouseOver="funcPopup(event,'get_children')">get_children</a>()) {
<a name="l304"><span class="linenum"> 304</span></a>              <a class="var it36433" onMouseOver="hilite(36433)" onMouseOut="lolite()" onClick="logVariable('defcategory')" href="../_variables/defcategory.html">$defcategory</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it36432" onMouseOver="hilite(36432)" onMouseOut="lolite()" onClick="logVariable('visiblechildren')" href="../_variables/visiblechildren.html">$visiblechildren</a>);
<a name="l305"><span class="linenum"> 305</span></a>          } else {
<a name="l306"><span class="linenum"> 306</span></a>              <a class="var it36434" onMouseOver="hilite(36434)" onMouseOut="lolite()" onClick="logVariable('toplevelcategories')" href="../_variables/toplevelcategories.html">$toplevelcategories</a> = self::<a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>(0);
<a name="l307"><span class="linenum"> 307</span></a>              <a class="var it36435" onMouseOver="hilite(36435)" onMouseOut="lolite()" onClick="logVariable('defcategoryid')" href="../_variables/defcategoryid.html">$defcategoryid</a> = <a class="var it36434" onMouseOver="hilite(36434)" onMouseOut="lolite()" onClick="logVariable('toplevelcategories')" href="../_variables/toplevelcategories.html">$toplevelcategories</a>[0];
<a name="l308"><span class="linenum"> 308</span></a>              <a class="var it36433" onMouseOver="hilite(36433)" onMouseOut="lolite()" onClick="logVariable('defcategory')" href="../_variables/defcategory.html">$defcategory</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36435" onMouseOver="hilite(36435)" onMouseOut="lolite()" onClick="logVariable('defcategoryid')" href="../_variables/defcategoryid.html">$defcategoryid</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l309"><span class="linenum"> 309</span></a>          }
<a name="l310"><span class="linenum"> 310</span></a>          return <a class="var it36433" onMouseOver="hilite(36433)" onMouseOut="lolite()" onClick="logVariable('defcategory')" href="../_variables/defcategory.html">$defcategory</a>;
<a name="l311"><span class="linenum"> 311</span></a>      }
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>      <span class="comment">/**</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     * Restores the object after it has been externally modified in DB for example</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     * during {@link fix_course_sortorder()}</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     */</span>
<a name="l317"><span class="linenum"> 317</span></a>      protected function <a class="function" onClick="logFunction('restore')" href="../_functions/restore.html" onMouseOver="funcPopup(event,'restore')">restore</a>() {
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">        // Update all fields in the current object.</span>
<a name="l319"><span class="linenum"> 319</span></a>          <a class="var it6388" onMouseOver="hilite(6388)" onMouseOut="lolite()" onClick="logVariable('newrecord')" href="../_variables/newrecord.html">$newrecord</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l320"><span class="linenum"> 320</span></a>          foreach (self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../_variables/unused.html">$unused</a>) {
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it6388" onMouseOver="hilite(6388)" onMouseOut="lolite()" onClick="logVariable('newrecord')" href="../_variables/newrecord.html">$newrecord</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l322"><span class="linenum"> 322</span></a>          }
<a name="l323"><span class="linenum"> 323</span></a>      }
<a name="l324"><span class="linenum"> 324</span></a>  
<a name="l325"><span class="linenum"> 325</span></a>      <span class="comment">/**</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     * Creates a new category either from form data or from raw data</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">     *</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">     * Please note that this function does not verify access control.</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">     *</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     * Exception is thrown if name is missing or idnumber is duplicating another one in the system.</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     *</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     * Category visibility is inherited from parent unless $data-&gt;visible = 0 is specified</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     *</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * @param array|stdClass $data</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     * @param array $editoroptions if specified, the data is considered to be</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     *    form data and file_postupdate_standard_editor() is being called to</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     *    process images in description.</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     * @return coursecat</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     */</span>
<a name="l341"><span class="linenum"> 341</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = null) {
<a name="l342"><span class="linenum"> 342</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l343"><span class="linenum"> 343</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>;
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = new stdClass();
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l347"><span class="linenum"> 347</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('description')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = '';
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">        // Copy all description* fields regardless of whether this is form data or direct field update.</span>
<a name="l349"><span class="linenum"> 349</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l350"><span class="linenum"> 350</span></a>              if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/^description/&quot;, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l351"><span class="linenum"> 351</span></a>                  <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l352"><span class="linenum"> 352</span></a>              }
<a name="l353"><span class="linenum"> 353</span></a>          }
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l356"><span class="linenum"> 356</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('categorynamerequired');
<a name="l357"><span class="linenum"> 357</span></a>          }
<a name="l358"><span class="linenum"> 358</span></a>          if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) &gt; 255) {
<a name="l359"><span class="linenum"> 359</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('categorytoolong');
<a name="l360"><span class="linenum"> 360</span></a>          }
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('name')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">        // Validate and set idnumber.</span>
<a name="l364"><span class="linenum"> 364</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l365"><span class="linenum"> 365</span></a>              if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>) &gt; 100) {
<a name="l366"><span class="linenum"> 366</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('idnumbertoolong');
<a name="l367"><span class="linenum"> 367</span></a>              }
<a name="l368"><span class="linenum"> 368</span></a>              if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course_categories', array('idnumber' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>))) {
<a name="l369"><span class="linenum"> 369</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('categoryidnumbertaken');
<a name="l370"><span class="linenum"> 370</span></a>              }
<a name="l371"><span class="linenum"> 371</span></a>          }
<a name="l372"><span class="linenum"> 372</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l373"><span class="linenum"> 373</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('idnumber')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>;
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('theme')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>) &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcategorythemes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowcategorythemes.html">allowcategorythemes</a>)) {
<a name="l377"><span class="linenum"> 377</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('theme')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('theme')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>;
<a name="l378"><span class="linenum"> 378</span></a>          }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parent')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>)) {
<a name="l381"><span class="linenum"> 381</span></a>              <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0);
<a name="l382"><span class="linenum"> 382</span></a>          } else {
<a name="l383"><span class="linenum"> 383</span></a>              <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parent')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l384"><span class="linenum"> 384</span></a>          }
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('parent')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('id')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('depth')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a> = <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('depth')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a> + 1;
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">        // By default category is visible, unless visible = 0 is specified or parent category is hidden.</span>
<a name="l389"><span class="linenum"> 389</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">            // Create a hidden category.</span>
<a name="l391"><span class="linenum"> 391</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('visible')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('visibleold')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = 0;
<a name="l392"><span class="linenum"> 392</span></a>          } else {
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">            // Create a category that inherits visibility from parent.</span>
<a name="l394"><span class="linenum"> 394</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('visible')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('visible')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">            // In case parent is hidden, when it changes visibility this new subcategory will automatically become visible too.</span>
<a name="l396"><span class="linenum"> 396</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('visibleold')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = 1;
<a name="l397"><span class="linenum"> 397</span></a>          }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('sortorder')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = 0;
<a name="l400"><span class="linenum"> 400</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('course_categories', <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>);
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">        // Update path (only possible after we know the category id.</span>
<a name="l405"><span class="linenum"> 405</span></a>          <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('path')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../_variables/path.html">path</a> . '/' . <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'path', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, array('id' =&gt; <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">        // We should mark the context as dirty.</span>
<a name="l409"><span class="linenum"> 409</span></a>          <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)-&gt;<a class="function" onClick="logFunction('mark_dirty')" href="../_functions/mark_dirty.html" onMouseOver="funcPopup(event,'mark_dirty')">mark_dirty</a>();
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>          <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">        // If this is data from form results, save embedded files and update description.</span>
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it3114" onMouseOver="hilite(3114)" onMouseOut="lolite()" onClick="logVariable('categorycontext')" href="../_variables/categorycontext.html">$categorycontext</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l415"><span class="linenum"> 415</span></a>          if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l416"><span class="linenum"> 416</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>, 'description', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it3114" onMouseOver="hilite(3114)" onMouseOut="lolite()" onClick="logVariable('categorycontext')" href="../_variables/categorycontext.html">$categorycontext</a>,
<a name="l417"><span class="linenum"> 417</span></a>                                                             'coursecat', 'description', 0);
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">            // Update only fields description and descriptionformat.</span>
<a name="l420"><span class="linenum"> 420</span></a>              <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a> = new stdClass();
<a name="l421"><span class="linenum"> 421</span></a>              <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>-&gt;<a onClick="logVariable('id')" class="var it44226" onMouseOver="hilite(44226)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l422"><span class="linenum"> 422</span></a>              <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>-&gt;<a onClick="logVariable('description')" class="var it44226" onMouseOver="hilite(44226)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('description')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/description.html">description</a>;
<a name="l423"><span class="linenum"> 423</span></a>              <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it44226" onMouseOver="hilite(44226)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a> = <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a>;
<a name="l424"><span class="linenum"> 424</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course_categories', <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>);
<a name="l425"><span class="linenum"> 425</span></a>          }
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_created')" href="../_classes/course_category_created.html" onMouseOver="classPopup(event,'course_category_created')">course_category_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l428"><span class="linenum"> 428</span></a>              'objectid' =&gt; <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l429"><span class="linenum"> 429</span></a>              'context' =&gt; <a class="var it3114" onMouseOver="hilite(3114)" onMouseOut="lolite()" onClick="logVariable('categorycontext')" href="../_variables/categorycontext.html">$categorycontext</a>
<a name="l430"><span class="linenum"> 430</span></a>          ));
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l434"><span class="linenum"> 434</span></a>  
<a name="l435"><span class="linenum"> 435</span></a>          return self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l436"><span class="linenum"> 436</span></a>      }
<a name="l437"><span class="linenum"> 437</span></a>  
<a name="l438"><span class="linenum"> 438</span></a>      <span class="comment">/**</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * Updates the record with either form data or raw data</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     *</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     * Please note that this function does not verify access control.</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     *</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">     * This function calls coursecat::change_parent_raw if field 'parent' is updated.</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     * It also calls coursecat::hide_raw or coursecat::show_raw if 'visible' is updated.</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * Visibility is changed first and then parent is changed. This means that</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     * if parent category is hidden, the current category will become hidden</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * too and it may overwrite whatever was set in field 'visible'.</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     *</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * Note that fields 'path' and 'depth' can not be updated manually</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     * Also coursecat::update() can not directly update the field 'sortoder'</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     *</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * @param array|stdClass $data</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     * @param array $editoroptions if specified, the data is considered to be</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     *    form data and file_postupdate_standard_editor() is being called to</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     *    process images in description.</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     */</span>
<a name="l458"><span class="linenum"> 458</span></a>      public function <a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = null) {
<a name="l459"><span class="linenum"> 459</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l460"><span class="linenum"> 460</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">            // There is no actual DB record associated with root category.</span>
<a name="l462"><span class="linenum"> 462</span></a>              return;
<a name="l463"><span class="linenum"> 463</span></a>          }
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>;
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = new stdClass();
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">        // Copy all description* fields regardless of whether this is form data or direct field update.</span>
<a name="l470"><span class="linenum"> 470</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l471"><span class="linenum"> 471</span></a>              if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/^description/&quot;, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l472"><span class="linenum"> 472</span></a>                  <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l473"><span class="linenum"> 473</span></a>              }
<a name="l474"><span class="linenum"> 474</span></a>          }
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) &amp;&amp; empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l477"><span class="linenum"> 477</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('categorynamerequired');
<a name="l478"><span class="linenum"> 478</span></a>          }
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a> !== <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) {
<a name="l481"><span class="linenum"> 481</span></a>              if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) &gt; 255) {
<a name="l482"><span class="linenum"> 482</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('categorytoolong');
<a name="l483"><span class="linenum"> 483</span></a>              }
<a name="l484"><span class="linenum"> 484</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('name')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l485"><span class="linenum"> 485</span></a>          }
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>) {
<a name="l488"><span class="linenum"> 488</span></a>              if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>) &gt; 100) {
<a name="l489"><span class="linenum"> 489</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('idnumbertoolong');
<a name="l490"><span class="linenum"> 490</span></a>              }
<a name="l491"><span class="linenum"> 491</span></a>              if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course_categories', array('idnumber' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>))) {
<a name="l492"><span class="linenum"> 492</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('categoryidnumbertaken');
<a name="l493"><span class="linenum"> 493</span></a>              }
<a name="l494"><span class="linenum"> 494</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('idnumber')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>;
<a name="l495"><span class="linenum"> 495</span></a>          }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('theme')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>) &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcategorythemes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowcategorythemes.html">allowcategorythemes</a>)) {
<a name="l498"><span class="linenum"> 498</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('theme')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('theme')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>;
<a name="l499"><span class="linenum"> 499</span></a>          }
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a> = false;
<a name="l502"><span class="linenum"> 502</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l503"><span class="linenum"> 503</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l504"><span class="linenum"> 504</span></a>                  <a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_raw')" href="../_functions/show_raw.html" onMouseOver="funcPopup(event,'show_raw')">show_raw</a>();
<a name="l505"><span class="linenum"> 505</span></a>              } else {
<a name="l506"><span class="linenum"> 506</span></a>                  <a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('hide_raw')" href="../_functions/hide_raw.html" onMouseOver="funcPopup(event,'hide_raw')">hide_raw</a>(0);
<a name="l507"><span class="linenum"> 507</span></a>              }
<a name="l508"><span class="linenum"> 508</span></a>          }
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parent')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parent')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>) {
<a name="l511"><span class="linenum"> 511</span></a>              if (<a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a>) {
<a name="l512"><span class="linenum"> 512</span></a>                  <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l513"><span class="linenum"> 513</span></a>              }
<a name="l514"><span class="linenum"> 514</span></a>              <a class="var it3401" onMouseOver="hilite(3401)" onMouseOut="lolite()" onClick="logVariable('parentcat')" href="../_variables/parentcat.html">$parentcat</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parent')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l515"><span class="linenum"> 515</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('change_parent_raw')" href="../_functions/change_parent_raw.html" onMouseOver="funcPopup(event,'change_parent_raw')">change_parent_raw</a>(<a class="var it3401" onMouseOver="hilite(3401)" onMouseOut="lolite()" onClick="logVariable('parentcat')" href="../_variables/parentcat.html">$parentcat</a>);
<a name="l516"><span class="linenum"> 516</span></a>              <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l517"><span class="linenum"> 517</span></a>          }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>          <a class="var it3114" onMouseOver="hilite(3114)" onMouseOut="lolite()" onClick="logVariable('categorycontext')" href="../_variables/categorycontext.html">$categorycontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l522"><span class="linenum"> 522</span></a>          if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l523"><span class="linenum"> 523</span></a>              <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>, 'description', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it3114" onMouseOver="hilite(3114)" onMouseOut="lolite()" onClick="logVariable('categorycontext')" href="../_variables/categorycontext.html">$categorycontext</a>,
<a name="l524"><span class="linenum"> 524</span></a>                                                             'coursecat', 'description', 0);
<a name="l525"><span class="linenum"> 525</span></a>          }
<a name="l526"><span class="linenum"> 526</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('course_categories', <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>);
<a name="l527"><span class="linenum"> 527</span></a>  
<a name="l528"><span class="linenum"> 528</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_updated')" href="../_classes/course_category_updated.html" onMouseOver="classPopup(event,'course_category_updated')">course_category_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l529"><span class="linenum"> 529</span></a>              'objectid' =&gt; <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l530"><span class="linenum"> 530</span></a>              'context' =&gt; <a class="var it3114" onMouseOver="hilite(3114)" onMouseOut="lolite()" onClick="logVariable('categorycontext')" href="../_variables/categorycontext.html">$categorycontext</a>
<a name="l531"><span class="linenum"> 531</span></a>          ));
<a name="l532"><span class="linenum"> 532</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>          <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">        // Purge cache even if fix_course_sortorder() did not do it.</span>
<a name="l536"><span class="linenum"> 536</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">        // Update all fields in the current object.</span>
<a name="l539"><span class="linenum"> 539</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('restore')" href="../_functions/restore.html" onMouseOver="funcPopup(event,'restore')">restore</a>();
<a name="l540"><span class="linenum"> 540</span></a>      }
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>      <span class="comment">/**</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">     * Checks if this course category is visible to current user</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     *</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     * Please note that methods coursecat::get (without 3rd argumet),</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * coursecat::get_children(), etc. return only visible categories so it is</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     * usually not needed to call this function outside of this class</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">     *</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">     * @return bool</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     */</span>
<a name="l551"><span class="linenum"> 551</span></a>      public function <a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>() {
<a name="l552"><span class="linenum"> 552</span></a>          return !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> ||
<a name="l553"><span class="linenum"> 553</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:viewhiddencategories', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l554"><span class="linenum"> 554</span></a>      }
<a name="l555"><span class="linenum"> 555</span></a>  
<a name="l556"><span class="linenum"> 556</span></a>      <span class="comment">/**</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">     * Returns the complete corresponding record from DB table course_categories</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">     *</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">     * Mostly used in deprecated functions</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">     *</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">     */</span>
<a name="l563"><span class="linenum"> 563</span></a>      public function <a class="function" onClick="logFunction('get_db_record')" href="../_functions/get_db_record.html" onMouseOver="funcPopup(event,'get_db_record')">get_db_record</a>() {
<a name="l564"><span class="linenum"> 564</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l565"><span class="linenum"> 565</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l566"><span class="linenum"> 566</span></a>              return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>;
<a name="l567"><span class="linenum"> 567</span></a>          } else {
<a name="l568"><span class="linenum"> 568</span></a>              return (object)<a class="function" onClick="logFunction('convert_to_array')" href="../_functions/convert_to_array.html" onMouseOver="funcPopup(event,'convert_to_array')">convert_to_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      <span class="comment">/**</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * Returns the entry from categories tree and makes sure the application-level tree cache is built</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     *</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * The following keys can be requested:</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     *</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     * 'countall' - total number of categories in the system (always present)</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * 0 - array of ids of top-level categories (always present)</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * '0i' - array of ids of top-level categories that have visible=0 (always present but may be empty array)</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * $id (int) - array of ids of categories that are direct children of category with id $id. If</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     *   category with id $id does not exist returns false. If category has no children returns empty array</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * $id.'i' - array of ids of children categories that have visible=0</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     *</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     * @param int|string $id</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">     * @return mixed</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">     */</span>
<a name="l587"><span class="linenum"> 587</span></a>      protected static function <a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l588"><span class="linenum"> 588</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l589"><span class="linenum"> 589</span></a>          <a class="var it36436" onMouseOver="hilite(36436)" onMouseOut="lolite()" onClick="logVariable('coursecattreecache')" href="../_variables/coursecattreecache.html">$coursecattreecache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecattree');
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a> = <a class="var it36436" onMouseOver="hilite(36436)" onMouseOut="lolite()" onClick="logVariable('coursecattreecache')" href="../_variables/coursecattreecache.html">$coursecattreecache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l591"><span class="linenum"> 591</span></a>          if (<a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a> !== false) {
<a name="l592"><span class="linenum"> 592</span></a>              return <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a>;
<a name="l593"><span class="linenum"> 593</span></a>          }
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">        // Re-build the tree.</span>
<a name="l595"><span class="linenum"> 595</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT cc.id, cc.parent, cc.visible
<a name="l596"><span class="linenum"> 596</span></a>                  FROM {course_categories} cc
<a name="l597"><span class="linenum"> 597</span></a>                  ORDER BY cc.sortorder&quot;;
<a name="l598"><span class="linenum"> 598</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array());
<a name="l599"><span class="linenum"> 599</span></a>          <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a> = array(0 =&gt; array(), '0i' =&gt; array());
<a name="l600"><span class="linenum"> 600</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = 0;
<a name="l601"><span class="linenum"> 601</span></a>          foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l602"><span class="linenum"> 602</span></a>              <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array();
<a name="l603"><span class="linenum"> 603</span></a>              <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. 'i'] = array();
<a name="l604"><span class="linenum"> 604</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('parent')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>, <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>)) {
<a name="l605"><span class="linenum"> 605</span></a>                  <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('parent')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>][] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l606"><span class="linenum"> 606</span></a>                  if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l607"><span class="linenum"> 607</span></a>                      <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('parent')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>. 'i'][] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l608"><span class="linenum"> 608</span></a>                  }
<a name="l609"><span class="linenum"> 609</span></a>              } else {
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">                // Parent not found. This is data consistency error but next fix_course_sortorder() should fix it.</span>
<a name="l611"><span class="linenum"> 611</span></a>                  <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[0][] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l612"><span class="linenum"> 612</span></a>                  if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l613"><span class="linenum"> 613</span></a>                      <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>['0i'][] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l614"><span class="linenum"> 614</span></a>                  }
<a name="l615"><span class="linenum"> 615</span></a>              }
<a name="l616"><span class="linenum"> 616</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>++;
<a name="l617"><span class="linenum"> 617</span></a>          }
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l619"><span class="linenum"> 619</span></a>          if (!<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>) {
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">            // No categories found.</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">            // This may happen after upgrade of a very old moodle version.</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">            // In new versions the default category is created on install.</span>
<a name="l623"><span class="linenum"> 623</span></a>              <a class="var it36437" onMouseOver="hilite(36437)" onMouseOut="lolite()" onClick="logVariable('defcoursecat')" href="../_variables/defcoursecat.html">$defcoursecat</a> = self::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array('name' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('miscellaneous')));
<a name="l624"><span class="linenum"> 624</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('defaultrequestcategory', <a class="var it36437" onMouseOver="hilite(36437)" onMouseOut="lolite()" onClick="logVariable('defcoursecat')" href="../_variables/defcoursecat.html">$defcoursecat</a>-&gt;<a onClick="logVariable('id')" class="var it44227" onMouseOver="hilite(44227)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l625"><span class="linenum"> 625</span></a>              <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[0] = array(<a class="var it36437" onMouseOver="hilite(36437)" onMouseOut="lolite()" onClick="logVariable('defcoursecat')" href="../_variables/defcoursecat.html">$defcoursecat</a>-&gt;<a onClick="logVariable('id')" class="var it44227" onMouseOver="hilite(44227)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l626"><span class="linenum"> 626</span></a>              <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[<a class="var it36437" onMouseOver="hilite(36437)" onMouseOut="lolite()" onClick="logVariable('defcoursecat')" href="../_variables/defcoursecat.html">$defcoursecat</a>-&gt;<a onClick="logVariable('id')" class="var it44227" onMouseOver="hilite(44227)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array();
<a name="l627"><span class="linenum"> 627</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>++;
<a name="l628"><span class="linenum"> 628</span></a>          }
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">        // We must add countall to all in case it was the requested ID.</span>
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>['countall'] = <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>;
<a name="l631"><span class="linenum"> 631</span></a>          foreach (<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>) {
<a name="l632"><span class="linenum"> 632</span></a>              <a class="var it36436" onMouseOver="hilite(36436)" onMouseOut="lolite()" onClick="logVariable('coursecattreecache')" href="../_variables/coursecattreecache.html">$coursecattreecache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>);
<a name="l633"><span class="linenum"> 633</span></a>          }
<a name="l634"><span class="linenum"> 634</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>)) {
<a name="l635"><span class="linenum"> 635</span></a>              return <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('all')" href="../_variables/all.html">$all</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>];
<a name="l636"><span class="linenum"> 636</span></a>          }
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment">        // Requested non-existing category.</span>
<a name="l638"><span class="linenum"> 638</span></a>          return array();
<a name="l639"><span class="linenum"> 639</span></a>      }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>      <span class="comment">/**</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">     * Returns number of ALL categories in the system regardless if</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">     * they are visible to current user or not</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     *</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     * @return int</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     */</span>
<a name="l647"><span class="linenum"> 647</span></a>      public static function <a class="function" onClick="logFunction('count_all')" href="../_functions/count_all.html" onMouseOver="funcPopup(event,'count_all')">count_all</a>() {
<a name="l648"><span class="linenum"> 648</span></a>          return self::<a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>('countall');
<a name="l649"><span class="linenum"> 649</span></a>      }
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>      <span class="comment">/**</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * Retrieves number of records from course_categories table</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     *</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">     * Only cached fields are retrieved. Records are ready for preloading context</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">     *</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment">     * @param string $whereclause</span>
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">     * @param array $params</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">     * @return array array of stdClass objects</span>
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">     */</span>
<a name="l660"><span class="linenum"> 660</span></a>      protected static function <a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) {
<a name="l661"><span class="linenum"> 661</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment">        // Retrieve from DB only the fields that need to be stored in cache.</span>
<a name="l663"><span class="linenum"> 663</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="phpfunction" onClick="logFunction('array_filter')" href="../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a>));
<a name="l664"><span class="linenum"> 664</span></a>          <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l665"><span class="linenum"> 665</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT cc.&quot;. <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',cc.', <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>). &quot;, <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a>
<a name="l666"><span class="linenum"> 666</span></a>                  FROM {course_categories} cc
<a name="l667"><span class="linenum"> 667</span></a>                  JOIN {context} ctx ON cc.id = ctx.instanceid AND ctx.contextlevel = :contextcoursecat
<a name="l668"><span class="linenum"> 668</span></a>                  WHERE &quot;. <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>.&quot; ORDER BY cc.sortorder&quot;;
<a name="l669"><span class="linenum"> 669</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>,
<a name="l670"><span class="linenum"> 670</span></a>                  array('contextcoursecat' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>) + <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l671"><span class="linenum"> 671</span></a>      }
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>      <span class="comment">/**</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     * Resets course contact caches when role assignments were changed</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     *</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     * @param int $roleid role id that was given or taken away</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">     * @param context $context context where role assignment has been changed</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">     */</span>
<a name="l679"><span class="linenum"> 679</span></a>      public static function <a class="function" onClick="logFunction('role_assignment_changed')" href="../_functions/role_assignment_changed.html" onMouseOver="funcPopup(event,'role_assignment_changed')">role_assignment_changed</a>(<a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l680"><span class="linenum"> 680</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>          if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> &gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">            // No changes to course contacts if role was assigned on the module/block level.</span>
<a name="l684"><span class="linenum"> 684</span></a>              return;
<a name="l685"><span class="linenum"> 685</span></a>          }
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>          if (!<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('coursecontact')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/coursecontact.html">coursecontact</a> || !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>, <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('coursecontact')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/coursecontact.html">coursecontact</a>))) {
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">            // The role is not one of course contact roles.</span>
<a name="l689"><span class="linenum"> 689</span></a>              return;
<a name="l690"><span class="linenum"> 690</span></a>          }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">        // Remove from cache course contacts of all affected courses.</span>
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecontacts');
<a name="l694"><span class="linenum"> 694</span></a>          if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l695"><span class="linenum"> 695</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l696"><span class="linenum"> 696</span></a>          } else if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l697"><span class="linenum"> 697</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l698"><span class="linenum"> 698</span></a>          } else {
<a name="l699"><span class="linenum"> 699</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT ctx.instanceid
<a name="l700"><span class="linenum"> 700</span></a>                      FROM {context} ctx
<a name="l701"><span class="linenum"> 701</span></a>                      WHERE ctx.path LIKE ? AND ctx.contextlevel = ?&quot;;
<a name="l702"><span class="linenum"> 702</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a> . '/%', <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>);
<a name="l703"><span class="linenum"> 703</span></a>              if (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_sql')" href="../_functions/get_fieldset_sql.html" onMouseOver="funcPopup(event,'get_fieldset_sql')">get_fieldset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l704"><span class="linenum"> 704</span></a>                  <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('delete_many')" href="../_functions/delete_many.html" onMouseOver="funcPopup(event,'delete_many')">delete_many</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l705"><span class="linenum"> 705</span></a>              }
<a name="l706"><span class="linenum"> 706</span></a>          }
<a name="l707"><span class="linenum"> 707</span></a>      }
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>      <span class="comment">/**</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">     * Executed when user enrolment was changed to check if course</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     * contacts cache needs to be cleared</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">     *</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">     * @param int $courseid course id</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">     * @param int $userid user id</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">     * @param int $status new enrolment status (0 - active, 1 - suspended)</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">     * @param int $timestart new enrolment time start</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">     * @param int $timeend new enrolment time end</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     */</span>
<a name="l719"><span class="linenum"> 719</span></a>      public static function <a class="function" onClick="logFunction('user_enrolment_changed')" href="../_functions/user_enrolment_changed.html" onMouseOver="funcPopup(event,'user_enrolment_changed')">user_enrolment_changed</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>,
<a name="l720"><span class="linenum"> 720</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../_variables/status.html">$status</a>, <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> = null, <a class="var it3001" onMouseOver="hilite(3001)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../_variables/timeend.html">$timeend</a> = null) {
<a name="l721"><span class="linenum"> 721</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecontacts');
<a name="l722"><span class="linenum"> 722</span></a>          <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('contacts')" href="../_variables/contacts.html">$contacts</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l723"><span class="linenum"> 723</span></a>          if (<a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('contacts')" href="../_variables/contacts.html">$contacts</a> === false) {
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">            // The contacts for the affected course were not cached anyway.</span>
<a name="l725"><span class="linenum"> 725</span></a>              return;
<a name="l726"><span class="linenum"> 726</span></a>          }
<a name="l727"><span class="linenum"> 727</span></a>          <a class="var it36438" onMouseOver="hilite(36438)" onMouseOut="lolite()" onClick="logVariable('enrolmentactive')" href="../_variables/enrolmentactive.html">$enrolmentactive</a> = (<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../_variables/status.html">$status</a> == 0) &amp;&amp;
<a name="l728"><span class="linenum"> 728</span></a>                  (!<a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> || <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> &lt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()) &amp;&amp;
<a name="l729"><span class="linenum"> 729</span></a>                  (!<a class="var it3001" onMouseOver="hilite(3001)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../_variables/timeend.html">$timeend</a> || <a class="var it3001" onMouseOver="hilite(3001)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../_variables/timeend.html">$timeend</a> &gt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l730"><span class="linenum"> 730</span></a>          if (!<a class="var it36438" onMouseOver="hilite(36438)" onMouseOut="lolite()" onClick="logVariable('enrolmentactive')" href="../_variables/enrolmentactive.html">$enrolmentactive</a>) {
<a name="l731"><span class="linenum"> 731</span></a>              <a class="var it36439" onMouseOver="hilite(36439)" onMouseOut="lolite()" onClick="logVariable('isincontacts')" href="../_variables/isincontacts.html">$isincontacts</a> = false;
<a name="l732"><span class="linenum"> 732</span></a>              foreach (<a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('contacts')" href="../_variables/contacts.html">$contacts</a> as <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('contact')" href="../_variables/contact.html">$contact</a>) {
<a name="l733"><span class="linenum"> 733</span></a>                  if (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('contact')" href="../_variables/contact.html">$contact</a>-&gt;<a onClick="logVariable('id')" class="var it44228" onMouseOver="hilite(44228)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l734"><span class="linenum"> 734</span></a>                      <a class="var it36439" onMouseOver="hilite(36439)" onMouseOut="lolite()" onClick="logVariable('isincontacts')" href="../_variables/isincontacts.html">$isincontacts</a> = true;
<a name="l735"><span class="linenum"> 735</span></a>                  }
<a name="l736"><span class="linenum"> 736</span></a>              }
<a name="l737"><span class="linenum"> 737</span></a>              if (!<a class="var it36439" onMouseOver="hilite(36439)" onMouseOut="lolite()" onClick="logVariable('isincontacts')" href="../_variables/isincontacts.html">$isincontacts</a>) {
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">                // Changed user's enrolment does not exist or is not active,</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">                // and he is not in cached course contacts, no changes to be made.</span>
<a name="l740"><span class="linenum"> 740</span></a>                  return;
<a name="l741"><span class="linenum"> 741</span></a>              }
<a name="l742"><span class="linenum"> 742</span></a>          }
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">        // Either enrolment of manager was deleted/suspended</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">        // or user enrolment was added or activated.</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">        // In order to see if the course contacts for this course need</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        // changing we would need to make additional queries, they will</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        // slow down bulk enrolment changes. It is better just to remove</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">        // course contacts cache for this course.</span>
<a name="l749"><span class="linenum"> 749</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l750"><span class="linenum"> 750</span></a>      }
<a name="l751"><span class="linenum"> 751</span></a>  
<a name="l752"><span class="linenum"> 752</span></a>      <span class="comment">/**</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * Given list of DB records from table course populates each record with list of users with course contact roles</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     *</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">     * This function fills the courses with raw information as {@link get_role_users()} would do.</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">     * See also {@link course_in_list::get_course_contacts()} for more readable return</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     *</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     * $courses[$i]-&gt;managers = array(</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     *   $roleassignmentid =&gt; $roleuser,</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     *   ...</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">     * );</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     *</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">     * where $roleuser is an stdClass with the following properties:</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     *</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     * $roleuser-&gt;raid - role assignment id</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     * $roleuser-&gt;id - user id</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     * $roleuser-&gt;username</span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">     * $roleuser-&gt;firstname</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">     * $roleuser-&gt;lastname</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">     * $roleuser-&gt;rolecoursealias</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">     * $roleuser-&gt;rolename</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">     * $roleuser-&gt;sortorder - role sortorder</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">     * $roleuser-&gt;roleid</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">     * $roleuser-&gt;roleshortname</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">     *</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">     * @todo MDL-38596 minimize number of queries to preload contacts for the list of courses</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">     *</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     * @param array $courses</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     */</span>
<a name="l780"><span class="linenum"> 780</span></a>      public static function <a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(&amp;<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) {
<a name="l781"><span class="linenum"> 781</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l782"><span class="linenum"> 782</span></a>          if (empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) || empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('coursecontact')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/coursecontact.html">coursecontact</a>)) {
<a name="l783"><span class="linenum"> 783</span></a>              return;
<a name="l784"><span class="linenum"> 784</span></a>          }
<a name="l785"><span class="linenum"> 785</span></a>          <a class="var it9006" onMouseOver="hilite(9006)" onMouseOut="lolite()" onClick="logVariable('managerroles')" href="../_variables/managerroles.html">$managerroles</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('coursecontact')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/coursecontact.html">coursecontact</a>);
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecontacts');
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it36440" onMouseOver="hilite(36440)" onMouseOut="lolite()" onClick="logVariable('cacheddata')" href="../_variables/cacheddata.html">$cacheddata</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get_many')" href="../_functions/get_many.html" onMouseOver="funcPopup(event,'get_many')">get_many</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>));
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a> = array();
<a name="l789"><span class="linenum"> 789</span></a>          foreach (<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l790"><span class="linenum"> 790</span></a>              if (<a class="var it36440" onMouseOver="hilite(36440)" onMouseOut="lolite()" onClick="logVariable('cacheddata')" href="../_variables/cacheddata.html">$cacheddata</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] !== false) {
<a name="l791"><span class="linenum"> 791</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers = <a class="var it36440" onMouseOver="hilite(36440)" onMouseOut="lolite()" onClick="logVariable('cacheddata')" href="../_variables/cacheddata.html">$cacheddata</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>];
<a name="l792"><span class="linenum"> 792</span></a>              } else {
<a name="l793"><span class="linenum"> 793</span></a>                  <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l794"><span class="linenum"> 794</span></a>              }
<a name="l795"><span class="linenum"> 795</span></a>          }
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">        // Array $courseids now stores list of ids of courses for which we still need to retrieve contacts.</span>
<a name="l798"><span class="linenum"> 798</span></a>          if (empty(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>)) {
<a name="l799"><span class="linenum"> 799</span></a>              return;
<a name="l800"><span class="linenum"> 800</span></a>          }
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">        // First build the array of all context ids of the courses and their categories.</span>
<a name="l803"><span class="linenum"> 803</span></a>          <a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a> = array();
<a name="l804"><span class="linenum"> 804</span></a>          foreach (<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l805"><span class="linenum"> 805</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l806"><span class="linenum"> 806</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers = array();
<a name="l807"><span class="linenum"> 807</span></a>              foreach (<a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('|/|', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, 0, PREG_SPLIT_NO_EMPTY) as <a class="var it5403" onMouseOver="hilite(5403)" onMouseOut="lolite()" onClick="logVariable('ctxid')" href="../_variables/ctxid.html">$ctxid</a>) {
<a name="l808"><span class="linenum"> 808</span></a>                  if (!isset(<a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a>[<a class="var it5403" onMouseOver="hilite(5403)" onMouseOut="lolite()" onClick="logVariable('ctxid')" href="../_variables/ctxid.html">$ctxid</a>])) {
<a name="l809"><span class="linenum"> 809</span></a>                      <a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a>[<a class="var it5403" onMouseOver="hilite(5403)" onMouseOut="lolite()" onClick="logVariable('ctxid')" href="../_variables/ctxid.html">$ctxid</a>] = array();
<a name="l810"><span class="linenum"> 810</span></a>                  }
<a name="l811"><span class="linenum"> 811</span></a>                  <a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a>[<a class="var it5403" onMouseOver="hilite(5403)" onMouseOut="lolite()" onClick="logVariable('ctxid')" href="../_variables/ctxid.html">$ctxid</a>][] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l812"><span class="linenum"> 812</span></a>              }
<a name="l813"><span class="linenum"> 813</span></a>          }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">        // Fetch list of all users with course contact roles in any of the courses contexts or parent contexts.</span>
<a name="l816"><span class="linenum"> 816</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it13098" onMouseOver="hilite(13098)" onMouseOut="lolite()" onClick="logVariable('sql1')" href="../_variables/sql1.html">$sql1</a>, <a class="var it7766" onMouseOver="hilite(7766)" onMouseOut="lolite()" onClick="logVariable('params1')" href="../_variables/params1.html">$params1</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'ctxid');
<a name="l817"><span class="linenum"> 817</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it6257" onMouseOver="hilite(6257)" onMouseOut="lolite()" onClick="logVariable('sql2')" href="../_variables/sql2.html">$sql2</a>, <a class="var it6258" onMouseOver="hilite(6258)" onMouseOut="lolite()" onClick="logVariable('params2')" href="../_variables/params2.html">$params2</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it9006" onMouseOver="hilite(9006)" onMouseOut="lolite()" onClick="logVariable('managerroles')" href="../_variables/managerroles.html">$managerroles</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'rid');
<a name="l818"><span class="linenum"> 818</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>, <a class="var it13756" onMouseOver="hilite(13756)" onMouseOut="lolite()" onClick="logVariable('sortparams')" href="../_variables/sortparams.html">$sortparams</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>('u');
<a name="l819"><span class="linenum"> 819</span></a>          <a class="var it36441" onMouseOver="hilite(36441)" onMouseOut="lolite()" onClick="logVariable('notdeleted')" href="../_variables/notdeleted.html">$notdeleted</a> = array('notdeleted'=&gt;0);
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it4609" onMouseOver="hilite(4609)" onMouseOut="lolite()" onClick="logVariable('allnames')" href="../_variables/allnames.html">$allnames</a> = <a class="function" onClick="logFunction('get_all_user_name_fields')" href="../_functions/get_all_user_name_fields.html" onMouseOver="funcPopup(event,'get_all_user_name_fields')">get_all_user_name_fields</a>(true, 'u');
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT ra.contextid, ra.id AS raid,
<a name="l822"><span class="linenum"> 822</span></a>                         r.id AS roleid, r.name AS rolename, r.shortname AS roleshortname,
<a name="l823"><span class="linenum"> 823</span></a>                         rn.name AS rolecoursealias, u.id, u.username, <a class="var it4609" onMouseOver="hilite(4609)" onMouseOut="lolite()" onClick="logVariable('allnames')" href="../_variables/allnames.html">$allnames</a>
<a name="l824"><span class="linenum"> 824</span></a>                    FROM {role_assignments} ra
<a name="l825"><span class="linenum"> 825</span></a>                    JOIN {user} u ON ra.userid = u.id
<a name="l826"><span class="linenum"> 826</span></a>                    JOIN {role} r ON ra.roleid = r.id
<a name="l827"><span class="linenum"> 827</span></a>               LEFT JOIN {role_names} rn <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (rn.contextid = ra.contextid AND rn.roleid = r.id)
<a name="l828"><span class="linenum"> 828</span></a>                  WHERE  ra.contextid &quot;. <a class="var it13098" onMouseOver="hilite(13098)" onMouseOut="lolite()" onClick="logVariable('sql1')" href="../_variables/sql1.html">$sql1</a>.&quot; AND ra.roleid &quot;. <a class="var it6257" onMouseOver="hilite(6257)" onMouseOut="lolite()" onClick="logVariable('sql2')" href="../_variables/sql2.html">$sql2</a>.&quot; AND u.deleted = :notdeleted
<a name="l829"><span class="linenum"> 829</span></a>               ORDER BY r.sortorder, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>&quot;;
<a name="l830"><span class="linenum"> 830</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it7766" onMouseOver="hilite(7766)" onMouseOut="lolite()" onClick="logVariable('params1')" href="../_variables/params1.html">$params1</a> + <a class="var it6258" onMouseOver="hilite(6258)" onMouseOut="lolite()" onClick="logVariable('params2')" href="../_variables/params2.html">$params2</a> + <a class="var it36441" onMouseOver="hilite(36441)" onMouseOut="lolite()" onClick="logVariable('notdeleted')" href="../_variables/notdeleted.html">$notdeleted</a> + <a class="var it13756" onMouseOver="hilite(13756)" onMouseOut="lolite()" onClick="logVariable('sortparams')" href="../_variables/sortparams.html">$sortparams</a>);
<a name="l831"><span class="linenum"> 831</span></a>          <a class="var it36442" onMouseOver="hilite(36442)" onMouseOut="lolite()" onClick="logVariable('checkenrolments')" href="../_variables/checkenrolments.html">$checkenrolments</a> = array();
<a name="l832"><span class="linenum"> 832</span></a>          foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>) {
<a name="l833"><span class="linenum"> 833</span></a>              foreach (<a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a>[<a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>-&gt;<a onClick="logVariable('contextid')" class="var it43058" onMouseOver="hilite(43058)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>] as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l834"><span class="linenum"> 834</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers[<a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>-&gt;<a onClick="logVariable('raid')" class="var it43058" onMouseOver="hilite(43058)" onMouseOut="lolite()" href="../_variables/raid.html">raid</a>] = <a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>;
<a name="l835"><span class="linenum"> 835</span></a>                  if (!isset(<a class="var it36442" onMouseOver="hilite(36442)" onMouseOut="lolite()" onClick="logVariable('checkenrolments')" href="../_variables/checkenrolments.html">$checkenrolments</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>])) {
<a name="l836"><span class="linenum"> 836</span></a>                      <a class="var it36442" onMouseOver="hilite(36442)" onMouseOut="lolite()" onClick="logVariable('checkenrolments')" href="../_variables/checkenrolments.html">$checkenrolments</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = array();
<a name="l837"><span class="linenum"> 837</span></a>                  }
<a name="l838"><span class="linenum"> 838</span></a>                  <a class="var it36442" onMouseOver="hilite(36442)" onMouseOut="lolite()" onClick="logVariable('checkenrolments')" href="../_variables/checkenrolments.html">$checkenrolments</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>][] = <a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>-&gt;<a onClick="logVariable('id')" class="var it43058" onMouseOver="hilite(43058)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l839"><span class="linenum"> 839</span></a>              }
<a name="l840"><span class="linenum"> 840</span></a>          }
<a name="l841"><span class="linenum"> 841</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l842"><span class="linenum"> 842</span></a>  
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">        // Remove from course contacts users who are not enrolled in the course.</span>
<a name="l844"><span class="linenum"> 844</span></a>          <a class="var it36443" onMouseOver="hilite(36443)" onMouseOut="lolite()" onClick="logVariable('enrolleduserids')" href="../_variables/enrolleduserids.html">$enrolleduserids</a> = self::<a class="function" onClick="logFunction('ensure_users_enrolled')" href="../_functions/ensure_users_enrolled.html" onMouseOver="funcPopup(event,'ensure_users_enrolled')">ensure_users_enrolled</a>(<a class="var it36442" onMouseOver="hilite(36442)" onMouseOut="lolite()" onClick="logVariable('checkenrolments')" href="../_variables/checkenrolments.html">$checkenrolments</a>);
<a name="l845"><span class="linenum"> 845</span></a>          foreach (<a class="var it36442" onMouseOver="hilite(36442)" onMouseOut="lolite()" onClick="logVariable('checkenrolments')" href="../_variables/checkenrolments.html">$checkenrolments</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>) {
<a name="l846"><span class="linenum"> 846</span></a>              if (empty(<a class="var it36443" onMouseOver="hilite(36443)" onMouseOut="lolite()" onClick="logVariable('enrolleduserids')" href="../_variables/enrolleduserids.html">$enrolleduserids</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>])) {
<a name="l847"><span class="linenum"> 847</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers = array();
<a name="l848"><span class="linenum"> 848</span></a>              } else if (<a class="var it12684" onMouseOver="hilite(12684)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../_variables/notenrolled.html">$notenrolled</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>, <a class="var it36443" onMouseOver="hilite(36443)" onMouseOut="lolite()" onClick="logVariable('enrolleduserids')" href="../_variables/enrolleduserids.html">$enrolleduserids</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>])) {
<a name="l849"><span class="linenum"> 849</span></a>                  foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers as <a class="var it32880" onMouseOver="hilite(32880)" onMouseOut="lolite()" onClick="logVariable('raid')" href="../_variables/raid.html">$raid</a> =&gt; <a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>) {
<a name="l850"><span class="linenum"> 850</span></a>                      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2994" onMouseOver="hilite(2994)" onMouseOut="lolite()" onClick="logVariable('ra')" href="../_variables/ra.html">$ra</a>-&gt;<a onClick="logVariable('id')" class="var it43058" onMouseOver="hilite(43058)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it12684" onMouseOver="hilite(12684)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../_variables/notenrolled.html">$notenrolled</a>)) {
<a name="l851"><span class="linenum"> 851</span></a>                          unset(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers[<a class="var it32880" onMouseOver="hilite(32880)" onMouseOut="lolite()" onClick="logVariable('raid')" href="../_variables/raid.html">$raid</a>]);
<a name="l852"><span class="linenum"> 852</span></a>                      }
<a name="l853"><span class="linenum"> 853</span></a>                  }
<a name="l854"><span class="linenum"> 854</span></a>              }
<a name="l855"><span class="linenum"> 855</span></a>          }
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">        // Set the cache.</span>
<a name="l858"><span class="linenum"> 858</span></a>          <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a> = array();
<a name="l859"><span class="linenum"> 859</span></a>          foreach (<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l860"><span class="linenum"> 860</span></a>              <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;managers;
<a name="l861"><span class="linenum"> 861</span></a>          }
<a name="l862"><span class="linenum"> 862</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set_many')" href="../_functions/set_many.html" onMouseOver="funcPopup(event,'set_many')">set_many</a>(<a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>);
<a name="l863"><span class="linenum"> 863</span></a>      }
<a name="l864"><span class="linenum"> 864</span></a>  
<a name="l865"><span class="linenum"> 865</span></a>      <span class="comment">/**</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">     * Verify user enrollments for multiple course-user combinations</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     *</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     * @param array $courseusers array where keys are course ids and values are array</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">     *     of users in this course whose enrolment we wish to verify</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">     * @return array same structure as input array but values list only users from input</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">     *     who are enrolled in the course</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">     */</span>
<a name="l873"><span class="linenum"> 873</span></a>      protected static function <a class="function" onClick="logFunction('ensure_users_enrolled')" href="../_functions/ensure_users_enrolled.html" onMouseOver="funcPopup(event,'ensure_users_enrolled')">ensure_users_enrolled</a>(<a class="var it3579" onMouseOver="hilite(3579)" onMouseOut="lolite()" onClick="logVariable('courseusers')" href="../_variables/courseusers.html">$courseusers</a>) {
<a name="l874"><span class="linenum"> 874</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">        // If the input array is too big, split it into chunks.</span>
<a name="l876"><span class="linenum"> 876</span></a>          <a class="var it36444" onMouseOver="hilite(36444)" onMouseOut="lolite()" onClick="logVariable('maxcoursesinquery')" href="../_variables/maxcoursesinquery.html">$maxcoursesinquery</a> = 20;
<a name="l877"><span class="linenum"> 877</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3579" onMouseOver="hilite(3579)" onMouseOut="lolite()" onClick="logVariable('courseusers')" href="../_variables/courseusers.html">$courseusers</a>) &gt; <a class="var it36444" onMouseOver="hilite(36444)" onMouseOut="lolite()" onClick="logVariable('maxcoursesinquery')" href="../_variables/maxcoursesinquery.html">$maxcoursesinquery</a>) {
<a name="l878"><span class="linenum"> 878</span></a>              <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a> = array();
<a name="l879"><span class="linenum"> 879</span></a>              for (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> = 0; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3579" onMouseOver="hilite(3579)" onMouseOut="lolite()" onClick="logVariable('courseusers')" href="../_variables/courseusers.html">$courseusers</a>); <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> += <a class="var it36444" onMouseOver="hilite(36444)" onMouseOut="lolite()" onClick="logVariable('maxcoursesinquery')" href="../_variables/maxcoursesinquery.html">$maxcoursesinquery</a>) {
<a name="l880"><span class="linenum"> 880</span></a>                  <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it3579" onMouseOver="hilite(3579)" onMouseOut="lolite()" onClick="logVariable('courseusers')" href="../_variables/courseusers.html">$courseusers</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it36444" onMouseOver="hilite(36444)" onMouseOut="lolite()" onClick="logVariable('maxcoursesinquery')" href="../_variables/maxcoursesinquery.html">$maxcoursesinquery</a>, true);
<a name="l881"><span class="linenum"> 881</span></a>                  <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a> = <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a> + self::<a class="function" onClick="logFunction('ensure_users_enrolled')" href="../_functions/ensure_users_enrolled.html" onMouseOver="funcPopup(event,'ensure_users_enrolled')">ensure_users_enrolled</a>(<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>);
<a name="l882"><span class="linenum"> 882</span></a>              }
<a name="l883"><span class="linenum"> 883</span></a>              return <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a>;
<a name="l884"><span class="linenum"> 884</span></a>          }
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">        // Create a query verifying valid user enrolments for the number of courses.</span>
<a name="l887"><span class="linenum"> 887</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT DISTINCT e.courseid, ue.userid
<a name="l888"><span class="linenum"> 888</span></a>            FROM {user_enrolments} ue
<a name="l889"><span class="linenum"> 889</span></a>            JOIN {enrol} e ON e.id = ue.enrolid
<a name="l890"><span class="linenum"> 890</span></a>            WHERE ue.status = :active
<a name="l891"><span class="linenum"> 891</span></a>              AND e.status = :enabled
<a name="l892"><span class="linenum"> 892</span></a>              AND ue.timestart &lt; :now1 AND (ue.timeend = 0 OR ue.timeend &gt; :now2)&quot;;
<a name="l893"><span class="linenum"> 893</span></a>          <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('round')" href="../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), -2); <span class="comment">// Rounding helps caching in DB.</span>
<a name="l894"><span class="linenum"> 894</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('enabled' =&gt; <a class="constant" onClick="logConstant('ENROL_INSTANCE_ENABLED')" href="../_constants/ENROL_INSTANCE_ENABLED.html" onMouseOver="constPopup(event,'ENROL_INSTANCE_ENABLED')">ENROL_INSTANCE_ENABLED</a>,
<a name="l895"><span class="linenum"> 895</span></a>              'active' =&gt; <a class="constant" onClick="logConstant('ENROL_USER_ACTIVE')" href="../_constants/ENROL_USER_ACTIVE.html" onMouseOver="constPopup(event,'ENROL_USER_ACTIVE')">ENROL_USER_ACTIVE</a>,
<a name="l896"><span class="linenum"> 896</span></a>              'now1' =&gt; <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, 'now2' =&gt; <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>);
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> = 0;
<a name="l898"><span class="linenum"> 898</span></a>          <a class="var it36445" onMouseOver="hilite(36445)" onMouseOut="lolite()" onClick="logVariable('subsqls')" href="../_variables/subsqls.html">$subsqls</a> = array();
<a name="l899"><span class="linenum"> 899</span></a>          <a class="var it30774" onMouseOver="hilite(30774)" onMouseOut="lolite()" onClick="logVariable('enrolled')" href="../_variables/enrolled.html">$enrolled</a> = array();
<a name="l900"><span class="linenum"> 900</span></a>          foreach (<a class="var it3579" onMouseOver="hilite(3579)" onMouseOut="lolite()" onClick="logVariable('courseusers')" href="../_variables/courseusers.html">$courseusers</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>) {
<a name="l901"><span class="linenum"> 901</span></a>              <a class="var it30774" onMouseOver="hilite(30774)" onMouseOut="lolite()" onClick="logVariable('enrolled')" href="../_variables/enrolled.html">$enrolled</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = array();
<a name="l902"><span class="linenum"> 902</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>)) {
<a name="l903"><span class="linenum"> 903</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it6257" onMouseOver="hilite(6257)" onMouseOut="lolite()" onClick="logVariable('sql2')" href="../_variables/sql2.html">$sql2</a>, <a class="var it6258" onMouseOver="hilite(6258)" onMouseOut="lolite()" onClick="logVariable('params2')" href="../_variables/params2.html">$params2</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'userid'.<a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>.'_');
<a name="l904"><span class="linenum"> 904</span></a>                  <a class="var it36445" onMouseOver="hilite(36445)" onMouseOut="lolite()" onClick="logVariable('subsqls')" href="../_variables/subsqls.html">$subsqls</a>[] = &quot;(e.courseid = :courseid<a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> AND ue.userid &quot;.<a class="var it6257" onMouseOver="hilite(6257)" onMouseOut="lolite()" onClick="logVariable('sql2')" href="../_variables/sql2.html">$sql2</a>.&quot;)&quot;;
<a name="l905"><span class="linenum"> 905</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> + array('courseid'.<a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) + <a class="var it6258" onMouseOver="hilite(6258)" onMouseOut="lolite()" onClick="logVariable('params2')" href="../_variables/params2.html">$params2</a>;
<a name="l906"><span class="linenum"> 906</span></a>                  <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>++;
<a name="l907"><span class="linenum"> 907</span></a>              }
<a name="l908"><span class="linenum"> 908</span></a>          }
<a name="l909"><span class="linenum"> 909</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it36445" onMouseOver="hilite(36445)" onMouseOut="lolite()" onClick="logVariable('subsqls')" href="../_variables/subsqls.html">$subsqls</a>)) {
<a name="l910"><span class="linenum"> 910</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot;AND (&quot;. <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(' OR ', <a class="var it36445" onMouseOver="hilite(36445)" onMouseOut="lolite()" onClick="logVariable('subsqls')" href="../_variables/subsqls.html">$subsqls</a>).&quot;)&quot;;
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l912"><span class="linenum"> 912</span></a>              foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l913"><span class="linenum"> 913</span></a>                  <a class="var it30774" onMouseOver="hilite(30774)" onMouseOut="lolite()" onClick="logVariable('enrolled')" href="../_variables/enrolled.html">$enrolled</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('courseid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>][] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>;
<a name="l914"><span class="linenum"> 914</span></a>              }
<a name="l915"><span class="linenum"> 915</span></a>              <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l916"><span class="linenum"> 916</span></a>          }
<a name="l917"><span class="linenum"> 917</span></a>          return <a class="var it30774" onMouseOver="hilite(30774)" onMouseOut="lolite()" onClick="logVariable('enrolled')" href="../_variables/enrolled.html">$enrolled</a>;
<a name="l918"><span class="linenum"> 918</span></a>      }
<a name="l919"><span class="linenum"> 919</span></a>  
<a name="l920"><span class="linenum"> 920</span></a>      <span class="comment">/**</span>
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">     * Retrieves number of records from course table</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">     *</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment">     * Not all fields are retrieved. Records are ready for preloading context</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">     *</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">     * @param string $whereclause</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">     * @param array $params</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     * @param array $options may indicate that summary and/or coursecontacts need to be retrieved</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     * @param bool $checkvisibility if true, capability 'moodle/course:viewhiddencourses' will be checked</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">     *     on not visible courses</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">     * @return array array of stdClass objects</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">     */</span>
<a name="l932"><span class="linenum"> 932</span></a>      protected static function <a class="function" onClick="logFunction('get_course_records')" href="../_functions/get_course_records.html" onMouseOver="funcPopup(event,'get_course_records')">get_course_records</a>(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, <a class="var it36446" onMouseOver="hilite(36446)" onMouseOut="lolite()" onClick="logVariable('checkvisibility')" href="../_variables/checkvisibility.html">$checkvisibility</a> = false) {
<a name="l933"><span class="linenum"> 933</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l935"><span class="linenum"> 935</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = array('c.id', 'c.category', 'c.sortorder',
<a name="l936"><span class="linenum"> 936</span></a>                          'c.shortname', 'c.fullname', 'c.idnumber',
<a name="l937"><span class="linenum"> 937</span></a>                          'c.startdate', 'c.visible', 'c.cacherev');
<a name="l938"><span class="linenum"> 938</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['summary'])) {
<a name="l939"><span class="linenum"> 939</span></a>              <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>[] = 'c.summary';
<a name="l940"><span class="linenum"> 940</span></a>              <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>[] = 'c.summaryformat';
<a name="l941"><span class="linenum"> 941</span></a>          } else {
<a name="l942"><span class="linenum"> 942</span></a>              <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_substr')" href="../_functions/sql_substr.html" onMouseOver="funcPopup(event,'sql_substr')">sql_substr</a>('c.summary', 1, 1). ' as hassummary';
<a name="l943"><span class="linenum"> 943</span></a>          }
<a name="l944"><span class="linenum"> 944</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT &quot;. <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>). &quot;, <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a>
<a name="l945"><span class="linenum"> 945</span></a>                  FROM {course} c
<a name="l946"><span class="linenum"> 946</span></a>                  JOIN {context} ctx ON c.id = ctx.instanceid AND ctx.contextlevel = :contextcourse
<a name="l947"><span class="linenum"> 947</span></a>                  WHERE &quot;. <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>.&quot; ORDER BY c.sortorder&quot;;
<a name="l948"><span class="linenum"> 948</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>,
<a name="l949"><span class="linenum"> 949</span></a>                  array('contextcourse' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) + <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l950"><span class="linenum"> 950</span></a>  
<a name="l951"><span class="linenum"> 951</span></a>          if (<a class="var it36446" onMouseOver="hilite(36446)" onMouseOut="lolite()" onClick="logVariable('checkvisibility')" href="../_variables/checkvisibility.html">$checkvisibility</a>) {
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">            // Loop through all records and make sure we only return the courses accessible by user.</span>
<a name="l953"><span class="linenum"> 953</span></a>              foreach (<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> as <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l954"><span class="linenum"> 954</span></a>                  if (isset(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;hassummary)) {
<a name="l955"><span class="linenum"> 955</span></a>                      <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;hassummary = <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;hassummary) &gt; 0;
<a name="l956"><span class="linenum"> 956</span></a>                  }
<a name="l957"><span class="linenum"> 957</span></a>                  if (empty(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">                    // Load context only if we need to check capability.</span>
<a name="l959"><span class="linenum"> 959</span></a>                      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l960"><span class="linenum"> 960</span></a>                      if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddencourses', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l961"><span class="linenum"> 961</span></a>                          unset(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]);
<a name="l962"><span class="linenum"> 962</span></a>                      }
<a name="l963"><span class="linenum"> 963</span></a>                  }
<a name="l964"><span class="linenum"> 964</span></a>              }
<a name="l965"><span class="linenum"> 965</span></a>          }
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">        // Preload course contacts if necessary.</span>
<a name="l968"><span class="linenum"> 968</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts'])) {
<a name="l969"><span class="linenum"> 969</span></a>              self::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>);
<a name="l970"><span class="linenum"> 970</span></a>          }
<a name="l971"><span class="linenum"> 971</span></a>          return <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>;
<a name="l972"><span class="linenum"> 972</span></a>      }
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>      <span class="comment">/**</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment">     * Returns array of ids of children categories that current user can not see</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment">     *</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">     * This data is cached in user session cache</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">     *</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment">     * @return array</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment">     */</span>
<a name="l981"><span class="linenum"> 981</span></a>      protected function <a class="function" onClick="logFunction('get_not_visible_children_ids')" href="../_functions/get_not_visible_children_ids.html" onMouseOver="funcPopup(event,'get_not_visible_children_ids')">get_not_visible_children_ids</a>() {
<a name="l982"><span class="linenum"> 982</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l983"><span class="linenum"> 983</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l984"><span class="linenum"> 984</span></a>          if ((<a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('ic'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) === false) {
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">            // We never checked visible children before.</span>
<a name="l986"><span class="linenum"> 986</span></a>              <a class="var it2490" onMouseOver="hilite(2490)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../_variables/hidden.html">$hidden</a> = self::<a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>.'i');
<a name="l987"><span class="linenum"> 987</span></a>              <a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a> = array();
<a name="l988"><span class="linenum"> 988</span></a>              if (<a class="var it2490" onMouseOver="hilite(2490)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../_variables/hidden.html">$hidden</a>) {
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">                // Preload categories contexts.</span>
<a name="l990"><span class="linenum"> 990</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it2490" onMouseOver="hilite(2490)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../_variables/hidden.html">$hidden</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'id');
<a name="l991"><span class="linenum"> 991</span></a>                  <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l992"><span class="linenum"> 992</span></a>                  <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> FROM {context} ctx
<a name="l993"><span class="linenum"> 993</span></a>                      WHERE ctx.contextlevel = :contextcoursecat AND ctx.instanceid &quot;.<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>,
<a name="l994"><span class="linenum"> 994</span></a>                          array('contextcoursecat' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>) + <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l995"><span class="linenum"> 995</span></a>                  foreach (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l996"><span class="linenum"> 996</span></a>                      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l997"><span class="linenum"> 997</span></a>                  }
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">                // Check that user has 'viewhiddencategories' capability for each hidden category.</span>
<a name="l999"><span class="linenum"> 999</span></a>                  foreach (<a class="var it2490" onMouseOver="hilite(2490)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../_variables/hidden.html">$hidden</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l1000"><span class="linenum">1000</span></a>                      if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:viewhiddencategories', <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>))) {
<a name="l1001"><span class="linenum">1001</span></a>                          <a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a>[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l1002"><span class="linenum">1002</span></a>                      }
<a name="l1003"><span class="linenum">1003</span></a>                  }
<a name="l1004"><span class="linenum">1004</span></a>              }
<a name="l1005"><span class="linenum">1005</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('ic'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a>);
<a name="l1006"><span class="linenum">1006</span></a>          }
<a name="l1007"><span class="linenum">1007</span></a>          return <a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a>;
<a name="l1008"><span class="linenum">1008</span></a>      }
<a name="l1009"><span class="linenum">1009</span></a>  
<a name="l1010"><span class="linenum">1010</span></a>      <span class="comment">/**</span>
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment">     * Sorts list of records by several fields</span>
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">     *</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">     * @param array $records array of stdClass objects</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     * @param array $sortfields assoc array where key is the field to sort and value is 1 for asc or -1 for desc</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     * @return int</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">     */</span>
<a name="l1017"><span class="linenum">1017</span></a>      protected static function <a class="function" onClick="logFunction('sort_records')" href="../_functions/sort_records.html" onMouseOver="funcPopup(event,'sort_records')">sort_records</a>(&amp;<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>) {
<a name="l1018"><span class="linenum">1018</span></a>          if (empty(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>)) {
<a name="l1019"><span class="linenum">1019</span></a>              return;
<a name="l1020"><span class="linenum">1020</span></a>          }
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">        // If sorting by course display name, calculate it (it may be fullname or shortname+fullname).</span>
<a name="l1022"><span class="linenum">1022</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('displayname', <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>)) {
<a name="l1023"><span class="linenum">1023</span></a>              foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1024"><span class="linenum">1024</span></a>                  if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('displayname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/displayname.html">displayname</a>)) {
<a name="l1025"><span class="linenum">1025</span></a>                      <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;displayname = <a class="function" onClick="logFunction('get_course_display_name_for_list')" href="../_functions/get_course_display_name_for_list.html" onMouseOver="funcPopup(event,'get_course_display_name_for_list')">get_course_display_name_for_list</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l1026"><span class="linenum">1026</span></a>                  }
<a name="l1027"><span class="linenum">1027</span></a>              }
<a name="l1028"><span class="linenum">1028</span></a>          }
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">        // Sorting by one field - use core_collator.</span>
<a name="l1030"><span class="linenum">1030</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>) == 1) {
<a name="l1031"><span class="linenum">1031</span></a>              <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> = <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1032"><span class="linenum">1032</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>, array('sortorder', 'id', 'visible', 'parent', 'depth'))) {
<a name="l1033"><span class="linenum">1033</span></a>                  <a class="var it26348" onMouseOver="hilite(26348)" onMouseOut="lolite()" onClick="logVariable('sortflag')" href="../_variables/sortflag.html">$sortflag</a> = <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_NUMERIC;
<a name="l1034"><span class="linenum">1034</span></a>              } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>, array('idnumber', 'displayname', 'name', 'shortname', 'fullname'))) {
<a name="l1035"><span class="linenum">1035</span></a>                  <a class="var it26348" onMouseOver="hilite(26348)" onMouseOut="lolite()" onClick="logVariable('sortflag')" href="../_variables/sortflag.html">$sortflag</a> = <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_STRING;
<a name="l1036"><span class="linenum">1036</span></a>              } else {
<a name="l1037"><span class="linenum">1037</span></a>                  <a class="var it26348" onMouseOver="hilite(26348)" onMouseOut="lolite()" onClick="logVariable('sortflag')" href="../_variables/sortflag.html">$sortflag</a> = <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_REGULAR;
<a name="l1038"><span class="linenum">1038</span></a>              }
<a name="l1039"><span class="linenum">1039</span></a>              <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>, <a class="var it26348" onMouseOver="hilite(26348)" onMouseOut="lolite()" onClick="logVariable('sortflag')" href="../_variables/sortflag.html">$sortflag</a>);
<a name="l1040"><span class="linenum">1040</span></a>              if (<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>] &lt; 0) {
<a name="l1041"><span class="linenum">1041</span></a>                  <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, true);
<a name="l1042"><span class="linenum">1042</span></a>              }
<a name="l1043"><span class="linenum">1043</span></a>              return;
<a name="l1044"><span class="linenum">1044</span></a>          }
<a name="l1045"><span class="linenum">1045</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="class" onClick="logClass('coursecat_sortable_records')" href="../_classes/coursecat_sortable_records.html" onMouseOver="classPopup(event,'coursecat_sortable_records')">coursecat_sortable_records</a>::<a class="phpfunction" onClick="logFunction('sort')" href="../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1046"><span class="linenum">1046</span></a>      }
<a name="l1047"><span class="linenum">1047</span></a>  
<a name="l1048"><span class="linenum">1048</span></a>      <span class="comment">/**</span>
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment">     * Returns array of children categories visible to the current user</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">     *</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment">     * @param array $options options for retrieving children</span>
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment">     *    - sort - list of fields to sort. Example</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">     *             array('idnumber' =&gt; 1, 'name' =&gt; 1, 'id' =&gt; -1)</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     *             will sort by idnumber asc, name asc and id desc.</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     *             Default: array('sortorder' =&gt; 1)</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     *             Only cached fields may be used for sorting!</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     *    - offset</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     *    - limit - maximum number of children to return, 0 or null for no limit</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     * @return coursecat[] Array of coursecat objects indexed by category id</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">     */</span>
<a name="l1061"><span class="linenum">1061</span></a>      public function <a class="function" onClick="logFunction('get_children')" href="../_functions/get_children.html" onMouseOver="funcPopup(event,'get_children')">get_children</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l1062"><span class="linenum">1062</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1063"><span class="linenum">1063</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">        // Get default values for options.</span>
<a name="l1066"><span class="linenum">1066</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort']) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort'])) {
<a name="l1067"><span class="linenum">1067</span></a>              <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort'];
<a name="l1068"><span class="linenum">1068</span></a>          } else {
<a name="l1069"><span class="linenum">1069</span></a>              <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a> = array('sortorder' =&gt; 1);
<a name="l1070"><span class="linenum">1070</span></a>          }
<a name="l1071"><span class="linenum">1071</span></a>          <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = null;
<a name="l1072"><span class="linenum">1072</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit']) &amp;&amp; (int)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit']) {
<a name="l1073"><span class="linenum">1073</span></a>              <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = (int)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit'];
<a name="l1074"><span class="linenum">1074</span></a>          }
<a name="l1075"><span class="linenum">1075</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> = 0;
<a name="l1076"><span class="linenum">1076</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset']) &amp;&amp; (int)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset']) {
<a name="l1077"><span class="linenum">1077</span></a>              <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> = (int)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset'];
<a name="l1078"><span class="linenum">1078</span></a>          }
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment">        // First retrieve list of user-visible and sorted children ids from cache.</span>
<a name="l1081"><span class="linenum">1081</span></a>          <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('c'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. ':'.  <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>));
<a name="l1082"><span class="linenum">1082</span></a>          if (<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> === false) {
<a name="l1083"><span class="linenum">1083</span></a>              <a class="var it36450" onMouseOver="hilite(36450)" onMouseOut="lolite()" onClick="logVariable('sortfieldskeys')" href="../_variables/sortfieldskeys.html">$sortfieldskeys</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1084"><span class="linenum">1084</span></a>              if (<a class="var it36450" onMouseOver="hilite(36450)" onMouseOut="lolite()" onClick="logVariable('sortfieldskeys')" href="../_variables/sortfieldskeys.html">$sortfieldskeys</a>[0] === 'sortorder') {
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment">                // No DB requests required to build the list of ids sorted by sortorder.</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment">                // We can easily ignore other sort fields because sortorder is always different.</span>
<a name="l1087"><span class="linenum">1087</span></a>                  <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = self::<a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1088"><span class="linenum">1088</span></a>                  if (<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> &amp;&amp; (<a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_not_visible_children_ids')" href="../_functions/get_not_visible_children_ids.html" onMouseOver="funcPopup(event,'get_not_visible_children_ids')">get_not_visible_children_ids</a>())) {
<a name="l1089"><span class="linenum">1089</span></a>                      <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>, <a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a>);
<a name="l1090"><span class="linenum">1090</span></a>                      if (<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>['sortorder'] == -1) {
<a name="l1091"><span class="linenum">1091</span></a>                          <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>, true);
<a name="l1092"><span class="linenum">1092</span></a>                      }
<a name="l1093"><span class="linenum">1093</span></a>                  }
<a name="l1094"><span class="linenum">1094</span></a>              } else {
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment">                // We need to retrieve and sort all children. Good thing that it is done only on first request.</span>
<a name="l1096"><span class="linenum">1096</span></a>                  if (<a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_not_visible_children_ids')" href="../_functions/get_not_visible_children_ids.html" onMouseOver="funcPopup(event,'get_not_visible_children_ids')">get_not_visible_children_ids</a>()) {
<a name="l1097"><span class="linenum">1097</span></a>                      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'id', false);
<a name="l1098"><span class="linenum">1098</span></a>                      <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('cc.parent = :parent AND cc.id '. <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>,
<a name="l1099"><span class="linenum">1099</span></a>                              array('parent' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) + <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1100"><span class="linenum">1100</span></a>                  } else {
<a name="l1101"><span class="linenum">1101</span></a>                      <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('cc.parent = :parent', array('parent' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1102"><span class="linenum">1102</span></a>                  }
<a name="l1103"><span class="linenum">1103</span></a>                  self::<a class="function" onClick="logFunction('sort_records')" href="../_functions/sort_records.html" onMouseOver="funcPopup(event,'sort_records')">sort_records</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1104"><span class="linenum">1104</span></a>                  <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1105"><span class="linenum">1105</span></a>              }
<a name="l1106"><span class="linenum">1106</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('c'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. ':'.<a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>), <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>);
<a name="l1107"><span class="linenum">1107</span></a>          }
<a name="l1108"><span class="linenum">1108</span></a>  
<a name="l1109"><span class="linenum">1109</span></a>          if (empty(<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>)) {
<a name="l1110"><span class="linenum">1110</span></a>              return array();
<a name="l1111"><span class="linenum">1111</span></a>          }
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">        // Now retrieive and return categories.</span>
<a name="l1114"><span class="linenum">1114</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> || <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>) {
<a name="l1115"><span class="linenum">1115</span></a>              <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l1116"><span class="linenum">1116</span></a>          }
<a name="l1117"><span class="linenum">1117</span></a>          if (isset(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>)) {
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">            // Easy, we have already retrieved records.</span>
<a name="l1119"><span class="linenum">1119</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> || <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>) {
<a name="l1120"><span class="linenum">1120</span></a>                  <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>, true);
<a name="l1121"><span class="linenum">1121</span></a>              }
<a name="l1122"><span class="linenum">1122</span></a>          } else {
<a name="l1123"><span class="linenum">1123</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'id');
<a name="l1124"><span class="linenum">1124</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('cc.id '. <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('parent' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) + <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1125"><span class="linenum">1125</span></a>          }
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>          <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a> = array();
<a name="l1128"><span class="linenum">1128</span></a>          foreach (<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l1129"><span class="linenum">1129</span></a>              if (isset(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>])) {
<a name="l1130"><span class="linenum">1130</span></a>                  <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l1131"><span class="linenum">1131</span></a>              }
<a name="l1132"><span class="linenum">1132</span></a>          }
<a name="l1133"><span class="linenum">1133</span></a>          return <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../_variables/rv.html">$rv</a>;
<a name="l1134"><span class="linenum">1134</span></a>      }
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>      <span class="comment">/**</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment">     * Returns true if the user has the manage capability on any category.</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment">     *</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment">     * This method uses the coursecat cache and an entry `has_manage_capability` to speed up</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">     * calls to this method.</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">     *</span>
<a name="l1142"><span class="linenum">1142</span></a>  <span class="comment">     * @return bool</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">     */</span>
<a name="l1144"><span class="linenum">1144</span></a>      public static function <a class="function" onClick="logFunction('has_manage_capability_on_any')" href="../_functions/has_manage_capability_on_any.html" onMouseOver="funcPopup(event,'has_manage_capability_on_any')">has_manage_capability_on_any</a>() {
<a name="l1145"><span class="linenum">1145</span></a>          return self::<a class="function" onClick="logFunction('has_capability_on_any')" href="../_functions/has_capability_on_any.html" onMouseOver="funcPopup(event,'has_capability_on_any')">has_capability_on_any</a>('moodle/category:manage');
<a name="l1146"><span class="linenum">1146</span></a>      }
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>      <span class="comment">/**</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment">     * Checks if the user has at least one of the given capabilities on any category.</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment">     *</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">     * @param array|string $capabilities One or more capabilities to check. Check made is an OR.</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment">     * @return bool</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment">     */</span>
<a name="l1154"><span class="linenum">1154</span></a>      public static function <a class="function" onClick="logFunction('has_capability_on_any')" href="../_functions/has_capability_on_any.html" onMouseOver="funcPopup(event,'has_capability_on_any')">has_capability_on_any</a>(<a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('capabilities')" href="../_variables/capabilities.html">$capabilities</a>) {
<a name="l1155"><span class="linenum">1155</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1156"><span class="linenum">1156</span></a>          if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() || <a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1157"><span class="linenum">1157</span></a>              return false;
<a name="l1158"><span class="linenum">1158</span></a>          }
<a name="l1159"><span class="linenum">1159</span></a>  
<a name="l1160"><span class="linenum">1160</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('capabilities')" href="../_variables/capabilities.html">$capabilities</a>)) {
<a name="l1161"><span class="linenum">1161</span></a>              <a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('capabilities')" href="../_variables/capabilities.html">$capabilities</a> = array(<a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('capabilities')" href="../_variables/capabilities.html">$capabilities</a>);
<a name="l1162"><span class="linenum">1162</span></a>          }
<a name="l1163"><span class="linenum">1163</span></a>          <a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> = array();
<a name="l1164"><span class="linenum">1164</span></a>          foreach (<a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('capabilities')" href="../_variables/capabilities.html">$capabilities</a> as <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>) {
<a name="l1165"><span class="linenum">1165</span></a>              <a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a>[<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>] = <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>);
<a name="l1166"><span class="linenum">1166</span></a>          }
<a name="l1167"><span class="linenum">1167</span></a>  
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment">        /* @var cache_session $cache */</span>
<a name="l1169"><span class="linenum">1169</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l1170"><span class="linenum">1170</span></a>          <a class="var it36451" onMouseOver="hilite(36451)" onMouseOut="lolite()" onClick="logVariable('hascapability')" href="../_variables/hascapability.html">$hascapability</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get_many')" href="../_functions/get_many.html" onMouseOver="funcPopup(event,'get_many')">get_many</a>(<a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a>);
<a name="l1171"><span class="linenum">1171</span></a>          <a class="var it36452" onMouseOver="hilite(36452)" onMouseOut="lolite()" onClick="logVariable('needtoload')" href="../_variables/needtoload.html">$needtoload</a> = false;
<a name="l1172"><span class="linenum">1172</span></a>          foreach (<a class="var it36451" onMouseOver="hilite(36451)" onMouseOut="lolite()" onClick="logVariable('hascapability')" href="../_variables/hascapability.html">$hascapability</a> as <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>) {
<a name="l1173"><span class="linenum">1173</span></a>              if (<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> === '1') {
<a name="l1174"><span class="linenum">1174</span></a>                  return true;
<a name="l1175"><span class="linenum">1175</span></a>              } else if (<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> === false) {
<a name="l1176"><span class="linenum">1176</span></a>                  <a class="var it36452" onMouseOver="hilite(36452)" onMouseOut="lolite()" onClick="logVariable('needtoload')" href="../_variables/needtoload.html">$needtoload</a> = true;
<a name="l1177"><span class="linenum">1177</span></a>              }
<a name="l1178"><span class="linenum">1178</span></a>          }
<a name="l1179"><span class="linenum">1179</span></a>          if (<a class="var it36452" onMouseOver="hilite(36452)" onMouseOut="lolite()" onClick="logVariable('needtoload')" href="../_variables/needtoload.html">$needtoload</a> === false) {
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">            // All capabilities were retrieved and the user didn't have any.</span>
<a name="l1181"><span class="linenum">1181</span></a>              return false;
<a name="l1182"><span class="linenum">1182</span></a>          }
<a name="l1183"><span class="linenum">1183</span></a>  
<a name="l1184"><span class="linenum">1184</span></a>          <a class="var it36453" onMouseOver="hilite(36453)" onMouseOut="lolite()" onClick="logVariable('haskey')" href="../_variables/haskey.html">$haskey</a> = null;
<a name="l1185"><span class="linenum">1185</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1186"><span class="linenum">1186</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT ctx.instanceid AS categoryid, <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>
<a name="l1187"><span class="linenum">1187</span></a>                        FROM {context} ctx
<a name="l1188"><span class="linenum">1188</span></a>                       WHERE contextlevel = :contextlevel
<a name="l1189"><span class="linenum">1189</span></a>                    ORDER BY depth ASC&quot;;
<a name="l1190"><span class="linenum">1190</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>);
<a name="l1191"><span class="linenum">1191</span></a>          <a class="var it2343" onMouseOver="hilite(2343)" onMouseOut="lolite()" onClick="logVariable('recordset')" href="../_variables/recordset.html">$recordset</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1192"><span class="linenum">1192</span></a>          foreach (<a class="var it2343" onMouseOver="hilite(2343)" onMouseOut="lolite()" onClick="logVariable('recordset')" href="../_variables/recordset.html">$recordset</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1193"><span class="linenum">1193</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1194"><span class="linenum">1194</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('categoryid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/categoryid.html">categoryid</a>);
<a name="l1195"><span class="linenum">1195</span></a>              foreach (<a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('capabilities')" href="../_variables/capabilities.html">$capabilities</a> as <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>) {
<a name="l1196"><span class="linenum">1196</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1197"><span class="linenum">1197</span></a>                      <a class="var it36453" onMouseOver="hilite(36453)" onMouseOut="lolite()" onClick="logVariable('haskey')" href="../_variables/haskey.html">$haskey</a> = <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>;
<a name="l1198"><span class="linenum">1198</span></a>                      break 2;
<a name="l1199"><span class="linenum">1199</span></a>                  }
<a name="l1200"><span class="linenum">1200</span></a>              }
<a name="l1201"><span class="linenum">1201</span></a>          }
<a name="l1202"><span class="linenum">1202</span></a>          <a class="var it2343" onMouseOver="hilite(2343)" onMouseOut="lolite()" onClick="logVariable('recordset')" href="../_variables/recordset.html">$recordset</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1203"><span class="linenum">1203</span></a>          if (<a class="var it36453" onMouseOver="hilite(36453)" onMouseOut="lolite()" onClick="logVariable('haskey')" href="../_variables/haskey.html">$haskey</a> === null) {
<a name="l1204"><span class="linenum">1204</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = array();
<a name="l1205"><span class="linenum">1205</span></a>              foreach (<a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l1206"><span class="linenum">1206</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = '0';
<a name="l1207"><span class="linenum">1207</span></a>              }
<a name="l1208"><span class="linenum">1208</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set_many')" href="../_functions/set_many.html" onMouseOver="funcPopup(event,'set_many')">set_many</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l1209"><span class="linenum">1209</span></a>              return false;
<a name="l1210"><span class="linenum">1210</span></a>          } else {
<a name="l1211"><span class="linenum">1211</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36453" onMouseOver="hilite(36453)" onMouseOut="lolite()" onClick="logVariable('haskey')" href="../_variables/haskey.html">$haskey</a>, '1');
<a name="l1212"><span class="linenum">1212</span></a>              return true;
<a name="l1213"><span class="linenum">1213</span></a>          }
<a name="l1214"><span class="linenum">1214</span></a>      }
<a name="l1215"><span class="linenum">1215</span></a>  
<a name="l1216"><span class="linenum">1216</span></a>      <span class="comment">/**</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">     * Returns true if the user can resort any category.</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">     * @return bool</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">     */</span>
<a name="l1220"><span class="linenum">1220</span></a>      public static function <a class="function" onClick="logFunction('can_resort_any')" href="../_functions/can_resort_any.html" onMouseOver="funcPopup(event,'can_resort_any')">can_resort_any</a>() {
<a name="l1221"><span class="linenum">1221</span></a>          return self::<a class="function" onClick="logFunction('has_manage_capability_on_any')" href="../_functions/has_manage_capability_on_any.html" onMouseOver="funcPopup(event,'has_manage_capability_on_any')">has_manage_capability_on_any</a>();
<a name="l1222"><span class="linenum">1222</span></a>      }
<a name="l1223"><span class="linenum">1223</span></a>  
<a name="l1224"><span class="linenum">1224</span></a>      <span class="comment">/**</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment">     * Returns true if the user can change the parent of any category.</span>
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">     * @return bool</span>
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">     */</span>
<a name="l1228"><span class="linenum">1228</span></a>      public static function <a class="function" onClick="logFunction('can_change_parent_any')" href="../_functions/can_change_parent_any.html" onMouseOver="funcPopup(event,'can_change_parent_any')">can_change_parent_any</a>() {
<a name="l1229"><span class="linenum">1229</span></a>          return self::<a class="function" onClick="logFunction('has_manage_capability_on_any')" href="../_functions/has_manage_capability_on_any.html" onMouseOver="funcPopup(event,'has_manage_capability_on_any')">has_manage_capability_on_any</a>();
<a name="l1230"><span class="linenum">1230</span></a>      }
<a name="l1231"><span class="linenum">1231</span></a>  
<a name="l1232"><span class="linenum">1232</span></a>      <span class="comment">/**</span>
<a name="l1233"><span class="linenum">1233</span></a>  <span class="comment">     * Returns number of subcategories visible to the current user</span>
<a name="l1234"><span class="linenum">1234</span></a>  <span class="comment">     *</span>
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment">     * @return int</span>
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">     */</span>
<a name="l1237"><span class="linenum">1237</span></a>      public function <a class="function" onClick="logFunction('get_children_count')" href="../_functions/get_children_count.html" onMouseOver="funcPopup(event,'get_children_count')">get_children_count</a>() {
<a name="l1238"><span class="linenum">1238</span></a>          <a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a> = self::<a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1239"><span class="linenum">1239</span></a>          <a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_not_visible_children_ids')" href="../_functions/get_not_visible_children_ids.html" onMouseOver="funcPopup(event,'get_not_visible_children_ids')">get_not_visible_children_ids</a>();
<a name="l1240"><span class="linenum">1240</span></a>          return <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it29154" onMouseOver="hilite(29154)" onMouseOut="lolite()" onClick="logVariable('sortedids')" href="../_variables/sortedids.html">$sortedids</a>) - <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it36448" onMouseOver="hilite(36448)" onMouseOut="lolite()" onClick="logVariable('invisibleids')" href="../_variables/invisibleids.html">$invisibleids</a>);
<a name="l1241"><span class="linenum">1241</span></a>      }
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>      <span class="comment">/**</span>
<a name="l1244"><span class="linenum">1244</span></a>  <span class="comment">     * Returns true if the category has ANY children, including those not visible to the user</span>
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment">     *</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">     */</span>
<a name="l1248"><span class="linenum">1248</span></a>      public function <a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>() {
<a name="l1249"><span class="linenum">1249</span></a>          <a class="var it36454" onMouseOver="hilite(36454)" onMouseOut="lolite()" onClick="logVariable('allchildren')" href="../_variables/allchildren.html">$allchildren</a> = self::<a class="function" onClick="logFunction('get_tree')" href="../_functions/get_tree.html" onMouseOver="funcPopup(event,'get_tree')">get_tree</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1250"><span class="linenum">1250</span></a>          return !empty(<a class="var it36454" onMouseOver="hilite(36454)" onMouseOut="lolite()" onClick="logVariable('allchildren')" href="../_variables/allchildren.html">$allchildren</a>);
<a name="l1251"><span class="linenum">1251</span></a>      }
<a name="l1252"><span class="linenum">1252</span></a>  
<a name="l1253"><span class="linenum">1253</span></a>      <span class="comment">/**</span>
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment">     * Returns true if the category has courses in it (count does not include courses</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment">     * in child categories)</span>
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment">     *</span>
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment">     * @return bool</span>
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment">     */</span>
<a name="l1259"><span class="linenum">1259</span></a>      public function <a class="function" onClick="logFunction('has_courses')" href="../_functions/has_courses.html" onMouseOver="funcPopup(event,'has_courses')">has_courses</a>() {
<a name="l1260"><span class="linenum">1260</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1261"><span class="linenum">1261</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;select 1 from {course} where category = ?&quot;,
<a name="l1262"><span class="linenum">1262</span></a>                  array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1263"><span class="linenum">1263</span></a>      }
<a name="l1264"><span class="linenum">1264</span></a>  
<a name="l1265"><span class="linenum">1265</span></a>      <span class="comment">/**</span>
<a name="l1266"><span class="linenum">1266</span></a>  <span class="comment">     * Searches courses</span>
<a name="l1267"><span class="linenum">1267</span></a>  <span class="comment">     *</span>
<a name="l1268"><span class="linenum">1268</span></a>  <span class="comment">     * List of found course ids is cached for 10 minutes. Cache may be purged prior</span>
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">     * to this when somebody edits courses or categories, however it is very</span>
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment">     * difficult to keep track of all possible changes that may affect list of courses.</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment">     *</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">     * @param array $search contains search criterias, such as:</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">     *     - search - search string</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">     *     - blocklist - id of block (if we are searching for courses containing specific block0</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">     *     - modulelist - name of module (if we are searching for courses containing specific module</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">     *     - tagid - id of tag</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">     * @param array $options display options, same as in get_courses() except 'recursive' is ignored -</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">     *                       search is always category-independent</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">     * @param array $requiredcapabilites List of capabilities required to see return course.</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">     * @return course_in_list[]</span>
<a name="l1281"><span class="linenum">1281</span></a>  <span class="comment">     */</span>
<a name="l1282"><span class="linenum">1282</span></a>      public static function <a class="function" onClick="logFunction('search_courses')" href="../_functions/search_courses.html" onMouseOver="funcPopup(event,'search_courses')">search_courses</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(), <a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a> = array()) {
<a name="l1283"><span class="linenum">1283</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1284"><span class="linenum">1284</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset']) ? <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset'] : 0;
<a name="l1285"><span class="linenum">1285</span></a>          <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit']) ? <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit'] : null;
<a name="l1286"><span class="linenum">1286</span></a>          <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort']) ? <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort'] : array('sortorder' =&gt; 1);
<a name="l1287"><span class="linenum">1287</span></a>  
<a name="l1288"><span class="linenum">1288</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l1289"><span class="linenum">1289</span></a>          <a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a> = 's-'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(
<a name="l1290"><span class="linenum">1290</span></a>              <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> + array('sort' =&gt; <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>) + array('requiredcapabilities' =&gt; <a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a>)
<a name="l1291"><span class="linenum">1291</span></a>          );
<a name="l1292"><span class="linenum">1292</span></a>          <a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a> = 'scnt-'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>);
<a name="l1293"><span class="linenum">1293</span></a>  
<a name="l1294"><span class="linenum">1294</span></a>          <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>);
<a name="l1295"><span class="linenum">1295</span></a>          if (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> !== false) {
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">            // We already cached last search result.</span>
<a name="l1297"><span class="linenum">1297</span></a>              <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l1298"><span class="linenum">1298</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l1299"><span class="linenum">1299</span></a>              if (!empty(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>)) {
<a name="l1300"><span class="linenum">1300</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'id');
<a name="l1301"><span class="linenum">1301</span></a>                  <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_course_records')" href="../_functions/get_course_records.html" onMouseOver="funcPopup(event,'get_course_records')">get_course_records</a>(&quot;c.id &quot;. <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">                // Preload course contacts if necessary - saves DB queries later to do it for each course separately.</span>
<a name="l1303"><span class="linenum">1303</span></a>                  if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts'])) {
<a name="l1304"><span class="linenum">1304</span></a>                      self::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1305"><span class="linenum">1305</span></a>                  }
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment">                // If option 'idonly' is specified no further action is needed, just return list of ids.</span>
<a name="l1307"><span class="linenum">1307</span></a>                  if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['idonly'])) {
<a name="l1308"><span class="linenum">1308</span></a>                      return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1309"><span class="linenum">1309</span></a>                  }
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment">                // Prepare the list of course_in_list objects.</span>
<a name="l1311"><span class="linenum">1311</span></a>                  foreach (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l1312"><span class="linenum">1312</span></a>                      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('course_in_list')" href="../_classes/course_in_list.html" onMouseOver="classPopup(event,'course_in_list')">course_in_list</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l1313"><span class="linenum">1313</span></a>                  }
<a name="l1314"><span class="linenum">1314</span></a>              }
<a name="l1315"><span class="linenum">1315</span></a>              return <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l1316"><span class="linenum">1316</span></a>          }
<a name="l1317"><span class="linenum">1317</span></a>  
<a name="l1318"><span class="linenum">1318</span></a>          <a class="var it36456" onMouseOver="hilite(36456)" onMouseOut="lolite()" onClick="logVariable('preloadcoursecontacts')" href="../_variables/preloadcoursecontacts.html">$preloadcoursecontacts</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts']);
<a name="l1319"><span class="linenum">1319</span></a>          unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts']);
<a name="l1320"><span class="linenum">1320</span></a>  
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">        // Empty search string will return all results.</span>
<a name="l1322"><span class="linenum">1322</span></a>          if (!isset(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['search'])) {
<a name="l1323"><span class="linenum">1323</span></a>              <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['search'] = '';
<a name="l1324"><span class="linenum">1324</span></a>          }
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>          if (empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['blocklist']) &amp;&amp; empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['modulelist']) &amp;&amp; empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['tagid'])) {
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">            // Search courses that have specified words in their names/summaries.</span>
<a name="l1328"><span class="linenum">1328</span></a>              <a class="var it7884" onMouseOver="hilite(7884)" onMouseOut="lolite()" onClick="logVariable('searchterms')" href="../_variables/searchterms.html">$searchterms</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('|\s+|', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['search']), 0, PREG_SPLIT_NO_EMPTY);
<a name="l1329"><span class="linenum">1329</span></a>  
<a name="l1330"><span class="linenum">1330</span></a>              <a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a> = <a class="function" onClick="logFunction('get_courses_search')" href="../_functions/get_courses_search.html" onMouseOver="funcPopup(event,'get_courses_search')">get_courses_search</a>(<a class="var it7884" onMouseOver="hilite(7884)" onMouseOut="lolite()" onClick="logVariable('searchterms')" href="../_variables/searchterms.html">$searchterms</a>, 'c.sortorder ASC', 0, 9999999, <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>, <a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a>);
<a name="l1331"><span class="linenum">1331</span></a>              self::<a class="function" onClick="logFunction('sort_records')" href="../_functions/sort_records.html" onMouseOver="funcPopup(event,'sort_records')">sort_records</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>, <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1332"><span class="linenum">1332</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>));
<a name="l1333"><span class="linenum">1333</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a>, <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../_variables/totalcount.html">$totalcount</a>);
<a name="l1334"><span class="linenum">1334</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>, true);
<a name="l1335"><span class="linenum">1335</span></a>          } else {
<a name="l1336"><span class="linenum">1336</span></a>              if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['blocklist'])) {
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">                // Search courses that have block with specified id.</span>
<a name="l1338"><span class="linenum">1338</span></a>                  <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('block', 'name', array('id' =&gt; <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['blocklist']));
<a name="l1339"><span class="linenum">1339</span></a>                  <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = 'ctx.id in (SELECT distinct bi.parentcontextid FROM {block_instances} bi
<a name="l1340"><span class="linenum">1340</span></a>                      WHERE bi.blockname = :blockname)';
<a name="l1341"><span class="linenum">1341</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('blockname' =&gt; <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l1342"><span class="linenum">1342</span></a>              } else if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['modulelist'])) {
<a name="l1343"><span class="linenum">1343</span></a>  <span class="comment">                // Search courses that have module with specified name.</span>
<a name="l1344"><span class="linenum">1344</span></a>                  <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = &quot;c.id IN (SELECT DISTINCT module.course &quot;.
<a name="l1345"><span class="linenum">1345</span></a>                          &quot;FROM {&quot;.<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['modulelist'].&quot;} module)&quot;;
<a name="l1346"><span class="linenum">1346</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l1347"><span class="linenum">1347</span></a>              } else if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['tagid'])) {
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment">                // Search courses that are tagged with the specified tag.</span>
<a name="l1349"><span class="linenum">1349</span></a>                  <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = &quot;c.id IN (SELECT t.itemid &quot;.
<a name="l1350"><span class="linenum">1350</span></a>                          &quot;FROM {tag_instance} t WHERE t.tagid = :tagid AND t.itemtype = :itemtype AND t.component = :component)&quot;;
<a name="l1351"><span class="linenum">1351</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('tagid' =&gt; <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['tagid'], 'itemtype' =&gt; 'course', 'component' =&gt; 'core');
<a name="l1352"><span class="linenum">1352</span></a>                  if (!empty(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['ctx'])) {
<a name="l1353"><span class="linenum">1353</span></a>                      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a> = isset(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['rec']) ? <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['rec'] : true;
<a name="l1354"><span class="linenum">1354</span></a>                      <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>['ctx']);
<a name="l1355"><span class="linenum">1355</span></a>                      if (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> &amp;&amp; <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>) {
<a name="l1356"><span class="linenum">1356</span></a>  <span class="comment">                        // Parent context is system context and recursive is set to yes.</span>
<a name="l1357"><span class="linenum">1357</span></a>  <span class="comment">                        // Nothing to filter - all courses fall into this condition.</span>
<a name="l1358"><span class="linenum">1358</span></a>                      } else if (<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>) {
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment">                        // Filter all courses in the parent context at any level.</span>
<a name="l1360"><span class="linenum">1360</span></a>                          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= ' AND ctx.path LIKE :contextpath';
<a name="l1361"><span class="linenum">1361</span></a>                          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextpath'] = <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('path')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/path.html">path</a> . '%';
<a name="l1362"><span class="linenum">1362</span></a>                      } else if (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>) {
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">                        // All courses in the given course category.</span>
<a name="l1364"><span class="linenum">1364</span></a>                          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= ' AND c.category = :category';
<a name="l1365"><span class="linenum">1365</span></a>                          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['category'] = <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>;
<a name="l1366"><span class="linenum">1366</span></a>                      } else {
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">                        // No courses will satisfy the context criterion, do not bother searching.</span>
<a name="l1368"><span class="linenum">1368</span></a>                          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = '1=0';
<a name="l1369"><span class="linenum">1369</span></a>                      }
<a name="l1370"><span class="linenum">1370</span></a>                  }
<a name="l1371"><span class="linenum">1371</span></a>              } else {
<a name="l1372"><span class="linenum">1372</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('No criteria is specified while searching courses', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1373"><span class="linenum">1373</span></a>                  return array();
<a name="l1374"><span class="linenum">1374</span></a>              }
<a name="l1375"><span class="linenum">1375</span></a>              <a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a> = self::<a class="function" onClick="logFunction('get_course_records')" href="../_functions/get_course_records.html" onMouseOver="funcPopup(event,'get_course_records')">get_course_records</a>(<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, true);
<a name="l1376"><span class="linenum">1376</span></a>              if (!empty(<a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a>)) {
<a name="l1377"><span class="linenum">1377</span></a>                  foreach (<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1378"><span class="linenum">1378</span></a>                      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1379"><span class="linenum">1379</span></a>                      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1380"><span class="linenum">1380</span></a>                      if (!<a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a>, <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l1381"><span class="linenum">1381</span></a>                          unset(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l1382"><span class="linenum">1382</span></a>                      }
<a name="l1383"><span class="linenum">1383</span></a>                  }
<a name="l1384"><span class="linenum">1384</span></a>              }
<a name="l1385"><span class="linenum">1385</span></a>              self::<a class="function" onClick="logFunction('sort_records')" href="../_functions/sort_records.html" onMouseOver="funcPopup(event,'sort_records')">sort_records</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>, <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1386"><span class="linenum">1386</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>));
<a name="l1387"><span class="linenum">1387</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a>, <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>));
<a name="l1388"><span class="linenum">1388</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it2641" onMouseOver="hilite(2641)" onMouseOut="lolite()" onClick="logVariable('courselist')" href="../_variables/courselist.html">$courselist</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>, true);
<a name="l1389"><span class="linenum">1389</span></a>          }
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment">        // Preload course contacts if necessary - saves DB queries later to do it for each course separately.</span>
<a name="l1392"><span class="linenum">1392</span></a>          if (!empty(<a class="var it36456" onMouseOver="hilite(36456)" onMouseOut="lolite()" onClick="logVariable('preloadcoursecontacts')" href="../_variables/preloadcoursecontacts.html">$preloadcoursecontacts</a>)) {
<a name="l1393"><span class="linenum">1393</span></a>              self::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1394"><span class="linenum">1394</span></a>          }
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment">        // If option 'idonly' is specified no further action is needed, just return list of ids.</span>
<a name="l1396"><span class="linenum">1396</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['idonly'])) {
<a name="l1397"><span class="linenum">1397</span></a>              return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1398"><span class="linenum">1398</span></a>          }
<a name="l1399"><span class="linenum">1399</span></a>  <span class="comment">        // Prepare the list of course_in_list objects.</span>
<a name="l1400"><span class="linenum">1400</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l1401"><span class="linenum">1401</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1402"><span class="linenum">1402</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('course_in_list')" href="../_classes/course_in_list.html" onMouseOver="classPopup(event,'course_in_list')">course_in_list</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l1403"><span class="linenum">1403</span></a>          }
<a name="l1404"><span class="linenum">1404</span></a>          return <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l1405"><span class="linenum">1405</span></a>      }
<a name="l1406"><span class="linenum">1406</span></a>  
<a name="l1407"><span class="linenum">1407</span></a>      <span class="comment">/**</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">     * Returns number of courses in the search results</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">     *</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">     * It is recommended to call this function after {@link coursecat::search_courses()}</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">     * and not before because only course ids are cached. Otherwise search_courses() may</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment">     * perform extra DB queries.</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment">     *</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment">     * @param array $search search criteria, see method search_courses() for more details</span>
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment">     * @param array $options display options. They do not affect the result but</span>
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment">     *     the 'sort' property is used in cache key for storing list of course ids</span>
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment">     * @param array $requiredcapabilites List of capabilities required to see return course.</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment">     * @return int</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment">     */</span>
<a name="l1420"><span class="linenum">1420</span></a>      public static function <a class="function" onClick="logFunction('search_courses_count')" href="../_functions/search_courses_count.html" onMouseOver="funcPopup(event,'search_courses_count')">search_courses_count</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(), <a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a> = array()) {
<a name="l1421"><span class="linenum">1421</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l1422"><span class="linenum">1422</span></a>          <a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a> = 'scnt-'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>) . <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a>);
<a name="l1423"><span class="linenum">1423</span></a>          if ((<a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a>)) === false) {
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">            // Cached value not found. Retrieve ALL courses and return their count.</span>
<a name="l1425"><span class="linenum">1425</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset']);
<a name="l1426"><span class="linenum">1426</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit']);
<a name="l1427"><span class="linenum">1427</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['summary']);
<a name="l1428"><span class="linenum">1428</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts']);
<a name="l1429"><span class="linenum">1429</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['idonly'] = true;
<a name="l1430"><span class="linenum">1430</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = self::<a class="function" onClick="logFunction('search_courses')" href="../_functions/search_courses.html" onMouseOver="funcPopup(event,'search_courses')">search_courses</a>(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, <a class="var it30691" onMouseOver="hilite(30691)" onMouseOut="lolite()" onClick="logVariable('requiredcapabilities')" href="../_variables/requiredcapabilities.html">$requiredcapabilities</a>);
<a name="l1431"><span class="linenum">1431</span></a>              <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l1432"><span class="linenum">1432</span></a>          }
<a name="l1433"><span class="linenum">1433</span></a>          return <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>;
<a name="l1434"><span class="linenum">1434</span></a>      }
<a name="l1435"><span class="linenum">1435</span></a>  
<a name="l1436"><span class="linenum">1436</span></a>      <span class="comment">/**</span>
<a name="l1437"><span class="linenum">1437</span></a>  <span class="comment">     * Retrieves the list of courses accessible by user</span>
<a name="l1438"><span class="linenum">1438</span></a>  <span class="comment">     *</span>
<a name="l1439"><span class="linenum">1439</span></a>  <span class="comment">     * Not all information is cached, try to avoid calling this method</span>
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">     * twice in the same request.</span>
<a name="l1441"><span class="linenum">1441</span></a>  <span class="comment">     *</span>
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">     * The following fields are always retrieved:</span>
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment">     * - id, visible, fullname, shortname, idnumber, category, sortorder</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">     *</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">     * If you plan to use properties/methods course_in_list::$summary and/or</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment">     * course_in_list::get_course_contacts()</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment">     * you can preload this information using appropriate 'options'. Otherwise</span>
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment">     * they will be retrieved from DB on demand and it may end with bigger DB load.</span>
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment">     *</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">     * Note that method course_in_list::has_summary() will not perform additional</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment">     * DB queries even if $options['summary'] is not specified</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">     *</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">     * List of found course ids is cached for 10 minutes. Cache may be purged prior</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     * to this when somebody edits courses or categories, however it is very</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * difficult to keep track of all possible changes that may affect list of courses.</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     *</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     * @param array $options options for retrieving children</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     *    - recursive - return courses from subcategories as well. Use with care,</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     *      this may be a huge list!</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment">     *    - summary - preloads fields 'summary' and 'summaryformat'</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment">     *    - coursecontacts - preloads course contacts</span>
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment">     *    - sort - list of fields to sort. Example</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment">     *             array('idnumber' =&gt; 1, 'shortname' =&gt; 1, 'id' =&gt; -1)</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment">     *             will sort by idnumber asc, shortname asc and id desc.</span>
<a name="l1465"><span class="linenum">1465</span></a>  <span class="comment">     *             Default: array('sortorder' =&gt; 1)</span>
<a name="l1466"><span class="linenum">1466</span></a>  <span class="comment">     *             Only cached fields may be used for sorting!</span>
<a name="l1467"><span class="linenum">1467</span></a>  <span class="comment">     *    - offset</span>
<a name="l1468"><span class="linenum">1468</span></a>  <span class="comment">     *    - limit - maximum number of children to return, 0 or null for no limit</span>
<a name="l1469"><span class="linenum">1469</span></a>  <span class="comment">     *    - idonly - returns the array or course ids instead of array of objects</span>
<a name="l1470"><span class="linenum">1470</span></a>  <span class="comment">     *               used only in get_courses_count()</span>
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment">     * @return course_in_list[]</span>
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">     */</span>
<a name="l1473"><span class="linenum">1473</span></a>      public function <a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l1474"><span class="linenum">1474</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1475"><span class="linenum">1475</span></a>          <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('recursive')" href="../_variables/recursive.html">$recursive</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['recursive']);
<a name="l1476"><span class="linenum">1476</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset']) ? <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset'] : 0;
<a name="l1477"><span class="linenum">1477</span></a>          <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit']) ? <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit'] : null;
<a name="l1478"><span class="linenum">1478</span></a>          <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a> = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort']) ? <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['sort'] : array('sortorder' =&gt; 1);
<a name="l1479"><span class="linenum">1479</span></a>  
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment">        // Check if this category is hidden.</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">        // Also 0-category never has courses unless this is recursive call.</span>
<a name="l1482"><span class="linenum">1482</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>() || (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; !<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('recursive')" href="../_variables/recursive.html">$recursive</a>)) {
<a name="l1483"><span class="linenum">1483</span></a>              return array();
<a name="l1484"><span class="linenum">1484</span></a>          }
<a name="l1485"><span class="linenum">1485</span></a>  
<a name="l1486"><span class="linenum">1486</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l1487"><span class="linenum">1487</span></a>          <a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a> = 'l-'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. '-'. (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['recursive']) ? 'r' : '').
<a name="l1488"><span class="linenum">1488</span></a>                   '-'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1489"><span class="linenum">1489</span></a>          <a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a> = 'lcnt-'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. '-'. (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['recursive']) ? 'r' : '');
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">        // Check if we have already cached results.</span>
<a name="l1492"><span class="linenum">1492</span></a>          <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>);
<a name="l1493"><span class="linenum">1493</span></a>          if (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> !== false) {
<a name="l1494"><span class="linenum">1494</span></a>  <span class="comment">            // We already cached last search result and it did not expire yet.</span>
<a name="l1495"><span class="linenum">1495</span></a>              <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l1496"><span class="linenum">1496</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l1497"><span class="linenum">1497</span></a>              if (!empty(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>)) {
<a name="l1498"><span class="linenum">1498</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'id');
<a name="l1499"><span class="linenum">1499</span></a>                  <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = self::<a class="function" onClick="logFunction('get_course_records')" href="../_functions/get_course_records.html" onMouseOver="funcPopup(event,'get_course_records')">get_course_records</a>(&quot;c.id &quot;. <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1500"><span class="linenum">1500</span></a>  <span class="comment">                // Preload course contacts if necessary - saves DB queries later to do it for each course separately.</span>
<a name="l1501"><span class="linenum">1501</span></a>                  if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts'])) {
<a name="l1502"><span class="linenum">1502</span></a>                      self::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1503"><span class="linenum">1503</span></a>                  }
<a name="l1504"><span class="linenum">1504</span></a>  <span class="comment">                // If option 'idonly' is specified no further action is needed, just return list of ids.</span>
<a name="l1505"><span class="linenum">1505</span></a>                  if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['idonly'])) {
<a name="l1506"><span class="linenum">1506</span></a>                      return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l1507"><span class="linenum">1507</span></a>                  }
<a name="l1508"><span class="linenum">1508</span></a>  <span class="comment">                // Prepare the list of course_in_list objects.</span>
<a name="l1509"><span class="linenum">1509</span></a>                  foreach (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l1510"><span class="linenum">1510</span></a>                      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('course_in_list')" href="../_classes/course_in_list.html" onMouseOver="classPopup(event,'course_in_list')">course_in_list</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l1511"><span class="linenum">1511</span></a>                  }
<a name="l1512"><span class="linenum">1512</span></a>              }
<a name="l1513"><span class="linenum">1513</span></a>              return <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l1514"><span class="linenum">1514</span></a>          }
<a name="l1515"><span class="linenum">1515</span></a>  
<a name="l1516"><span class="linenum">1516</span></a>  <span class="comment">        // Retrieve list of courses in category.</span>
<a name="l1517"><span class="linenum">1517</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = 'c.id &lt;&gt; :siteid';
<a name="l1518"><span class="linenum">1518</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('siteid' =&gt; <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>);
<a name="l1519"><span class="linenum">1519</span></a>          if (<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('recursive')" href="../_variables/recursive.html">$recursive</a>) {
<a name="l1520"><span class="linenum">1520</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1521"><span class="linenum">1521</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1522"><span class="linenum">1522</span></a>                  <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= ' AND ctx.path like :path';
<a name="l1523"><span class="linenum">1523</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['path'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>. '/%';
<a name="l1524"><span class="linenum">1524</span></a>              }
<a name="l1525"><span class="linenum">1525</span></a>          } else {
<a name="l1526"><span class="linenum">1526</span></a>              <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= ' AND c.category = :categoryid';
<a name="l1527"><span class="linenum">1527</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['categoryid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1528"><span class="linenum">1528</span></a>          }
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">        // Get list of courses without preloaded coursecontacts because we don't need them for every course.</span>
<a name="l1530"><span class="linenum">1530</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_records')" href="../_functions/get_course_records.html" onMouseOver="funcPopup(event,'get_course_records')">get_course_records</a>(<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, array_diff_key(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, array('coursecontacts' =&gt; 1)), true);
<a name="l1531"><span class="linenum">1531</span></a>  
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment">        // Sort and cache list.</span>
<a name="l1533"><span class="linenum">1533</span></a>          self::<a class="function" onClick="logFunction('sort_records')" href="../_functions/sort_records.html" onMouseOver="funcPopup(event,'sort_records')">sort_records</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>, <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a>);
<a name="l1534"><span class="linenum">1534</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>));
<a name="l1535"><span class="linenum">1535</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a>, <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>));
<a name="l1536"><span class="linenum">1536</span></a>  
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment">        // Apply offset/limit, convert to course_in_list and return.</span>
<a name="l1538"><span class="linenum">1538</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l1539"><span class="linenum">1539</span></a>          if (isset(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>)) {
<a name="l1540"><span class="linenum">1540</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> || <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>) {
<a name="l1541"><span class="linenum">1541</span></a>                  <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>, true);
<a name="l1542"><span class="linenum">1542</span></a>              }
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment">            // Preload course contacts if necessary - saves DB queries later to do it for each course separately.</span>
<a name="l1544"><span class="linenum">1544</span></a>              if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts'])) {
<a name="l1545"><span class="linenum">1545</span></a>                  self::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>);
<a name="l1546"><span class="linenum">1546</span></a>              }
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">            // If option 'idonly' is specified no further action is needed, just return list of ids.</span>
<a name="l1548"><span class="linenum">1548</span></a>              if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['idonly'])) {
<a name="l1549"><span class="linenum">1549</span></a>                  return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>);
<a name="l1550"><span class="linenum">1550</span></a>              }
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">            // Prepare the list of course_in_list objects.</span>
<a name="l1552"><span class="linenum">1552</span></a>              foreach (<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1553"><span class="linenum">1553</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('course_in_list')" href="../_classes/course_in_list.html" onMouseOver="classPopup(event,'course_in_list')">course_in_list</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l1554"><span class="linenum">1554</span></a>              }
<a name="l1555"><span class="linenum">1555</span></a>          }
<a name="l1556"><span class="linenum">1556</span></a>          return <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l1557"><span class="linenum">1557</span></a>      }
<a name="l1558"><span class="linenum">1558</span></a>  
<a name="l1559"><span class="linenum">1559</span></a>      <span class="comment">/**</span>
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">     * Returns number of courses visible to the user</span>
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment">     *</span>
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment">     * @param array $options similar to get_courses() except some options do not affect</span>
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment">     *     number of courses (i.e. sort, summary, offset, limit etc.)</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment">     * @return int</span>
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment">     */</span>
<a name="l1566"><span class="linenum">1566</span></a>      public function <a class="function" onClick="logFunction('get_courses_count')" href="../_functions/get_courses_count.html" onMouseOver="funcPopup(event,'get_courses_count')">get_courses_count</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l1567"><span class="linenum">1567</span></a>          <a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a> = 'lcnt-'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. '-'. (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['recursive']) ? 'r' : '');
<a name="l1568"><span class="linenum">1568</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l1569"><span class="linenum">1569</span></a>          if ((<a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36455" onMouseOver="hilite(36455)" onMouseOut="lolite()" onClick="logVariable('cntcachekey')" href="../_variables/cntcachekey.html">$cntcachekey</a>)) === false) {
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment">            // Cached value not found. Retrieve ALL courses and return their count.</span>
<a name="l1571"><span class="linenum">1571</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['offset']);
<a name="l1572"><span class="linenum">1572</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['limit']);
<a name="l1573"><span class="linenum">1573</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['summary']);
<a name="l1574"><span class="linenum">1574</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['coursecontacts']);
<a name="l1575"><span class="linenum">1575</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['idonly'] = true;
<a name="l1576"><span class="linenum">1576</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_courses')" href="../_functions/get_courses.html" onMouseOver="funcPopup(event,'get_courses')">get_courses</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1577"><span class="linenum">1577</span></a>              <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l1578"><span class="linenum">1578</span></a>          }
<a name="l1579"><span class="linenum">1579</span></a>          return <a class="var it5706" onMouseOver="hilite(5706)" onMouseOut="lolite()" onClick="logVariable('cnt')" href="../_variables/cnt.html">$cnt</a>;
<a name="l1580"><span class="linenum">1580</span></a>      }
<a name="l1581"><span class="linenum">1581</span></a>  
<a name="l1582"><span class="linenum">1582</span></a>      <span class="comment">/**</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">     * Returns true if the user is able to delete this category.</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     *</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     * Note if this category contains any courses this isn't a full check, it will need to be accompanied by a call to either</span>
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">     * {@link coursecat::can_delete_full()} or {@link coursecat::can_move_content_to()} depending upon what the user wished to do.</span>
<a name="l1587"><span class="linenum">1587</span></a>  <span class="comment">     *</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1589"><span class="linenum">1589</span></a>  <span class="comment">     */</span>
<a name="l1590"><span class="linenum">1590</span></a>      public function <a class="function" onClick="logFunction('can_delete')" href="../_functions/can_delete.html" onMouseOver="funcPopup(event,'can_delete')">can_delete</a>() {
<a name="l1591"><span class="linenum">1591</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>()) {
<a name="l1592"><span class="linenum">1592</span></a>              return false;
<a name="l1593"><span class="linenum">1593</span></a>          }
<a name="l1594"><span class="linenum">1594</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('parent_has_manage_capability')" href="../_functions/parent_has_manage_capability.html" onMouseOver="funcPopup(event,'parent_has_manage_capability')">parent_has_manage_capability</a>();
<a name="l1595"><span class="linenum">1595</span></a>      }
<a name="l1596"><span class="linenum">1596</span></a>  
<a name="l1597"><span class="linenum">1597</span></a>      <span class="comment">/**</span>
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">     * Returns true if user can delete current category and all its contents</span>
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment">     *</span>
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment">     * To be able to delete course category the user must have permission</span>
<a name="l1601"><span class="linenum">1601</span></a>  <span class="comment">     * 'moodle/category:manage' in ALL child course categories AND</span>
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment">     * be able to delete all courses</span>
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">     *</span>
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment">     * @return bool</span>
<a name="l1605"><span class="linenum">1605</span></a>  <span class="comment">     */</span>
<a name="l1606"><span class="linenum">1606</span></a>      public function <a class="function" onClick="logFunction('can_delete_full')" href="../_functions/can_delete_full.html" onMouseOver="funcPopup(event,'can_delete_full')">can_delete_full</a>() {
<a name="l1607"><span class="linenum">1607</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1608"><span class="linenum">1608</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1609"><span class="linenum">1609</span></a>  <span class="comment">            // Fool-proof.</span>
<a name="l1610"><span class="linenum">1610</span></a>              return false;
<a name="l1611"><span class="linenum">1611</span></a>          }
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l1614"><span class="linenum">1614</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>() ||
<a name="l1615"><span class="linenum">1615</span></a>                  !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1616"><span class="linenum">1616</span></a>              return false;
<a name="l1617"><span class="linenum">1617</span></a>          }
<a name="l1618"><span class="linenum">1618</span></a>  
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment">        // Check all child categories (not only direct children).</span>
<a name="l1620"><span class="linenum">1620</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1621"><span class="linenum">1621</span></a>          <a class="var it3677" onMouseOver="hilite(3677)" onMouseOut="lolite()" onClick="logVariable('childcategories')" href="../_variables/childcategories.html">$childcategories</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>('SELECT c.id, c.visible, '. <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>.
<a name="l1622"><span class="linenum">1622</span></a>              ' FROM {context} ctx '.
<a name="l1623"><span class="linenum">1623</span></a>              ' JOIN {course_categories} c ON c.id = ctx.instanceid'.
<a name="l1624"><span class="linenum">1624</span></a>              ' WHERE ctx.path like ? AND ctx.contextlevel = ?',
<a name="l1625"><span class="linenum">1625</span></a>                  array(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>. '/%', <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>));
<a name="l1626"><span class="linenum">1626</span></a>          foreach (<a class="var it3677" onMouseOver="hilite(3677)" onMouseOut="lolite()" onClick="logVariable('childcategories')" href="../_variables/childcategories.html">$childcategories</a> as <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>) {
<a name="l1627"><span class="linenum">1627</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>);
<a name="l1628"><span class="linenum">1628</span></a>              <a class="var it8297" onMouseOver="hilite(8297)" onMouseOut="lolite()" onClick="logVariable('childcontext')" href="../_variables/childcontext.html">$childcontext</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a onClick="logVariable('id')" class="var it44229" onMouseOver="hilite(44229)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1629"><span class="linenum">1629</span></a>              if ((!<a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a onClick="logVariable('visible')" class="var it44229" onMouseOver="hilite(44229)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:viewhiddencategories', <a class="var it8297" onMouseOver="hilite(8297)" onMouseOut="lolite()" onClick="logVariable('childcontext')" href="../_variables/childcontext.html">$childcontext</a>)) ||
<a name="l1630"><span class="linenum">1630</span></a>                      !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it8297" onMouseOver="hilite(8297)" onMouseOut="lolite()" onClick="logVariable('childcontext')" href="../_variables/childcontext.html">$childcontext</a>)) {
<a name="l1631"><span class="linenum">1631</span></a>                  return false;
<a name="l1632"><span class="linenum">1632</span></a>              }
<a name="l1633"><span class="linenum">1633</span></a>          }
<a name="l1634"><span class="linenum">1634</span></a>  
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment">        // Check courses.</span>
<a name="l1636"><span class="linenum">1636</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1637"><span class="linenum">1637</span></a>          <a class="var it36458" onMouseOver="hilite(36458)" onMouseOut="lolite()" onClick="logVariable('coursescontexts')" href="../_variables/coursescontexts.html">$coursescontexts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>('SELECT ctx.instanceid AS courseid, '.
<a name="l1638"><span class="linenum">1638</span></a>                      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>. ' FROM {context} ctx '.
<a name="l1639"><span class="linenum">1639</span></a>                      'WHERE ctx.path like :pathmask and ctx.contextlevel = :courselevel',
<a name="l1640"><span class="linenum">1640</span></a>                  array('pathmask' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>. '/%',
<a name="l1641"><span class="linenum">1641</span></a>                      'courselevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>));
<a name="l1642"><span class="linenum">1642</span></a>          foreach (<a class="var it36458" onMouseOver="hilite(36458)" onMouseOut="lolite()" onClick="logVariable('coursescontexts')" href="../_variables/coursescontexts.html">$coursescontexts</a> as <a class="var it36459" onMouseOver="hilite(36459)" onMouseOut="lolite()" onClick="logVariable('ctxrecord')" href="../_variables/ctxrecord.html">$ctxrecord</a>) {
<a name="l1643"><span class="linenum">1643</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it36459" onMouseOver="hilite(36459)" onMouseOut="lolite()" onClick="logVariable('ctxrecord')" href="../_variables/ctxrecord.html">$ctxrecord</a>);
<a name="l1644"><span class="linenum">1644</span></a>              if (!<a class="function" onClick="logFunction('can_delete_course')" href="../_functions/can_delete_course.html" onMouseOver="funcPopup(event,'can_delete_course')">can_delete_course</a>(<a class="var it36459" onMouseOver="hilite(36459)" onMouseOut="lolite()" onClick="logVariable('ctxrecord')" href="../_variables/ctxrecord.html">$ctxrecord</a>-&gt;<a onClick="logVariable('courseid')" class="var it44230" onMouseOver="hilite(44230)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>)) {
<a name="l1645"><span class="linenum">1645</span></a>                  return false;
<a name="l1646"><span class="linenum">1646</span></a>              }
<a name="l1647"><span class="linenum">1647</span></a>          }
<a name="l1648"><span class="linenum">1648</span></a>  
<a name="l1649"><span class="linenum">1649</span></a>          return true;
<a name="l1650"><span class="linenum">1650</span></a>      }
<a name="l1651"><span class="linenum">1651</span></a>  
<a name="l1652"><span class="linenum">1652</span></a>      <span class="comment">/**</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment">     * Recursively delete category including all subcategories and courses</span>
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment">     *</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">     * Function {@link coursecat::can_delete_full()} MUST be called prior</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment">     * to calling this function because there is no capability check</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">     * inside this function</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment">     *</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment">     * @param boolean $showfeedback display some notices</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment">     * @return array return deleted courses</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment">     */</span>
<a name="l1663"><span class="linenum">1663</span></a>      public function <a class="function" onClick="logFunction('delete_full')" href="../_functions/delete_full.html" onMouseOver="funcPopup(event,'delete_full')">delete_full</a>(<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a> = true) {
<a name="l1664"><span class="linenum">1664</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1667"><span class="linenum">1667</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/questionlib.php');
<a name="l1668"><span class="linenum">1668</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../cohort/lib.php.html">/cohort/lib.php</a>');
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">        // Make sure we won't timeout when deleting a lot of courses.</span>
<a name="l1671"><span class="linenum">1671</span></a>          <a class="var it36460" onMouseOver="hilite(36460)" onMouseOut="lolite()" onClick="logVariable('settimeout')" href="../_variables/settimeout.html">$settimeout</a> = <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l1672"><span class="linenum">1672</span></a>  
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">        // Allow plugins to use this category before we completely delete it.</span>
<a name="l1674"><span class="linenum">1674</span></a>          if (<a class="var it10064" onMouseOver="hilite(10064)" onMouseOut="lolite()" onClick="logVariable('pluginsfunction')" href="../_variables/pluginsfunction.html">$pluginsfunction</a> = <a class="function" onClick="logFunction('get_plugins_with_function')" href="../_functions/get_plugins_with_function.html" onMouseOver="funcPopup(event,'get_plugins_with_function')">get_plugins_with_function</a>('pre_course_category_delete')) {
<a name="l1675"><span class="linenum">1675</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_db_record')" href="../_functions/get_db_record.html" onMouseOver="funcPopup(event,'get_db_record')">get_db_record</a>();
<a name="l1676"><span class="linenum">1676</span></a>              foreach (<a class="var it10064" onMouseOver="hilite(10064)" onMouseOut="lolite()" onClick="logVariable('pluginsfunction')" href="../_variables/pluginsfunction.html">$pluginsfunction</a> as <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> =&gt; <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>) {
<a name="l1677"><span class="linenum">1677</span></a>                  foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> as <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('pluginfunction')" href="../_variables/pluginfunction.html">$pluginfunction</a>) {
<a name="l1678"><span class="linenum">1678</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('pluginfunction')" href="../_variables/pluginfunction.html">$pluginfunction</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l1679"><span class="linenum">1679</span></a>                  }
<a name="l1680"><span class="linenum">1680</span></a>              }
<a name="l1681"><span class="linenum">1681</span></a>          }
<a name="l1682"><span class="linenum">1682</span></a>  
<a name="l1683"><span class="linenum">1683</span></a>          <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('deletedcourses')" href="../_variables/deletedcourses.html">$deletedcourses</a> = array();
<a name="l1684"><span class="linenum">1684</span></a>  
<a name="l1685"><span class="linenum">1685</span></a>  <span class="comment">        // Get children. Note, we don't want to use cache here because it would be rebuilt too often.</span>
<a name="l1686"><span class="linenum">1686</span></a>          <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_categories', array('parent' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), 'sortorder ASC');
<a name="l1687"><span class="linenum">1687</span></a>          foreach (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1688"><span class="linenum">1688</span></a>              <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a> = <span class="keyword">new </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l1689"><span class="linenum">1689</span></a>              <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('deletedcourses')" href="../_variables/deletedcourses.html">$deletedcourses</a> += <a class="var it15348" onMouseOver="hilite(15348)" onMouseOut="lolite()" onClick="logVariable('coursecat')" href="../_variables/coursecat.html">$coursecat</a>-&gt;<a class="function" onClick="logFunction('delete_full')" href="../_functions/delete_full.html" onMouseOver="funcPopup(event,'delete_full')">delete_full</a>(<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>);
<a name="l1690"><span class="linenum">1690</span></a>          }
<a name="l1691"><span class="linenum">1691</span></a>  
<a name="l1692"><span class="linenum">1692</span></a>          if (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course', array('category' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), 'sortorder ASC')) {
<a name="l1693"><span class="linenum">1693</span></a>              foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1694"><span class="linenum">1694</span></a>                  if (!<a class="function" onClick="logFunction('delete_course')" href="../_functions/delete_course.html" onMouseOver="funcPopup(event,'delete_course')">delete_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false)) {
<a name="l1695"><span class="linenum">1695</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotdeletecategorycourse', '', '', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>);
<a name="l1696"><span class="linenum">1696</span></a>                  }
<a name="l1697"><span class="linenum">1697</span></a>                  <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('deletedcourses')" href="../_variables/deletedcourses.html">$deletedcourses</a>[] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l1698"><span class="linenum">1698</span></a>              }
<a name="l1699"><span class="linenum">1699</span></a>          }
<a name="l1700"><span class="linenum">1700</span></a>  
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment">        // Move or delete cohorts in this context.</span>
<a name="l1702"><span class="linenum">1702</span></a>          <a class="function" onClick="logFunction('cohort_delete_category')" href="../_functions/cohort_delete_category.html" onMouseOver="funcPopup(event,'cohort_delete_category')">cohort_delete_category</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1703"><span class="linenum">1703</span></a>  
<a name="l1704"><span class="linenum">1704</span></a>  <span class="comment">        // Now delete anything that may depend on course category context.</span>
<a name="l1705"><span class="linenum">1705</span></a>          <a class="function" onClick="logFunction('grade_course_category_delete')" href="../_functions/grade_course_category_delete.html" onMouseOver="funcPopup(event,'grade_course_category_delete')">grade_course_category_delete</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 0, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>);
<a name="l1706"><span class="linenum">1706</span></a>          if (!<a class="function" onClick="logFunction('question_delete_course_category')" href="../_functions/question_delete_course_category.html" onMouseOver="funcPopup(event,'question_delete_course_category')">question_delete_course_category</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, 0, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>)) {
<a name="l1707"><span class="linenum">1707</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotdeletecategoryquestions', '', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_formatted_name')" href="../_functions/get_formatted_name.html" onMouseOver="funcPopup(event,'get_formatted_name')">get_formatted_name</a>());
<a name="l1708"><span class="linenum">1708</span></a>          }
<a name="l1709"><span class="linenum">1709</span></a>  
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment">        // Finally delete the category and it's context.</span>
<a name="l1711"><span class="linenum">1711</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_categories', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1712"><span class="linenum">1712</span></a>  
<a name="l1713"><span class="linenum">1713</span></a>          <a class="var it36461" onMouseOver="hilite(36461)" onMouseOut="lolite()" onClick="logVariable('coursecatcontext')" href="../_variables/coursecatcontext.html">$coursecatcontext</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1714"><span class="linenum">1714</span></a>          <a class="var it36461" onMouseOver="hilite(36461)" onMouseOut="lolite()" onClick="logVariable('coursecatcontext')" href="../_variables/coursecatcontext.html">$coursecatcontext</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1715"><span class="linenum">1715</span></a>  
<a name="l1716"><span class="linenum">1716</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l1717"><span class="linenum">1717</span></a>  
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment">        // Trigger a course category deleted event.</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment">        /* @var \core\event\course_category_deleted $event */</span>
<a name="l1720"><span class="linenum">1720</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_deleted')" href="../_classes/course_category_deleted.html" onMouseOver="classPopup(event,'course_category_deleted')">course_category_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1721"><span class="linenum">1721</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1722"><span class="linenum">1722</span></a>              'context' =&gt; <a class="var it36461" onMouseOver="hilite(36461)" onMouseOut="lolite()" onClick="logVariable('coursecatcontext')" href="../_variables/coursecatcontext.html">$coursecatcontext</a>,
<a name="l1723"><span class="linenum">1723</span></a>              'other' =&gt; array('name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)
<a name="l1724"><span class="linenum">1724</span></a>          ));
<a name="l1725"><span class="linenum">1725</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_coursecat')" href="../_functions/set_coursecat.html" onMouseOver="funcPopup(event,'set_coursecat')">set_coursecat</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1726"><span class="linenum">1726</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1727"><span class="linenum">1727</span></a>  
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment">        // If we deleted $CFG-&gt;defaultrequestcategory, make it point somewhere else.</span>
<a name="l1729"><span class="linenum">1729</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultrequestcategory')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultrequestcategory.html">defaultrequestcategory</a>) {
<a name="l1730"><span class="linenum">1730</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('defaultrequestcategory', <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_categories', '<a class="phpfunction" onClick="logFunction('MIN')" href="../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">MIN</a>(id)', array('parent' =&gt; 0)));
<a name="l1731"><span class="linenum">1731</span></a>          }
<a name="l1732"><span class="linenum">1732</span></a>          return <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('deletedcourses')" href="../_variables/deletedcourses.html">$deletedcourses</a>;
<a name="l1733"><span class="linenum">1733</span></a>      }
<a name="l1734"><span class="linenum">1734</span></a>  
<a name="l1735"><span class="linenum">1735</span></a>      <span class="comment">/**</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">     * Checks if user can delete this category and move content (courses, subcategories and questions)</span>
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">     * to another category. If yes returns the array of possible target categories names</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">     *</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">     * If user can not manage this category or it is completely empty - empty array will be returned</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment">     *</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment">     * @return array</span>
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment">     */</span>
<a name="l1743"><span class="linenum">1743</span></a>      public function <a class="function" onClick="logFunction('move_content_targets_list')" href="../_functions/move_content_targets_list.html" onMouseOver="funcPopup(event,'move_content_targets_list')">move_content_targets_list</a>() {
<a name="l1744"><span class="linenum">1744</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1745"><span class="linenum">1745</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l1746"><span class="linenum">1746</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l1747"><span class="linenum">1747</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>() ||
<a name="l1748"><span class="linenum">1748</span></a>                  !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1749"><span class="linenum">1749</span></a>  <span class="comment">            // User is not able to manage current category, he is not able to delete it.</span>
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment">            // No possible target categories.</span>
<a name="l1751"><span class="linenum">1751</span></a>              return array();
<a name="l1752"><span class="linenum">1752</span></a>          }
<a name="l1753"><span class="linenum">1753</span></a>  
<a name="l1754"><span class="linenum">1754</span></a>          <a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a> = array();
<a name="l1755"><span class="linenum">1755</span></a>  <span class="comment">        // If this category has courses in it, user must have 'course:create' capability in target category.</span>
<a name="l1756"><span class="linenum">1756</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_courses')" href="../_functions/has_courses.html" onMouseOver="funcPopup(event,'has_courses')">has_courses</a>()) {
<a name="l1757"><span class="linenum">1757</span></a>              <a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>[] = 'moodle/course:create';
<a name="l1758"><span class="linenum">1758</span></a>          }
<a name="l1759"><span class="linenum">1759</span></a>  <span class="comment">        // If this category has subcategories or questions, user must have 'category:manage' capability in target category.</span>
<a name="l1760"><span class="linenum">1760</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>() || <a class="function" onClick="logFunction('question_context_has_any_questions')" href="../_functions/question_context_has_any_questions.html" onMouseOver="funcPopup(event,'question_context_has_any_questions')">question_context_has_any_questions</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1761"><span class="linenum">1761</span></a>              <a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>[] = 'moodle/category:manage';
<a name="l1762"><span class="linenum">1762</span></a>          }
<a name="l1763"><span class="linenum">1763</span></a>          if (!empty(<a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>)) {
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment">            // Return list of categories excluding this one and it's children.</span>
<a name="l1765"><span class="linenum">1765</span></a>              return self::<a class="function" onClick="logFunction('make_categories_list')" href="../_functions/make_categories_list.html" onMouseOver="funcPopup(event,'make_categories_list')">make_categories_list</a>(<a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1766"><span class="linenum">1766</span></a>          }
<a name="l1767"><span class="linenum">1767</span></a>  
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment">        // Category is completely empty, no need in target for contents.</span>
<a name="l1769"><span class="linenum">1769</span></a>          return array();
<a name="l1770"><span class="linenum">1770</span></a>      }
<a name="l1771"><span class="linenum">1771</span></a>  
<a name="l1772"><span class="linenum">1772</span></a>      <span class="comment">/**</span>
<a name="l1773"><span class="linenum">1773</span></a>  <span class="comment">     * Checks if user has capability to move all category content to the new parent before</span>
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment">     * removing this category</span>
<a name="l1775"><span class="linenum">1775</span></a>  <span class="comment">     *</span>
<a name="l1776"><span class="linenum">1776</span></a>  <span class="comment">     * @param int $newcatid</span>
<a name="l1777"><span class="linenum">1777</span></a>  <span class="comment">     * @return bool</span>
<a name="l1778"><span class="linenum">1778</span></a>  <span class="comment">     */</span>
<a name="l1779"><span class="linenum">1779</span></a>      public function <a class="function" onClick="logFunction('can_move_content_to')" href="../_functions/can_move_content_to.html" onMouseOver="funcPopup(event,'can_move_content_to')">can_move_content_to</a>(<a class="var it32945" onMouseOver="hilite(32945)" onMouseOut="lolite()" onClick="logVariable('newcatid')" href="../_variables/newcatid.html">$newcatid</a>) {
<a name="l1780"><span class="linenum">1780</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1781"><span class="linenum">1781</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l1782"><span class="linenum">1782</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l1783"><span class="linenum">1783</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>() ||
<a name="l1784"><span class="linenum">1784</span></a>                  !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1785"><span class="linenum">1785</span></a>              return false;
<a name="l1786"><span class="linenum">1786</span></a>          }
<a name="l1787"><span class="linenum">1787</span></a>          <a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a> = array();
<a name="l1788"><span class="linenum">1788</span></a>  <span class="comment">        // If this category has courses in it, user must have 'course:create' capability in target category.</span>
<a name="l1789"><span class="linenum">1789</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_courses')" href="../_functions/has_courses.html" onMouseOver="funcPopup(event,'has_courses')">has_courses</a>()) {
<a name="l1790"><span class="linenum">1790</span></a>              <a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>[] = 'moodle/course:create';
<a name="l1791"><span class="linenum">1791</span></a>          }
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment">        // If this category has subcategories or questions, user must have 'category:manage' capability in target category.</span>
<a name="l1793"><span class="linenum">1793</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>() || <a class="function" onClick="logFunction('question_context_has_any_questions')" href="../_functions/question_context_has_any_questions.html" onMouseOver="funcPopup(event,'question_context_has_any_questions')">question_context_has_any_questions</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1794"><span class="linenum">1794</span></a>              <a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>[] = 'moodle/category:manage';
<a name="l1795"><span class="linenum">1795</span></a>          }
<a name="l1796"><span class="linenum">1796</span></a>          if (!empty(<a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>)) {
<a name="l1797"><span class="linenum">1797</span></a>              return <a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it36462" onMouseOver="hilite(36462)" onMouseOut="lolite()" onClick="logVariable('testcaps')" href="../_variables/testcaps.html">$testcaps</a>, <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it32945" onMouseOver="hilite(32945)" onMouseOut="lolite()" onClick="logVariable('newcatid')" href="../_variables/newcatid.html">$newcatid</a>));
<a name="l1798"><span class="linenum">1798</span></a>          }
<a name="l1799"><span class="linenum">1799</span></a>  
<a name="l1800"><span class="linenum">1800</span></a>  <span class="comment">        // There is no content but still return true.</span>
<a name="l1801"><span class="linenum">1801</span></a>          return true;
<a name="l1802"><span class="linenum">1802</span></a>      }
<a name="l1803"><span class="linenum">1803</span></a>  
<a name="l1804"><span class="linenum">1804</span></a>      <span class="comment">/**</span>
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment">     * Deletes a category and moves all content (children, courses and questions) to the new parent</span>
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment">     *</span>
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment">     * Note that this function does not check capabilities, {@link coursecat::can_move_content_to()}</span>
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">     * must be called prior</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment">     *</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment">     * @param int $newparentid</span>
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment">     * @param bool $showfeedback</span>
<a name="l1812"><span class="linenum">1812</span></a>  <span class="comment">     * @return bool</span>
<a name="l1813"><span class="linenum">1813</span></a>  <span class="comment">     */</span>
<a name="l1814"><span class="linenum">1814</span></a>      public function <a class="function" onClick="logFunction('delete_move')" href="../_functions/delete_move.html" onMouseOver="funcPopup(event,'delete_move')">delete_move</a>(<a class="var it2601" onMouseOver="hilite(2601)" onMouseOut="lolite()" onClick="logVariable('newparentid')" href="../_variables/newparentid.html">$newparentid</a>, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a> = false) {
<a name="l1815"><span class="linenum">1815</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1816"><span class="linenum">1816</span></a>  
<a name="l1817"><span class="linenum">1817</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1818"><span class="linenum">1818</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/questionlib.php');
<a name="l1819"><span class="linenum">1819</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../cohort/lib.php.html">/cohort/lib.php</a>');
<a name="l1820"><span class="linenum">1820</span></a>  
<a name="l1821"><span class="linenum">1821</span></a>  <span class="comment">        // Get all objects and lists because later the caches will be reset so.</span>
<a name="l1822"><span class="linenum">1822</span></a>  <span class="comment">        // We don't need to make extra queries.</span>
<a name="l1823"><span class="linenum">1823</span></a>          <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it2601" onMouseOver="hilite(2601)" onMouseOut="lolite()" onClick="logVariable('newparentid')" href="../_variables/newparentid.html">$newparentid</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l1824"><span class="linenum">1824</span></a>          <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../_variables/catname.html">$catname</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_formatted_name')" href="../_functions/get_formatted_name.html" onMouseOver="funcPopup(event,'get_formatted_name')">get_formatted_name</a>();
<a name="l1825"><span class="linenum">1825</span></a>          <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_children')" href="../_functions/get_children.html" onMouseOver="funcPopup(event,'get_children')">get_children</a>();
<a name="l1826"><span class="linenum">1826</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('category' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1827"><span class="linenum">1827</span></a>          <a class="var it36463" onMouseOver="hilite(36463)" onMouseOut="lolite()" onClick="logVariable('coursesids')" href="../_variables/coursesids.html">$coursesids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('course', 'id', 'category = :category ORDER BY sortorder ASC', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1828"><span class="linenum">1828</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l1829"><span class="linenum">1829</span></a>  
<a name="l1830"><span class="linenum">1830</span></a>          if (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>) {
<a name="l1831"><span class="linenum">1831</span></a>              foreach (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>) {
<a name="l1832"><span class="linenum">1832</span></a>                  <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a class="function" onClick="logFunction('change_parent_raw')" href="../_functions/change_parent_raw.html" onMouseOver="funcPopup(event,'change_parent_raw')">change_parent_raw</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>);
<a name="l1833"><span class="linenum">1833</span></a>  <span class="comment">                // Log action.</span>
<a name="l1834"><span class="linenum">1834</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_updated')" href="../_classes/course_category_updated.html" onMouseOver="classPopup(event,'course_category_updated')">course_category_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1835"><span class="linenum">1835</span></a>                      'objectid' =&gt; <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a onClick="logVariable('id')" class="var it44229" onMouseOver="hilite(44229)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1836"><span class="linenum">1836</span></a>                      'context' =&gt; <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()
<a name="l1837"><span class="linenum">1837</span></a>                  ));
<a name="l1838"><span class="linenum">1838</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, 'category', 'move', 'editcategory.php?id=' . <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a onClick="logVariable('id')" class="var it44229" onMouseOver="hilite(44229)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1839"><span class="linenum">1839</span></a>                      <a class="var it36457" onMouseOver="hilite(36457)" onMouseOut="lolite()" onClick="logVariable('childcat')" href="../_variables/childcat.html">$childcat</a>-&gt;<a onClick="logVariable('id')" class="var it44229" onMouseOver="hilite(44229)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1840"><span class="linenum">1840</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1841"><span class="linenum">1841</span></a>              }
<a name="l1842"><span class="linenum">1842</span></a>              <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l1843"><span class="linenum">1843</span></a>          }
<a name="l1844"><span class="linenum">1844</span></a>  
<a name="l1845"><span class="linenum">1845</span></a>          if (<a class="var it36463" onMouseOver="hilite(36463)" onMouseOut="lolite()" onClick="logVariable('coursesids')" href="../_variables/coursesids.html">$coursesids</a>) {
<a name="l1846"><span class="linenum">1846</span></a>              if (!<a class="function" onClick="logFunction('move_courses')" href="../_functions/move_courses.html" onMouseOver="funcPopup(event,'move_courses')">move_courses</a>(<a class="var it36463" onMouseOver="hilite(36463)" onMouseOut="lolite()" onClick="logVariable('coursesids')" href="../_variables/coursesids.html">$coursesids</a>, <a class="var it2601" onMouseOver="hilite(2601)" onMouseOut="lolite()" onClick="logVariable('newparentid')" href="../_variables/newparentid.html">$newparentid</a>)) {
<a name="l1847"><span class="linenum">1847</span></a>                  if (<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1848"><span class="linenum">1848</span></a>                      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;Error moving courses&quot;);
<a name="l1849"><span class="linenum">1849</span></a>                  }
<a name="l1850"><span class="linenum">1850</span></a>                  return false;
<a name="l1851"><span class="linenum">1851</span></a>              }
<a name="l1852"><span class="linenum">1852</span></a>              if (<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1853"><span class="linenum">1853</span></a>                  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursesmovedout', '', <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../_variables/catname.html">$catname</a>), 'notifysuccess');
<a name="l1854"><span class="linenum">1854</span></a>              }
<a name="l1855"><span class="linenum">1855</span></a>          }
<a name="l1856"><span class="linenum">1856</span></a>  
<a name="l1857"><span class="linenum">1857</span></a>  <span class="comment">        // Move or delete cohorts in this context.</span>
<a name="l1858"><span class="linenum">1858</span></a>          <a class="function" onClick="logFunction('cohort_delete_category')" href="../_functions/cohort_delete_category.html" onMouseOver="funcPopup(event,'cohort_delete_category')">cohort_delete_category</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1859"><span class="linenum">1859</span></a>  
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">        // Now delete anything that may depend on course category context.</span>
<a name="l1861"><span class="linenum">1861</span></a>          <a class="function" onClick="logFunction('grade_course_category_delete')" href="../_functions/grade_course_category_delete.html" onMouseOver="funcPopup(event,'grade_course_category_delete')">grade_course_category_delete</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2601" onMouseOver="hilite(2601)" onMouseOut="lolite()" onClick="logVariable('newparentid')" href="../_variables/newparentid.html">$newparentid</a>, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>);
<a name="l1862"><span class="linenum">1862</span></a>          if (!<a class="function" onClick="logFunction('question_delete_course_category')" href="../_functions/question_delete_course_category.html" onMouseOver="funcPopup(event,'question_delete_course_category')">question_delete_course_category</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>)) {
<a name="l1863"><span class="linenum">1863</span></a>              if (<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1864"><span class="linenum">1864</span></a>                  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errordeletingquestionsfromcategory', 'question', <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../_variables/catname.html">$catname</a>), 'notifysuccess');
<a name="l1865"><span class="linenum">1865</span></a>              }
<a name="l1866"><span class="linenum">1866</span></a>              return false;
<a name="l1867"><span class="linenum">1867</span></a>          }
<a name="l1868"><span class="linenum">1868</span></a>  
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment">        // Finally delete the category and it's context.</span>
<a name="l1870"><span class="linenum">1870</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_categories', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1871"><span class="linenum">1871</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1872"><span class="linenum">1872</span></a>  
<a name="l1873"><span class="linenum">1873</span></a>  <span class="comment">        // Trigger a course category deleted event.</span>
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment">        /* @var \core\event\course_category_deleted $event */</span>
<a name="l1875"><span class="linenum">1875</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_deleted')" href="../_classes/course_category_deleted.html" onMouseOver="classPopup(event,'course_category_deleted')">course_category_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1876"><span class="linenum">1876</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l1877"><span class="linenum">1877</span></a>              'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l1878"><span class="linenum">1878</span></a>              'other' =&gt; array('name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)
<a name="l1879"><span class="linenum">1879</span></a>          ));
<a name="l1880"><span class="linenum">1880</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_coursecat')" href="../_functions/set_coursecat.html" onMouseOver="funcPopup(event,'set_coursecat')">set_coursecat</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1881"><span class="linenum">1881</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1882"><span class="linenum">1882</span></a>  
<a name="l1883"><span class="linenum">1883</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l1884"><span class="linenum">1884</span></a>  
<a name="l1885"><span class="linenum">1885</span></a>          if (<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1886"><span class="linenum">1886</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursecategorydeleted', '', <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../_variables/catname.html">$catname</a>), 'notifysuccess');
<a name="l1887"><span class="linenum">1887</span></a>          }
<a name="l1888"><span class="linenum">1888</span></a>  
<a name="l1889"><span class="linenum">1889</span></a>  <span class="comment">        // If we deleted $CFG-&gt;defaultrequestcategory, make it point somewhere else.</span>
<a name="l1890"><span class="linenum">1890</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultrequestcategory')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultrequestcategory.html">defaultrequestcategory</a>) {
<a name="l1891"><span class="linenum">1891</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('defaultrequestcategory', <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_categories', '<a class="phpfunction" onClick="logFunction('MIN')" href="../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">MIN</a>(id)', array('parent' =&gt; 0)));
<a name="l1892"><span class="linenum">1892</span></a>          }
<a name="l1893"><span class="linenum">1893</span></a>          return true;
<a name="l1894"><span class="linenum">1894</span></a>      }
<a name="l1895"><span class="linenum">1895</span></a>  
<a name="l1896"><span class="linenum">1896</span></a>      <span class="comment">/**</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment">     * Checks if user can move current category to the new parent</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment">     *</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment">     * This checks if new parent category exists, user has manage cap there</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment">     * and new parent is not a child of this category</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment">     *</span>
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment">     * @param int|stdClass|coursecat $newparentcat</span>
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment">     * @return bool</span>
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment">     */</span>
<a name="l1905"><span class="linenum">1905</span></a>      public function <a class="function" onClick="logFunction('can_change_parent')" href="../_functions/can_change_parent.html" onMouseOver="funcPopup(event,'can_change_parent')">can_change_parent</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>) {
<a name="l1906"><span class="linenum">1906</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>())) {
<a name="l1907"><span class="linenum">1907</span></a>              return false;
<a name="l1908"><span class="linenum">1908</span></a>          }
<a name="l1909"><span class="linenum">1909</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>)) {
<a name="l1910"><span class="linenum">1910</span></a>              <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l1911"><span class="linenum">1911</span></a>          } else {
<a name="l1912"><span class="linenum">1912</span></a>              <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>((int)<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l1913"><span class="linenum">1913</span></a>          }
<a name="l1914"><span class="linenum">1914</span></a>          if (!<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>) {
<a name="l1915"><span class="linenum">1915</span></a>              return false;
<a name="l1916"><span class="linenum">1916</span></a>          }
<a name="l1917"><span class="linenum">1917</span></a>          if (<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> || <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a class="function" onClick="logFunction('get_parents')" href="../_functions/get_parents.html" onMouseOver="funcPopup(event,'get_parents')">get_parents</a>())) {
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment">            // Can not move to itself or it's own child.</span>
<a name="l1919"><span class="linenum">1919</span></a>              return false;
<a name="l1920"><span class="linenum">1920</span></a>          }
<a name="l1921"><span class="linenum">1921</span></a>          if (<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1922"><span class="linenum">1922</span></a>              return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1923"><span class="linenum">1923</span></a>          } else {
<a name="l1924"><span class="linenum">1924</span></a>              return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l1925"><span class="linenum">1925</span></a>          }
<a name="l1926"><span class="linenum">1926</span></a>      }
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>      <span class="comment">/**</span>
<a name="l1929"><span class="linenum">1929</span></a>  <span class="comment">     * Moves the category under another parent category. All associated contexts are moved as well</span>
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment">     *</span>
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment">     * This is protected function, use change_parent() or update() from outside of this class</span>
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment">     *</span>
<a name="l1933"><span class="linenum">1933</span></a>  <span class="comment">     * @see coursecat::change_parent()</span>
<a name="l1934"><span class="linenum">1934</span></a>  <span class="comment">     * @see coursecat::update()</span>
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment">     *</span>
<a name="l1936"><span class="linenum">1936</span></a>  <span class="comment">     * @param coursecat $newparentcat</span>
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment">     */</span>
<a name="l1939"><span class="linenum">1939</span></a>      protected function <a class="function" onClick="logFunction('change_parent_raw')" href="../_functions/change_parent_raw.html" onMouseOver="funcPopup(event,'change_parent_raw')">change_parent_raw</a>(coursecat <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>) {
<a name="l1940"><span class="linenum">1940</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1941"><span class="linenum">1941</span></a>  
<a name="l1942"><span class="linenum">1942</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l1943"><span class="linenum">1943</span></a>  
<a name="l1944"><span class="linenum">1944</span></a>          <a class="var it36464" onMouseOver="hilite(36464)" onMouseOut="lolite()" onClick="logVariable('hidecat')" href="../_variables/hidecat.html">$hidecat</a> = false;
<a name="l1945"><span class="linenum">1945</span></a>          if (empty(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l1946"><span class="linenum">1946</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'parent', 0, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1947"><span class="linenum">1947</span></a>              <a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1948"><span class="linenum">1948</span></a>          } else {
<a name="l1949"><span class="linenum">1949</span></a>              if (<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> || <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a class="function" onClick="logFunction('get_parents')" href="../_functions/get_parents.html" onMouseOver="funcPopup(event,'get_parents')">get_parents</a>())) {
<a name="l1950"><span class="linenum">1950</span></a>  <span class="comment">                // Can not move to itself or it's own child.</span>
<a name="l1951"><span class="linenum">1951</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotmovecategory');
<a name="l1952"><span class="linenum">1952</span></a>              }
<a name="l1953"><span class="linenum">1953</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'parent', <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1954"><span class="linenum">1954</span></a>              <a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1955"><span class="linenum">1955</span></a>  
<a name="l1956"><span class="linenum">1956</span></a>              if (!<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('visible')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> and <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment">                // Better hide category when moving into hidden category, teachers may unhide afterwards and the hidden children</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment">                // will be restored properly.</span>
<a name="l1959"><span class="linenum">1959</span></a>                  <a class="var it36464" onMouseOver="hilite(36464)" onMouseOut="lolite()" onClick="logVariable('hidecat')" href="../_variables/hidecat.html">$hidecat</a> = true;
<a name="l1960"><span class="linenum">1960</span></a>              }
<a name="l1961"><span class="linenum">1961</span></a>          }
<a name="l1962"><span class="linenum">1962</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1963"><span class="linenum">1963</span></a>  
<a name="l1964"><span class="linenum">1964</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('update_moved')" href="../_functions/update_moved.html" onMouseOver="funcPopup(event,'update_moved')">update_moved</a>(<a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a>);
<a name="l1965"><span class="linenum">1965</span></a>  
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment">        // Now make it last in new category.</span>
<a name="l1967"><span class="linenum">1967</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'sortorder', <a class="constant" onClick="logConstant('MAX_COURSES_IN_CATEGORY')" href="../_constants/MAX_COURSES_IN_CATEGORY.html" onMouseOver="constPopup(event,'MAX_COURSES_IN_CATEGORY')">MAX_COURSES_IN_CATEGORY</a>*<a class="constant" onClick="logConstant('MAX_COURSE_CATEGORIES')" href="../_constants/MAX_COURSE_CATEGORIES.html" onMouseOver="constPopup(event,'MAX_COURSE_CATEGORIES')">MAX_COURSE_CATEGORIES</a>, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1968"><span class="linenum">1968</span></a>  
<a name="l1969"><span class="linenum">1969</span></a>          if (<a class="var it36464" onMouseOver="hilite(36464)" onMouseOut="lolite()" onClick="logVariable('hidecat')" href="../_variables/hidecat.html">$hidecat</a>) {
<a name="l1970"><span class="linenum">1970</span></a>              <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l1971"><span class="linenum">1971</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('restore')" href="../_functions/restore.html" onMouseOver="funcPopup(event,'restore')">restore</a>();
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment">            // Hide object but store 1 in visibleold, because when parent category visibility changes this category must</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment">            // become visible again.</span>
<a name="l1974"><span class="linenum">1974</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('hide_raw')" href="../_functions/hide_raw.html" onMouseOver="funcPopup(event,'hide_raw')">hide_raw</a>(1);
<a name="l1975"><span class="linenum">1975</span></a>          }
<a name="l1976"><span class="linenum">1976</span></a>      }
<a name="l1977"><span class="linenum">1977</span></a>  
<a name="l1978"><span class="linenum">1978</span></a>      <span class="comment">/**</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment">     * Efficiently moves a category - NOTE that this can have</span>
<a name="l1980"><span class="linenum">1980</span></a>  <span class="comment">     * a huge impact access-control-wise...</span>
<a name="l1981"><span class="linenum">1981</span></a>  <span class="comment">     *</span>
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment">     * Note that this function does not check capabilities.</span>
<a name="l1983"><span class="linenum">1983</span></a>  <span class="comment">     *</span>
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment">     * Example of usage:</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment">     * $coursecat = coursecat::get($categoryid);</span>
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment">     * if ($coursecat-&gt;can_change_parent($newparentcatid)) {</span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment">     *     $coursecat-&gt;change_parent($newparentcatid);</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment">     * }</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment">     *</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment">     * This function does not update field course_categories.timemodified</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment">     * If you want to update timemodified, use</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">     * $coursecat-&gt;update(array('parent' =&gt; $newparentcat));</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment">     *</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment">     * @param int|stdClass|coursecat $newparentcat</span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment">     */</span>
<a name="l1996"><span class="linenum">1996</span></a>      public function <a class="function" onClick="logFunction('change_parent')" href="../_functions/change_parent.html" onMouseOver="funcPopup(event,'change_parent')">change_parent</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>) {
<a name="l1997"><span class="linenum">1997</span></a>  <span class="comment">        // Make sure parent category exists but do not check capabilities here that it is visible to current user.</span>
<a name="l1998"><span class="linenum">1998</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>)) {
<a name="l1999"><span class="linenum">1999</span></a>              <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l2000"><span class="linenum">2000</span></a>          } else {
<a name="l2001"><span class="linenum">2001</span></a>              <a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a> = self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>((int)<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>, true);
<a name="l2002"><span class="linenum">2002</span></a>          }
<a name="l2003"><span class="linenum">2003</span></a>          if (<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>-&gt;<a onClick="logVariable('id')" class="var it44231" onMouseOver="hilite(44231)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>) {
<a name="l2004"><span class="linenum">2004</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('change_parent_raw')" href="../_functions/change_parent_raw.html" onMouseOver="funcPopup(event,'change_parent_raw')">change_parent_raw</a>(<a class="var it2603" onMouseOver="hilite(2603)" onMouseOut="lolite()" onClick="logVariable('newparentcat')" href="../_variables/newparentcat.html">$newparentcat</a>);
<a name="l2005"><span class="linenum">2005</span></a>              <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2006"><span class="linenum">2006</span></a>              <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l2007"><span class="linenum">2007</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('restore')" href="../_functions/restore.html" onMouseOver="funcPopup(event,'restore')">restore</a>();
<a name="l2008"><span class="linenum">2008</span></a>  
<a name="l2009"><span class="linenum">2009</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_updated')" href="../_classes/course_category_updated.html" onMouseOver="classPopup(event,'course_category_updated')">course_category_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2010"><span class="linenum">2010</span></a>                  'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2011"><span class="linenum">2011</span></a>                  'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()
<a name="l2012"><span class="linenum">2012</span></a>              ));
<a name="l2013"><span class="linenum">2013</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, 'category', 'move', 'editcategory.php?id=' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2014"><span class="linenum">2014</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2015"><span class="linenum">2015</span></a>          }
<a name="l2016"><span class="linenum">2016</span></a>      }
<a name="l2017"><span class="linenum">2017</span></a>  
<a name="l2018"><span class="linenum">2018</span></a>      <span class="comment">/**</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">     * Hide course category and child course and subcategories</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment">     *</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment">     * If this category has changed the parent and is moved under hidden</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment">     * category we will want to store it's current visibility state in</span>
<a name="l2023"><span class="linenum">2023</span></a>  <span class="comment">     * the field 'visibleold'. If admin clicked 'hide' for this particular</span>
<a name="l2024"><span class="linenum">2024</span></a>  <span class="comment">     * category, the field 'visibleold' should become 0.</span>
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment">     *</span>
<a name="l2026"><span class="linenum">2026</span></a>  <span class="comment">     * All subcategories and courses will have their current visibility in the field visibleold</span>
<a name="l2027"><span class="linenum">2027</span></a>  <span class="comment">     *</span>
<a name="l2028"><span class="linenum">2028</span></a>  <span class="comment">     * This is protected function, use hide() or update() from outside of this class</span>
<a name="l2029"><span class="linenum">2029</span></a>  <span class="comment">     *</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">     * @see coursecat::hide()</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment">     * @see coursecat::update()</span>
<a name="l2032"><span class="linenum">2032</span></a>  <span class="comment">     *</span>
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">     * @param int $visibleold value to set in field $visibleold for this category</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment">     * @return bool whether changes have been made and caches need to be purged afterwards</span>
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment">     */</span>
<a name="l2036"><span class="linenum">2036</span></a>      protected function <a class="function" onClick="logFunction('hide_raw')" href="../_functions/hide_raw.html" onMouseOver="funcPopup(event,'hide_raw')">hide_raw</a>(<a class="var it12503" onMouseOver="hilite(12503)" onMouseOut="lolite()" onClick="logVariable('visibleold')" href="../_variables/visibleold.html">$visibleold</a> = 0) {
<a name="l2037"><span class="linenum">2037</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2038"><span class="linenum">2038</span></a>          <a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a> = false;
<a name="l2039"><span class="linenum">2039</span></a>  
<a name="l2040"><span class="linenum">2040</span></a>  <span class="comment">        // Note that field 'visibleold' is not cached so we must retrieve it from DB if it is missing.</span>
<a name="l2041"><span class="linenum">2041</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>('visibleold') != <a class="var it12503" onMouseOver="hilite(12503)" onMouseOut="lolite()" onClick="logVariable('visibleold')" href="../_variables/visibleold.html">$visibleold</a>) {
<a name="l2042"><span class="linenum">2042</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = <a class="var it12503" onMouseOver="hilite(12503)" onMouseOut="lolite()" onClick="logVariable('visibleold')" href="../_variables/visibleold.html">$visibleold</a>;
<a name="l2043"><span class="linenum">2043</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visibleold', <a class="var it12503" onMouseOver="hilite(12503)" onMouseOut="lolite()" onClick="logVariable('visibleold')" href="../_variables/visibleold.html">$visibleold</a>, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2044"><span class="linenum">2044</span></a>              <a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a> = true;
<a name="l2045"><span class="linenum">2045</span></a>          }
<a name="l2046"><span class="linenum">2046</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> || !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2047"><span class="linenum">2047</span></a>  <span class="comment">            // Already hidden or can not be hidden.</span>
<a name="l2048"><span class="linenum">2048</span></a>              return <a class="var it6559" onMouseOver="hilite(6559)" onMouseOut="lolite()" onClick="logVariable('changes')" href="../_variables/changes.html">$changes</a>;
<a name="l2049"><span class="linenum">2049</span></a>          }
<a name="l2050"><span class="linenum">2050</span></a>  
<a name="l2051"><span class="linenum">2051</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 0;
<a name="l2052"><span class="linenum">2052</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visible', 0, array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2053"><span class="linenum">2053</span></a>  <span class="comment">        // Store visible flag so that we can return to it if we immediately unhide.</span>
<a name="l2054"><span class="linenum">2054</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {course} SET visibleold = visible WHERE category = ?&quot;, array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2055"><span class="linenum">2055</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'visible', 0, array('category' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2056"><span class="linenum">2056</span></a>  <span class="comment">        // Get all child categories and hide too.</span>
<a name="l2057"><span class="linenum">2057</span></a>          if (<a class="var it28916" onMouseOver="hilite(28916)" onMouseOut="lolite()" onClick="logVariable('subcats')" href="../_variables/subcats.html">$subcats</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('course_categories', &quot;path LIKE ?&quot;, array(&quot;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a>/%&quot;), 'id, visible')) {
<a name="l2058"><span class="linenum">2058</span></a>              foreach (<a class="var it28916" onMouseOver="hilite(28916)" onMouseOut="lolite()" onClick="logVariable('subcats')" href="../_variables/subcats.html">$subcats</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>) {
<a name="l2059"><span class="linenum">2059</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visibleold', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('visible')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>, array('id' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2060"><span class="linenum">2060</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visible', 0, array('id' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2061"><span class="linenum">2061</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {course} SET visibleold = visible WHERE category = ?&quot;, array(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2062"><span class="linenum">2062</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'visible', 0, array('category' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2063"><span class="linenum">2063</span></a>              }
<a name="l2064"><span class="linenum">2064</span></a>          }
<a name="l2065"><span class="linenum">2065</span></a>          return true;
<a name="l2066"><span class="linenum">2066</span></a>      }
<a name="l2067"><span class="linenum">2067</span></a>  
<a name="l2068"><span class="linenum">2068</span></a>      <span class="comment">/**</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * Hide course category and child course and subcategories</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     *</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">     * Note that there is no capability check inside this function</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment">     *</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">     * This function does not update field course_categories.timemodified</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment">     * If you want to update timemodified, use</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment">     * $coursecat-&gt;update(array('visible' =&gt; 0));</span>
<a name="l2076"><span class="linenum">2076</span></a>  <span class="comment">     */</span>
<a name="l2077"><span class="linenum">2077</span></a>      public function <a class="function" onClick="logFunction('hide')" href="../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>() {
<a name="l2078"><span class="linenum">2078</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('hide_raw')" href="../_functions/hide_raw.html" onMouseOver="funcPopup(event,'hide_raw')">hide_raw</a>(0)) {
<a name="l2079"><span class="linenum">2079</span></a>              <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l2080"><span class="linenum">2080</span></a>  
<a name="l2081"><span class="linenum">2081</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_updated')" href="../_classes/course_category_updated.html" onMouseOver="classPopup(event,'course_category_updated')">course_category_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2082"><span class="linenum">2082</span></a>                  'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2083"><span class="linenum">2083</span></a>                  'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()
<a name="l2084"><span class="linenum">2084</span></a>              ));
<a name="l2085"><span class="linenum">2085</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, 'category', 'hide', 'editcategory.php?id=' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2086"><span class="linenum">2086</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2087"><span class="linenum">2087</span></a>          }
<a name="l2088"><span class="linenum">2088</span></a>      }
<a name="l2089"><span class="linenum">2089</span></a>  
<a name="l2090"><span class="linenum">2090</span></a>      <span class="comment">/**</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment">     * Show course category and restores visibility for child course and subcategories</span>
<a name="l2092"><span class="linenum">2092</span></a>  <span class="comment">     *</span>
<a name="l2093"><span class="linenum">2093</span></a>  <span class="comment">     * Note that there is no capability check inside this function</span>
<a name="l2094"><span class="linenum">2094</span></a>  <span class="comment">     *</span>
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment">     * This is protected function, use show() or update() from outside of this class</span>
<a name="l2096"><span class="linenum">2096</span></a>  <span class="comment">     *</span>
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment">     * @see coursecat::show()</span>
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment">     * @see coursecat::update()</span>
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment">     *</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment">     * @return bool whether changes have been made and caches need to be purged afterwards</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment">     */</span>
<a name="l2102"><span class="linenum">2102</span></a>      protected function <a class="function" onClick="logFunction('show_raw')" href="../_functions/show_raw.html" onMouseOver="funcPopup(event,'show_raw')">show_raw</a>() {
<a name="l2103"><span class="linenum">2103</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2104"><span class="linenum">2104</span></a>  
<a name="l2105"><span class="linenum">2105</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment">            // Already visible.</span>
<a name="l2107"><span class="linenum">2107</span></a>              return false;
<a name="l2108"><span class="linenum">2108</span></a>          }
<a name="l2109"><span class="linenum">2109</span></a>  
<a name="l2110"><span class="linenum">2110</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 1;
<a name="l2111"><span class="linenum">2111</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleold')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a> = 1;
<a name="l2112"><span class="linenum">2112</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visible', 1, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2113"><span class="linenum">2113</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visibleold', 1, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2114"><span class="linenum">2114</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {course} SET visible = visibleold WHERE category = ?&quot;, array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2115"><span class="linenum">2115</span></a>  <span class="comment">        // Get all child categories and unhide too.</span>
<a name="l2116"><span class="linenum">2116</span></a>          if (<a class="var it28916" onMouseOver="hilite(28916)" onMouseOut="lolite()" onClick="logVariable('subcats')" href="../_variables/subcats.html">$subcats</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('course_categories', &quot;path LIKE ?&quot;, array(&quot;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a>/%&quot;), 'id, visibleold')) {
<a name="l2117"><span class="linenum">2117</span></a>              foreach (<a class="var it28916" onMouseOver="hilite(28916)" onMouseOut="lolite()" onClick="logVariable('subcats')" href="../_variables/subcats.html">$subcats</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>) {
<a name="l2118"><span class="linenum">2118</span></a>                  if (<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('visibleold')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/visibleold.html">visibleold</a>) {
<a name="l2119"><span class="linenum">2119</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'visible', 1, array('id' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2120"><span class="linenum">2120</span></a>                  }
<a name="l2121"><span class="linenum">2121</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {course} SET visible = visibleold WHERE category = ?&quot;, array(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2122"><span class="linenum">2122</span></a>              }
<a name="l2123"><span class="linenum">2123</span></a>          }
<a name="l2124"><span class="linenum">2124</span></a>          return true;
<a name="l2125"><span class="linenum">2125</span></a>      }
<a name="l2126"><span class="linenum">2126</span></a>  
<a name="l2127"><span class="linenum">2127</span></a>      <span class="comment">/**</span>
<a name="l2128"><span class="linenum">2128</span></a>  <span class="comment">     * Show course category and restores visibility for child course and subcategories</span>
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">     *</span>
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">     * Note that there is no capability check inside this function</span>
<a name="l2131"><span class="linenum">2131</span></a>  <span class="comment">     *</span>
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment">     * This function does not update field course_categories.timemodified</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">     * If you want to update timemodified, use</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment">     * $coursecat-&gt;update(array('visible' =&gt; 1));</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">     */</span>
<a name="l2136"><span class="linenum">2136</span></a>      public function <a class="function" onClick="logFunction('show')" href="../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>() {
<a name="l2137"><span class="linenum">2137</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_raw')" href="../_functions/show_raw.html" onMouseOver="funcPopup(event,'show_raw')">show_raw</a>()) {
<a name="l2138"><span class="linenum">2138</span></a>              <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l2139"><span class="linenum">2139</span></a>  
<a name="l2140"><span class="linenum">2140</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_updated')" href="../_classes/course_category_updated.html" onMouseOver="classPopup(event,'course_category_updated')">course_category_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2141"><span class="linenum">2141</span></a>                  'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2142"><span class="linenum">2142</span></a>                  'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()
<a name="l2143"><span class="linenum">2143</span></a>              ));
<a name="l2144"><span class="linenum">2144</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, 'category', 'show', 'editcategory.php?id=' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2145"><span class="linenum">2145</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2146"><span class="linenum">2146</span></a>          }
<a name="l2147"><span class="linenum">2147</span></a>      }
<a name="l2148"><span class="linenum">2148</span></a>  
<a name="l2149"><span class="linenum">2149</span></a>      <span class="comment">/**</span>
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment">     * Returns name of the category formatted as a string</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment">     *</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment">     * @param array $options formatting options other than context</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">     * @return string</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">     */</span>
<a name="l2155"><span class="linenum">2155</span></a>      public function <a class="function" onClick="logFunction('get_formatted_name')" href="../_functions/get_formatted_name.html" onMouseOver="funcPopup(event,'get_formatted_name')">get_formatted_name</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l2156"><span class="linenum">2156</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2157"><span class="linenum">2157</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l2158"><span class="linenum">2158</span></a>              return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true, array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) + <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l2159"><span class="linenum">2159</span></a>          } else {
<a name="l2160"><span class="linenum">2160</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('top');
<a name="l2161"><span class="linenum">2161</span></a>          }
<a name="l2162"><span class="linenum">2162</span></a>      }
<a name="l2163"><span class="linenum">2163</span></a>  
<a name="l2164"><span class="linenum">2164</span></a>      <span class="comment">/**</span>
<a name="l2165"><span class="linenum">2165</span></a>  <span class="comment">     * Returns ids of all parents of the category. Last element in the return array is the direct parent</span>
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">     *</span>
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">     * For example, if you have a tree of categories like:</span>
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">     *   Miscellaneous (id = 1)</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment">     *      Subcategory (id = 2)</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment">     *         Sub-subcategory (id = 4)</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">     *   Other category (id = 3)</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">     *</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">     * coursecat::get(1)-&gt;get_parents() == array()</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">     * coursecat::get(2)-&gt;get_parents() == array(1)</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment">     * coursecat::get(4)-&gt;get_parents() == array(1, 2);</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment">     *</span>
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment">     * Note that this method does not check if all parents are accessible by current user</span>
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment">     *</span>
<a name="l2179"><span class="linenum">2179</span></a>  <span class="comment">     * @return array of category ids</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment">     */</span>
<a name="l2181"><span class="linenum">2181</span></a>      public function <a class="function" onClick="logFunction('get_parents')" href="../_functions/get_parents.html" onMouseOver="funcPopup(event,'get_parents')">get_parents</a>() {
<a name="l2182"><span class="linenum">2182</span></a>          <a class="var it2400" onMouseOver="hilite(2400)" onMouseOut="lolite()" onClick="logVariable('parents')" href="../_variables/parents.html">$parents</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('|/|', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, 0, PREG_SPLIT_NO_EMPTY);
<a name="l2183"><span class="linenum">2183</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it2400" onMouseOver="hilite(2400)" onMouseOut="lolite()" onClick="logVariable('parents')" href="../_variables/parents.html">$parents</a>);
<a name="l2184"><span class="linenum">2184</span></a>          return <a class="var it2400" onMouseOver="hilite(2400)" onMouseOut="lolite()" onClick="logVariable('parents')" href="../_variables/parents.html">$parents</a>;
<a name="l2185"><span class="linenum">2185</span></a>      }
<a name="l2186"><span class="linenum">2186</span></a>  
<a name="l2187"><span class="linenum">2187</span></a>      <span class="comment">/**</span>
<a name="l2188"><span class="linenum">2188</span></a>  <span class="comment">     * This function returns a nice list representing category tree</span>
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment">     * for display or to use in a form &lt;select&gt; element</span>
<a name="l2190"><span class="linenum">2190</span></a>  <span class="comment">     *</span>
<a name="l2191"><span class="linenum">2191</span></a>  <span class="comment">     * List is cached for 10 minutes</span>
<a name="l2192"><span class="linenum">2192</span></a>  <span class="comment">     *</span>
<a name="l2193"><span class="linenum">2193</span></a>  <span class="comment">     * For example, if you have a tree of categories like:</span>
<a name="l2194"><span class="linenum">2194</span></a>  <span class="comment">     *   Miscellaneous (id = 1)</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment">     *      Subcategory (id = 2)</span>
<a name="l2196"><span class="linenum">2196</span></a>  <span class="comment">     *         Sub-subcategory (id = 4)</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment">     *   Other category (id = 3)</span>
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">     * Then after calling this function you will have</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment">     * array(1 =&gt; 'Miscellaneous',</span>
<a name="l2200"><span class="linenum">2200</span></a>  <span class="comment">     *       2 =&gt; 'Miscellaneous / Subcategory',</span>
<a name="l2201"><span class="linenum">2201</span></a>  <span class="comment">     *       4 =&gt; 'Miscellaneous / Subcategory / Sub-subcategory',</span>
<a name="l2202"><span class="linenum">2202</span></a>  <span class="comment">     *       3 =&gt; 'Other category');</span>
<a name="l2203"><span class="linenum">2203</span></a>  <span class="comment">     *</span>
<a name="l2204"><span class="linenum">2204</span></a>  <span class="comment">     * If you specify $requiredcapability, then only categories where the current</span>
<a name="l2205"><span class="linenum">2205</span></a>  <span class="comment">     * user has that capability will be added to $list.</span>
<a name="l2206"><span class="linenum">2206</span></a>  <span class="comment">     * If you only have $requiredcapability in a child category, not the parent,</span>
<a name="l2207"><span class="linenum">2207</span></a>  <span class="comment">     * then the child catgegory will still be included.</span>
<a name="l2208"><span class="linenum">2208</span></a>  <span class="comment">     *</span>
<a name="l2209"><span class="linenum">2209</span></a>  <span class="comment">     * If you specify the option $excludeid, then that category, and all its children,</span>
<a name="l2210"><span class="linenum">2210</span></a>  <span class="comment">     * are omitted from the tree. This is useful when you are doing something like</span>
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment">     * moving categories, where you do not want to allow people to move a category</span>
<a name="l2212"><span class="linenum">2212</span></a>  <span class="comment">     * to be the child of itself.</span>
<a name="l2213"><span class="linenum">2213</span></a>  <span class="comment">     *</span>
<a name="l2214"><span class="linenum">2214</span></a>  <span class="comment">     * See also {@link make_categories_options()}</span>
<a name="l2215"><span class="linenum">2215</span></a>  <span class="comment">     *</span>
<a name="l2216"><span class="linenum">2216</span></a>  <span class="comment">     * @param string/array $requiredcapability if given, only categories where the current</span>
<a name="l2217"><span class="linenum">2217</span></a>  <span class="comment">     *      user has this capability will be returned. Can also be an array of capabilities,</span>
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">     *      in which case they are all required.</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment">     * @param integer $excludeid Exclude this category and its children from the lists built.</span>
<a name="l2220"><span class="linenum">2220</span></a>  <span class="comment">     * @param string $separator string to use as a separator between parent and child category. Default ' / '</span>
<a name="l2221"><span class="linenum">2221</span></a>  <span class="comment">     * @return array of strings</span>
<a name="l2222"><span class="linenum">2222</span></a>  <span class="comment">     */</span>
<a name="l2223"><span class="linenum">2223</span></a>      public static function <a class="function" onClick="logFunction('make_categories_list')" href="../_functions/make_categories_list.html" onMouseOver="funcPopup(event,'make_categories_list')">make_categories_list</a>(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a> = '', <a class="var it2600" onMouseOver="hilite(2600)" onMouseOut="lolite()" onClick="logVariable('excludeid')" href="../_variables/excludeid.html">$excludeid</a> = 0, <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../_variables/separator.html">$separator</a> = ' / ') {
<a name="l2224"><span class="linenum">2224</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2225"><span class="linenum">2225</span></a>          <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'coursecat');
<a name="l2226"><span class="linenum">2226</span></a>  
<a name="l2227"><span class="linenum">2227</span></a>  <span class="comment">        // Check if we cached the complete list of user-accessible category names ($baselist) or list of ids</span>
<a name="l2228"><span class="linenum">2228</span></a>  <span class="comment">        // with requried cap ($thislist).</span>
<a name="l2229"><span class="linenum">2229</span></a>          <a class="var it24355" onMouseOver="hilite(24355)" onMouseOut="lolite()" onClick="logVariable('currentlang')" href="../_variables/currentlang.html">$currentlang</a> = <a class="function" onClick="logFunction('current_language')" href="../_functions/current_language.html" onMouseOver="funcPopup(event,'current_language')">current_language</a>();
<a name="l2230"><span class="linenum">2230</span></a>          <a class="var it36465" onMouseOver="hilite(36465)" onMouseOut="lolite()" onClick="logVariable('basecachekey')" href="../_variables/basecachekey.html">$basecachekey</a> = <a class="var it24355" onMouseOver="hilite(24355)" onMouseOut="lolite()" onClick="logVariable('currentlang')" href="../_variables/currentlang.html">$currentlang</a> . '_catlist';
<a name="l2231"><span class="linenum">2231</span></a>          <a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36465" onMouseOver="hilite(36465)" onMouseOut="lolite()" onClick="logVariable('basecachekey')" href="../_variables/basecachekey.html">$basecachekey</a>);
<a name="l2232"><span class="linenum">2232</span></a>          <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> = false;
<a name="l2233"><span class="linenum">2233</span></a>          <a class="var it36468" onMouseOver="hilite(36468)" onMouseOut="lolite()" onClick="logVariable('thiscachekey')" href="../_variables/thiscachekey.html">$thiscachekey</a> = null;
<a name="l2234"><span class="linenum">2234</span></a>          if (!empty(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>)) {
<a name="l2235"><span class="linenum">2235</span></a>              <a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a> = (array)<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>;
<a name="l2236"><span class="linenum">2236</span></a>              <a class="var it36468" onMouseOver="hilite(36468)" onMouseOut="lolite()" onClick="logVariable('thiscachekey')" href="../_variables/thiscachekey.html">$thiscachekey</a> = 'catlist:'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>);
<a name="l2237"><span class="linenum">2237</span></a>              if (<a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a> !== false &amp;&amp; (<a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> = <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36468" onMouseOver="hilite(36468)" onMouseOut="lolite()" onClick="logVariable('thiscachekey')" href="../_variables/thiscachekey.html">$thiscachekey</a>)) !== false) {
<a name="l2238"><span class="linenum">2238</span></a>                  <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('|,|', <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a>, -1, PREG_SPLIT_NO_EMPTY);
<a name="l2239"><span class="linenum">2239</span></a>              }
<a name="l2240"><span class="linenum">2240</span></a>          } else if (<a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a> !== false) {
<a name="l2241"><span class="linenum">2241</span></a>              <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>);
<a name="l2242"><span class="linenum">2242</span></a>          }
<a name="l2243"><span class="linenum">2243</span></a>  
<a name="l2244"><span class="linenum">2244</span></a>          if (<a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a> === false) {
<a name="l2245"><span class="linenum">2245</span></a>  <span class="comment">            // We don't have $baselist cached, retrieve it. Retrieve $thislist again in any case.</span>
<a name="l2246"><span class="linenum">2246</span></a>              <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l2247"><span class="linenum">2247</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT cc.id, cc.sortorder, cc.name, cc.visible, cc.parent, cc.path, <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a>
<a name="l2248"><span class="linenum">2248</span></a>                      FROM {course_categories} cc
<a name="l2249"><span class="linenum">2249</span></a>                      JOIN {context} ctx ON cc.id = ctx.instanceid AND ctx.contextlevel = :contextcoursecat
<a name="l2250"><span class="linenum">2250</span></a>                      ORDER BY cc.sortorder&quot;;
<a name="l2251"><span class="linenum">2251</span></a>              <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('contextcoursecat' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>));
<a name="l2252"><span class="linenum">2252</span></a>              <a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a> = array();
<a name="l2253"><span class="linenum">2253</span></a>              <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> = array();
<a name="l2254"><span class="linenum">2254</span></a>              foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l2255"><span class="linenum">2255</span></a>  <span class="comment">                // If the category's parent is not visible to the user, it is not visible as well.</span>
<a name="l2256"><span class="linenum">2256</span></a>                  if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('parent')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> || isset(<a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('parent')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>])) {
<a name="l2257"><span class="linenum">2257</span></a>                      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l2258"><span class="linenum">2258</span></a>                      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2259"><span class="linenum">2259</span></a>                      if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:viewhiddencategories', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2260"><span class="linenum">2260</span></a>  <span class="comment">                        // No cap to view category, added to neither $baselist nor $thislist.</span>
<a name="l2261"><span class="linenum">2261</span></a>                          continue;
<a name="l2262"><span class="linenum">2262</span></a>                      }
<a name="l2263"><span class="linenum">2263</span></a>                      <a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array(
<a name="l2264"><span class="linenum">2264</span></a>                          'name' =&gt; <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('name')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true, array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)),
<a name="l2265"><span class="linenum">2265</span></a>                          'path' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;path
<a name="l2266"><span class="linenum">2266</span></a>                      );
<a name="l2267"><span class="linenum">2267</span></a>                      if (!empty(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2268"><span class="linenum">2268</span></a>  <span class="comment">                        // No required capability, added to $baselist but not to $thislist.</span>
<a name="l2269"><span class="linenum">2269</span></a>                          continue;
<a name="l2270"><span class="linenum">2270</span></a>                      }
<a name="l2271"><span class="linenum">2271</span></a>                      <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a>[] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2272"><span class="linenum">2272</span></a>                  }
<a name="l2273"><span class="linenum">2273</span></a>              }
<a name="l2274"><span class="linenum">2274</span></a>              <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2275"><span class="linenum">2275</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36465" onMouseOver="hilite(36465)" onMouseOut="lolite()" onClick="logVariable('basecachekey')" href="../_variables/basecachekey.html">$basecachekey</a>, <a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>);
<a name="l2276"><span class="linenum">2276</span></a>              if (!empty(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>)) {
<a name="l2277"><span class="linenum">2277</span></a>                  <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36468" onMouseOver="hilite(36468)" onMouseOut="lolite()" onClick="logVariable('thiscachekey')" href="../_variables/thiscachekey.html">$thiscachekey</a>, <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a>));
<a name="l2278"><span class="linenum">2278</span></a>              }
<a name="l2279"><span class="linenum">2279</span></a>          } else if (<a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> === false) {
<a name="l2280"><span class="linenum">2280</span></a>  <span class="comment">            // We have $baselist cached but not $thislist. Simplier query is used to retrieve.</span>
<a name="l2281"><span class="linenum">2281</span></a>              <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l2282"><span class="linenum">2282</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT ctx.instanceid AS id, <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../_variables/ctxselect.html">$ctxselect</a>
<a name="l2283"><span class="linenum">2283</span></a>                      FROM {context} ctx WHERE ctx.contextlevel = :contextcoursecat&quot;;
<a name="l2284"><span class="linenum">2284</span></a>              <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('contextcoursecat' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>));
<a name="l2285"><span class="linenum">2285</span></a>              <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> = array();
<a name="l2286"><span class="linenum">2286</span></a>              foreach (<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>) as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l2287"><span class="linenum">2287</span></a>                  <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l2288"><span class="linenum">2288</span></a>                  if (<a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it2599" onMouseOver="hilite(2599)" onMouseOut="lolite()" onClick="logVariable('requiredcapability')" href="../_variables/requiredcapability.html">$requiredcapability</a>, <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>))) {
<a name="l2289"><span class="linenum">2289</span></a>                      <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a>[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l2290"><span class="linenum">2290</span></a>                  }
<a name="l2291"><span class="linenum">2291</span></a>              }
<a name="l2292"><span class="linenum">2292</span></a>              <a class="var it36447" onMouseOver="hilite(36447)" onMouseOut="lolite()" onClick="logVariable('coursecatcache')" href="../_variables/coursecatcache.html">$coursecatcache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36468" onMouseOver="hilite(36468)" onMouseOut="lolite()" onClick="logVariable('thiscachekey')" href="../_variables/thiscachekey.html">$thiscachekey</a>, <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a>));
<a name="l2293"><span class="linenum">2293</span></a>          }
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>  <span class="comment">        // Now build the array of strings to return, mind $separator and $excludeid.</span>
<a name="l2296"><span class="linenum">2296</span></a>          <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('names')" href="../_variables/names.html">$names</a> = array();
<a name="l2297"><span class="linenum">2297</span></a>          foreach (<a class="var it36467" onMouseOver="hilite(36467)" onMouseOut="lolite()" onClick="logVariable('thislist')" href="../_variables/thislist.html">$thislist</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l2298"><span class="linenum">2298</span></a>              <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('|/|', <a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]['path'], -1, PREG_SPLIT_NO_EMPTY);
<a name="l2299"><span class="linenum">2299</span></a>              if (!<a class="var it2600" onMouseOver="hilite(2600)" onMouseOut="lolite()" onClick="logVariable('excludeid')" href="../_variables/excludeid.html">$excludeid</a> || !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2600" onMouseOver="hilite(2600)" onMouseOut="lolite()" onClick="logVariable('excludeid')" href="../_variables/excludeid.html">$excludeid</a>, <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>)) {
<a name="l2300"><span class="linenum">2300</span></a>                  <a class="var it36469" onMouseOver="hilite(36469)" onMouseOut="lolite()" onClick="logVariable('namechunks')" href="../_variables/namechunks.html">$namechunks</a> = array();
<a name="l2301"><span class="linenum">2301</span></a>                  foreach (<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> as <a class="var it2605" onMouseOver="hilite(2605)" onMouseOut="lolite()" onClick="logVariable('parentid')" href="../_variables/parentid.html">$parentid</a>) {
<a name="l2302"><span class="linenum">2302</span></a>                      <a class="var it36469" onMouseOver="hilite(36469)" onMouseOut="lolite()" onClick="logVariable('namechunks')" href="../_variables/namechunks.html">$namechunks</a>[] = <a class="var it36466" onMouseOver="hilite(36466)" onMouseOut="lolite()" onClick="logVariable('baselist')" href="../_variables/baselist.html">$baselist</a>[<a class="var it2605" onMouseOver="hilite(2605)" onMouseOut="lolite()" onClick="logVariable('parentid')" href="../_variables/parentid.html">$parentid</a>]['name'];
<a name="l2303"><span class="linenum">2303</span></a>                  }
<a name="l2304"><span class="linenum">2304</span></a>                  <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('names')" href="../_variables/names.html">$names</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../_variables/separator.html">$separator</a>, <a class="var it36469" onMouseOver="hilite(36469)" onMouseOut="lolite()" onClick="logVariable('namechunks')" href="../_variables/namechunks.html">$namechunks</a>);
<a name="l2305"><span class="linenum">2305</span></a>              }
<a name="l2306"><span class="linenum">2306</span></a>          }
<a name="l2307"><span class="linenum">2307</span></a>          return <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('names')" href="../_variables/names.html">$names</a>;
<a name="l2308"><span class="linenum">2308</span></a>      }
<a name="l2309"><span class="linenum">2309</span></a>  
<a name="l2310"><span class="linenum">2310</span></a>      <span class="comment">/**</span>
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment">     * Prepares the object for caching. Works like the __sleep method.</span>
<a name="l2312"><span class="linenum">2312</span></a>  <span class="comment">     *</span>
<a name="l2313"><span class="linenum">2313</span></a>  <span class="comment">     * implementing method from interface cacheable_object</span>
<a name="l2314"><span class="linenum">2314</span></a>  <span class="comment">     *</span>
<a name="l2315"><span class="linenum">2315</span></a>  <span class="comment">     * @return array ready to be cached</span>
<a name="l2316"><span class="linenum">2316</span></a>  <span class="comment">     */</span>
<a name="l2317"><span class="linenum">2317</span></a>      public function <a class="function" onClick="logFunction('prepare_to_cache')" href="../_functions/prepare_to_cache.html" onMouseOver="funcPopup(event,'prepare_to_cache')">prepare_to_cache</a>() {
<a name="l2318"><span class="linenum">2318</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = array();
<a name="l2319"><span class="linenum">2319</span></a>          foreach (self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a> as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> =&gt; <a class="var it36470" onMouseOver="hilite(36470)" onMouseOut="lolite()" onClick="logVariable('cachedirectives')" href="../_variables/cachedirectives.html">$cachedirectives</a>) {
<a name="l2320"><span class="linenum">2320</span></a>              if (<a class="var it36470" onMouseOver="hilite(36470)" onMouseOut="lolite()" onClick="logVariable('cachedirectives')" href="../_variables/cachedirectives.html">$cachedirectives</a> !== null) {
<a name="l2321"><span class="linenum">2321</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>, <a class="var it2212" onMouseOver="hilite(2212)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../_variables/defaultvalue.html">$defaultvalue</a>) = <a class="var it36470" onMouseOver="hilite(36470)" onMouseOut="lolite()" onClick="logVariable('cachedirectives')" href="../_variables/cachedirectives.html">$cachedirectives</a>;
<a name="l2322"><span class="linenum">2322</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> !== <a class="var it2212" onMouseOver="hilite(2212)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../_variables/defaultvalue.html">$defaultvalue</a>) {
<a name="l2323"><span class="linenum">2323</span></a>                      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>[<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>;
<a name="l2324"><span class="linenum">2324</span></a>                  }
<a name="l2325"><span class="linenum">2325</span></a>              }
<a name="l2326"><span class="linenum">2326</span></a>          }
<a name="l2327"><span class="linenum">2327</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>();
<a name="l2328"><span class="linenum">2328</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>['xi'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2329"><span class="linenum">2329</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>['xp'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>;
<a name="l2330"><span class="linenum">2330</span></a>          return <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>;
<a name="l2331"><span class="linenum">2331</span></a>      }
<a name="l2332"><span class="linenum">2332</span></a>  
<a name="l2333"><span class="linenum">2333</span></a>      <span class="comment">/**</span>
<a name="l2334"><span class="linenum">2334</span></a>  <span class="comment">     * Takes the data provided by prepare_to_cache and reinitialises an instance of the associated from it.</span>
<a name="l2335"><span class="linenum">2335</span></a>  <span class="comment">     *</span>
<a name="l2336"><span class="linenum">2336</span></a>  <span class="comment">     * implementing method from interface cacheable_object</span>
<a name="l2337"><span class="linenum">2337</span></a>  <span class="comment">     *</span>
<a name="l2338"><span class="linenum">2338</span></a>  <span class="comment">     * @param array $a</span>
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment">     * @return coursecat</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment">     */</span>
<a name="l2341"><span class="linenum">2341</span></a>      public static function <a class="function" onClick="logFunction('wake_from_cache')" href="../_functions/wake_from_cache.html" onMouseOver="funcPopup(event,'wake_from_cache')">wake_from_cache</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>) {
<a name="l2342"><span class="linenum">2342</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = new stdClass;
<a name="l2343"><span class="linenum">2343</span></a>          foreach (self::<a class="var it36425" onMouseOver="hilite(36425)" onMouseOut="lolite()" onClick="logVariable('coursecatfields')" href="../_variables/coursecatfields.html">$coursecatfields</a> as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> =&gt; <a class="var it36470" onMouseOver="hilite(36470)" onMouseOut="lolite()" onClick="logVariable('cachedirectives')" href="../_variables/cachedirectives.html">$cachedirectives</a>) {
<a name="l2344"><span class="linenum">2344</span></a>              if (<a class="var it36470" onMouseOver="hilite(36470)" onMouseOut="lolite()" onClick="logVariable('cachedirectives')" href="../_variables/cachedirectives.html">$cachedirectives</a> !== null) {
<a name="l2345"><span class="linenum">2345</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>, <a class="var it2212" onMouseOver="hilite(2212)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../_variables/defaultvalue.html">$defaultvalue</a>) = <a class="var it36470" onMouseOver="hilite(36470)" onMouseOut="lolite()" onClick="logVariable('cachedirectives')" href="../_variables/cachedirectives.html">$cachedirectives</a>;
<a name="l2346"><span class="linenum">2346</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>)) {
<a name="l2347"><span class="linenum">2347</span></a>                      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> = <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>[<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>];
<a name="l2348"><span class="linenum">2348</span></a>                  } else {
<a name="l2349"><span class="linenum">2349</span></a>                      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> = <a class="var it2212" onMouseOver="hilite(2212)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../_variables/defaultvalue.html">$defaultvalue</a>;
<a name="l2350"><span class="linenum">2350</span></a>                  }
<a name="l2351"><span class="linenum">2351</span></a>              }
<a name="l2352"><span class="linenum">2352</span></a>          }
<a name="l2353"><span class="linenum">2353</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('ctxid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/ctxid.html">ctxid</a> = <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>['xi'];
<a name="l2354"><span class="linenum">2354</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('ctxpath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/ctxpath.html">ctxpath</a> = <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>['xp'];
<a name="l2355"><span class="linenum">2355</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('ctxdepth')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/ctxdepth.html">ctxdepth</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('depth')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a> + 1;
<a name="l2356"><span class="linenum">2356</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('ctxlevel')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/ctxlevel.html">ctxlevel</a> = <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>;
<a name="l2357"><span class="linenum">2357</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('ctxinstance')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/ctxinstance.html">ctxinstance</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2358"><span class="linenum">2358</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>, true);
<a name="l2359"><span class="linenum">2359</span></a>      }
<a name="l2360"><span class="linenum">2360</span></a>  
<a name="l2361"><span class="linenum">2361</span></a>      <span class="comment">/**</span>
<a name="l2362"><span class="linenum">2362</span></a>  <span class="comment">     * Returns true if the user is able to create a top level category.</span>
<a name="l2363"><span class="linenum">2363</span></a>  <span class="comment">     * @return bool</span>
<a name="l2364"><span class="linenum">2364</span></a>  <span class="comment">     */</span>
<a name="l2365"><span class="linenum">2365</span></a>      public static function <a class="function" onClick="logFunction('can_create_top_level_category')" href="../_functions/can_create_top_level_category.html" onMouseOver="funcPopup(event,'can_create_top_level_category')">can_create_top_level_category</a>() {
<a name="l2366"><span class="linenum">2366</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l2367"><span class="linenum">2367</span></a>      }
<a name="l2368"><span class="linenum">2368</span></a>  
<a name="l2369"><span class="linenum">2369</span></a>      <span class="comment">/**</span>
<a name="l2370"><span class="linenum">2370</span></a>  <span class="comment">     * Returns the category context.</span>
<a name="l2371"><span class="linenum">2371</span></a>  <span class="comment">     * @return context_coursecat</span>
<a name="l2372"><span class="linenum">2372</span></a>  <span class="comment">     */</span>
<a name="l2373"><span class="linenum">2373</span></a>      public function <a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>() {
<a name="l2374"><span class="linenum">2374</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> === 0) {
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">            // This is the special top level category object.</span>
<a name="l2376"><span class="linenum">2376</span></a>              return <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l2377"><span class="linenum">2377</span></a>          } else {
<a name="l2378"><span class="linenum">2378</span></a>              return <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2379"><span class="linenum">2379</span></a>          }
<a name="l2380"><span class="linenum">2380</span></a>      }
<a name="l2381"><span class="linenum">2381</span></a>  
<a name="l2382"><span class="linenum">2382</span></a>      <span class="comment">/**</span>
<a name="l2383"><span class="linenum">2383</span></a>  <span class="comment">     * Returns true if the user is able to manage this category.</span>
<a name="l2384"><span class="linenum">2384</span></a>  <span class="comment">     * @return bool</span>
<a name="l2385"><span class="linenum">2385</span></a>  <span class="comment">     */</span>
<a name="l2386"><span class="linenum">2386</span></a>      public function <a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>() {
<a name="l2387"><span class="linenum">2387</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hasmanagecapability')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/hasmanagecapability.html">hasmanagecapability</a> === null) {
<a name="l2388"><span class="linenum">2388</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hasmanagecapability')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/hasmanagecapability.html">hasmanagecapability</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2389"><span class="linenum">2389</span></a>          }
<a name="l2390"><span class="linenum">2390</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hasmanagecapability')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/hasmanagecapability.html">hasmanagecapability</a>;
<a name="l2391"><span class="linenum">2391</span></a>      }
<a name="l2392"><span class="linenum">2392</span></a>  
<a name="l2393"><span class="linenum">2393</span></a>      <span class="comment">/**</span>
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">     * Returns true if the user has the manage capability on the parent category.</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">     * @return bool</span>
<a name="l2396"><span class="linenum">2396</span></a>  <span class="comment">     */</span>
<a name="l2397"><span class="linenum">2397</span></a>      public function <a class="function" onClick="logFunction('parent_has_manage_capability')" href="../_functions/parent_has_manage_capability.html" onMouseOver="funcPopup(event,'parent_has_manage_capability')">parent_has_manage_capability</a>() {
<a name="l2398"><span class="linenum">2398</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="function" onClick="logFunction('get_category_or_system_context')" href="../_functions/get_category_or_system_context.html" onMouseOver="funcPopup(event,'get_category_or_system_context')">get_category_or_system_context</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>));
<a name="l2399"><span class="linenum">2399</span></a>      }
<a name="l2400"><span class="linenum">2400</span></a>  
<a name="l2401"><span class="linenum">2401</span></a>      <span class="comment">/**</span>
<a name="l2402"><span class="linenum">2402</span></a>  <span class="comment">     * Returns true if the current user can create subcategories of this category.</span>
<a name="l2403"><span class="linenum">2403</span></a>  <span class="comment">     * @return bool</span>
<a name="l2404"><span class="linenum">2404</span></a>  <span class="comment">     */</span>
<a name="l2405"><span class="linenum">2405</span></a>      public function <a class="function" onClick="logFunction('can_create_subcategory')" href="../_functions/can_create_subcategory.html" onMouseOver="funcPopup(event,'can_create_subcategory')">can_create_subcategory</a>() {
<a name="l2406"><span class="linenum">2406</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>();
<a name="l2407"><span class="linenum">2407</span></a>      }
<a name="l2408"><span class="linenum">2408</span></a>  
<a name="l2409"><span class="linenum">2409</span></a>      <span class="comment">/**</span>
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment">     * Returns true if the user can resort this categories sub categories and courses.</span>
<a name="l2411"><span class="linenum">2411</span></a>  <span class="comment">     * Must have manage capability and be able to see all subcategories.</span>
<a name="l2412"><span class="linenum">2412</span></a>  <span class="comment">     * @return bool</span>
<a name="l2413"><span class="linenum">2413</span></a>  <span class="comment">     */</span>
<a name="l2414"><span class="linenum">2414</span></a>      public function <a class="function" onClick="logFunction('can_resort_subcategories')" href="../_functions/can_resort_subcategories.html" onMouseOver="funcPopup(event,'can_resort_subcategories')">can_resort_subcategories</a>() {
<a name="l2415"><span class="linenum">2415</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>() &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_not_visible_children_ids')" href="../_functions/get_not_visible_children_ids.html" onMouseOver="funcPopup(event,'get_not_visible_children_ids')">get_not_visible_children_ids</a>();
<a name="l2416"><span class="linenum">2416</span></a>      }
<a name="l2417"><span class="linenum">2417</span></a>  
<a name="l2418"><span class="linenum">2418</span></a>      <span class="comment">/**</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment">     * Returns true if the user can resort the courses within this category.</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment">     * Must have manage capability and be able to see all courses.</span>
<a name="l2421"><span class="linenum">2421</span></a>  <span class="comment">     * @return bool</span>
<a name="l2422"><span class="linenum">2422</span></a>  <span class="comment">     */</span>
<a name="l2423"><span class="linenum">2423</span></a>      public function <a class="function" onClick="logFunction('can_resort_courses')" href="../_functions/can_resort_courses.html" onMouseOver="funcPopup(event,'can_resort_courses')">can_resort_courses</a>() {
<a name="l2424"><span class="linenum">2424</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>() &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/coursecount.html">coursecount</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_courses_count')" href="../_functions/get_courses_count.html" onMouseOver="funcPopup(event,'get_courses_count')">get_courses_count</a>();
<a name="l2425"><span class="linenum">2425</span></a>      }
<a name="l2426"><span class="linenum">2426</span></a>  
<a name="l2427"><span class="linenum">2427</span></a>      <span class="comment">/**</span>
<a name="l2428"><span class="linenum">2428</span></a>  <span class="comment">     * Returns true of the user can change the sortorder of this category (resort in the parent category)</span>
<a name="l2429"><span class="linenum">2429</span></a>  <span class="comment">     * @return bool</span>
<a name="l2430"><span class="linenum">2430</span></a>  <span class="comment">     */</span>
<a name="l2431"><span class="linenum">2431</span></a>      public function <a class="function" onClick="logFunction('can_change_sortorder')" href="../_functions/can_change_sortorder.html" onMouseOver="funcPopup(event,'can_change_sortorder')">can_change_sortorder</a>() {
<a name="l2432"><span class="linenum">2432</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_parent_coursecat')" href="../_functions/get_parent_coursecat.html" onMouseOver="funcPopup(event,'get_parent_coursecat')">get_parent_coursecat</a>()-&gt;<a class="function" onClick="logFunction('can_resort_subcategories')" href="../_functions/can_resort_subcategories.html" onMouseOver="funcPopup(event,'can_resort_subcategories')">can_resort_subcategories</a>();
<a name="l2433"><span class="linenum">2433</span></a>      }
<a name="l2434"><span class="linenum">2434</span></a>  
<a name="l2435"><span class="linenum">2435</span></a>      <span class="comment">/**</span>
<a name="l2436"><span class="linenum">2436</span></a>  <span class="comment">     * Returns true if the current user can create a course within this category.</span>
<a name="l2437"><span class="linenum">2437</span></a>  <span class="comment">     * @return bool</span>
<a name="l2438"><span class="linenum">2438</span></a>  <span class="comment">     */</span>
<a name="l2439"><span class="linenum">2439</span></a>      public function <a class="function" onClick="logFunction('can_create_course')" href="../_functions/can_create_course.html" onMouseOver="funcPopup(event,'can_create_course')">can_create_course</a>() {
<a name="l2440"><span class="linenum">2440</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:create', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2441"><span class="linenum">2441</span></a>      }
<a name="l2442"><span class="linenum">2442</span></a>  
<a name="l2443"><span class="linenum">2443</span></a>      <span class="comment">/**</span>
<a name="l2444"><span class="linenum">2444</span></a>  <span class="comment">     * Returns true if the current user can edit this categories settings.</span>
<a name="l2445"><span class="linenum">2445</span></a>  <span class="comment">     * @return bool</span>
<a name="l2446"><span class="linenum">2446</span></a>  <span class="comment">     */</span>
<a name="l2447"><span class="linenum">2447</span></a>      public function <a class="function" onClick="logFunction('can_edit')" href="../_functions/can_edit.html" onMouseOver="funcPopup(event,'can_edit')">can_edit</a>() {
<a name="l2448"><span class="linenum">2448</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>();
<a name="l2449"><span class="linenum">2449</span></a>      }
<a name="l2450"><span class="linenum">2450</span></a>  
<a name="l2451"><span class="linenum">2451</span></a>      <span class="comment">/**</span>
<a name="l2452"><span class="linenum">2452</span></a>  <span class="comment">     * Returns true if the current user can review role assignments for this category.</span>
<a name="l2453"><span class="linenum">2453</span></a>  <span class="comment">     * @return bool</span>
<a name="l2454"><span class="linenum">2454</span></a>  <span class="comment">     */</span>
<a name="l2455"><span class="linenum">2455</span></a>      public function <a class="function" onClick="logFunction('can_review_roles')" href="../_functions/can_review_roles.html" onMouseOver="funcPopup(event,'can_review_roles')">can_review_roles</a>() {
<a name="l2456"><span class="linenum">2456</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:assign', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2457"><span class="linenum">2457</span></a>      }
<a name="l2458"><span class="linenum">2458</span></a>  
<a name="l2459"><span class="linenum">2459</span></a>      <span class="comment">/**</span>
<a name="l2460"><span class="linenum">2460</span></a>  <span class="comment">     * Returns true if the current user can review permissions for this category.</span>
<a name="l2461"><span class="linenum">2461</span></a>  <span class="comment">     * @return bool</span>
<a name="l2462"><span class="linenum">2462</span></a>  <span class="comment">     */</span>
<a name="l2463"><span class="linenum">2463</span></a>      public function <a class="function" onClick="logFunction('can_review_permissions')" href="../_functions/can_review_permissions.html" onMouseOver="funcPopup(event,'can_review_permissions')">can_review_permissions</a>() {
<a name="l2464"><span class="linenum">2464</span></a>          return <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array(
<a name="l2465"><span class="linenum">2465</span></a>              'moodle/role:assign',
<a name="l2466"><span class="linenum">2466</span></a>              'moodle/role:safeoverride',
<a name="l2467"><span class="linenum">2467</span></a>              'moodle/role:override',
<a name="l2468"><span class="linenum">2468</span></a>              'moodle/role:assign'
<a name="l2469"><span class="linenum">2469</span></a>          ), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2470"><span class="linenum">2470</span></a>      }
<a name="l2471"><span class="linenum">2471</span></a>  
<a name="l2472"><span class="linenum">2472</span></a>      <span class="comment">/**</span>
<a name="l2473"><span class="linenum">2473</span></a>  <span class="comment">     * Returns true if the current user can review cohorts for this category.</span>
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment">     * @return bool</span>
<a name="l2475"><span class="linenum">2475</span></a>  <span class="comment">     */</span>
<a name="l2476"><span class="linenum">2476</span></a>      public function <a class="function" onClick="logFunction('can_review_cohorts')" href="../_functions/can_review_cohorts.html" onMouseOver="funcPopup(event,'can_review_cohorts')">can_review_cohorts</a>() {
<a name="l2477"><span class="linenum">2477</span></a>          return <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/cohort:view', 'moodle/cohort:manage'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2478"><span class="linenum">2478</span></a>      }
<a name="l2479"><span class="linenum">2479</span></a>  
<a name="l2480"><span class="linenum">2480</span></a>      <span class="comment">/**</span>
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment">     * Returns true if the current user can review filter settings for this category.</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment">     * @return bool</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment">     */</span>
<a name="l2484"><span class="linenum">2484</span></a>      public function <a class="function" onClick="logFunction('can_review_filters')" href="../_functions/can_review_filters.html" onMouseOver="funcPopup(event,'can_review_filters')">can_review_filters</a>() {
<a name="l2485"><span class="linenum">2485</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/filter:manage', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()) &amp;&amp;
<a name="l2486"><span class="linenum">2486</span></a>                 <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('filter_get_available_in_context')" href="../_functions/filter_get_available_in_context.html" onMouseOver="funcPopup(event,'filter_get_available_in_context')">filter_get_available_in_context</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()))&gt;0;
<a name="l2487"><span class="linenum">2487</span></a>      }
<a name="l2488"><span class="linenum">2488</span></a>  
<a name="l2489"><span class="linenum">2489</span></a>      <span class="comment">/**</span>
<a name="l2490"><span class="linenum">2490</span></a>  <span class="comment">     * Returns true if the current user is able to change the visbility of this category.</span>
<a name="l2491"><span class="linenum">2491</span></a>  <span class="comment">     * @return bool</span>
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment">     */</span>
<a name="l2493"><span class="linenum">2493</span></a>      public function <a class="function" onClick="logFunction('can_change_visibility')" href="../_functions/can_change_visibility.html" onMouseOver="funcPopup(event,'can_change_visibility')">can_change_visibility</a>() {
<a name="l2494"><span class="linenum">2494</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('parent_has_manage_capability')" href="../_functions/parent_has_manage_capability.html" onMouseOver="funcPopup(event,'parent_has_manage_capability')">parent_has_manage_capability</a>();
<a name="l2495"><span class="linenum">2495</span></a>      }
<a name="l2496"><span class="linenum">2496</span></a>  
<a name="l2497"><span class="linenum">2497</span></a>      <span class="comment">/**</span>
<a name="l2498"><span class="linenum">2498</span></a>  <span class="comment">     * Returns true if the user can move courses out of this category.</span>
<a name="l2499"><span class="linenum">2499</span></a>  <span class="comment">     * @return bool</span>
<a name="l2500"><span class="linenum">2500</span></a>  <span class="comment">     */</span>
<a name="l2501"><span class="linenum">2501</span></a>      public function <a class="function" onClick="logFunction('can_move_courses_out_of')" href="../_functions/can_move_courses_out_of.html" onMouseOver="funcPopup(event,'can_move_courses_out_of')">can_move_courses_out_of</a>() {
<a name="l2502"><span class="linenum">2502</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>();
<a name="l2503"><span class="linenum">2503</span></a>      }
<a name="l2504"><span class="linenum">2504</span></a>  
<a name="l2505"><span class="linenum">2505</span></a>      <span class="comment">/**</span>
<a name="l2506"><span class="linenum">2506</span></a>  <span class="comment">     * Returns true if the user can move courses into this category.</span>
<a name="l2507"><span class="linenum">2507</span></a>  <span class="comment">     * @return bool</span>
<a name="l2508"><span class="linenum">2508</span></a>  <span class="comment">     */</span>
<a name="l2509"><span class="linenum">2509</span></a>      public function <a class="function" onClick="logFunction('can_move_courses_into')" href="../_functions/can_move_courses_into.html" onMouseOver="funcPopup(event,'can_move_courses_into')">can_move_courses_into</a>() {
<a name="l2510"><span class="linenum">2510</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_manage_capability')" href="../_functions/has_manage_capability.html" onMouseOver="funcPopup(event,'has_manage_capability')">has_manage_capability</a>();
<a name="l2511"><span class="linenum">2511</span></a>      }
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>      <span class="comment">/**</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment">     * Returns true if the user is able to restore a course into this category as a new course.</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment">     * @return bool</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment">     */</span>
<a name="l2517"><span class="linenum">2517</span></a>      public function <a class="function" onClick="logFunction('can_restore_courses_into')" href="../_functions/can_restore_courses_into.html" onMouseOver="funcPopup(event,'can_restore_courses_into')">can_restore_courses_into</a>() {
<a name="l2518"><span class="linenum">2518</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restorecourse', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2519"><span class="linenum">2519</span></a>      }
<a name="l2520"><span class="linenum">2520</span></a>  
<a name="l2521"><span class="linenum">2521</span></a>      <span class="comment">/**</span>
<a name="l2522"><span class="linenum">2522</span></a>  <span class="comment">     * Resorts the sub categories of this category by the given field.</span>
<a name="l2523"><span class="linenum">2523</span></a>  <span class="comment">     *</span>
<a name="l2524"><span class="linenum">2524</span></a>  <span class="comment">     * @param string $field One of name, idnumber or descending values of each (appended desc)</span>
<a name="l2525"><span class="linenum">2525</span></a>  <span class="comment">     * @param bool $cleanup If true cleanup will be done, if false you will need to do it manually later.</span>
<a name="l2526"><span class="linenum">2526</span></a>  <span class="comment">     * @return bool True on success.</span>
<a name="l2527"><span class="linenum">2527</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l2528"><span class="linenum">2528</span></a>  <span class="comment">     */</span>
<a name="l2529"><span class="linenum">2529</span></a>      public function <a class="function" onClick="logFunction('resort_subcategories')" href="../_functions/resort_subcategories.html" onMouseOver="funcPopup(event,'resort_subcategories')">resort_subcategories</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, <a class="var it20148" onMouseOver="hilite(20148)" onMouseOut="lolite()" onClick="logVariable('cleanup')" href="../_variables/cleanup.html">$cleanup</a> = true) {
<a name="l2530"><span class="linenum">2530</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2531"><span class="linenum">2531</span></a>          <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../_variables/desc.html">$desc</a> = false;
<a name="l2532"><span class="linenum">2532</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, -4) === &quot;desc&quot;) {
<a name="l2533"><span class="linenum">2533</span></a>              <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../_variables/desc.html">$desc</a> = true;
<a name="l2534"><span class="linenum">2534</span></a>              <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, 0, -4);  <span class="comment">// Remove &quot;desc&quot; from field name.</span>
<a name="l2535"><span class="linenum">2535</span></a>          }
<a name="l2536"><span class="linenum">2536</span></a>          if (<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> !== 'name' &amp;&amp; <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> !== 'idnumber') {
<a name="l2537"><span class="linenum">2537</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid field requested');
<a name="l2538"><span class="linenum">2538</span></a>          }
<a name="l2539"><span class="linenum">2539</span></a>          <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_children')" href="../_functions/get_children.html" onMouseOver="funcPopup(event,'get_children')">get_children</a>();
<a name="l2540"><span class="linenum">2540</span></a>          <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>, <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_NATURAL);
<a name="l2541"><span class="linenum">2541</span></a>          if (!empty(<a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../_variables/desc.html">$desc</a>)) {
<a name="l2542"><span class="linenum">2542</span></a>              <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>);
<a name="l2543"><span class="linenum">2543</span></a>          }
<a name="l2544"><span class="linenum">2544</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1;
<a name="l2545"><span class="linenum">2545</span></a>          foreach (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>) {
<a name="l2546"><span class="linenum">2546</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l2547"><span class="linenum">2547</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'sortorder', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, array('id' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2548"><span class="linenum">2548</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> += <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('coursecount')" class="var it43105" onMouseOver="hilite(43105)" onMouseOut="lolite()" href="../_variables/coursecount.html">coursecount</a>;
<a name="l2549"><span class="linenum">2549</span></a>          }
<a name="l2550"><span class="linenum">2550</span></a>          if (<a class="var it20148" onMouseOver="hilite(20148)" onMouseOut="lolite()" onClick="logVariable('cleanup')" href="../_variables/cleanup.html">$cleanup</a>) {
<a name="l2551"><span class="linenum">2551</span></a>              self::<a class="function" onClick="logFunction('resort_categories_cleanup')" href="../_functions/resort_categories_cleanup.html" onMouseOver="funcPopup(event,'resort_categories_cleanup')">resort_categories_cleanup</a>();
<a name="l2552"><span class="linenum">2552</span></a>          }
<a name="l2553"><span class="linenum">2553</span></a>          return true;
<a name="l2554"><span class="linenum">2554</span></a>      }
<a name="l2555"><span class="linenum">2555</span></a>  
<a name="l2556"><span class="linenum">2556</span></a>      <span class="comment">/**</span>
<a name="l2557"><span class="linenum">2557</span></a>  <span class="comment">     * Cleans things up after categories have been resorted.</span>
<a name="l2558"><span class="linenum">2558</span></a>  <span class="comment">     * @param bool $includecourses If set to true we know courses have been resorted as well.</span>
<a name="l2559"><span class="linenum">2559</span></a>  <span class="comment">     */</span>
<a name="l2560"><span class="linenum">2560</span></a>      public static function <a class="function" onClick="logFunction('resort_categories_cleanup')" href="../_functions/resort_categories_cleanup.html" onMouseOver="funcPopup(event,'resort_categories_cleanup')">resort_categories_cleanup</a>(<a class="var it25425" onMouseOver="hilite(25425)" onMouseOut="lolite()" onClick="logVariable('includecourses')" href="../_variables/includecourses.html">$includecourses</a> = false) {
<a name="l2561"><span class="linenum">2561</span></a>  <span class="comment">        // This should not be needed but we do it just to be safe.</span>
<a name="l2562"><span class="linenum">2562</span></a>          <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2563"><span class="linenum">2563</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l2564"><span class="linenum">2564</span></a>          if (<a class="var it25425" onMouseOver="hilite(25425)" onMouseOut="lolite()" onClick="logVariable('includecourses')" href="../_variables/includecourses.html">$includecourses</a>) {
<a name="l2565"><span class="linenum">2565</span></a>              <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l2566"><span class="linenum">2566</span></a>          }
<a name="l2567"><span class="linenum">2567</span></a>      }
<a name="l2568"><span class="linenum">2568</span></a>  
<a name="l2569"><span class="linenum">2569</span></a>      <span class="comment">/**</span>
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment">     * Resort the courses within this category by the given field.</span>
<a name="l2571"><span class="linenum">2571</span></a>  <span class="comment">     *</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment">     * @param string $field One of fullname, shortname, idnumber or descending values of each (appended desc)</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment">     * @param bool $cleanup</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment">     * @return bool True for success.</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment">     */</span>
<a name="l2577"><span class="linenum">2577</span></a>      public function <a class="function" onClick="logFunction('resort_courses')" href="../_functions/resort_courses.html" onMouseOver="funcPopup(event,'resort_courses')">resort_courses</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, <a class="var it20148" onMouseOver="hilite(20148)" onMouseOut="lolite()" onClick="logVariable('cleanup')" href="../_variables/cleanup.html">$cleanup</a> = true) {
<a name="l2578"><span class="linenum">2578</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2579"><span class="linenum">2579</span></a>          <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../_variables/desc.html">$desc</a> = false;
<a name="l2580"><span class="linenum">2580</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, -4) === &quot;desc&quot;) {
<a name="l2581"><span class="linenum">2581</span></a>              <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../_variables/desc.html">$desc</a> = true;
<a name="l2582"><span class="linenum">2582</span></a>              <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, 0, -4);  <span class="comment">// Remove &quot;desc&quot; from field name.</span>
<a name="l2583"><span class="linenum">2583</span></a>          }
<a name="l2584"><span class="linenum">2584</span></a>          if (<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> !== 'fullname' &amp;&amp; <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> !== 'shortname' &amp;&amp; <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> !== 'idnumber' &amp;&amp; <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> !== 'timecreated') {
<a name="l2585"><span class="linenum">2585</span></a>  <span class="comment">            // This is ultra important as we use $field in an SQL statement below this.</span>
<a name="l2586"><span class="linenum">2586</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid field requested');
<a name="l2587"><span class="linenum">2587</span></a>          }
<a name="l2588"><span class="linenum">2588</span></a>          <a class="var it8526" onMouseOver="hilite(8526)" onMouseOut="lolite()" onClick="logVariable('ctxfields')" href="../_variables/ctxfields.html">$ctxfields</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l2589"><span class="linenum">2589</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.id, c.sortorder, c.{<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>}, <a class="var it8526" onMouseOver="hilite(8526)" onMouseOut="lolite()" onClick="logVariable('ctxfields')" href="../_variables/ctxfields.html">$ctxfields</a>
<a name="l2590"><span class="linenum">2590</span></a>                    FROM {course} c
<a name="l2591"><span class="linenum">2591</span></a>               LEFT JOIN {context} ctx ON ctx.instanceid = c.id
<a name="l2592"><span class="linenum">2592</span></a>                   WHERE ctx.contextlevel = :ctxlevel AND
<a name="l2593"><span class="linenum">2593</span></a>                         c.category = :categoryid&quot;;
<a name="l2594"><span class="linenum">2594</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l2595"><span class="linenum">2595</span></a>              'ctxlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>,
<a name="l2596"><span class="linenum">2596</span></a>              'categoryid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;id
<a name="l2597"><span class="linenum">2597</span></a>          );
<a name="l2598"><span class="linenum">2598</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l2599"><span class="linenum">2599</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) &gt; 0) {
<a name="l2600"><span class="linenum">2600</span></a>              foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2601"><span class="linenum">2601</span></a>                  <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2602"><span class="linenum">2602</span></a>                  if (<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> === 'idnumber') {
<a name="l2603"><span class="linenum">2603</span></a>                      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('sortby')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/sortby.html">sortby</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>;
<a name="l2604"><span class="linenum">2604</span></a>                  } else {
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">                    // It'll require formatting.</span>
<a name="l2606"><span class="linenum">2606</span></a>                      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(
<a name="l2607"><span class="linenum">2607</span></a>                          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)
<a name="l2608"><span class="linenum">2608</span></a>                      );
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment">                    // We format the string first so that it appears as the user would see it.</span>
<a name="l2610"><span class="linenum">2610</span></a>  <span class="comment">                    // This ensures the sorting makes sense to them. However it won't necessarily make</span>
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment">                    // sense to everyone if things like multilang filters are enabled.</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment">                    // We then strip any tags as we don't want things such as image tags skewing the</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment">                    // sort results.</span>
<a name="l2614"><span class="linenum">2614</span></a>                      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('sortby')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/sortby.html">sortby</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, true, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>));
<a name="l2615"><span class="linenum">2615</span></a>                  }
<a name="l2616"><span class="linenum">2616</span></a>  <span class="comment">                // We set it back here rather than using references as there is a bug with using</span>
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment">                // references in a foreach before passing as an arg by reference.</span>
<a name="l2618"><span class="linenum">2618</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l2619"><span class="linenum">2619</span></a>              }
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment">            // Sort the courses.</span>
<a name="l2621"><span class="linenum">2621</span></a>              <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, 'sortby', <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_NATURAL);
<a name="l2622"><span class="linenum">2622</span></a>              if (!empty(<a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../_variables/desc.html">$desc</a>)) {
<a name="l2623"><span class="linenum">2623</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l2624"><span class="linenum">2624</span></a>              }
<a name="l2625"><span class="linenum">2625</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1;
<a name="l2626"><span class="linenum">2626</span></a>              foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2627"><span class="linenum">2627</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'sortorder', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> + <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2628"><span class="linenum">2628</span></a>                  <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l2629"><span class="linenum">2629</span></a>              }
<a name="l2630"><span class="linenum">2630</span></a>              if (<a class="var it20148" onMouseOver="hilite(20148)" onMouseOut="lolite()" onClick="logVariable('cleanup')" href="../_variables/cleanup.html">$cleanup</a>) {
<a name="l2631"><span class="linenum">2631</span></a>  <span class="comment">                // This should not be needed but we do it just to be safe.</span>
<a name="l2632"><span class="linenum">2632</span></a>                  <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2633"><span class="linenum">2633</span></a>                  <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincourse');
<a name="l2634"><span class="linenum">2634</span></a>              }
<a name="l2635"><span class="linenum">2635</span></a>          }
<a name="l2636"><span class="linenum">2636</span></a>          return true;
<a name="l2637"><span class="linenum">2637</span></a>      }
<a name="l2638"><span class="linenum">2638</span></a>  
<a name="l2639"><span class="linenum">2639</span></a>      <span class="comment">/**</span>
<a name="l2640"><span class="linenum">2640</span></a>  <span class="comment">     * Changes the sort order of this categories parent shifting this category up or down one.</span>
<a name="l2641"><span class="linenum">2641</span></a>  <span class="comment">     *</span>
<a name="l2642"><span class="linenum">2642</span></a>  <span class="comment">     * @global \moodle_database $DB</span>
<a name="l2643"><span class="linenum">2643</span></a>  <span class="comment">     * @param bool $up If set to true the category is shifted up one spot, else its moved down.</span>
<a name="l2644"><span class="linenum">2644</span></a>  <span class="comment">     * @return bool True on success, false otherwise.</span>
<a name="l2645"><span class="linenum">2645</span></a>  <span class="comment">     */</span>
<a name="l2646"><span class="linenum">2646</span></a>      public function <a class="function" onClick="logFunction('change_sortorder_by_one')" href="../_functions/change_sortorder_by_one.html" onMouseOver="funcPopup(event,'change_sortorder_by_one')">change_sortorder_by_one</a>(<a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('up')" href="../_variables/up.html">$up</a>) {
<a name="l2647"><span class="linenum">2647</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2648"><span class="linenum">2648</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>);
<a name="l2649"><span class="linenum">2649</span></a>          if (<a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('up')" href="../_variables/up.html">$up</a>) {
<a name="l2650"><span class="linenum">2650</span></a>              <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = 'sortorder &lt; ? AND parent = ?';
<a name="l2651"><span class="linenum">2651</span></a>              <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a> = 'sortorder DESC';
<a name="l2652"><span class="linenum">2652</span></a>          } else {
<a name="l2653"><span class="linenum">2653</span></a>              <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = 'sortorder &gt; ? AND parent = ?';
<a name="l2654"><span class="linenum">2654</span></a>              <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a> = 'sortorder ASC';
<a name="l2655"><span class="linenum">2655</span></a>          }
<a name="l2656"><span class="linenum">2656</span></a>          <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2657"><span class="linenum">2657</span></a>          <a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('course_categories', <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>, '*', 0, 1);
<a name="l2658"><span class="linenum">2658</span></a>          <a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a>);
<a name="l2659"><span class="linenum">2659</span></a>          if (<a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a>) {
<a name="l2660"><span class="linenum">2660</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'sortorder', <a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a>-&gt;<a onClick="logVariable('sortorder')" class="var it44232" onMouseOver="hilite(44232)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2661"><span class="linenum">2661</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_categories', 'sortorder', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>, array('id' =&gt; <a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a>-&gt;<a onClick="logVariable('id')" class="var it44232" onMouseOver="hilite(44232)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2662"><span class="linenum">2662</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = <a class="var it24293" onMouseOver="hilite(24293)" onMouseOut="lolite()" onClick="logVariable('swapcategory')" href="../_variables/swapcategory.html">$swapcategory</a>-&gt;<a onClick="logVariable('sortorder')" class="var it44232" onMouseOver="hilite(44232)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>;
<a name="l2663"><span class="linenum">2663</span></a>  
<a name="l2664"><span class="linenum">2664</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('course_category_updated')" href="../_classes/course_category_updated.html" onMouseOver="classPopup(event,'course_category_updated')">course_category_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2665"><span class="linenum">2665</span></a>                  'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2666"><span class="linenum">2666</span></a>                  'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()
<a name="l2667"><span class="linenum">2667</span></a>              ));
<a name="l2668"><span class="linenum">2668</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, 'category', 'move', 'management.php?categoryid=' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2669"><span class="linenum">2669</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2670"><span class="linenum">2670</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2671"><span class="linenum">2671</span></a>  
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">            // Finally reorder courses.</span>
<a name="l2673"><span class="linenum">2673</span></a>              <a class="function" onClick="logFunction('fix_course_sortorder')" href="../_functions/fix_course_sortorder.html" onMouseOver="funcPopup(event,'fix_course_sortorder')">fix_course_sortorder</a>();
<a name="l2674"><span class="linenum">2674</span></a>              <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_by_event')" href="../_functions/purge_by_event.html" onMouseOver="funcPopup(event,'purge_by_event')">purge_by_event</a>('changesincoursecat');
<a name="l2675"><span class="linenum">2675</span></a>              return true;
<a name="l2676"><span class="linenum">2676</span></a>          }
<a name="l2677"><span class="linenum">2677</span></a>          return false;
<a name="l2678"><span class="linenum">2678</span></a>      }
<a name="l2679"><span class="linenum">2679</span></a>  
<a name="l2680"><span class="linenum">2680</span></a>      <span class="comment">/**</span>
<a name="l2681"><span class="linenum">2681</span></a>  <span class="comment">     * Returns the parent coursecat object for this category.</span>
<a name="l2682"><span class="linenum">2682</span></a>  <span class="comment">     *</span>
<a name="l2683"><span class="linenum">2683</span></a>  <span class="comment">     * @return coursecat</span>
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">     */</span>
<a name="l2685"><span class="linenum">2685</span></a>      public function <a class="function" onClick="logFunction('get_parent_coursecat')" href="../_functions/get_parent_coursecat.html" onMouseOver="funcPopup(event,'get_parent_coursecat')">get_parent_coursecat</a>() {
<a name="l2686"><span class="linenum">2686</span></a>          return self::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>);
<a name="l2687"><span class="linenum">2687</span></a>      }
<a name="l2688"><span class="linenum">2688</span></a>  
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>      <span class="comment">/**</span>
<a name="l2691"><span class="linenum">2691</span></a>  <span class="comment">     * Returns true if the user is able to request a new course be created.</span>
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">     * @return bool</span>
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">     */</span>
<a name="l2694"><span class="linenum">2694</span></a>      public function <a class="function" onClick="logFunction('can_request_course')" href="../_functions/can_request_course.html" onMouseOver="funcPopup(event,'can_request_course')">can_request_course</a>() {
<a name="l2695"><span class="linenum">2695</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2696"><span class="linenum">2696</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablecourserequests')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablecourserequests.html">enablecourserequests</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultrequestcategory')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultrequestcategory.html">defaultrequestcategory</a>) {
<a name="l2697"><span class="linenum">2697</span></a>              return false;
<a name="l2698"><span class="linenum">2698</span></a>          }
<a name="l2699"><span class="linenum">2699</span></a>          return !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_create_course')" href="../_functions/can_create_course.html" onMouseOver="funcPopup(event,'can_create_course')">can_create_course</a>() &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:request', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2700"><span class="linenum">2700</span></a>      }
<a name="l2701"><span class="linenum">2701</span></a>  
<a name="l2702"><span class="linenum">2702</span></a>      <span class="comment">/**</span>
<a name="l2703"><span class="linenum">2703</span></a>  <span class="comment">     * Returns true if the user can approve course requests.</span>
<a name="l2704"><span class="linenum">2704</span></a>  <span class="comment">     * @return bool</span>
<a name="l2705"><span class="linenum">2705</span></a>  <span class="comment">     */</span>
<a name="l2706"><span class="linenum">2706</span></a>      public static function <a class="function" onClick="logFunction('can_approve_course_requests')" href="../_functions/can_approve_course_requests.html" onMouseOver="funcPopup(event,'can_approve_course_requests')">can_approve_course_requests</a>() {
<a name="l2707"><span class="linenum">2707</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2708"><span class="linenum">2708</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablecourserequests')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablecourserequests.html">enablecourserequests</a>)) {
<a name="l2709"><span class="linenum">2709</span></a>              return false;
<a name="l2710"><span class="linenum">2710</span></a>          }
<a name="l2711"><span class="linenum">2711</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l2712"><span class="linenum">2712</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:approvecourse', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2713"><span class="linenum">2713</span></a>              return false;
<a name="l2714"><span class="linenum">2714</span></a>          }
<a name="l2715"><span class="linenum">2715</span></a>          if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course_request', array())) {
<a name="l2716"><span class="linenum">2716</span></a>              return false;
<a name="l2717"><span class="linenum">2717</span></a>          }
<a name="l2718"><span class="linenum">2718</span></a>          return true;
<a name="l2719"><span class="linenum">2719</span></a>      }
<a name="l2720"><span class="linenum">2720</span></a>  }
<a name="l2721"><span class="linenum">2721</span></a>  
<a name="l2722"><span class="linenum">2722</span></a>  <span class="comment">/**</span>
<a name="l2723"><span class="linenum">2723</span></a>  <span class="comment"> * Class to store information about one course in a list of courses</span>
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment"> *</span>
<a name="l2725"><span class="linenum">2725</span></a>  <span class="comment"> * Not all information may be retrieved when object is created but</span>
<a name="l2726"><span class="linenum">2726</span></a>  <span class="comment"> * it will be retrieved on demand when appropriate property or method is</span>
<a name="l2727"><span class="linenum">2727</span></a>  <span class="comment"> * called.</span>
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment"> *</span>
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment"> * Instances of this class are usually returned by functions</span>
<a name="l2730"><span class="linenum">2730</span></a>  <span class="comment"> * {@link coursecat::search_courses()}</span>
<a name="l2731"><span class="linenum">2731</span></a>  <span class="comment"> * and</span>
<a name="l2732"><span class="linenum">2732</span></a>  <span class="comment"> * {@link coursecat::get_courses()}</span>
<a name="l2733"><span class="linenum">2733</span></a>  <span class="comment"> *</span>
<a name="l2734"><span class="linenum">2734</span></a>  <span class="comment"> * @property-read int $id</span>
<a name="l2735"><span class="linenum">2735</span></a>  <span class="comment"> * @property-read int $category Category ID</span>
<a name="l2736"><span class="linenum">2736</span></a>  <span class="comment"> * @property-read int $sortorder</span>
<a name="l2737"><span class="linenum">2737</span></a>  <span class="comment"> * @property-read string $fullname</span>
<a name="l2738"><span class="linenum">2738</span></a>  <span class="comment"> * @property-read string $shortname</span>
<a name="l2739"><span class="linenum">2739</span></a>  <span class="comment"> * @property-read string $idnumber</span>
<a name="l2740"><span class="linenum">2740</span></a>  <span class="comment"> * @property-read string $summary Course summary. Field is present if coursecat::get_courses()</span>
<a name="l2741"><span class="linenum">2741</span></a>  <span class="comment"> *     was called with option 'summary'. Otherwise will be retrieved from DB on first request</span>
<a name="l2742"><span class="linenum">2742</span></a>  <span class="comment"> * @property-read int $summaryformat Summary format. Field is present if coursecat::get_courses()</span>
<a name="l2743"><span class="linenum">2743</span></a>  <span class="comment"> *     was called with option 'summary'. Otherwise will be retrieved from DB on first request</span>
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment"> * @property-read string $format Course format. Retrieved from DB on first request</span>
<a name="l2745"><span class="linenum">2745</span></a>  <span class="comment"> * @property-read int $showgrades Retrieved from DB on first request</span>
<a name="l2746"><span class="linenum">2746</span></a>  <span class="comment"> * @property-read int $newsitems Retrieved from DB on first request</span>
<a name="l2747"><span class="linenum">2747</span></a>  <span class="comment"> * @property-read int $startdate</span>
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment"> * @property-read int $marker Retrieved from DB on first request</span>
<a name="l2749"><span class="linenum">2749</span></a>  <span class="comment"> * @property-read int $maxbytes Retrieved from DB on first request</span>
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment"> * @property-read int $legacyfiles Retrieved from DB on first request</span>
<a name="l2751"><span class="linenum">2751</span></a>  <span class="comment"> * @property-read int $showreports Retrieved from DB on first request</span>
<a name="l2752"><span class="linenum">2752</span></a>  <span class="comment"> * @property-read int $visible</span>
<a name="l2753"><span class="linenum">2753</span></a>  <span class="comment"> * @property-read int $visibleold Retrieved from DB on first request</span>
<a name="l2754"><span class="linenum">2754</span></a>  <span class="comment"> * @property-read int $groupmode Retrieved from DB on first request</span>
<a name="l2755"><span class="linenum">2755</span></a>  <span class="comment"> * @property-read int $groupmodeforce Retrieved from DB on first request</span>
<a name="l2756"><span class="linenum">2756</span></a>  <span class="comment"> * @property-read int $defaultgroupingid Retrieved from DB on first request</span>
<a name="l2757"><span class="linenum">2757</span></a>  <span class="comment"> * @property-read string $lang Retrieved from DB on first request</span>
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment"> * @property-read string $theme Retrieved from DB on first request</span>
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment"> * @property-read int $timecreated Retrieved from DB on first request</span>
<a name="l2760"><span class="linenum">2760</span></a>  <span class="comment"> * @property-read int $timemodified Retrieved from DB on first request</span>
<a name="l2761"><span class="linenum">2761</span></a>  <span class="comment"> * @property-read int $requested Retrieved from DB on first request</span>
<a name="l2762"><span class="linenum">2762</span></a>  <span class="comment"> * @property-read int $enablecompletion Retrieved from DB on first request</span>
<a name="l2763"><span class="linenum">2763</span></a>  <span class="comment"> * @property-read int $completionnotify Retrieved from DB on first request</span>
<a name="l2764"><span class="linenum">2764</span></a>  <span class="comment"> * @property-read int $cacherev</span>
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment"> *</span>
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment"> * @package    core</span>
<a name="l2767"><span class="linenum">2767</span></a>  <span class="comment"> * @subpackage course</span>
<a name="l2768"><span class="linenum">2768</span></a>  <span class="comment"> * @copyright  2013 Marina Glancy</span>
<a name="l2769"><span class="linenum">2769</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2770"><span class="linenum">2770</span></a>  <span class="comment"> */</span>
<a name="l2771"><span class="linenum">2771</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('course_in_list')" href="../_classes/course_in_list.html" onMouseOver="classPopup(event,'course_in_list')">course_in_list</a> implements IteratorAggregate {
<a name="l2772"><span class="linenum">2772</span></a>  
<a name="l2773"><span class="linenum">2773</span></a>  <span class="comment">    /** @var stdClass record retrieved from DB, may have additional calculated property such as managers and hassummary */</span>
<a name="l2774"><span class="linenum">2774</span></a>      protected <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>;
<a name="l2775"><span class="linenum">2775</span></a>  
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment">    /** @var array array of course contacts - stores result of call to get_course_contacts() */</span>
<a name="l2777"><span class="linenum">2777</span></a>      protected <a class="var it30776" onMouseOver="hilite(30776)" onMouseOut="lolite()" onClick="logVariable('coursecontacts')" href="../_variables/coursecontacts.html">$coursecontacts</a>;
<a name="l2778"><span class="linenum">2778</span></a>  
<a name="l2779"><span class="linenum">2779</span></a>  <span class="comment">    /** @var bool true if the current user can access the course, false otherwise. */</span>
<a name="l2780"><span class="linenum">2780</span></a>      protected <a class="var it5870" onMouseOver="hilite(5870)" onMouseOut="lolite()" onClick="logVariable('canaccess')" href="../_variables/canaccess.html">$canaccess</a> = null;
<a name="l2781"><span class="linenum">2781</span></a>  
<a name="l2782"><span class="linenum">2782</span></a>      <span class="comment">/**</span>
<a name="l2783"><span class="linenum">2783</span></a>  <span class="comment">     * Creates an instance of the class from record</span>
<a name="l2784"><span class="linenum">2784</span></a>  <span class="comment">     *</span>
<a name="l2785"><span class="linenum">2785</span></a>  <span class="comment">     * @param stdClass $record except fields from course table it may contain</span>
<a name="l2786"><span class="linenum">2786</span></a>  <span class="comment">     *     field hassummary indicating that summary field is not empty.</span>
<a name="l2787"><span class="linenum">2787</span></a>  <span class="comment">     *     Also it is recommended to have context fields here ready for</span>
<a name="l2788"><span class="linenum">2788</span></a>  <span class="comment">     *     context preloading</span>
<a name="l2789"><span class="linenum">2789</span></a>  <span class="comment">     */</span>
<a name="l2790"><span class="linenum">2790</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(stdClass <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l2791"><span class="linenum">2791</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l2792"><span class="linenum">2792</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a> = new stdClass();
<a name="l2793"><span class="linenum">2793</span></a>          foreach (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2794"><span class="linenum">2794</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l2795"><span class="linenum">2795</span></a>          }
<a name="l2796"><span class="linenum">2796</span></a>      }
<a name="l2797"><span class="linenum">2797</span></a>  
<a name="l2798"><span class="linenum">2798</span></a>      <span class="comment">/**</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment">     * Indicates if the course has non-empty summary field</span>
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment">     *</span>
<a name="l2801"><span class="linenum">2801</span></a>  <span class="comment">     * @return bool</span>
<a name="l2802"><span class="linenum">2802</span></a>  <span class="comment">     */</span>
<a name="l2803"><span class="linenum">2803</span></a>      public function <a class="function" onClick="logFunction('has_summary')" href="../_functions/has_summary.html" onMouseOver="funcPopup(event,'has_summary')">has_summary</a>() {
<a name="l2804"><span class="linenum">2804</span></a>          if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;hassummary)) {
<a name="l2805"><span class="linenum">2805</span></a>              return !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;hassummary);
<a name="l2806"><span class="linenum">2806</span></a>          }
<a name="l2807"><span class="linenum">2807</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;summary)) {
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment">            // We need to retrieve summary.</span>
<a name="l2809"><span class="linenum">2809</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>('summary');
<a name="l2810"><span class="linenum">2810</span></a>          }
<a name="l2811"><span class="linenum">2811</span></a>          return !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;summary);
<a name="l2812"><span class="linenum">2812</span></a>      }
<a name="l2813"><span class="linenum">2813</span></a>  
<a name="l2814"><span class="linenum">2814</span></a>      <span class="comment">/**</span>
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment">     * Indicates if the course have course contacts to display</span>
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">     *</span>
<a name="l2817"><span class="linenum">2817</span></a>  <span class="comment">     * @return bool</span>
<a name="l2818"><span class="linenum">2818</span></a>  <span class="comment">     */</span>
<a name="l2819"><span class="linenum">2819</span></a>      public function <a class="function" onClick="logFunction('has_course_contacts')" href="../_functions/has_course_contacts.html" onMouseOver="funcPopup(event,'has_course_contacts')">has_course_contacts</a>() {
<a name="l2820"><span class="linenum">2820</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;managers)) {
<a name="l2821"><span class="linenum">2821</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> =&gt; &amp;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>);
<a name="l2822"><span class="linenum">2822</span></a>              <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l2823"><span class="linenum">2823</span></a>          }
<a name="l2824"><span class="linenum">2824</span></a>          return !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;managers);
<a name="l2825"><span class="linenum">2825</span></a>      }
<a name="l2826"><span class="linenum">2826</span></a>  
<a name="l2827"><span class="linenum">2827</span></a>      <span class="comment">/**</span>
<a name="l2828"><span class="linenum">2828</span></a>  <span class="comment">     * Returns list of course contacts (usually teachers) to display in course link</span>
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment">     *</span>
<a name="l2830"><span class="linenum">2830</span></a>  <span class="comment">     * Roles to display are set up in $CFG-&gt;coursecontact</span>
<a name="l2831"><span class="linenum">2831</span></a>  <span class="comment">     *</span>
<a name="l2832"><span class="linenum">2832</span></a>  <span class="comment">     * The result is the list of users where user id is the key and the value</span>
<a name="l2833"><span class="linenum">2833</span></a>  <span class="comment">     * is an array with elements:</span>
<a name="l2834"><span class="linenum">2834</span></a>  <span class="comment">     *  - 'user' - object containing basic user information</span>
<a name="l2835"><span class="linenum">2835</span></a>  <span class="comment">     *  - 'role' - object containing basic role information (id, name, shortname, coursealias)</span>
<a name="l2836"><span class="linenum">2836</span></a>  <span class="comment">     *  - 'rolename' =&gt; role_get_name($role, $context, ROLENAME_ALIAS)</span>
<a name="l2837"><span class="linenum">2837</span></a>  <span class="comment">     *  - 'username' =&gt; fullname($user, $canviewfullnames)</span>
<a name="l2838"><span class="linenum">2838</span></a>  <span class="comment">     *</span>
<a name="l2839"><span class="linenum">2839</span></a>  <span class="comment">     * @return array</span>
<a name="l2840"><span class="linenum">2840</span></a>  <span class="comment">     */</span>
<a name="l2841"><span class="linenum">2841</span></a>      public function <a class="function" onClick="logFunction('get_course_contacts')" href="../_functions/get_course_contacts.html" onMouseOver="funcPopup(event,'get_course_contacts')">get_course_contacts</a>() {
<a name="l2842"><span class="linenum">2842</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2843"><span class="linenum">2843</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('coursecontact')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/coursecontact.html">coursecontact</a>)) {
<a name="l2844"><span class="linenum">2844</span></a>  <span class="comment">            // No roles are configured to be displayed as course contacts.</span>
<a name="l2845"><span class="linenum">2845</span></a>              return array();
<a name="l2846"><span class="linenum">2846</span></a>          }
<a name="l2847"><span class="linenum">2847</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecontacts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/coursecontacts.html">coursecontacts</a> === null) {
<a name="l2848"><span class="linenum">2848</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecontacts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/coursecontacts.html">coursecontacts</a> = array();
<a name="l2849"><span class="linenum">2849</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2850"><span class="linenum">2850</span></a>  
<a name="l2851"><span class="linenum">2851</span></a>              if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;managers)) {
<a name="l2852"><span class="linenum">2852</span></a>  <span class="comment">                // Preload course contacts from DB.</span>
<a name="l2853"><span class="linenum">2853</span></a>                  <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> =&gt; &amp;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>);
<a name="l2854"><span class="linenum">2854</span></a>                  <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('preload_course_contacts')" href="../_functions/preload_course_contacts.html" onMouseOver="funcPopup(event,'preload_course_contacts')">preload_course_contacts</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l2855"><span class="linenum">2855</span></a>              }
<a name="l2856"><span class="linenum">2856</span></a>  
<a name="l2857"><span class="linenum">2857</span></a>  <span class="comment">            // Build return array with full roles names (for this course context) and users names.</span>
<a name="l2858"><span class="linenum">2858</span></a>              <a class="var it7922" onMouseOver="hilite(7922)" onMouseOut="lolite()" onClick="logVariable('canviewfullnames')" href="../_variables/canviewfullnames.html">$canviewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l2859"><span class="linenum">2859</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;managers as <a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>) {
<a name="l2860"><span class="linenum">2860</span></a>                  if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecontacts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/coursecontacts.html">coursecontacts</a>[<a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>-&gt;<a onClick="logVariable('id')" class="var it44233" onMouseOver="hilite(44233)" onMouseOut="lolite()" href="../_variables/id.html">id</a>])) {
<a name="l2861"><span class="linenum">2861</span></a>  <span class="comment">                    // Only display a user once with the highest sortorder role.</span>
<a name="l2862"><span class="linenum">2862</span></a>                      continue;
<a name="l2863"><span class="linenum">2863</span></a>                  }
<a name="l2864"><span class="linenum">2864</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = new stdClass();
<a name="l2865"><span class="linenum">2865</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>, null, array('id', 'username'));
<a name="l2866"><span class="linenum">2866</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a> = new stdClass();
<a name="l2867"><span class="linenum">2867</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('id')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>-&gt;<a onClick="logVariable('roleid')" class="var it44233" onMouseOver="hilite(44233)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>;
<a name="l2868"><span class="linenum">2868</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('name')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>-&gt;<a onClick="logVariable('rolename')" class="var it44233" onMouseOver="hilite(44233)" onMouseOut="lolite()" href="../_variables/rolename.html">rolename</a>;
<a name="l2869"><span class="linenum">2869</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('shortname')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> = <a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>-&gt;<a onClick="logVariable('roleshortname')" class="var it44233" onMouseOver="hilite(44233)" onMouseOut="lolite()" href="../_variables/roleshortname.html">roleshortname</a>;
<a name="l2870"><span class="linenum">2870</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('coursealias')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/coursealias.html">coursealias</a> = <a class="var it33249" onMouseOver="hilite(33249)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../_variables/ruser.html">$ruser</a>-&gt;<a onClick="logVariable('rolecoursealias')" class="var it44233" onMouseOver="hilite(44233)" onMouseOut="lolite()" href="../_variables/rolecoursealias.html">rolecoursealias</a>;
<a name="l2871"><span class="linenum">2871</span></a>  
<a name="l2872"><span class="linenum">2872</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecontacts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/coursecontacts.html">coursecontacts</a>[<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array(
<a name="l2873"><span class="linenum">2873</span></a>                      'user' =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>,
<a name="l2874"><span class="linenum">2874</span></a>                      'role' =&gt; <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>,
<a name="l2875"><span class="linenum">2875</span></a>                      'rolename' =&gt; <a class="function" onClick="logFunction('role_get_name')" href="../_functions/role_get_name.html" onMouseOver="funcPopup(event,'role_get_name')">role_get_name</a>(<a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="constant" onClick="logConstant('ROLENAME_ALIAS')" href="../_constants/ROLENAME_ALIAS.html" onMouseOver="constPopup(event,'ROLENAME_ALIAS')">ROLENAME_ALIAS</a>),
<a name="l2876"><span class="linenum">2876</span></a>                      'username' =&gt; <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it7922" onMouseOver="hilite(7922)" onMouseOut="lolite()" onClick="logVariable('canviewfullnames')" href="../_variables/canviewfullnames.html">$canviewfullnames</a>)
<a name="l2877"><span class="linenum">2877</span></a>                  );
<a name="l2878"><span class="linenum">2878</span></a>              }
<a name="l2879"><span class="linenum">2879</span></a>          }
<a name="l2880"><span class="linenum">2880</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecontacts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/coursecontacts.html">coursecontacts</a>;
<a name="l2881"><span class="linenum">2881</span></a>      }
<a name="l2882"><span class="linenum">2882</span></a>  
<a name="l2883"><span class="linenum">2883</span></a>      <span class="comment">/**</span>
<a name="l2884"><span class="linenum">2884</span></a>  <span class="comment">     * Checks if course has any associated overview files</span>
<a name="l2885"><span class="linenum">2885</span></a>  <span class="comment">     *</span>
<a name="l2886"><span class="linenum">2886</span></a>  <span class="comment">     * @return bool</span>
<a name="l2887"><span class="linenum">2887</span></a>  <span class="comment">     */</span>
<a name="l2888"><span class="linenum">2888</span></a>      public function <a class="function" onClick="logFunction('has_course_overviewfiles')" href="../_functions/has_course_overviewfiles.html" onMouseOver="funcPopup(event,'has_course_overviewfiles')">has_course_overviewfiles</a>() {
<a name="l2889"><span class="linenum">2889</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2890"><span class="linenum">2890</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfileslimit')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfileslimit.html">courseoverviewfileslimit</a>)) {
<a name="l2891"><span class="linenum">2891</span></a>              return false;
<a name="l2892"><span class="linenum">2892</span></a>          }
<a name="l2893"><span class="linenum">2893</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2894"><span class="linenum">2894</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2895"><span class="linenum">2895</span></a>          return !<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('is_area_empty')" href="../_functions/is_area_empty.html" onMouseOver="funcPopup(event,'is_area_empty')">is_area_empty</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course', 'overviewfiles');
<a name="l2896"><span class="linenum">2896</span></a>      }
<a name="l2897"><span class="linenum">2897</span></a>  
<a name="l2898"><span class="linenum">2898</span></a>      <span class="comment">/**</span>
<a name="l2899"><span class="linenum">2899</span></a>  <span class="comment">     * Returns all course overview files</span>
<a name="l2900"><span class="linenum">2900</span></a>  <span class="comment">     *</span>
<a name="l2901"><span class="linenum">2901</span></a>  <span class="comment">     * @return array array of stored_file objects</span>
<a name="l2902"><span class="linenum">2902</span></a>  <span class="comment">     */</span>
<a name="l2903"><span class="linenum">2903</span></a>      public function <a class="function" onClick="logFunction('get_course_overviewfiles')" href="../_functions/get_course_overviewfiles.html" onMouseOver="funcPopup(event,'get_course_overviewfiles')">get_course_overviewfiles</a>() {
<a name="l2904"><span class="linenum">2904</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2905"><span class="linenum">2905</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfileslimit')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfileslimit.html">courseoverviewfileslimit</a>)) {
<a name="l2906"><span class="linenum">2906</span></a>              return array();
<a name="l2907"><span class="linenum">2907</span></a>          }
<a name="l2908"><span class="linenum">2908</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>. '/filestorage/file_storage.php');
<a name="l2909"><span class="linenum">2909</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>. '<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l2910"><span class="linenum">2910</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2911"><span class="linenum">2911</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2912"><span class="linenum">2912</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course', 'overviewfiles', false, 'filename', false);
<a name="l2913"><span class="linenum">2913</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>)) {
<a name="l2914"><span class="linenum">2914</span></a>              <a class="var it3116" onMouseOver="hilite(3116)" onMouseOut="lolite()" onClick="logVariable('overviewfilesoptions')" href="../_variables/overviewfilesoptions.html">$overviewfilesoptions</a> = <a class="function" onClick="logFunction('course_overviewfiles_options')" href="../_functions/course_overviewfiles_options.html" onMouseOver="funcPopup(event,'course_overviewfiles_options')">course_overviewfiles_options</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2915"><span class="linenum">2915</span></a>              <a class="var it7453" onMouseOver="hilite(7453)" onMouseOut="lolite()" onClick="logVariable('acceptedtypes')" href="../_variables/acceptedtypes.html">$acceptedtypes</a> = <a class="var it3116" onMouseOver="hilite(3116)" onMouseOut="lolite()" onClick="logVariable('overviewfilesoptions')" href="../_variables/overviewfilesoptions.html">$overviewfilesoptions</a>['accepted_types'];
<a name="l2916"><span class="linenum">2916</span></a>              if (<a class="var it7453" onMouseOver="hilite(7453)" onMouseOut="lolite()" onClick="logVariable('acceptedtypes')" href="../_variables/acceptedtypes.html">$acceptedtypes</a> !== '*') {
<a name="l2917"><span class="linenum">2917</span></a>  <span class="comment">                // Filter only files with allowed extensions.</span>
<a name="l2918"><span class="linenum">2918</span></a>                  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>. '/filelib.php');
<a name="l2919"><span class="linenum">2919</span></a>                  foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l2920"><span class="linenum">2920</span></a>                      if (!<a class="function" onClick="logFunction('file_extension_in_typegroup')" href="../_functions/file_extension_in_typegroup.html" onMouseOver="funcPopup(event,'file_extension_in_typegroup')">file_extension_in_typegroup</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>(), <a class="var it7453" onMouseOver="hilite(7453)" onMouseOut="lolite()" onClick="logVariable('acceptedtypes')" href="../_variables/acceptedtypes.html">$acceptedtypes</a>)) {
<a name="l2921"><span class="linenum">2921</span></a>                          unset(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l2922"><span class="linenum">2922</span></a>                      }
<a name="l2923"><span class="linenum">2923</span></a>                  }
<a name="l2924"><span class="linenum">2924</span></a>              }
<a name="l2925"><span class="linenum">2925</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>) &gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfileslimit')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfileslimit.html">courseoverviewfileslimit</a>) {
<a name="l2926"><span class="linenum">2926</span></a>  <span class="comment">                // Return no more than $CFG-&gt;courseoverviewfileslimit files.</span>
<a name="l2927"><span class="linenum">2927</span></a>                  <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>, 0, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('courseoverviewfileslimit')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/courseoverviewfileslimit.html">courseoverviewfileslimit</a>, true);
<a name="l2928"><span class="linenum">2928</span></a>              }
<a name="l2929"><span class="linenum">2929</span></a>          }
<a name="l2930"><span class="linenum">2930</span></a>          return <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>;
<a name="l2931"><span class="linenum">2931</span></a>      }
<a name="l2932"><span class="linenum">2932</span></a>  
<a name="l2933"><span class="linenum">2933</span></a>      <span class="comment">/**</span>
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment">     * Magic method to check if property is set</span>
<a name="l2935"><span class="linenum">2935</span></a>  <span class="comment">     *</span>
<a name="l2936"><span class="linenum">2936</span></a>  <span class="comment">     * @param string $name</span>
<a name="l2937"><span class="linenum">2937</span></a>  <span class="comment">     * @return bool</span>
<a name="l2938"><span class="linenum">2938</span></a>  <span class="comment">     */</span>
<a name="l2939"><span class="linenum">2939</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l2940"><span class="linenum">2940</span></a>          return isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l2941"><span class="linenum">2941</span></a>      }
<a name="l2942"><span class="linenum">2942</span></a>  
<a name="l2943"><span class="linenum">2943</span></a>      <span class="comment">/**</span>
<a name="l2944"><span class="linenum">2944</span></a>  <span class="comment">     * Magic method to get a course property</span>
<a name="l2945"><span class="linenum">2945</span></a>  <span class="comment">     *</span>
<a name="l2946"><span class="linenum">2946</span></a>  <span class="comment">     * Returns any field from table course (retrieves it from DB if it was not retrieved before)</span>
<a name="l2947"><span class="linenum">2947</span></a>  <span class="comment">     *</span>
<a name="l2948"><span class="linenum">2948</span></a>  <span class="comment">     * @param string $name</span>
<a name="l2949"><span class="linenum">2949</span></a>  <span class="comment">     * @return mixed</span>
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment">     */</span>
<a name="l2951"><span class="linenum">2951</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l2952"><span class="linenum">2952</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2953"><span class="linenum">2953</span></a>          if (property_exists(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>)) {
<a name="l2954"><span class="linenum">2954</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l2955"><span class="linenum">2955</span></a>          } else if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> === 'summary' || <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> === 'summaryformat') {
<a name="l2956"><span class="linenum">2956</span></a>  <span class="comment">            // Retrieve fields summary and summaryformat together because they are most likely to be used together.</span>
<a name="l2957"><span class="linenum">2957</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;id), 'summary, summaryformat', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2958"><span class="linenum">2958</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;summary = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('summary')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>;
<a name="l2959"><span class="linenum">2959</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;summaryformat = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('summaryformat')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/summaryformat.html">summaryformat</a>;
<a name="l2960"><span class="linenum">2960</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l2961"><span class="linenum">2961</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>('course'))) {
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment">            // Another field from table 'course' that was not retrieved.</span>
<a name="l2963"><span class="linenum">2963</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;id), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2964"><span class="linenum">2964</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l2965"><span class="linenum">2965</span></a>          }
<a name="l2966"><span class="linenum">2966</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid course property accessed! '.<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l2967"><span class="linenum">2967</span></a>          return null;
<a name="l2968"><span class="linenum">2968</span></a>      }
<a name="l2969"><span class="linenum">2969</span></a>  
<a name="l2970"><span class="linenum">2970</span></a>      <span class="comment">/**</span>
<a name="l2971"><span class="linenum">2971</span></a>  <span class="comment">     * All properties are read only, sorry.</span>
<a name="l2972"><span class="linenum">2972</span></a>  <span class="comment">     *</span>
<a name="l2973"><span class="linenum">2973</span></a>  <span class="comment">     * @param string $name</span>
<a name="l2974"><span class="linenum">2974</span></a>  <span class="comment">     */</span>
<a name="l2975"><span class="linenum">2975</span></a>      public function <a class="function" onClick="logFunction('__unset')" href="../_functions/__unset.html" onMouseOver="funcPopup(event,'__unset')">__unset</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l2976"><span class="linenum">2976</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Can not unset '.<a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>).' instance properties!');
<a name="l2977"><span class="linenum">2977</span></a>      }
<a name="l2978"><span class="linenum">2978</span></a>  
<a name="l2979"><span class="linenum">2979</span></a>      <span class="comment">/**</span>
<a name="l2980"><span class="linenum">2980</span></a>  <span class="comment">     * Magic setter method, we do not want anybody to modify properties from the outside</span>
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment">     *</span>
<a name="l2982"><span class="linenum">2982</span></a>  <span class="comment">     * @param string $name</span>
<a name="l2983"><span class="linenum">2983</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l2984"><span class="linenum">2984</span></a>  <span class="comment">     */</span>
<a name="l2985"><span class="linenum">2985</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2986"><span class="linenum">2986</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Can not change '.<a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>).' instance properties!');
<a name="l2987"><span class="linenum">2987</span></a>      }
<a name="l2988"><span class="linenum">2988</span></a>  
<a name="l2989"><span class="linenum">2989</span></a>      <span class="comment">/**</span>
<a name="l2990"><span class="linenum">2990</span></a>  <span class="comment">     * Create an iterator because magic vars can't be seen by 'foreach'.</span>
<a name="l2991"><span class="linenum">2991</span></a>  <span class="comment">     * Exclude context fields</span>
<a name="l2992"><span class="linenum">2992</span></a>  <span class="comment">     *</span>
<a name="l2993"><span class="linenum">2993</span></a>  <span class="comment">     * Implementing method from interface IteratorAggregate</span>
<a name="l2994"><span class="linenum">2994</span></a>  <span class="comment">     *</span>
<a name="l2995"><span class="linenum">2995</span></a>  <span class="comment">     * @return ArrayIterator</span>
<a name="l2996"><span class="linenum">2996</span></a>  <span class="comment">     */</span>
<a name="l2997"><span class="linenum">2997</span></a>      public function <a class="function" onClick="logFunction('getIterator')" href="../_functions/getiterator.html" onMouseOver="funcPopup(event,'getiterator')">getIterator</a>() {
<a name="l2998"><span class="linenum">2998</span></a>          <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a> = array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>-&gt;id);
<a name="l2999"><span class="linenum">2999</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a> as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l3000"><span class="linenum">3000</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../_variables/property.html">$property</a>] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l3001"><span class="linenum">3001</span></a>          }
<a name="l3002"><span class="linenum">3002</span></a>          return new ArrayIterator(<a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>);
<a name="l3003"><span class="linenum">3003</span></a>      }
<a name="l3004"><span class="linenum">3004</span></a>  
<a name="l3005"><span class="linenum">3005</span></a>      <span class="comment">/**</span>
<a name="l3006"><span class="linenum">3006</span></a>  <span class="comment">     * Returns the name of this course as it should be displayed within a list.</span>
<a name="l3007"><span class="linenum">3007</span></a>  <span class="comment">     * @return string</span>
<a name="l3008"><span class="linenum">3008</span></a>  <span class="comment">     */</span>
<a name="l3009"><span class="linenum">3009</span></a>      public function <a class="function" onClick="logFunction('get_formatted_name')" href="../_functions/get_formatted_name.html" onMouseOver="funcPopup(event,'get_formatted_name')">get_formatted_name</a>() {
<a name="l3010"><span class="linenum">3010</span></a>          return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="function" onClick="logFunction('get_course_display_name_for_list')" href="../_functions/get_course_display_name_for_list.html" onMouseOver="funcPopup(event,'get_course_display_name_for_list')">get_course_display_name_for_list</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>), true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3011"><span class="linenum">3011</span></a>      }
<a name="l3012"><span class="linenum">3012</span></a>  
<a name="l3013"><span class="linenum">3013</span></a>      <span class="comment">/**</span>
<a name="l3014"><span class="linenum">3014</span></a>  <span class="comment">     * Returns the formatted fullname for this course.</span>
<a name="l3015"><span class="linenum">3015</span></a>  <span class="comment">     * @return string</span>
<a name="l3016"><span class="linenum">3016</span></a>  <span class="comment">     */</span>
<a name="l3017"><span class="linenum">3017</span></a>      public function <a class="function" onClick="logFunction('get_formatted_fullname')" href="../_functions/get_formatted_fullname.html" onMouseOver="funcPopup(event,'get_formatted_fullname')">get_formatted_fullname</a>() {
<a name="l3018"><span class="linenum">3018</span></a>          return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>('fullname'), true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3019"><span class="linenum">3019</span></a>      }
<a name="l3020"><span class="linenum">3020</span></a>  
<a name="l3021"><span class="linenum">3021</span></a>      <span class="comment">/**</span>
<a name="l3022"><span class="linenum">3022</span></a>  <span class="comment">     * Returns the formatted shortname for this course.</span>
<a name="l3023"><span class="linenum">3023</span></a>  <span class="comment">     * @return string</span>
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment">     */</span>
<a name="l3025"><span class="linenum">3025</span></a>      public function <a class="function" onClick="logFunction('get_formatted_shortname')" href="../_functions/get_formatted_shortname.html" onMouseOver="funcPopup(event,'get_formatted_shortname')">get_formatted_shortname</a>() {
<a name="l3026"><span class="linenum">3026</span></a>          return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>('shortname'), true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3027"><span class="linenum">3027</span></a>      }
<a name="l3028"><span class="linenum">3028</span></a>  
<a name="l3029"><span class="linenum">3029</span></a>      <span class="comment">/**</span>
<a name="l3030"><span class="linenum">3030</span></a>  <span class="comment">     * Returns true if the current user can access this course.</span>
<a name="l3031"><span class="linenum">3031</span></a>  <span class="comment">     * @return bool</span>
<a name="l3032"><span class="linenum">3032</span></a>  <span class="comment">     */</span>
<a name="l3033"><span class="linenum">3033</span></a>      public function <a class="function" onClick="logFunction('can_access')" href="../_functions/can_access.html" onMouseOver="funcPopup(event,'can_access')">can_access</a>() {
<a name="l3034"><span class="linenum">3034</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('canaccess')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/canaccess.html">canaccess</a> === null) {
<a name="l3035"><span class="linenum">3035</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('canaccess')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/canaccess.html">canaccess</a> = <a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/record.html">record</a>);
<a name="l3036"><span class="linenum">3036</span></a>          }
<a name="l3037"><span class="linenum">3037</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('canaccess')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/canaccess.html">canaccess</a>;
<a name="l3038"><span class="linenum">3038</span></a>      }
<a name="l3039"><span class="linenum">3039</span></a>  
<a name="l3040"><span class="linenum">3040</span></a>      <span class="comment">/**</span>
<a name="l3041"><span class="linenum">3041</span></a>  <span class="comment">     * Returns true if the user can edit this courses settings.</span>
<a name="l3042"><span class="linenum">3042</span></a>  <span class="comment">     *</span>
<a name="l3043"><span class="linenum">3043</span></a>  <span class="comment">     * Note: this function does not check that the current user can access the course.</span>
<a name="l3044"><span class="linenum">3044</span></a>  <span class="comment">     * To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}</span>
<a name="l3045"><span class="linenum">3045</span></a>  <span class="comment">     *</span>
<a name="l3046"><span class="linenum">3046</span></a>  <span class="comment">     * @return bool</span>
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment">     */</span>
<a name="l3048"><span class="linenum">3048</span></a>      public function <a class="function" onClick="logFunction('can_edit')" href="../_functions/can_edit.html" onMouseOver="funcPopup(event,'can_edit')">can_edit</a>() {
<a name="l3049"><span class="linenum">3049</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:update', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3050"><span class="linenum">3050</span></a>      }
<a name="l3051"><span class="linenum">3051</span></a>  
<a name="l3052"><span class="linenum">3052</span></a>      <span class="comment">/**</span>
<a name="l3053"><span class="linenum">3053</span></a>  <span class="comment">     * Returns true if the user can change the visibility of this course.</span>
<a name="l3054"><span class="linenum">3054</span></a>  <span class="comment">     *</span>
<a name="l3055"><span class="linenum">3055</span></a>  <span class="comment">     * Note: this function does not check that the current user can access the course.</span>
<a name="l3056"><span class="linenum">3056</span></a>  <span class="comment">     * To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}</span>
<a name="l3057"><span class="linenum">3057</span></a>  <span class="comment">     *</span>
<a name="l3058"><span class="linenum">3058</span></a>  <span class="comment">     * @return bool</span>
<a name="l3059"><span class="linenum">3059</span></a>  <span class="comment">     */</span>
<a name="l3060"><span class="linenum">3060</span></a>      public function <a class="function" onClick="logFunction('can_change_visibility')" href="../_functions/can_change_visibility.html" onMouseOver="funcPopup(event,'can_change_visibility')">can_change_visibility</a>() {
<a name="l3061"><span class="linenum">3061</span></a>  <span class="comment">        // You must be able to both hide a course and view the hidden course.</span>
<a name="l3062"><span class="linenum">3062</span></a>          return <a class="function" onClick="logFunction('has_all_capabilities')" href="../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(array('moodle/course:visibility', 'moodle/course:viewhiddencourses'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3063"><span class="linenum">3063</span></a>      }
<a name="l3064"><span class="linenum">3064</span></a>  
<a name="l3065"><span class="linenum">3065</span></a>      <span class="comment">/**</span>
<a name="l3066"><span class="linenum">3066</span></a>  <span class="comment">     * Returns the context for this course.</span>
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment">     * @return context_course</span>
<a name="l3068"><span class="linenum">3068</span></a>  <span class="comment">     */</span>
<a name="l3069"><span class="linenum">3069</span></a>      public function <a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>() {
<a name="l3070"><span class="linenum">3070</span></a>          return <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>('id'));
<a name="l3071"><span class="linenum">3071</span></a>      }
<a name="l3072"><span class="linenum">3072</span></a>  
<a name="l3073"><span class="linenum">3073</span></a>      <span class="comment">/**</span>
<a name="l3074"><span class="linenum">3074</span></a>  <span class="comment">     * Returns true if this course is visible to the current user.</span>
<a name="l3075"><span class="linenum">3075</span></a>  <span class="comment">     * @return bool</span>
<a name="l3076"><span class="linenum">3076</span></a>  <span class="comment">     */</span>
<a name="l3077"><span class="linenum">3077</span></a>      public function <a class="function" onClick="logFunction('is_uservisible')" href="../_functions/is_uservisible.html" onMouseOver="funcPopup(event,'is_uservisible')">is_uservisible</a>() {
<a name="l3078"><span class="linenum">3078</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddencourses', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3079"><span class="linenum">3079</span></a>      }
<a name="l3080"><span class="linenum">3080</span></a>  
<a name="l3081"><span class="linenum">3081</span></a>      <span class="comment">/**</span>
<a name="l3082"><span class="linenum">3082</span></a>  <span class="comment">     * Returns true if the current user can review enrolments for this course.</span>
<a name="l3083"><span class="linenum">3083</span></a>  <span class="comment">     *</span>
<a name="l3084"><span class="linenum">3084</span></a>  <span class="comment">     * Note: this function does not check that the current user can access the course.</span>
<a name="l3085"><span class="linenum">3085</span></a>  <span class="comment">     * To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}</span>
<a name="l3086"><span class="linenum">3086</span></a>  <span class="comment">     *</span>
<a name="l3087"><span class="linenum">3087</span></a>  <span class="comment">     * @return bool</span>
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">     */</span>
<a name="l3089"><span class="linenum">3089</span></a>      public function <a class="function" onClick="logFunction('can_review_enrolments')" href="../_functions/can_review_enrolments.html" onMouseOver="funcPopup(event,'can_review_enrolments')">can_review_enrolments</a>() {
<a name="l3090"><span class="linenum">3090</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:enrolreview', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3091"><span class="linenum">3091</span></a>      }
<a name="l3092"><span class="linenum">3092</span></a>  
<a name="l3093"><span class="linenum">3093</span></a>      <span class="comment">/**</span>
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment">     * Returns true if the current user can delete this course.</span>
<a name="l3095"><span class="linenum">3095</span></a>  <span class="comment">     *</span>
<a name="l3096"><span class="linenum">3096</span></a>  <span class="comment">     * Note: this function does not check that the current user can access the course.</span>
<a name="l3097"><span class="linenum">3097</span></a>  <span class="comment">     * To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}</span>
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment">     *</span>
<a name="l3099"><span class="linenum">3099</span></a>  <span class="comment">     * @return bool</span>
<a name="l3100"><span class="linenum">3100</span></a>  <span class="comment">     */</span>
<a name="l3101"><span class="linenum">3101</span></a>      public function <a class="function" onClick="logFunction('can_delete')" href="../_functions/can_delete.html" onMouseOver="funcPopup(event,'can_delete')">can_delete</a>() {
<a name="l3102"><span class="linenum">3102</span></a>          return <a class="function" onClick="logFunction('can_delete_course')" href="../_functions/can_delete_course.html" onMouseOver="funcPopup(event,'can_delete_course')">can_delete_course</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3103"><span class="linenum">3103</span></a>      }
<a name="l3104"><span class="linenum">3104</span></a>  
<a name="l3105"><span class="linenum">3105</span></a>      <span class="comment">/**</span>
<a name="l3106"><span class="linenum">3106</span></a>  <span class="comment">     * Returns true if the current user can backup this course.</span>
<a name="l3107"><span class="linenum">3107</span></a>  <span class="comment">     *</span>
<a name="l3108"><span class="linenum">3108</span></a>  <span class="comment">     * Note: this function does not check that the current user can access the course.</span>
<a name="l3109"><span class="linenum">3109</span></a>  <span class="comment">     * To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}</span>
<a name="l3110"><span class="linenum">3110</span></a>  <span class="comment">     *</span>
<a name="l3111"><span class="linenum">3111</span></a>  <span class="comment">     * @return bool</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment">     */</span>
<a name="l3113"><span class="linenum">3113</span></a>      public function <a class="function" onClick="logFunction('can_backup')" href="../_functions/can_backup.html" onMouseOver="funcPopup(event,'can_backup')">can_backup</a>() {
<a name="l3114"><span class="linenum">3114</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/backup:backupcourse', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3115"><span class="linenum">3115</span></a>      }
<a name="l3116"><span class="linenum">3116</span></a>  
<a name="l3117"><span class="linenum">3117</span></a>      <span class="comment">/**</span>
<a name="l3118"><span class="linenum">3118</span></a>  <span class="comment">     * Returns true if the current user can restore this course.</span>
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment">     *</span>
<a name="l3120"><span class="linenum">3120</span></a>  <span class="comment">     * Note: this function does not check that the current user can access the course.</span>
<a name="l3121"><span class="linenum">3121</span></a>  <span class="comment">     * To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}</span>
<a name="l3122"><span class="linenum">3122</span></a>  <span class="comment">     *</span>
<a name="l3123"><span class="linenum">3123</span></a>  <span class="comment">     * @return bool</span>
<a name="l3124"><span class="linenum">3124</span></a>  <span class="comment">     */</span>
<a name="l3125"><span class="linenum">3125</span></a>      public function <a class="function" onClick="logFunction('can_restore')" href="../_functions/can_restore.html" onMouseOver="funcPopup(event,'can_restore')">can_restore</a>() {
<a name="l3126"><span class="linenum">3126</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restorecourse', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3127"><span class="linenum">3127</span></a>      }
<a name="l3128"><span class="linenum">3128</span></a>  }
<a name="l3129"><span class="linenum">3129</span></a>  
<a name="l3130"><span class="linenum">3130</span></a>  <span class="comment">/**</span>
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment"> * An array of records that is sortable by many fields.</span>
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment"> *</span>
<a name="l3133"><span class="linenum">3133</span></a>  <span class="comment"> * For more info on the ArrayObject class have a look at php.net.</span>
<a name="l3134"><span class="linenum">3134</span></a>  <span class="comment"> *</span>
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment"> * @package    core</span>
<a name="l3136"><span class="linenum">3136</span></a>  <span class="comment"> * @subpackage course</span>
<a name="l3137"><span class="linenum">3137</span></a>  <span class="comment"> * @copyright  2013 Sam Hemelryk</span>
<a name="l3138"><span class="linenum">3138</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3139"><span class="linenum">3139</span></a>  <span class="comment"> */</span>
<a name="l3140"><span class="linenum">3140</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('coursecat_sortable_records')" href="../_classes/coursecat_sortable_records.html" onMouseOver="classPopup(event,'coursecat_sortable_records')">coursecat_sortable_records</a> extends ArrayObject {
<a name="l3141"><span class="linenum">3141</span></a>  
<a name="l3142"><span class="linenum">3142</span></a>      <span class="comment">/**</span>
<a name="l3143"><span class="linenum">3143</span></a>  <span class="comment">     * An array of sortable fields.</span>
<a name="l3144"><span class="linenum">3144</span></a>  <span class="comment">     * Gets set temporarily when sort is called.</span>
<a name="l3145"><span class="linenum">3145</span></a>  <span class="comment">     * @var array</span>
<a name="l3146"><span class="linenum">3146</span></a>  <span class="comment">     */</span>
<a name="l3147"><span class="linenum">3147</span></a>      protected <a class="var it36449" onMouseOver="hilite(36449)" onMouseOut="lolite()" onClick="logVariable('sortfields')" href="../_variables/sortfields.html">$sortfields</a> = array();
<a name="l3148"><span class="linenum">3148</span></a>  
<a name="l3149"><span class="linenum">3149</span></a>      <span class="comment">/**</span>
<a name="l3150"><span class="linenum">3150</span></a>  <span class="comment">     * Sorts this array using the given fields.</span>
<a name="l3151"><span class="linenum">3151</span></a>  <span class="comment">     *</span>
<a name="l3152"><span class="linenum">3152</span></a>  <span class="comment">     * @param array $records</span>
<a name="l3153"><span class="linenum">3153</span></a>  <span class="comment">     * @param array $fields</span>
<a name="l3154"><span class="linenum">3154</span></a>  <span class="comment">     * @return array</span>
<a name="l3155"><span class="linenum">3155</span></a>  <span class="comment">     */</span>
<a name="l3156"><span class="linenum">3156</span></a>      public static function <a class="function" onClick="logFunction('sort')" href="../_functions/sort.html" onMouseOver="funcPopup(event,'sort')">sort</a>(array <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, array <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>) {
<a name="l3157"><span class="linenum">3157</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <span class="keyword">new </span><a class="class" onClick="logClass('coursecat_sortable_records')" href="../_classes/coursecat_sortable_records.html" onMouseOver="classPopup(event,'coursecat_sortable_records')">coursecat_sortable_records</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>);
<a name="l3158"><span class="linenum">3158</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>-&gt;<a onClick="logVariable('sortfields')" class="var it44234" onMouseOver="hilite(44234)" onMouseOut="lolite()" href="../_variables/sortfields.html">sortfields</a> = <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>;
<a name="l3159"><span class="linenum">3159</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>-&gt;<a class="phpfunction" onClick="logFunction('uasort')" href="../_functions/uasort.html" onMouseOver="phpfuncPopup(event,'uasort')">uasort</a>(array(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>, 'sort_by_many_fields'));
<a name="l3160"><span class="linenum">3160</span></a>          return <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a>-&gt;getArrayCopy();
<a name="l3161"><span class="linenum">3161</span></a>      }
<a name="l3162"><span class="linenum">3162</span></a>  
<a name="l3163"><span class="linenum">3163</span></a>      <span class="comment">/**</span>
<a name="l3164"><span class="linenum">3164</span></a>  <span class="comment">     * Sorts the two records based upon many fields.</span>
<a name="l3165"><span class="linenum">3165</span></a>  <span class="comment">     *</span>
<a name="l3166"><span class="linenum">3166</span></a>  <span class="comment">     * This method should not be called itself, please call $sort instead.</span>
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment">     * It has been marked as access private as such.</span>
<a name="l3168"><span class="linenum">3168</span></a>  <span class="comment">     *</span>
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment">     * @access private</span>
<a name="l3170"><span class="linenum">3170</span></a>  <span class="comment">     * @param stdClass $a</span>
<a name="l3171"><span class="linenum">3171</span></a>  <span class="comment">     * @param stdClass $b</span>
<a name="l3172"><span class="linenum">3172</span></a>  <span class="comment">     * @return int</span>
<a name="l3173"><span class="linenum">3173</span></a>  <span class="comment">     */</span>
<a name="l3174"><span class="linenum">3174</span></a>      public function <a class="function" onClick="logFunction('sort_by_many_fields')" href="../_functions/sort_by_many_fields.html" onMouseOver="funcPopup(event,'sort_by_many_fields')">sort_by_many_fields</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>) {
<a name="l3175"><span class="linenum">3175</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sortfields')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/sortfields.html">sortfields</a> as <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> =&gt; <a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('mult')" href="../_variables/mult.html">$mult</a>) {
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment">            // Nulls first.</span>
<a name="l3177"><span class="linenum">3177</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>)) {
<a name="l3178"><span class="linenum">3178</span></a>                  return -<a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('mult')" href="../_variables/mult.html">$mult</a>;
<a name="l3179"><span class="linenum">3179</span></a>              }
<a name="l3180"><span class="linenum">3180</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>)) {
<a name="l3181"><span class="linenum">3181</span></a>                  return <a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('mult')" href="../_variables/mult.html">$mult</a>;
<a name="l3182"><span class="linenum">3182</span></a>              }
<a name="l3183"><span class="linenum">3183</span></a>  
<a name="l3184"><span class="linenum">3184</span></a>              if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) || <a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>)) {
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment">                // String fields.</span>
<a name="l3186"><span class="linenum">3186</span></a>                  if (<a class="var it27760" onMouseOver="hilite(27760)" onMouseOut="lolite()" onClick="logVariable('cmp')" href="../_variables/cmp.html">$cmp</a> = <a class="phpfunction" onClick="logFunction('strcoll')" href="../_functions/strcoll.html" onMouseOver="phpfuncPopup(event,'strcoll')">strcoll</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>)) {
<a name="l3187"><span class="linenum">3187</span></a>                      return <a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('mult')" href="../_variables/mult.html">$mult</a> * <a class="var it27760" onMouseOver="hilite(27760)" onMouseOut="lolite()" onClick="logVariable('cmp')" href="../_variables/cmp.html">$cmp</a>;
<a name="l3188"><span class="linenum">3188</span></a>                  }
<a name="l3189"><span class="linenum">3189</span></a>              } else {
<a name="l3190"><span class="linenum">3190</span></a>  <span class="comment">                // Int fields.</span>
<a name="l3191"><span class="linenum">3191</span></a>                  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> &gt; <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) {
<a name="l3192"><span class="linenum">3192</span></a>                      return <a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('mult')" href="../_variables/mult.html">$mult</a>;
<a name="l3193"><span class="linenum">3193</span></a>                  }
<a name="l3194"><span class="linenum">3194</span></a>                  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> &lt; <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../_variables/b.html">$b</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) {
<a name="l3195"><span class="linenum">3195</span></a>                      return -<a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('mult')" href="../_variables/mult.html">$mult</a>;
<a name="l3196"><span class="linenum">3196</span></a>                  }
<a name="l3197"><span class="linenum">3197</span></a>              }
<a name="l3198"><span class="linenum">3198</span></a>          }
<a name="l3199"><span class="linenum">3199</span></a>          return 0;
<a name="l3200"><span class="linenum">3200</span></a>      }
<a name="l3201"><span class="linenum">3201</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'change_sortorder_by_one': ['change_sortorder_by_one', 'Changes the sort order of this categories parent shifting this category up or down one. ', [['lib','coursecatlib.php',2639]], 3],
'get_course_contacts': ['get_course_contacts', 'Returns list of course contacts (usually teachers) to display in course link ', [['lib','coursecatlib.php',2827]], 5],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'get_columns': ['get_columns', 'Returns detailed information about columns in table. This information is cached internally. ', [['lib/dml','oci_native_moodle_database.php',464],['lib','csvlib.class.php',190],['lib/dml','sqlite3_pdo_moodle_database.php',195],['lib/dml','pgsql_native_moodle_database.php',353],['lib/dml','mssql_native_moodle_database.php',432],['lib/dml','mysqli_native_moodle_database.php',572],['lib/dml','sqlsrv_native_moodle_database.php',503],['lib/dml/tests','dml_test.php',5538]], 107],
'can_restore_courses_into': ['can_restore_courses_into', 'Returns true if the user is able to restore a course into this category as a new course. ', [['lib','coursecatlib.php',2513]], 1],
'get_filename': ['get_filename', 'Returns file name ', [['lib/filebrowser','virtual_root_file.php',227],['lib/filestorage','stored_file.php',699],['lib','medialib.php',169]], 248],
'wake_from_cache': ['wake_from_cache', 'Returns the cacheable_object_array that was originally sent to the cache. ', [['cache','lib.php',210],['repository','lib.php',475],['repository','lib.php',2747],['cache/tests/fixtures','lib.php',342],['cache/classes','interfaces.php',458],['lib','coursecatlib.php',2333]], 1],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'is_area_empty': ['is_area_empty', 'Are there any files (or directories) ', [['lib/filestorage','file_storage.php',723]], 13],
'get_formatted_name': ['get_formatted_name', 'Returns the name to display on course/overview page, formatted and passed through filters ', [['lib','modinfolib.php',1279],['lib','coursecatlib.php',2149],['lib','coursecatlib.php',3005]], 52],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'can_move_courses_out_of': ['can_move_courses_out_of', 'Returns true if the user can move courses out of this category. ', [['lib','coursecatlib.php',2497]], 5],
'resort_courses': ['resort_courses', 'Resort the courses within this category by the given field. ', [['lib','coursecatlib.php',2569]], 5],
'can_resort_any': ['can_resort_any', 'Returns true if the user can resort any category. ', [['lib','coursecatlib.php',1216]], 2],
'get_course_display_name_for_list': ['get_course_display_name_for_list', 'Gets the name of a course to be displayed when showing a list of courses. By default this is just $course->fullname but user can configure it. The result of this function should be passed through print_string. ', [['lib','moodlelib.php',9532]], 24],
'can_review_filters': ['can_review_filters', 'Returns true if the current user can review filter settings for this category. ', [['lib','coursecatlib.php',2480]], 1],
'get_courses': ['get_courses', 'Returns list of courses, for whole site, or category ', [['lib','datalib.php',592],['course','externallib.php',394],['badges/criteria','award_criteria_courseset.php',76],['lib','coursecatlib.php',1436]], 55],
'get_course_records': ['get_course_records', 'Retrieves number of records from course table ', [['lib','coursecatlib.php',920]], 4],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'file_extension_in_typegroup': ['file_extension_in_typegroup', 'Checks if file with name $filename has one of the extensions in groups $groups ', [['lib','filelib.php',1757]], 9],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'sql_substr': ['sql_substr', 'Returns the proper substr() SQL text used to extract substrings from DB NOTE: this was originally returning only function name ', [['lib/dml','mssql_native_moodle_database.php',1305],['lib/dml','moodle_database.php',2143],['lib/dml','sqlsrv_native_moodle_database.php',1373],['lib/dml/tests','dml_test.php',5556]], 19],
'can_restore': ['can_restore', 'Can we restore items in this recycle bin? ', [['admin/tool/recyclebin/classes','category_bin.php',324],['admin/tool/recyclebin/classes','course_bin.php',316],['lib','coursecatlib.php',3117]], 4],
'count_all': ['count_all', 'Returns number of ALL categories in the system regardless if they are visible to current user or not ', [['lib','coursecatlib.php',641]], 7],
'preload_course_contacts': ['preload_course_contacts', 'Given list of DB records from table course populates each record with list of users with course contact roles ', [['lib','coursecatlib.php',752]], 7],
'sort_by_many_fields': ['sort_by_many_fields', 'Sorts the two records based upon many fields. ', [['lib','coursecatlib.php',3163]], 0],
'__get': ['__get', '', [['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/minify/lib','JSMinPlus.php',1686],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121],['user/classes/output/myprofile','category.php',185],['lib/adodb','adodb-active-record.inc.php',295],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Socket','Client.php',91],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/simplepie/library/SimplePie','IRI.php',168],['lib/horde/framework/Horde','Variables.php',150],['mod/lesson','locallib.php',2028],['lib','modinfolib.php',124],['lib','modinfolib.php',1138],['lib','modinfolib.php',2577],['lib','adminlib.php',1071],['lib/dml','database_column_info.php',87],['lib/classes/message/inbound','handler.php',79],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib','navigationlib.php',5107],['lib/classes/plugininfo','block.php',44],['lib/classes/message','message.php',187],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/horde/framework/Horde/Support','Array.php',116],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['admin/tool/monitor/classes','subscription.php',54],['lib','pagelib.php',761],['user/classes/output/myprofile','tree.php',144],['lib/horde/framework/Horde','Stream.php',74],['lib/adodb','adodb-active-recordx.inc.php',341],['lib','accesslib.php',5286],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/minify/lib/MrClay/Cli','Arg.php',170],['tag/classes/output','tagindex.php',123],['calendar/tests','rrule_manager_tests.php',523],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['lib/classes/plugininfo','mod.php',43],['course','lib.php',3089],['lib/classes/plugininfo','base.php',177],['lib/classes/event','base.php',909],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib','coursecatlib.php',131],['lib','coursecatlib.php',2943],['tag/classes','tag.php',89],['lib/google/src/Google','Model.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['calendar','lib.php',2077],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['mod/quiz','renderer.php',1349],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['user/classes/output/myprofile','node.php',106],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib/pear/Net/GeoIP','Location.php',158]], 20],
'has_course_contacts': ['has_course_contacts', 'Indicates if the course have course contacts to display ', [['lib','coursecatlib.php',2814]], 2],
'can_delete_full': ['can_delete_full', 'Returns true if user can delete current category and all its contents ', [['lib','coursecatlib.php',1597]], 6],
'update_moved': ['update_moved', 'Update context info after moving context in the tree structure. ', [['lib','accesslib.php',5470]], 6],
'current_language': ['current_language', 'Returns the code for the current language ', [['lib','moodlelib.php',6589]], 44],
'__isset': ['__isset', 'Overload __isset() to provide access via properties ', [['lib/simplepie/library/SimplePie','IRI.php',221],['lib/horde/framework/Horde','Variables.php',111],['mod/lesson','locallib.php',2044],['lib','modinfolib.php',140],['lib','modinfolib.php',1178],['lib','modinfolib.php',2545],['lib','adminlib.php',1101],['lib/dml','database_column_info.php',102],['lib/classes/message','message.php',218],['lib/horde/framework/Horde/Support','Array.php',128],['admin/tool/monitor/classes','subscription.php',68],['lib','accesslib.php',5305],['lib/mustache/src/Mustache','HelperCollection.php',99],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',170],['tag/classes/output','tagindex.php',133],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',115],['lib/horde/framework/Horde/Support','ObjectStub.php',57],['course','lib.php',3099],['lib/classes/event','base.php',942],['lib','coursecatlib.php',155],['lib','coursecatlib.php',2933],['tag/classes','tag.php',99],['lib/google/src/Google','Model.php',286],['calendar','lib.php',2096],['lib/horde/framework/Horde/Support','Stub.php',53],['lib/pear/Net/GeoIP','Location.php',187]], 2],
'delete_move': ['delete_move', 'Deletes a category and moves all content (children, courses and questions) to the new parent ', [['lib','coursecatlib.php',1804]], 6],
'asort_objects_by_property': ['asort_objects_by_property', 'Locale aware sort of objects by a property in common to all objects ', [['lib/classes','collator.php',249]], 37],
'purge_by_event': ['purge_by_event', 'Purges a cache of all information on a given event. ', [['cache/classes','helper.php',303]], 30],
'has_courses': ['has_courses', 'Returns true if the category has courses in it (count does not include courses in child categories) ', [['lib','coursecatlib.php',1253]], 4],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'question_context_has_any_questions': ['question_context_has_any_questions', 'Determine whether there arey any questions belonging to this context, that is whether any of its question categories contain any questions. This will return true even if all the questions are hidden. ', [['lib','questionlib.php',157]], 3],
'can_delete': ['can_delete', 'Checks if scale can be deleted. ', [['lib/grade','grade_scale.php',270],['admin/tool/recyclebin/classes','category_bin.php',334],['lib/grade','grade_outcome.php',307],['admin/tool/recyclebin/classes','course_bin.php',326],['admin/tool/uploadcourse/classes','course.php',166],['comment','lib.php',965],['lib','coursecatlib.php',1582],['lib','coursecatlib.php',3093]], 15],
'get_db_record': ['get_db_record', 'Returns the complete corresponding record from DB table course_categories ', [['lib','coursecatlib.php',556]], 2],
'can_access_course': ['can_access_course', 'Checks if current user has access to the course ', [['tag/classes','index_builder.php',335],['lib','accesslib.php',2130]], 19],
'can_change_parent': ['can_change_parent', 'Checks if user can move current category to the new parent ', [['lib','coursecatlib.php',1896]], 5],
'resort_categories_cleanup': ['resort_categories_cleanup', 'Cleans things up after categories have been resorted. ', [['lib','coursecatlib.php',2556]], 2],
'question_delete_course_category': ['question_delete_course_category', 'Category is about to be deleted, 1/ All question categories and their questions are deleted for this course category. 2/ All questions are moved to new category ', [['lib','questionlib.php',436]], 4],
'get_all_user_name_fields': ['get_all_user_name_fields', 'A centralised location for the all name fields. Returns an array / sql string snippet. ', [['lib','moodlelib.php',3360]], 94],
'make': ['make', 'Runs the entire \'make\' process. ', [['admin/tool/generator/classes','course_backend.php',202],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',33],['mod/quiz/accessrule/numattempts','rule.php',40],['cache/classes','loaders.php',163],['mod/quiz/accessrule','accessrulebase.php',63],['backup/util/ui','backup_ui_setting.class.php',234],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',60],['mod/quiz/accessrule/timelimit','rule.php',41],['mod/quiz/accessrule/openclosedate','rule.php',40],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger.js',655],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',52],['mod/quiz/accessrule/password','rule.php',40],['admin/tool/assignmentupgrade','locallib.php',110],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',64],['mod/quiz/accessrule/delaybetweenattempts','rule.php',40],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',96],['lib/htmlpurifier/HTMLPurifier','AttrDef.php',67],['mod/quiz/accessrule/ipaddress','rule.php',40],['mod/quiz/accessrule/securewindow','rule.php',55],['mod/quiz/accessrule/safebrowser','rule.php',40],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',42],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger-debug.js',655],['lib/htmlpurifier/HTMLPurifier','Length.php',52],['admin/tool/generator/classes','site_backend.php',89]], 198],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'prepare_to_cache': ['prepare_to_cache', 'Returns the data to cache for this object. ', [['cache','lib.php',191],['repository','lib.php',461],['repository','lib.php',2732],['cache/tests/fixtures','lib.php',335],['cache/classes','interfaces.php',450],['lib','coursecatlib.php',2310]], 1],
'can_create_course': ['can_create_course', 'Returns true if the current user can create a course within this category. ', [['lib','coursecatlib.php',2435]], 3],
'set_legacy_logdata': ['set_legacy_logdata', 'Return the legacy event log data. ', [['lib/classes/event','webservice_function_called.php',87],['mod/workshop/classes/event','assessable_uploaded.php',122],['lib/classes/event','role_capabilities_updated.php',83],['mod/assign/classes/event','base.php',99],['lib/classes/event','course_resources_list_viewed.php',78],['lib/classes/event','tag_updated.php',76],['lib/classes/event','course_updated.php',103],['lib/classes/event','course_category_updated.php',78],['lib/classes/event','webservice_login_failed.php',91],['lib/classes/event','content_viewed.php',98]], 55],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'can_create_top_level_category': ['can_create_top_level_category', 'Returns true if the user is able to create a top level category. ', [['lib','coursecatlib.php',2361]], 1],
'can_approve_course_requests': ['can_approve_course_requests', 'Returns true if the user can approve course requests. ', [['lib','coursecatlib.php',2702]], 1],
'get_many': ['get_many', 'Retrieves several items from the cache store in a single transaction. ', [['cache/stores/static','lib.php',237],['cache','disabledlib.php',66],['cache/classes','dummystore.php',153],['cache/classes','loaders.php',359],['cache/classes','loaders.php',1437],['cache/classes','loaders.php',1858],['cache/stores/memcache','lib.php',326],['cache/classes','interfaces.php',51],['lib','coursecatlib.php',264],['cache/stores/session','lib.php',250],['cache/stores/mongodb','lib.php',271],['cache/stores/file','lib.php',376],['cache/stores/memcached','lib.php',329]], 66],
'filter_get_available_in_context': ['filter_get_available_in_context', 'List all of the filters that are available in this context, and what the local and inherited states of that filter are. ', [['lib','filterlib.php',1050]], 10],
'can_edit': ['can_edit', 'Returns true if the current user can edit this categories settings. ', [['lib','coursecatlib.php',2443],['lib','coursecatlib.php',3040]], 4],
'cohort_delete_category': ['cohort_delete_category', 'Somehow deal with cohorts when deleting course category, we can not just delete them because they might be used in enrol plugins or referenced in external systems. ', [['cohort','lib.php',127]], 3],
'course_overviewfiles_options': ['course_overviewfiles_options', 'Returns options to use in course overviewfiles filemanager ', [['course','lib.php',2607]], 5],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'mark_dirty': ['mark_dirty', 'Mark a context as dirty (with timestamp) so as to force reloading of the context. ', [['lib','accesslib.php',5843]], 40],
'can_move_courses_into': ['can_move_courses_into', 'Returns true if the user can move courses into this category. ', [['lib','coursecatlib.php',2505]], 3],
'sort': ['sort', 'Sorts the children this item has ', [['lib','outputcomponents.php',2797],['lib/horde/framework/Horde/Imap/Client','Ids.php',223],['lib','coursecatlib.php',3149],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',58],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',178]], 241],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'has_course_overviewfiles': ['has_course_overviewfiles', 'Checks if course has any associated overview files ', [['lib','coursecatlib.php',2883]], 21],
'show_raw': ['show_raw', 'Show course category and restores visibility for child course and subcategories ', [['lib','coursecatlib.php',2090]], 2],
'get_children_count': ['get_children_count', 'Returns number of subcategories visible to the current user ', [['lib','coursecatlib.php',1232]], 9],
'has_all_capabilities': ['has_all_capabilities', 'Check if the user has all the capabilities in a list. ', [['lib','accesslib.php',521]], 31],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'users_order_by_sql': ['users_order_by_sql', 'This function generates the standard ORDER BY clause for use when generating lists of users. If you don\'t have a reason to use a different order, then you should use this method to generate the order when displaying lists of users. ', [['lib','datalib.php',290]], 62],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'fix_course_sortorder': ['fix_course_sortorder', 'Fixes course category and course sortorder, also verifies category and course parents and paths. (circular references are not fixed) ', [['lib','datalib.php',854]], 19],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1846]], 52],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5250],['lib','accesslib.php',6079]], 61],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'convert_to_array': ['convert_to_array', 'Converts an object into an associative array ', [['lib','moodlelib.php',9093]], 10],
'can_review_roles': ['can_review_roles', 'Returns true if the current user can review role assignments for this category. ', [['lib','coursecatlib.php',2451]], 1],
'can_review_cohorts': ['can_review_cohorts', 'Returns true if the current user can review cohorts for this category. ', [['lib','coursecatlib.php',2472]], 1],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'ensure_users_enrolled': ['ensure_users_enrolled', 'Verify user enrollments for multiple course-user combinations ', [['lib','coursecatlib.php',865]], 2],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'delete_course': ['delete_course', 'Delete a course, including all related data from the database, and any associated files. ', [['lib','moodlelib.php',4669]], 27],
'can_move_content_to': ['can_move_content_to', 'Checks if user has capability to move all category content to the new parent before removing this category ', [['lib','coursecatlib.php',1772]], 4],
'get_fieldset_sql': ['get_fieldset_sql', 'Selects rows and return values of first column as array. ', [['lib/dml','pdo_moodle_database.php',288],['lib/dml','oci_native_moodle_database.php',1196],['lib/dml','pgsql_native_moodle_database.php',799],['lib/dml','mssql_native_moodle_database.php',839],['lib/dml','mysqli_native_moodle_database.php',1106],['lib/dml','sqlsrv_native_moodle_database.php',925],['lib/dml/tests','dml_test.php',5546]], 58],
'change_parent_raw': ['change_parent_raw', 'Moves the category under another parent category. All associated contexts are moved as well ', [['lib','coursecatlib.php',1928]], 3],
'set_coursecat': ['set_coursecat', 'Set custom data of the event - deleted coursecat. ', [['lib/classes/event','course_category_deleted.php',95]], 2],
'hide_raw': ['hide_raw', 'Hide course category and child course and subcategories ', [['lib','coursecatlib.php',2018]], 3],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'can_delete_course': ['can_delete_course', 'Can the current user delete this course? Course creators have exception, 1 day after the creation they can sill delete the course. ', [['course','lib.php',2528]], 4],
'get_context': ['get_context', 'Return the course context for new modules, or the module context for existing modules. ', [['course','moodleform_mod.php',148],['availability/classes','info_module.php',72],['availability/classes','info_section.php',55],['competency/classes','user_competency_plan.php',83],['availability/tests/fixtures','mock_info.php',59],['mod/feedback/classes','responses_table.php',146],['competency/classes','competency.php',730],['competency/classes','plan.php',258],['mod/quiz','attemptlib.php',220],['competency/classes','user_competency.php',216],['grade/grading','lib.php',107],['lib','modinfolib.php',1486],['lib','badgeslib.php',157],['competency/classes/external','exporter.php',172],['comment','lib.php',994],['grade/grading/form','lib.php',102],['mod/assign','locallib.php',1307],['competency/classes','user_evidence.php',90],['competency/classes','user_competency_course.php',80],['lib/classes/event','base.php',627],['enrol','locallib.php',921],['lib','coursecatlib.php',2369],['lib','coursecatlib.php',3065],['competency/classes','course_competency_settings.php',133],['lib/tests/behat','behat_data_generators.php',769],['competency/classes','competency_framework.php',70],['competency/classes','template.php',139]], 1033],
'set_many': ['set_many', 'Sets many items in the cache in a single transaction. ', [['cache/stores/static','lib.php',292],['cache','disabledlib.php',92],['cache/classes','dummystore.php',183],['cache/classes','loaders.php',614],['cache/classes','loaders.php',1376],['cache/classes','loaders.php',1977],['cache/stores/memcache','lib.php',383],['cache/classes','interfaces.php',85],['cache/stores/session','lib.php',320],['cache/stores/mongodb','lib.php',342],['cache/stores/file','lib.php',475],['cache/stores/memcached','lib.php',373]], 36],
'user_enrolment_changed': ['user_enrolment_changed', 'Executed when user enrolment was changed to check if course contacts cache needs to be cleared ', [['lib','coursecatlib.php',709]], 3],
'get_not_visible_children_ids': ['get_not_visible_children_ids', 'Returns array of ids of children categories that current user can not see ', [['lib','coursecatlib.php',974]], 4],
'can_change_parent_any': ['can_change_parent_any', 'Returns true if the user can change the parent of any category. ', [['lib','coursecatlib.php',1224]], 2],
'get_default': ['get_default', 'Returns id of the default tag collection ', [['tag/classes','collection.php',117],['lib','adminlib.php',1964],['lib','coursecatlib.php',294]], 32],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_parent_coursecat': ['get_parent_coursecat', 'Returns the parent coursecat object for this category. ', [['lib','coursecatlib.php',2680]], 2],
'can_review_permissions': ['can_review_permissions', 'Returns true if the current user can review permissions for this category. ', [['lib','coursecatlib.php',2459]], 1],
'has_manage_capability': ['has_manage_capability', 'Returns true if the user is able to manage this category. ', [['lib','coursecatlib.php',2382]], 9],
'has_manage_capability_on_any': ['has_manage_capability_on_any', 'Returns true if the user has the manage capability on any category. ', [['lib','coursecatlib.php',1136]], 2],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'get_children': ['get_children', 'Returns list of children. ', [['lib/filebrowser','file_info_context_system.php',142],['mod/lesson/classes','file_info.php',102],['mod/imscp','locallib.php',336],['lib/filebrowser','file_info_context_coursecat.php',155],['mod/book','locallib.php',471],['lib/filebrowser','file_info_context_user.php',274],['lib/grade','grade_category.php',2068],['mod/data','locallib.php',495],['lib/filebrowser','file_info_stored.php',330],['lib','outputcomponents.php',2772],['lib','adminlib.php',1035],['mod/workshop','fileinfolib.php',91],['mod/workshop','fileinfolib.php',251],['lib/filebrowser','file_info_context_module.php',258],['mod/glossary','locallib.php',543],['lib','coursecatlib.php',1048],['lib/filebrowser','file_info_context_course.php',381],['lib/filebrowser','file_info_context_course.php',530],['lib/filebrowser','file_info_context_course.php',666],['lib/filebrowser','file_info_context_course.php',812],['backup/util/structure','base_nested_element.class.php',127],['mod/forum','locallib.php',481]], 86],
'has_capability_on_any': ['has_capability_on_any', 'Checks if the user has at least one of the given capabilities on any category. ', [['lib','coursecatlib.php',1148]], 2],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'can_access': ['can_access', 'Returns true if the current user can access this course. ', [['lib','coursecatlib.php',3029]], 2],
'get_courses_search': ['get_courses_search', 'A list of courses that match a search ', [['lib','datalib.php',734]], 1],
'get_course_overviewfiles': ['get_course_overviewfiles', 'Returns all course overview files ', [['lib','coursecatlib.php',2898]], 22],
'make_categories_list': ['make_categories_list', 'This function is deprecated! For list of categories use coursecat::make_all_categories($requiredcapability, $excludeid, $separator) For parents of one particular category use coursecat::get($id)->get_parents() ', [['lib','deprecatedlib.php',1398],['lib','coursecatlib.php',2187]], 23],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'get_category_or_system_context': ['get_category_or_system_context', 'Return the course category context for the category with id $categoryid, except that if $categoryid is 0, return the system context. ', [['course','lib.php',1361]], 5],
'role_get_name': ['role_get_name', 'Get localised role name or alias if exists and format the text. ', [['lib','accesslib.php',4548]], 46],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'__unset': ['__unset', 'Overload __unset() to provide access via properties ', [['lib/simplepie/library/SimplePie','IRI.php',239],['lib/horde/framework/Horde','Variables.php',248],['lib/horde/framework/Horde/Support','Array.php',136],['lib','accesslib.php',5323],['lib/mustache/src/Mustache','HelperCollection.php',125],['lib/horde/framework/Horde/Support','ObjectStub.php',64],['lib','coursecatlib.php',168],['lib','coursecatlib.php',2970],['lib/google/src/Google','Model.php',291],['lib/horde/framework/Horde/Support','Stub.php',65]], 2],
'search_courses_count': ['search_courses_count', 'Returns number of courses in the search results ', [['lib','coursecatlib.php',1407]], 10],
'change_parent': ['change_parent', 'Efficiently moves a category - NOTE that this can have a huge impact access-control-wise... ', [['lib','coursecatlib.php',1978]], 7],
'get_tree': ['get_tree', 'Returns the entry from categories tree and makes sure the application-level tree cache is built ', [['lib','coursecatlib.php',572]], 6],
'get_plugins_with_function': ['get_plugins_with_function', 'Get a list of all the plugins that define a certain API function in a certain file. ', [['lib','moodlelib.php',7249]], 18],
'role_assignment_changed': ['role_assignment_changed', 'Resets course contact caches when role assignments were changed ', [['lib','coursecatlib.php',673]], 5],
'move_content_targets_list': ['move_content_targets_list', 'Checks if user can delete this category and move content (courses, subcategories and questions) to another category. If yes returns the array of possible target categories names ', [['lib','coursecatlib.php',1735]], 1],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'is_uservisible': ['is_uservisible', 'Checks if this course category is visible to current user ', [['lib','coursecatlib.php',542],['lib','coursecatlib.php',3073]], 6],
'set': ['set', 'Sets an item in the cache given its key and data value. ', [['cache/stores/static','lib.php',265],['cache','disabledlib.php',81],['search/classes','document.php',241],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',331],['lib/google/src/Google/Cache','Memcache.php',113],['lib','filelib.php',3656],['lib/adodb','adodb-active-record.inc.php',646],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/google/src/Google/Cache','File.php',93],['cache/classes','dummystore.php',170],['cache/classes','loaders.php',496],['cache/classes','loaders.php',1350],['cache/classes','loaders.php',1797],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['competency/classes','persistent.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Service','ShoppingContent.php',1643],['lib','navigationlib.php',5131],['lib/google/src/Google/Service','Clouddebugger.php',445],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['lib/portfolio','exporter.php',154],['grade/report/singleview/classes/local/ui','finalgrade.php',129],['cache/stores/memcache','lib.php',358],['lib/adodb','adodb-active-recordx.inc.php',676],['cache/classes','interfaces.php',68],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['grade/report/singleview/classes/local/ui','exclude.php',90],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/portfolio','caller.php',187],['cache/stores/session','lib.php',290],['cache/stores/mongodb','lib.php',305],['lib/google/src/Google/Cache','Null.php',44],['grade/report/singleview/classes/local/ui','override.php',95],['cache/stores/file','lib.php',426],['lib/phpmailer','class.phpmailer.php',3554],['grade/report/singleview/classes/local/ui','feedback.php',102],['cache/stores/memcached','lib.php',354],['lib/portfolio','plugin.php',647],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/google/src/Google/Service','YouTube.php',4048],['lib/google/src/Google/Service','YouTube.php',4458],['lib/google/src/Google/Cache','Apc.php',82],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['lib/pear/Net/GeoIP','Location.php',125]], 4904],
'has_children': ['has_children', 'Returns true if this item has any children ', [['lib','outputcomponents.php',2804],['lib','navigationlib.php',407],['lib','coursecatlib.php',1243]], 26],
'can_backup': ['can_backup', 'Returns true if the current user can backup this course. ', [['lib','coursecatlib.php',3105]], 1],
'sort_records': ['sort_records', 'Sorts list of records by several fields ', [['lib','coursecatlib.php',1010]], 4],
'resort_subcategories': ['resort_subcategories', 'Resorts the sub categories of this category by the given field. ', [['lib','coursecatlib.php',2521]], 1],
'move_courses': ['move_courses', 'Efficiently moves many courses around while maintaining sortorder in order. ', [['course','lib.php',2428]], 4],
'getiterator': ['getiterator', '', [['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',125],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',97],['lib/horde/framework/Horde','Variables.php',391],['lib','modinfolib.php',1157],['lib','modinfolib.php',2648],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',146],['lib','navigationlib.php',950],['lib/horde/framework/Horde/Support','Array.php',156],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',135],['lib/adodb','adodb.inc.php',3104],['lib/adodb','adodb.inc.php',3256],['lib/horde/framework/Horde/Mime','Related.php',146],['lib','accesslib.php',5333],['lib/classes/event','base.php',956],['lib','coursecatlib.php',177],['lib','coursecatlib.php',2989],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',175],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',153],['lib/horde/framework/Horde/Support','Stub.php',135],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',202]], 6],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'delete_full': ['delete_full', 'Recursively delete category including all subcategories and courses ', [['lib','coursecatlib.php',1652]], 8],
'search_courses': ['search_courses', 'Search for courses with matching params. ', [['course/classes/management','helper.php',735],['course','renderer.php',1814],['course','externallib.php',2170],['lib','coursecatlib.php',1265]], 20],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6066]], 56],
'hide': ['hide', 'Hide the given player\'s leaderboard scores from the given application. This method is only available to user accounts for your developer console. (players.hide) ', [['lib/google/src/Google/Service','GamesManagement.php',560],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/contextmenu','editor_plugin_src.js',71],['repository','lib.php',2009],['lib','navigationlib.php',700],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',269],['lib','coursecatlib.php',2068]], 795],
'parent_has_manage_capability': ['parent_has_manage_capability', 'Returns true if the user has the manage capability on the parent category. ', [['lib','coursecatlib.php',2393]], 2],
'username_load_fields_from_object': ['username_load_fields_from_object', 'Reduces lines of duplicated code for getting user name fields. ', [['lib','moodlelib.php',3418]], 27],
'get_fieldset_select': ['get_fieldset_select', 'Selects records and return values of chosen field as an array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1608]], 32],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 90],
'purge': ['purge', 'Purges the cache deleting all items within it. ', [['cache/stores/static','lib.php',409],['cache','disabledlib.php',153],['cache/classes','dummystore.php',221],['cache/classes','loaders.php',832],['cache/classes','loaders.php',2036],['cache/stores/memcache','lib.php',435],['cache/stores/session','lib.php',455],['cache/stores/mongodb','lib.php',415],['cache/stores/file','lib.php',539],['cache/stores/memcached','lib.php',468]], 66],
'can_resort_subcategories': ['can_resort_subcategories', 'Returns true if the user can resort this categories sub categories and courses. Must have manage capability and be able to see all subcategories. ', [['lib','coursecatlib.php',2409]], 6],
'show': ['show', '', [['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',187],['lib/jquery/ui-1.11.4','jquery-ui.js',13476],['lib','coursecatlib.php',2127]], 582],
'restore': ['restore', 'Restores a Container Version. This will overwrite the container\'s current configuration (including its variables, triggers and tags). The operation will not have any effect on the version that is being served (i.e. the published version). (versions.restore) ', [['lib/google/src/Google/Service','TagManager.php',1615],['lib/lessphp','Parser.php',658],['lib/classes/event','base.php',333],['lib','coursecatlib.php',313]], 55],
'grade_course_category_delete': ['grade_course_category_delete', 'Called when course category is deleted Cleans the gradebook of associated data ', [['lib','gradelib.php',1439]], 2],
'can_review_enrolments': ['can_review_enrolments', 'Returns true if the current user can review enrolments for this course. ', [['lib','coursecatlib.php',3081]], 2],
'delete_many': ['delete_many', 'Deletes several keys from the cache in a single action. ', [['cache/stores/static','lib.php',389],['cache','disabledlib.php',113],['cache/classes','dummystore.php',207],['cache/classes','loaders.php',810],['cache/classes','loaders.php',1490],['cache/classes','loaders.php',1960],['cache/stores/memcache','lib.php',419],['cache/classes','interfaces.php',171],['cache/stores/session','lib.php',434],['cache/stores/mongodb','lib.php',399],['cache/stores/file','lib.php',410],['cache/stores/memcached','lib.php',420]], 26],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'get_parents': ['get_parents', 'Returns ids of all parents of the category. Last element in the return array is the direct parent ', [['lib','coursecatlib.php',2164]], 11],
'has_summary': ['has_summary', 'Indicates if the course has non-empty summary field ', [['lib','coursecatlib.php',2798]], 3],
'can_resort_courses': ['can_resort_courses', 'Returns true if the user can resort the courses within this category. Must have manage capability and be able to see all courses. ', [['lib','coursecatlib.php',2418]], 8],
'can_change_visibility': ['can_change_visibility', 'Returns true if the current user is able to change the visbility of this category. ', [['lib','coursecatlib.php',2489],['lib','coursecatlib.php',3052]], 8],
'can_create_subcategory': ['can_create_subcategory', 'Returns true if the current user can create subcategories of this category. ', [['lib','coursecatlib.php',2401]], 2],
'get_formatted_shortname': ['get_formatted_shortname', 'Returns the formatted shortname for this course. ', [['lib','coursecatlib.php',3021]], 1],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'__set': ['__set', '', [['lib/minify/lib','JSMinPlus.php',1681],['lib/adodb','adodb-active-record.inc.php',114],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',74],['lib/simplepie/library/SimplePie','IRI.php',143],['lib/horde/framework/Horde','Variables.php',199],['mod/lesson','locallib.php',2012],['lib','modinfolib.php',168],['lib','modinfolib.php',1206],['lib','adminlib.php',1085],['lib/dml','database_column_info.php',76],['lib','navigationlib.php',5121],['lib/classes/message','message.php',202],['lib/horde/framework/Horde/Support','Array.php',123],['lib','pagelib.php',779],['mod/forum/classes/output','forum_post.php',230],['lib/horde/framework/Horde','Stream.php',84],['lib/simplepie/library/SimplePie','gzdecode.php',175],['lib/adodb','adodb-active-recordx.inc.php',122],['lib','accesslib.php',5277],['lib/mustache/src/Mustache','HelperCollection.php',43],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',121],['tag/classes/output','tagindex.php',113],['lib/portfolio/formats/leap2a','lib.php',277],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',94],['lib/horde/framework/Horde/Support','ObjectStub.php',50],['lib/classes/event','base.php',927],['lib','coursecatlib.php',121],['lib','coursecatlib.php',2979],['calendar','lib.php',2061],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',88],['lib/horde/framework/Horde/Stream','TempString.php',83],['lib/horde/framework/Horde/Support','Stub.php',31],['lib','webdavlib.php',98],['lib/pear/Net/GeoIP','Location.php',142]], 4],
'get_formatted_fullname': ['get_formatted_fullname', 'Returns the formatted fullname for this course. ', [['lib','coursecatlib.php',3013]], 1],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'isloggedin': ['isloggedin', 'Determines if a user is currently logged in ', [['lib','accesslib.php',1910]], 184],
'file_postupdate_standard_editor': ['file_postupdate_standard_editor', 'Prepares the content of the \'editor\' form element with embedded media files to be saved in database ', [['lib','filelib.php',202]], 45],
'can_change_sortorder': ['can_change_sortorder', 'Returns true of the user can change the sortorder of this category (resort in the parent category) ', [['lib','coursecatlib.php',2427]], 3],
'can_request_course': ['can_request_course', 'Returns true if the user is able to request a new course be created. ', [['lib','coursecatlib.php',2690]], 1],
'get_courses_count': ['get_courses_count', 'Returns number of courses visible to the user ', [['lib','coursecatlib.php',1559]], 71],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'sha1': ['sha1', '', [], 186],
'get_class': ['get_class', '', [], 305],
'array_key_exists': ['array_key_exists', '', [], 1445],
'reset': ['reset', '', [], 1213],
'is_string': ['is_string', '', [], 536],
'explode': ['explode', '', [], 1572],
'sort': ['sort', '', [], 241],
'serialize': ['serialize', '', [], 282],
'in_array': ['in_array', '', [], 1234],
'is_object': ['is_object', '', [], 544],
'preg_match': ['preg_match', '', [], 1286],
'array_keys': ['array_keys', '', [], 1256],
'substr': ['substr', '', [], 2823],
'array_filter': ['array_filter', '', [], 70],
'array_reverse': ['array_reverse', '', [], 130],
'key': ['key', '', [], 204],
'min': ['min', '', [], 898],
'round': ['round', '', [], 1002],
'is_null': ['is_null', '', [], 2003],
'array_diff': ['array_diff', '', [], 102],
'strip_tags': ['strip_tags', '', [], 150],
'uasort': ['uasort', '', [], 8],
'trim': ['trim', '', [], 1948],
'time': ['time', '', [], 1959],
'strcoll': ['strcoll', '', [], 5],
'count': ['count', '', [], 4095],
'preg_split': ['preg_split', '', [], 146],
'defined': ['defined', '', [], 4731],
'is_array': ['is_array', '', [], 1608],
'array_slice': ['array_slice', '', [], 165],
'array_pop': ['array_pop', '', [], 483]};
CLASS_DATA={
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 92],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 152],
'cache': ['cache', 'The main cache class. ', [['cache/classes','loaders.php',31]], 284],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 139],
'coursecat': ['coursecat', 'Class to store, cache, render and manage course category ', [['lib','coursecatlib.php',28]], 276],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'renderable': ['renderable', 'Interface marking other classes as suitable for renderer_base::render() ', [['lib','outputcomponents.php',31],['admin/tool/monitor/classes/output/managerules','renderable.php',31]], 97],
'coursecat_sortable_records': ['coursecat_sortable_records', 'An array of records that is sortable by many fields. ', [['lib','coursecatlib.php',3130]], 2],
'course_category_updated': ['course_category_updated', 'Course category updated event class. ', [['lib/classes/event','course_category_updated.php',29]], 6],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'course_category_deleted': ['course_category_deleted', 'Category deleted event class. ', [['lib/classes/event','course_category_deleted.php',29]], 2],
'course_category_created': ['course_category_created', 'Course category created event class. ', [['lib/classes/event','course_category_created.php',29]], 1],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6585]], 194],
'course_in_list': ['course_in_list', 'Class to store information about one course in a list of courses ', [['lib','coursecatlib.php',2722]], 24]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'ENROL_INSTANCE_ENABLED': ['ENROL_INSTANCE_ENABLED', '', [['lib','enrollib.php',31]], 115],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'MAX_COURSE_CATEGORIES': ['MAX_COURSE_CATEGORIES', '', [['lib','datalib.php',41]], 3],
'CONTEXT_COURSECAT': ['CONTEXT_COURSECAT', '', [['lib','accesslib.php',146]], 105],
'MAX_COURSES_IN_CATEGORY': ['MAX_COURSES_IN_CATEGORY', '', [['lib','datalib.php',35]], 12],
'ROLENAME_ALIAS': ['ROLENAME_ALIAS', '', [['lib','accesslib.php',174]], 35],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'ENROL_USER_ACTIVE': ['ENROL_USER_ACTIVE', '', [['lib','enrollib.php',37]], 210],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
