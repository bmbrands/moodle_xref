<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of moodle_database.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/dml';
filename='moodle_database.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/dml/</a> -> <a href="moodle_database.php.source.html">moodle_database.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="moodle_database.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>Abstract database driver class.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2008 Petr Skoda (http://skodak.org)</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>2612 lines (109 kb)</td></tr>
<tr><td align="right">Included or required: </td><td><a href="moodle_database.php.xref.html">7 times</a></td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>4 files<br>&nbsp;<a href="../../lib/dml/database_column_info.php.html">lib/dml/database_column_info.php</a>
<br>&nbsp;<a href="../../lib/dml/moodle_recordset.php.html">lib/dml/moodle_recordset.php</a>
<br>&nbsp;<a href="../../lib/dml/moodle_transaction.php.html">lib/dml/moodle_transaction.php</a>
<br>&nbsp;<a href="../../lib/testing/classes/util.php.html">lib/testing/classes/util.php</a>
</td></tr>
</table>
<h3>Defines 104 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#__destruct">__destruct</a>()<br>
&nbsp;&nbsp;<a href="#get_prefix">get_prefix</a>()<br>
&nbsp;&nbsp;<a href="#get_driver_instance">get_driver_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_dbvendor">get_dbvendor</a>()<br>
&nbsp;&nbsp;<a href="#get_configuration_hints">get_configuration_hints</a>()<br>
&nbsp;&nbsp;<a href="#export_dbconfig">export_dbconfig</a>()<br>
&nbsp;&nbsp;<a href="#diagnose">diagnose</a>()<br>
&nbsp;&nbsp;<a href="#store_settings">store_settings</a>()<br>
&nbsp;&nbsp;<a href="#get_settings_hash">get_settings_hash</a>()<br>
&nbsp;&nbsp;<a href="#get_metacache">get_metacache</a>()<br>
&nbsp;&nbsp;<a href="#get_temp_tables_cache">get_temp_tables_cache</a>()<br>
&nbsp;&nbsp;<a href="#create_database">create_database</a>()<br>
&nbsp;&nbsp;<a href="#get_transaction_start_backtrace">get_transaction_start_backtrace</a>()<br>
&nbsp;&nbsp;<a href="#dispose">dispose</a>()<br>
&nbsp;&nbsp;<a href="#query_start">query_start</a>()<br>
&nbsp;&nbsp;<a href="#query_end">query_end</a>()<br>
&nbsp;&nbsp;<a href="#query_log">query_log</a>()<br>
&nbsp;&nbsp;<a href="#query_time">query_time</a>()<br>
&nbsp;&nbsp;<a href="#print_debug">print_debug</a>()<br>
&nbsp;&nbsp;<a href="#print_debug_time">print_debug_time</a>()<br>
&nbsp;&nbsp;<a href="#where_clause">where_clause</a>()<br>
&nbsp;&nbsp;<a href="#where_clause_list">where_clause_list</a>()<br>
&nbsp;&nbsp;<a href="#get_in_or_equal">get_in_or_equal</a>()<br>
&nbsp;&nbsp;<a href="#fix_table_names">fix_table_names</a>()<br>
&nbsp;&nbsp;<a href="#_fix_sql_params_dollar_callback">_fix_sql_params_dollar_callback</a>()<br>
&nbsp;&nbsp;<a href="#detect_objects">detect_objects</a>()<br>
&nbsp;&nbsp;<a href="#fix_sql_params">fix_sql_params</a>()<br>
&nbsp;&nbsp;<a href="#normalise_limit_from_num">normalise_limit_from_num</a>()<br>
&nbsp;&nbsp;<a href="#reset_caches">reset_caches</a>()<br>
&nbsp;&nbsp;<a href="#get_manager">get_manager</a>()<br>
&nbsp;&nbsp;<a href="#change_db_encoding">change_db_encoding</a>()<br>
&nbsp;&nbsp;<a href="#setup_is_unicodedb">setup_is_unicodedb</a>()<br>
&nbsp;&nbsp;<a href="#set_debug">set_debug</a>()<br>
&nbsp;&nbsp;<a href="#get_debug">get_debug</a>()<br>
&nbsp;&nbsp;<a href="#set_logging">set_logging</a>()<br>
&nbsp;&nbsp;<a href="#get_recordset">get_recordset</a>()<br>
&nbsp;&nbsp;<a href="#get_recordset_list">get_recordset_list</a>()<br>
&nbsp;&nbsp;<a href="#get_recordset_select">get_recordset_select</a>()<br>
&nbsp;&nbsp;<a href="#export_table_recordset">export_table_recordset</a>()<br>
&nbsp;&nbsp;<a href="#get_records">get_records</a>()<br>
&nbsp;&nbsp;<a href="#get_records_list">get_records_list</a>()<br>
&nbsp;&nbsp;<a href="#get_records_select">get_records_select</a>()<br>
&nbsp;&nbsp;<a href="#get_records_menu">get_records_menu</a>()<br>
&nbsp;&nbsp;<a href="#get_records_select_menu">get_records_select_menu</a>()<br>
&nbsp;&nbsp;<a href="#get_records_sql_menu">get_records_sql_menu</a>()<br>
&nbsp;&nbsp;<a href="#get_record">get_record</a>()<br>
&nbsp;&nbsp;<a href="#get_record_select">get_record_select</a>()<br>
&nbsp;&nbsp;<a href="#get_record_sql">get_record_sql</a>()<br>
&nbsp;&nbsp;<a href="#get_field">get_field</a>()<br>
&nbsp;&nbsp;<a href="#get_field_select">get_field_select</a>()<br>
&nbsp;&nbsp;<a href="#get_field_sql">get_field_sql</a>()<br>
&nbsp;&nbsp;<a href="#get_fieldset_select">get_fieldset_select</a>()<br>
&nbsp;&nbsp;<a href="#insert_records">insert_records</a>()<br>
&nbsp;&nbsp;<a href="#set_field">set_field</a>()<br>
&nbsp;&nbsp;<a href="#count_records">count_records</a>()<br>
&nbsp;&nbsp;<a href="#count_records_select">count_records_select</a>()<br>
&nbsp;&nbsp;<a href="#count_records_sql">count_records_sql</a>()<br>
&nbsp;&nbsp;<a href="#record_exists">record_exists</a>()<br>
&nbsp;&nbsp;<a href="#record_exists_select">record_exists_select</a>()<br>
&nbsp;&nbsp;<a href="#record_exists_sql">record_exists_sql</a>()<br>
&nbsp;&nbsp;<a href="#delete_records">delete_records</a>()<br>
&nbsp;&nbsp;<a href="#delete_records_list">delete_records_list</a>()<br>
&nbsp;&nbsp;<a href="#sql_null_from_clause">sql_null_from_clause</a>()<br>
&nbsp;&nbsp;<a href="#sql_bitand">sql_bitand</a>()<br>
&nbsp;&nbsp;<a href="#sql_bitnot">sql_bitnot</a>()<br>
&nbsp;&nbsp;<a href="#sql_bitor">sql_bitor</a>()<br>
&nbsp;&nbsp;<a href="#sql_bitxor">sql_bitxor</a>()<br>
&nbsp;&nbsp;<a href="#sql_modulo">sql_modulo</a>()<br>
&nbsp;&nbsp;<a href="#sql_ceil">sql_ceil</a>()<br>
&nbsp;&nbsp;<a href="#sql_cast_char2int">sql_cast_char2int</a>()<br>
&nbsp;&nbsp;<a href="#sql_cast_char2real">sql_cast_char2real</a>()<br>
&nbsp;&nbsp;<a href="#sql_cast_2signed">sql_cast_2signed</a>()<br>
&nbsp;&nbsp;<a href="#sql_compare_text">sql_compare_text</a>()<br>
&nbsp;&nbsp;<a href="#sql_like">sql_like</a>()<br>
&nbsp;&nbsp;<a href="#sql_like_escape">sql_like_escape</a>()<br>
&nbsp;&nbsp;<a href="#sql_fullname">sql_fullname</a>()<br>
&nbsp;&nbsp;<a href="#sql_order_by_text">sql_order_by_text</a>()<br>
&nbsp;&nbsp;<a href="#sql_length">sql_length</a>()<br>
&nbsp;&nbsp;<a href="#sql_substr">sql_substr</a>()<br>
&nbsp;&nbsp;<a href="#sql_position">sql_position</a>()<br>
&nbsp;&nbsp;<a href="#sql_empty">sql_empty</a>()<br>
&nbsp;&nbsp;<a href="#sql_isempty">sql_isempty</a>()<br>
&nbsp;&nbsp;<a href="#sql_isnotempty">sql_isnotempty</a>()<br>
&nbsp;&nbsp;<a href="#sql_regex_supported">sql_regex_supported</a>()<br>
&nbsp;&nbsp;<a href="#sql_regex">sql_regex</a>()<br>
&nbsp;&nbsp;<a href="#sql_intersect">sql_intersect</a>()<br>
&nbsp;&nbsp;<a href="#replace_all_text_supported">replace_all_text_supported</a>()<br>
&nbsp;&nbsp;<a href="#replace_all_text">replace_all_text</a>()<br>
&nbsp;&nbsp;<a href="#update_temp_table_stats">update_temp_table_stats</a>()<br>
&nbsp;&nbsp;<a href="#transactions_supported">transactions_supported</a>()<br>
&nbsp;&nbsp;<a href="#is_transaction_started">is_transaction_started</a>()<br>
&nbsp;&nbsp;<a href="#transactions_forbidden">transactions_forbidden</a>()<br>
&nbsp;&nbsp;<a href="#start_delegated_transaction">start_delegated_transaction</a>()<br>
&nbsp;&nbsp;<a href="#commit_delegated_transaction">commit_delegated_transaction</a>()<br>
&nbsp;&nbsp;<a href="#rollback_delegated_transaction">rollback_delegated_transaction</a>()<br>
&nbsp;&nbsp;<a href="#force_transaction_rollback">force_transaction_rollback</a>()<br>
&nbsp;&nbsp;<a href="#session_lock_supported">session_lock_supported</a>()<br>
&nbsp;&nbsp;<a href="#get_session_lock">get_session_lock</a>()<br>
&nbsp;&nbsp;<a href="#release_session_lock">release_session_lock</a>()<br>
&nbsp;&nbsp;<a href="#perf_get_reads">perf_get_reads</a>()<br>
&nbsp;&nbsp;<a href="#perf_get_writes">perf_get_writes</a>()<br>
&nbsp;&nbsp;<a href="#perf_get_queries">perf_get_queries</a>()<br>
&nbsp;&nbsp;<a href="#perf_get_queries_time">perf_get_queries_time</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'moodle_database.php.source.html#l139')" href="moodle_database.php.source.html#l139">__construct</a>(<a href="../../_variables/external.html">$external</a>=false)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor - Instantiates the database, specifying if it's external (connect to other systems) or not (Moodle DB).<BR>
Note that this affects the decision of whether prefix checks must be performed or not.<BR>
</b><BR><b>param:</b> bool $external True means that an external database is used.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__destruct" onClick="logFunction('__destruct', 'moodle_database.php.source.html#l148')" href="moodle_database.php.source.html#l148">__destruct</a>()&nbsp;&nbsp;
<a href="../../_functions/__destruct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Destructor - cleans up and flushes everything needed.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_prefix" onClick="logFunction('get_prefix', 'moodle_database.php.source.html#l162')" href="moodle_database.php.source.html#l162">get_prefix</a>()&nbsp;&nbsp;
<a href="../../_functions/get_prefix.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns database table prefix<BR>
Note: can be used before connect()<BR>
</b><BR><b>return:</b> string The prefix used in the database.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_driver_instance" onClick="logFunction('get_driver_instance', 'moodle_database.php.source.html#l171')" href="moodle_database.php.source.html#l171">get_driver_instance</a>(<a href="../../_variables/type.html">$type</a>, <a href="../../_variables/library.html">$library</a>, <a href="../../_variables/external.html">$external</a> = false)&nbsp;&nbsp;
<a href="../../_functions/get_driver_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads and returns a database instance with the specified type and library.<BR>
</b><BR>The loaded class is within lib/dml directory and of the form: $type.'_'.$library.'_moodle_database'<BR>
<BR>
<b>param:</b> string $type Database driver's type. (eg: mysqli, pgsql, mssql, sqldrv, oci, etc.)<br>
<b>param:</b> string $library Database driver's library (native, pdo, etc.)<br>
<b>param:</b> bool $external True if this is an external database.<br>
<b>return:</b> moodle_database driver object or null if error, for example of driver object see {@link mysqli_native_moodle_database}<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_dbvendor" onClick="logFunction('get_dbvendor', 'moodle_database.php.source.html#l195')" href="moodle_database.php.source.html#l195">get_dbvendor</a>()&nbsp;&nbsp;
<a href="../../_functions/get_dbvendor.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the database vendor.<BR>
Note: can be used before connect()<BR>
</b><BR><b>return:</b> string The db vendor name, usually the same as db family name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_configuration_hints" onClick="logFunction('get_configuration_hints', 'moodle_database.php.source.html#l239')" href="moodle_database.php.source.html#l239">get_configuration_hints</a>()&nbsp;&nbsp;
<a href="../../_functions/get_configuration_hints.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the localised database description<BR>
Note: can be used before connect()<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="export_dbconfig" onClick="logFunction('export_dbconfig', 'moodle_database.php.source.html#l250')" href="moodle_database.php.source.html#l250">export_dbconfig</a>()&nbsp;&nbsp;
<a href="../../_functions/export_dbconfig.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the db related part of config.php<BR>
</b><BR><b>return:</b> stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="diagnose" onClick="logFunction('diagnose', 'moodle_database.php.source.html#l270')" href="moodle_database.php.source.html#l270">diagnose</a>()&nbsp;&nbsp;
<a href="../../_functions/diagnose.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Diagnose database and tables, this function is used<BR>
to verify database and driver settings, db engine types, etc.<BR>
</b><BR><b>return:</b> string null means everything ok, string means problem found.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="store_settings" onClick="logFunction('store_settings', 'moodle_database.php.source.html#l294')" href="moodle_database.php.source.html#l294">store_settings</a>(<a href="../../_variables/dbhost.html">$dbhost</a>, <a href="../../_variables/dbuser.html">$dbuser</a>, <a href="../../_variables/dbpass.html">$dbpass</a>, <a href="../../_variables/dbname.html">$dbname</a>, <a href="../../_variables/prefix.html">$prefix</a>, array <a href="../../_variables/dboptions.html">$dboptions</a>=null)&nbsp;&nbsp;
<a href="../../_functions/store_settings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Store various database settings<BR>
</b><BR><b>param:</b> string $dbhost The database host.<br>
<b>param:</b> string $dbuser The database user to connect as.<br>
<b>param:</b> string $dbpass The password to use when connecting to the database.<br>
<b>param:</b> string $dbname The name of the database being connected to.<br>
<b>param:</b> mixed $prefix string means moodle db prefix, false used for external databases where prefix not used<br>
<b>param:</b> array $dboptions driver specific options<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_settings_hash" onClick="logFunction('get_settings_hash', 'moodle_database.php.source.html#l313')" href="moodle_database.php.source.html#l313">get_settings_hash</a>()&nbsp;&nbsp;
<a href="../../_functions/get_settings_hash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a hash for the settings used during connection.<BR>
</b><BR>If not already requested it is generated and stored in a private property.<BR>
<BR>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_metacache" onClick="logFunction('get_metacache', 'moodle_database.php.source.html#l327')" href="moodle_database.php.source.html#l327">get_metacache</a>()&nbsp;&nbsp;
<a href="../../_functions/get_metacache.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle the creation and caching of the databasemeta information for all databases.<BR>
</b><BR>TODO MDL-53267 impelement caching of cache::make() results when it's safe to do so.<BR>
<BR>
<b>return:</b> cache_application The databasemeta cachestore to complete operations on.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_temp_tables_cache" onClick="logFunction('get_temp_tables_cache', 'moodle_database.php.source.html#l339')" href="moodle_database.php.source.html#l339">get_temp_tables_cache</a>()&nbsp;&nbsp;
<a href="../../_functions/get_temp_tables_cache.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle the creation and caching of the temporary tables.<BR>
</b><BR><b>return:</b> cache_application The temp_tables cachestore to complete operations on.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_database" onClick="logFunction('create_database', 'moodle_database.php.source.html#l350')" href="moodle_database.php.source.html#l350">create_database</a>(<a href="../../_variables/dbhost.html">$dbhost</a>, <a href="../../_variables/dbuser.html">$dbuser</a>, <a href="../../_variables/dbpass.html">$dbpass</a>, <a href="../../_variables/dbname.html">$dbname</a>, array <a href="../../_variables/dboptions.html">$dboptions</a>=null)&nbsp;&nbsp;
<a href="../../_functions/create_database.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Attempt to create the database<BR>
</b><BR><b>param:</b> string $dbhost The database host.<br>
<b>param:</b> string $dbuser The database user to connect as.<br>
<b>param:</b> string $dbpass The password to use when connecting to the database.<br>
<b>param:</b> string $dbname The name of the database being connected to.<br>
<b>param:</b> array $dboptions An array of optional database options (eg: dbport)<br>
<b>return:</b> bool success True for successful connection. False otherwise.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_transaction_start_backtrace" onClick="logFunction('get_transaction_start_backtrace', 'moodle_database.php.source.html#l364')" href="moodle_database.php.source.html#l364">get_transaction_start_backtrace</a>()&nbsp;&nbsp;
<a href="../../_functions/get_transaction_start_backtrace.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns transaction trace for debugging purposes.<BR>
</b><BR><b>return:</b> array or null if not in transaction.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="dispose" onClick="logFunction('dispose', 'moodle_database.php.source.html#l377')" href="moodle_database.php.source.html#l377">dispose</a>()&nbsp;&nbsp;
<a href="../../_functions/dispose.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Closes the database connection and releases all resources<BR>
and memory (especially circular memory references).<BR>
Do NOT use connect() again, create a new instance if needed.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="query_start" onClick="logFunction('query_start', 'moodle_database.php.source.html#l403')" href="moodle_database.php.source.html#l403">query_start</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/type.html">$type</a>, <a href="../../_variables/extrainfo.html">$extrainfo</a>=null)&nbsp;&nbsp;
<a href="../../_functions/query_start.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This should be called before each db query.<BR>
</b><BR><b>param:</b> string $sql The query string.<br>
<b>param:</b> array $params An array of parameters.<br>
<b>param:</b> int $type The type of query. ( SQL_QUERY_SELECT | SQL_QUERY_AUX | SQL_QUERY_INSERT | SQL_QUERY_UPDATE | SQL_QUERY_STRUCTURE )<br>
<b>param:</b> mixed $extrainfo This is here for any driver specific extra information.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="query_end" onClick="logFunction('query_end', 'moodle_database.php.source.html#l443')" href="moodle_database.php.source.html#l443">query_end</a>(<a href="../../_variables/result.html">$result</a>)&nbsp;&nbsp;
<a href="../../_functions/query_end.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This should be called immediately after each db query. It does a clean up of resources.<BR>
It also throws exceptions if the sql that ran produced errors.<BR>
</b><BR><b>param:</b> mixed $result The db specific result obtained from running a query.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="query_log" onClick="logFunction('query_log', 'moodle_database.php.source.html#l484')" href="moodle_database.php.source.html#l484">query_log</a>(<a href="../../_variables/error.html">$error</a>=false)&nbsp;&nbsp;
<a href="../../_functions/query_log.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This logs the last query based on 'logall', 'logslow' and 'logerrors' options configured via $CFG-&gt;dboptions .<BR>
</b><BR><b>param:</b> string|bool $error or false if not error<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="query_time" onClick="logFunction('query_time', 'moodle_database.php.source.html#l528')" href="moodle_database.php.source.html#l528">query_time</a>()&nbsp;&nbsp;
<a href="../../_functions/query_time.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the time elapsed since the query started.<BR>
</b><BR><b>return:</b> float Seconds with microseconds<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_debug" onClick="logFunction('print_debug', 'moodle_database.php.source.html#l554')" href="moodle_database.php.source.html#l554">print_debug</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/obj.html">$obj</a>=null)&nbsp;&nbsp;
<a href="../../_functions/print_debug.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prints sql debug info<BR>
</b><BR><b>param:</b> string $sql The query which is being debugged.<br>
<b>param:</b> array $params The query parameters. (optional)<br>
<b>param:</b> mixed $obj The library specific object. (optional)<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_debug_time" onClick="logFunction('print_debug_time', 'moodle_database.php.source.html#l582')" href="moodle_database.php.source.html#l582">print_debug_time</a>()&nbsp;&nbsp;
<a href="../../_functions/print_debug_time.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prints the time a query took to run.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="where_clause" onClick="logFunction('where_clause', 'moodle_database.php.source.html#l601')" href="moodle_database.php.source.html#l601">where_clause</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null)&nbsp;&nbsp;
<a href="../../_functions/where_clause.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL WHERE conditions.<BR>
</b><BR><b>param:</b> string $table The table name that these conditions will be validated against.<br>
<b>param:</b> array $conditions The conditions to build the where clause. (must not contain numeric indexes)<br>
<b>return:</b> array An array list containing sql 'where' part and 'params'.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="where_clause_list" onClick="logFunction('where_clause_list', 'moodle_database.php.source.html#l668')" href="moodle_database.php.source.html#l668">where_clause_list</a>(<a href="../../_variables/field.html">$field</a>, array <a href="../../_variables/values.html">$values</a>)&nbsp;&nbsp;
<a href="../../_functions/where_clause_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns SQL WHERE conditions for the ..._list group of methods.<BR>
</b><BR><b>param:</b> string $field the name of a field.<br>
<b>param:</b> array $values the values field might take.<br>
<b>return:</b> array An array containing sql 'where' part and 'params'<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_in_or_equal" onClick="logFunction('get_in_or_equal', 'moodle_database.php.source.html#l711')" href="moodle_database.php.source.html#l711">get_in_or_equal</a>(<a href="../../_variables/items.html">$items</a>, <a href="../../_variables/type.html">$type</a>=SQL_PARAMS_QM, <a href="../../_variables/prefix.html">$prefix</a>='param', <a href="../../_variables/equal.html">$equal</a>=true, <a href="../../_variables/onemptyitems.html">$onemptyitems</a>=false)&nbsp;&nbsp;
<a href="../../_functions/get_in_or_equal.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructs 'IN()' or '=' sql fragment<BR>
</b><BR><b>param:</b> mixed $items A single value or array of values for the expression.<br>
<b>param:</b> int $type Parameter bounding type : SQL_PARAMS_QM or SQL_PARAMS_NAMED.<br>
<b>param:</b> string $prefix Named parameter placeholder prefix (a unique counter value is appended to each parameter name).<br>
<b>param:</b> bool $equal True means we want to equate to the constructed expression, false means we don't want to equate to it.<br>
<b>param:</b> mixed $onemptyitems This defines the behavior when the array of items provided is empty. Defaults to false,<br>
<b>return:</b> array A list containing the constructed sql fragment and an array of parameters.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fix_table_names" onClick="logFunction('fix_table_names', 'moodle_database.php.source.html#l787')" href="moodle_database.php.source.html#l787">fix_table_names</a>(<a href="../../_variables/sql.html">$sql</a>)&nbsp;&nbsp;
<a href="../../_functions/fix_table_names.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Converts short table name {tablename} to the real prefixed table name in given sql.<BR>
</b><BR><b>param:</b> string $sql The sql to be operated on.<br>
<b>return:</b> string The sql with tablenames being prefixed with $CFG-&gt;prefix<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="_fix_sql_params_dollar_callback" onClick="logFunction('_fix_sql_params_dollar_callback', 'moodle_database.php.source.html#l796')" href="moodle_database.php.source.html#l796">_fix_sql_params_dollar_callback</a>(<a href="../../_variables/match.html">$match</a>)&nbsp;&nbsp;
<a href="../../_functions/_fix_sql_params_dollar_callback.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Internal private utitlity function used to fix parameters.<BR>
Used with {@link preg_replace_callback()}<BR>
</b><BR><b>param:</b> array $match Refer to preg_replace_callback usage for description.<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="detect_objects" onClick="logFunction('detect_objects', 'moodle_database.php.source.html#l807')" href="moodle_database.php.source.html#l807">detect_objects</a>(<a href="../../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../../_functions/detect_objects.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Detects object parameters and throws exception if found<BR>
</b><BR><b>param:</b> mixed $value<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fix_sql_params" onClick="logFunction('fix_sql_params', 'moodle_database.php.source.html#l819')" href="moodle_database.php.source.html#l819">fix_sql_params</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null)&nbsp;&nbsp;
<a href="../../_functions/fix_sql_params.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Normalizes sql query parameters and verifies parameters.<BR>
</b><BR><b>param:</b> string $sql The query or part of it.<br>
<b>param:</b> array $params The query parameters.<br>
<b>return:</b> array (sql, params, type of params)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="normalise_limit_from_num" onClick="logFunction('normalise_limit_from_num', 'moodle_database.php.source.html#l973')" href="moodle_database.php.source.html#l973">normalise_limit_from_num</a>(<a href="../../_variables/limitfrom.html">$limitfrom</a>, <a href="../../_variables/limitnum.html">$limitnum</a>)&nbsp;&nbsp;
<a href="../../_functions/normalise_limit_from_num.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Ensures that limit params are numeric and positive integers, to be passed to the database.<BR>
We explicitly treat null, '' and -1 as 0 in order to provide compatibility with how limit<BR>
values have been passed historically.<BR>
</b><BR><b>param:</b> int $limitfrom Where to start results from<br>
<b>param:</b> int $limitnum How many results to return<br>
<b>return:</b> array Normalised limit params in array($limitfrom, $limitnum)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_caches" onClick="logFunction('reset_caches', 'moodle_database.php.source.html#l1052')" href="moodle_database.php.source.html#l1052">reset_caches</a>(<a href="../../_variables/tablenames.html">$tablenames</a> = null)&nbsp;&nbsp;
<a href="../../_functions/reset_caches.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resets the internal column details cache<BR>
</b><BR><b>param:</b> array|null $tablenames an array of xmldb table names affected by this request.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_manager" onClick="logFunction('get_manager', 'moodle_database.php.source.html#l1080')" href="moodle_database.php.source.html#l1080">get_manager</a>()&nbsp;&nbsp;
<a href="../../_functions/get_manager.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the sql generator used for db manipulation.<BR>
Used mostly in upgrade.php scripts.<BR>
</b><BR><b>return:</b> database_manager The instance used to perform ddl operations.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="change_db_encoding" onClick="logFunction('change_db_encoding', 'moodle_database.php.source.html#l1101')" href="moodle_database.php.source.html#l1101">change_db_encoding</a>()&nbsp;&nbsp;
<a href="../../_functions/change_db_encoding.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Attempts to change db encoding to UTF-8 encoding if possible.<BR>
</b><BR><b>return:</b> bool True is successful.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="setup_is_unicodedb" onClick="logFunction('setup_is_unicodedb', 'moodle_database.php.source.html#l1109')" href="moodle_database.php.source.html#l1109">setup_is_unicodedb</a>()&nbsp;&nbsp;
<a href="../../_functions/setup_is_unicodedb.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks to see if the database is in unicode mode?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_debug" onClick="logFunction('set_debug', 'moodle_database.php.source.html#l1117')" href="moodle_database.php.source.html#l1117">set_debug</a>(<a href="../../_variables/state.html">$state</a>)&nbsp;&nbsp;
<a href="../../_functions/set_debug.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Enable/disable very detailed debugging.<BR>
</b><BR><b>param:</b> bool $state<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_debug" onClick="logFunction('get_debug', 'moodle_database.php.source.html#l1126')" href="moodle_database.php.source.html#l1126">get_debug</a>()&nbsp;&nbsp;
<a href="../../_functions/get_debug.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns debug status<BR>
</b><BR><b>return:</b> bool $state<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_logging" onClick="logFunction('set_logging', 'moodle_database.php.source.html#l1134')" href="moodle_database.php.source.html#l1134">set_logging</a>(<a href="../../_variables/state.html">$state</a>)&nbsp;&nbsp;
<a href="../../_functions/set_logging.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Enable/disable detailed sql logging<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_recordset" onClick="logFunction('get_recordset', 'moodle_database.php.source.html#l1162')" href="moodle_database.php.source.html#l1162">get_recordset</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_recordset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a number of records as a moodle_recordset where all the given conditions met.<BR>
</b><BR>Selects records from the table $table.<BR>
<BR>
If specified, only records meeting $conditions.<BR>
<BR>
If specified, the results will be sorted as specified by $sort. This<BR>
is added to the SQL as &quot;ORDER BY $sort&quot;. Example values of $sort<BR>
might be &quot;time ASC&quot; or &quot;time DESC&quot;.<BR>
<BR>
If $fields is specified, only those fields are returned.<BR>
<BR>
Since this method is a little less readable, use of it should be restricted to<BR>
code where it's possible there might be large datasets being returned.&nbsp;&nbsp;For known<BR>
small datasets use get_records - it leads to simpler code.<BR>
<BR>
If you only want some of the records, specify $limitfrom and $limitnum.<BR>
The query will skip the first $limitfrom records (according to the sort<BR>
order) and then return the next $limitnum records. If either of $limitfrom<BR>
or $limitnum is specified, both must be present.<BR>
<BR>
The return value is a moodle_recordset<BR>
if the query succeeds. If an error occurs, false is returned.<BR>
<BR>
<b>param:</b> string $table the table to query.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>param:</b> string $sort an order to sort the results in (optional, a valid SQL ORDER BY parameter).<br>
<b>param:</b> string $fields a comma separated list of fields to return (optional, by default all fields are returned).<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>return:</b> moodle_recordset A moodle_recordset instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_recordset_list" onClick="logFunction('get_recordset_list', 'moodle_database.php.source.html#l1201')" href="moodle_database.php.source.html#l1201">get_recordset_list</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/field.html">$field</a>, array <a href="../../_variables/values.html">$values</a>, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_recordset_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a number of records as a moodle_recordset where one field match one list of values.<BR>
</b><BR>Only records where $field takes one of the values $values are returned.<BR>
$values must be an array of values.<BR>
<BR>
Other arguments and the return type are like {@link function get_recordset}.<BR>
<BR>
<b>param:</b> string $table the table to query.<br>
<b>param:</b> string $field a field to check (optional).<br>
<b>param:</b> array $values array of values the field must have<br>
<b>param:</b> string $sort an order to sort the results in (optional, a valid SQL ORDER BY parameter).<br>
<b>param:</b> string $fields a comma separated list of fields to return (optional, by default all fields are returned).<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>return:</b> moodle_recordset A moodle_recordset instance.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_recordset_select" onClick="logFunction('get_recordset_select', 'moodle_database.php.source.html#l1224')" href="moodle_database.php.source.html#l1224">get_recordset_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_recordset_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a number of records as a moodle_recordset which match a particular WHERE clause.<BR>
</b><BR>If given, $select is used as the SELECT parameter in the SQL query,<BR>
otherwise all records from the table are returned.<BR>
<BR>
Other arguments and the return type are like {@link function get_recordset}.<BR>
<BR>
<b>param:</b> string $table the table to query.<br>
<b>param:</b> string $select A fragment of SQL to be used in a where clause in the SQL call.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> string $sort an order to sort the results in (optional, a valid SQL ORDER BY parameter).<br>
<b>param:</b> string $fields a comma separated list of fields to return (optional, by default all fields are returned).<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>return:</b> moodle_recordset A moodle_recordset instance.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="export_table_recordset" onClick="logFunction('export_table_recordset', 'moodle_database.php.source.html#l1271')" href="moodle_database.php.source.html#l1271">export_table_recordset</a>(<a href="../../_variables/table.html">$table</a>)&nbsp;&nbsp;
<a href="../../_functions/export_table_recordset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get all records from a table.<BR>
</b><BR>This method works around potential memory problems and may improve performance,<BR>
this method may block access to table until the recordset is closed.<BR>
<BR>
<b>param:</b> string $table Name of database table.<br>
<b>return:</b> moodle_recordset A moodle_recordset instance {@link function get_recordset}.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records" onClick="logFunction('get_records', 'moodle_database.php.source.html#l1285')" href="moodle_database.php.source.html#l1285">get_records</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a number of records as an array of objects where all the given conditions met.<BR>
</b><BR>If the query succeeds and returns at least one record, the<BR>
return value is an array of objects, one object for each<BR>
record found. The array key is the value from the first<BR>
column of the result set. The object associated with that key<BR>
has a member variable for each column of the results.<BR>
<BR>
<b>param:</b> string $table the table to query.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>param:</b> string $sort an order to sort the results in (optional, a valid SQL ORDER BY parameter).<br>
<b>param:</b> string $fields a comma separated list of fields to return (optional, by default<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records in total (optional, required if $limitfrom is set).<br>
<b>return:</b> array An array of Objects indexed by first column.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_list" onClick="logFunction('get_records_list', 'moodle_database.php.source.html#l1310')" href="moodle_database.php.source.html#l1310">get_records_list</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/field.html">$field</a>, array <a href="../../_variables/values.html">$values</a>, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_records_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a number of records as an array of objects where one field match one list of values.<BR>
</b><BR>Return value is like {@link function get_records}.<BR>
<BR>
<b>param:</b> string $table The database table to be checked against.<br>
<b>param:</b> string $field The field to search<br>
<b>param:</b> array $values An array of values<br>
<b>param:</b> string $sort Sort order (as valid SQL sort parameter)<br>
<b>param:</b> string $fields A comma separated list of fields to be returned from the chosen table. If specified,<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records in total (optional).<br>
<b>return:</b> array An array of objects indexed by first column<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_select" onClick="logFunction('get_records_select', 'moodle_database.php.source.html#l1332')" href="moodle_database.php.source.html#l1332">get_records_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_records_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a number of records as an array of objects which match a particular WHERE clause.<BR>
</b><BR>Return value is like {@link function get_records}.<BR>
<BR>
<b>param:</b> string $table The table to query.<br>
<b>param:</b> string $select A fragment of SQL to be used in a where clause in the SQL call.<br>
<b>param:</b> array $params An array of sql parameters<br>
<b>param:</b> string $sort An order to sort the results in (optional, a valid SQL ORDER BY parameter).<br>
<b>param:</b> string $fields A comma separated list of fields to return<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records in total (optional, required if $limitfrom is set).<br>
<b>return:</b> array of objects indexed by first column<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_menu" onClick="logFunction('get_records_menu', 'moodle_database.php.source.html#l1375')" href="moodle_database.php.source.html#l1375">get_records_menu</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_records_menu.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the first two columns from a number of records as an associative array where all the given conditions met.<BR>
</b><BR>Arguments are like {@link function get_recordset}.<BR>
<BR>
If no errors occur the return value<BR>
is an associative whose keys come from the first field of each record,<BR>
and whose values are the corresponding second fields.<BR>
False is returned if an error occurs.<BR>
<BR>
<b>param:</b> string $table the table to query.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>param:</b> string $sort an order to sort the results in (optional, a valid SQL ORDER BY parameter).<br>
<b>param:</b> string $fields a comma separated list of fields to return - the number of fields should be 2!<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>return:</b> array an associative array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_select_menu" onClick="logFunction('get_records_select_menu', 'moodle_database.php.source.html#l1407')" href="moodle_database.php.source.html#l1407">get_records_select_menu</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/sort.html">$sort</a>='', <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_records_select_menu.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the first two columns from a number of records as an associative array which match a particular WHERE clause.<BR>
</b><BR>Arguments are like {@link function get_recordset_select}.<BR>
Return value is like {@link function get_records_menu}.<BR>
<BR>
<b>param:</b> string $table The database table to be checked against.<br>
<b>param:</b> string $select A fragment of SQL to be used in a where clause in the SQL call.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> string $sort Sort order (optional) - a valid SQL order parameter<br>
<b>param:</b> string $fields A comma separated list of fields to be returned from the chosen table - the number of fields should be 2!<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>return:</b> array an associative array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_sql_menu" onClick="logFunction('get_records_sql_menu', 'moodle_database.php.source.html#l1436')" href="moodle_database.php.source.html#l1436">get_records_sql_menu</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a href="../../_variables/limitnum.html">$limitnum</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_records_sql_menu.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the first two columns from a number of records as an associative array using a SQL statement.<BR>
</b><BR>Arguments are like {@link function get_recordset_sql}.<BR>
Return value is like {@link function get_records_menu}.<BR>
<BR>
<b>param:</b> string $sql The SQL string you wish to be executed.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>return:</b> array an associative array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_record" onClick="logFunction('get_record', 'moodle_database.php.source.html#l1462')" href="moodle_database.php.source.html#l1462">get_record</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>, <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/strictness.html">$strictness</a>=IGNORE_MISSING)&nbsp;&nbsp;
<a href="../../_functions/get_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a single database record as an object where all the given conditions met.<BR>
</b><BR><b>param:</b> string $table The table to select from.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>param:</b> string $fields A comma separated list of fields to be returned from the chosen table.<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> mixed a fieldset object containing the first matching record, false or exception if error not found depending on mode<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_record_select" onClick="logFunction('get_record_select', 'moodle_database.php.source.html#l1481')" href="moodle_database.php.source.html#l1481">get_record_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/fields.html">$fields</a>='*', <a href="../../_variables/strictness.html">$strictness</a>=IGNORE_MISSING)&nbsp;&nbsp;
<a href="../../_functions/get_record_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a single database record as an object which match a particular WHERE clause.<BR>
</b><BR><b>param:</b> string $table The database table to be checked against.<br>
<b>param:</b> string $select A fragment of SQL to be used in a where clause in the SQL call.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> string $fields A comma separated list of fields to be returned from the chosen table.<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> stdClass|false a fieldset object containing the first matching record, false or exception if error not found depending on mode<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_record_sql" onClick="logFunction('get_record_sql', 'moodle_database.php.source.html#l1506')" href="moodle_database.php.source.html#l1506">get_record_sql</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/strictness.html">$strictness</a>=IGNORE_MISSING)&nbsp;&nbsp;
<a href="../../_functions/get_record_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a single database record as an object using a SQL statement.<BR>
</b><BR>The SQL statement should normally only return one record.<BR>
It is recommended to use get_records_sql() if more matches possible!<BR>
<BR>
<b>param:</b> string $sql The SQL string you wish to be executed, should normally only return one record.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> mixed a fieldset object containing the first matching record, false or exception if error not found depending on mode<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_field" onClick="logFunction('get_field', 'moodle_database.php.source.html#l1546')" href="moodle_database.php.source.html#l1546">get_field</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/return.html">$return</a>, array <a href="../../_variables/conditions.html">$conditions</a>, <a href="../../_variables/strictness.html">$strictness</a>=IGNORE_MISSING)&nbsp;&nbsp;
<a href="../../_functions/get_field.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a single field value from a table record where all the given conditions met.<BR>
</b><BR><b>param:</b> string $table the table to query.<br>
<b>param:</b> string $return the field to return the value of.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> mixed the specified value false if not found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_field_select" onClick="logFunction('get_field_select', 'moodle_database.php.source.html#l1563')" href="moodle_database.php.source.html#l1563">get_field_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/return.html">$return</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/strictness.html">$strictness</a>=IGNORE_MISSING)&nbsp;&nbsp;
<a href="../../_functions/get_field_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a single field value from a table record which match a particular WHERE clause.<BR>
</b><BR><b>param:</b> string $table the table to query.<br>
<b>param:</b> string $return the field to return the value of.<br>
<b>param:</b> string $select A fragment of SQL to be used in a where clause returning one row with one column<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> mixed the specified value false if not found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_field_sql" onClick="logFunction('get_field_sql', 'moodle_database.php.source.html#l1588')" href="moodle_database.php.source.html#l1588">get_field_sql</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/strictness.html">$strictness</a>=IGNORE_MISSING)&nbsp;&nbsp;
<a href="../../_functions/get_field_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a single field value (first field) using a SQL statement.<BR>
</b><BR><b>param:</b> string $sql The SQL query returning one row with one column<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> mixed the specified value false if not found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_fieldset_select" onClick="logFunction('get_fieldset_select', 'moodle_database.php.source.html#l1608')" href="moodle_database.php.source.html#l1608">get_fieldset_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/return.html">$return</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null)&nbsp;&nbsp;
<a href="../../_functions/get_fieldset_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Selects records and return values of chosen field as an array which match a particular WHERE clause.<BR>
</b><BR><b>param:</b> string $table the table to query.<br>
<b>param:</b> string $return the field we are intered in<br>
<b>param:</b> string $select A fragment of SQL to be used in a where clause in the SQL call.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>return:</b> array of values<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="insert_records" onClick="logFunction('insert_records', 'moodle_database.php.source.html#l1662')" href="moodle_database.php.source.html#l1662">insert_records</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/dataobjects.html">$dataobjects</a>)&nbsp;&nbsp;
<a href="../../_functions/insert_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Insert multiple records into database as fast as possible.<BR>
</b><BR>Order of inserts is maintained, but the operation is not atomic,<BR>
use transactions if necessary.<BR>
<BR>
This method is intended for inserting of large number of small objects,<BR>
do not use for huge objects with text or binary fields.<BR>
<BR>
<b>param:</b> string $table&nbsp;&nbsp;The database table to be inserted into<br>
<b>param:</b> array|Traversable $dataobjects list of objects to be inserted, must be compatible with foreach<br>
<b>return:</b> void does not return new record ids<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_field" onClick="logFunction('set_field', 'moodle_database.php.source.html#l1737')" href="moodle_database.php.source.html#l1737">set_field</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/newfield.html">$newfield</a>, <a href="../../_variables/newvalue.html">$newvalue</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null)&nbsp;&nbsp;
<a href="../../_functions/set_field.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set a single field in every table record where all the given conditions met.<BR>
</b><BR><b>param:</b> string $table The database table to be checked against.<br>
<b>param:</b> string $newfield the field to set.<br>
<b>param:</b> string $newvalue the value to set the field to.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>return:</b> bool true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_records" onClick="logFunction('count_records', 'moodle_database.php.source.html#l1766')" href="moodle_database.php.source.html#l1766">count_records</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null)&nbsp;&nbsp;
<a href="../../_functions/count_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Count the records in a table where all the given conditions met.<BR>
</b><BR><b>param:</b> string $table The table to query.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>return:</b> int The count of records returned from the specified criteria.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_records_select" onClick="logFunction('count_records_select', 'moodle_database.php.source.html#l1779')" href="moodle_database.php.source.html#l1779">count_records_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/countitem.html">$countitem</a>=&quot;COUNT('x')&nbsp;&nbsp;
<a href="../../_functions/count_records_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Count the records in a table which match a particular WHERE clause.<BR>
</b><BR><b>param:</b> string $table The database table to be checked against.<br>
<b>param:</b> string $select A fragment of SQL to be used in a WHERE clause in the SQL call.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>param:</b> string $countitem The count string to be used in the SQL call. Default is COUNT('x').<br>
<b>return:</b> int The count of records returned from the specified criteria.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_records_sql" onClick="logFunction('count_records_sql', 'moodle_database.php.source.html#l1796')" href="moodle_database.php.source.html#l1796">count_records_sql</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null)&nbsp;&nbsp;
<a href="../../_functions/count_records_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the result of a SQL SELECT COUNT(...) query.<BR>
</b><BR>Given a query that counts rows, return that count. (In fact,<BR>
given any query, return the first field of the first record<BR>
returned. However, this method should only be used for the<BR>
intended purpose.) If an error occurs, 0 is returned.<BR>
<BR>
<b>param:</b> string $sql The SQL string you wish to be executed.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>return:</b> int the count<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="record_exists" onClick="logFunction('record_exists', 'moodle_database.php.source.html#l1817')" href="moodle_database.php.source.html#l1817">record_exists</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>)&nbsp;&nbsp;
<a href="../../_functions/record_exists.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Test whether a record exists in a table where all the given conditions met.<BR>
</b><BR><b>param:</b> string $table The table to check.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>return:</b> bool true if a matching record exists, else false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="record_exists_select" onClick="logFunction('record_exists_select', 'moodle_database.php.source.html#l1830')" href="moodle_database.php.source.html#l1830">record_exists_select</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a>=null)&nbsp;&nbsp;
<a href="../../_functions/record_exists_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Test whether any records exists in a table which match a particular WHERE clause.<BR>
</b><BR><b>param:</b> string $table The database table to be checked against.<br>
<b>param:</b> string $select A fragment of SQL to be used in a WHERE clause in the SQL call.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>return:</b> bool true if a matching record exists, else false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="record_exists_sql" onClick="logFunction('record_exists_sql', 'moodle_database.php.source.html#l1846')" href="moodle_database.php.source.html#l1846">record_exists_sql</a>(<a href="../../_variables/sql.html">$sql</a>, array <a href="../../_variables/params.html">$params</a>=null)&nbsp;&nbsp;
<a href="../../_functions/record_exists_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Test whether a SQL SELECT statement returns any records.<BR>
</b><BR>This function returns true if the SQL statement executes<BR>
without any errors and returns at least one record.<BR>
<BR>
<b>param:</b> string $sql The SQL statement to execute.<br>
<b>param:</b> array $params array of sql parameters<br>
<b>return:</b> bool true if the SQL executes without errors and returns at least one record.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_records" onClick="logFunction('delete_records', 'moodle_database.php.source.html#l1864')" href="moodle_database.php.source.html#l1864">delete_records</a>(<a href="../../_variables/table.html">$table</a>, array <a href="../../_variables/conditions.html">$conditions</a>=null)&nbsp;&nbsp;
<a href="../../_functions/delete_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete the records from a table where all the given conditions met.<BR>
If conditions not specified, table is truncated.<BR>
</b><BR><b>param:</b> string $table the table to delete from.<br>
<b>param:</b> array $conditions optional array $fieldname=&gt;requestedvalue with AND in between<br>
<b>return:</b> bool true.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_records_list" onClick="logFunction('delete_records_list', 'moodle_database.php.source.html#l1883')" href="moodle_database.php.source.html#l1883">delete_records_list</a>(<a href="../../_variables/table.html">$table</a>, <a href="../../_variables/field.html">$field</a>, array <a href="../../_variables/values.html">$values</a>)&nbsp;&nbsp;
<a href="../../_functions/delete_records_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete the records from a table where one field match one list of values.<BR>
</b><BR><b>param:</b> string $table the table to delete from.<br>
<b>param:</b> string $field The field to search<br>
<b>param:</b> array $values array of values<br>
<b>return:</b> bool true.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_null_from_clause" onClick="logFunction('sql_null_from_clause', 'moodle_database.php.source.html#l1908')" href="moodle_database.php.source.html#l1908">sql_null_from_clause</a>()&nbsp;&nbsp;
<a href="../../_functions/sql_null_from_clause.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the FROM clause required by some DBs in all SELECT statements.<BR>
</b><BR>To be used in queries not having FROM clause to provide cross_db<BR>
Most DBs don't need it, hence the default is ''<BR>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_bitand" onClick="logFunction('sql_bitand', 'moodle_database.php.source.html#l1919')" href="moodle_database.php.source.html#l1919">sql_bitand</a>(<a href="../../_variables/int1.html">$int1</a>, <a href="../../_variables/int2.html">$int2</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_bitand.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used in order to perform one bitwise AND operation<BR>
between 2 integers.<BR>
</b><BR>NOTE: The SQL result is a number and can not be used directly in<BR>
SQL condition, please compare it to some number to get a bool!!<BR>
<BR>
<b>param:</b> int $int1 First integer in the operation.<br>
<b>param:</b> int $int2 Second integer in the operation.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_bitnot" onClick="logFunction('sql_bitnot', 'moodle_database.php.source.html#l1934')" href="moodle_database.php.source.html#l1934">sql_bitnot</a>(<a href="../../_variables/int1.html">$int1</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_bitnot.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used in order to perform one bitwise NOT operation<BR>
with 1 integer.<BR>
</b><BR><b>param:</b> int $int1 The operand integer in the operation.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_bitor" onClick="logFunction('sql_bitor', 'moodle_database.php.source.html#l1945')" href="moodle_database.php.source.html#l1945">sql_bitor</a>(<a href="../../_variables/int1.html">$int1</a>, <a href="../../_variables/int2.html">$int2</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_bitor.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used in order to perform one bitwise OR operation<BR>
between 2 integers.<BR>
</b><BR>NOTE: The SQL result is a number and can not be used directly in<BR>
SQL condition, please compare it to some number to get a bool!!<BR>
<BR>
<b>param:</b> int $int1 The first operand integer in the operation.<br>
<b>param:</b> int $int2 The second operand integer in the operation.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_bitxor" onClick="logFunction('sql_bitxor', 'moodle_database.php.source.html#l1960')" href="moodle_database.php.source.html#l1960">sql_bitxor</a>(<a href="../../_variables/int1.html">$int1</a>, <a href="../../_variables/int2.html">$int2</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_bitxor.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used in order to perform one bitwise XOR operation<BR>
between 2 integers.<BR>
</b><BR>NOTE: The SQL result is a number and can not be used directly in<BR>
SQL condition, please compare it to some number to get a bool!!<BR>
<BR>
<b>param:</b> int $int1 The first operand integer in the operation.<br>
<b>param:</b> int $int2 The second operand integer in the operation.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_modulo" onClick="logFunction('sql_modulo', 'moodle_database.php.source.html#l1975')" href="moodle_database.php.source.html#l1975">sql_modulo</a>(<a href="../../_variables/int1.html">$int1</a>, <a href="../../_variables/int2.html">$int2</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_modulo.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used in order to perform module '%'<BR>
operation - remainder after division<BR>
</b><BR><b>param:</b> int $int1 The first operand integer in the operation.<br>
<b>param:</b> int $int2 The second operand integer in the operation.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_ceil" onClick="logFunction('sql_ceil', 'moodle_database.php.source.html#l1987')" href="moodle_database.php.source.html#l1987">sql_ceil</a>(<a href="../../_variables/fieldname.html">$fieldname</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_ceil.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the cross db correct CEIL (ceiling) expression applied to fieldname.<BR>
note: Most DBs use CEIL(), hence it's the default here.<BR>
</b><BR><b>param:</b> string $fieldname The field (or expression) we are going to ceil.<br>
<b>return:</b> string The piece of SQL code to be used in your ceiling statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_cast_char2int" onClick="logFunction('sql_cast_char2int', 'moodle_database.php.source.html#l1998')" href="moodle_database.php.source.html#l1998">sql_cast_char2int</a>(<a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/text.html">$text</a>=false)&nbsp;&nbsp;
<a href="../../_functions/sql_cast_char2int.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL to be used in order to CAST one CHAR column to INTEGER.<BR>
</b><BR>Be aware that the CHAR column you're trying to cast contains really<BR>
int values or the RDBMS will throw an error!<BR>
<BR>
<b>param:</b> string $fieldname The name of the field to be casted.<br>
<b>param:</b> bool $text Specifies if the original column is one TEXT (CLOB) column (true). Defaults to false.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_cast_char2real" onClick="logFunction('sql_cast_char2real', 'moodle_database.php.source.html#l2012')" href="moodle_database.php.source.html#l2012">sql_cast_char2real</a>(<a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/text.html">$text</a>=false)&nbsp;&nbsp;
<a href="../../_functions/sql_cast_char2real.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL to be used in order to CAST one CHAR column to REAL number.<BR>
</b><BR>Be aware that the CHAR column you're trying to cast contains really<BR>
numbers or the RDBMS will throw an error!<BR>
<BR>
<b>param:</b> string $fieldname The name of the field to be casted.<br>
<b>param:</b> bool $text Specifies if the original column is one TEXT (CLOB) column (true). Defaults to false.<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_cast_2signed" onClick="logFunction('sql_cast_2signed', 'moodle_database.php.source.html#l2026')" href="moodle_database.php.source.html#l2026">sql_cast_2signed</a>(<a href="../../_variables/fieldname.html">$fieldname</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_cast_2signed.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL to be used in order to an UNSIGNED INTEGER column to SIGNED.<BR>
</b><BR>(Only MySQL needs this. MySQL things that 1 * -1 = 18446744073709551615<BR>
if the 1 comes from an unsigned column).<BR>
<BR>
<b>param:</b> string $fieldname The name of the field to be cast<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_compare_text" onClick="logFunction('sql_compare_text', 'moodle_database.php.source.html#l2040')" href="moodle_database.php.source.html#l2040">sql_compare_text</a>(<a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/numchars.html">$numchars</a>=32)&nbsp;&nbsp;
<a href="../../_functions/sql_compare_text.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used to compare one TEXT (clob) column with<BR>
one varchar column, because some RDBMS doesn't support such direct<BR>
comparisons.<BR>
</b><BR><b>param:</b> string $fieldname The name of the TEXT field we need to order by<br>
<b>param:</b> int $numchars Number of chars to use for the ordering (defaults to 32).<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_like" onClick="logFunction('sql_like', 'moodle_database.php.source.html#l2053')" href="moodle_database.php.source.html#l2053">sql_like</a>(<a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/param.html">$param</a>, <a href="../../_variables/casesensitive.html">$casesensitive</a> = true, <a href="../../_variables/accentsensitive.html">$accentsensitive</a> = true, <a href="../../_variables/notlike.html">$notlike</a> = false, <a href="../../_variables/escapechar.html">$escapechar</a> = '\\')&nbsp;&nbsp;
<a href="../../_functions/sql_like.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns 'LIKE' part of a query.<BR>
</b><BR><b>param:</b> string $fieldname Usually the name of the table column.<br>
<b>param:</b> string $param Usually the bound query parameter (?, :named).<br>
<b>param:</b> bool $casesensitive Use case sensitive search when set to true (default).<br>
<b>param:</b> bool $accentsensitive Use accent sensitive search when set to true (default). (not all databases support accent insensitive)<br>
<b>param:</b> bool $notlike True means &quot;NOT LIKE&quot;.<br>
<b>param:</b> string $escapechar The escape char for '%' and '_'.<br>
<b>return:</b> string The SQL code fragment.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_like_escape" onClick="logFunction('sql_like_escape', 'moodle_database.php.source.html#l2073')" href="moodle_database.php.source.html#l2073">sql_like_escape</a>(<a href="../../_variables/text.html">$text</a>, <a href="../../_variables/escapechar.html">$escapechar</a> = '\\')&nbsp;&nbsp;
<a href="../../_functions/sql_like_escape.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Escape sql LIKE special characters like '_' or '%'.<BR>
</b><BR><b>param:</b> string $text The string containing characters needing escaping.<br>
<b>param:</b> string $escapechar The desired escape character, defaults to '\\'.<br>
<b>return:</b> string The escaped sql LIKE string.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_fullname" onClick="logFunction('sql_fullname', 'moodle_database.php.source.html#l2106')" href="moodle_database.php.source.html#l2106">sql_fullname</a>(<a href="../../_variables/first.html">$first</a>='firstname', <a href="../../_variables/last.html">$last</a>='lastname')&nbsp;&nbsp;
<a href="../../_functions/sql_fullname.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the proper SQL (for the dbms in use) to concatenate $firstname and $lastname<BR>
</b><BR><b>param:</b> string $first User's first name (default:'firstname').<br>
<b>param:</b> string $last User's last name (default:'lastname').<br>
<b>return:</b> string The SQL to concatenate strings.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_order_by_text" onClick="logFunction('sql_order_by_text', 'moodle_database.php.source.html#l2119')" href="moodle_database.php.source.html#l2119">sql_order_by_text</a>(<a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/numchars.html">$numchars</a>=32)&nbsp;&nbsp;
<a href="../../_functions/sql_order_by_text.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used to order by one TEXT (clob) column, because<BR>
some RDBMS doesn't support direct ordering of such fields.<BR>
</b><BR>Note that the use or queries being ordered by TEXT columns must be minimised,<BR>
because it's really slooooooow.<BR>
<BR>
<b>param:</b> string $fieldname The name of the TEXT field we need to order by.<br>
<b>param:</b> int $numchars The number of chars to use for the ordering (defaults to 32).<br>
<b>return:</b> string The piece of SQL code to be used in your statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_length" onClick="logFunction('sql_length', 'moodle_database.php.source.html#l2134')" href="moodle_database.php.source.html#l2134">sql_length</a>(<a href="../../_variables/fieldname.html">$fieldname</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_length.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL text to be used to calculate the length in characters of one expression.<BR>
</b><BR><b>param:</b> string $fieldname The fieldname/expression to calculate its length in characters.<br>
<b>return:</b> string the piece of SQL code to be used in the statement.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_substr" onClick="logFunction('sql_substr', 'moodle_database.php.source.html#l2143')" href="moodle_database.php.source.html#l2143">sql_substr</a>(<a href="../../_variables/expr.html">$expr</a>, <a href="../../_variables/start.html">$start</a>, <a href="../../_variables/length.html">$length</a>=false)&nbsp;&nbsp;
<a href="../../_functions/sql_substr.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the proper substr() SQL text used to extract substrings from DB<BR>
NOTE: this was originally returning only function name<BR>
</b><BR><b>param:</b> string $expr Some string field, no aggregates.<br>
<b>param:</b> mixed $start Integer or expression evaluating to integer (1 based value; first char has index 1)<br>
<b>param:</b> mixed $length Optional integer or expression evaluating to integer.<br>
<b>return:</b> string The sql substring extraction fragment.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_position" onClick="logFunction('sql_position', 'moodle_database.php.source.html#l2163')" href="moodle_database.php.source.html#l2163">sql_position</a>(<a href="../../_variables/needle.html">$needle</a>, <a href="../../_variables/haystack.html">$haystack</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_position.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL for returning searching one string for the location of another.<BR>
</b><BR>Note, there is no guarantee which order $needle, $haystack will be in<BR>
the resulting SQL so when using this method, and both arguments contain<BR>
placeholders, you should use named placeholders.<BR>
<BR>
<b>param:</b> string $needle the SQL expression that will be searched for.<br>
<b>param:</b> string $haystack the SQL expression that will be searched in.<br>
<b>return:</b> string The required searching SQL part.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_empty" onClick="logFunction('sql_empty', 'moodle_database.php.source.html#l2179')" href="moodle_database.php.source.html#l2179">sql_empty</a>()&nbsp;&nbsp;
<a href="../../_functions/sql_empty.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This used to return empty string replacement character.<BR>
</b><BR><b>return:</b> string An empty string.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_isempty" onClick="logFunction('sql_isempty', 'moodle_database.php.source.html#l2191')" href="moodle_database.php.source.html#l2191">sql_isempty</a>(<a href="../../_variables/tablename.html">$tablename</a>, <a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/nullablefield.html">$nullablefield</a>, <a href="../../_variables/textfield.html">$textfield</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_isempty.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the proper SQL to know if one field is empty.<BR>
</b><BR>Note that the function behavior strongly relies on the<BR>
parameters passed describing the field so, please,&nbsp;&nbsp;be accurate<BR>
when specifying them.<BR>
<BR>
Also, note that this function is not suitable to look for<BR>
fields having NULL contents at all. It's all for empty values!<BR>
<BR>
This function should be applied in all the places where conditions of<BR>
the type:<BR>
<BR>
... AND fieldname = '';<BR>
<BR>
are being used. Final result for text fields should be:<BR>
<BR>
... AND ' . sql_isempty('tablename', 'fieldname', true/false, true);<BR>
<BR>
and for varchar fields result should be:<BR>
<BR>
... AND fieldname = :empty; &quot;; $params['empty'] = '';<BR>
<BR>
(see parameters description below)<BR>
<BR>
<b>param:</b> string $tablename Name of the table (without prefix). Not used for now but can be<br>
<b>param:</b> string $fieldname Name of the field we are going to check<br>
<b>param:</b> bool $nullablefield For specifying if the field is nullable (true) or no (false) in the DB.<br>
<b>param:</b> bool $textfield For specifying if it is a text (also called clob) field (true) or a varchar one (false)<br>
<b>return:</b> string the sql code to be added to check for empty values<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_isnotempty" onClick="logFunction('sql_isnotempty', 'moodle_database.php.source.html#l2228')" href="moodle_database.php.source.html#l2228">sql_isnotempty</a>(<a href="../../_variables/tablename.html">$tablename</a>, <a href="../../_variables/fieldname.html">$fieldname</a>, <a href="../../_variables/nullablefield.html">$nullablefield</a>, <a href="../../_variables/textfield.html">$textfield</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_isnotempty.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the proper SQL to know if one field is not empty.<BR>
</b><BR>Note that the function behavior strongly relies on the<BR>
parameters passed describing the field so, please,&nbsp;&nbsp;be accurate<BR>
when specifying them.<BR>
<BR>
This function should be applied in all the places where conditions of<BR>
the type:<BR>
<BR>
... AND fieldname != '';<BR>
<BR>
are being used. Final result for text fields should be:<BR>
<BR>
... AND ' . sql_isnotempty('tablename', 'fieldname', true/false, true/false);<BR>
<BR>
and for varchar fields result should be:<BR>
<BR>
... AND fieldname != :empty; &quot;; $params['empty'] = '';<BR>
<BR>
(see parameters description below)<BR>
<BR>
<b>param:</b> string $tablename Name of the table (without prefix). This is not used for now but can be<br>
<b>param:</b> string $fieldname The name of the field we are going to check.<br>
<b>param:</b> bool $nullablefield Specifies if the field is nullable (true) or not (false) in the DB.<br>
<b>param:</b> bool $textfield Specifies if it is a text (also called clob) field (true) or a varchar one (false).<br>
<b>return:</b> string The sql code to be added to check for non empty values.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_regex_supported" onClick="logFunction('sql_regex_supported', 'moodle_database.php.source.html#l2262')" href="moodle_database.php.source.html#l2262">sql_regex_supported</a>()&nbsp;&nbsp;
<a href="../../_functions/sql_regex_supported.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if this database driver supports regex syntax when searching.<BR>
</b><BR><b>return:</b> bool True if supported.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_regex" onClick="logFunction('sql_regex', 'moodle_database.php.source.html#l2270')" href="moodle_database.php.source.html#l2270">sql_regex</a>(<a href="../../_variables/positivematch.html">$positivematch</a>=true)&nbsp;&nbsp;
<a href="../../_functions/sql_regex.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the driver specific syntax (SQL part) for matching regex positively or negatively (inverted matching).<BR>
Eg: 'REGEXP':'NOT REGEXP' or '~*' : '!~*'<BR>
</b><BR><b>param:</b> bool $positivematch<br>
<b>return:</b> string or empty if not supported<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_intersect" onClick="logFunction('sql_intersect', 'moodle_database.php.source.html#l2280')" href="moodle_database.php.source.html#l2280">sql_intersect</a>(<a href="../../_variables/selects.html">$selects</a>, <a href="../../_variables/fields.html">$fields</a>)&nbsp;&nbsp;
<a href="../../_functions/sql_intersect.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the SQL that allows to find intersection of two or more queries<BR>
</b><BR><b>param:</b> array $selects array of SQL select queries, each of them only returns fields with the names from $fields<br>
<b>param:</b> string $fields comma-separated list of fields (used only by some DB engines)<br>
<b>return:</b> string SQL query that will return only values that are present in each of selects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="replace_all_text_supported" onClick="logFunction('replace_all_text_supported', 'moodle_database.php.source.html#l2303')" href="moodle_database.php.source.html#l2303">replace_all_text_supported</a>()&nbsp;&nbsp;
<a href="../../_functions/replace_all_text_supported.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this driver support tool_replace?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="replace_all_text" onClick="logFunction('replace_all_text', 'moodle_database.php.source.html#l2313')" href="moodle_database.php.source.html#l2313">replace_all_text</a>(<a href="../../_variables/table.html">$table</a>, database_column_info <a href="../../_variables/column.html">$column</a>, <a href="../../_variables/search.html">$search</a>, <a href="../../_variables/replace.html">$replace</a>)&nbsp;&nbsp;
<a href="../../_functions/replace_all_text.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Replace given text in all rows of column.<BR>
</b><BR><b>param:</b> string $table name of the table<br>
<b>param:</b> database_column_info $column<br>
<b>param:</b> string $search<br>
<b>param:</b> string $replace<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_temp_table_stats" onClick="logFunction('update_temp_table_stats', 'moodle_database.php.source.html#l2349')" href="moodle_database.php.source.html#l2349">update_temp_table_stats</a>()&nbsp;&nbsp;
<a href="../../_functions/update_temp_table_stats.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Analyze the data in temporary tables to force statistics collection after bulk data loads.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="transactions_supported" onClick="logFunction('transactions_supported', 'moodle_database.php.source.html#l2358')" href="moodle_database.php.source.html#l2358">transactions_supported</a>()&nbsp;&nbsp;
<a href="../../_functions/transactions_supported.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks and returns true if transactions are supported.<BR>
</b><BR>It is not responsible to run productions servers<BR>
on databases without transaction support ;-)<BR>
<BR>
Override in driver if needed.<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_transaction_started" onClick="logFunction('is_transaction_started', 'moodle_database.php.source.html#l2373')" href="moodle_database.php.source.html#l2373">is_transaction_started</a>()&nbsp;&nbsp;
<a href="../../_functions/is_transaction_started.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if a transaction is in progress.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="transactions_forbidden" onClick="logFunction('transactions_forbidden', 'moodle_database.php.source.html#l2381')" href="moodle_database.php.source.html#l2381">transactions_forbidden</a>()&nbsp;&nbsp;
<a href="../../_functions/transactions_forbidden.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This is a test that throws an exception if transaction in progress.<BR>
This test does not force rollback of active transactions.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="start_delegated_transaction" onClick="logFunction('start_delegated_transaction', 'moodle_database.php.source.html#l2393')" href="moodle_database.php.source.html#l2393">start_delegated_transaction</a>()&nbsp;&nbsp;
<a href="../../_functions/start_delegated_transaction.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>On DBs that support it, switch to transaction mode and begin a transaction<BR>
you'll need to ensure you call allow_commit() on the returned object<BR>
or your changes *will* be lost.<BR>
</b><BR>this is _very_ useful for massive updates<BR>
<BR>
Delegated database transactions can be nested, but only one actual database<BR>
transaction is used for the outer-most delegated transaction. This method<BR>
returns a transaction object which you should keep until the end of the<BR>
delegated transaction. The actual database transaction will<BR>
only be committed if all the nested delegated transactions commit<BR>
successfully. If any part of the transaction rolls back then the whole<BR>
thing is rolled back.<BR>
<BR>
<b>return:</b> moodle_transaction<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="commit_delegated_transaction" onClick="logFunction('commit_delegated_transaction', 'moodle_database.php.source.html#l2426')" href="moodle_database.php.source.html#l2426">commit_delegated_transaction</a>(moodle_transaction <a href="../../_variables/transaction.html">$transaction</a>)&nbsp;&nbsp;
<a href="../../_functions/commit_delegated_transaction.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Indicates delegated transaction finished successfully.<BR>
The real database transaction is committed only if<BR>
all delegated transactions committed.<BR>
</b><BR><b>param:</b> moodle_transaction $transaction The transaction to commit<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="rollback_delegated_transaction" onClick="logFunction('rollback_delegated_transaction', 'moodle_database.php.source.html#l2474')" href="moodle_database.php.source.html#l2474">rollback_delegated_transaction</a>(moodle_transaction <a href="../../_variables/transaction.html">$transaction</a>, <a href="../../_variables/e.html">$e</a>)&nbsp;&nbsp;
<a href="../../_functions/rollback_delegated_transaction.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Call when delegated transaction failed, this rolls back<BR>
all delegated transactions up to the top most level.<BR>
</b><BR>In many cases you do not need to call this method manually,<BR>
because all open delegated transactions are rolled back<BR>
automatically if exceptions not caught.<BR>
<BR>
<b>param:</b> moodle_transaction $transaction An instance of a moodle_transaction.<br>
<b>param:</b> Exception|Throwable $e The related exception/throwable to this transaction rollback.<br>
<b>return:</b> void This does not return, instead the exception passed in will be rethrown.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="force_transaction_rollback" onClick="logFunction('force_transaction_rollback', 'moodle_database.php.source.html#l2527')" href="moodle_database.php.source.html#l2527">force_transaction_rollback</a>()&nbsp;&nbsp;
<a href="../../_functions/force_transaction_rollback.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Force rollback of all delegated transaction.<BR>
Does not throw any exceptions and does not log anything.<BR>
</b><BR>This method should be used only from default exception handlers and other<BR>
core code.<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="session_lock_supported" onClick="logFunction('session_lock_supported', 'moodle_database.php.source.html#l2553')" href="moodle_database.php.source.html#l2553">session_lock_supported</a>()&nbsp;&nbsp;
<a href="../../_functions/session_lock_supported.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is session lock supported in this driver?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_session_lock" onClick="logFunction('get_session_lock', 'moodle_database.php.source.html#l2561')" href="moodle_database.php.source.html#l2561">get_session_lock</a>(<a href="../../_variables/rowid.html">$rowid</a>, <a href="../../_variables/timeout.html">$timeout</a>)&nbsp;&nbsp;
<a href="../../_functions/get_session_lock.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Obtains the session lock.<BR>
</b><BR><b>param:</b> int $rowid The id of the row with session record.<br>
<b>param:</b> int $timeout The maximum allowed time to wait for the lock in seconds.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="release_session_lock" onClick="logFunction('release_session_lock', 'moodle_database.php.source.html#l2572')" href="moodle_database.php.source.html#l2572">release_session_lock</a>(<a href="../../_variables/rowid.html">$rowid</a>)&nbsp;&nbsp;
<a href="../../_functions/release_session_lock.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Releases the session lock.<BR>
</b><BR><b>param:</b> int $rowid The id of the row with session record.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="perf_get_reads" onClick="logFunction('perf_get_reads', 'moodle_database.php.source.html#l2581')" href="moodle_database.php.source.html#l2581">perf_get_reads</a>()&nbsp;&nbsp;
<a href="../../_functions/perf_get_reads.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the number of reads done by this database.<BR>
</b><BR><b>return:</b> int Number of reads.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="perf_get_writes" onClick="logFunction('perf_get_writes', 'moodle_database.php.source.html#l2589')" href="moodle_database.php.source.html#l2589">perf_get_writes</a>()&nbsp;&nbsp;
<a href="../../_functions/perf_get_writes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the number of writes done by this database.<BR>
</b><BR><b>return:</b> int Number of writes.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="perf_get_queries" onClick="logFunction('perf_get_queries', 'moodle_database.php.source.html#l2597')" href="moodle_database.php.source.html#l2597">perf_get_queries</a>()&nbsp;&nbsp;
<a href="../../_functions/perf_get_queries.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the number of queries done by this database.<BR>
</b><BR><b>return:</b> int Number of queries.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="perf_get_queries_time" onClick="logFunction('perf_get_queries_time', 'moodle_database.php.source.html#l2605')" href="moodle_database.php.source.html#l2605">perf_get_queries_time</a>()&nbsp;&nbsp;
<a href="../../_functions/perf_get_queries_time.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Time waiting for the database engine to finish running all queries.<BR>
</b><BR><b>return:</b> float Number of seconds with microseconds<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
