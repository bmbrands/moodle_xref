<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/dml/mysqli_native_moodle_database.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/dml';
filename='mysqli_native_moodle_database.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/dml/</a> -> <a href="mysqli_native_moodle_database.php.html">mysqli_native_moodle_database.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="mysqli_native_moodle_database.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="mysqli_native_moodle_database.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Native mysqli class representing moodle database interface.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core_dml</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2008 Petr Skoda (http://skodak.org)</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../lib/dml/moodle_database.php.html" onMouseOver="reqPopup(event, 'moodle_database.php', '../../lib/dml/moodle_database.php')">(__DIR__.'/moodle_database.php')</a>;
<a name="l28"><span class="linenum">  28</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../lib/dml/mysqli_native_moodle_recordset.php.html" onMouseOver="reqPopup(event, 'mysqli_native_moodle_recordset.php', '../../lib/dml/mysqli_native_moodle_recordset.php')">(__DIR__.'/mysqli_native_moodle_recordset.php')</a>;
<a name="l29"><span class="linenum">  29</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../lib/dml/mysqli_native_moodle_temptables.php.html" onMouseOver="reqPopup(event, 'mysqli_native_moodle_temptables.php', '../../lib/dml/mysqli_native_moodle_temptables.php')">(__DIR__.'/mysqli_native_moodle_temptables.php')</a>;
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Native mysqli class representing moodle database interface.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @package    core_dml</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @copyright  2008 Petr Skoda (http://skodak.org)</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> */</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mysqli_native_moodle_database')" href="../../_classes/mysqli_native_moodle_database.html" onMouseOver="classPopup(event,'mysqli_native_moodle_database')">mysqli_native_moodle_database</a> extends moodle_database {
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">    /** @var mysqli $mysqli */</span>
<a name="l41"><span class="linenum">  41</span></a>      protected <a class="var it16442" onMouseOver="hilite(16442)" onMouseOut="lolite()" onClick="logVariable('mysqli')" href="../../_variables/mysqli.html">$mysqli</a> = null;
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">    /** @var bool is compressed row format supported cache */</span>
<a name="l43"><span class="linenum">  43</span></a>      protected <a class="var it32422" onMouseOver="hilite(32422)" onMouseOut="lolite()" onClick="logVariable('compressedrowformatsupported')" href="../../_variables/compressedrowformatsupported.html">$compressedrowformatsupported</a> = null;
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>      private <a class="var it32423" onMouseOver="hilite(32423)" onMouseOut="lolite()" onClick="logVariable('transactions_supported')" href="../../_variables/transactions_supported.html">$transactions_supported</a> = null;
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * Attempt to create the database</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * @param string $dbhost</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @param string $dbuser</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * @param string $dbpass</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @param string $dbname</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @return bool success</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     */</span>
<a name="l56"><span class="linenum">  56</span></a>      public function <a class="function" onClick="logFunction('create_database')" href="../../_functions/create_database.html" onMouseOver="funcPopup(event,'create_database')">create_database</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a>, <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('dbuser')" href="../../_variables/dbuser.html">$dbuser</a>, <a class="var it636" onMouseOver="hilite(636)" onMouseOut="lolite()" onClick="logVariable('dbpass')" href="../../_variables/dbpass.html">$dbpass</a>, <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('dbname')" href="../../_variables/dbname.html">$dbname</a>, array <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>=null) {
<a name="l57"><span class="linenum">  57</span></a>          <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('driverstatus')" href="../../_variables/driverstatus.html">$driverstatus</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('driver_installed')" href="../../_functions/driver_installed.html" onMouseOver="funcPopup(event,'driver_installed')">driver_installed</a>();
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          if (<a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('driverstatus')" href="../../_variables/driverstatus.html">$driverstatus</a> !== true) {
<a name="l60"><span class="linenum">  60</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_exception')" href="../../_classes/dml_exception.html" onMouseOver="classPopup(event,'dml_exception')">dml_exception</a>('dbdriverproblem', <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('driverstatus')" href="../../_variables/driverstatus.html">$driverstatus</a>);
<a name="l61"><span class="linenum">  61</span></a>          }
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>          if (!empty(<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbsocket'])
<a name="l64"><span class="linenum">  64</span></a>                  and (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbsocket'], '/') !== false or <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbsocket'], '\\') !== false)) {
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it22077" onMouseOver="hilite(22077)" onMouseOut="lolite()" onClick="logVariable('dbsocket')" href="../../_variables/dbsocket.html">$dbsocket</a> = <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbsocket'];
<a name="l66"><span class="linenum">  66</span></a>          } else {
<a name="l67"><span class="linenum">  67</span></a>              <a class="var it22077" onMouseOver="hilite(22077)" onMouseOut="lolite()" onClick="logVariable('dbsocket')" href="../../_variables/dbsocket.html">$dbsocket</a> = <a class="phpfunction" onClick="logFunction('ini_get')" href="../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('mysqli.default_socket');
<a name="l68"><span class="linenum">  68</span></a>          }
<a name="l69"><span class="linenum">  69</span></a>          if (empty(<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbport'])) {
<a name="l70"><span class="linenum">  70</span></a>              <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a> = (int)<a class="phpfunction" onClick="logFunction('ini_get')" href="../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('mysqli.default_port');
<a name="l71"><span class="linenum">  71</span></a>          } else {
<a name="l72"><span class="linenum">  72</span></a>              <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a> = (int)<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbport'];
<a name="l73"><span class="linenum">  73</span></a>          }
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">        // verify ini.get does not return nonsense</span>
<a name="l75"><span class="linenum">  75</span></a>          if (empty(<a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a>)) {
<a name="l76"><span class="linenum">  76</span></a>              <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a> = 3306;
<a name="l77"><span class="linenum">  77</span></a>          }
<a name="l78"><span class="linenum">  78</span></a>          <a class="phpfunction" onClick="logFunction('ob_start')" href="../../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('conn')" href="../../_variables/conn.html">$conn</a> = new <a class="phpfunction" onClick="logFunction('mysqli')" href="../../_functions/mysqli.html" onMouseOver="phpfuncPopup(event,'mysqli')">mysqli</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a>, <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('dbuser')" href="../../_variables/dbuser.html">$dbuser</a>, <a class="var it636" onMouseOver="hilite(636)" onMouseOut="lolite()" onClick="logVariable('dbpass')" href="../../_variables/dbpass.html">$dbpass</a>, '', <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a>, <a class="var it22077" onMouseOver="hilite(22077)" onMouseOut="lolite()" onClick="logVariable('dbsocket')" href="../../_variables/dbsocket.html">$dbsocket</a>); <span class="comment">// Connect without db</span>
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('dberr')" href="../../_variables/dberr.html">$dberr</a> = <a class="phpfunction" onClick="logFunction('ob_get_contents')" href="../../_functions/ob_get_contents.html" onMouseOver="phpfuncPopup(event,'ob_get_contents')">ob_get_contents</a>();
<a name="l81"><span class="linenum">  81</span></a>          <a class="phpfunction" onClick="logFunction('ob_end_clean')" href="../../_functions/ob_end_clean.html" onMouseOver="phpfuncPopup(event,'ob_end_clean')">ob_end_clean</a>();
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it21770" onMouseOver="hilite(21770)" onMouseOut="lolite()" onClick="logVariable('errorno')" href="../../_variables/errorno.html">$errorno</a> = @<a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('conn')" href="../../_variables/conn.html">$conn</a>-&gt;<a onClick="logVariable('connect_errno')" class="var it40630" onMouseOver="hilite(40630)" onMouseOut="lolite()" href="../../_variables/connect_errno.html">connect_errno</a>;
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>          if (<a class="var it21770" onMouseOver="hilite(21770)" onMouseOut="lolite()" onClick="logVariable('errorno')" href="../../_variables/errorno.html">$errorno</a> !== 0) {
<a name="l85"><span class="linenum">  85</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_connection_exception')" href="../../_classes/dml_connection_exception.html" onMouseOver="classPopup(event,'dml_connection_exception')">dml_connection_exception</a>(<a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('dberr')" href="../../_variables/dberr.html">$dberr</a>);
<a name="l86"><span class="linenum">  86</span></a>          }
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>          if (isset(<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbcollation']) and <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbcollation'], 'utf8_') === 0) {
<a name="l89"><span class="linenum">  89</span></a>              <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>['dbcollation'];
<a name="l90"><span class="linenum">  90</span></a>          } else {
<a name="l91"><span class="linenum">  91</span></a>              <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = 'utf8_unicode_ci';
<a name="l92"><span class="linenum">  92</span></a>          }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('conn')" href="../../_variables/conn.html">$conn</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(&quot;CREATE DATABASE <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('dbname')" href="../../_variables/dbname.html">$dbname</a> DEFAULT CHARACTER SET utf8 DEFAULT COLLATE &quot;.<a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>);
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>          <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('conn')" href="../../_variables/conn.html">$conn</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>          if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l99"><span class="linenum">  99</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_exception')" href="../../_classes/dml_exception.html" onMouseOver="classPopup(event,'dml_exception')">dml_exception</a>('cannotcreatedb');
<a name="l100"><span class="linenum"> 100</span></a>          }
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>          return true;
<a name="l103"><span class="linenum"> 103</span></a>      }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>      <span class="comment">/**</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     * Detects if all needed PHP stuff installed.</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * Note: can be used before connect()</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * @return mixed true if ok, string if something</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     */</span>
<a name="l110"><span class="linenum"> 110</span></a>      public function <a class="function" onClick="logFunction('driver_installed')" href="../../_functions/driver_installed.html" onMouseOver="funcPopup(event,'driver_installed')">driver_installed</a>() {
<a name="l111"><span class="linenum"> 111</span></a>          if (!<a class="phpfunction" onClick="logFunction('extension_loaded')" href="../../_functions/extension_loaded.html" onMouseOver="phpfuncPopup(event,'extension_loaded')">extension_loaded</a>('mysqli')) {
<a name="l112"><span class="linenum"> 112</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mysqliextensionisnotpresentinphp', 'install');
<a name="l113"><span class="linenum"> 113</span></a>          }
<a name="l114"><span class="linenum"> 114</span></a>          return true;
<a name="l115"><span class="linenum"> 115</span></a>      }
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>      <span class="comment">/**</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     * Returns database family type - describes SQL dialect</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * Note: can be used before connect()</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     * @return string db family name (mysql, postgres, mssql, oracle, etc.)</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     */</span>
<a name="l122"><span class="linenum"> 122</span></a>      public function <a class="function" onClick="logFunction('get_dbfamily')" href="../../_functions/get_dbfamily.html" onMouseOver="funcPopup(event,'get_dbfamily')">get_dbfamily</a>() {
<a name="l123"><span class="linenum"> 123</span></a>          return 'mysql';
<a name="l124"><span class="linenum"> 124</span></a>      }
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      <span class="comment">/**</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * Returns more specific database driver type</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * Note: can be used before connect()</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @return string db type mysqli, pgsql, oci, mssql, sqlsrv</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     */</span>
<a name="l131"><span class="linenum"> 131</span></a>      protected function <a class="function" onClick="logFunction('get_dbtype')" href="../../_functions/get_dbtype.html" onMouseOver="funcPopup(event,'get_dbtype')">get_dbtype</a>() {
<a name="l132"><span class="linenum"> 132</span></a>          return 'mysqli';
<a name="l133"><span class="linenum"> 133</span></a>      }
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>      <span class="comment">/**</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     * Returns general database library name</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * Note: can be used before connect()</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * @return string db type pdo, native</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     */</span>
<a name="l140"><span class="linenum"> 140</span></a>      protected function <a class="function" onClick="logFunction('get_dblibrary')" href="../../_functions/get_dblibrary.html" onMouseOver="funcPopup(event,'get_dblibrary')">get_dblibrary</a>() {
<a name="l141"><span class="linenum"> 141</span></a>          return 'native';
<a name="l142"><span class="linenum"> 142</span></a>      }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>      <span class="comment">/**</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">     * Returns the current MySQL db engine.</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     *</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * This is an ugly workaround for MySQL default engine problems,</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * Moodle is designed to work best on ACID compliant databases</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * with full transaction support. Do not use MyISAM.</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     *</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     * @return string or null MySQL engine name</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     */</span>
<a name="l153"><span class="linenum"> 153</span></a>      public function <a class="function" onClick="logFunction('get_dbengine')" href="../../_functions/get_dbengine.html" onMouseOver="funcPopup(event,'get_dbengine')">get_dbengine</a>() {
<a name="l154"><span class="linenum"> 154</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbengine'])) {
<a name="l155"><span class="linenum"> 155</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbengine'];
<a name="l156"><span class="linenum"> 156</span></a>          }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('external')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/external.html">external</a>) {
<a name="l159"><span class="linenum"> 159</span></a>              return null;
<a name="l160"><span class="linenum"> 160</span></a>          }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = null;
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">        // Look for current engine of our config table (the first table that gets created),</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">        // so that we create all tables with the same engine.</span>
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT engine
<a name="l167"><span class="linenum"> 167</span></a>                    FROM INFORMATION_SCHEMA.TABLES
<a name="l168"><span class="linenum"> 168</span></a>                   WHERE table_schema = DATABASE() AND table_name = '{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}config'&quot;;
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l172"><span class="linenum"> 172</span></a>          if (<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l173"><span class="linenum"> 173</span></a>              <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = <a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['engine'];
<a name="l174"><span class="linenum"> 174</span></a>          }
<a name="l175"><span class="linenum"> 175</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>          if (<a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a>) {
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">            // Cache the result to improve performance.</span>
<a name="l179"><span class="linenum"> 179</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbengine'] = <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a>;
<a name="l180"><span class="linenum"> 180</span></a>              return <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a>;
<a name="l181"><span class="linenum"> 181</span></a>          }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">        // get the default database engine</span>
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT @@storage_engine&quot;;
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l188"><span class="linenum"> 188</span></a>          if (<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = <a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['@@storage_engine'];
<a name="l190"><span class="linenum"> 190</span></a>          }
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>          if (<a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> === 'MyISAM') {
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">            // we really do not want MyISAM for Moodle, InnoDB or XtraDB is a reasonable defaults if supported</span>
<a name="l195"><span class="linenum"> 195</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW STORAGE ENGINES&quot;;
<a name="l196"><span class="linenum"> 196</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l197"><span class="linenum"> 197</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l198"><span class="linenum"> 198</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l199"><span class="linenum"> 199</span></a>              <a class="var it25593" onMouseOver="hilite(25593)" onMouseOut="lolite()" onClick="logVariable('engines')" href="../../_variables/engines.html">$engines</a> = array();
<a name="l200"><span class="linenum"> 200</span></a>              while (<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l201"><span class="linenum"> 201</span></a>                  if (<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>['Support'] === 'YES' or <a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>['Support'] === 'DEFAULT') {
<a name="l202"><span class="linenum"> 202</span></a>                      <a class="var it25593" onMouseOver="hilite(25593)" onMouseOut="lolite()" onClick="logVariable('engines')" href="../../_variables/engines.html">$engines</a>[<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>['Engine']] = true;
<a name="l203"><span class="linenum"> 203</span></a>                  }
<a name="l204"><span class="linenum"> 204</span></a>              }
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l206"><span class="linenum"> 206</span></a>              if (isset(<a class="var it25593" onMouseOver="hilite(25593)" onMouseOut="lolite()" onClick="logVariable('engines')" href="../../_variables/engines.html">$engines</a>['InnoDB'])) {
<a name="l207"><span class="linenum"> 207</span></a>                  <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = 'InnoDB';
<a name="l208"><span class="linenum"> 208</span></a>              }
<a name="l209"><span class="linenum"> 209</span></a>              if (isset(<a class="var it25593" onMouseOver="hilite(25593)" onMouseOut="lolite()" onClick="logVariable('engines')" href="../../_variables/engines.html">$engines</a>['XtraDB'])) {
<a name="l210"><span class="linenum"> 210</span></a>                  <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = 'XtraDB';
<a name="l211"><span class="linenum"> 211</span></a>              }
<a name="l212"><span class="linenum"> 212</span></a>          }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // Cache the result to improve performance.</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbengine'] = <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a>;
<a name="l216"><span class="linenum"> 216</span></a>          return <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a>;
<a name="l217"><span class="linenum"> 217</span></a>      }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>      <span class="comment">/**</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * Returns the current MySQL db collation.</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     *</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * This is an ugly workaround for MySQL default collation problems.</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     *</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     * @return string or null MySQL collation name</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     */</span>
<a name="l226"><span class="linenum"> 226</span></a>      public function <a class="function" onClick="logFunction('get_dbcollation')" href="../../_functions/get_dbcollation.html" onMouseOver="funcPopup(event,'get_dbcollation')">get_dbcollation</a>() {
<a name="l227"><span class="linenum"> 227</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbcollation'])) {
<a name="l228"><span class="linenum"> 228</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbcollation'];
<a name="l229"><span class="linenum"> 229</span></a>          }
<a name="l230"><span class="linenum"> 230</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('external')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/external.html">external</a>) {
<a name="l231"><span class="linenum"> 231</span></a>              return null;
<a name="l232"><span class="linenum"> 232</span></a>          }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = null;
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">        // Look for current collation of our config table (the first table that gets created),</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">        // so that we create all tables with the same collation.</span>
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT collation_name
<a name="l239"><span class="linenum"> 239</span></a>                    FROM INFORMATION_SCHEMA.COLUMNS
<a name="l240"><span class="linenum"> 240</span></a>                   WHERE table_schema = DATABASE() AND table_name = '{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}config' AND column_name = 'value'&quot;;
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l244"><span class="linenum"> 244</span></a>          if (<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['collation_name'];
<a name="l246"><span class="linenum"> 246</span></a>          }
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>          if (!<a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>) {
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">            // Get the default database collation, but only if using UTF-8.</span>
<a name="l251"><span class="linenum"> 251</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT @@collation_database&quot;;
<a name="l252"><span class="linenum"> 252</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l253"><span class="linenum"> 253</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l254"><span class="linenum"> 254</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l255"><span class="linenum"> 255</span></a>              if (<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l256"><span class="linenum"> 256</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['@@collation_database'], 'utf8_') === 0) {
<a name="l257"><span class="linenum"> 257</span></a>                      <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['@@collation_database'];
<a name="l258"><span class="linenum"> 258</span></a>                  }
<a name="l259"><span class="linenum"> 259</span></a>              }
<a name="l260"><span class="linenum"> 260</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l261"><span class="linenum"> 261</span></a>          }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>          if (!<a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>) {
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">            // We want only utf8 compatible collations.</span>
<a name="l265"><span class="linenum"> 265</span></a>              <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = null;
<a name="l266"><span class="linenum"> 266</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW COLLATION WHERE Collation LIKE 'utf8\_%' AND Charset = 'utf8'&quot;;
<a name="l267"><span class="linenum"> 267</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l269"><span class="linenum"> 269</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l270"><span class="linenum"> 270</span></a>              while (<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l271"><span class="linenum"> 271</span></a>                  <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>['Collation'];
<a name="l272"><span class="linenum"> 272</span></a>                  if (<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>['Default']) === 'YES') {
<a name="l273"><span class="linenum"> 273</span></a>                      <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>['Collation'];
<a name="l274"><span class="linenum"> 274</span></a>                      break;
<a name="l275"><span class="linenum"> 275</span></a>                  }
<a name="l276"><span class="linenum"> 276</span></a>              }
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l278"><span class="linenum"> 278</span></a>          }
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">        // Cache the result to improve performance.</span>
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbcollation'] = <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>;
<a name="l282"><span class="linenum"> 282</span></a>          return <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>;
<a name="l283"><span class="linenum"> 283</span></a>      }
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>      <span class="comment">/**</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * Get the row format from the database schema.</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     *</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">     * @param string $table</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">     * @return string row_format name or null if not known or table does not exist.</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     */</span>
<a name="l291"><span class="linenum"> 291</span></a>      public function <a class="function" onClick="logFunction('get_row_format')" href="../../_functions/get_row_format.html" onMouseOver="funcPopup(event,'get_row_format')">get_row_format</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>) {
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('rowformat')" href="../../_variables/rowformat.html">$rowformat</a> = null;
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;real_escape_string(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT row_format
<a name="l295"><span class="linenum"> 295</span></a>                    FROM INFORMATION_SCHEMA.TABLES
<a name="l296"><span class="linenum"> 296</span></a>                   WHERE table_schema = DATABASE() AND table_name = '{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>'&quot;;
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l300"><span class="linenum"> 300</span></a>          if (<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l301"><span class="linenum"> 301</span></a>              <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('rowformat')" href="../../_variables/rowformat.html">$rowformat</a> = <a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['row_format'];
<a name="l302"><span class="linenum"> 302</span></a>          }
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>          return <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('rowformat')" href="../../_variables/rowformat.html">$rowformat</a>;
<a name="l306"><span class="linenum"> 306</span></a>      }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>      <span class="comment">/**</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * Is this database compatible with compressed row format?</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * This feature is necessary for support of large number of text</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * columns in InnoDB/XtraDB database.</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     *</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     * @param bool $cached use cached result</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     * @return bool true if table can be created or changed to compressed row format.</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     */</span>
<a name="l316"><span class="linenum"> 316</span></a>      public function <a class="function" onClick="logFunction('is_compressed_row_format_supported')" href="../../_functions/is_compressed_row_format_supported.html" onMouseOver="funcPopup(event,'is_compressed_row_format_supported')">is_compressed_row_format_supported</a>(<a class="var it23178" onMouseOver="hilite(23178)" onMouseOut="lolite()" onClick="logVariable('cached')" href="../../_variables/cached.html">$cached</a> = true) {
<a name="l317"><span class="linenum"> 317</span></a>          if (<a class="var it23178" onMouseOver="hilite(23178)" onMouseOut="lolite()" onClick="logVariable('cached')" href="../../_variables/cached.html">$cached</a> and isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a>)) {
<a name="l318"><span class="linenum"> 318</span></a>              return(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a>);
<a name="l319"><span class="linenum"> 319</span></a>          }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>          <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_dbengine')" href="../../_functions/get_dbengine.html" onMouseOver="funcPopup(event,'get_dbengine')">get_dbengine</a>());
<a name="l322"><span class="linenum"> 322</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_server_info')" href="../../_functions/get_server_info.html" onMouseOver="funcPopup(event,'get_server_info')">get_server_info</a>();
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>          if (<a class="phpfunction" onClick="logFunction('version_compare')" href="../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>['version'], '5.5.0') &lt; 0) {
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">            // MySQL 5.1 is not supported here because we cannot read the file format.</span>
<a name="l326"><span class="linenum"> 326</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = false;
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>          } else if (<a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> !== 'innodb' and <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> !== 'xtradb') {
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">            // Other engines are not supported, most probably not compatible.</span>
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = false;
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>          } else if (!<a class="var it31289" onMouseOver="hilite(31289)" onMouseOut="lolite()" onClick="logVariable('filepertable')" href="../../_variables/filepertable.html">$filepertable</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SHOW VARIABLES LIKE 'innodb_file_per_table'&quot;)) {
<a name="l333"><span class="linenum"> 333</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = false;
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>          } else if (<a class="var it31289" onMouseOver="hilite(31289)" onMouseOut="lolite()" onClick="logVariable('filepertable')" href="../../_variables/filepertable.html">$filepertable</a>-&gt;<a onClick="logVariable('value')" class="var it41838" onMouseOver="hilite(41838)" onMouseOut="lolite()" href="../../_variables/value.html">value</a> !== 'ON') {
<a name="l336"><span class="linenum"> 336</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = false;
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>          } else if (!<a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../../_variables/fileformat.html">$fileformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SHOW VARIABLES LIKE 'innodb_file_format'&quot;)) {
<a name="l339"><span class="linenum"> 339</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = false;
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>          } else  if (<a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../../_variables/fileformat.html">$fileformat</a>-&gt;<a onClick="logVariable('value')" class="var it41839" onMouseOver="hilite(41839)" onMouseOut="lolite()" href="../../_variables/value.html">value</a> !== 'Barracuda') {
<a name="l342"><span class="linenum"> 342</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = false;
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>          } else {
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">            // All the tests passed, we can safely use ROW_FORMAT=Compressed in sql statements.</span>
<a name="l346"><span class="linenum"> 346</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a> = true;
<a name="l347"><span class="linenum"> 347</span></a>          }
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('compressedrowformatsupported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/compressedrowformatsupported.html">compressedrowformatsupported</a>;
<a name="l350"><span class="linenum"> 350</span></a>      }
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>      <span class="comment">/**</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     * Returns localised database type name</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     * Note: can be used before connect()</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     * @return string</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     */</span>
<a name="l357"><span class="linenum"> 357</span></a>      public function <a class="function" onClick="logFunction('get_name')" href="../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() {
<a name="l358"><span class="linenum"> 358</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nativemysqli', 'install');
<a name="l359"><span class="linenum"> 359</span></a>      }
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>      <span class="comment">/**</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     * Returns localised database configuration help.</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     * Note: can be used before connect()</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     * @return string</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     */</span>
<a name="l366"><span class="linenum"> 366</span></a>      public function <a class="function" onClick="logFunction('get_configuration_help')" href="../../_functions/get_configuration_help.html" onMouseOver="funcPopup(event,'get_configuration_help')">get_configuration_help</a>() {
<a name="l367"><span class="linenum"> 367</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nativemysqlihelp', 'install');
<a name="l368"><span class="linenum"> 368</span></a>      }
<a name="l369"><span class="linenum"> 369</span></a>  
<a name="l370"><span class="linenum"> 370</span></a>      <span class="comment">/**</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     * Diagnose database and tables, this function is used</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">     * to verify database and driver settings, db engine types, etc.</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     *</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * @return string null means everything ok, string means problem found.</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     */</span>
<a name="l376"><span class="linenum"> 376</span></a>      public function <a class="function" onClick="logFunction('diagnose')" href="../../_functions/diagnose.html" onMouseOver="funcPopup(event,'diagnose')">diagnose</a>() {
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it32425" onMouseOver="hilite(32425)" onMouseOut="lolite()" onClick="logVariable('sloppymyisamfound')" href="../../_variables/sloppymyisamfound.html">$sloppymyisamfound</a> = false;
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', '\\_', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>);
<a name="l379"><span class="linenum"> 379</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>('x')
<a name="l380"><span class="linenum"> 380</span></a>                    FROM INFORMATION_SCHEMA.TABLES
<a name="l381"><span class="linenum"> 381</span></a>                   WHERE table_schema = DATABASE()
<a name="l382"><span class="linenum"> 382</span></a>                         AND table_name LIKE BINARY '<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>%'
<a name="l383"><span class="linenum"> 383</span></a>                         AND Engine = 'MyISAM'&quot;;
<a name="l384"><span class="linenum"> 384</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l387"><span class="linenum"> 387</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l388"><span class="linenum"> 388</span></a>              if (<a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l389"><span class="linenum"> 389</span></a>                  <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a>);
<a name="l390"><span class="linenum"> 390</span></a>                  if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>) {
<a name="l391"><span class="linenum"> 391</span></a>                      <a class="var it32425" onMouseOver="hilite(32425)" onMouseOut="lolite()" onClick="logVariable('sloppymyisamfound')" href="../../_variables/sloppymyisamfound.html">$sloppymyisamfound</a> = true;
<a name="l392"><span class="linenum"> 392</span></a>                  }
<a name="l393"><span class="linenum"> 393</span></a>              }
<a name="l394"><span class="linenum"> 394</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l395"><span class="linenum"> 395</span></a>          }
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>          if (<a class="var it32425" onMouseOver="hilite(32425)" onMouseOut="lolite()" onClick="logVariable('sloppymyisamfound')" href="../../_variables/sloppymyisamfound.html">$sloppymyisamfound</a>) {
<a name="l398"><span class="linenum"> 398</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('myisamproblem', 'error');
<a name="l399"><span class="linenum"> 399</span></a>          } else {
<a name="l400"><span class="linenum"> 400</span></a>              return null;
<a name="l401"><span class="linenum"> 401</span></a>          }
<a name="l402"><span class="linenum"> 402</span></a>      }
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>      <span class="comment">/**</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     * Connect to db</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * Must be called before other methods.</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     * @param string $dbhost The database host.</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">     * @param string $dbuser The database username.</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">     * @param string $dbpass The database username's password.</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * @param string $dbname The name of the database being connected to.e</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * @param mixed $prefix string means moodle db prefix, false used for external databases where prefix not used</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * @param array $dboptions driver specific options</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * @return bool success</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     */</span>
<a name="l415"><span class="linenum"> 415</span></a>      public function <a class="function" onClick="logFunction('connect')" href="../../_functions/connect.html" onMouseOver="funcPopup(event,'connect')">connect</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a>, <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('dbuser')" href="../../_variables/dbuser.html">$dbuser</a>, <a class="var it636" onMouseOver="hilite(636)" onMouseOut="lolite()" onClick="logVariable('dbpass')" href="../../_variables/dbpass.html">$dbpass</a>, <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('dbname')" href="../../_variables/dbname.html">$dbname</a>, <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>, array <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>=null) {
<a name="l416"><span class="linenum"> 416</span></a>          <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('driverstatus')" href="../../_variables/driverstatus.html">$driverstatus</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('driver_installed')" href="../../_functions/driver_installed.html" onMouseOver="funcPopup(event,'driver_installed')">driver_installed</a>();
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>          if (<a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('driverstatus')" href="../../_variables/driverstatus.html">$driverstatus</a> !== true) {
<a name="l419"><span class="linenum"> 419</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_exception')" href="../../_classes/dml_exception.html" onMouseOver="classPopup(event,'dml_exception')">dml_exception</a>('dbdriverproblem', <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('driverstatus')" href="../../_variables/driverstatus.html">$driverstatus</a>);
<a name="l420"><span class="linenum"> 420</span></a>          }
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('store_settings')" href="../../_functions/store_settings.html" onMouseOver="funcPopup(event,'store_settings')">store_settings</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a>, <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('dbuser')" href="../../_variables/dbuser.html">$dbuser</a>, <a class="var it636" onMouseOver="hilite(636)" onMouseOut="lolite()" onClick="logVariable('dbpass')" href="../../_variables/dbpass.html">$dbpass</a>, <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('dbname')" href="../../_variables/dbname.html">$dbname</a>, <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>, <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../_variables/dboptions.html">$dboptions</a>);
<a name="l423"><span class="linenum"> 423</span></a>  
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">        // dbsocket is used ONLY if host is NULL or 'localhost',</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">        // you can not disable it because it is always tried if dbhost is 'localhost'</span>
<a name="l426"><span class="linenum"> 426</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbsocket'])
<a name="l427"><span class="linenum"> 427</span></a>                  and (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbsocket'], '/') !== false or <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbsocket'], '\\') !== false)) {
<a name="l428"><span class="linenum"> 428</span></a>              <a class="var it22077" onMouseOver="hilite(22077)" onMouseOut="lolite()" onClick="logVariable('dbsocket')" href="../../_variables/dbsocket.html">$dbsocket</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbsocket'];
<a name="l429"><span class="linenum"> 429</span></a>          } else {
<a name="l430"><span class="linenum"> 430</span></a>              <a class="var it22077" onMouseOver="hilite(22077)" onMouseOut="lolite()" onClick="logVariable('dbsocket')" href="../../_variables/dbsocket.html">$dbsocket</a> = <a class="phpfunction" onClick="logFunction('ini_get')" href="../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('mysqli.default_socket');
<a name="l431"><span class="linenum"> 431</span></a>          }
<a name="l432"><span class="linenum"> 432</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbport'])) {
<a name="l433"><span class="linenum"> 433</span></a>              <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a> = (int)<a class="phpfunction" onClick="logFunction('ini_get')" href="../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('mysqli.default_port');
<a name="l434"><span class="linenum"> 434</span></a>          } else {
<a name="l435"><span class="linenum"> 435</span></a>              <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a> = (int)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbport'];
<a name="l436"><span class="linenum"> 436</span></a>          }
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">        // verify ini.get does not return nonsense</span>
<a name="l438"><span class="linenum"> 438</span></a>          if (empty(<a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a>)) {
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a> = 3306;
<a name="l440"><span class="linenum"> 440</span></a>          }
<a name="l441"><span class="linenum"> 441</span></a>          if (<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a> and !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbpersist'])) {
<a name="l442"><span class="linenum"> 442</span></a>              <a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a> = &quot;p:<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a>&quot;;
<a name="l443"><span class="linenum"> 443</span></a>          }
<a name="l444"><span class="linenum"> 444</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a> = @new <a class="phpfunction" onClick="logFunction('mysqli')" href="../../_functions/mysqli.html" onMouseOver="phpfuncPopup(event,'mysqli')">mysqli</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('dbhost')" href="../../_variables/dbhost.html">$dbhost</a>, <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('dbuser')" href="../../_variables/dbuser.html">$dbuser</a>, <a class="var it636" onMouseOver="hilite(636)" onMouseOut="lolite()" onClick="logVariable('dbpass')" href="../../_variables/dbpass.html">$dbpass</a>, <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('dbname')" href="../../_variables/dbname.html">$dbname</a>, <a class="var it22602" onMouseOver="hilite(22602)" onMouseOut="lolite()" onClick="logVariable('dbport')" href="../../_variables/dbport.html">$dbport</a>, <a class="var it22077" onMouseOver="hilite(22077)" onMouseOut="lolite()" onClick="logVariable('dbsocket')" href="../../_variables/dbsocket.html">$dbsocket</a>);
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;connect_errno !== 0) {
<a name="l447"><span class="linenum"> 447</span></a>              <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('dberr')" href="../../_variables/dberr.html">$dberr</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;connect_error;
<a name="l448"><span class="linenum"> 448</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a> = null;
<a name="l449"><span class="linenum"> 449</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_connection_exception')" href="../../_classes/dml_connection_exception.html" onMouseOver="classPopup(event,'dml_connection_exception')">dml_connection_exception</a>(<a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('dberr')" href="../../_variables/dberr.html">$dberr</a>);
<a name="l450"><span class="linenum"> 450</span></a>          }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(&quot;--<a class="function" onClick="logFunction('set_charset')" href="../../_functions/set_charset.html" onMouseOver="funcPopup(event,'set_charset')">set_charset</a>()&quot;, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l453"><span class="linenum"> 453</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('set_charset')" href="../../_functions/set_charset.html" onMouseOver="funcPopup(event,'set_charset')">set_charset</a>('utf8');
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(true);
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">        // If available, enforce strict mode for the session. That guaranties</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">        // standard behaviour under some situations, avoiding some MySQL nasty</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">        // habits like truncating data or performing some transparent cast losses.</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">        // With strict mode enforced, Moodle DB layer will be consistently throwing</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // the corresponding exceptions as expected.</span>
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it6594" onMouseOver="hilite(6594)" onMouseOut="lolite()" onClick="logVariable('si')" href="../../_variables/si.html">$si</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_server_info')" href="../../_functions/get_server_info.html" onMouseOver="funcPopup(event,'get_server_info')">get_server_info</a>();
<a name="l462"><span class="linenum"> 462</span></a>          if (<a class="phpfunction" onClick="logFunction('version_compare')" href="../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="var it6594" onMouseOver="hilite(6594)" onMouseOut="lolite()" onClick="logVariable('si')" href="../../_variables/si.html">$si</a>['version'], '5.0.2', '&gt;=')) {
<a name="l463"><span class="linenum"> 463</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SET SESSION sql_mode = 'STRICT_ALL_TABLES'&quot;;
<a name="l464"><span class="linenum"> 464</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l465"><span class="linenum"> 465</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l466"><span class="linenum"> 466</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l467"><span class="linenum"> 467</span></a>          }
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">        // Connection stabilised and configured, going to instantiate the temptables controller</span>
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('temptables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/temptables.html">temptables</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mysqli_native_moodle_temptables')" href="../../_classes/mysqli_native_moodle_temptables.html" onMouseOver="classPopup(event,'mysqli_native_moodle_temptables')">mysqli_native_moodle_temptables</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>          return true;
<a name="l473"><span class="linenum"> 473</span></a>      }
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>      <span class="comment">/**</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * Close database connection and release all resources</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * and memory (especially circular memory references).</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * Do NOT use connect() again, create a new instance if needed.</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     */</span>
<a name="l480"><span class="linenum"> 480</span></a>      public function <a class="function" onClick="logFunction('dispose')" href="../../_functions/dispose.html" onMouseOver="funcPopup(event,'dispose')">dispose</a>() {
<a name="l481"><span class="linenum"> 481</span></a>          parent::<a class="function" onClick="logFunction('dispose')" href="../../_functions/dispose.html" onMouseOver="funcPopup(event,'dispose')">dispose</a>(); <span class="comment">// Call parent dispose to write/close session and other common stuff before closing connection</span>
<a name="l482"><span class="linenum"> 482</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>) {
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l484"><span class="linenum"> 484</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a> = null;
<a name="l485"><span class="linenum"> 485</span></a>          }
<a name="l486"><span class="linenum"> 486</span></a>      }
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>      <span class="comment">/**</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     * Returns database server info array</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     * @return array Array containing 'description' and 'version' info</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     */</span>
<a name="l492"><span class="linenum"> 492</span></a>      public function <a class="function" onClick="logFunction('get_server_info')" href="../../_functions/get_server_info.html" onMouseOver="funcPopup(event,'get_server_info')">get_server_info</a>() {
<a name="l493"><span class="linenum"> 493</span></a>          return array('description'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;server_info, 'version'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;server_info);
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>      <span class="comment">/**</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     * Returns supported query parameter types</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * @return int bitmask of accepted SQL_PARAMS_*</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     */</span>
<a name="l500"><span class="linenum"> 500</span></a>      protected function <a class="function" onClick="logFunction('allowed_param_types')" href="../../_functions/allowed_param_types.html" onMouseOver="funcPopup(event,'allowed_param_types')">allowed_param_types</a>() {
<a name="l501"><span class="linenum"> 501</span></a>          return <a class="constant" onClick="logConstant('SQL_PARAMS_QM')" href="../../_constants/SQL_PARAMS_QM.html" onMouseOver="constPopup(event,'SQL_PARAMS_QM')">SQL_PARAMS_QM</a>;
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>      <span class="comment">/**</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * Returns last error reported by database engine.</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     * @return string error message</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     */</span>
<a name="l508"><span class="linenum"> 508</span></a>      public function <a class="function" onClick="logFunction('get_last_error')" href="../../_functions/get_last_error.html" onMouseOver="funcPopup(event,'get_last_error')">get_last_error</a>() {
<a name="l509"><span class="linenum"> 509</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;error;
<a name="l510"><span class="linenum"> 510</span></a>      }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>      <span class="comment">/**</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     * Return tables in database WITHOUT current prefix</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     * @param bool $usecache if true, returns list of cached tables.</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     * @return array of table names in lowercase and without prefix</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     */</span>
<a name="l517"><span class="linenum"> 517</span></a>      public function <a class="function" onClick="logFunction('get_tables')" href="../../_functions/get_tables.html" onMouseOver="funcPopup(event,'get_tables')">get_tables</a>(<a class="var it97" onMouseOver="hilite(97)" onMouseOut="lolite()" onClick="logVariable('usecache')" href="../../_variables/usecache.html">$usecache</a>=true) {
<a name="l518"><span class="linenum"> 518</span></a>          if (<a class="var it97" onMouseOver="hilite(97)" onMouseOut="lolite()" onClick="logVariable('usecache')" href="../../_variables/usecache.html">$usecache</a> and <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a> !== null) {
<a name="l519"><span class="linenum"> 519</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a>;
<a name="l520"><span class="linenum"> 520</span></a>          }
<a name="l521"><span class="linenum"> 521</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a> = array();
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', '\\_', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>);
<a name="l523"><span class="linenum"> 523</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW TABLES LIKE '<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>%'&quot;;
<a name="l524"><span class="linenum"> 524</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l526"><span class="linenum"> 526</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it457" onMouseOver="hilite(457)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a> = <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>);
<a name="l528"><span class="linenum"> 528</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l529"><span class="linenum"> 529</span></a>              while (<a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l530"><span class="linenum"> 530</span></a>                  <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a>);
<a name="l531"><span class="linenum"> 531</span></a>                  <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a>, <a class="var it457" onMouseOver="hilite(457)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a>);
<a name="l532"><span class="linenum"> 532</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a>[<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a>] = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a>;
<a name="l533"><span class="linenum"> 533</span></a>              }
<a name="l534"><span class="linenum"> 534</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l535"><span class="linenum"> 535</span></a>          }
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">        // Add the currently available temptables</span>
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('temptables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/temptables.html">temptables</a>-&gt;<a class="function" onClick="logFunction('get_temptables')" href="../../_functions/get_temptables.html" onMouseOver="funcPopup(event,'get_temptables')">get_temptables</a>());
<a name="l539"><span class="linenum"> 539</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/tables.html">tables</a>;
<a name="l540"><span class="linenum"> 540</span></a>      }
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>      <span class="comment">/**</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">     * Return table indexes - everything lowercased.</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     * @param string $table The table we want to get indexes from.</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     * @return array An associative array of indexes containing 'unique' flag and 'columns' being indexed</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     */</span>
<a name="l547"><span class="linenum"> 547</span></a>      public function <a class="function" onClick="logFunction('get_indexes')" href="../../_functions/get_indexes.html" onMouseOver="funcPopup(event,'get_indexes')">get_indexes</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>) {
<a name="l548"><span class="linenum"> 548</span></a>          <a class="var it1492" onMouseOver="hilite(1492)" onMouseOut="lolite()" onClick="logVariable('indexes')" href="../../_variables/indexes.html">$indexes</a> = array();
<a name="l549"><span class="linenum"> 549</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW INDEXES FROM {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>&quot;;
<a name="l550"><span class="linenum"> 550</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l551"><span class="linenum"> 551</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l552"><span class="linenum"> 552</span></a>          try {
<a name="l553"><span class="linenum"> 553</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l554"><span class="linenum"> 554</span></a>          } catch (dml_read_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l555"><span class="linenum"> 555</span></a>              return <a class="var it1492" onMouseOver="hilite(1492)" onMouseOut="lolite()" onClick="logVariable('indexes')" href="../../_variables/indexes.html">$indexes</a>; <span class="comment">// table does not exist - no indexes...</span>
<a name="l556"><span class="linenum"> 556</span></a>          }
<a name="l557"><span class="linenum"> 557</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l558"><span class="linenum"> 558</span></a>              while (<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_object()) {
<a name="l559"><span class="linenum"> 559</span></a>                  if (<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Key_name')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Key_name.html">Key_name</a> === 'PRIMARY') {
<a name="l560"><span class="linenum"> 560</span></a>                      continue;
<a name="l561"><span class="linenum"> 561</span></a>                  }
<a name="l562"><span class="linenum"> 562</span></a>                  if (!isset(<a class="var it1492" onMouseOver="hilite(1492)" onMouseOut="lolite()" onClick="logVariable('indexes')" href="../../_variables/indexes.html">$indexes</a>[<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Key_name')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Key_name.html">Key_name</a>])) {
<a name="l563"><span class="linenum"> 563</span></a>                      <a class="var it1492" onMouseOver="hilite(1492)" onMouseOut="lolite()" onClick="logVariable('indexes')" href="../../_variables/indexes.html">$indexes</a>[<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Key_name')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Key_name.html">Key_name</a>] = array('unique'=&gt;empty(<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Non_unique')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Non_unique.html">Non_unique</a>), 'columns'=&gt;array());
<a name="l564"><span class="linenum"> 564</span></a>                  }
<a name="l565"><span class="linenum"> 565</span></a>                  <a class="var it1492" onMouseOver="hilite(1492)" onMouseOut="lolite()" onClick="logVariable('indexes')" href="../../_variables/indexes.html">$indexes</a>[<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Key_name')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Key_name.html">Key_name</a>]['columns'][<a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Seq_in_index')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Seq_in_index.html">Seq_in_index</a>-1] = <a class="var it2733" onMouseOver="hilite(2733)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../_variables/res.html">$res</a>-&gt;<a onClick="logVariable('Column_name')" class="var it39519" onMouseOver="hilite(39519)" onMouseOut="lolite()" href="../../_variables/Column_name.html">Column_name</a>;
<a name="l566"><span class="linenum"> 566</span></a>              }
<a name="l567"><span class="linenum"> 567</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>          return <a class="var it1492" onMouseOver="hilite(1492)" onMouseOut="lolite()" onClick="logVariable('indexes')" href="../../_variables/indexes.html">$indexes</a>;
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      <span class="comment">/**</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * Returns detailed information about columns in table. This information is cached internally.</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     * @param string $table name</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * @param bool $usecache</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * @return database_column_info[] array of database_column_info objects indexed with column names</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     */</span>
<a name="l578"><span class="linenum"> 578</span></a>      public function <a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it97" onMouseOver="hilite(97)" onMouseOut="lolite()" onClick="logVariable('usecache')" href="../../_variables/usecache.html">$usecache</a>=true) {
<a name="l579"><span class="linenum"> 579</span></a>  
<a name="l580"><span class="linenum"> 580</span></a>          if (<a class="var it97" onMouseOver="hilite(97)" onMouseOut="lolite()" onClick="logVariable('usecache')" href="../../_variables/usecache.html">$usecache</a>) {
<a name="l581"><span class="linenum"> 581</span></a>              <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a> = array('dbfamily' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_dbfamily')" href="../../_functions/get_dbfamily.html" onMouseOver="funcPopup(event,'get_dbfamily')">get_dbfamily</a>(), 'settings' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_settings_hash')" href="../../_functions/get_settings_hash.html" onMouseOver="funcPopup(event,'get_settings_hash')">get_settings_hash</a>());
<a name="l582"><span class="linenum"> 582</span></a>              <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'databasemeta', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l583"><span class="linenum"> 583</span></a>              if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>)) {
<a name="l584"><span class="linenum"> 584</span></a>                  return <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l585"><span class="linenum"> 585</span></a>              }
<a name="l586"><span class="linenum"> 586</span></a>          }
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>          <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../_variables/structure.html">$structure</a> = array();
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT column_name, data_type, character_maximum_length, numeric_precision,
<a name="l591"><span class="linenum"> 591</span></a>                         numeric_scale, is_nullable, column_type, column_default, column_key, extra
<a name="l592"><span class="linenum"> 592</span></a>                    FROM information_schema.columns
<a name="l593"><span class="linenum"> 593</span></a>                   WHERE table_name = '&quot; . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>.<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> . &quot;'
<a name="l594"><span class="linenum"> 594</span></a>                         AND table_schema = '&quot; . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dbname.html">dbname</a> . &quot;'
<a name="l595"><span class="linenum"> 595</span></a>                ORDER BY ordinal_position&quot;;
<a name="l596"><span class="linenum"> 596</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l598"><span class="linenum"> 598</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(true); <span class="comment">// Don't want to throw anything here ever. MDL-30147</span>
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === false) {
<a name="l601"><span class="linenum"> 601</span></a>              return array();
<a name="l602"><span class="linenum"> 602</span></a>          }
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('num_rows')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/num_rows.html">num_rows</a> &gt; 0) {
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">            // standard table exists</span>
<a name="l606"><span class="linenum"> 606</span></a>              while (<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l607"><span class="linenum"> 607</span></a>                  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_column_info')" href="../../_functions/get_column_info.html" onMouseOver="funcPopup(event,'get_column_info')">get_column_info</a>((object)<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>);
<a name="l608"><span class="linenum"> 608</span></a>                  <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../_variables/structure.html">$structure</a>[<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('database_column_info')" href="../../_classes/database_column_info.html" onMouseOver="classPopup(event,'database_column_info')">database_column_info</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>);
<a name="l609"><span class="linenum"> 609</span></a>              }
<a name="l610"><span class="linenum"> 610</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>          } else {
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">            // temporary tables are not in information schema, let's try it the old way</span>
<a name="l614"><span class="linenum"> 614</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l615"><span class="linenum"> 615</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW COLUMNS FROM {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>&quot;;
<a name="l616"><span class="linenum"> 616</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l617"><span class="linenum"> 617</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l618"><span class="linenum"> 618</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(true);
<a name="l619"><span class="linenum"> 619</span></a>              if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === false) {
<a name="l620"><span class="linenum"> 620</span></a>                  return array();
<a name="l621"><span class="linenum"> 621</span></a>              }
<a name="l622"><span class="linenum"> 622</span></a>              while (<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l623"><span class="linenum"> 623</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a> = (object)<a class="phpfunction" onClick="logFunction('array_change_key_case')" href="../../_functions/array_change_key_case.html" onMouseOver="phpfuncPopup(event,'array_change_key_case')">array_change_key_case</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>, CASE_LOWER);
<a name="l624"><span class="linenum"> 624</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_name')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_name.html">column_name</a>              = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('field')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>; unset(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('field')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>);
<a name="l625"><span class="linenum"> 625</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>              = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>; unset(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>);
<a name="l626"><span class="linenum"> 626</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('character_maximum_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/character_maximum_length.html">character_maximum_length</a> = null;
<a name="l627"><span class="linenum"> 627</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a>        = null;
<a name="l628"><span class="linenum"> 628</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_scale')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_scale.html">numeric_scale</a>            = null;
<a name="l629"><span class="linenum"> 629</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('is_nullable')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/is_nullable.html">is_nullable</a>              = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('null')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/null.html">null</a>; unset(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('null')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/null.html">null</a>);
<a name="l630"><span class="linenum"> 630</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_default')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_default.html">column_default</a>           = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('default')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/default.html">default</a>; unset(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('default')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/default.html">default</a>);
<a name="l631"><span class="linenum"> 631</span></a>                  <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_key')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_key.html">column_key</a>               = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('key')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/key.html">key</a>; unset(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('default')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/default.html">default</a>);
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>                  if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/(enum|varchar)\((\d+)\)/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l634"><span class="linenum"> 634</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l635"><span class="linenum"> 635</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('character_maximum_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/character_maximum_length.html">character_maximum_length</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[2];
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/([a-z]*int[a-z]*)\((\d+)\)/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l638"><span class="linenum"> 638</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l639"><span class="linenum"> 639</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[2];
<a name="l640"><span class="linenum"> 640</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('max_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a> = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a>;
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>                      <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1]);
<a name="l643"><span class="linenum"> 643</span></a>                      if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'BIGINT') {
<a name="l644"><span class="linenum"> 644</span></a>                          <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 18;
<a name="l645"><span class="linenum"> 645</span></a>                      } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'INT' or <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'INTEGER') {
<a name="l646"><span class="linenum"> 646</span></a>                          <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 9;
<a name="l647"><span class="linenum"> 647</span></a>                      } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'MEDIUMINT') {
<a name="l648"><span class="linenum"> 648</span></a>                          <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 6;
<a name="l649"><span class="linenum"> 649</span></a>                      } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'SMALLINT') {
<a name="l650"><span class="linenum"> 650</span></a>                          <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 4;
<a name="l651"><span class="linenum"> 651</span></a>                      } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'TINYINT') {
<a name="l652"><span class="linenum"> 652</span></a>                          <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 2;
<a name="l653"><span class="linenum"> 653</span></a>                      } else {
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">                        // This should not happen.</span>
<a name="l655"><span class="linenum"> 655</span></a>                          <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 0;
<a name="l656"><span class="linenum"> 656</span></a>                      }
<a name="l657"><span class="linenum"> 657</span></a>                      if (<a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> &lt; <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('max_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a>) {
<a name="l658"><span class="linenum"> 658</span></a>                          <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('max_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a> = <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a>;
<a name="l659"><span class="linenum"> 659</span></a>                      }
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/(decimal)\((\d+),(\d+)\)/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l662"><span class="linenum"> 662</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l663"><span class="linenum"> 663</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[2];
<a name="l664"><span class="linenum"> 664</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_scale')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_scale.html">numeric_scale</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[3];
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/(double|float)(\((\d+),(\d+)\))?/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l667"><span class="linenum"> 667</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l668"><span class="linenum"> 668</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a> = isset(<a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[3]) ? <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[3] : null;
<a name="l669"><span class="linenum"> 669</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_scale')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_scale.html">numeric_scale</a> = isset(<a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[4]) ? <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[4] : null;
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/([a-z]*text)/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l672"><span class="linenum"> 672</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l673"><span class="linenum"> 673</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('character_maximum_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/character_maximum_length.html">character_maximum_length</a> = -1; <span class="comment">// unknown</span>
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/([a-z]*blob)/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l676"><span class="linenum"> 676</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l677"><span class="linenum"> 677</span></a>  
<a name="l678"><span class="linenum"> 678</span></a>                  } else {
<a name="l679"><span class="linenum"> 679</span></a>                      <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a> = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>;
<a name="l680"><span class="linenum"> 680</span></a>                  }
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>                  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_column_info')" href="../../_functions/get_column_info.html" onMouseOver="funcPopup(event,'get_column_info')">get_column_info</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>);
<a name="l683"><span class="linenum"> 683</span></a>                  <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../_variables/structure.html">$structure</a>[<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('database_column_info')" href="../../_classes/database_column_info.html" onMouseOver="classPopup(event,'database_column_info')">database_column_info</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>);
<a name="l684"><span class="linenum"> 684</span></a>              }
<a name="l685"><span class="linenum"> 685</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l686"><span class="linenum"> 686</span></a>          }
<a name="l687"><span class="linenum"> 687</span></a>  
<a name="l688"><span class="linenum"> 688</span></a>          if (<a class="var it97" onMouseOver="hilite(97)" onMouseOut="lolite()" onClick="logVariable('usecache')" href="../../_variables/usecache.html">$usecache</a>) {
<a name="l689"><span class="linenum"> 689</span></a>              <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../_variables/structure.html">$structure</a>);
<a name="l690"><span class="linenum"> 690</span></a>          }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>          return <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../_variables/structure.html">$structure</a>;
<a name="l693"><span class="linenum"> 693</span></a>      }
<a name="l694"><span class="linenum"> 694</span></a>  
<a name="l695"><span class="linenum"> 695</span></a>      <span class="comment">/**</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">     * Returns moodle column info for raw column from information schema.</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">     * @param stdClass $rawcolumn</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">     * @return stdClass standardised colum info</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">     */</span>
<a name="l700"><span class="linenum"> 700</span></a>      private function <a class="function" onClick="logFunction('get_column_info')" href="../../_functions/get_column_info.html" onMouseOver="funcPopup(event,'get_column_info')">get_column_info</a>(stdClass <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>) {
<a name="l701"><span class="linenum"> 701</span></a>          <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a> = (object)<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>;
<a name="l702"><span class="linenum"> 702</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = new stdClass();
<a name="l703"><span class="linenum"> 703</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>           = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_name')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_name.html">column_name</a>;
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>           = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a>;
<a name="l705"><span class="linenum"> 705</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a>      = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('mysqltype2moodletype')" href="../../_functions/mysqltype2moodletype.html" onMouseOver="funcPopup(event,'mysqltype2moodletype')">mysqltype2moodletype</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('data_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/data_type.html">data_type</a>);
<a name="l706"><span class="linenum"> 706</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('default_value')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/default_value.html">default_value</a>  = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_default')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_default.html">column_default</a>;
<a name="l707"><span class="linenum"> 707</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('has_default')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/has_default.html">has_default</a>    = !<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_default')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_default.html">column_default</a>);
<a name="l708"><span class="linenum"> 708</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('not_null')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/not_null.html">not_null</a>       = (<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('is_nullable')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/is_nullable.html">is_nullable</a> === 'NO');
<a name="l709"><span class="linenum"> 709</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('primary_key')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/primary_key.html">primary_key</a>    = (<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_key')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_key.html">column_key</a> === 'PRI');
<a name="l710"><span class="linenum"> 710</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('binary')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/binary.html">binary</a>         = false;
<a name="l711"><span class="linenum"> 711</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('unsigned')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/unsigned.html">unsigned</a>       = null;
<a name="l712"><span class="linenum"> 712</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('auto_increment')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/auto_increment.html">auto_increment</a> = false;
<a name="l713"><span class="linenum"> 713</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('unique')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/unique.html">unique</a>         = null;
<a name="l714"><span class="linenum"> 714</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>          = null;
<a name="l715"><span class="linenum"> 715</span></a>  
<a name="l716"><span class="linenum"> 716</span></a>          if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> === 'C') {
<a name="l717"><span class="linenum"> 717</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a> = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('character_maximum_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/character_maximum_length.html">character_maximum_length</a>;
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>          } else if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> === 'I') {
<a name="l720"><span class="linenum"> 720</span></a>              if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('primary_key')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/primary_key.html">primary_key</a>) {
<a name="l721"><span class="linenum"> 721</span></a>                  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> = 'R';
<a name="l722"><span class="linenum"> 722</span></a>                  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('unique')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/unique.html">unique</a>    = true;
<a name="l723"><span class="linenum"> 723</span></a>              }
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">            // Return number of decimals, not bytes here.</span>
<a name="l725"><span class="linenum"> 725</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a>    = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a>;
<a name="l726"><span class="linenum"> 726</span></a>              if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/([a-z]*int[a-z]*)\((\d+)\)/i', <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l727"><span class="linenum"> 727</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1]);
<a name="l728"><span class="linenum"> 728</span></a>                  if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'BIGINT') {
<a name="l729"><span class="linenum"> 729</span></a>                      <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 18;
<a name="l730"><span class="linenum"> 730</span></a>                  } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'INT' or <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'INTEGER') {
<a name="l731"><span class="linenum"> 731</span></a>                      <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 9;
<a name="l732"><span class="linenum"> 732</span></a>                  } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'MEDIUMINT') {
<a name="l733"><span class="linenum"> 733</span></a>                      <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 6;
<a name="l734"><span class="linenum"> 734</span></a>                  } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'SMALLINT') {
<a name="l735"><span class="linenum"> 735</span></a>                      <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 4;
<a name="l736"><span class="linenum"> 736</span></a>                  } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> === 'TINYINT') {
<a name="l737"><span class="linenum"> 737</span></a>                      <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 2;
<a name="l738"><span class="linenum"> 738</span></a>                  } else {
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">                    // This should not happen.</span>
<a name="l740"><span class="linenum"> 740</span></a>                      <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> = 0;
<a name="l741"><span class="linenum"> 741</span></a>                  }
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">                // It is possible that display precision is different from storage type length,</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">                // always use the smaller value to make sure our data fits.</span>
<a name="l744"><span class="linenum"> 744</span></a>                  if (<a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a> &lt; <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a>) {
<a name="l745"><span class="linenum"> 745</span></a>                      <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a> = <a class="var it2654" onMouseOver="hilite(2654)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../../_variables/maxlength.html">$maxlength</a>;
<a name="l746"><span class="linenum"> 746</span></a>                  }
<a name="l747"><span class="linenum"> 747</span></a>              }
<a name="l748"><span class="linenum"> 748</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('unsigned')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/unsigned.html">unsigned</a>      = (<a class="phpfunction" onClick="logFunction('stripos')" href="../../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, 'unsigned') !== false);
<a name="l749"><span class="linenum"> 749</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('auto_increment')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/auto_increment.html">auto_increment</a>= (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('extra')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/extra.html">extra</a>, 'auto_increment') !== false);
<a name="l750"><span class="linenum"> 750</span></a>  
<a name="l751"><span class="linenum"> 751</span></a>          } else if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> === 'N') {
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a>    = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_precision')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_precision.html">numeric_precision</a>;
<a name="l753"><span class="linenum"> 753</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>         = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('numeric_scale')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/numeric_scale.html">numeric_scale</a>;
<a name="l754"><span class="linenum"> 754</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('unsigned')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/unsigned.html">unsigned</a>      = (<a class="phpfunction" onClick="logFunction('stripos')" href="../../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('column_type')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/column_type.html">column_type</a>, 'unsigned') !== false);
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>          } else if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> === 'X') {
<a name="l757"><span class="linenum"> 757</span></a>              if (&quot;<a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('character_maximum_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/character_maximum_length.html">character_maximum_length</a>&quot; === '4294967295') { // watch out for PHP max int limits!
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">                // means maximum moodle size for text column, in other drivers it may also mean unknown size</span>
<a name="l759"><span class="linenum"> 759</span></a>                  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a> = -1;
<a name="l760"><span class="linenum"> 760</span></a>              } else {
<a name="l761"><span class="linenum"> 761</span></a>                  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a> = <a class="var it12574" onMouseOver="hilite(12574)" onMouseOut="lolite()" onClick="logVariable('rawcolumn')" href="../../_variables/rawcolumn.html">$rawcolumn</a>-&gt;<a onClick="logVariable('character_maximum_length')" class="var it41837" onMouseOver="hilite(41837)" onMouseOut="lolite()" href="../../_variables/character_maximum_length.html">character_maximum_length</a>;
<a name="l762"><span class="linenum"> 762</span></a>              }
<a name="l763"><span class="linenum"> 763</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('primary_key')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/primary_key.html">primary_key</a>   = false;
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>          } else if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('meta_type')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> === 'B') {
<a name="l766"><span class="linenum"> 766</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('max_length')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a>    = -1;
<a name="l767"><span class="linenum"> 767</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('primary_key')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/primary_key.html">primary_key</a>   = false;
<a name="l768"><span class="linenum"> 768</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('binary')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/binary.html">binary</a>        = true;
<a name="l769"><span class="linenum"> 769</span></a>          }
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>          return <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l772"><span class="linenum"> 772</span></a>      }
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>      <span class="comment">/**</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">     * Normalise column type.</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">     * @param string $mysql_type</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">     * @return string one character</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     * @throws dml_exception</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     */</span>
<a name="l780"><span class="linenum"> 780</span></a>      private function <a class="function" onClick="logFunction('mysqltype2moodletype')" href="../../_functions/mysqltype2moodletype.html" onMouseOver="funcPopup(event,'mysqltype2moodletype')">mysqltype2moodletype</a>(<a class="var it32437" onMouseOver="hilite(32437)" onMouseOut="lolite()" onClick="logVariable('mysql_type')" href="../../_variables/mysql_type.html">$mysql_type</a>) {
<a name="l781"><span class="linenum"> 781</span></a>          <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = null;
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>          switch(<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it32437" onMouseOver="hilite(32437)" onMouseOut="lolite()" onClick="logVariable('mysql_type')" href="../../_variables/mysql_type.html">$mysql_type</a>)) {
<a name="l784"><span class="linenum"> 784</span></a>              case 'BIT':
<a name="l785"><span class="linenum"> 785</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'L';
<a name="l786"><span class="linenum"> 786</span></a>                  break;
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>              case 'TINYINT':
<a name="l789"><span class="linenum"> 789</span></a>              case 'SMALLINT':
<a name="l790"><span class="linenum"> 790</span></a>              case 'MEDIUMINT':
<a name="l791"><span class="linenum"> 791</span></a>              case 'INT':
<a name="l792"><span class="linenum"> 792</span></a>              case 'INTEGER':
<a name="l793"><span class="linenum"> 793</span></a>              case 'BIGINT':
<a name="l794"><span class="linenum"> 794</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'I';
<a name="l795"><span class="linenum"> 795</span></a>                  break;
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>              case 'FLOAT':
<a name="l798"><span class="linenum"> 798</span></a>              case 'DOUBLE':
<a name="l799"><span class="linenum"> 799</span></a>              case 'DECIMAL':
<a name="l800"><span class="linenum"> 800</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'N';
<a name="l801"><span class="linenum"> 801</span></a>                  break;
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>              case 'CHAR':
<a name="l804"><span class="linenum"> 804</span></a>              case 'ENUM':
<a name="l805"><span class="linenum"> 805</span></a>              case 'SET':
<a name="l806"><span class="linenum"> 806</span></a>              case 'VARCHAR':
<a name="l807"><span class="linenum"> 807</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'C';
<a name="l808"><span class="linenum"> 808</span></a>                  break;
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>              case 'TINYTEXT':
<a name="l811"><span class="linenum"> 811</span></a>              case 'TEXT':
<a name="l812"><span class="linenum"> 812</span></a>              case 'MEDIUMTEXT':
<a name="l813"><span class="linenum"> 813</span></a>              case 'LONGTEXT':
<a name="l814"><span class="linenum"> 814</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'X';
<a name="l815"><span class="linenum"> 815</span></a>                  break;
<a name="l816"><span class="linenum"> 816</span></a>  
<a name="l817"><span class="linenum"> 817</span></a>              case 'BINARY':
<a name="l818"><span class="linenum"> 818</span></a>              case 'VARBINARY':
<a name="l819"><span class="linenum"> 819</span></a>              case 'BLOB':
<a name="l820"><span class="linenum"> 820</span></a>              case 'TINYBLOB':
<a name="l821"><span class="linenum"> 821</span></a>              case 'MEDIUMBLOB':
<a name="l822"><span class="linenum"> 822</span></a>              case 'LONGBLOB':
<a name="l823"><span class="linenum"> 823</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'B';
<a name="l824"><span class="linenum"> 824</span></a>                  break;
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>              case 'DATE':
<a name="l827"><span class="linenum"> 827</span></a>              case 'TIME':
<a name="l828"><span class="linenum"> 828</span></a>              case 'DATETIME':
<a name="l829"><span class="linenum"> 829</span></a>              case 'TIMESTAMP':
<a name="l830"><span class="linenum"> 830</span></a>              case 'YEAR':
<a name="l831"><span class="linenum"> 831</span></a>                  <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'D';
<a name="l832"><span class="linenum"> 832</span></a>                  break;
<a name="l833"><span class="linenum"> 833</span></a>          }
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>          if (!<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l836"><span class="linenum"> 836</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_exception')" href="../../_classes/dml_exception.html" onMouseOver="classPopup(event,'dml_exception')">dml_exception</a>('invalidmysqlnativetype', <a class="var it32437" onMouseOver="hilite(32437)" onMouseOut="lolite()" onClick="logVariable('mysql_type')" href="../../_variables/mysql_type.html">$mysql_type</a>);
<a name="l837"><span class="linenum"> 837</span></a>          }
<a name="l838"><span class="linenum"> 838</span></a>          return <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>;
<a name="l839"><span class="linenum"> 839</span></a>      }
<a name="l840"><span class="linenum"> 840</span></a>  
<a name="l841"><span class="linenum"> 841</span></a>      <span class="comment">/**</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">     * Normalise values based in RDBMS dependencies (booleans, LOBs...)</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">     *</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">     * @param database_column_info $column column metadata corresponding with the value we are going to normalise</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">     * @param mixed $value value we are going to normalise</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">     * @return mixed the normalised value</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">     */</span>
<a name="l848"><span class="linenum"> 848</span></a>      protected function <a class="function" onClick="logFunction('normalise_value')" href="../../_functions/normalise_value.html" onMouseOver="funcPopup(event,'normalise_value')">normalise_value</a>(<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l849"><span class="linenum"> 849</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('detect_objects')" href="../../_functions/detect_objects.html" onMouseOver="funcPopup(event,'detect_objects')">detect_objects</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l850"><span class="linenum"> 850</span></a>  
<a name="l851"><span class="linenum"> 851</span></a>          if (<a class="phpfunction" onClick="logFunction('is_bool')" href="../../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>)) { // Always, convert boolean to int
<a name="l852"><span class="linenum"> 852</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = (int)<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l853"><span class="linenum"> 853</span></a>  
<a name="l854"><span class="linenum"> 854</span></a>          } else if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> === '') {
<a name="l855"><span class="linenum"> 855</span></a>              if (<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>-&gt;<a onClick="logVariable('meta_type')" class="var it40145" onMouseOver="hilite(40145)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> == 'I' or <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>-&gt;<a onClick="logVariable('meta_type')" class="var it40145" onMouseOver="hilite(40145)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> == 'F' or <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>-&gt;<a onClick="logVariable('meta_type')" class="var it40145" onMouseOver="hilite(40145)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> == 'N') {
<a name="l856"><span class="linenum"> 856</span></a>                  <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = 0; <span class="comment">// prevent '' problems in numeric fields</span>
<a name="l857"><span class="linenum"> 857</span></a>              }
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">        // Any float value being stored in varchar or text field is converted to string to avoid</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">        // any implicit conversion by MySQL</span>
<a name="l860"><span class="linenum"> 860</span></a>          } else if (<a class="phpfunction" onClick="logFunction('is_float')" href="../../_functions/is_float.html" onMouseOver="phpfuncPopup(event,'is_float')">is_float</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) and (<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>-&gt;<a onClick="logVariable('meta_type')" class="var it40145" onMouseOver="hilite(40145)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> == 'C' or <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>-&gt;<a onClick="logVariable('meta_type')" class="var it40145" onMouseOver="hilite(40145)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a> == 'X')) {
<a name="l861"><span class="linenum"> 861</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = &quot;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>&quot;;
<a name="l862"><span class="linenum"> 862</span></a>          }
<a name="l863"><span class="linenum"> 863</span></a>          return <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>      <span class="comment">/**</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     * Is this database compatible with utf8?</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     * @return bool</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">     */</span>
<a name="l870"><span class="linenum"> 870</span></a>      public function <a class="function" onClick="logFunction('setup_is_unicodedb')" href="../../_functions/setup_is_unicodedb.html" onMouseOver="funcPopup(event,'setup_is_unicodedb')">setup_is_unicodedb</a>() {
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">        // All new tables are created with this collation, we just have to make sure it is utf8 compatible,</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">        // if config table already exists it has this collation too.</span>
<a name="l873"><span class="linenum"> 873</span></a>          <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_dbcollation')" href="../../_functions/get_dbcollation.html" onMouseOver="funcPopup(event,'get_dbcollation')">get_dbcollation</a>();
<a name="l874"><span class="linenum"> 874</span></a>  
<a name="l875"><span class="linenum"> 875</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW COLLATION WHERE Collation ='<a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>' AND Charset = 'utf8'&quot;;
<a name="l876"><span class="linenum"> 876</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l877"><span class="linenum"> 877</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l878"><span class="linenum"> 878</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l879"><span class="linenum"> 879</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l880"><span class="linenum"> 880</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = true;
<a name="l881"><span class="linenum"> 881</span></a>          } else {
<a name="l882"><span class="linenum"> 882</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = false;
<a name="l883"><span class="linenum"> 883</span></a>          }
<a name="l884"><span class="linenum"> 884</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>          return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l887"><span class="linenum"> 887</span></a>      }
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>      <span class="comment">/**</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     * Do NOT use in code, to be used by database_manager only!</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">     * @param string|array $sql query</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     * @return bool true</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">     * @throws ddl_change_structure_exception A DDL specific exception is thrown for any errors.</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     */</span>
<a name="l895"><span class="linenum"> 895</span></a>      public function <a class="function" onClick="logFunction('change_database_structure')" href="../../_functions/change_database_structure.html" onMouseOver="funcPopup(event,'change_database_structure')">change_database_structure</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>) {
<a name="l896"><span class="linenum"> 896</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>(); <span class="comment">// Includes DDL exceptions classes ;-)</span>
<a name="l897"><span class="linenum"> 897</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>)) {
<a name="l898"><span class="linenum"> 898</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n;\n&quot;, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l899"><span class="linenum"> 899</span></a>          }
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>          try {
<a name="l902"><span class="linenum"> 902</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_STRUCTURE')" href="../../_constants/SQL_QUERY_STRUCTURE.html" onMouseOver="constPopup(event,'SQL_QUERY_STRUCTURE')">SQL_QUERY_STRUCTURE</a>);
<a name="l903"><span class="linenum"> 903</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;multi_query(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l904"><span class="linenum"> 904</span></a>              if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === false) {
<a name="l905"><span class="linenum"> 905</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(false);
<a name="l906"><span class="linenum"> 906</span></a>              }
<a name="l907"><span class="linenum"> 907</span></a>              while (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;more_results()) {
<a name="l908"><span class="linenum"> 908</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;next_result();
<a name="l909"><span class="linenum"> 909</span></a>                  if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === false) {
<a name="l910"><span class="linenum"> 910</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(false);
<a name="l911"><span class="linenum"> 911</span></a>                  }
<a name="l912"><span class="linenum"> 912</span></a>              }
<a name="l913"><span class="linenum"> 913</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(true);
<a name="l914"><span class="linenum"> 914</span></a>          } catch (ddl_change_structure_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l915"><span class="linenum"> 915</span></a>              while (@<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;more_results()) {
<a name="l916"><span class="linenum"> 916</span></a>                  @<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;next_result();
<a name="l917"><span class="linenum"> 917</span></a>              }
<a name="l918"><span class="linenum"> 918</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reset_caches')" href="../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l919"><span class="linenum"> 919</span></a>              throw <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>;
<a name="l920"><span class="linenum"> 920</span></a>          }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reset_caches')" href="../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l923"><span class="linenum"> 923</span></a>          return true;
<a name="l924"><span class="linenum"> 924</span></a>      }
<a name="l925"><span class="linenum"> 925</span></a>  
<a name="l926"><span class="linenum"> 926</span></a>      <span class="comment">/**</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     * Very ugly hack which emulates bound parameters in queries</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     * because prepared statements do not use query cache.</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">     */</span>
<a name="l930"><span class="linenum"> 930</span></a>      protected function <a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null) {
<a name="l931"><span class="linenum"> 931</span></a>          if (empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l932"><span class="linenum"> 932</span></a>              return <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>;
<a name="l933"><span class="linenum"> 933</span></a>          }
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment">        // ok, we have verified sql statement with ? and correct number of params</span>
<a name="l935"><span class="linenum"> 935</span></a>          <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('?', <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>));
<a name="l936"><span class="linenum"> 936</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../../_variables/parts.html">$parts</a>);
<a name="l937"><span class="linenum"> 937</span></a>          foreach (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> as <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>) {
<a name="l938"><span class="linenum"> 938</span></a>              if (<a class="phpfunction" onClick="logFunction('is_bool')" href="../../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>)) {
<a name="l939"><span class="linenum"> 939</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= (int)<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>;
<a name="l940"><span class="linenum"> 940</span></a>              } else if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>)) {
<a name="l941"><span class="linenum"> 941</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= 'NULL';
<a name="l942"><span class="linenum"> 942</span></a>              } else if (<a class="function" onClick="logFunction('is_number')" href="../../_functions/is_number.html" onMouseOver="funcPopup(event,'is_number')">is_number</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>)) {
<a name="l943"><span class="linenum"> 943</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;'&quot;.<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>.&quot;'&quot;; <span class="comment">// we have to always use strings because mysql is using weird automatic int casting</span>
<a name="l944"><span class="linenum"> 944</span></a>              } else if (<a class="phpfunction" onClick="logFunction('is_float')" href="../../_functions/is_float.html" onMouseOver="phpfuncPopup(event,'is_float')">is_float</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>)) {
<a name="l945"><span class="linenum"> 945</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>;
<a name="l946"><span class="linenum"> 946</span></a>              } else {
<a name="l947"><span class="linenum"> 947</span></a>                  <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;real_escape_string(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>);
<a name="l948"><span class="linenum"> 948</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;'<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>'&quot;;
<a name="l949"><span class="linenum"> 949</span></a>              }
<a name="l950"><span class="linenum"> 950</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../../_variables/parts.html">$parts</a>);
<a name="l951"><span class="linenum"> 951</span></a>          }
<a name="l952"><span class="linenum"> 952</span></a>          return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l953"><span class="linenum"> 953</span></a>      }
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>      <span class="comment">/**</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">     * Execute general sql query. Should be used only when no other method suitable.</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">     * Do NOT use this to make changes in db structure, use database_manager methods instead!</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">     * @param string $sql query</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment">     * @param array $params query parameters</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">     * @return bool true</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment">     */</span>
<a name="l963"><span class="linenum"> 963</span></a>      public function <a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null) {
<a name="l964"><span class="linenum"> 964</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, ';') !== false) {
<a name="l967"><span class="linenum"> 967</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('moodle_database::<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>() Multiple sql statements found or bound parameters not used properly in query!');
<a name="l968"><span class="linenum"> 968</span></a>          }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_UPDATE')" href="../../_constants/SQL_QUERY_UPDATE.html" onMouseOver="constPopup(event,'SQL_QUERY_UPDATE')">SQL_QUERY_UPDATE</a>);
<a name="l973"><span class="linenum"> 973</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>);
<a name="l974"><span class="linenum"> 974</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === true) {
<a name="l977"><span class="linenum"> 977</span></a>              return true;
<a name="l978"><span class="linenum"> 978</span></a>  
<a name="l979"><span class="linenum"> 979</span></a>          } else {
<a name="l980"><span class="linenum"> 980</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l981"><span class="linenum"> 981</span></a>              return true;
<a name="l982"><span class="linenum"> 982</span></a>          }
<a name="l983"><span class="linenum"> 983</span></a>      }
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>      <span class="comment">/**</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">     * Get a number of records as a moodle_recordset using a SQL statement.</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">     *</span>
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">     * Since this method is a little less readable, use of it should be restricted to</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">     * code where it's possible there might be large datasets being returned.  For known</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">     * small datasets use get_records_sql - it leads to simpler code.</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">     *</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">     * The return type is like:</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">     * @see function get_recordset.</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">     *</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment">     * @param string $sql the SQL select query to execute.</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">     * @param array $params array of sql parameters</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">     * @param int $limitfrom return a subset of records, starting at this point (optional, required if $limitnum is set).</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     * @param int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     * @return moodle_recordset instance</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment">     */</span>
<a name="l1002"><span class="linenum">1002</span></a>      public function <a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null, <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>=0) {
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('normalise_limit_from_num')" href="../../_functions/normalise_limit_from_num.html" onMouseOver="funcPopup(event,'normalise_limit_from_num')">normalise_limit_from_num</a>(<a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>);
<a name="l1005"><span class="linenum">1005</span></a>  
<a name="l1006"><span class="linenum">1006</span></a>          if (<a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a> or <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>) {
<a name="l1007"><span class="linenum">1007</span></a>              if (<a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a> &lt; 1) {
<a name="l1008"><span class="linenum">1008</span></a>                  <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a> = &quot;18446744073709551615&quot;;
<a name="l1009"><span class="linenum">1009</span></a>              }
<a name="l1010"><span class="linenum">1010</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; LIMIT <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>&quot;;
<a name="l1011"><span class="linenum">1011</span></a>          }
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1014"><span class="linenum">1014</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1015"><span class="linenum">1015</span></a>  
<a name="l1016"><span class="linenum">1016</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_SELECT')" href="../../_constants/SQL_QUERY_SELECT.html" onMouseOver="constPopup(event,'SQL_QUERY_SELECT')">SQL_QUERY_SELECT</a>);
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">        // no MYSQLI_USE_RESULT here, it would block write ops on affected tables</span>
<a name="l1018"><span class="linenum">1018</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>, MYSQLI_STORE_RESULT);
<a name="l1019"><span class="linenum">1019</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1020"><span class="linenum">1020</span></a>  
<a name="l1021"><span class="linenum">1021</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_recordset')" href="../../_functions/create_recordset.html" onMouseOver="funcPopup(event,'create_recordset')">create_recordset</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1022"><span class="linenum">1022</span></a>      }
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>      <span class="comment">/**</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">     * Get all records from a table.</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">     *</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">     * This method works around potential memory problems and may improve performance,</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">     * this method may block access to table until the recordset is closed.</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">     *</span>
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment">     * @param string $table Name of database table.</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment">     * @return moodle_recordset A moodle_recordset instance {@link function get_recordset}.</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">     */</span>
<a name="l1034"><span class="linenum">1034</span></a>      public function <a class="function" onClick="logFunction('export_table_recordset')" href="../../_functions/export_table_recordset.html" onMouseOver="funcPopup(event,'export_table_recordset')">export_table_recordset</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>) {
<a name="l1035"><span class="linenum">1035</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_table_names')" href="../../_functions/fix_table_names.html" onMouseOver="funcPopup(event,'fix_table_names')">fix_table_names</a>(&quot;SELECT * FROM {{<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>}}&quot;);
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(), <a class="constant" onClick="logConstant('SQL_QUERY_SELECT')" href="../../_constants/SQL_QUERY_SELECT.html" onMouseOver="constPopup(event,'SQL_QUERY_SELECT')">SQL_QUERY_SELECT</a>);
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">        // MYSQLI_STORE_RESULT may eat all memory for large tables, unfortunately MYSQLI_USE_RESULT blocks other queries.</span>
<a name="l1039"><span class="linenum">1039</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, MYSQLI_USE_RESULT);
<a name="l1040"><span class="linenum">1040</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_recordset')" href="../../_functions/create_recordset.html" onMouseOver="funcPopup(event,'create_recordset')">create_recordset</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1043"><span class="linenum">1043</span></a>      }
<a name="l1044"><span class="linenum">1044</span></a>  
<a name="l1045"><span class="linenum">1045</span></a>      protected function <a class="function" onClick="logFunction('create_recordset')" href="../../_functions/create_recordset.html" onMouseOver="funcPopup(event,'create_recordset')">create_recordset</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l1046"><span class="linenum">1046</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('mysqli_native_moodle_recordset')" href="../../_classes/mysqli_native_moodle_recordset.html" onMouseOver="classPopup(event,'mysqli_native_moodle_recordset')">mysqli_native_moodle_recordset</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1047"><span class="linenum">1047</span></a>      }
<a name="l1048"><span class="linenum">1048</span></a>  
<a name="l1049"><span class="linenum">1049</span></a>      <span class="comment">/**</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">     * Get a number of records as an array of objects using a SQL statement.</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment">     *</span>
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment">     * Return value is like:</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">     * @see function get_records.</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     *</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     * @param string $sql the SQL select query to execute. The first column of this SELECT statement</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     *   must be a unique value (usually the 'id' field), as it will be used as the key of the</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     *   returned array.</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     * @param array $params array of sql parameters</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     * @param int $limitfrom return a subset of records, starting at this point (optional, required if $limitnum is set).</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">     * @param int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).</span>
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment">     * @return array of objects, or empty array if no records were found</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment">     */</span>
<a name="l1064"><span class="linenum">1064</span></a>      public function <a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null, <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>=0, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>=0) {
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('normalise_limit_from_num')" href="../../_functions/normalise_limit_from_num.html" onMouseOver="funcPopup(event,'normalise_limit_from_num')">normalise_limit_from_num</a>(<a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>);
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>          if (<a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a> or <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>) {
<a name="l1069"><span class="linenum">1069</span></a>              if (<a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a> &lt; 1) {
<a name="l1070"><span class="linenum">1070</span></a>                  <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a> = &quot;18446744073709551615&quot;;
<a name="l1071"><span class="linenum">1071</span></a>              }
<a name="l1072"><span class="linenum">1072</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; LIMIT <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>&quot;;
<a name="l1073"><span class="linenum">1073</span></a>          }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1076"><span class="linenum">1076</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1077"><span class="linenum">1077</span></a>  
<a name="l1078"><span class="linenum">1078</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_SELECT')" href="../../_constants/SQL_QUERY_SELECT.html" onMouseOver="constPopup(event,'SQL_QUERY_SELECT')">SQL_QUERY_SELECT</a>);
<a name="l1079"><span class="linenum">1079</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>, MYSQLI_STORE_RESULT);
<a name="l1080"><span class="linenum">1080</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1081"><span class="linenum">1081</span></a>  
<a name="l1082"><span class="linenum">1082</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = array();
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>          while(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l1085"><span class="linenum">1085</span></a>              <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('array_change_key_case')" href="../../_functions/array_change_key_case.html" onMouseOver="phpfuncPopup(event,'array_change_key_case')">array_change_key_case</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>, CASE_LOWER);
<a name="l1086"><span class="linenum">1086</span></a>              <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>  = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>);
<a name="l1087"><span class="linenum">1087</span></a>              if (isset(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>[<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>])) {
<a name="l1088"><span class="linenum">1088</span></a>                  <a class="var it6673" onMouseOver="hilite(6673)" onMouseOut="lolite()" onClick="logVariable('colname')" href="../../_variables/colname.html">$colname</a> = <a class="phpfunction" onClick="logFunction('key')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>);
<a name="l1089"><span class="linenum">1089</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Did you remember to make the first column something unique in your call to get_records? Duplicate value '<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>' found in column '<a class="var it6673" onMouseOver="hilite(6673)" onMouseOut="lolite()" onClick="logVariable('colname')" href="../../_variables/colname.html">$colname</a>'.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1090"><span class="linenum">1090</span></a>              }
<a name="l1091"><span class="linenum">1091</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>[<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>] = (object)<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>;
<a name="l1092"><span class="linenum">1092</span></a>          }
<a name="l1093"><span class="linenum">1093</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1094"><span class="linenum">1094</span></a>  
<a name="l1095"><span class="linenum">1095</span></a>          return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1096"><span class="linenum">1096</span></a>      }
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>      <span class="comment">/**</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">     * Selects records and return values (first field) as an array using a SQL statement.</span>
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">     *</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">     * @param string $sql The SQL query</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">     * @param array $params array of sql parameters</span>
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">     * @return array of values</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment">     */</span>
<a name="l1106"><span class="linenum">1106</span></a>      public function <a class="function" onClick="logFunction('get_fieldset_sql')" href="../../_functions/get_fieldset_sql.html" onMouseOver="funcPopup(event,'get_fieldset_sql')">get_fieldset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null) {
<a name="l1107"><span class="linenum">1107</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1108"><span class="linenum">1108</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1109"><span class="linenum">1109</span></a>  
<a name="l1110"><span class="linenum">1110</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_SELECT')" href="../../_constants/SQL_QUERY_SELECT.html" onMouseOver="constPopup(event,'SQL_QUERY_SELECT')">SQL_QUERY_SELECT</a>);
<a name="l1111"><span class="linenum">1111</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>, MYSQLI_STORE_RESULT);
<a name="l1112"><span class="linenum">1112</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1113"><span class="linenum">1113</span></a>  
<a name="l1114"><span class="linenum">1114</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = array();
<a name="l1115"><span class="linenum">1115</span></a>  
<a name="l1116"><span class="linenum">1116</span></a>          while(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l1117"><span class="linenum">1117</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>[] = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>);
<a name="l1118"><span class="linenum">1118</span></a>          }
<a name="l1119"><span class="linenum">1119</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1120"><span class="linenum">1120</span></a>  
<a name="l1121"><span class="linenum">1121</span></a>          return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1122"><span class="linenum">1122</span></a>      }
<a name="l1123"><span class="linenum">1123</span></a>  
<a name="l1124"><span class="linenum">1124</span></a>      <span class="comment">/**</span>
<a name="l1125"><span class="linenum">1125</span></a>  <span class="comment">     * Insert new record into database, as fast as possible, no safety checks, lobs not supported.</span>
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">     * @param string $table name</span>
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">     * @param mixed $params data record as object or array</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">     * @param bool $returnit return it of inserted record</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">     * @param bool $bulk true means repeated inserts expected</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment">     * @param bool $customsequence true if 'id' included in $params, disables $returnid</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">     * @return bool|int true or new id</span>
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1133"><span class="linenum">1133</span></a>  <span class="comment">     */</span>
<a name="l1134"><span class="linenum">1134</span></a>      public function <a class="function" onClick="logFunction('insert_record_raw')" href="../../_functions/insert_record_raw.html" onMouseOver="funcPopup(event,'insert_record_raw')">insert_record_raw</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>=true, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('bulk')" href="../../_variables/bulk.html">$bulk</a>=false, <a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('customsequence')" href="../../_variables/customsequence.html">$customsequence</a>=false) {
<a name="l1135"><span class="linenum">1135</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1136"><span class="linenum">1136</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = (array)<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>;
<a name="l1137"><span class="linenum">1137</span></a>          }
<a name="l1138"><span class="linenum">1138</span></a>  
<a name="l1139"><span class="linenum">1139</span></a>          if (<a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('customsequence')" href="../../_variables/customsequence.html">$customsequence</a>) {
<a name="l1140"><span class="linenum">1140</span></a>              if (!isset(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['id'])) {
<a name="l1141"><span class="linenum">1141</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('moodle_database::<a class="function" onClick="logFunction('insert_record_raw')" href="../../_functions/insert_record_raw.html" onMouseOver="funcPopup(event,'insert_record_raw')">insert_record_raw</a>() id field must be specified if custom sequences used.');
<a name="l1142"><span class="linenum">1142</span></a>              }
<a name="l1143"><span class="linenum">1143</span></a>              <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a> = false;
<a name="l1144"><span class="linenum">1144</span></a>          } else {
<a name="l1145"><span class="linenum">1145</span></a>              unset(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['id']);
<a name="l1146"><span class="linenum">1146</span></a>          }
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>          if (empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1149"><span class="linenum">1149</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('moodle_database::<a class="function" onClick="logFunction('insert_record_raw')" href="../../_functions/insert_record_raw.html" onMouseOver="funcPopup(event,'insert_record_raw')">insert_record_raw</a>() no fields found.');
<a name="l1150"><span class="linenum">1150</span></a>          }
<a name="l1151"><span class="linenum">1151</span></a>  
<a name="l1152"><span class="linenum">1152</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>));
<a name="l1153"><span class="linenum">1153</span></a>          <a class="var it18813" onMouseOver="hilite(18813)" onMouseOut="lolite()" onClick="logVariable('qms')" href="../../_variables/qms.html">$qms</a>    = <a class="phpfunction" onClick="logFunction('array_fill')" href="../../_functions/array_fill.html" onMouseOver="phpfuncPopup(event,'array_fill')">array_fill</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>), '?');
<a name="l1154"><span class="linenum">1154</span></a>          <a class="var it18813" onMouseOver="hilite(18813)" onMouseOut="lolite()" onClick="logVariable('qms')" href="../../_variables/qms.html">$qms</a>    = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it18813" onMouseOver="hilite(18813)" onMouseOut="lolite()" onClick="logVariable('qms')" href="../../_variables/qms.html">$qms</a>);
<a name="l1155"><span class="linenum">1155</span></a>  
<a name="l1156"><span class="linenum">1156</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;INSERT INTO {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>) VALUES(<a class="var it18813" onMouseOver="hilite(18813)" onMouseOut="lolite()" onClick="logVariable('qms')" href="../../_variables/qms.html">$qms</a>)&quot;;
<a name="l1157"><span class="linenum">1157</span></a>  
<a name="l1158"><span class="linenum">1158</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1159"><span class="linenum">1159</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1160"><span class="linenum">1160</span></a>  
<a name="l1161"><span class="linenum">1161</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_INSERT')" href="../../_constants/SQL_QUERY_INSERT.html" onMouseOver="constPopup(event,'SQL_QUERY_INSERT')">SQL_QUERY_INSERT</a>);
<a name="l1162"><span class="linenum">1162</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>);
<a name="l1163"><span class="linenum">1163</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = @<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;insert_id; <span class="comment">// must be called before query_end() which may insert log into db</span>
<a name="l1164"><span class="linenum">1164</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>          if (!<a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('customsequence')" href="../../_variables/customsequence.html">$customsequence</a> and !<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l1167"><span class="linenum">1167</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_write_exception')" href="../../_classes/dml_write_exception.html" onMouseOver="classPopup(event,'dml_write_exception')">dml_write_exception</a>('unknown error fetching inserted id');
<a name="l1168"><span class="linenum">1168</span></a>          }
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>          if (!<a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>) {
<a name="l1171"><span class="linenum">1171</span></a>              return true;
<a name="l1172"><span class="linenum">1172</span></a>          } else {
<a name="l1173"><span class="linenum">1173</span></a>              return (int)<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>;
<a name="l1174"><span class="linenum">1174</span></a>          }
<a name="l1175"><span class="linenum">1175</span></a>      }
<a name="l1176"><span class="linenum">1176</span></a>  
<a name="l1177"><span class="linenum">1177</span></a>      <span class="comment">/**</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">     * Insert a record into a table and return the &quot;id&quot; field if required.</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">     *</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">     * Some conversions and safety checks are carried out. Lobs are supported.</span>
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">     * If the return ID isn't required, then this just reports success as true/false.</span>
<a name="l1182"><span class="linenum">1182</span></a>  <span class="comment">     * $data is an object containing needed data</span>
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment">     * @param string $table The database table to be inserted into</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment">     * @param object $data A data object with values for one or more fields in the record</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">     * @param bool $returnid Should the id of the newly created record entry be returned? If this option is not requested then true/false is returned.</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment">     * @return bool|int true or new id</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment">     */</span>
<a name="l1189"><span class="linenum">1189</span></a>      public function <a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>, <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>=true, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('bulk')" href="../../_variables/bulk.html">$bulk</a>=false) {
<a name="l1190"><span class="linenum">1190</span></a>          <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> = (array)<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>;
<a name="l1191"><span class="linenum">1191</span></a>  
<a name="l1192"><span class="linenum">1192</span></a>          <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l1193"><span class="linenum">1193</span></a>          if (empty(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>)) {
<a name="l1194"><span class="linenum">1194</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_exception')" href="../../_classes/dml_exception.html" onMouseOver="classPopup(event,'dml_exception')">dml_exception</a>('ddltablenotexist', <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l1195"><span class="linenum">1195</span></a>          }
<a name="l1196"><span class="linenum">1196</span></a>  
<a name="l1197"><span class="linenum">1197</span></a>          <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a> = array();
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>          foreach (<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>=&gt;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1200"><span class="linenum">1200</span></a>              if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> === 'id') {
<a name="l1201"><span class="linenum">1201</span></a>                  continue;
<a name="l1202"><span class="linenum">1202</span></a>              }
<a name="l1203"><span class="linenum">1203</span></a>              if (!isset(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>])) {
<a name="l1204"><span class="linenum">1204</span></a>                  continue;
<a name="l1205"><span class="linenum">1205</span></a>              }
<a name="l1206"><span class="linenum">1206</span></a>              <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a> = <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>];
<a name="l1207"><span class="linenum">1207</span></a>              <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('normalise_value')" href="../../_functions/normalise_value.html" onMouseOver="funcPopup(event,'normalise_value')">normalise_value</a>(<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l1208"><span class="linenum">1208</span></a>          }
<a name="l1209"><span class="linenum">1209</span></a>  
<a name="l1210"><span class="linenum">1210</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_record_raw')" href="../../_functions/insert_record_raw.html" onMouseOver="funcPopup(event,'insert_record_raw')">insert_record_raw</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a>, <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('bulk')" href="../../_variables/bulk.html">$bulk</a>);
<a name="l1211"><span class="linenum">1211</span></a>      }
<a name="l1212"><span class="linenum">1212</span></a>  
<a name="l1213"><span class="linenum">1213</span></a>      <span class="comment">/**</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">     * Insert multiple records into database as fast as possible.</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">     *</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment">     * Order of inserts is maintained, but the operation is not atomic,</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">     * use transactions if necessary.</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">     *</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">     * This method is intended for inserting of large number of small objects,</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment">     * do not use for huge objects with text or binary fields.</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment">     *</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment">     *</span>
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment">     * @param string $table  The database table to be inserted into</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment">     * @param array|Traversable $dataobjects list of objects to be inserted, must be compatible with foreach</span>
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">     * @return void does not return new record ids</span>
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">     *</span>
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment">     * @throws coding_exception if data objects have different structure</span>
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment">     */</span>
<a name="l1231"><span class="linenum">1231</span></a>      public function <a class="function" onClick="logFunction('insert_records')" href="../../_functions/insert_records.html" onMouseOver="funcPopup(event,'insert_records')">insert_records</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('dataobjects')" href="../../_variables/dataobjects.html">$dataobjects</a>) {
<a name="l1232"><span class="linenum">1232</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('dataobjects')" href="../../_variables/dataobjects.html">$dataobjects</a>) and !<a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('dataobjects')" href="../../_variables/dataobjects.html">$dataobjects</a> instanceof Traversable) {
<a name="l1233"><span class="linenum">1233</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="function" onClick="logFunction('insert_records')" href="../../_functions/insert_records.html" onMouseOver="funcPopup(event,'insert_records')">insert_records</a>() passed non-traversable object');
<a name="l1234"><span class="linenum">1234</span></a>          }
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">        // MySQL has a relatively small query length limit by default,</span>
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment">        // make sure 'max_allowed_packet' in my.cnf is high enough</span>
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">        // if you change the following default...</span>
<a name="l1239"><span class="linenum">1239</span></a>          static <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> = null;
<a name="l1240"><span class="linenum">1240</span></a>          if (<a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> === null) {
<a name="l1241"><span class="linenum">1241</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['bulkinsertsize'])) {
<a name="l1242"><span class="linenum">1242</span></a>                  <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> = (int)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['bulkinsertsize'];
<a name="l1243"><span class="linenum">1243</span></a>  
<a name="l1244"><span class="linenum">1244</span></a>              } else {
<a name="l1245"><span class="linenum">1245</span></a>                  if (PHP_INT_SIZE === 4) {
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">                    // Bad luck for Windows, we cannot do any maths with large numbers.</span>
<a name="l1247"><span class="linenum">1247</span></a>                      <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> = 5;
<a name="l1248"><span class="linenum">1248</span></a>                  } else {
<a name="l1249"><span class="linenum">1249</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SHOW VARIABLES LIKE 'max_allowed_packet'&quot;;
<a name="l1250"><span class="linenum">1250</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1251"><span class="linenum">1251</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1252"><span class="linenum">1252</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1253"><span class="linenum">1253</span></a>                      <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../_variables/size.html">$size</a> = 0;
<a name="l1254"><span class="linenum">1254</span></a>                      if (<a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc()) {
<a name="l1255"><span class="linenum">1255</span></a>                          <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../_variables/size.html">$size</a> = <a class="var it6138" onMouseOver="hilite(6138)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>['Value'];
<a name="l1256"><span class="linenum">1256</span></a>                      }
<a name="l1257"><span class="linenum">1257</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment">                    // Hopefully 200kb per object are enough.</span>
<a name="l1259"><span class="linenum">1259</span></a>                      <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> = (int)(<a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../_variables/size.html">$size</a> / 200000);
<a name="l1260"><span class="linenum">1260</span></a>                      if (<a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> &gt; 50) {
<a name="l1261"><span class="linenum">1261</span></a>                          <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a> = 50;
<a name="l1262"><span class="linenum">1262</span></a>                      }
<a name="l1263"><span class="linenum">1263</span></a>                  }
<a name="l1264"><span class="linenum">1264</span></a>              }
<a name="l1265"><span class="linenum">1265</span></a>          }
<a name="l1266"><span class="linenum">1266</span></a>  
<a name="l1267"><span class="linenum">1267</span></a>          <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, true);
<a name="l1268"><span class="linenum">1268</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = null;
<a name="l1269"><span class="linenum">1269</span></a>          <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l1270"><span class="linenum">1270</span></a>          <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> = array();
<a name="l1271"><span class="linenum">1271</span></a>          foreach (<a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('dataobjects')" href="../../_variables/dataobjects.html">$dataobjects</a> as <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>) {
<a name="l1272"><span class="linenum">1272</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>) and !<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>)) {
<a name="l1273"><span class="linenum">1273</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="function" onClick="logFunction('insert_records')" href="../../_functions/insert_records.html" onMouseOver="funcPopup(event,'insert_records')">insert_records</a>() passed invalid record object');
<a name="l1274"><span class="linenum">1274</span></a>              }
<a name="l1275"><span class="linenum">1275</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> = (array)<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>;
<a name="l1276"><span class="linenum">1276</span></a>              if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> === null) {
<a name="l1277"><span class="linenum">1277</span></a>                  <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>);
<a name="l1278"><span class="linenum">1278</span></a>                  <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> = array_intersect_key(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>, <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>);
<a name="l1279"><span class="linenum">1279</span></a>                  unset(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>['id']);
<a name="l1280"><span class="linenum">1280</span></a>              } else if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> !== <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>)) {
<a name="l1281"><span class="linenum">1281</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('All dataobjects in <a class="function" onClick="logFunction('insert_records')" href="../../_functions/insert_records.html" onMouseOver="funcPopup(event,'insert_records')">insert_records</a>() must have the same structure!');
<a name="l1282"><span class="linenum">1282</span></a>              }
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>              <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>++;
<a name="l1285"><span class="linenum">1285</span></a>              <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>[] = <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>;
<a name="l1286"><span class="linenum">1286</span></a>  
<a name="l1287"><span class="linenum">1287</span></a>              if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> === <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('chunksize')" href="../../_variables/chunksize.html">$chunksize</a>) {
<a name="l1288"><span class="linenum">1288</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_chunk')" href="../../_functions/insert_chunk.html" onMouseOver="funcPopup(event,'insert_chunk')">insert_chunk</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>, <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>);
<a name="l1289"><span class="linenum">1289</span></a>                  <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> = array();
<a name="l1290"><span class="linenum">1290</span></a>                  <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l1291"><span class="linenum">1291</span></a>              }
<a name="l1292"><span class="linenum">1292</span></a>          }
<a name="l1293"><span class="linenum">1293</span></a>  
<a name="l1294"><span class="linenum">1294</span></a>          if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>) {
<a name="l1295"><span class="linenum">1295</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_chunk')" href="../../_functions/insert_chunk.html" onMouseOver="funcPopup(event,'insert_chunk')">insert_chunk</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>, <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>);
<a name="l1296"><span class="linenum">1296</span></a>          }
<a name="l1297"><span class="linenum">1297</span></a>      }
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>      <span class="comment">/**</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">     * Insert records in chunks.</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">     *</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">     * Note: can be used only from insert_records().</span>
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment">     *</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">     * @param string $table</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">     * @param array $chunk</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment">     * @param database_column_info[] $columns</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">     */</span>
<a name="l1308"><span class="linenum">1308</span></a>      protected function <a class="function" onClick="logFunction('insert_chunk')" href="../../_functions/insert_chunk.html" onMouseOver="funcPopup(event,'insert_chunk')">insert_chunk</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, array <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>, array <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>) {
<a name="l1309"><span class="linenum">1309</span></a>          <a class="var it12588" onMouseOver="hilite(12588)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../../_variables/fieldssql.html">$fieldssql</a> = '('.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>)).')';
<a name="l1310"><span class="linenum">1310</span></a>  
<a name="l1311"><span class="linenum">1311</span></a>          <a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('valuessql')" href="../../_variables/valuessql.html">$valuessql</a> = '('.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_fill')" href="../../_functions/array_fill.html" onMouseOver="phpfuncPopup(event,'array_fill')">array_fill</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>), '?')).')';
<a name="l1312"><span class="linenum">1312</span></a>          <a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('valuessql')" href="../../_variables/valuessql.html">$valuessql</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_fill')" href="../../_functions/array_fill.html" onMouseOver="phpfuncPopup(event,'array_fill')">array_fill</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>), <a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('valuessql')" href="../../_variables/valuessql.html">$valuessql</a>));
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l1315"><span class="linenum">1315</span></a>          foreach (<a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> as <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>) {
<a name="l1316"><span class="linenum">1316</span></a>              foreach (<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> =&gt; <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>) {
<a name="l1317"><span class="linenum">1317</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('normalise_value')" href="../../_functions/normalise_value.html" onMouseOver="funcPopup(event,'normalise_value')">normalise_value</a>(<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>, <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>]);
<a name="l1318"><span class="linenum">1318</span></a>              }
<a name="l1319"><span class="linenum">1319</span></a>          }
<a name="l1320"><span class="linenum">1320</span></a>  
<a name="l1321"><span class="linenum">1321</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;INSERT INTO {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> <a class="var it12588" onMouseOver="hilite(12588)" onMouseOut="lolite()" onClick="logVariable('fieldssql')" href="../../_variables/fieldssql.html">$fieldssql</a> VALUES <a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('valuessql')" href="../../_variables/valuessql.html">$valuessql</a>&quot;;
<a name="l1322"><span class="linenum">1322</span></a>  
<a name="l1323"><span class="linenum">1323</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1324"><span class="linenum">1324</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_INSERT')" href="../../_constants/SQL_QUERY_INSERT.html" onMouseOver="constPopup(event,'SQL_QUERY_INSERT')">SQL_QUERY_INSERT</a>);
<a name="l1327"><span class="linenum">1327</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>);
<a name="l1328"><span class="linenum">1328</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1329"><span class="linenum">1329</span></a>      }
<a name="l1330"><span class="linenum">1330</span></a>  
<a name="l1331"><span class="linenum">1331</span></a>      <span class="comment">/**</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">     * Import a record into a table, id field is required.</span>
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">     * Safety checks are NOT carried out. Lobs are supported.</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment">     *</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment">     * @param string $table name of database table to be inserted into</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">     * @param object $dataobject A data object with values for one or more fields in the record</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">     * @return bool true</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment">     */</span>
<a name="l1340"><span class="linenum">1340</span></a>      public function <a class="function" onClick="logFunction('import_record')" href="../../_functions/import_record.html" onMouseOver="funcPopup(event,'import_record')">import_record</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>) {
<a name="l1341"><span class="linenum">1341</span></a>          <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> = (array)<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>;
<a name="l1342"><span class="linenum">1342</span></a>  
<a name="l1343"><span class="linenum">1343</span></a>          <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l1344"><span class="linenum">1344</span></a>          <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a> = array();
<a name="l1345"><span class="linenum">1345</span></a>  
<a name="l1346"><span class="linenum">1346</span></a>          foreach (<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>=&gt;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1347"><span class="linenum">1347</span></a>              if (!isset(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>])) {
<a name="l1348"><span class="linenum">1348</span></a>                  continue;
<a name="l1349"><span class="linenum">1349</span></a>              }
<a name="l1350"><span class="linenum">1350</span></a>              <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>] = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l1351"><span class="linenum">1351</span></a>          }
<a name="l1352"><span class="linenum">1352</span></a>  
<a name="l1353"><span class="linenum">1353</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_record_raw')" href="../../_functions/insert_record_raw.html" onMouseOver="funcPopup(event,'insert_record_raw')">insert_record_raw</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a>, false, true, true);
<a name="l1354"><span class="linenum">1354</span></a>      }
<a name="l1355"><span class="linenum">1355</span></a>  
<a name="l1356"><span class="linenum">1356</span></a>      <span class="comment">/**</span>
<a name="l1357"><span class="linenum">1357</span></a>  <span class="comment">     * Update record in database, as fast as possible, no safety checks, lobs not supported.</span>
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">     * @param string $table name</span>
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment">     * @param mixed $params data record as object or array</span>
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">     * @param bool true means repeated updates expected</span>
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">     * @return bool true</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">     */</span>
<a name="l1364"><span class="linenum">1364</span></a>      public function <a class="function" onClick="logFunction('update_record_raw')" href="../../_functions/update_record_raw.html" onMouseOver="funcPopup(event,'update_record_raw')">update_record_raw</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('bulk')" href="../../_variables/bulk.html">$bulk</a>=false) {
<a name="l1365"><span class="linenum">1365</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = (array)<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>;
<a name="l1366"><span class="linenum">1366</span></a>  
<a name="l1367"><span class="linenum">1367</span></a>          if (!isset(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['id'])) {
<a name="l1368"><span class="linenum">1368</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('moodle_database::<a class="function" onClick="logFunction('update_record_raw')" href="../../_functions/update_record_raw.html" onMouseOver="funcPopup(event,'update_record_raw')">update_record_raw</a>() id field must be specified.');
<a name="l1369"><span class="linenum">1369</span></a>          }
<a name="l1370"><span class="linenum">1370</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['id'];
<a name="l1371"><span class="linenum">1371</span></a>          unset(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['id']);
<a name="l1372"><span class="linenum">1372</span></a>  
<a name="l1373"><span class="linenum">1373</span></a>          if (empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1374"><span class="linenum">1374</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('moodle_database::<a class="function" onClick="logFunction('update_record_raw')" href="../../_functions/update_record_raw.html" onMouseOver="funcPopup(event,'update_record_raw')">update_record_raw</a>() no fields found.');
<a name="l1375"><span class="linenum">1375</span></a>          }
<a name="l1376"><span class="linenum">1376</span></a>  
<a name="l1377"><span class="linenum">1377</span></a>          <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('sets')" href="../../_variables/sets.html">$sets</a> = array();
<a name="l1378"><span class="linenum">1378</span></a>          foreach (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>=&gt;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1379"><span class="linenum">1379</span></a>              <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('sets')" href="../../_variables/sets.html">$sets</a>[] = &quot;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = ?&quot;;
<a name="l1380"><span class="linenum">1380</span></a>          }
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>; <span class="comment">// last ? in WHERE condition</span>
<a name="l1383"><span class="linenum">1383</span></a>  
<a name="l1384"><span class="linenum">1384</span></a>          <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('sets')" href="../../_variables/sets.html">$sets</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('sets')" href="../../_variables/sets.html">$sets</a>);
<a name="l1385"><span class="linenum">1385</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;UPDATE {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> SET <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('sets')" href="../../_variables/sets.html">$sets</a> WHERE id=?&quot;;
<a name="l1386"><span class="linenum">1386</span></a>  
<a name="l1387"><span class="linenum">1387</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1388"><span class="linenum">1388</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1389"><span class="linenum">1389</span></a>  
<a name="l1390"><span class="linenum">1390</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_UPDATE')" href="../../_constants/SQL_QUERY_UPDATE.html" onMouseOver="constPopup(event,'SQL_QUERY_UPDATE')">SQL_QUERY_UPDATE</a>);
<a name="l1391"><span class="linenum">1391</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>);
<a name="l1392"><span class="linenum">1392</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1393"><span class="linenum">1393</span></a>  
<a name="l1394"><span class="linenum">1394</span></a>          return true;
<a name="l1395"><span class="linenum">1395</span></a>      }
<a name="l1396"><span class="linenum">1396</span></a>  
<a name="l1397"><span class="linenum">1397</span></a>      <span class="comment">/**</span>
<a name="l1398"><span class="linenum">1398</span></a>  <span class="comment">     * Update a record in a table</span>
<a name="l1399"><span class="linenum">1399</span></a>  <span class="comment">     *</span>
<a name="l1400"><span class="linenum">1400</span></a>  <span class="comment">     * $dataobject is an object containing needed data</span>
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment">     * Relies on $dataobject having a variable &quot;id&quot; to</span>
<a name="l1402"><span class="linenum">1402</span></a>  <span class="comment">     * specify the record to update</span>
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">     *</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment">     * @param string $table The database table to be checked against.</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">     * @param object $dataobject An object with contents equal to fieldname=&gt;fieldvalue. Must have an entry for 'id' to map to the table specified.</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">     * @param bool true means repeated updates expected</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment">     * @return bool true</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">     */</span>
<a name="l1410"><span class="linenum">1410</span></a>      public function <a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('bulk')" href="../../_variables/bulk.html">$bulk</a>=false) {
<a name="l1411"><span class="linenum">1411</span></a>          <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> = (array)<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a>;
<a name="l1412"><span class="linenum">1412</span></a>  
<a name="l1413"><span class="linenum">1413</span></a>          <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l1414"><span class="linenum">1414</span></a>          <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a> = array();
<a name="l1415"><span class="linenum">1415</span></a>  
<a name="l1416"><span class="linenum">1416</span></a>          foreach (<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../../_variables/dataobject.html">$dataobject</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>=&gt;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1417"><span class="linenum">1417</span></a>              if (!isset(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>])) {
<a name="l1418"><span class="linenum">1418</span></a>                  continue;
<a name="l1419"><span class="linenum">1419</span></a>              }
<a name="l1420"><span class="linenum">1420</span></a>              <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a> = <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>];
<a name="l1421"><span class="linenum">1421</span></a>              <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('normalise_value')" href="../../_functions/normalise_value.html" onMouseOver="funcPopup(event,'normalise_value')">normalise_value</a>(<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l1422"><span class="linenum">1422</span></a>          }
<a name="l1423"><span class="linenum">1423</span></a>  
<a name="l1424"><span class="linenum">1424</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_record_raw')" href="../../_functions/update_record_raw.html" onMouseOver="funcPopup(event,'update_record_raw')">update_record_raw</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('cleaned')" href="../../_variables/cleaned.html">$cleaned</a>, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('bulk')" href="../../_variables/bulk.html">$bulk</a>);
<a name="l1425"><span class="linenum">1425</span></a>      }
<a name="l1426"><span class="linenum">1426</span></a>  
<a name="l1427"><span class="linenum">1427</span></a>      <span class="comment">/**</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment">     * Set a single field in every table record which match a particular WHERE clause.</span>
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">     *</span>
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment">     * @param string $table The database table to be checked against.</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">     * @param string $newfield the field to set.</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">     * @param string $newvalue the value to set the field to.</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment">     * @param string $select A fragment of SQL to be used in a where clause in the SQL call.</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">     * @param array $params array of sql parameters</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment">     * @return bool true</span>
<a name="l1436"><span class="linenum">1436</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1437"><span class="linenum">1437</span></a>  <span class="comment">     */</span>
<a name="l1438"><span class="linenum">1438</span></a>      public function <a class="function" onClick="logFunction('set_field_select')" href="../../_functions/set_field_select.html" onMouseOver="funcPopup(event,'set_field_select')">set_field_select</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>, <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>, <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null) {
<a name="l1439"><span class="linenum">1439</span></a>          if (<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>) {
<a name="l1440"><span class="linenum">1440</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = &quot;WHERE <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1441"><span class="linenum">1441</span></a>          }
<a name="l1442"><span class="linenum">1442</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1443"><span class="linenum">1443</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l1444"><span class="linenum">1444</span></a>          }
<a name="l1445"><span class="linenum">1445</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment">        // Get column metadata</span>
<a name="l1448"><span class="linenum">1448</span></a>          <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l1449"><span class="linenum">1449</span></a>          <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a> = <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../../_variables/columns.html">$columns</a>[<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>];
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>          <a class="var it12586" onMouseOver="hilite(12586)" onMouseOut="lolite()" onClick="logVariable('normalised_value')" href="../../_variables/normalised_value.html">$normalised_value</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('normalise_value')" href="../../_functions/normalise_value.html" onMouseOver="funcPopup(event,'normalise_value')">normalise_value</a>(<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('column')" href="../../_variables/column.html">$column</a>, <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>);
<a name="l1452"><span class="linenum">1452</span></a>  
<a name="l1453"><span class="linenum">1453</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it12586" onMouseOver="hilite(12586)" onMouseOut="lolite()" onClick="logVariable('normalised_value')" href="../../_variables/normalised_value.html">$normalised_value</a>)) {
<a name="l1454"><span class="linenum">1454</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = &quot;<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = NULL&quot;;
<a name="l1455"><span class="linenum">1455</span></a>          } else {
<a name="l1456"><span class="linenum">1456</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = &quot;<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = ?&quot;;
<a name="l1457"><span class="linenum">1457</span></a>              <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it12586" onMouseOver="hilite(12586)" onMouseOut="lolite()" onClick="logVariable('normalised_value')" href="../../_variables/normalised_value.html">$normalised_value</a>);
<a name="l1458"><span class="linenum">1458</span></a>          }
<a name="l1459"><span class="linenum">1459</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;UPDATE {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> SET <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1460"><span class="linenum">1460</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1461"><span class="linenum">1461</span></a>  
<a name="l1462"><span class="linenum">1462</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_UPDATE')" href="../../_constants/SQL_QUERY_UPDATE.html" onMouseOver="constPopup(event,'SQL_QUERY_UPDATE')">SQL_QUERY_UPDATE</a>);
<a name="l1463"><span class="linenum">1463</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>);
<a name="l1464"><span class="linenum">1464</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>          return true;
<a name="l1467"><span class="linenum">1467</span></a>      }
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>      <span class="comment">/**</span>
<a name="l1470"><span class="linenum">1470</span></a>  <span class="comment">     * Delete one or more records from a table which match a particular WHERE clause.</span>
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment">     *</span>
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">     * @param string $table The database table to be checked against.</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">     * @param string $select A fragment of SQL to be used in a where clause in the SQL call (used to define the selection criteria).</span>
<a name="l1474"><span class="linenum">1474</span></a>  <span class="comment">     * @param array $params array of sql parameters</span>
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment">     * @return bool true</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment">     * @throws dml_exception A DML specific exception is thrown for any errors.</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment">     */</span>
<a name="l1478"><span class="linenum">1478</span></a>      public function <a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>, <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>=null) {
<a name="l1479"><span class="linenum">1479</span></a>          if (<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>) {
<a name="l1480"><span class="linenum">1480</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = &quot;WHERE <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1481"><span class="linenum">1481</span></a>          }
<a name="l1482"><span class="linenum">1482</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;DELETE FROM {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>}<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1483"><span class="linenum">1483</span></a>  
<a name="l1484"><span class="linenum">1484</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fix_sql_params')" href="../../_functions/fix_sql_params.html" onMouseOver="funcPopup(event,'fix_sql_params')">fix_sql_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1485"><span class="linenum">1485</span></a>          <a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('emulate_bound_params')" href="../../_functions/emulate_bound_params.html" onMouseOver="funcPopup(event,'emulate_bound_params')">emulate_bound_params</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('SQL_QUERY_UPDATE')" href="../../_constants/SQL_QUERY_UPDATE.html" onMouseOver="constPopup(event,'SQL_QUERY_UPDATE')">SQL_QUERY_UPDATE</a>);
<a name="l1488"><span class="linenum">1488</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it15184" onMouseOver="hilite(15184)" onMouseOut="lolite()" onClick="logVariable('rawsql')" href="../../_variables/rawsql.html">$rawsql</a>);
<a name="l1489"><span class="linenum">1489</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>          return true;
<a name="l1492"><span class="linenum">1492</span></a>      }
<a name="l1493"><span class="linenum">1493</span></a>  
<a name="l1494"><span class="linenum">1494</span></a>      public function <a class="function" onClick="logFunction('sql_cast_char2int')" href="../../_functions/sql_cast_char2int.html" onMouseOver="funcPopup(event,'sql_cast_char2int')">sql_cast_char2int</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>, <a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>=false) {
<a name="l1495"><span class="linenum">1495</span></a>          return ' CAST(' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' AS SIGNED) ';
<a name="l1496"><span class="linenum">1496</span></a>      }
<a name="l1497"><span class="linenum">1497</span></a>  
<a name="l1498"><span class="linenum">1498</span></a>      public function <a class="function" onClick="logFunction('sql_cast_char2real')" href="../../_functions/sql_cast_char2real.html" onMouseOver="funcPopup(event,'sql_cast_char2real')">sql_cast_char2real</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>, <a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>=false) {
<a name="l1499"><span class="linenum">1499</span></a>          return ' CAST(' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' AS DECIMAL) ';
<a name="l1500"><span class="linenum">1500</span></a>      }
<a name="l1501"><span class="linenum">1501</span></a>  
<a name="l1502"><span class="linenum">1502</span></a>      <span class="comment">/**</span>
<a name="l1503"><span class="linenum">1503</span></a>  <span class="comment">     * Returns 'LIKE' part of a query.</span>
<a name="l1504"><span class="linenum">1504</span></a>  <span class="comment">     *</span>
<a name="l1505"><span class="linenum">1505</span></a>  <span class="comment">     * @param string $fieldname usually name of the table column</span>
<a name="l1506"><span class="linenum">1506</span></a>  <span class="comment">     * @param string $param usually bound query parameter (?, :named)</span>
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">     * @param bool $casesensitive use case sensitive search</span>
<a name="l1508"><span class="linenum">1508</span></a>  <span class="comment">     * @param bool $accensensitive use accent sensitive search (not all databases support accent insensitive)</span>
<a name="l1509"><span class="linenum">1509</span></a>  <span class="comment">     * @param bool $notlike true means &quot;NOT LIKE&quot;</span>
<a name="l1510"><span class="linenum">1510</span></a>  <span class="comment">     * @param string $escapechar escape char for '%' and '_'</span>
<a name="l1511"><span class="linenum">1511</span></a>  <span class="comment">     * @return string SQL code fragment</span>
<a name="l1512"><span class="linenum">1512</span></a>  <span class="comment">     */</span>
<a name="l1513"><span class="linenum">1513</span></a>      public function <a class="function" onClick="logFunction('sql_like')" href="../../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>, <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>, <a class="var it12591" onMouseOver="hilite(12591)" onMouseOut="lolite()" onClick="logVariable('casesensitive')" href="../../_variables/casesensitive.html">$casesensitive</a> = true, <a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('accentsensitive')" href="../../_variables/accentsensitive.html">$accentsensitive</a> = true, <a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('notlike')" href="../../_variables/notlike.html">$notlike</a> = false, <a class="var it12594" onMouseOver="hilite(12594)" onMouseOut="lolite()" onClick="logVariable('escapechar')" href="../../_variables/escapechar.html">$escapechar</a> = '\\') {
<a name="l1514"><span class="linenum">1514</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>, '%') !== false) {
<a name="l1515"><span class="linenum">1515</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Potential SQL injection detected, <a class="function" onClick="logFunction('sql_like')" href="../../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>() expects bound parameters (? or :named)');
<a name="l1516"><span class="linenum">1516</span></a>          }
<a name="l1517"><span class="linenum">1517</span></a>          <a class="var it12594" onMouseOver="hilite(12594)" onMouseOut="lolite()" onClick="logVariable('escapechar')" href="../../_variables/escapechar.html">$escapechar</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;real_escape_string(<a class="var it12594" onMouseOver="hilite(12594)" onMouseOut="lolite()" onClick="logVariable('escapechar')" href="../../_variables/escapechar.html">$escapechar</a>); <span class="comment">// prevents problems with C-style escapes of enclosing '\'</span>
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>          <a class="var it12595" onMouseOver="hilite(12595)" onMouseOut="lolite()" onClick="logVariable('LIKE')" href="../../_variables/LIKE.html">$LIKE</a> = <a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('notlike')" href="../../_variables/notlike.html">$notlike</a> ? 'NOT LIKE' : 'LIKE';
<a name="l1520"><span class="linenum">1520</span></a>          if (<a class="var it12591" onMouseOver="hilite(12591)" onMouseOut="lolite()" onClick="logVariable('casesensitive')" href="../../_variables/casesensitive.html">$casesensitive</a>) {
<a name="l1521"><span class="linenum">1521</span></a>              return &quot;<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> <a class="var it12595" onMouseOver="hilite(12595)" onMouseOut="lolite()" onClick="logVariable('LIKE')" href="../../_variables/LIKE.html">$LIKE</a> <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> COLLATE utf8_bin ESCAPE '<a class="var it12594" onMouseOver="hilite(12594)" onMouseOut="lolite()" onClick="logVariable('escapechar')" href="../../_variables/escapechar.html">$escapechar</a>'&quot;;
<a name="l1522"><span class="linenum">1522</span></a>          } else {
<a name="l1523"><span class="linenum">1523</span></a>              if (<a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('accentsensitive')" href="../../_variables/accentsensitive.html">$accentsensitive</a>) {
<a name="l1524"><span class="linenum">1524</span></a>                  return &quot;<a class="function" onClick="logFunction('LOWER')" href="../../_functions/lower.html" onMouseOver="funcPopup(event,'lower')">LOWER</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>) <a class="var it12595" onMouseOver="hilite(12595)" onMouseOut="lolite()" onClick="logVariable('LIKE')" href="../../_variables/LIKE.html">$LIKE</a> <a class="function" onClick="logFunction('LOWER')" href="../../_functions/lower.html" onMouseOver="funcPopup(event,'lower')">LOWER</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>) COLLATE utf8_bin ESCAPE '<a class="var it12594" onMouseOver="hilite(12594)" onMouseOut="lolite()" onClick="logVariable('escapechar')" href="../../_variables/escapechar.html">$escapechar</a>'&quot;;
<a name="l1525"><span class="linenum">1525</span></a>              } else {
<a name="l1526"><span class="linenum">1526</span></a>                  return &quot;<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> <a class="var it12595" onMouseOver="hilite(12595)" onMouseOut="lolite()" onClick="logVariable('LIKE')" href="../../_variables/LIKE.html">$LIKE</a> <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> ESCAPE '<a class="var it12594" onMouseOver="hilite(12594)" onMouseOut="lolite()" onClick="logVariable('escapechar')" href="../../_variables/escapechar.html">$escapechar</a>'&quot;;
<a name="l1527"><span class="linenum">1527</span></a>              }
<a name="l1528"><span class="linenum">1528</span></a>          }
<a name="l1529"><span class="linenum">1529</span></a>      }
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>      <span class="comment">/**</span>
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment">     * Returns the proper SQL to do CONCAT between the elements passed</span>
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment">     * Can take many parameters</span>
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment">     *</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">     * @param string $str,... 1 or more fields/strings to concat</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment">     *</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment">     * @return string The concat sql</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment">     */</span>
<a name="l1539"><span class="linenum">1539</span></a>      public function <a class="function" onClick="logFunction('sql_concat')" href="../../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>() {
<a name="l1540"><span class="linenum">1540</span></a>          <a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l1541"><span class="linenum">1541</span></a>          <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(', ', <a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a>);
<a name="l1542"><span class="linenum">1542</span></a>          if (<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> === '') {
<a name="l1543"><span class="linenum">1543</span></a>              return &quot;''&quot;;
<a name="l1544"><span class="linenum">1544</span></a>          }
<a name="l1545"><span class="linenum">1545</span></a>          return &quot;<a class="function" onClick="logFunction('CONCAT')" href="../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">CONCAT</a>(<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>)&quot;;
<a name="l1546"><span class="linenum">1546</span></a>      }
<a name="l1547"><span class="linenum">1547</span></a>  
<a name="l1548"><span class="linenum">1548</span></a>      <span class="comment">/**</span>
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment">     * Returns the proper SQL to do CONCAT between the elements passed</span>
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment">     * with a given separator</span>
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">     *</span>
<a name="l1552"><span class="linenum">1552</span></a>  <span class="comment">     * @param string $separator The string to use as the separator</span>
<a name="l1553"><span class="linenum">1553</span></a>  <span class="comment">     * @param array $elements An array of items to concatenate</span>
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">     * @return string The concat SQL</span>
<a name="l1555"><span class="linenum">1555</span></a>  <span class="comment">     */</span>
<a name="l1556"><span class="linenum">1556</span></a>      public function <a class="function" onClick="logFunction('sql_concat_join')" href="../../_functions/sql_concat_join.html" onMouseOver="funcPopup(event,'sql_concat_join')">sql_concat_join</a>(<a class="var it3496" onMouseOver="hilite(3496)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>=&quot;' '&quot;, <a class="var it222" onMouseOver="hilite(222)" onMouseOut="lolite()" onClick="logVariable('elements')" href="../../_variables/elements.html">$elements</a>=array()) {
<a name="l1557"><span class="linenum">1557</span></a>          <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(', ', <a class="var it222" onMouseOver="hilite(222)" onMouseOut="lolite()" onClick="logVariable('elements')" href="../../_variables/elements.html">$elements</a>);
<a name="l1558"><span class="linenum">1558</span></a>  
<a name="l1559"><span class="linenum">1559</span></a>          if (<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> === '') {
<a name="l1560"><span class="linenum">1560</span></a>              return &quot;''&quot;;
<a name="l1561"><span class="linenum">1561</span></a>          }
<a name="l1562"><span class="linenum">1562</span></a>          return &quot;CONCAT_WS(<a class="var it3496" onMouseOver="hilite(3496)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>, <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>)&quot;;
<a name="l1563"><span class="linenum">1563</span></a>      }
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>      <span class="comment">/**</span>
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment">     * Returns the SQL text to be used to calculate the length in characters of one expression.</span>
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment">     * @param string fieldname or expression to calculate its length in characters.</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment">     * @return string the piece of SQL code to be used in the statement.</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">     */</span>
<a name="l1570"><span class="linenum">1570</span></a>      public function <a class="function" onClick="logFunction('sql_length')" href="../../_functions/sql_length.html" onMouseOver="funcPopup(event,'sql_length')">sql_length</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>) {
<a name="l1571"><span class="linenum">1571</span></a>          return ' CHAR_LENGTH(' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ')';
<a name="l1572"><span class="linenum">1572</span></a>      }
<a name="l1573"><span class="linenum">1573</span></a>  
<a name="l1574"><span class="linenum">1574</span></a>      <span class="comment">/**</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment">     * Does this driver support regex syntax when searching</span>
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment">     */</span>
<a name="l1577"><span class="linenum">1577</span></a>      public function <a class="function" onClick="logFunction('sql_regex_supported')" href="../../_functions/sql_regex_supported.html" onMouseOver="funcPopup(event,'sql_regex_supported')">sql_regex_supported</a>() {
<a name="l1578"><span class="linenum">1578</span></a>          return true;
<a name="l1579"><span class="linenum">1579</span></a>      }
<a name="l1580"><span class="linenum">1580</span></a>  
<a name="l1581"><span class="linenum">1581</span></a>      <span class="comment">/**</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">     * Return regex positive or negative match sql</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">     * @param bool $positivematch</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     * @return string or empty if not supported</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     */</span>
<a name="l1586"><span class="linenum">1586</span></a>      public function <a class="function" onClick="logFunction('sql_regex')" href="../../_functions/sql_regex.html" onMouseOver="funcPopup(event,'sql_regex')">sql_regex</a>(<a class="var it12598" onMouseOver="hilite(12598)" onMouseOut="lolite()" onClick="logVariable('positivematch')" href="../../_variables/positivematch.html">$positivematch</a>=true) {
<a name="l1587"><span class="linenum">1587</span></a>          return <a class="var it12598" onMouseOver="hilite(12598)" onMouseOut="lolite()" onClick="logVariable('positivematch')" href="../../_variables/positivematch.html">$positivematch</a> ? 'REGEXP' : 'NOT REGEXP';
<a name="l1588"><span class="linenum">1588</span></a>      }
<a name="l1589"><span class="linenum">1589</span></a>  
<a name="l1590"><span class="linenum">1590</span></a>      <span class="comment">/**</span>
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment">     * Returns the SQL to be used in order to an UNSIGNED INTEGER column to SIGNED.</span>
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">     *</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">     * @deprecated since 2.3</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment">     * @param string $fieldname The name of the field to be cast</span>
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment">     * @return string The piece of SQL code to be used in your statement.</span>
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment">     */</span>
<a name="l1597"><span class="linenum">1597</span></a>      public function <a class="function" onClick="logFunction('sql_cast_2signed')" href="../../_functions/sql_cast_2signed.html" onMouseOver="funcPopup(event,'sql_cast_2signed')">sql_cast_2signed</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>) {
<a name="l1598"><span class="linenum">1598</span></a>          return ' CAST(' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' AS SIGNED) ';
<a name="l1599"><span class="linenum">1599</span></a>      }
<a name="l1600"><span class="linenum">1600</span></a>  
<a name="l1601"><span class="linenum">1601</span></a>      <span class="comment">/**</span>
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment">     * Returns the SQL that allows to find intersection of two or more queries</span>
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">     *</span>
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l1605"><span class="linenum">1605</span></a>  <span class="comment">     *</span>
<a name="l1606"><span class="linenum">1606</span></a>  <span class="comment">     * @param array $selects array of SQL select queries, each of them only returns fields with the names from $fields</span>
<a name="l1607"><span class="linenum">1607</span></a>  <span class="comment">     * @param string $fields comma-separated list of fields</span>
<a name="l1608"><span class="linenum">1608</span></a>  <span class="comment">     * @return string SQL query that will return only values that are present in each of selects</span>
<a name="l1609"><span class="linenum">1609</span></a>  <span class="comment">     */</span>
<a name="l1610"><span class="linenum">1610</span></a>      public function <a class="function" onClick="logFunction('sql_intersect')" href="../../_functions/sql_intersect.html" onMouseOver="funcPopup(event,'sql_intersect')">sql_intersect</a>(<a class="var it8122" onMouseOver="hilite(8122)" onMouseOut="lolite()" onClick="logVariable('selects')" href="../../_variables/selects.html">$selects</a>, <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>) {
<a name="l1611"><span class="linenum">1611</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it8122" onMouseOver="hilite(8122)" onMouseOut="lolite()" onClick="logVariable('selects')" href="../../_variables/selects.html">$selects</a>) &lt;= 1) {
<a name="l1612"><span class="linenum">1612</span></a>              return parent::<a class="function" onClick="logFunction('sql_intersect')" href="../../_functions/sql_intersect.html" onMouseOver="funcPopup(event,'sql_intersect')">sql_intersect</a>(<a class="var it8122" onMouseOver="hilite(8122)" onMouseOut="lolite()" onClick="logVariable('selects')" href="../../_variables/selects.html">$selects</a>, <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>);
<a name="l1613"><span class="linenum">1613</span></a>          }
<a name="l1614"><span class="linenum">1614</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/\s/', '', <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>);
<a name="l1615"><span class="linenum">1615</span></a>          static <a class="var it22218" onMouseOver="hilite(22218)" onMouseOut="lolite()" onClick="logVariable('aliascnt')" href="../../_variables/aliascnt.html">$aliascnt</a> = 0;
<a name="l1616"><span class="linenum">1616</span></a>          <a class="var it32438" onMouseOver="hilite(32438)" onMouseOut="lolite()" onClick="logVariable('falias')" href="../../_variables/falias.html">$falias</a> = 'intsctal'.(<a class="var it22218" onMouseOver="hilite(22218)" onMouseOut="lolite()" onClick="logVariable('aliascnt')" href="../../_variables/aliascnt.html">$aliascnt</a>++);
<a name="l1617"><span class="linenum">1617</span></a>          <a class="var it5803" onMouseOver="hilite(5803)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a> = &quot;SELECT <a class="var it32438" onMouseOver="hilite(32438)" onMouseOut="lolite()" onClick="logVariable('falias')" href="../../_variables/falias.html">$falias</a>.&quot;.
<a name="l1618"><span class="linenum">1618</span></a>              <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/,/', ','.<a class="var it32438" onMouseOver="hilite(32438)" onMouseOut="lolite()" onClick="logVariable('falias')" href="../../_variables/falias.html">$falias</a>.'.', <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>).
<a name="l1619"><span class="linenum">1619</span></a>              &quot; <a class="function" onClick="logFunction('FROM')" href="../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a> (<a class="var it8122" onMouseOver="hilite(8122)" onMouseOut="lolite()" onClick="logVariable('selects')" href="../../_variables/selects.html">$selects</a>[0]) <a class="var it32438" onMouseOver="hilite(32438)" onMouseOut="lolite()" onClick="logVariable('falias')" href="../../_variables/falias.html">$falias</a>&quot;;
<a name="l1620"><span class="linenum">1620</span></a>          for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 1; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it8122" onMouseOver="hilite(8122)" onMouseOut="lolite()" onClick="logVariable('selects')" href="../../_variables/selects.html">$selects</a>); <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l1621"><span class="linenum">1621</span></a>              <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> = 'intsctal'.(<a class="var it22218" onMouseOver="hilite(22218)" onMouseOut="lolite()" onClick="logVariable('aliascnt')" href="../../_variables/aliascnt.html">$aliascnt</a>++);
<a name="l1622"><span class="linenum">1622</span></a>              <a class="var it5803" onMouseOver="hilite(5803)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a> .= &quot; <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> (&quot;.<a class="var it8122" onMouseOver="hilite(8122)" onMouseOut="lolite()" onClick="logVariable('selects')" href="../../_variables/selects.html">$selects</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>].&quot;) <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> ON &quot;.
<a name="l1623"><span class="linenum">1623</span></a>                  <a class="function" onClick="logFunction('join')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(' AND ',
<a name="l1624"><span class="linenum">1624</span></a>                      <a class="phpfunction" onClick="logFunction('array_map')" href="../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>(
<a name="l1625"><span class="linenum">1625</span></a>                          <a class="phpfunction" onClick="logFunction('create_function')" href="../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>', 'return &quot;'.<a class="var it32438" onMouseOver="hilite(32438)" onMouseOut="lolite()" onClick="logVariable('falias')" href="../../_variables/falias.html">$falias</a>.'.<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = '.<a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>.'.<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>&quot;;'),
<a name="l1626"><span class="linenum">1626</span></a>                          <a class="phpfunction" onClick="logFunction('preg_split')" href="../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/,/', <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>))
<a name="l1627"><span class="linenum">1627</span></a>                  );
<a name="l1628"><span class="linenum">1628</span></a>          }
<a name="l1629"><span class="linenum">1629</span></a>          return <a class="var it5803" onMouseOver="hilite(5803)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>;
<a name="l1630"><span class="linenum">1630</span></a>      }
<a name="l1631"><span class="linenum">1631</span></a>  
<a name="l1632"><span class="linenum">1632</span></a>      <span class="comment">/**</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment">     * Does this driver support tool_replace?</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">     *</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment">     * @since Moodle 2.6.1</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment">     * @return bool</span>
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">     */</span>
<a name="l1638"><span class="linenum">1638</span></a>      public function <a class="function" onClick="logFunction('replace_all_text_supported')" href="../../_functions/replace_all_text_supported.html" onMouseOver="funcPopup(event,'replace_all_text_supported')">replace_all_text_supported</a>() {
<a name="l1639"><span class="linenum">1639</span></a>          return true;
<a name="l1640"><span class="linenum">1640</span></a>      }
<a name="l1641"><span class="linenum">1641</span></a>  
<a name="l1642"><span class="linenum">1642</span></a>      public function <a class="function" onClick="logFunction('session_lock_supported')" href="../../_functions/session_lock_supported.html" onMouseOver="funcPopup(event,'session_lock_supported')">session_lock_supported</a>() {
<a name="l1643"><span class="linenum">1643</span></a>          return true;
<a name="l1644"><span class="linenum">1644</span></a>      }
<a name="l1645"><span class="linenum">1645</span></a>  
<a name="l1646"><span class="linenum">1646</span></a>      <span class="comment">/**</span>
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment">     * Obtain session lock</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment">     * @param int $rowid id of the row with session record</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment">     * @param int $timeout max allowed time to wait for the lock in seconds</span>
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment">     * @return void</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment">     */</span>
<a name="l1652"><span class="linenum">1652</span></a>      public function <a class="function" onClick="logFunction('get_session_lock')" href="../../_functions/get_session_lock.html" onMouseOver="funcPopup(event,'get_session_lock')">get_session_lock</a>(<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('rowid')" href="../../_variables/rowid.html">$rowid</a>, <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../_variables/timeout.html">$timeout</a>) {
<a name="l1653"><span class="linenum">1653</span></a>          parent::<a class="function" onClick="logFunction('get_session_lock')" href="../../_functions/get_session_lock.html" onMouseOver="funcPopup(event,'get_session_lock')">get_session_lock</a>(<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('rowid')" href="../../_variables/rowid.html">$rowid</a>, <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../_variables/timeout.html">$timeout</a>);
<a name="l1654"><span class="linenum">1654</span></a>  
<a name="l1655"><span class="linenum">1655</span></a>          <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../../_variables/fullname.html">$fullname</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dbname.html">dbname</a>.'-'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>.'-session-'.<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('rowid')" href="../../_variables/rowid.html">$rowid</a>;
<a name="l1656"><span class="linenum">1656</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="function" onClick="logFunction('GET_LOCK')" href="../../_functions/get_lock.html" onMouseOver="funcPopup(event,'get_lock')">GET_LOCK</a>('<a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../../_variables/fullname.html">$fullname</a>', <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../_variables/timeout.html">$timeout</a>)&quot;;
<a name="l1657"><span class="linenum">1657</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1658"><span class="linenum">1658</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1659"><span class="linenum">1659</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1660"><span class="linenum">1660</span></a>  
<a name="l1661"><span class="linenum">1661</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l1662"><span class="linenum">1662</span></a>              <a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;fetch_assoc();
<a name="l1663"><span class="linenum">1663</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1664"><span class="linenum">1664</span></a>  
<a name="l1665"><span class="linenum">1665</span></a>              if (<a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../_variables/arr.html">$arr</a>) == 1) {
<a name="l1666"><span class="linenum">1666</span></a>                  return;
<a name="l1667"><span class="linenum">1667</span></a>              } else {
<a name="l1668"><span class="linenum">1668</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_sessionwait_exception')" href="../../_classes/dml_sessionwait_exception.html" onMouseOver="classPopup(event,'dml_sessionwait_exception')">dml_sessionwait_exception</a>();
<a name="l1669"><span class="linenum">1669</span></a>              }
<a name="l1670"><span class="linenum">1670</span></a>          }
<a name="l1671"><span class="linenum">1671</span></a>      }
<a name="l1672"><span class="linenum">1672</span></a>  
<a name="l1673"><span class="linenum">1673</span></a>      public function <a class="function" onClick="logFunction('release_session_lock')" href="../../_functions/release_session_lock.html" onMouseOver="funcPopup(event,'release_session_lock')">release_session_lock</a>(<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('rowid')" href="../../_variables/rowid.html">$rowid</a>) {
<a name="l1674"><span class="linenum">1674</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('used_for_db_sessions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/used_for_db_sessions.html">used_for_db_sessions</a>) {
<a name="l1675"><span class="linenum">1675</span></a>              return;
<a name="l1676"><span class="linenum">1676</span></a>          }
<a name="l1677"><span class="linenum">1677</span></a>  
<a name="l1678"><span class="linenum">1678</span></a>          parent::<a class="function" onClick="logFunction('release_session_lock')" href="../../_functions/release_session_lock.html" onMouseOver="funcPopup(event,'release_session_lock')">release_session_lock</a>(<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('rowid')" href="../../_variables/rowid.html">$rowid</a>);
<a name="l1679"><span class="linenum">1679</span></a>          <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../../_variables/fullname.html">$fullname</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbname')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dbname.html">dbname</a>.'-'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>.'-session-'.<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('rowid')" href="../../_variables/rowid.html">$rowid</a>;
<a name="l1680"><span class="linenum">1680</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="function" onClick="logFunction('RELEASE_LOCK')" href="../../_functions/release_lock.html" onMouseOver="funcPopup(event,'release_lock')">RELEASE_LOCK</a>('<a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../../_variables/fullname.html">$fullname</a>')&quot;;
<a name="l1681"><span class="linenum">1681</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, null, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1682"><span class="linenum">1682</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1683"><span class="linenum">1683</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1684"><span class="linenum">1684</span></a>  
<a name="l1685"><span class="linenum">1685</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l1686"><span class="linenum">1686</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1687"><span class="linenum">1687</span></a>          }
<a name="l1688"><span class="linenum">1688</span></a>      }
<a name="l1689"><span class="linenum">1689</span></a>  
<a name="l1690"><span class="linenum">1690</span></a>      <span class="comment">/**</span>
<a name="l1691"><span class="linenum">1691</span></a>  <span class="comment">     * Are transactions supported?</span>
<a name="l1692"><span class="linenum">1692</span></a>  <span class="comment">     * It is not responsible to run productions servers</span>
<a name="l1693"><span class="linenum">1693</span></a>  <span class="comment">     * on databases without transaction support ;-)</span>
<a name="l1694"><span class="linenum">1694</span></a>  <span class="comment">     *</span>
<a name="l1695"><span class="linenum">1695</span></a>  <span class="comment">     * MyISAM does not support support transactions.</span>
<a name="l1696"><span class="linenum">1696</span></a>  <span class="comment">     *</span>
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment">     * You can override this via the dbtransactions option.</span>
<a name="l1698"><span class="linenum">1698</span></a>  <span class="comment">     *</span>
<a name="l1699"><span class="linenum">1699</span></a>  <span class="comment">     * @return bool</span>
<a name="l1700"><span class="linenum">1700</span></a>  <span class="comment">     */</span>
<a name="l1701"><span class="linenum">1701</span></a>      protected function <a class="function" onClick="logFunction('transactions_supported')" href="../../_functions/transactions_supported.html" onMouseOver="funcPopup(event,'transactions_supported')">transactions_supported</a>() {
<a name="l1702"><span class="linenum">1702</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a>)) {
<a name="l1703"><span class="linenum">1703</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a>;
<a name="l1704"><span class="linenum">1704</span></a>          }
<a name="l1705"><span class="linenum">1705</span></a>  
<a name="l1706"><span class="linenum">1706</span></a>  <span class="comment">        // this is all just guessing, might be better to just specify it in config.php</span>
<a name="l1707"><span class="linenum">1707</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbtransactions'])) {
<a name="l1708"><span class="linenum">1708</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dboptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/dboptions.html">dboptions</a>['dbtransactions'];
<a name="l1709"><span class="linenum">1709</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a>;
<a name="l1710"><span class="linenum">1710</span></a>          }
<a name="l1711"><span class="linenum">1711</span></a>  
<a name="l1712"><span class="linenum">1712</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a> = false;
<a name="l1713"><span class="linenum">1713</span></a>  
<a name="l1714"><span class="linenum">1714</span></a>          <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_dbengine')" href="../../_functions/get_dbengine.html" onMouseOver="funcPopup(event,'get_dbengine')">get_dbengine</a>();
<a name="l1715"><span class="linenum">1715</span></a>  
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment">        // Only will accept transactions if using compatible storage engine (more engines can be added easily BDB, Falcon...)</span>
<a name="l1717"><span class="linenum">1717</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../../_variables/engine.html">$engine</a>, array('InnoDB', 'INNOBASE', 'BDB', 'XtraDB', 'Aria', 'Falcon'))) {
<a name="l1718"><span class="linenum">1718</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a> = true;
<a name="l1719"><span class="linenum">1719</span></a>          }
<a name="l1720"><span class="linenum">1720</span></a>  
<a name="l1721"><span class="linenum">1721</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('transactions_supported')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/transactions_supported.html">transactions_supported</a>;
<a name="l1722"><span class="linenum">1722</span></a>      }
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>      <span class="comment">/**</span>
<a name="l1725"><span class="linenum">1725</span></a>  <span class="comment">     * Driver specific start of real database transaction,</span>
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment">     * this can not be used directly in code.</span>
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment">     * @return void</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment">     */</span>
<a name="l1729"><span class="linenum">1729</span></a>      protected function <a class="function" onClick="logFunction('begin_transaction')" href="../../_functions/begin_transaction.html" onMouseOver="funcPopup(event,'begin_transaction')">begin_transaction</a>() {
<a name="l1730"><span class="linenum">1730</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('transactions_supported')" href="../../_functions/transactions_supported.html" onMouseOver="funcPopup(event,'transactions_supported')">transactions_supported</a>()) {
<a name="l1731"><span class="linenum">1731</span></a>              return;
<a name="l1732"><span class="linenum">1732</span></a>          }
<a name="l1733"><span class="linenum">1733</span></a>  
<a name="l1734"><span class="linenum">1734</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED&quot;;
<a name="l1735"><span class="linenum">1735</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1736"><span class="linenum">1736</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1737"><span class="linenum">1737</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1738"><span class="linenum">1738</span></a>  
<a name="l1739"><span class="linenum">1739</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;START TRANSACTION&quot;;
<a name="l1740"><span class="linenum">1740</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1741"><span class="linenum">1741</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1742"><span class="linenum">1742</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1743"><span class="linenum">1743</span></a>      }
<a name="l1744"><span class="linenum">1744</span></a>  
<a name="l1745"><span class="linenum">1745</span></a>      <span class="comment">/**</span>
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment">     * Driver specific commit of real database transaction,</span>
<a name="l1747"><span class="linenum">1747</span></a>  <span class="comment">     * this can not be used directly in code.</span>
<a name="l1748"><span class="linenum">1748</span></a>  <span class="comment">     * @return void</span>
<a name="l1749"><span class="linenum">1749</span></a>  <span class="comment">     */</span>
<a name="l1750"><span class="linenum">1750</span></a>      protected function <a class="function" onClick="logFunction('commit_transaction')" href="../../_functions/commit_transaction.html" onMouseOver="funcPopup(event,'commit_transaction')">commit_transaction</a>() {
<a name="l1751"><span class="linenum">1751</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('transactions_supported')" href="../../_functions/transactions_supported.html" onMouseOver="funcPopup(event,'transactions_supported')">transactions_supported</a>()) {
<a name="l1752"><span class="linenum">1752</span></a>              return;
<a name="l1753"><span class="linenum">1753</span></a>          }
<a name="l1754"><span class="linenum">1754</span></a>  
<a name="l1755"><span class="linenum">1755</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;COMMIT&quot;;
<a name="l1756"><span class="linenum">1756</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1757"><span class="linenum">1757</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1758"><span class="linenum">1758</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1759"><span class="linenum">1759</span></a>      }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>      <span class="comment">/**</span>
<a name="l1762"><span class="linenum">1762</span></a>  <span class="comment">     * Driver specific abort of real database transaction,</span>
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment">     * this can not be used directly in code.</span>
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment">     * @return void</span>
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">     */</span>
<a name="l1766"><span class="linenum">1766</span></a>      protected function <a class="function" onClick="logFunction('rollback_transaction')" href="../../_functions/rollback_transaction.html" onMouseOver="funcPopup(event,'rollback_transaction')">rollback_transaction</a>() {
<a name="l1767"><span class="linenum">1767</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('transactions_supported')" href="../../_functions/transactions_supported.html" onMouseOver="funcPopup(event,'transactions_supported')">transactions_supported</a>()) {
<a name="l1768"><span class="linenum">1768</span></a>              return;
<a name="l1769"><span class="linenum">1769</span></a>          }
<a name="l1770"><span class="linenum">1770</span></a>  
<a name="l1771"><span class="linenum">1771</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;ROLLBACK&quot;;
<a name="l1772"><span class="linenum">1772</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_start')" href="../../_functions/query_start.html" onMouseOver="funcPopup(event,'query_start')">query_start</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, NULL, <a class="constant" onClick="logConstant('SQL_QUERY_AUX')" href="../../_constants/SQL_QUERY_AUX.html" onMouseOver="constPopup(event,'SQL_QUERY_AUX')">SQL_QUERY_AUX</a>);
<a name="l1773"><span class="linenum">1773</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mysqli')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mysqli.html">mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l1774"><span class="linenum">1774</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('query_end')" href="../../_functions/query_end.html" onMouseOver="funcPopup(event,'query_end')">query_end</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>          return true;
<a name="l1777"><span class="linenum">1777</span></a>      }
<a name="l1778"><span class="linenum">1778</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'release_lock': ['release_lock', 'Releases the lock for the given key. ', [['cache/classes','interfaces.php',219],['cache/classes','interfaces.php',263],['lib/classes/lock','db_record_lock_factory.php',163],['lib/classes/lock','lock_factory.php',90],['lib/dml','oci_native_moodle_package.sql',42],['lib/dml','oci_native_moodle_package.sql',94],['lib/classes/lock','file_lock_factory.php',171],['cache/classes','loaders.php',1343],['lib/classes/lock','postgres_lock_factory.php',204]], 10],
'store_settings': ['store_settings', 'Store various database settings ', [['lib/dml','moodle_database.php',294],['mod/workshop/allocation/scheduled','lib.php',212]], 7],
'get_session_lock': ['get_session_lock', 'Obtain session lock ', [['lib/dml','pgsql_native_moodle_database.php',1359],['lib/dml','oci_native_moodle_database.php',1749],['lib/dml','sqlsrv_native_moodle_database.php',1347],['lib/dml','moodle_database.php',2508],['lib/dml','mssql_native_moodle_database.php',1280],['lib/dml','mysqli_native_moodle_database.php',1646]], 10],
'normalise_value': ['normalise_value', 'Normalise values based in RDBMS dependencies (booleans, LOBs...) ', [['lib/dml','pgsql_native_moodle_database.php',584],['lib/dml','oci_native_moodle_database.php',673],['lib/dml','sqlsrv_native_moodle_database.php',574],['lib/dml','sqlite3_pdo_moodle_database.php',309],['lib/dml','mssql_native_moodle_database.php',505],['lib/dml','mysqli_native_moodle_database.php',841],['lib/dml/tests','dml_test.php',5418]], 21],
'fix_table_names': ['fix_table_names', 'Converts short table name {tablename} to real table name supporting temp tables ($this->unique_session_id based) if detected ', [['lib/dml','oci_native_moodle_database.php',292],['lib/dml','sqlsrv_native_moodle_database.php',272],['lib/dml','moodle_database.php',754],['lib/dml','mssql_native_moodle_database.php',272]], 3],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'get_lock': ['get_lock', 'Get the current lock for this task. ', [['lib/classes/task','task_base.php',69],['lib/classes/lock','db_record_lock_factory.php',109],['lib/classes/lock','lock_factory.php',77],['lib/dml','oci_native_moodle_package.sql',41],['lib/dml','oci_native_moodle_package.sql',77],['lib/classes/lock','file_lock_factory.php',125],['lib/classes/lock','postgres_lock_factory.php',171]], 22],
'get_dbcollation': ['get_dbcollation', 'Returns the current MySQL db collation. ', [['lib/dml','mysqli_native_moodle_database.php',219]], 6],
'strlen': ['strlen', 'Multibyte safe strlen() function, uses mbstring or iconv for UTF-8, falls back to typo3. ', [['lib/classes','text.php',281],['lib/typo3','class.t3lib_cs.php',1520]], 1698],
'import_record': ['import_record', 'Import a record into a table, id field is required. Safety checks are NOT carried out. Lobs are supported. ', [['lib/dml','pgsql_native_moodle_database.php',1046],['lib/dml','oci_native_moodle_database.php',1285],['lib/dml','sqlsrv_native_moodle_database.php',1014],['lib/dml','mssql_native_moodle_database.php',933],['lib/dml','mysqli_native_moodle_database.php',1331],['lib/dml/tests','dml_test.php',5428],['lib/dml','pdo_moodle_database.php',576]], 24],
'get_fieldset_sql': ['get_fieldset_sql', 'Selects records and return values (first field) as an array using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',800],['lib/dml','oci_native_moodle_database.php',1151],['lib/dml','sqlsrv_native_moodle_database.php',858],['lib/dml','mssql_native_moodle_database.php',775],['lib/dml','mysqli_native_moodle_database.php',1098],['lib/dml/tests','dml_test.php',5425],['lib/dml','pdo_moodle_database.php',287]], 51],
'get_row_format': ['get_row_format', 'Get the row format from the database schema. ', [['lib/dml','mysqli_native_moodle_database.php',285]], 5],
'create_recordset': ['create_recordset', '', [['lib/dml','pgsql_native_moodle_database.php',728],['lib/dml','oci_native_moodle_database.php',1098],['lib/dml','sqlsrv_native_moodle_database.php',800],['lib/dml','mssql_native_moodle_database.php',737],['lib/dml','mysqli_native_moodle_database.php',1045],['lib/dml','pdo_moodle_database.php',215]], 7],
'sql_concat_join': ['sql_concat_join', '', [['lib/dml','pgsql_native_moodle_database.php',1326],['lib/dml','oci_native_moodle_database.php',1564],['lib/dml','sqlsrv_native_moodle_database.php',1271],['lib/dml','sqlite3_pdo_moodle_database.php',365],['lib/dml','mssql_native_moodle_database.php',1206],['lib/dml','mysqli_native_moodle_database.php',1548],['lib/dml/tests','dml_test.php',5434],['lib/dml','pdo_moodle_database.php',540]], 2],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'sql_length': ['sql_length', 'Returns the SQL text to be used to calculate the length in characters of one expression. ', [['lib/dml','sqlsrv_native_moodle_database.php',1291],['lib/dml','moodle_database.php',2085],['lib/dml','mssql_native_moodle_database.php',1225],['lib/dml','mysqli_native_moodle_database.php',1565]], 4],
'sql_like': ['sql_like', 'Returns \'LIKE\' part of a query. ', [['lib/dml','pgsql_native_moodle_database.php',1273],['lib/dml','oci_native_moodle_database.php',1523],['lib/dml','sqlsrv_native_moodle_database.php',1224],['lib/dml','moodle_database.php',2004],['lib/dml','mssql_native_moodle_database.php',1160],['lib/dml','mysqli_native_moodle_database.php',1502]], 158],
'begin_transaction': ['begin_transaction', 'Driver specific start of real database transaction, this can not be used directly in code. ', [['lib/dml','pgsql_native_moodle_database.php',1435],['lib/dml','oci_native_moodle_database.php',1790],['lib/dml','sqlsrv_native_moodle_database.php',1406],['lib/dml','mssql_native_moodle_database.php',1342],['lib/dml','mysqli_native_moodle_database.php',1724],['lib/dml/tests','dml_test.php',5436],['lib/dml','pdo_moodle_database.php',544]], 2],
'get_indexes': ['get_indexes', 'Return table indexes - everything lowercased. ', [['lib/dml','pgsql_native_moodle_database.php',341],['lib/dml','oci_native_moodle_database.php',424],['lib/dml','sqlsrv_native_moodle_database.php',404],['lib/dml','sqlite3_pdo_moodle_database.php',164],['lib/dml','mssql_native_moodle_database.php',346],['lib/dml','mysqli_native_moodle_database.php',542],['lib/dml/tests','dml_test.php',5416]], 8],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'session_lock_supported': ['session_lock_supported', '', [['lib/dml','pgsql_native_moodle_database.php',1355],['lib/dml','oci_native_moodle_database.php',1745],['lib/dml','sqlsrv_native_moodle_database.php',1343],['lib/dml','moodle_database.php',2500],['lib/dml','mssql_native_moodle_database.php',1276],['lib/dml','mysqli_native_moodle_database.php',1642]], 9],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'rollback_transaction': ['rollback_transaction', 'Driver specific abort of real database transaction, this can not be used directly in code. ', [['lib/dml','pgsql_native_moodle_database.php',1465],['lib/dml','oci_native_moodle_database.php',1811],['lib/dml','sqlsrv_native_moodle_database.php',1434],['lib/dml','mssql_native_moodle_database.php',1371],['lib/dml','mysqli_native_moodle_database.php',1761],['lib/dml/tests','dml_test.php',5438],['lib/dml','pdo_moodle_database.php',565]], 3],
'get_dbengine': ['get_dbengine', 'Returns the current MySQL db engine. ', [['lib/dml','mysqli_native_moodle_database.php',144]], 7],
'set_field_select': ['set_field_select', 'Set a single field in every table record which match a particular WHERE clause. ', [['lib/dml','pgsql_native_moodle_database.php',1192],['lib/dml','oci_native_moodle_database.php',1387],['lib/dml','sqlsrv_native_moodle_database.php',1111],['lib/dml','mssql_native_moodle_database.php',1033],['lib/dml','mysqli_native_moodle_database.php',1427],['lib/dml/tests','dml_test.php',5431],['lib/dml','pdo_moodle_database.php',491]], 78],
'query_end': ['query_end', 'Called immediately after each db query. ', [['lib/dml','pgsql_native_moodle_database.php',235],['lib/dml','oci_native_moodle_database.php',253],['lib/dml','sqlsrv_native_moodle_database.php',244],['lib/dml','moodle_database.php',412],['lib/dml','mssql_native_moodle_database.php',234]], 135],
'sql_regex': ['sql_regex', '', [['lib/dml','pgsql_native_moodle_database.php',1341],['lib/dml','moodle_database.php',2221],['lib/dml','mysqli_native_moodle_database.php',1581]], 12],
'sql_cast_char2real': ['sql_cast_char2real', '', [['lib/dml','pgsql_native_moodle_database.php',1311],['lib/dml','oci_native_moodle_database.php',1515],['lib/dml','sqlsrv_native_moodle_database.php',1184],['lib/dml','moodle_database.php',1963],['lib/dml','mssql_native_moodle_database.php',1119],['lib/dml','mysqli_native_moodle_database.php',1498]], 10],
'make': ['make', '', [['mod/quiz/accessrule/delaybetweenattempts','rule.php',40],['admin/tool/generator/classes','site_backend.php',89],['mod/quiz/accessrule/numattempts','rule.php',40],['lib/htmlpurifier/HTMLPurifier','AttrDef.php',67],['mod/quiz/accessrule/securewindow','rule.php',55],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',45],['mod/quiz/accessrule/ipaddress','rule.php',40],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',96],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger.js',655],['mod/quiz/accessrule/safebrowser','rule.php',40],['admin/tool/generator/classes','course_backend.php',202],['backup/util/ui','backup_ui_setting.class.php',234],['admin/tool/assignmentupgrade','locallib.php',110],['cache/classes','loaders.php',163],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',38],['mod/quiz/accessrule','accessrulebase.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',60],['mod/quiz/accessrule/timelimit','rule.php',41],['mod/quiz/accessrule/openclosedate','rule.php',40],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger-debug.js',655],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',64],['lib/htmlpurifier/HTMLPurifier','Length.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',33],['mod/quiz/accessrule/password','rule.php',40]], 163],
'query': ['query', 'PEAR DB Compat - do not use internally. ', [['lib/adodb','adodb.inc.php',785],['lib/google/src/Google/Service','Dfareporting.php',389],['lib/google/src/Google/Service','Dfareporting.php',598],['lib/google/src/Google/Service','Bigquery.php',713],['lib/google/src/Google/Service','Webmasters.php',443],['lib/google/src/Google/Service','YouTubeAnalytics.php',230],['lib/alfresco/Service','Session.php',212],['repository/googledocs','lib.php',288],['lib/google/src/Google/Service','Calendar.php',1754]], 427],
'get_settings_hash': ['get_settings_hash', 'Returns a hash for the settings used during connection. ', [['lib/dml','moodle_database.php',313]], 7],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1715],['lib/google/src/Google/Service','Games.php',2099]], 949],
'get_last_error': ['get_last_error', 'Returns last error reported by database engine. ', [['lib/dml','pgsql_native_moodle_database.php',296],['lib/dml','oci_native_moodle_database.php',321],['lib/dml','sqlsrv_native_moodle_database.php',302],['lib/dml','mssql_native_moodle_database.php',301],['lib/dml','mysqli_native_moodle_database.php',504],['lib/dml/tests','dml_test.php',5414],['lib','csslib.php',2359],['lib/dml','pdo_moodle_database.php',154]], 8],
'sql_concat': ['sql_concat', '', [['lib/dml','pgsql_native_moodle_database.php',1315],['lib/dml','oci_native_moodle_database.php',1550],['lib/dml','sqlsrv_native_moodle_database.php',1257],['lib/dml','sqlite3_pdo_moodle_database.php',353],['lib/dml','mssql_native_moodle_database.php',1194],['lib/dml','mysqli_native_moodle_database.php',1531],['lib/dml/tests','dml_test.php',5433],['lib/dml','pdo_moodle_database.php',536]], 73],
'create_database': ['create_database', 'Attempt to create the database ', [['lib/dml','moodle_database.php',327],['lib/dml','sqlite3_pdo_moodle_database.php',80],['lib/dml','mysqli_native_moodle_database.php',47]], 1],
'setup_is_unicodedb': ['setup_is_unicodedb', 'Is db in unicode mode? ', [['lib/dml','pgsql_native_moodle_database.php',610],['lib/dml','oci_native_moodle_database.php',870],['lib/dml','moodle_database.php',1059],['lib/dml','mysqli_native_moodle_database.php',866]], 4],
'get_dbtype': ['get_dbtype', 'Returns more specific database driver type Note: can be used before connect() ', [['lib/dml','pgsql_native_moodle_database.php',70],['lib/dml','oci_native_moodle_database.php',76],['lib/dml','mariadb_native_moodle_database.php',68],['lib/dml','sqlsrv_native_moodle_database.php',84],['lib/dml','sqlite3_pdo_moodle_database.php',59],['lib/dml','mssql_native_moodle_database.php',65],['lib/dml','mysqli_native_moodle_database.php',126],['lib/dml/tests','dml_test.php',5407]], 5],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1035],['lib/dml','moodle_database.php',1457]], 140],
'set': ['set', '', [['lib/adodb','adodb-active-recordx.inc.php',620],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',286],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/portfolio','plugin.php',647],['lib/portfolio','exporter.php',154],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/pear/Net/GeoIP','Location.php',125],['cache/classes','interfaces.php',68],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['lib/google/src/Google/Cache','Memcache.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['cache','disabledlib.php',81],['grade/report/singleview/classes/local/ui','finalgrade.php',136],['cache/stores/memcached','lib.php',320],['lib/google/src/Google/Service','YouTube.php',3122],['lib/google/src/Google/Service','YouTube.php',3481],['lib/zend/Zend','Registry.php',153],['lib/phpmailer','class.phpmailer.php',3144],['grade/report/singleview/classes/local/ui','feedback.php',102],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/google/src/Google/Service','ShoppingContent.php',919],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['grade/report/singleview/classes/local/ui','override.php',95],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['cache/stores/static','lib.php',265],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/portfolio','caller.php',187],['lib/zend/Zend','Date.php',1056],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['cache/stores/memcache','lib.php',358],['lib','filelib.php',3615],['cache/stores/session','lib.php',290],['cache/classes','dummystore.php',170],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['grade/report/singleview/classes/local/ui','exclude.php',77],['cache/classes','loaders.php',484],['cache/classes','loaders.php',1370],['cache/classes','loaders.php',1815],['cache/stores/mongodb','lib.php',305],['lib/zend/Zend/Service','Audioscrobbler.php',125],['cache/stores/file','lib.php',425],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['lib/google/src/Google/Cache','Null.php',42],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/google/src/Google/Cache','File.php',84],['lib','navigationlib.php',5017],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Cache','Apc.php',80],['lib/adodb','adodb-active-record.inc.php',569],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203]], 4687],
'transactions_supported': ['transactions_supported', 'It is time to require transactions everywhere. ', [['lib/dml','mariadb_native_moodle_database.php',91],['lib/dml','moodle_database.php',2309],['lib/dml','mysqli_native_moodle_database.php',1690]], 4],
'get_dblibrary': ['get_dblibrary', 'Returns general database library name Note: can be used before connect() ', [['lib/dml','pgsql_native_moodle_database.php',79],['lib/dml','oci_native_moodle_database.php',85],['lib/dml','sqlsrv_native_moodle_database.php',93],['lib/dml','mssql_native_moodle_database.php',74],['lib/dml','mysqli_native_moodle_database.php',135],['lib/dml/tests','dml_test.php',5408],['lib/dml','pdo_moodle_database.php',104]], 2],
'get_tables': ['get_tables', 'Return tables in database WITHOUT current prefix. ', [['lib/dml','pgsql_native_moodle_database.php',304],['lib/dml','oci_native_moodle_database.php',384],['lib/dml','sqlsrv_native_moodle_database.php',366],['lib/dml','sqlite3_pdo_moodle_database.php',137],['lib/dml','mssql_native_moodle_database.php',309],['lib/dml','mysqli_native_moodle_database.php',512],['lib/dml/tests','dml_test.php',5415]], 38],
'commit_transaction': ['commit_transaction', 'Driver specific commit of real database transaction, this can not be used directly in code. ', [['lib/dml','pgsql_native_moodle_database.php',1450],['lib/dml','oci_native_moodle_database.php',1799],['lib/dml','sqlsrv_native_moodle_database.php',1423],['lib/dml','mssql_native_moodle_database.php',1357],['lib/dml','mysqli_native_moodle_database.php',1745],['lib/dml/tests','dml_test.php',5437],['lib/dml','pdo_moodle_database.php',554]], 2],
'export_table_recordset': ['export_table_recordset', 'Get all records from a table. ', [['lib/dml','moodle_database.php',1222],['lib/dml','mysqli_native_moodle_database.php',1024]], 2],
'connect': ['connect', 'Connect to the remote server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',185],['lib/adodb','adodb.inc.php',528],['lib/dml','pgsql_native_moodle_database.php',106],['lib/dml','oci_native_moodle_database.php',122],['lib/zend/Zend/Http/Client/Adapter','Test.php',124],['lib/google/src/Google/Cache','Memcache.php',157],['lib/dml','sqlsrv_native_moodle_database.php',120],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',66],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',79],['lib/phpmailer','class.smtp.php',220],['lib/zend/Zend/Http/Client/Adapter','Interface.php',45],['lib/adodb','adodb-pear.inc.php',120],['lib/jabber/XMPP','XMLStream.php',288],['lib/dml','mssql_native_moodle_database.php',101],['lib/adodb','adodb-memcache.lib.inc.php',59],['lib/dml','mysqli_native_moodle_database.php',404],['lib/zend/Zend/Http/Client/Adapter','Curl.php',193],['lib/zend/Zend/Amf/Adobe','DbInspector.php',76],['lib/dml/tests','dml_test.php',5411],['lib/jabber/XMPP','BOSH.php',51],['lib/dml','pdo_moodle_database.php',51]], 55],
'concat': ['concat', 'concat ', [['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',985],['lib/adodb','adodb.inc.php',2470],['lib/adodb/drivers','adodb-pdo_mysql.inc.php',44],['lib/adodb/drivers','adodb-pdo.inc.php',178],['lib/adodb/drivers','adodb-mysqli.inc.php',455],['lib/adodb/drivers','adodb-mssql.inc.php',668],['lib/adodb/drivers','adodb-mssqlnative.inc.php',514],['lib/adodb/drivers','adodb-mysql.inc.php',430],['lib/adodb/drivers','adodb-fbsql.inc.php',54]], 962],
'get_dbfamily': ['get_dbfamily', 'Returns database family type - describes SQL dialect Note: can be used before connect() ', [['lib/dml','pgsql_native_moodle_database.php',61],['lib/dml','oci_native_moodle_database.php',67],['lib/dml','sqlsrv_native_moodle_database.php',75],['lib/dml','sqlite3_pdo_moodle_database.php',50],['lib/dml','mssql_native_moodle_database.php',56],['lib/dml','mysqli_native_moodle_database.php',117],['lib/dml/tests','dml_test.php',5406]], 59],
'normalise_limit_from_num': ['normalise_limit_from_num', 'Ensures that limit params are numeric and positive integers, to be passed to the database. We explicitly treat null, \'\' and -1 as 0 in order to provide compatibility with how limit values have been passed historically. ', [['lib/dml','moodle_database.php',940]], 7],
'get_temptables': ['get_temptables', 'Returns all the tablenames (without prefix) existing in the store ', [['lib/dml','moodle_temptables.php',87]], 6],
'driver_installed': ['driver_installed', 'Detects if all needed PHP stuff installed. Note: can be used before connect() ', [['lib/dml','pgsql_native_moodle_database.php',49],['lib/dml','oci_native_moodle_database.php',55],['lib/dml','sqlsrv_native_moodle_database.php',56],['lib/dml','sqlite3_pdo_moodle_database.php',38],['lib/dml','mssql_native_moodle_database.php',44],['lib/dml','mysqli_native_moodle_database.php',105],['lib/dml/tests','dml_test.php',5405]], 13],
'get': ['get', 'Gets a customer resource if one exists and is owned by the reseller. (customers.get) ', [['lib/google/src/Google/Service','Reseller.php',294],['lib/google/src/Google/Service','Reseller.php',457],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['lib/google/src/Google/Service','Replicapoolupdater.php',275],['lib/zend/Zend/Gdata','Gapps.php',187],['lib/google/src/Google/Service','Fusiontables.php',658],['lib/google/src/Google/Service','Fusiontables.php',823],['lib/google/src/Google/Service','Fusiontables.php',947],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',148],['lib/htmlpurifier/HTMLPurifier','Context.php',36],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','Blogger.php',931],['lib/google/src/Google/Service','Blogger.php',962],['lib/google/src/Google/Service','Blogger.php',1066],['lib/google/src/Google/Service','Blogger.php',1184],['lib/google/src/Google/Service','Blogger.php',1226],['lib/google/src/Google/Service','Blogger.php',1365],['lib/google/src/Google/Service','Blogger.php',1448],['lib/google/src/Google/Service','Blogger.php',1669],['lib/google/src/Google/Service','Doubleclicksearch.php',256],['lib/google/src/Google/Service','Doubleclicksearch.php',380],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','AdExchangeBuyer.php',349],['lib/google/src/Google/Service','AdExchangeBuyer.php',419],['lib/google/src/Google/Service','AdExchangeBuyer.php',460],['lib/google/src/Google/Service','AdExchangeBuyer.php',528],['lib/google/src/Google/Service','AdExchangeBuyer.php',620],['lib/google/src/Google/Service','Manager.php',255],['lib/google/src/Google/Service','Manager.php',334],['lib/google/src/Google/Service','Reports.php',374],['lib/google/src/Google/Service','Reports.php',408],['lib/portfolio','exporter.php',134],['lib','webdavlib.php',264],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','Gmail.php',702],['lib/google/src/Google/Service','Gmail.php',859],['lib/google/src/Google/Service','Gmail.php',952],['lib/google/src/Google/Service','Gmail.php',1118],['lib/google/src/Google/Service','Gmail.php',1162],['lib/google/src/Google/Service','Plus.php',352],['lib/google/src/Google/Service','Plus.php',427],['lib/google/src/Google/Service','Plus.php',547],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/testing/classes','nasty_strings.php',73],['lib/google/src/Google/Service','Mirror.php',437],['lib/google/src/Google/Service','Mirror.php',522],['lib/google/src/Google/Service','Mirror.php',562],['lib/google/src/Google/Service','Mirror.php',673],['lib/google/src/Google/Service','Mirror.php',785],['lib/google/src/Google/Service','Genomics.php',645],['lib/google/src/Google/Service','Genomics.php',744],['lib/google/src/Google/Service','Genomics.php',891],['lib/google/src/Google/Service','Genomics.php',997],['lib/google/src/Google/Service','Genomics.php',1187],['lib/google/src/Google/Service','Genomics.php',1269],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1430],['lib/google/src/Google/Service','Urlshortener.php',108],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Dfareporting.php',421],['lib/google/src/Google/Service','Dfareporting.php',484],['lib/google/src/Google/Service','Dfareporting.php',626],['lib/google/src/Google/Service','Dfareporting.php',675],['lib/google/src/Google/Service','PlusDomains.php',467],['lib/google/src/Google/Service','PlusDomains.php',592],['lib/google/src/Google/Service','PlusDomains.php',718],['lib/google/src/Google/Service','PlusDomains.php',812],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','Licensing.php',236],['lib/google/src/Google/Service','Drive.php',1277],['lib/google/src/Google/Service','Drive.php',1313],['lib/google/src/Google/Service','Drive.php',1366],['lib/google/src/Google/Service','Drive.php',1476],['lib/google/src/Google/Service','Drive.php',1550],['lib/google/src/Google/Service','Drive.php',1706],['lib/google/src/Google/Service','Drive.php',1946],['lib/google/src/Google/Service','Drive.php',2016],['lib/google/src/Google/Service','Drive.php',2147],['lib/google/src/Google/Service','Drive.php',2241],['lib/google/src/Google/Service','Drive.php',2309],['lib/google/src/Google/Service','Drive.php',2428],['lib/google/src/Google/Service','Books.php',1343],['lib/google/src/Google/Service','Books.php',1512],['lib/google/src/Google/Service','Books.php',1564],['lib/google/src/Google/Service','Books.php',1639],['lib/google/src/Google/Service','Books.php',1819],['lib/google/src/Google/Service','Books.php',1960],['lib/google/src/Google/Service','Books.php',2077],['lib/google/src/Google/Service','Books.php',2175],['lib/google/src/Google/Service','Books.php',2207],['lib/zend/Zend/Gdata','App.php',847],['lib/google/src/Google/Service','AdExchangeSeller.php',443],['lib/google/src/Google/Service','AdExchangeSeller.php',551],['lib/google/src/Google/Service','AdExchangeSeller.php',665],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['lib/google/src/Google/Cache','Memcache.php',72],['lib/google/src/Google/Service','Bigquery.php',533],['lib/google/src/Google/Service','Bigquery.php',633],['lib/google/src/Google/Service','Bigquery.php',838],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['cache','disabledlib.php',55],['lib/zend/Zend/Server','Cache.php',78],['lib/google/src/Google/Service','Groupssettings.php',107],['cache/stores/memcached','lib.php',285],['lib/google/src/Google/Service','Coordinate.php',476],['lib/google/src/Google/Service','Coordinate.php',642],['lib/zend/Zend','Registry.php',130],['lib/google/src/Google/Service','Webmasters.php',314],['lib/google/src/Google/Service','Webmasters.php',403],['lib/google/src/Google/Service','Webmasters.php',479],['lib/google/src/Google/Service','Autoscaler.php',330],['lib/google/src/Google/Service','Autoscaler.php',444],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/google/src/Google/Service','ShoppingContent.php',567],['lib/google/src/Google/Service','ShoppingContent.php',675],['lib/google/src/Google/Service','ShoppingContent.php',749],['lib/google/src/Google/Service','ShoppingContent.php',857],['lib/google/src/Google/Service','ShoppingContent.php',985],['lib/google/src/Google/Service','ShoppingContent.php',1062],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/editor/tinymce/classes','plugin.php',447],['mod/lesson','locallib.php',3239],['lib/horde/framework/Horde','Variables.php',135],['lib/google/src/Google/Service','SQLAdmin.php',528],['lib/google/src/Google/Service','SQLAdmin.php',664],['lib/google/src/Google/Service','SQLAdmin.php',872],['lib/google/src/Google/Service','SQLAdmin.php',941],['lib/google/src/Google/Service','Fitness.php',363],['lib/google/src/Google/Service','Fitness.php',489],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1063],['lib/google/src/Google/Service','TagManager.php',1155],['lib/google/src/Google/Service','TagManager.php',1248],['lib/google/src/Google/Service','TagManager.php',1341],['lib/google/src/Google/Service','TagManager.php',1434],['lib/google/src/Google/Service','TagManager.php',1528],['lib/google/src/Google/Service','TagManager.php',1622],['lib/google/src/Google/Service','TagManager.php',1772],['lib/google/src/Google/Service','Directory.php',1315],['lib/google/src/Google/Service','Directory.php',1383],['lib/google/src/Google/Service','Directory.php',1490],['lib/google/src/Google/Service','Directory.php',1656],['lib/google/src/Google/Service','Directory.php',1783],['lib/google/src/Google/Service','Directory.php',1853],['lib/google/src/Google/Service','Directory.php',1949],['lib/google/src/Google/Service','Directory.php',2056],['lib/google/src/Google/Service','Directory.php',2160],['lib/google/src/Google/Service','Directory.php',2218],['lib/google/src/Google/Service','Directory.php',2493],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['cache/stores/static','lib.php',220],['question/engine','states.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/google/src/Google/Service','AppState.php',170],['lib/google/src/Google/Service','Taskqueue.php',263],['lib/google/src/Google/Service','Taskqueue.php',307],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Container.php',364],['lib/google/src/Google/Service','Container.php',411],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','AndroidPublisher.php',1194],['lib/google/src/Google/Service','AndroidPublisher.php',1296],['lib/google/src/Google/Service','AndroidPublisher.php',1437],['lib/google/src/Google/Service','AndroidPublisher.php',1500],['lib/google/src/Google/Service','AndroidPublisher.php',1723],['lib/google/src/Google/Service','AndroidPublisher.php',1811],['lib/google/src/Google/Service','AndroidPublisher.php',1875],['lib/google/src/Google/Service','AndroidPublisher.php',1987],['lib/google/src/Google/Service','AndroidPublisher.php',2112],['lib/google/src/Google/Service','AndroidPublisher.php',2182],['lib/zend/Zend','Date.php',516],['lib/google/src/Google/Service','AdSenseHost.php',644],['lib/google/src/Google/Service','AdSenseHost.php',685],['lib/google/src/Google/Service','AdSenseHost.php',750],['lib/google/src/Google/Service','AdSenseHost.php',917],['lib/google/src/Google/Service','AdSenseHost.php',1025],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Games.php',1219],['lib/google/src/Google/Service','Games.php',1338],['lib/google/src/Google/Service','Games.php',1440],['lib/google/src/Google/Service','Games.php',1698],['lib/google/src/Google/Service','Games.php',1805],['lib/google/src/Google/Service','Games.php',1947],['lib/google/src/Google/Service','Games.php',2081],['lib','filelib.php',3341],['lib','filelib.php',3589],['lib','oauthlib.php',302],['lib/google/src/Google/Service','MapsEngine.php',1529],['lib/google/src/Google/Service','MapsEngine.php',1708],['lib/google/src/Google/Service','MapsEngine.php',2005],['lib/google/src/Google/Service','MapsEngine.php',2267],['lib/google/src/Google/Service','MapsEngine.php',2359],['lib/google/src/Google/Service','MapsEngine.php',2665],['lib/google/src/Google/Service','MapsEngine.php',2926],['lib/google/src/Google/Service','MapsEngine.php',3117],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','SiteVerification.php',151],['lib/horde/framework/Horde/Support','Array.php',30],['lib/google/src/Google/Service','Prediction.php',275],['cache/stores/session','lib.php',225],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Compute.php',2828],['lib/google/src/Google/Service','Compute.php',2911],['lib/google/src/Google/Service','Compute.php',3050],['lib/google/src/Google/Service','Compute.php',3155],['lib/google/src/Google/Service','Compute.php',3240],['lib/google/src/Google/Service','Compute.php',3377],['lib/google/src/Google/Service','Compute.php',3478],['lib/google/src/Google/Service','Compute.php',3558],['lib/google/src/Google/Service','Compute.php',3676],['lib/google/src/Google/Service','Compute.php',3741],['lib/google/src/Google/Service','Compute.php',3876],['lib/google/src/Google/Service','Compute.php',3957],['lib/google/src/Google/Service','Compute.php',4132],['lib/google/src/Google/Service','Compute.php',4306],['lib/google/src/Google/Service','Compute.php',4355],['lib/google/src/Google/Service','Compute.php',4421],['lib/google/src/Google/Service','Compute.php',4486],['lib/google/src/Google/Service','Compute.php',4559],['lib/google/src/Google/Service','Compute.php',4611],['lib/google/src/Google/Service','Compute.php',4675],['lib/google/src/Google/Service','Compute.php',4756],['lib/google/src/Google/Service','Compute.php',4822],['lib/google/src/Google/Service','Compute.php',4943],['lib/google/src/Google/Service','Compute.php',5085],['lib/google/src/Google/Service','Compute.php',5244],['lib/google/src/Google/Service','Compute.php',5376],['lib/google/src/Google/Service','Compute.php',5428],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Calendar.php',900],['lib/google/src/Google/Service','Calendar.php',1053],['lib/google/src/Google/Service','Calendar.php',1241],['lib/google/src/Google/Service','Calendar.php',1337],['lib/google/src/Google/Service','Calendar.php',1379],['lib/google/src/Google/Service','Calendar.php',1780],['lib/google/src/Google/Service','Analytics.php',1891],['lib/google/src/Google/Service','Analytics.php',1940],['lib/google/src/Google/Service','Analytics.php',1987],['lib/google/src/Google/Service','Analytics.php',2309],['lib/google/src/Google/Service','Analytics.php',2429],['lib/google/src/Google/Service','Analytics.php',2522],['lib/google/src/Google/Service','Analytics.php',2648],['lib/google/src/Google/Service','Analytics.php',2867],['lib/google/src/Google/Service','Analytics.php',3004],['lib/google/src/Google/Service','Analytics.php',3095],['lib/google/src/Google/Service','Analytics.php',3197],['lib/google/src/Google/Service','Analytics.php',3308],['lib/google/src/Google/Service','Tasks.php',322],['lib/google/src/Google/Service','Tasks.php',441],['lib/behat/classes','behat_context_helper.php',66],['backup/cc/cc_lib/gral_lib','cssparser.php',137],['cache/classes','loaders.php',270],['cache/classes','loaders.php',1442],['cache/classes','loaders.php',1749],['cache/stores/mongodb','lib.php',252],['lib/zend/Zend/Service','Audioscrobbler.php',110],['lib/google/src/Google/Service','Oauth2.php',143],['lib/google/src/Google/Service','Oauth2.php',180],['cache/stores/file','lib.php',329],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Storage.php',962],['lib/google/src/Google/Service','Storage.php',1078],['lib/google/src/Google/Service','Storage.php',1244],['lib/google/src/Google/Service','Storage.php',1370],['lib/google/src/Google/Service','Storage.php',1592],['lib/google/src/Google/Cache','Null.php',34],['lib/google/src/Google/Service','AdSense.php',1075],['lib/google/src/Google/Service','AdSense.php',1154],['lib/google/src/Google/Service','AdSense.php',1302],['lib/google/src/Google/Service','AdSense.php',1518],['lib/google/src/Google/Service','AdSense.php',1630],['lib/google/src/Google/Service','AdSense.php',1772],['lib/google/src/Google/Service','AdSense.php',2046],['lib/google/src/Google/Service','Pubsub.php',254],['lib/google/src/Google/Service','Pubsub.php',393],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['lib/google/src/Google/Cache','File.php',45],['lib','navigationlib.php',382],['lib','navigationlib.php',833],['lib','navigationlib.php',2693],['lib','navigationlib.php',3126],['lib/google/src/Google/Service','Dns.php',299],['lib/google/src/Google/Service','Dns.php',385],['lib/google/src/Google/Service','Dns.php',434],['lib/mustache/src/Mustache','HelperCollection.php',81],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapool.php',416],['lib/google/src/Google/Service','Replicapool.php',571],['lib/google/src/Google/Service','Resourceviews.php',350],['lib/google/src/Google/Service','Resourceviews.php',435],['lib','coursecatlib.php',215],['lib/google/src/Google/Cache','Apc.php',50],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163]], 21003],
'get_server_info': ['get_server_info', 'Returns database server info array ', [['lib/dml','pgsql_native_moodle_database.php',262],['lib/dml','oci_native_moodle_database.php',274],['lib/dml','mariadb_native_moodle_database.php',77],['lib/dml','sqlsrv_native_moodle_database.php',253],['lib/dml','mssql_native_moodle_database.php',245],['lib/dml','mysqli_native_moodle_database.php',488],['lib/dml/tests','dml_test.php',5412],['lib/dml','pdo_moodle_database.php',131]], 8],
'get_name': ['get_name', 'Return localised event name. ', [['report/log/classes/event','user_report_viewed.php',54],['mod/wiki/classes/event','page_deleted.php',54],['mod/forum/classes/message/inbound','reply_handler.php',50],['mod/chat/classes/event','sessions_viewed.php',65],['mod/glossary/classes/event','category_deleted.php',46],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['lib/classes/event','tag_updated.php',58],['lib/classes/event','course_resources_list_viewed.php',60],['mod/lesson/classes/event','content_page_viewed.php',48],['lib/classes/event','blog_association_created.php',56],['lib/classes/event','user_profile_viewed.php',56],['mod/feedback/classes/event','response_submitted.php',60],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','badge_awarded.php',54],['report/outline/classes/event','report_viewed.php',54],['question/classes/bank','checkbox_column.php',32],['mod/assign/classes/event','extension_granted.php',77],['admin/tool/capability/classes/event','report_viewed.php',47],['portfolio/picasa','lib.php',33],['lib/classes/event','message_viewed.php',54],['lib/classes/event','course_category_created.php',48],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/task','context_cleanup_task.php',32],['mod/survey/classes/event','response_submitted.php',53],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['cache/classes','definition.php',604],['report/loglive/classes/event','report_viewed.php',48],['mod/forum/classes/event','post_deleted.php',67],['mod/assign/classes/event','submission_duplicated.php',77],['mod/chat/classes/event','message_sent.php',59],['mod/workshop/classes/event','submission_created.php',63],['lib/classes/event','note_updated.php',56],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/feedback/classes/event','response_deleted.php',57],['lib/classes/event','course_module_instance_list_viewed.php',75],['mod/assign/classes/event','submission_locked.php',78],['enrol/imsenterprise/classes/task','cron_task.php',34],['mod/lesson/classes/event','page_updated.php',72],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['mod/quiz/classes/event','attempt_preview_started.php',54],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/task','calendar_cron_task.php',31],['mod/quiz/classes/event','report_viewed.php',56],['mod/lesson/classes/event','question_answered.php',54],['lib/portfolio','plugin.php',120],['mod/forum/classes/event','discussion_viewed.php',60],['mod/workshop/classes/event','submission_viewed.php',63],['lib/classes/task','registration_cron_task.php',31],['mod/assign/submission/file','locallib.php',44],['mod/assign/classes/event','submission_updated.php',57],['mod/workshop/classes/event','submission_reassessed.php',77],['mod/glossary/classes/event','entry_deleted.php',54],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','user_created.php',48],['question/classes/bank','preview_action_column.php',26],['mod/data/classes/event','field_updated.php',57],['mod/assign/submission/onlinetext','locallib.php',40],['mod/data/classes/event','template_updated.php',56],['lib/classes/event','comment_created.php',58],['lib/classes/event','cohort_deleted.php',49],['lib/grade','grade_item.php',1274],['mod/scorm/classes/event','tracks_viewed.php',64],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','course_viewed.php',75],['grade/report/overview/classes/event','grade_report_viewed.php',48],['lib/classes/task','stats_cron_task.php',31],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','course_content_deleted.php',54],['lib/classes/task','backup_cleanup_task.php',31],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/quiz/classes/event','attempt_abandoned.php',63],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','phase_switched.php',75],['lib/classes/event','base.php',282],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','content_viewed.php',80],['backup/util/ui','backup_ui.class.php',194],['lib/classes/event','course_completion_updated.php',47],['report/completion/classes/event','report_viewed.php',49],['lib/dml','pgsql_native_moodle_database.php',88],['backup/util/settings','base_setting.class.php',145],['lib/classes/task','messaging_cleanup_task.php',31],['question/classes/bank','modifier_name_column.php',27],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_reset_ended.php',53],['mod/choice/classes/event','answer_submitted.php',72],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/wiki/classes/event','page_diff_viewed.php',55],['lib/classes/event','course_category_updated.php',51],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/task','session_cleanup_task.php',31],['lib/classes/task','completion_cron_task.php',31],['lib/classes/event','webservice_service_created.php',65],['lib/classes/event','course_created.php',55],['lib/dml','oci_native_moodle_database.php',94],['mod/lesson/classes/event','lesson_started.php',48],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','calendar_event_deleted.php',58],['backup/util/plan','base_task.class.php',58],['lib/classes/event','group_created.php',65],['mod/quiz/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['repository/coursefiles','lib.php',183],['mod/assign/classes/event','submission_viewed.php',76],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/event','user_password_updated.php',70],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['backup/util/ui','restore_ui.class.php',349],['lib/classes/event','user_loggedinas.php',57],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['lib','modinfolib.php',1285],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/forum/classes/event','discussion_moved.php',66],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['mod/survey/classes/event','report_downloaded.php',55],['mod/wiki/classes/event','page_updated.php',54],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','user_list_viewed.php',56],['mod/forum/classes/event','readtracking_disabled.php',64],['lib/classes/event','comments_viewed.php',51],['lib/classes/event','cohort_member_added.php',49],['lib/classes/event','grouping_created.php',65],['lib/classes/event','recent_activity_viewed.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/dml','sqlsrv_native_moodle_database.php',102],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['question/classes/bank','question_name_column.php',28],['lib/classes/event','user_login_failed.php',56],['lib/classes/event','message_contact_added.php',48],['lib','enrollib.php',1075],['question/classes/bank','question_text_row.php',35],['lib/classes/event','role_allow_assign_updated.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['user/selector','lib.php',309],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/classes/event','email_failed.php',48],['portfolio/flickr','lib.php',41],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/classes/event','tag_removed.php',58],['mod/lesson/classes/event','highscores_viewed.php',48],['report/stats/classes/event','user_report_viewed.php',48],['mod/quiz/classes/event','group_override_deleted.php',54],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/log','reader.php',30],['mod/lesson/classes/event','question_viewed.php',54],['mod/scorm/classes/event','interactions_viewed.php',63],['lib/classes/event','course_module_updated.php',57],['mod/forum/classes/event','discussion_subscription_created.php',66],['lib/classes/task','plagiarism_cron_task.php',31],['mod/quiz/classes/event','question_manually_graded.php',55],['lib/classes/event','mnet_access_control_created.php',57],['lib/classes/event','role_assigned.php',56],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/lti/classes/local/ltiservice','service_base.php',87],['lib/classes/event','unknown_logged.php',43],['lib/simplepie/library/SimplePie','Author.php',106],['mod/scorm/classes/event','user_report_viewed.php',62],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['mod/forum/classes/task','cron_task.php',30],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','user_updated.php',48],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','comment_deleted.php',58],['mod/assign/classes/event','marker_updated.php',89],['lib/classes/event','webservice_login_failed.php',71],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','cohort_updated.php',49],['mod/assign/submission/comments','locallib.php',39],['lib/editor/tinymce/classes','plugin.php',101],['mod/forum/classes/event','post_updated.php',67],['mod/book/classes/event','chapter_viewed.php',79],['portfolio/download','lib.php',9],['lib/classes/event','note_deleted.php',56],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/task','file_trash_cleanup_task.php',31],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/book/classes/event','chapter_deleted.php',79],['lib/classes/event','course_deleted.php',56],['lib/classes/event','blog_entry_deleted.php',53],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['question/classes/bank','copy_action_column.php',35],['mod/assign/feedback/editpdf','locallib.php',43],['lib/classes/event','webservice_token_created.php',65],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','group_updated.php',65],['mod/quiz/classes/event','attempt_started.php',56],['mod/lesson/classes/event','group_override_updated.php',54],['lib/classes/event','course_module_viewed.php',62],['lib/classes/event','mnet_access_control_updated.php',57],['mod/quiz/classes/question/bank','add_action_column.php',45],['question/classes/bank','edit_action_column.php',35],['lib/classes/message/inbound','private_files_handler.php',56],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/quiz/classes/event','attempt_submitted.php',63],['mod/data/classes/event','field_created.php',58],['lib/classes/task','automated_backup_task.php',31],['lib/classes/event','question_category_created.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['backup/util/ui','restore_ui_stage.class.php',75],['backup/converter/moodle1','lib.php',1033],['mod/lesson/classes/event','group_override_created.php',55],['mod/workshop/classes/event','assessments_reset.php',74],['mod/lesson/classes/event','lesson_resumed.php',48],['mod/assign/classes/event','feedback_viewed.php',76],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['lib/classes/event','blog_entry_updated.php',74],['report/questioninstances/classes/event','report_viewed.php',55],['mod/assign/classes/event','submission_form_viewed.php',82],['mod/folder/classes/event','folder_updated.php',48],['mod/assign/classes/event','submission_created.php',57],['mod/assign/classes/event','statement_accepted.php',77],['lib/classes/event','grade_deleted.php',94],['lib/classes/event','role_capabilities_updated.php',51],['lib/classes/event','blog_entries_viewed.php',62],['lib/tests','messageinbound_test.php',170],['mod/wiki/classes/event','page_viewed.php',48],['lib/classes/event','group_deleted.php',65],['question/classes/bank','delete_action_column.php',36],['lib/classes/event','webservice_token_sent.php',56],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['lib/classes/task','create_contexts_task.php',31],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/assign/classes/event','submission_status_updated.php',79],['mod/assign/classes/event','grading_form_viewed.php',82],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','course_module_completion_updated.php',48],['mod/assign/feedback/file','locallib.php',45],['mod/workshop/classes/event','assessment_evaluated.php',66],['report/log/classes/event','report_viewed.php',58],['lib/classes/event','course_module_deleted.php',56],['lib/dml','mssql_native_moodle_database.php',83],['repository','lib.php',1884],['mod/book/classes/event','chapter_created.php',79],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','cohort_created.php',49],['lib/classes/event','webservice_function_called.php',67],['mod/scorm/classes/event','sco_launched.php',64],['lib/classes/event','blog_entry_created.php',76],['lib/classes/event','user_enrolment_created.php',53],['mod/data/classes/event','record_created.php',56],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','user_enrolment_updated.php',53],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/task','cache_cleanup_task.php',31],['mod/lesson/classes/event','page_moved.php',56],['mod/glossary/classes/event','category_created.php',46],['mod/lesson/classes/event','page_created.php',54],['lib/classes/event','cohort_member_removed.php',50],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/wiki/classes/event','page_version_viewed.php',54],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','role_allow_override_updated.php',47],['lib/classes/task','cache_cron_task.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib/classes/event','grouping_updated.php',65],['admin/tool/monitor/classes/event','rule_updated.php',50],['lib/classes/event','course_module_created.php',86],['lib/classes/event','tag_added.php',58],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/assign/classes/event','assessable_submitted.php',109],['mod/workshop/classes/event','submission_updated.php',63],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','grouping_deleted.php',72],['backup/util/ui','backup_ui_setting.class.php',86],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['backup/converter','convertlib.php',109],['lib/classes/event','tag_flagged.php',55],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/task','question_cron_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['lib/classes/event','tag_created.php',55],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','note_created.php',56],['lib/simplepie/library/SimplePie','Credit.php',139],['lib/bennu','iCalendar_components.php',37],['lib/dml','mysqli_native_moodle_database.php',352],['lib/classes/event','course_reset_started.php',53],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','webservice_service_user_removed.php',59],['mod/data/classes/event','record_deleted.php',56],['mod/choice/classes/event','answer_updated.php',72],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','group_member_removed.php',69],['mod/glossary/classes/event','entry_viewed.php',48],['mod/forum/classes/event','user_report_viewed.php',65],['lib/classes/event','course_category_deleted.php',59],['lib/classes/task','events_cron_task.php',31],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','calendar_event_created.php',58],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','webservice_service_updated.php',59],['backup/util/ui','base_ui_stage.class.php',110],['mod/wiki/classes/event','page_version_restored.php',54],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/data/classes/event','template_viewed.php',55],['lib/classes/event','course_user_report_viewed.php',66],['mod/data/classes/event','record_updated.php',56],['mod/wiki/classes/event','page_map_viewed.php',54],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['lib/grade','grade_category.php',2128],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/assign/feedback/comments','locallib.php',36],['question/behaviour','behaviourbase.php',83],['calendar/type/gregorian/classes','structure.php',29],['lib/classes/event','role_unassigned.php',53],['lib/classes/task','tag_cron_task.php',31],['lib/classes/task','blog_cron_task.php',31],['lib/classes/event','course_restored.php',58],['backup/util/structure','base_atom.class.php',71],['portfolio/boxnet','lib.php',14],['mod/choice/classes/event','report_viewed.php',47],['lib/classes/event','user_deleted.php',57],['lib/classes/event','user_enrolment_deleted.php',54],['lib/classes/task','send_failed_login_notifications_task.php',34],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/assign/classes/event','identities_revealed.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','course_updated.php',58],['admin/tool/log/classes/helper','reader.php',41],['mod/forum/classes/event','post_created.php',67],['mod/data/classes/event','field_deleted.php',57],['lib/classes/event','tag_deleted.php',55],['mod/glossary/classes/event','entry_created.php',52],['mod/forum/classes/event','discussion_created.php',65],['mod/forum/classes/event','discussion_deleted.php',66],['mod/scorm/classes/event','attempt_deleted.php',62],['mod/lesson/classes/event','lesson_ended.php',49],['lib/grade','grade_scale.php',156],['admin/tool/monitor/classes','subscription.php',123],['mod/forum/classes/event','subscribers_viewed.php',65],['backup/util/structure','restore_path_element.class.php',98],['mod/scorm/classes/event','report_viewed.php',63],['lib/classes/task','grade_cron_task.php',31],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib/dml/tests','dml_test.php',5409],['mod/lesson/classes/event','user_override_deleted.php',53],['report/completion/classes/event','user_report_viewed.php',49],['admin/tool/langimport/classes/event','langpack_imported.php',80],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/feedback/offline','locallib.php',42],['mod/lesson/classes/event','highscore_added.php',56],['mod/lesson/classes/event','essay_assessed.php',78],['lib/classes/event','message_sent.php',82],['lib/classes/event','message_contact_removed.php',48],['lib/classes/event','tag_unflagged.php',55],['mod/assign/classes/event','submission_graded.php',78],['lib','csslib.php',2155],['lib','csslib.php',2283],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/event','calendar_event_updated.php',58],['mod/lesson/classes/event','user_override_created.php',53],['lib/classes/task','legacy_plugin_cron_task.php',33],['portfolio/googledocs','lib.php',54],['mod/workshop/classes/event','assessment_reevaluated.php',76],['lib/dml','pdo_moodle_database.php',113],['lib','medialib.php',345],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','webservice_service_user_added.php',59],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['lib/classes/event','notes_viewed.php',49],['mod/glossary/classes/event','entry_updated.php',52],['admin/tool/monitor/classes/event','rule_created.php',50],['lib/classes/task','check_for_updates_task.php',31],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/classes/event','course_completed.php',73],['mod/assign/classes/event','submission_status_viewed.php',81],['portfolio/mahara','lib.php',61],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_created.php',48],['mod/quiz/classes/event','group_override_created.php',55],['lib/classes/task','delete_incomplete_users_task.php',31],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','group_member_added.php',78],['lib/classes/event','message_contact_unblocked.php',48],['mod/quiz/classes/event','attempt_deleted.php',47],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','user_loggedin.php',64],['admin/tool/monitor/classes/task','clean_events.php',32],['question/classes/bank','question_type_column.php',26],['admin/tool/monitor/classes','rule.php',239],['mod/lesson/classes/event','lesson_restarted.php',48],['lib/grade','grade_outcome.php',272]], 409],
'fix_sql_params': ['fix_sql_params', 'Normalizes sql query parameters and verifies parameters. ', [['lib/dml','moodle_database.php',786]], 60],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'detect_objects': ['detect_objects', 'Detects object parameters and throws exception if found ', [['lib/dml','moodle_database.php',774]], 9],
'lower': ['lower', 'Makes a string lowercase. ', [['lib/horde/framework/Horde','String.php',167]], 83],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1030]], 273],
'reset_caches': ['reset_caches', 'Reset any caches ', [['lib/classes/update','checker.php',74],['lib/dml','moodle_database.php',1019],['lib/classes','string_manager_standard.php',594],['lib/classes','text.php',108],['lib/classes','string_manager.php',127],['repository','lib.php',2686],['lib','accesslib.php',5098],['lib','accesslib.php',5994],['lib/classes','string_manager_install.php',245],['lib/classes','filetypes.php',419],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','plugin_manager.php',95],['lib','filterlib.php',93],['lib/classes/update','deployer.php',66]], 101],
'is_number': ['is_number', 'Return true if given value is integer or string with integer value ', [['lib','moodlelib.php',1286],['lib/phpexcel/PHPExcel/Calculation','Functions.php',440]], 65],
'insert_chunk': ['insert_chunk', 'Insert records in chunks, no binary support, strict param types... ', [['lib/dml','pgsql_native_moodle_database.php',1014],['lib/dml','mysqli_native_moodle_database.php',1299]], 4],
'insert_record_raw': ['insert_record_raw', 'Insert new record into database, as fast as possible, no safety checks, lobs not supported. ', [['lib/dml','pgsql_native_moodle_database.php',821],['lib/dml','oci_native_moodle_database.php',1179],['lib/dml','sqlsrv_native_moodle_database.php',880],['lib/dml','mssql_native_moodle_database.php',797],['lib/dml','mysqli_native_moodle_database.php',1124],['lib/dml/tests','dml_test.php',5426],['lib/dml','pdo_moodle_database.php',342]], 38],
'mysqltype2moodletype': ['mysqltype2moodletype', 'Normalise column type. ', [['lib/dml','mysqli_native_moodle_database.php',774]], 1],
'delete_records_select': ['delete_records_select', 'Delete one or more records from a table which match a particular WHERE clause. ', [['lib/dml','pgsql_native_moodle_database.php',1247],['lib/dml','oci_native_moodle_database.php',1445],['lib/dml','sqlsrv_native_moodle_database.php',1153],['lib/dml','mssql_native_moodle_database.php',1082],['lib/dml','mysqli_native_moodle_database.php',1469],['lib/dml/tests','dml_test.php',5432],['lib/dml','pdo_moodle_database.php',207]], 166],
'release_session_lock': ['release_session_lock', '', [['lib/dml','pgsql_native_moodle_database.php',1415],['lib/dml','oci_native_moodle_database.php',1772],['lib/dml','sqlsrv_native_moodle_database.php',1388],['lib/dml','moodle_database.php',2519],['lib/dml','mssql_native_moodle_database.php',1323],['lib/dml','mysqli_native_moodle_database.php',1673]], 11],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'is_compressed_row_format_supported': ['is_compressed_row_format_supported', 'Is this database compatible with compressed row format? This feature is necessary for support of large number of text columns in InnoDB/XtraDB database. ', [['lib/dml','mysqli_native_moodle_database.php',308]], 4],
'change_database_structure': ['change_database_structure', 'Do NOT use in code, to be used by database_manager only! ', [['lib/dml','pgsql_native_moodle_database.php',631],['lib/dml','oci_native_moodle_database.php',889],['lib/dml','sqlsrv_native_moodle_database.php',675],['lib/dml','mssql_native_moodle_database.php',596],['lib/dml','mysqli_native_moodle_database.php',889],['lib/dml/tests','dml_test.php',5421],['lib/dml','pdo_moodle_database.php',175]], 19],
'sql_intersect': ['sql_intersect', 'Returns the SQL that allows to find intersection of two or more queries ', [['lib/dml','moodle_database.php',2231],['lib/dml','mysqli_native_moodle_database.php',1601]], 13],
'execute': ['execute', 'Exceptionally override the execute method, so, based in the activity_included setting, we are able to skip the execution of one task completely ', [['backup/moodle2','backup_activity_task.class.php',205],['backup/converter/moodle1','backuplib.php',10],['filter/tex','latex.php',60],['backup/util/plan','base_plan.class.php',158],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['mod/lti/service/profile/classes/local/resource','profile.php',76],['webservice','lib.php',1772],['lib/classes/task','context_cleanup_task.php',41],['lib/adodb','adodb.inc.php',967],['enrol/imsenterprise/classes/task','cron_task.php',43],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/classes/task','calendar_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['lib/classes/task','registration_cron_task.php',40],['lib/classes/task','portfolio_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/google/src/Google/Http','Batch.php',56],['backup/converter/imscc11','lib.php',85],['lib/classes/task','file_temp_cleanup_task.php',40],['filter/tex','texdebug.php',287],['admin/tool/monitor/classes','notification_task.php',39],['lib/classes/task','stats_cron_task.php',40],['lib/classes/task','backup_cleanup_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['backup/util/ui','backup_ui.class.php',122],['lib/dml','pgsql_native_moodle_database.php',665],['lib/classes/task','messaging_cleanup_task.php',40],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',68],['lib/classes/task','session_cleanup_task.php',40],['lib/classes/task','completion_cron_task.php',40],['lib/dml','oci_native_moodle_database.php',1009],['backup/util/plan','base_task.class.php',162],['lib/adodb/drivers','adodb-pdo.inc.php',464],['backup/util/plan','backup_plan.class.php',112],['backup/util/ui','restore_ui.class.php',206],['backup/converter/imscc11','backuplib.php',42],['backup/moodle2','restore_activity_task.class.php',183],['','mdeploy.php',743],['lib/dml','sqlsrv_native_moodle_database.php',745],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['lib/google/src/Google/Http','REST.php',28],['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['lib/classes/task','plagiarism_cron_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','backup_structure_step.class.php',50],['mod/forum/classes/task','cron_task.php',39],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','file_trash_cleanup_task.php',40],['backup/util/plan','restore_execution_step.class.php',25],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['admin/tool/installaddon/classes','validator.php',114],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','automated_backup_task.php',40],['backup/converter/moodle1','lib.php',142],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/classes/task','create_contexts_task.php',40],['backup/util/plan','restore_plan.class.php',159],['backup/converter/imscc1','lib.php',84],['lib/dml','mssql_native_moodle_database.php',662],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/classes/task','cache_cleanup_task.php',40],['lib/classes/task','badges_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['backup/util/interfaces','executable.class.php',32],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['lib/adodb/drivers','adodb-oci8po.inc.php',52],['lib/classes/task','question_cron_task.php',40],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','NoRetry.php',37],['lib/dml','mysqli_native_moodle_database.php',955],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['backup/util/plan/tests/fixtures','plan_fixtures.php',47],['backup/util/plan/tests/fixtures','plan_fixtures.php',55],['lib/classes/task','events_cron_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['lib/adodb/drivers','adodb-oci8.inc.php',786],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','tag_cron_task.php',40],['lib/classes/task','blog_cron_task.php',40],['lib/classes/task','send_failed_login_notifications_task.php',43],['lib/classes/task','grade_cron_task.php',40],['lib/dml/tests','dml_test.php',5422],['admin/tool/uploadcourse/classes','processor.php',174],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['lib/google/src/Google','Client.php',545],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','legacy_plugin_cron_task.php',42],['lib/dml','pdo_moodle_database.php',226],['lib/classes/task','check_for_updates_task.php',40],['backup/util/helper','restore_decode_processor.class.php',73],['backup/moodle2','backup_section_task.class.php',97],['webservice/amf/testclient','AMFTester.mxml',282],['lib/classes/task','delete_incomplete_users_task.php',40],['mod/assign','adminlib.php',342],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/monitor/classes/task','clean_events.php',41]], 733],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'sql_cast_char2int': ['sql_cast_char2int', '', [['lib/dml','pgsql_native_moodle_database.php',1307],['lib/dml','oci_native_moodle_database.php',1507],['lib/dml','sqlsrv_native_moodle_database.php',1176],['lib/dml','moodle_database.php',1949],['lib/dml','mssql_native_moodle_database.php',1111],['lib/dml','mysqli_native_moodle_database.php',1494]], 14],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'query_start': ['query_start', 'Called before each db query. ', [['lib/dml','pgsql_native_moodle_database.php',221],['lib/dml','oci_native_moodle_database.php',239],['lib/dml','sqlsrv_native_moodle_database.php',232],['lib/dml','moodle_database.php',380],['mod/chat','chatd.php',152],['lib/dml','mssql_native_moodle_database.php',220],['lib/dml','pdo_moodle_database.php',598]], 134],
'emulate_bound_params': ['emulate_bound_params', 'Workaround for SQL*Server Native driver similar to MSSQL driver for consistent behavior. ', [['lib/dml','sqlsrv_native_moodle_database.php',708],['lib/dml','mssql_native_moodle_database.php',621],['lib/dml','mysqli_native_moodle_database.php',926]], 16],
'replace_all_text_supported': ['replace_all_text_supported', 'Does this driver support tool_replace? ', [['lib/dml','pgsql_native_moodle_database.php',1345],['lib/dml','oci_native_moodle_database.php',1735],['lib/dml','sqlsrv_native_moodle_database.php',1333],['lib/dml','moodle_database.php',2254],['lib/dml','mssql_native_moodle_database.php',1266],['lib/dml','mysqli_native_moodle_database.php',1632]], 4],
'get_columns': ['get_columns', 'Returns detailed information about columns in table. This information is cached internally. ', [['lib/dml','pgsql_native_moodle_database.php',385],['lib/dml','oci_native_moodle_database.php',464],['lib/dml','sqlsrv_native_moodle_database.php',462],['lib/dml','sqlite3_pdo_moodle_database.php',195],['lib/dml','mssql_native_moodle_database.php',392],['lib','csvlib.class.php',190],['lib/dml','mysqli_native_moodle_database.php',572],['lib/dml/tests','dml_test.php',5417]], 108],
'diagnose': ['diagnose', 'Theme diagnostic code. It is very problematic to send debug output to the actual CSS file, instead this functions is supposed to diagnose given theme and highlights all potential problems. This information should be available from the theme selection page or some other debug page for theme designers. ', [['lib','outputlib.php',432],['lib/dml','oci_native_moodle_database.php',112],['lib/dml','moodle_database.php',270],['lib/dml','mysqli_native_moodle_database.php',370]], 2],
'update_record_raw': ['update_record_raw', 'Update record in database, as fast as possible, no safety checks, lobs not supported. ', [['lib/dml','pgsql_native_moodle_database.php',1095],['lib/dml','oci_native_moodle_database.php',1311],['lib/dml','sqlsrv_native_moodle_database.php',1044],['lib/dml','mssql_native_moodle_database.php',961],['lib/dml','mysqli_native_moodle_database.php',1356],['lib/dml/tests','dml_test.php',5429],['lib/dml','pdo_moodle_database.php',428]], 27],
'from': ['from', 'From clause ', [['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntityQuery.php',84]], 226],
'sql_cast_2signed': ['sql_cast_2signed', 'Returns the SQL to be used in order to an UNSIGNED INTEGER column to SIGNED. ', [['lib/dml','moodle_database.php',1977],['lib/dml','mysqli_native_moodle_database.php',1590]], 0],
'insert_records': ['insert_records', 'Insert multiple records into database as fast as possible. ', [['lib/dml','pgsql_native_moodle_database.php',944],['lib/dml','moodle_database.php',1613],['lib/dml','mysqli_native_moodle_database.php',1213]], 26],
'dispose': ['dispose', 'Dispose off database connection after pushing any buffered events to the database. ', [['admin/tool/log/store/database/classes/log','store.php',273],['lib/classes/log','manager.php',47],['lib/dml','pgsql_native_moodle_database.php',207],['lib/ddl','database_manager.php',58],['lib/dml','moodle_temptables.php',131],['lib/dml','oci_native_moodle_database.php',225],['lib/dml','sqlsrv_native_moodle_database.php',218],['admin/tool/log/classes/helper','buffered_writer.php',119],['lib/dml','moodle_database.php',354],['admin/tool/log/classes/log','store.php',38],['lib/classes/log','dummy_manager.php',35],['lib/ddl','sql_generator.php',187],['lib/dml','mssql_native_moodle_database.php',207],['lib/dml','mysqli_native_moodle_database.php',475],['admin/tool/log/classes/log','manager.php',187],['lib/dml','moodle_transaction.php',68],['admin/tool/log/store/legacy/classes/log','store.php',180]], 21],
'get_column_info': ['get_column_info', 'Returns moodle column info for raw column from information schema. ', [['lib/dml','mysqli_native_moodle_database.php',695]], 2],
'set_charset': ['set_charset', '', [['backup/cc/cc_lib','cc_asssesment.php',1466]], 3],
'get_configuration_help': ['get_configuration_help', 'Returns localised database configuration help. Note: can be used before connect() ', [['lib/dml','pgsql_native_moodle_database.php',97],['lib/dml','oci_native_moodle_database.php',103],['lib/dml','mariadb_native_moodle_database.php',50],['lib/dml','sqlsrv_native_moodle_database.php',111],['lib/dml','mssql_native_moodle_database.php',92],['lib/dml','mysqli_native_moodle_database.php',361],['lib/dml/tests','dml_test.php',5410],['lib/dml','pdo_moodle_database.php',122]], 4],
'sql_regex_supported': ['sql_regex_supported', '', [['lib/dml','pgsql_native_moodle_database.php',1337],['lib/dml','moodle_database.php',2213],['lib/dml','mysqli_native_moodle_database.php',1574]], 12],
'allowed_param_types': ['allowed_param_types', 'Returns supported query parameter types ', [['lib/dml','pgsql_native_moodle_database.php',288],['lib/dml','oci_native_moodle_database.php',313],['lib/dml','sqlsrv_native_moodle_database.php',294],['lib/dml','mssql_native_moodle_database.php',293],['lib/dml','mysqli_native_moodle_database.php',496],['lib/dml/tests','dml_test.php',5413],['lib/dml','pdo_moodle_database.php',146]], 3],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'key': ['key', '', [], 198],
'preg_split': ['preg_split', '', [], 127],
'count': ['count', '', [], 3984],
'in_array': ['in_array', '', [], 1173],
'ob_end_clean': ['ob_end_clean', '', [], 79],
'array_pop': ['array_pop', '', [], 438],
'implode': ['implode', '', [], 1259],
'is_float': ['is_float', '', [], 39],
'array_unshift': ['array_unshift', '', [], 114],
'array_map': ['array_map', '', [], 149],
'create_function': ['create_function', '', [], 42],
'strtoupper': ['strtoupper', '', [], 576],
'ob_get_contents': ['ob_get_contents', '', [], 63],
'substr': ['substr', '', [], 2883],
'array_change_key_case': ['array_change_key_case', '', [], 32],
'strtolower': ['strtolower', '', [], 922],
'stripos': ['stripos', '', [], 95],
'str_replace': ['str_replace', '', [], 1667],
'extension_loaded': ['extension_loaded', '', [], 90],
'is_null': ['is_null', '', [], 1992],
'func_get_args': ['func_get_args', '', [], 154],
'array_keys': ['array_keys', '', [], 1152],
'ini_get': ['ini_get', '', [], 142],
'array_merge': ['array_merge', '', [], 2320],
'array_reverse': ['array_reverse', '', [], 127],
'ob_start': ['ob_start', '', [], 101],
'strpos': ['strpos', '', [], 1623],
'defined': ['defined', '', [], 4098],
'preg_match': ['preg_match', '', [], 1317],
'is_bool': ['is_bool', '', [], 177],
'version_compare': ['version_compare', '', [], 69],
'reset': ['reset', '', [], 1070],
'mysqli': ['mysqli', '', [], 2],
'preg_replace': ['preg_replace', '', [], 903],
'is_object': ['is_object', '', [], 508],
'array_fill': ['array_fill', '', [], 59]};
CLASS_DATA={
'database_column_info': ['database_column_info', 'Detailed database field information. ', [['lib/dml','database_column_info.php',27]], 7],
'dml_connection_exception': ['dml_connection_exception', 'DML db connection exception - triggered if database not accessible. ', [['lib','dmllib.php',74]], 9],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'dml_sessionwait_exception': ['dml_sessionwait_exception', 'DML db session wait exception - triggered when session lock request times out. ', [['lib','dmllib.php',94]], 5],
'mysqli_native_moodle_temptables': ['mysqli_native_moodle_temptables', '', [['lib/dml','mysqli_native_moodle_temptables.php',31]], 1],
'mysqli_native_moodle_recordset': ['mysqli_native_moodle_recordset', 'Mysqli specific moodle recordset class ', [['lib/dml','mysqli_native_moodle_recordset.php',29]], 1],
'dml_exception': ['dml_exception', 'DML exception class, use instead of error() in dml code. ', [['lib','dmllib.php',54]], 41],
'cache': ['cache', 'The main cache class. ', [['cache/classes','loaders.php',31]], 213],
'dml_write_exception': ['dml_write_exception', 'DML write exception - triggered by some SQL syntax errors, etc. ', [['lib','dmllib.php',223]], 2],
'mysqli_native_moodle_database': ['mysqli_native_moodle_database', 'Native mysqli class representing moodle database interface. ', [['lib/dml','mysqli_native_moodle_database.php',31]], 1]};
CONST_DATA={
'SQL_QUERY_AUX': ['SQL_QUERY_AUX', '', [['lib/dml','moodle_database.php',53]], 88],
'SQL_QUERY_UPDATE': ['SQL_QUERY_UPDATE', '', [['lib/dml','moodle_database.php',47]], 28],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'SQL_QUERY_INSERT': ['SQL_QUERY_INSERT', '', [['lib/dml','moodle_database.php',44]], 10],
'SQL_QUERY_STRUCTURE': ['SQL_QUERY_STRUCTURE', '', [['lib/dml','moodle_database.php',50]], 9],
'SQL_PARAMS_QM': ['SQL_PARAMS_QM', '', [['lib/dml','moodle_database.php',35]], 39],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'SQL_QUERY_SELECT': ['SQL_QUERY_SELECT', '', [['lib/dml','moodle_database.php',41]], 17]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
