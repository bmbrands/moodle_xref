<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/filterlib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='filterlib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="filterlib.php.html">filterlib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="filterlib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="filterlib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library functions for managing text filter plugins.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/** The states a filter can be in, stored in the filter_active table. */</span>
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a>', 1);
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/** The states a filter can be in, stored in the filter_active table. */</span>
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('TEXTFILTER_INHERIT')" href="../_constants/TEXTFILTER_INHERIT.html" onMouseOver="constPopup(event,'TEXTFILTER_INHERIT')">TEXTFILTER_INHERIT</a>', 0);
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/** The states a filter can be in, stored in the filter_active table. */</span>
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('TEXTFILTER_OFF')" href="../_constants/TEXTFILTER_OFF.html" onMouseOver="constPopup(event,'TEXTFILTER_OFF')">TEXTFILTER_OFF</a>', -1);
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">/** The states a filter can be in, stored in the filter_active table. */</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>', -9999);
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * Define one exclusive separator that we'll use in the temp saved tags</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *  keys. It must be something rare enough to avoid having matches with</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> *  filterobjects. MDL-18165</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('TEXTFILTER_EXCL_SEPARATOR')" href="../_constants/TEXTFILTER_EXCL_SEPARATOR.html" onMouseOver="constPopup(event,'TEXTFILTER_EXCL_SEPARATOR')">TEXTFILTER_EXCL_SEPARATOR</a>', '-%-');
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * Class to manage the filtering of strings. It is intended that this class is</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * only used by weblib.php. Client code should probably be using the</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * format_text and format_string functions.</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> *</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * This class is a singleton.</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> *</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> */</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('filter_manager')" href="../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a> {
<a name="l55"><span class="linenum">  55</span></a>      <span class="comment">/**</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * @var moodle_text_filter[][] This list of active filters, by context, for filtering content.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     * An array contextid =&gt; ordered array of filter name =&gt; filter objects.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     */</span>
<a name="l59"><span class="linenum">  59</span></a>      protected <a class="var it36526" onMouseOver="hilite(36526)" onMouseOut="lolite()" onClick="logVariable('textfilters')" href="../_variables/textfilters.html">$textfilters</a> = array();
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      <span class="comment">/**</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * @var moodle_text_filter[][] This list of active filters, by context, for filtering strings.</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * An array contextid =&gt; ordered array of filter name =&gt; filter objects.</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     */</span>
<a name="l65"><span class="linenum">  65</span></a>      protected <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a> = array();
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">    /** @var array Exploded version of $CFG-&gt;stringfilters. */</span>
<a name="l68"><span class="linenum">  68</span></a>      protected <a class="var it36527" onMouseOver="hilite(36527)" onMouseOut="lolite()" onClick="logVariable('stringfilternames')" href="../_variables/stringfilternames.html">$stringfilternames</a> = array();
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">    /** @var filter_manager Holds the singleton instance. */</span>
<a name="l71"><span class="linenum">  71</span></a>      protected static <a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a>;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      <span class="comment">/**</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * Constructor. Protected. Use {@link instance()} instead.</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     */</span>
<a name="l76"><span class="linenum">  76</span></a>      protected function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>() {
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilternames')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilternames.html">stringfilternames</a> = <a class="function" onClick="logFunction('filter_get_string_filters')" href="../_functions/filter_get_string_filters.html" onMouseOver="funcPopup(event,'filter_get_string_filters')">filter_get_string_filters</a>();
<a name="l78"><span class="linenum">  78</span></a>      }
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>      <span class="comment">/**</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">     * Factory method. Use this to get the filter manager.</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     *</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * @return filter_manager the singleton instance.</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     */</span>
<a name="l85"><span class="linenum">  85</span></a>      public static function <a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>() {
<a name="l86"><span class="linenum">  86</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l87"><span class="linenum">  87</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a>)) {
<a name="l88"><span class="linenum">  88</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('perfdebug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/perfdebug.html">perfdebug</a>) and <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('perfdebug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/perfdebug.html">perfdebug</a> &gt; 7) {
<a name="l89"><span class="linenum">  89</span></a>                  self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a> = <span class="keyword">new </span><a class="class" onClick="logClass('performance_measuring_filter_manager')" href="../_classes/performance_measuring_filter_manager.html" onMouseOver="classPopup(event,'performance_measuring_filter_manager')">performance_measuring_filter_manager</a>();
<a name="l90"><span class="linenum">  90</span></a>              } else {
<a name="l91"><span class="linenum">  91</span></a>                  self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a> = new self();
<a name="l92"><span class="linenum">  92</span></a>              }
<a name="l93"><span class="linenum">  93</span></a>          }
<a name="l94"><span class="linenum">  94</span></a>          return self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a>;
<a name="l95"><span class="linenum">  95</span></a>      }
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>      <span class="comment">/**</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     * Resets the caches, usually to be called between unit tests</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">     */</span>
<a name="l100"><span class="linenum"> 100</span></a>      public static function <a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>() {
<a name="l101"><span class="linenum"> 101</span></a>          if (self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a>) {
<a name="l102"><span class="linenum"> 102</span></a>              self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a>-&gt;<a class="function" onClick="logFunction('unload_all_filters')" href="../_functions/unload_all_filters.html" onMouseOver="funcPopup(event,'unload_all_filters')">unload_all_filters</a>();
<a name="l103"><span class="linenum"> 103</span></a>          }
<a name="l104"><span class="linenum"> 104</span></a>          self::<a class="var it8448" onMouseOver="hilite(8448)" onMouseOut="lolite()" onClick="logVariable('singletoninstance')" href="../_variables/singletoninstance.html">$singletoninstance</a> = null;
<a name="l105"><span class="linenum"> 105</span></a>      }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * Unloads all filters and other cached information</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     */</span>
<a name="l110"><span class="linenum"> 110</span></a>      protected function <a class="function" onClick="logFunction('unload_all_filters')" href="../_functions/unload_all_filters.html" onMouseOver="funcPopup(event,'unload_all_filters')">unload_all_filters</a>() {
<a name="l111"><span class="linenum"> 111</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textfilters.html">textfilters</a> = array();
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a> = array();
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilternames')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilternames.html">stringfilternames</a> = array();
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <span class="comment">/**</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * Load all the filters required by this context.</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     *</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * @param context $context the context.</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     */</span>
<a name="l121"><span class="linenum"> 121</span></a>      protected function <a class="function" onClick="logFunction('load_filters')" href="../_functions/load_filters.html" onMouseOver="funcPopup(event,'load_filters')">load_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <a class="function" onClick="logFunction('filter_get_active_in_context')" href="../_functions/filter_get_active_in_context.html" onMouseOver="funcPopup(event,'filter_get_active_in_context')">filter_get_active_in_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textfilters.html">textfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array();
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = array();
<a name="l125"><span class="linenum"> 125</span></a>          foreach (<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> as <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a> =&gt; <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>) {
<a name="l126"><span class="linenum"> 126</span></a>              <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('make_filter_object')" href="../_functions/make_filter_object.html" onMouseOver="funcPopup(event,'make_filter_object')">make_filter_object</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>);
<a name="l127"><span class="linenum"> 127</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>)) {
<a name="l128"><span class="linenum"> 128</span></a>                  continue;
<a name="l129"><span class="linenum"> 129</span></a>              }
<a name="l130"><span class="linenum"> 130</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textfilters.html">textfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l131"><span class="linenum"> 131</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilternames')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilternames.html">stringfilternames</a>)) {
<a name="l132"><span class="linenum"> 132</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>][<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l133"><span class="linenum"> 133</span></a>              }
<a name="l134"><span class="linenum"> 134</span></a>          }
<a name="l135"><span class="linenum"> 135</span></a>      }
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      <span class="comment">/**</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * Factory method for creating a filter.</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     *</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @param string $filtername The filter name, for example 'tex'.</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * @param context $context context object.</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     * @param array $localconfig array of local configuration variables for this filter.</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     * @return moodle_text_filter The filter, or null, if this type of filter is</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">     *      not recognised or could not be created.</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">     */</span>
<a name="l146"><span class="linenum"> 146</span></a>      protected function <a class="function" onClick="logFunction('make_filter_object')" href="../_functions/make_filter_object.html" onMouseOver="funcPopup(event,'make_filter_object')">make_filter_object</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>) {
<a name="l147"><span class="linenum"> 147</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> .'/filter/'. <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a> .'/filter.php';
<a name="l149"><span class="linenum"> 149</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>)) {
<a name="l150"><span class="linenum"> 150</span></a>              return null;
<a name="l151"><span class="linenum"> 151</span></a>          }
<a name="l152"><span class="linenum"> 152</span></a>          include_once(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>);
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it36529" onMouseOver="hilite(36529)" onMouseOut="lolite()" onClick="logVariable('filterclassname')" href="../_variables/filterclassname.html">$filterclassname</a> = 'filter_' . <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>;
<a name="l155"><span class="linenum"> 155</span></a>          if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it36529" onMouseOver="hilite(36529)" onMouseOut="lolite()" onClick="logVariable('filterclassname')" href="../_variables/filterclassname.html">$filterclassname</a>)) {
<a name="l156"><span class="linenum"> 156</span></a>              return new <a class="var it36529" onMouseOver="hilite(36529)" onMouseOut="lolite()" onClick="logVariable('filterclassname')" href="../_variables/filterclassname.html">$filterclassname</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>);
<a name="l157"><span class="linenum"> 157</span></a>          }
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>          return null;
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>      <span class="comment">/**</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * Apply a list of filters to some content.</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * @param string $text</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * @param moodle_text_filter[] $filterchain array filter name =&gt; filter object.</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * @param array $options options passed to the filters.</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @param array $skipfilters of filter names. Any filters that should not be applied to this text.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * @return string $text</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     */</span>
<a name="l170"><span class="linenum"> 170</span></a>      protected function <a class="function" onClick="logFunction('apply_filter_chain')" href="../_functions/apply_filter_chain.html" onMouseOver="funcPopup(event,'apply_filter_chain')">apply_filter_chain</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it36530" onMouseOver="hilite(36530)" onMouseOut="lolite()" onClick="logVariable('filterchain')" href="../_variables/filterchain.html">$filterchain</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(),
<a name="l171"><span class="linenum"> 171</span></a>              array <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a> = null) {
<a name="l172"><span class="linenum"> 172</span></a>          foreach (<a class="var it36530" onMouseOver="hilite(36530)" onMouseOut="lolite()" onClick="logVariable('filterchain')" href="../_variables/filterchain.html">$filterchain</a> as <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a> =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l173"><span class="linenum"> 173</span></a>              if (<a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a> !== null &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a>)) {
<a name="l174"><span class="linenum"> 174</span></a>                  continue;
<a name="l175"><span class="linenum"> 175</span></a>              }
<a name="l176"><span class="linenum"> 176</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a class="function" onClick="logFunction('filter')" href="../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l177"><span class="linenum"> 177</span></a>          }
<a name="l178"><span class="linenum"> 178</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l179"><span class="linenum"> 179</span></a>      }
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>      <span class="comment">/**</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * Get all the filters that apply to a given context for calls to format_text.</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     *</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * @param context $context</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     * @return moodle_text_filter[] A text filter</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     */</span>
<a name="l187"><span class="linenum"> 187</span></a>      protected function <a class="function" onClick="logFunction('get_text_filters')" href="../_functions/get_text_filters.html" onMouseOver="funcPopup(event,'get_text_filters')">get_text_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l188"><span class="linenum"> 188</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textfilters.html">textfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>])) {
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_filters')" href="../_functions/load_filters.html" onMouseOver="funcPopup(event,'load_filters')">load_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l190"><span class="linenum"> 190</span></a>          }
<a name="l191"><span class="linenum"> 191</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textfilters.html">textfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l192"><span class="linenum"> 192</span></a>      }
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      <span class="comment">/**</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     * Get all the filters that apply to a given context for calls to format_string.</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">     *</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * @param context $context the context.</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     * @return moodle_text_filter[] A text filter</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     */</span>
<a name="l200"><span class="linenum"> 200</span></a>      protected function <a class="function" onClick="logFunction('get_string_filters')" href="../_functions/get_string_filters.html" onMouseOver="funcPopup(event,'get_string_filters')">get_string_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l201"><span class="linenum"> 201</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>])) {
<a name="l202"><span class="linenum"> 202</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_filters')" href="../_functions/load_filters.html" onMouseOver="funcPopup(event,'load_filters')">load_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l203"><span class="linenum"> 203</span></a>          }
<a name="l204"><span class="linenum"> 204</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l205"><span class="linenum"> 205</span></a>      }
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>      <span class="comment">/**</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     * Filter some text</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">     *</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     * @param string $text The text to filter</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     * @param context $context the context.</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @param array $options options passed to the filters</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @param array $skipfilters of filter names. Any filters that should not be applied to this text.</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * @return string resulting text</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     */</span>
<a name="l216"><span class="linenum"> 216</span></a>      public function <a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(),
<a name="l217"><span class="linenum"> 217</span></a>              array <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a> = null) {
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_filter_chain')" href="../_functions/apply_filter_chain.html" onMouseOver="funcPopup(event,'apply_filter_chain')">apply_filter_chain</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_text_filters')" href="../_functions/get_text_filters.html" onMouseOver="funcPopup(event,'get_text_filters')">get_text_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>), <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a>);
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">        // &lt;nolink&gt; tags removed for XHTML compatibility</span>
<a name="l220"><span class="linenum"> 220</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array('&lt;nolink&gt;', '&lt;/nolink&gt;'), '', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l221"><span class="linenum"> 221</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l222"><span class="linenum"> 222</span></a>      }
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>      <span class="comment">/**</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     * Filter a piece of string</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     *</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * @param string $string The text to filter</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     * @param context $context the context.</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @return string resulting string</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     */</span>
<a name="l231"><span class="linenum"> 231</span></a>      public function <a class="function" onClick="logFunction('filter_string')" href="../_functions/filter_string.html" onMouseOver="funcPopup(event,'filter_string')">filter_string</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l232"><span class="linenum"> 232</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_filter_chain')" href="../_functions/apply_filter_chain.html" onMouseOver="funcPopup(event,'apply_filter_chain')">apply_filter_chain</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_string_filters')" href="../_functions/get_string_filters.html" onMouseOver="funcPopup(event,'get_string_filters')">get_string_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>));
<a name="l233"><span class="linenum"> 233</span></a>      }
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>      <span class="comment">/**</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     * @deprecated Since Moodle 3.0 MDL-50491. This was used by the old text filtering system, but no more.</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     * @todo MDL-50632 This will be deleted in Moodle 3.2.</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     * @param context $context the context.</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * @return string the hash.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     */</span>
<a name="l241"><span class="linenum"> 241</span></a>      public function <a class="function" onClick="logFunction('text_filtering_hash')" href="../_functions/text_filtering_hash.html" onMouseOver="funcPopup(event,'text_filtering_hash')">text_filtering_hash</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l242"><span class="linenum"> 242</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('<a class="class" onClick="logClass('filter_manager')" href="../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a>::<a class="function" onClick="logFunction('text_filtering_hash')" href="../_functions/text_filtering_hash.html" onMouseOver="funcPopup(event,'text_filtering_hash')">text_filtering_hash</a>() is deprecated. ' .
<a name="l243"><span class="linenum"> 243</span></a>                  'It was an internal part of the old format_text caching, ' .
<a name="l244"><span class="linenum"> 244</span></a>                  'and should not have been called from other code.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_text_filters')" href="../_functions/get_text_filters.html" onMouseOver="funcPopup(event,'get_text_filters')">get_text_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it21960" onMouseOver="hilite(21960)" onMouseOut="lolite()" onClick="logVariable('hashes')" href="../_variables/hashes.html">$hashes</a> = array();
<a name="l247"><span class="linenum"> 247</span></a>          foreach (<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it21960" onMouseOver="hilite(21960)" onMouseOut="lolite()" onClick="logVariable('hashes')" href="../_variables/hashes.html">$hashes</a>[] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a class="function" onClick="logFunction('hash')" href="../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>();
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('-', <a class="var it21960" onMouseOver="hilite(21960)" onMouseOut="lolite()" onClick="logVariable('hashes')" href="../_variables/hashes.html">$hashes</a>);
<a name="l251"><span class="linenum"> 251</span></a>      }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      <span class="comment">/**</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * Setup page with filters requirements and other prepare stuff.</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     *</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     * This method is used by {@see format_text()} and {@see format_string()}</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * in order to allow filters to setup any page requirement (js, css...)</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * or perform any action needed to get them prepared before filtering itself</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     * happens by calling to each every active setup() method.</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     *</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * Note it's executed for each piece of text filtered, so filter implementations</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     * are responsible of controlling the cardinality of the executions that may</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">     * be different depending of the stuff to prepare.</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">     *</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     * @param moodle_page $page the page we are going to add requirements to.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * @param context $context the context which contents are going to be filtered.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * @since Moodle 2.3</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     */</span>
<a name="l269"><span class="linenum"> 269</span></a>      public function <a class="function" onClick="logFunction('setup_page_for_filters')" href="../_functions/setup_page_for_filters.html" onMouseOver="funcPopup(event,'setup_page_for_filters')">setup_page_for_filters</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_text_filters')" href="../_functions/get_text_filters.html" onMouseOver="funcPopup(event,'get_text_filters')">get_text_filters</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l271"><span class="linenum"> 271</span></a>          foreach (<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a class="function" onClick="logFunction('setup')" href="../_functions/setup.html" onMouseOver="funcPopup(event,'setup')">setup</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l273"><span class="linenum"> 273</span></a>          }
<a name="l274"><span class="linenum"> 274</span></a>      }
<a name="l275"><span class="linenum"> 275</span></a>  }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">/**</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> * Filter manager subclass that does nothing. Having this simplifies the logic</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> * of format_text, etc.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> *</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> */</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('null_filter_manager')" href="../_classes/null_filter_manager.html" onMouseOver="classPopup(event,'null_filter_manager')">null_filter_manager</a> {
<a name="l286"><span class="linenum"> 286</span></a>      public function <a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(),
<a name="l287"><span class="linenum"> 287</span></a>              array <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a> = null) {
<a name="l288"><span class="linenum"> 288</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l289"><span class="linenum"> 289</span></a>      }
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>      public function <a class="function" onClick="logFunction('filter_string')" href="../_functions/filter_string.html" onMouseOver="funcPopup(event,'filter_string')">filter_string</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l292"><span class="linenum"> 292</span></a>          return <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>;
<a name="l293"><span class="linenum"> 293</span></a>      }
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>      public function <a class="function" onClick="logFunction('text_filtering_hash')" href="../_functions/text_filtering_hash.html" onMouseOver="funcPopup(event,'text_filtering_hash')">text_filtering_hash</a>() {
<a name="l296"><span class="linenum"> 296</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('<a class="class" onClick="logClass('filter_manager')" href="../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a>::<a class="function" onClick="logFunction('text_filtering_hash')" href="../_functions/text_filtering_hash.html" onMouseOver="funcPopup(event,'text_filtering_hash')">text_filtering_hash</a>() is deprecated. ' .
<a name="l297"><span class="linenum"> 297</span></a>                  'It was an internal part of the old format_text caching, ' .
<a name="l298"><span class="linenum"> 298</span></a>                  'and should not have been called from other code.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l299"><span class="linenum"> 299</span></a>          return '';
<a name="l300"><span class="linenum"> 300</span></a>      }
<a name="l301"><span class="linenum"> 301</span></a>  }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">/**</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment"> * Filter manager subclass that tracks how much work it does.</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment"> *</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment"> */</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('performance_measuring_filter_manager')" href="../_classes/performance_measuring_filter_manager.html" onMouseOver="classPopup(event,'performance_measuring_filter_manager')">performance_measuring_filter_manager</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('filter_manager')" href="../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a> {
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">    /** @var int number of filter objects created. */</span>
<a name="l312"><span class="linenum"> 312</span></a>      protected <a class="var it36531" onMouseOver="hilite(36531)" onMouseOut="lolite()" onClick="logVariable('filterscreated')" href="../_variables/filterscreated.html">$filterscreated</a> = 0;
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">    /** @var int number of calls to filter_text. */</span>
<a name="l315"><span class="linenum"> 315</span></a>      protected <a class="var it36532" onMouseOver="hilite(36532)" onMouseOut="lolite()" onClick="logVariable('textsfiltered')" href="../_variables/textsfiltered.html">$textsfiltered</a> = 0;
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">    /** @var int number of calls to filter_string. */</span>
<a name="l318"><span class="linenum"> 318</span></a>      protected <a class="var it36533" onMouseOver="hilite(36533)" onMouseOut="lolite()" onClick="logVariable('stringsfiltered')" href="../_variables/stringsfiltered.html">$stringsfiltered</a> = 0;
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>      protected function <a class="function" onClick="logFunction('unload_all_filters')" href="../_functions/unload_all_filters.html" onMouseOver="funcPopup(event,'unload_all_filters')">unload_all_filters</a>() {
<a name="l321"><span class="linenum"> 321</span></a>          parent::<a class="function" onClick="logFunction('unload_all_filters')" href="../_functions/unload_all_filters.html" onMouseOver="funcPopup(event,'unload_all_filters')">unload_all_filters</a>();
<a name="l322"><span class="linenum"> 322</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filterscreated')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/filterscreated.html">filterscreated</a> = 0;
<a name="l323"><span class="linenum"> 323</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textsfiltered')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textsfiltered.html">textsfiltered</a> = 0;
<a name="l324"><span class="linenum"> 324</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringsfiltered')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringsfiltered.html">stringsfiltered</a> = 0;
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>      protected function <a class="function" onClick="logFunction('make_filter_object')" href="../_functions/make_filter_object.html" onMouseOver="funcPopup(event,'make_filter_object')">make_filter_object</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>) {
<a name="l328"><span class="linenum"> 328</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filterscreated')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/filterscreated.html">filterscreated</a>++;
<a name="l329"><span class="linenum"> 329</span></a>          return parent::<a class="function" onClick="logFunction('make_filter_object')" href="../_functions/make_filter_object.html" onMouseOver="funcPopup(event,'make_filter_object')">make_filter_object</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>);
<a name="l330"><span class="linenum"> 330</span></a>      }
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>      public function <a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(),
<a name="l333"><span class="linenum"> 333</span></a>              array <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a> = null) {
<a name="l334"><span class="linenum"> 334</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textsfiltered')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textsfiltered.html">textsfiltered</a>++;
<a name="l335"><span class="linenum"> 335</span></a>          return parent::<a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, <a class="var it28434" onMouseOver="hilite(28434)" onMouseOut="lolite()" onClick="logVariable('skipfilters')" href="../_variables/skipfilters.html">$skipfilters</a>);
<a name="l336"><span class="linenum"> 336</span></a>      }
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>      public function <a class="function" onClick="logFunction('filter_string')" href="../_functions/filter_string.html" onMouseOver="funcPopup(event,'filter_string')">filter_string</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l339"><span class="linenum"> 339</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringsfiltered')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringsfiltered.html">stringsfiltered</a>++;
<a name="l340"><span class="linenum"> 340</span></a>          return parent::<a class="function" onClick="logFunction('filter_string')" href="../_functions/filter_string.html" onMouseOver="funcPopup(event,'filter_string')">filter_string</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l341"><span class="linenum"> 341</span></a>      }
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      <span class="comment">/**</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">     * Return performance information, in the form required by {@link get_performance_info()}.</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">     * @return array the performance info.</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     */</span>
<a name="l347"><span class="linenum"> 347</span></a>      public function <a class="function" onClick="logFunction('get_performance_summary')" href="../_functions/get_performance_summary.html" onMouseOver="funcPopup(event,'get_performance_summary')">get_performance_summary</a>() {
<a name="l348"><span class="linenum"> 348</span></a>          return array(array(
<a name="l349"><span class="linenum"> 349</span></a>              'contextswithfilters' =&gt; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textfilters')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textfilters.html">textfilters</a>),
<a name="l350"><span class="linenum"> 350</span></a>              'filterscreated' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filterscreated')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/filterscreated.html">filterscreated</a>,
<a name="l351"><span class="linenum"> 351</span></a>              'textsfiltered' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('textsfiltered')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/textsfiltered.html">textsfiltered</a>,
<a name="l352"><span class="linenum"> 352</span></a>              'stringsfiltered' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('stringsfiltered')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/stringsfiltered.html">stringsfiltered</a>,
<a name="l353"><span class="linenum"> 353</span></a>          ), array(
<a name="l354"><span class="linenum"> 354</span></a>              'contextswithfilters' =&gt; 'Contexts for which filters were loaded',
<a name="l355"><span class="linenum"> 355</span></a>              'filterscreated' =&gt; 'Filters created',
<a name="l356"><span class="linenum"> 356</span></a>              'textsfiltered' =&gt; 'Pieces of content filtered',
<a name="l357"><span class="linenum"> 357</span></a>              'stringsfiltered' =&gt; 'Strings filtered',
<a name="l358"><span class="linenum"> 358</span></a>          ));
<a name="l359"><span class="linenum"> 359</span></a>      }
<a name="l360"><span class="linenum"> 360</span></a>  }
<a name="l361"><span class="linenum"> 361</span></a>  
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">/**</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment"> * Base class for text filters. You just need to override this class and</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment"> * implement the filter method.</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment"> *</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment"> */</span>
<a name="l370"><span class="linenum"> 370</span></a>  abstract class moodle_text_filter {
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">    /** @var context The context we are in. */</span>
<a name="l372"><span class="linenum"> 372</span></a>      protected <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">    /** @var array Any local configuration for this filter in this context. */</span>
<a name="l375"><span class="linenum"> 375</span></a>      protected <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>;
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>      <span class="comment">/**</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * Set any context-specific configuration for this filter.</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     *</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * @param context $context The current context.</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @param array $localconfig Any context-specific configuration for this filter.</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     */</span>
<a name="l383"><span class="linenum"> 383</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, array <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>) {
<a name="l384"><span class="linenum"> 384</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('localconfig')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/localconfig.html">localconfig</a> = <a class="var it20069" onMouseOver="hilite(20069)" onMouseOut="lolite()" onClick="logVariable('localconfig')" href="../_variables/localconfig.html">$localconfig</a>;
<a name="l386"><span class="linenum"> 386</span></a>      }
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>      <span class="comment">/**</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">     * @deprecated Since Moodle 3.0 MDL-50491. This was used by the old text filtering system, but no more.</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">     * @todo MDL-50632 This will be deleted in Moodle 3.2.</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     * @return string The class name of the current class</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">     */</span>
<a name="l393"><span class="linenum"> 393</span></a>      public function <a class="function" onClick="logFunction('hash')" href="../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>() {
<a name="l394"><span class="linenum"> 394</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('moodle_text_filter::<a class="function" onClick="logFunction('hash')" href="../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>() is deprecated. ' .
<a name="l395"><span class="linenum"> 395</span></a>                  'It was an internal part of the old format_text caching, ' .
<a name="l396"><span class="linenum"> 396</span></a>                  'and should not have been called from other code.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l397"><span class="linenum"> 397</span></a>          return __CLASS__;
<a name="l398"><span class="linenum"> 398</span></a>      }
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>      <span class="comment">/**</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * Setup page with filter requirements and other prepare stuff.</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     *</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * Override this method if the filter needs to setup page</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     * requirements or needs other stuff to be executed.</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     *</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * Note this method is invoked from {@see setup_page_for_filters()}</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     * for each piece of text being filtered, so it is responsible</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">     * for controlling its own execution cardinality.</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">     *</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * @param moodle_page $page the page we are going to add requirements to.</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * @param context $context the context which contents are going to be filtered.</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * @since Moodle 2.3</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     */</span>
<a name="l414"><span class="linenum"> 414</span></a>      public function <a class="function" onClick="logFunction('setup')" href="../_functions/setup.html" onMouseOver="funcPopup(event,'setup')">setup</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">        // Override me, if needed.</span>
<a name="l416"><span class="linenum"> 416</span></a>      }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>      <span class="comment">/**</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * Override this function to actually implement the filtering.</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     *</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     * @param $text some HTML content.</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * @param array $options options passed to the filters</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * @return the HTML content after the filtering has been applied.</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     */</span>
<a name="l425"><span class="linenum"> 425</span></a>      public abstract function <a class="function" onClick="logFunction('filter')" href="../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array());
<a name="l426"><span class="linenum"> 426</span></a>  }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">/**</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment"> * This is just a little object to define a phrase and some instructions</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment"> * for how to process it.  Filters can create an array of these to pass</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment"> * to the filter_phrases function below.</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment"> *</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment"> **/</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('filterobject')" href="../_classes/filterobject.html" onMouseOver="classPopup(event,'filterobject')">filterobject</a> {
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">    /** @var string */</span>
<a name="l439"><span class="linenum"> 439</span></a>      var <a class="var it7864" onMouseOver="hilite(7864)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../_variables/phrase.html">$phrase</a>;
<a name="l440"><span class="linenum"> 440</span></a>      var <a class="var it36534" onMouseOver="hilite(36534)" onMouseOut="lolite()" onClick="logVariable('hreftagbegin')" href="../_variables/hreftagbegin.html">$hreftagbegin</a>;
<a name="l441"><span class="linenum"> 441</span></a>      var <a class="var it36535" onMouseOver="hilite(36535)" onMouseOut="lolite()" onClick="logVariable('hreftagend')" href="../_variables/hreftagend.html">$hreftagend</a>;
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">    /** @var bool */</span>
<a name="l443"><span class="linenum"> 443</span></a>      var <a class="var it4664" onMouseOver="hilite(4664)" onMouseOut="lolite()" onClick="logVariable('casesensitive')" href="../_variables/casesensitive.html">$casesensitive</a>;
<a name="l444"><span class="linenum"> 444</span></a>      var <a class="var it12653" onMouseOver="hilite(12653)" onMouseOut="lolite()" onClick="logVariable('fullmatch')" href="../_variables/fullmatch.html">$fullmatch</a>;
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">    /** @var mixed */</span>
<a name="l446"><span class="linenum"> 446</span></a>      var <a class="var it36536" onMouseOver="hilite(36536)" onMouseOut="lolite()" onClick="logVariable('replacementphrase')" href="../_variables/replacementphrase.html">$replacementphrase</a>;
<a name="l447"><span class="linenum"> 447</span></a>      var <a class="var it36537" onMouseOver="hilite(36537)" onMouseOut="lolite()" onClick="logVariable('work_phrase')" href="../_variables/work_phrase.html">$work_phrase</a>;
<a name="l448"><span class="linenum"> 448</span></a>      var <a class="var it36538" onMouseOver="hilite(36538)" onMouseOut="lolite()" onClick="logVariable('work_hreftagbegin')" href="../_variables/work_hreftagbegin.html">$work_hreftagbegin</a>;
<a name="l449"><span class="linenum"> 449</span></a>      var <a class="var it36539" onMouseOver="hilite(36539)" onMouseOut="lolite()" onClick="logVariable('work_hreftagend')" href="../_variables/work_hreftagend.html">$work_hreftagend</a>;
<a name="l450"><span class="linenum"> 450</span></a>      var <a class="var it36540" onMouseOver="hilite(36540)" onMouseOut="lolite()" onClick="logVariable('work_casesensitive')" href="../_variables/work_casesensitive.html">$work_casesensitive</a>;
<a name="l451"><span class="linenum"> 451</span></a>      var <a class="var it36541" onMouseOver="hilite(36541)" onMouseOut="lolite()" onClick="logVariable('work_fullmatch')" href="../_variables/work_fullmatch.html">$work_fullmatch</a>;
<a name="l452"><span class="linenum"> 452</span></a>      var <a class="var it36542" onMouseOver="hilite(36542)" onMouseOut="lolite()" onClick="logVariable('work_replacementphrase')" href="../_variables/work_replacementphrase.html">$work_replacementphrase</a>;
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">    /** @var bool */</span>
<a name="l454"><span class="linenum"> 454</span></a>      var <a class="var it36543" onMouseOver="hilite(36543)" onMouseOut="lolite()" onClick="logVariable('work_calculated')" href="../_variables/work_calculated.html">$work_calculated</a>;
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>      <span class="comment">/**</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     * A constructor just because I like constructing</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     *</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     * @param string $phrase</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * @param string $hreftagbegin</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     * @param string $hreftagend</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * @param bool $casesensitive</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     * @param bool $fullmatch</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     * @param mixed $replacementphrase</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">     */</span>
<a name="l466"><span class="linenum"> 466</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it7864" onMouseOver="hilite(7864)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../_variables/phrase.html">$phrase</a>, <a class="var it36534" onMouseOver="hilite(36534)" onMouseOut="lolite()" onClick="logVariable('hreftagbegin')" href="../_variables/hreftagbegin.html">$hreftagbegin</a> = '&lt;span class=&quot;highlight&quot;&gt;',
<a name="l467"><span class="linenum"> 467</span></a>                                     <a class="var it36535" onMouseOver="hilite(36535)" onMouseOut="lolite()" onClick="logVariable('hreftagend')" href="../_variables/hreftagend.html">$hreftagend</a> = '&lt;/span&gt;',
<a name="l468"><span class="linenum"> 468</span></a>                                     <a class="var it4664" onMouseOver="hilite(4664)" onMouseOut="lolite()" onClick="logVariable('casesensitive')" href="../_variables/casesensitive.html">$casesensitive</a> = false,
<a name="l469"><span class="linenum"> 469</span></a>                                     <a class="var it12653" onMouseOver="hilite(12653)" onMouseOut="lolite()" onClick="logVariable('fullmatch')" href="../_variables/fullmatch.html">$fullmatch</a> = false,
<a name="l470"><span class="linenum"> 470</span></a>                                     <a class="var it36536" onMouseOver="hilite(36536)" onMouseOut="lolite()" onClick="logVariable('replacementphrase')" href="../_variables/replacementphrase.html">$replacementphrase</a> = NULL) {
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('phrase')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>           = <a class="var it7864" onMouseOver="hilite(7864)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../_variables/phrase.html">$phrase</a>;
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hreftagbegin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/hreftagbegin.html">hreftagbegin</a>     = <a class="var it36534" onMouseOver="hilite(36534)" onMouseOut="lolite()" onClick="logVariable('hreftagbegin')" href="../_variables/hreftagbegin.html">$hreftagbegin</a>;
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hreftagend')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/hreftagend.html">hreftagend</a>       = <a class="var it36535" onMouseOver="hilite(36535)" onMouseOut="lolite()" onClick="logVariable('hreftagend')" href="../_variables/hreftagend.html">$hreftagend</a>;
<a name="l475"><span class="linenum"> 475</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('casesensitive')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/casesensitive.html">casesensitive</a>    = <a class="var it4664" onMouseOver="hilite(4664)" onMouseOut="lolite()" onClick="logVariable('casesensitive')" href="../_variables/casesensitive.html">$casesensitive</a>;
<a name="l476"><span class="linenum"> 476</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fullmatch')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/fullmatch.html">fullmatch</a>        = <a class="var it12653" onMouseOver="hilite(12653)" onMouseOut="lolite()" onClick="logVariable('fullmatch')" href="../_variables/fullmatch.html">$fullmatch</a>;
<a name="l477"><span class="linenum"> 477</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('replacementphrase')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/replacementphrase.html">replacementphrase</a>= <a class="var it36536" onMouseOver="hilite(36536)" onMouseOut="lolite()" onClick="logVariable('replacementphrase')" href="../_variables/replacementphrase.html">$replacementphrase</a>;
<a name="l478"><span class="linenum"> 478</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('work_calculated')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/work_calculated.html">work_calculated</a>  = false;
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>      }
<a name="l481"><span class="linenum"> 481</span></a>  }
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">/**</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment"> * Look up the name of this filter</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> *</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"> * @param string $filter the filter name</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment"> * @return string the human-readable name for this filter.</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment"> */</span>
<a name="l489"><span class="linenum"> 489</span></a>  function <a class="function" onClick="logFunction('filter_get_name')" href="../_functions/filter_get_name.html" onMouseOver="funcPopup(event,'filter_get_name')">filter_get_name</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l490"><span class="linenum"> 490</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'filter/') === 0) {
<a name="l491"><span class="linenum"> 491</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Old '<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>'' parameter used in <a class="function" onClick="logFunction('filter_get_name')" href="../_functions/filter_get_name.html" onMouseOver="funcPopup(event,'filter_get_name')">filter_get_name</a>()&quot;);
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 7);
<a name="l493"><span class="linenum"> 493</span></a>      } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, '/') !== false) {
<a name="l494"><span class="linenum"> 494</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unknown filter type ' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l495"><span class="linenum"> 495</span></a>      }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      if (<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>('filtername', 'filter_' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>)) {
<a name="l498"><span class="linenum"> 498</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filtername', 'filter_' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l499"><span class="linenum"> 499</span></a>      } else {
<a name="l500"><span class="linenum"> 500</span></a>          return <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l501"><span class="linenum"> 501</span></a>      }
<a name="l502"><span class="linenum"> 502</span></a>  }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">/**</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment"> * Get the names of all the filters installed in this Moodle.</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment"> *</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment"> * @return array path =&gt; filter name from the appropriate lang file. e.g.</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment"> * array('tex' =&gt; 'TeX Notation');</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment"> * sorted in alphabetical order of name.</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment"> */</span>
<a name="l511"><span class="linenum"> 511</span></a>  function <a class="function" onClick="logFunction('filter_get_all_installed')" href="../_functions/filter_get_all_installed.html" onMouseOver="funcPopup(event,'filter_get_all_installed')">filter_get_all_installed</a>() {
<a name="l512"><span class="linenum"> 512</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>      <a class="var it21529" onMouseOver="hilite(21529)" onMouseOut="lolite()" onClick="logVariable('filternames')" href="../_variables/filternames.html">$filternames</a> = array();
<a name="l515"><span class="linenum"> 515</span></a>      foreach (<a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('filter') as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> =&gt; <a class="var it8458" onMouseOver="hilite(8458)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../_variables/fulldir.html">$fulldir</a>) {
<a name="l516"><span class="linenum"> 516</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(&quot;<a class="var it8458" onMouseOver="hilite(8458)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../_variables/fulldir.html">$fulldir</a>/filter.php&quot;)) {
<a name="l517"><span class="linenum"> 517</span></a>              <a class="var it21529" onMouseOver="hilite(21529)" onMouseOut="lolite()" onClick="logVariable('filternames')" href="../_variables/filternames.html">$filternames</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>] = <a class="function" onClick="logFunction('filter_get_name')" href="../_functions/filter_get_name.html" onMouseOver="funcPopup(event,'filter_get_name')">filter_get_name</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l518"><span class="linenum"> 518</span></a>          }
<a name="l519"><span class="linenum"> 519</span></a>      }
<a name="l520"><span class="linenum"> 520</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it21529" onMouseOver="hilite(21529)" onMouseOut="lolite()" onClick="logVariable('filternames')" href="../_variables/filternames.html">$filternames</a>);
<a name="l521"><span class="linenum"> 521</span></a>      return <a class="var it21529" onMouseOver="hilite(21529)" onMouseOut="lolite()" onClick="logVariable('filternames')" href="../_variables/filternames.html">$filternames</a>;
<a name="l522"><span class="linenum"> 522</span></a>  }
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">/**</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment"> * Set the global activated state for a text filter.</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment"> *</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment"> * @param string $filtername The filter name, for example 'tex'.</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment"> * @param int $state One of the values TEXTFILTER_ON, TEXTFILTER_OFF or TEXTFILTER_DISABLED.</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment"> * @param int $move -1 means up, 0 means the same, 1 means down</span>
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment"> */</span>
<a name="l531"><span class="linenum"> 531</span></a>  function <a class="function" onClick="logFunction('filter_set_global_state')" href="../_functions/filter_set_global_state.html" onMouseOver="funcPopup(event,'filter_set_global_state')">filter_set_global_state</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, <a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> = 0) {
<a name="l532"><span class="linenum"> 532</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">    // Check requested state is valid.</span>
<a name="l535"><span class="linenum"> 535</span></a>      if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, array(<a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a>, <a class="constant" onClick="logConstant('TEXTFILTER_OFF')" href="../_constants/TEXTFILTER_OFF.html" onMouseOver="constPopup(event,'TEXTFILTER_OFF')">TEXTFILTER_OFF</a>, <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>))) {
<a name="l536"><span class="linenum"> 536</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Illegal option '<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>' passed to filter_set_global_state. &quot; .
<a name="l537"><span class="linenum"> 537</span></a>                  &quot;Must be one of <a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a>, <a class="constant" onClick="logConstant('TEXTFILTER_OFF')" href="../_constants/TEXTFILTER_OFF.html" onMouseOver="constPopup(event,'TEXTFILTER_OFF')">TEXTFILTER_OFF</a> or <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>.&quot;);
<a name="l538"><span class="linenum"> 538</span></a>      }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>      if (<a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> &gt; 0) {
<a name="l541"><span class="linenum"> 541</span></a>          <a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> = 1;
<a name="l542"><span class="linenum"> 542</span></a>      } else if (<a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> &lt; 0) {
<a name="l543"><span class="linenum"> 543</span></a>          <a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> = -1;
<a name="l544"><span class="linenum"> 544</span></a>      }
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, 'filter/') === 0) {
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">        //debugging(&quot;Old filtername '$filtername' parameter used in filter_set_global_state()&quot;, DEBUG_DEVELOPER);</span>
<a name="l548"><span class="linenum"> 548</span></a>          <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, 7);
<a name="l549"><span class="linenum"> 549</span></a>      } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, '/') !== false) {
<a name="l550"><span class="linenum"> 550</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Invalid filter name '<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>' used in <a class="function" onClick="logFunction('filter_set_global_state')" href="../_functions/filter_set_global_state.html" onMouseOver="funcPopup(event,'filter_set_global_state')">filter_set_global_state</a>()&quot;);
<a name="l551"><span class="linenum"> 551</span></a>      }
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>      <a class="var it4224" onMouseOver="hilite(4224)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('start_delegated_transaction')" href="../_functions/start_delegated_transaction.html" onMouseOver="funcPopup(event,'start_delegated_transaction')">start_delegated_transaction</a>();
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>      <a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l556"><span class="linenum"> 556</span></a>      <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('filter_active', array('contextid' =&gt; <a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a>-&gt;<a onClick="logVariable('id')" class="var it43085" onMouseOver="hilite(43085)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), 'sortorder ASC');
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a> = array();
<a name="l559"><span class="linenum"> 559</span></a>      <a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a> = array();
<a name="l560"><span class="linenum"> 560</span></a>  
<a name="l561"><span class="linenum"> 561</span></a>      foreach(<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> as <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l562"><span class="linenum"> 562</span></a>          if (<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('active')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/active.html">active</a> == <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>) {
<a name="l563"><span class="linenum"> 563</span></a>              <a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>[<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('filter')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>;
<a name="l564"><span class="linenum"> 564</span></a>          } else {
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('filter')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>;
<a name="l566"><span class="linenum"> 566</span></a>          }
<a name="l567"><span class="linenum"> 567</span></a>      }
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">    // Update the state or add new record.</span>
<a name="l570"><span class="linenum"> 570</span></a>      if (isset(<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>])) {
<a name="l571"><span class="linenum"> 571</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> = <a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>];
<a name="l572"><span class="linenum"> 572</span></a>          if (<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a> != <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>) {
<a name="l573"><span class="linenum"> 573</span></a>              <a class="function" onClick="logFunction('add_to_config_log')" href="../_functions/add_to_config_log.html" onMouseOver="funcPopup(event,'add_to_config_log')">add_to_config_log</a>('filter_active', <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>);
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a> = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>;
<a name="l576"><span class="linenum"> 576</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('filter_active', <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l577"><span class="linenum"> 577</span></a>              if (<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a> == <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>) {
<a name="l578"><span class="linenum"> 578</span></a>                  unset(<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>]);
<a name="l579"><span class="linenum"> 579</span></a>                  <a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a> = array(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('filter')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a> =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) + <a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>;
<a name="l580"><span class="linenum"> 580</span></a>              }
<a name="l581"><span class="linenum"> 581</span></a>  
<a name="l582"><span class="linenum"> 582</span></a>          }
<a name="l583"><span class="linenum"> 583</span></a>  
<a name="l584"><span class="linenum"> 584</span></a>      } else if (isset(<a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>[<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>])) {
<a name="l585"><span class="linenum"> 585</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> = <a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>[<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>];
<a name="l586"><span class="linenum"> 586</span></a>          if (<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a> != <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>) {
<a name="l587"><span class="linenum"> 587</span></a>              <a class="function" onClick="logFunction('add_to_config_log')" href="../_functions/add_to_config_log.html" onMouseOver="funcPopup(event,'add_to_config_log')">add_to_config_log</a>('filter_active', <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>);
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>              <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a> = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>;
<a name="l590"><span class="linenum"> 590</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('filter_active', <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l591"><span class="linenum"> 591</span></a>              if (<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a> != <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>) {
<a name="l592"><span class="linenum"> 592</span></a>                  unset(<a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>[<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>]);
<a name="l593"><span class="linenum"> 593</span></a>                  <a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('filter')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l594"><span class="linenum"> 594</span></a>              }
<a name="l595"><span class="linenum"> 595</span></a>          }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>      } else {
<a name="l598"><span class="linenum"> 598</span></a>          <a class="function" onClick="logFunction('add_to_config_log')" href="../_functions/add_to_config_log.html" onMouseOver="funcPopup(event,'add_to_config_log')">add_to_config_log</a>('filter_active', '', <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>);
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> = new stdClass();
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('filter')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>    = <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>;
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('contextid')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a>-&gt;<a onClick="logVariable('id')" class="var it43085" onMouseOver="hilite(43085)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l603"><span class="linenum"> 603</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('active')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/active.html">active</a>    = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>;
<a name="l604"><span class="linenum"> 604</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('sortorder')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = 99999;
<a name="l605"><span class="linenum"> 605</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('id')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('filter_active', <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>          <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('id')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l608"><span class="linenum"> 608</span></a>          if (<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a> == <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>) {
<a name="l609"><span class="linenum"> 609</span></a>              <a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('filter')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l610"><span class="linenum"> 610</span></a>          } else {
<a name="l611"><span class="linenum"> 611</span></a>              <a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('filter')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l612"><span class="linenum"> 612</span></a>          }
<a name="l613"><span class="linenum"> 613</span></a>      }
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">    // Move only active.</span>
<a name="l616"><span class="linenum"> 616</span></a>      if (<a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> != 0 and isset(<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('filter')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>])) {
<a name="l617"><span class="linenum"> 617</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1;
<a name="l618"><span class="linenum"> 618</span></a>          foreach (<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a> as <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l619"><span class="linenum"> 619</span></a>              <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>;
<a name="l620"><span class="linenum"> 620</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l621"><span class="linenum"> 621</span></a>          }
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> + <a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a>;
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>          foreach (<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a> as <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l626"><span class="linenum"> 626</span></a>              if (<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('id')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('id')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l627"><span class="linenum"> 627</span></a>                  continue;
<a name="l628"><span class="linenum"> 628</span></a>              }
<a name="l629"><span class="linenum"> 629</span></a>              if (<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> == <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43011" onMouseOver="hilite(43011)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a>) {
<a name="l630"><span class="linenum"> 630</span></a>                  if (<a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a> == 1) {
<a name="l631"><span class="linenum"> 631</span></a>                      <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> = <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> - 1;
<a name="l632"><span class="linenum"> 632</span></a>                  } else {
<a name="l633"><span class="linenum"> 633</span></a>                      <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> = <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('newsortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/newsortorder.html">newsortorder</a> + 1;
<a name="l634"><span class="linenum"> 634</span></a>                  }
<a name="l635"><span class="linenum"> 635</span></a>              }
<a name="l636"><span class="linenum"> 636</span></a>          }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>          <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a>, 'newsortorder', <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_NUMERIC);
<a name="l639"><span class="linenum"> 639</span></a>      }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">    // Inactive are sorted by filter name.</span>
<a name="l642"><span class="linenum"> 642</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a>, 'filter', <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::SORT_NATURAL);
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">    // Update records if necessary.</span>
<a name="l645"><span class="linenum"> 645</span></a>      <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1;
<a name="l646"><span class="linenum"> 646</span></a>      foreach (<a class="var it14162" onMouseOver="hilite(14162)" onMouseOut="lolite()" onClick="logVariable('on')" href="../_variables/on.html">$on</a> as <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l647"><span class="linenum"> 647</span></a>          if (<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('sortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> != <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l648"><span class="linenum"> 648</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('filter_active', 'sortorder', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, array('id'=&gt;<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('id')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l649"><span class="linenum"> 649</span></a>          }
<a name="l650"><span class="linenum"> 650</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l651"><span class="linenum"> 651</span></a>      }
<a name="l652"><span class="linenum"> 652</span></a>      foreach (<a class="var it3097" onMouseOver="hilite(3097)" onMouseOut="lolite()" onClick="logVariable('off')" href="../_variables/off.html">$off</a> as <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l653"><span class="linenum"> 653</span></a>          if (<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('sortorder')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> != <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l654"><span class="linenum"> 654</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('filter_active', 'sortorder', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, array('id'=&gt;<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('id')" class="var it43146" onMouseOver="hilite(43146)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l655"><span class="linenum"> 655</span></a>          }
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l657"><span class="linenum"> 657</span></a>      }
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>      <a class="var it4224" onMouseOver="hilite(4224)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a>-&gt;<a class="function" onClick="logFunction('allow_commit')" href="../_functions/allow_commit.html" onMouseOver="funcPopup(event,'allow_commit')">allow_commit</a>();
<a name="l660"><span class="linenum"> 660</span></a>  }
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment">/**</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment"> * @param string $filtername The filter name, for example 'tex'.</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment"> * @return boolean is this filter allowed to be used on this site. That is, the</span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment"> *      admin has set the global 'active' setting to On, or Off, but available.</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment"> */</span>
<a name="l667"><span class="linenum"> 667</span></a>  function <a class="function" onClick="logFunction('filter_is_enabled')" href="../_functions/filter_is_enabled.html" onMouseOver="funcPopup(event,'filter_is_enabled')">filter_is_enabled</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>) {
<a name="l668"><span class="linenum"> 668</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, 'filter/') === 0) {
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">        //debugging(&quot;Old filtername '$filtername' parameter used in filter_is_enabled()&quot;, DEBUG_DEVELOPER);</span>
<a name="l670"><span class="linenum"> 670</span></a>          <a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, 7);
<a name="l671"><span class="linenum"> 671</span></a>      } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, '/') !== false) {
<a name="l672"><span class="linenum"> 672</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Invalid filter name '<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>' used in <a class="function" onClick="logFunction('filter_is_enabled')" href="../_functions/filter_is_enabled.html" onMouseOver="funcPopup(event,'filter_is_enabled')">filter_is_enabled</a>()&quot;);
<a name="l673"><span class="linenum"> 673</span></a>      }
<a name="l674"><span class="linenum"> 674</span></a>      return <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36528" onMouseOver="hilite(36528)" onMouseOut="lolite()" onClick="logVariable('filtername')" href="../_variables/filtername.html">$filtername</a>, <a class="function" onClick="logFunction('filter_get_globally_enabled')" href="../_functions/filter_get_globally_enabled.html" onMouseOver="funcPopup(event,'filter_get_globally_enabled')">filter_get_globally_enabled</a>());
<a name="l675"><span class="linenum"> 675</span></a>  }
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">/**</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment"> * Return a list of all the filters that may be in use somewhere.</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment"> *</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * @staticvar array $enabledfilters</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * @return array where the keys and values are both the filter name, like 'tex'.</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> */</span>
<a name="l683"><span class="linenum"> 683</span></a>  function <a class="function" onClick="logFunction('filter_get_globally_enabled')" href="../_functions/filter_get_globally_enabled.html" onMouseOver="funcPopup(event,'filter_get_globally_enabled')">filter_get_globally_enabled</a>() {
<a name="l684"><span class="linenum"> 684</span></a>      static <a class="var it36545" onMouseOver="hilite(36545)" onMouseOut="lolite()" onClick="logVariable('enabledfilters')" href="../_variables/enabledfilters.html">$enabledfilters</a> = null;
<a name="l685"><span class="linenum"> 685</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it36545" onMouseOver="hilite(36545)" onMouseOut="lolite()" onClick="logVariable('enabledfilters')" href="../_variables/enabledfilters.html">$enabledfilters</a>)) {
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <a class="function" onClick="logFunction('filter_get_global_states')" href="../_functions/filter_get_global_states.html" onMouseOver="funcPopup(event,'filter_get_global_states')">filter_get_global_states</a>();
<a name="l687"><span class="linenum"> 687</span></a>          <a class="var it36545" onMouseOver="hilite(36545)" onMouseOut="lolite()" onClick="logVariable('enabledfilters')" href="../_variables/enabledfilters.html">$enabledfilters</a> = array();
<a name="l688"><span class="linenum"> 688</span></a>          foreach (<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> =&gt; <a class="var it36546" onMouseOver="hilite(36546)" onMouseOut="lolite()" onClick="logVariable('filerinfo')" href="../_variables/filerinfo.html">$filerinfo</a>) {
<a name="l689"><span class="linenum"> 689</span></a>              if (<a class="var it36546" onMouseOver="hilite(36546)" onMouseOut="lolite()" onClick="logVariable('filerinfo')" href="../_variables/filerinfo.html">$filerinfo</a>-&gt;<a onClick="logVariable('active')" class="var it44252" onMouseOver="hilite(44252)" onMouseOut="lolite()" href="../_variables/active.html">active</a> != <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>) {
<a name="l690"><span class="linenum"> 690</span></a>                  <a class="var it36545" onMouseOver="hilite(36545)" onMouseOut="lolite()" onClick="logVariable('enabledfilters')" href="../_variables/enabledfilters.html">$enabledfilters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l691"><span class="linenum"> 691</span></a>              }
<a name="l692"><span class="linenum"> 692</span></a>          }
<a name="l693"><span class="linenum"> 693</span></a>      }
<a name="l694"><span class="linenum"> 694</span></a>      return <a class="var it36545" onMouseOver="hilite(36545)" onMouseOut="lolite()" onClick="logVariable('enabledfilters')" href="../_variables/enabledfilters.html">$enabledfilters</a>;
<a name="l695"><span class="linenum"> 695</span></a>  }
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">/**</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment"> * Return the names of the filters that should also be applied to strings</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment"> * (when they are enabled).</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment"> *</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment"> * @return array where the keys and values are both the filter name, like 'tex'.</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment"> */</span>
<a name="l703"><span class="linenum"> 703</span></a>  function <a class="function" onClick="logFunction('filter_get_string_filters')" href="../_functions/filter_get_string_filters.html" onMouseOver="funcPopup(event,'filter_get_string_filters')">filter_get_string_filters</a>() {
<a name="l704"><span class="linenum"> 704</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l705"><span class="linenum"> 705</span></a>      <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a> = array();
<a name="l706"><span class="linenum"> 706</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('filterall')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/filterall.html">filterall</a>) &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>)) {
<a name="l707"><span class="linenum"> 707</span></a>          <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>);
<a name="l708"><span class="linenum"> 708</span></a>          <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a> = <a class="phpfunction" onClick="logFunction('array_combine')" href="../_functions/array_combine.html" onMouseOver="phpfuncPopup(event,'array_combine')">array_combine</a>(<a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>, <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>);
<a name="l709"><span class="linenum"> 709</span></a>      }
<a name="l710"><span class="linenum"> 710</span></a>      return <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>;
<a name="l711"><span class="linenum"> 711</span></a>  }
<a name="l712"><span class="linenum"> 712</span></a>  
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">/**</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment"> * Sets whether a particular active filter should be applied to all strings by</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment"> * format_string, or just used by format_text.</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment"> *</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment"> * @param boolean $applytostrings if true, this filter will apply to format_string</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> *      and format_text, when it is enabled.</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> */</span>
<a name="l721"><span class="linenum"> 721</span></a>  function <a class="function" onClick="logFunction('filter_set_applies_to_strings')" href="../_functions/filter_set_applies_to_strings.html" onMouseOver="funcPopup(event,'filter_set_applies_to_strings')">filter_set_applies_to_strings</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, <a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('applytostrings')" href="../_variables/applytostrings.html">$applytostrings</a>) {
<a name="l722"><span class="linenum"> 722</span></a>      <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a> = <a class="function" onClick="logFunction('filter_get_string_filters')" href="../_functions/filter_get_string_filters.html" onMouseOver="funcPopup(event,'filter_get_string_filters')">filter_get_string_filters</a>();
<a name="l723"><span class="linenum"> 723</span></a>      <a class="var it36547" onMouseOver="hilite(36547)" onMouseOut="lolite()" onClick="logVariable('prevfilters')" href="../_variables/prevfilters.html">$prevfilters</a> = <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>;
<a name="l724"><span class="linenum"> 724</span></a>      <a class="var it36548" onMouseOver="hilite(36548)" onMouseOut="lolite()" onClick="logVariable('allfilters')" href="../_variables/allfilters.html">$allfilters</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('filter');
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>      if (<a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('applytostrings')" href="../_variables/applytostrings.html">$applytostrings</a>) {
<a name="l727"><span class="linenum"> 727</span></a>          <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>] = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l728"><span class="linenum"> 728</span></a>      } else {
<a name="l729"><span class="linenum"> 729</span></a>          unset(<a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>]);
<a name="l730"><span class="linenum"> 730</span></a>      }
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">    // Remove missing filters.</span>
<a name="l733"><span class="linenum"> 733</span></a>      foreach (<a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a> as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l734"><span class="linenum"> 734</span></a>          if (!isset(<a class="var it36548" onMouseOver="hilite(36548)" onMouseOut="lolite()" onClick="logVariable('allfilters')" href="../_variables/allfilters.html">$allfilters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>])) {
<a name="l735"><span class="linenum"> 735</span></a>              unset(<a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>]);
<a name="l736"><span class="linenum"> 736</span></a>          }
<a name="l737"><span class="linenum"> 737</span></a>      }
<a name="l738"><span class="linenum"> 738</span></a>  
<a name="l739"><span class="linenum"> 739</span></a>      if (<a class="var it36547" onMouseOver="hilite(36547)" onMouseOut="lolite()" onClick="logVariable('prevfilters')" href="../_variables/prevfilters.html">$prevfilters</a> != <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>) {
<a name="l740"><span class="linenum"> 740</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('stringfilters', <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>));
<a name="l741"><span class="linenum"> 741</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('filterall', !empty(<a class="var it1340" onMouseOver="hilite(1340)" onMouseOut="lolite()" onClick="logVariable('stringfilters')" href="../_variables/stringfilters.html">$stringfilters</a>));
<a name="l742"><span class="linenum"> 742</span></a>      }
<a name="l743"><span class="linenum"> 743</span></a>  }
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">/**</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> * Set the local activated state for a text filter.</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> *</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment"> * @param integer $contextid The id of the context to get the local config for.</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment"> * @param integer $state One of the values TEXTFILTER_ON, TEXTFILTER_OFF or TEXTFILTER_INHERIT.</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment"> * @return void</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment"> */</span>
<a name="l753"><span class="linenum"> 753</span></a>  function <a class="function" onClick="logFunction('filter_set_local_state')" href="../_functions/filter_set_local_state.html" onMouseOver="funcPopup(event,'filter_set_local_state')">filter_set_local_state</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>) {
<a name="l754"><span class="linenum"> 754</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">    // Check requested state is valid.</span>
<a name="l757"><span class="linenum"> 757</span></a>      if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, array(<a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a>, <a class="constant" onClick="logConstant('TEXTFILTER_OFF')" href="../_constants/TEXTFILTER_OFF.html" onMouseOver="constPopup(event,'TEXTFILTER_OFF')">TEXTFILTER_OFF</a>, <a class="constant" onClick="logConstant('TEXTFILTER_INHERIT')" href="../_constants/TEXTFILTER_INHERIT.html" onMouseOver="constPopup(event,'TEXTFILTER_INHERIT')">TEXTFILTER_INHERIT</a>))) {
<a name="l758"><span class="linenum"> 758</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Illegal option '<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>' passed to filter_set_local_state. &quot; .
<a name="l759"><span class="linenum"> 759</span></a>                  &quot;Must be one of <a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a>, <a class="constant" onClick="logConstant('TEXTFILTER_OFF')" href="../_constants/TEXTFILTER_OFF.html" onMouseOver="constPopup(event,'TEXTFILTER_OFF')">TEXTFILTER_OFF</a> or <a class="constant" onClick="logConstant('TEXTFILTER_INHERIT')" href="../_constants/TEXTFILTER_INHERIT.html" onMouseOver="constPopup(event,'TEXTFILTER_INHERIT')">TEXTFILTER_INHERIT</a>.&quot;);
<a name="l760"><span class="linenum"> 760</span></a>      }
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>      if (<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> == <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id) {
<a name="l763"><span class="linenum"> 763</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('You cannot use filter_set_local_state ' .
<a name="l764"><span class="linenum"> 764</span></a>                  'with <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> equal to the system context id.');
<a name="l765"><span class="linenum"> 765</span></a>      }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>      if (<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a> == <a class="constant" onClick="logConstant('TEXTFILTER_INHERIT')" href="../_constants/TEXTFILTER_INHERIT.html" onMouseOver="constPopup(event,'TEXTFILTER_INHERIT')">TEXTFILTER_INHERIT</a>) {
<a name="l768"><span class="linenum"> 768</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('filter_active', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l769"><span class="linenum"> 769</span></a>          return;
<a name="l770"><span class="linenum"> 770</span></a>      }
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('filter_active', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l773"><span class="linenum"> 773</span></a>      <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('insert')" href="../_variables/insert.html">$insert</a> = false;
<a name="l774"><span class="linenum"> 774</span></a>      if (empty(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>)) {
<a name="l775"><span class="linenum"> 775</span></a>          <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('insert')" href="../_variables/insert.html">$insert</a> = true;
<a name="l776"><span class="linenum"> 776</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a> = new stdClass;
<a name="l777"><span class="linenum"> 777</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('filter')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a> = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l778"><span class="linenum"> 778</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('contextid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>;
<a name="l779"><span class="linenum"> 779</span></a>      }
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('active')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/active.html">active</a> = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>;
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>      if (<a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('insert')" href="../_variables/insert.html">$insert</a>) {
<a name="l784"><span class="linenum"> 784</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('filter_active', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>);
<a name="l785"><span class="linenum"> 785</span></a>      } else {
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('filter_active', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>);
<a name="l787"><span class="linenum"> 787</span></a>      }
<a name="l788"><span class="linenum"> 788</span></a>  }
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment">/**</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment"> * Set a particular local config variable for a filter in a context.</span>
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment"> *</span>
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment"> * @param integer $contextid The id of the context to get the local config for.</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment"> * @param string $name the setting name.</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment"> * @param string $value the corresponding value.</span>
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment"> */</span>
<a name="l798"><span class="linenum"> 798</span></a>  function <a class="function" onClick="logFunction('filter_set_local_config')" href="../_functions/filter_set_local_config.html" onMouseOver="funcPopup(event,'filter_set_local_config')">filter_set_local_config</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l799"><span class="linenum"> 799</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l800"><span class="linenum"> 800</span></a>      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('filter_config', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, 'name' =&gt; <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>));
<a name="l801"><span class="linenum"> 801</span></a>      <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('insert')" href="../_variables/insert.html">$insert</a> = false;
<a name="l802"><span class="linenum"> 802</span></a>      if (empty(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>)) {
<a name="l803"><span class="linenum"> 803</span></a>          <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('insert')" href="../_variables/insert.html">$insert</a> = true;
<a name="l804"><span class="linenum"> 804</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a> = new stdClass;
<a name="l805"><span class="linenum"> 805</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('filter')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a> = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>;
<a name="l806"><span class="linenum"> 806</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('contextid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>;
<a name="l807"><span class="linenum"> 807</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('name')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l808"><span class="linenum"> 808</span></a>      }
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('value')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/value.html">value</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l811"><span class="linenum"> 811</span></a>  
<a name="l812"><span class="linenum"> 812</span></a>      if (<a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('insert')" href="../_variables/insert.html">$insert</a>) {
<a name="l813"><span class="linenum"> 813</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('filter_config', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>);
<a name="l814"><span class="linenum"> 814</span></a>      } else {
<a name="l815"><span class="linenum"> 815</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('filter_config', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>);
<a name="l816"><span class="linenum"> 816</span></a>      }
<a name="l817"><span class="linenum"> 817</span></a>  }
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment">/**</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment"> * Remove a particular local config variable for a filter in a context.</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment"> *</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment"> * @param integer $contextid The id of the context to get the local config for.</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment"> * @param string $name the setting name.</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment"> */</span>
<a name="l826"><span class="linenum"> 826</span></a>  function <a class="function" onClick="logFunction('filter_unset_local_config')" href="../_functions/filter_unset_local_config.html" onMouseOver="funcPopup(event,'filter_unset_local_config')">filter_unset_local_config</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l827"><span class="linenum"> 827</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l828"><span class="linenum"> 828</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('filter_config', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, 'name' =&gt; <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>));
<a name="l829"><span class="linenum"> 829</span></a>  }
<a name="l830"><span class="linenum"> 830</span></a>  
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">/**</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment"> * Get local config variables for a filter in a context. Normally (when your</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment"> * filter is running) you don't need to call this, becuase the config is fetched</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment"> * for you automatically. You only need this, for example, when you are getting</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment"> * the config so you can show the user an editing from.</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> *</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment"> * @param integer $contextid The ID of the context to get the local config for.</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment"> * @return array of name =&gt; value pairs.</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment"> */</span>
<a name="l841"><span class="linenum"> 841</span></a>  function <a class="function" onClick="logFunction('filter_get_local_config')" href="../_functions/filter_get_local_config.html" onMouseOver="funcPopup(event,'filter_get_local_config')">filter_get_local_config</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l842"><span class="linenum"> 842</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l843"><span class="linenum"> 843</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('filter_config', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>), '', 'name,value');
<a name="l844"><span class="linenum"> 844</span></a>  }
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">/**</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment"> * This function is for use by backup. Gets all the filter information specific</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment"> * to one context.</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> *</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment"> * @param int $contextid</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment"> * @return array Array with two elements. The first element is an array of objects with</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment"> *      fields filter and active. These come from the filter_active table. The</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment"> *      second element is an array of objects with fields filter, name and value</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment"> *      from the filter_config table.</span>
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment"> */</span>
<a name="l856"><span class="linenum"> 856</span></a>  function <a class="function" onClick="logFunction('filter_get_all_local_settings')" href="../_functions/filter_get_all_local_settings.html" onMouseOver="funcPopup(event,'filter_get_all_local_settings')">filter_get_all_local_settings</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l857"><span class="linenum"> 857</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l858"><span class="linenum"> 858</span></a>      return array(
<a name="l859"><span class="linenum"> 859</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('filter_active', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>), 'filter', 'filter,active'),
<a name="l860"><span class="linenum"> 860</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('filter_config', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>), 'filter,name', 'filter,name,value'),
<a name="l861"><span class="linenum"> 861</span></a>      );
<a name="l862"><span class="linenum"> 862</span></a>  }
<a name="l863"><span class="linenum"> 863</span></a>  
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">/**</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment"> * Get the list of active filters, in the order that they should be used</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment"> * for a particular context, along with any local configuration variables.</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment"> *</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment"> * @param context $context a context</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment"> * @return array an array where the keys are the filter names, for example</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment"> *      'tex' and the values are any local</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment"> *      configuration for that filter, as an array of name =&gt; value pairs</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment"> *      from the filter_config table. In a lot of cases, this will be an</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment"> *      empty array. So, an example return value for this function might be</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment"> *      array(tex' =&gt; array())</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment"> */</span>
<a name="l876"><span class="linenum"> 876</span></a>  function <a class="function" onClick="logFunction('filter_get_active_in_context')" href="../_functions/filter_get_active_in_context.html" onMouseOver="funcPopup(event,'filter_get_active_in_context')">filter_get_active_in_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l877"><span class="linenum"> 877</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>;
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>      if (!isset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>)) {
<a name="l880"><span class="linenum"> 880</span></a>          <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a> = new stdClass();
<a name="l881"><span class="linenum"> 881</span></a>      }
<a name="l882"><span class="linenum"> 882</span></a>  
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">    // Use cache (this is a within-request cache only) if available. See</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">    // function filter_preload_activities.</span>
<a name="l885"><span class="linenum"> 885</span></a>      if (isset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>) &amp;&amp;
<a name="l886"><span class="linenum"> 886</span></a>              <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>)) {
<a name="l887"><span class="linenum"> 887</span></a>          return <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l888"><span class="linenum"> 888</span></a>      }
<a name="l889"><span class="linenum"> 889</span></a>  
<a name="l890"><span class="linenum"> 890</span></a>      <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('/', ',', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, '/'));
<a name="l891"><span class="linenum"> 891</span></a>  
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">    // The following SQL is tricky. It is explained on</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">    // http://docs.moodle.org/dev/Filter_enable/disable_by_context</span>
<a name="l894"><span class="linenum"> 894</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT active.filter, fc.name, fc.value
<a name="l895"><span class="linenum"> 895</span></a>           FROM (SELECT f.filter, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(f.sortorder) AS sortorder
<a name="l896"><span class="linenum"> 896</span></a>               FROM {filter_active} f
<a name="l897"><span class="linenum"> 897</span></a>               JOIN {context} ctx ON f.contextid = ctx.id
<a name="l898"><span class="linenum"> 898</span></a>               WHERE ctx.id IN (<a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>)
<a name="l899"><span class="linenum"> 899</span></a>               GROUP BY filter
<a name="l900"><span class="linenum"> 900</span></a>               HAVING <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(f.active * ctx.depth) &gt; -<a class="phpfunction" onClick="logFunction('MIN')" href="../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">MIN</a>(f.active * ctx.depth)
<a name="l901"><span class="linenum"> 901</span></a>           ) active
<a name="l902"><span class="linenum"> 902</span></a>           LEFT JOIN {filter_config} fc ON fc.filter = active.filter AND fc.contextid = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;id
<a name="l903"><span class="linenum"> 903</span></a>           ORDER BY active.sortorder&quot;;
<a name="l904"><span class="linenum"> 904</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">    // Massage the data into the specified format to return.</span>
<a name="l907"><span class="linenum"> 907</span></a>      <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = array();
<a name="l908"><span class="linenum"> 908</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>) {
<a name="l909"><span class="linenum"> 909</span></a>          if (!isset(<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>])) {
<a name="l910"><span class="linenum"> 910</span></a>              <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = array();
<a name="l911"><span class="linenum"> 911</span></a>          }
<a name="l912"><span class="linenum"> 912</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('name')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l913"><span class="linenum"> 913</span></a>              <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>][<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('name')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('value')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/value.html">value</a>;
<a name="l914"><span class="linenum"> 914</span></a>          }
<a name="l915"><span class="linenum"> 915</span></a>      }
<a name="l916"><span class="linenum"> 916</span></a>  
<a name="l917"><span class="linenum"> 917</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>      return <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>;
<a name="l920"><span class="linenum"> 920</span></a>  }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">/**</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> * Preloads the list of active filters for all activities (modules) on the course</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> * using two database queries.</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> *</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> * @param course_modinfo $modinfo Course object from get_fast_modinfo</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> */</span>
<a name="l928"><span class="linenum"> 928</span></a>  function <a class="function" onClick="logFunction('filter_preload_activities')" href="../_functions/filter_preload_activities.html" onMouseOver="funcPopup(event,'filter_preload_activities')">filter_preload_activities</a>(course_modinfo <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>) {
<a name="l929"><span class="linenum"> 929</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>;
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>      if (!isset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>)) {
<a name="l932"><span class="linenum"> 932</span></a>          <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a> = new stdClass();
<a name="l933"><span class="linenum"> 933</span></a>      }
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">    // Don't repeat preload</span>
<a name="l936"><span class="linenum"> 936</span></a>      if (!isset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('preloaded')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/preloaded.html">preloaded</a>)) {
<a name="l937"><span class="linenum"> 937</span></a>          <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('preloaded')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/preloaded.html">preloaded</a> = array();
<a name="l938"><span class="linenum"> 938</span></a>      }
<a name="l939"><span class="linenum"> 939</span></a>      if (!empty(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('preloaded')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/preloaded.html">preloaded</a>[<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_course_id')" href="../_functions/get_course_id.html" onMouseOver="funcPopup(event,'get_course_id')">get_course_id</a>()])) {
<a name="l940"><span class="linenum"> 940</span></a>          return;
<a name="l941"><span class="linenum"> 941</span></a>      }
<a name="l942"><span class="linenum"> 942</span></a>      <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('preloaded')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/preloaded.html">preloaded</a>[<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_course_id')" href="../_functions/get_course_id.html" onMouseOver="funcPopup(event,'get_course_id')">get_course_id</a>()] = true;
<a name="l943"><span class="linenum"> 943</span></a>  
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment">    // Get contexts for all CMs</span>
<a name="l945"><span class="linenum"> 945</span></a>      <a class="var it36549" onMouseOver="hilite(36549)" onMouseOut="lolite()" onClick="logVariable('cmcontexts')" href="../_variables/cmcontexts.html">$cmcontexts</a> = array();
<a name="l946"><span class="linenum"> 946</span></a>      <a class="var it36550" onMouseOver="hilite(36550)" onMouseOut="lolite()" onClick="logVariable('cmcontextids')" href="../_variables/cmcontextids.html">$cmcontextids</a> = array();
<a name="l947"><span class="linenum"> 947</span></a>      foreach (<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cms')" href="../_functions/get_cms.html" onMouseOver="funcPopup(event,'get_cms')">get_cms</a>() as <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) {
<a name="l948"><span class="linenum"> 948</span></a>          <a class="var it8109" onMouseOver="hilite(8109)" onMouseOut="lolite()" onClick="logVariable('modulecontext')" href="../_variables/modulecontext.html">$modulecontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l949"><span class="linenum"> 949</span></a>          <a class="var it36550" onMouseOver="hilite(36550)" onMouseOut="lolite()" onClick="logVariable('cmcontextids')" href="../_variables/cmcontextids.html">$cmcontextids</a>[] = <a class="var it8109" onMouseOver="hilite(8109)" onMouseOut="lolite()" onClick="logVariable('modulecontext')" href="../_variables/modulecontext.html">$modulecontext</a>-&gt;<a onClick="logVariable('id')" class="var it44254" onMouseOver="hilite(44254)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l950"><span class="linenum"> 950</span></a>          <a class="var it36549" onMouseOver="hilite(36549)" onMouseOut="lolite()" onClick="logVariable('cmcontexts')" href="../_variables/cmcontexts.html">$cmcontexts</a>[] = <a class="var it8109" onMouseOver="hilite(8109)" onMouseOut="lolite()" onClick="logVariable('modulecontext')" href="../_variables/modulecontext.html">$modulecontext</a>;
<a name="l951"><span class="linenum"> 951</span></a>      }
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">    // Get course context and all other parents...</span>
<a name="l954"><span class="linenum"> 954</span></a>      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_course_id')" href="../_functions/get_course_id.html" onMouseOver="funcPopup(event,'get_course_id')">get_course_id</a>());
<a name="l955"><span class="linenum"> 955</span></a>      <a class="var it15440" onMouseOver="hilite(15440)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('path')" class="var it43118" onMouseOver="hilite(43118)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, 1));
<a name="l956"><span class="linenum"> 956</span></a>      <a class="var it36551" onMouseOver="hilite(36551)" onMouseOut="lolite()" onClick="logVariable('allcontextids')" href="../_variables/allcontextids.html">$allcontextids</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it36550" onMouseOver="hilite(36550)" onMouseOut="lolite()" onClick="logVariable('cmcontextids')" href="../_variables/cmcontextids.html">$cmcontextids</a>, <a class="var it15440" onMouseOver="hilite(15440)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a>);
<a name="l957"><span class="linenum"> 957</span></a>  
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">    // Get all filter_active rows relating to all these contexts</span>
<a name="l959"><span class="linenum"> 959</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a> (<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it36551" onMouseOver="hilite(36551)" onMouseOut="lolite()" onClick="logVariable('allcontextids')" href="../_variables/allcontextids.html">$allcontextids</a>);
<a name="l960"><span class="linenum"> 960</span></a>      <a class="var it36552" onMouseOver="hilite(36552)" onMouseOut="lolite()" onClick="logVariable('filteractives')" href="../_variables/filteractives.html">$filteractives</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('filter_active', &quot;contextid <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l961"><span class="linenum"> 961</span></a>  
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment">    // Get all filter_config only for the cm contexts</span>
<a name="l963"><span class="linenum"> 963</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a> (<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it36550" onMouseOver="hilite(36550)" onMouseOut="lolite()" onClick="logVariable('cmcontextids')" href="../_variables/cmcontextids.html">$cmcontextids</a>);
<a name="l964"><span class="linenum"> 964</span></a>      <a class="var it36553" onMouseOver="hilite(36553)" onMouseOut="lolite()" onClick="logVariable('filterconfigs')" href="../_variables/filterconfigs.html">$filterconfigs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('filter_config', &quot;contextid <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment">    // Note: I was a bit surprised that filter_config only works for the</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">    // most specific context (i.e. it does not need to be checked for course</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">    // context if we only care about CMs) however basede on code in</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">    // filter_get_active_in_context, this does seem to be correct.</span>
<a name="l970"><span class="linenum"> 970</span></a>  
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment">    // Build course default active list. Initially this will be an array of</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">    // filter name =&gt; active score (where an active score &gt;0 means it's active)</span>
<a name="l973"><span class="linenum"> 973</span></a>      <a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a> = array();
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment">    // Also build list of filter_active rows below course level, by contextid</span>
<a name="l976"><span class="linenum"> 976</span></a>      <a class="var it36555" onMouseOver="hilite(36555)" onMouseOut="lolite()" onClick="logVariable('remainingactives')" href="../_variables/remainingactives.html">$remainingactives</a> = array();
<a name="l977"><span class="linenum"> 977</span></a>  
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">    // Array lists filters that are banned at top level</span>
<a name="l979"><span class="linenum"> 979</span></a>      <a class="var it36556" onMouseOver="hilite(36556)" onMouseOut="lolite()" onClick="logVariable('banned')" href="../_variables/banned.html">$banned</a> = array();
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>  <span class="comment">    // Add any active filters in parent contexts to the array</span>
<a name="l982"><span class="linenum"> 982</span></a>      foreach (<a class="var it36552" onMouseOver="hilite(36552)" onMouseOut="lolite()" onClick="logVariable('filteractives')" href="../_variables/filteractives.html">$filteractives</a> as <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>) {
<a name="l983"><span class="linenum"> 983</span></a>          <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('contextid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>, <a class="var it15440" onMouseOver="hilite(15440)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a>);
<a name="l984"><span class="linenum"> 984</span></a>          if (<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> !== false) {
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">            // Find entry</span>
<a name="l986"><span class="linenum"> 986</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>, <a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a>)) {
<a name="l987"><span class="linenum"> 987</span></a>                  <a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = 0;
<a name="l988"><span class="linenum"> 988</span></a>              }
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">            // This maths copes with reading rows in any order. Turning on/off</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">            // at site level counts 1, at next level down 4, at next level 9,</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">            // then 16, etc. This means the deepest level always wins, except</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">            // against the -9999 at top level.</span>
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] +=
<a name="l994"><span class="linenum"> 994</span></a>                  (<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> + 1) * (<a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> + 1) * <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('active')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/active.html">active</a>;
<a name="l995"><span class="linenum"> 995</span></a>  
<a name="l996"><span class="linenum"> 996</span></a>              if (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('active')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/active.html">active</a> == <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a>) {
<a name="l997"><span class="linenum"> 997</span></a>                  <a class="var it36556" onMouseOver="hilite(36556)" onMouseOut="lolite()" onClick="logVariable('banned')" href="../_variables/banned.html">$banned</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = true;
<a name="l998"><span class="linenum"> 998</span></a>              }
<a name="l999"><span class="linenum"> 999</span></a>          } else {
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">            // Build list of other rows indexed by contextid</span>
<a name="l1001"><span class="linenum">1001</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('contextid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>, <a class="var it36555" onMouseOver="hilite(36555)" onMouseOut="lolite()" onClick="logVariable('remainingactives')" href="../_variables/remainingactives.html">$remainingactives</a>)) {
<a name="l1002"><span class="linenum">1002</span></a>                  <a class="var it36555" onMouseOver="hilite(36555)" onMouseOut="lolite()" onClick="logVariable('remainingactives')" href="../_variables/remainingactives.html">$remainingactives</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('contextid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>] = array();
<a name="l1003"><span class="linenum">1003</span></a>              }
<a name="l1004"><span class="linenum">1004</span></a>              <a class="var it36555" onMouseOver="hilite(36555)" onMouseOut="lolite()" onClick="logVariable('remainingactives')" href="../_variables/remainingactives.html">$remainingactives</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('contextid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>][] = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>;
<a name="l1005"><span class="linenum">1005</span></a>          }
<a name="l1006"><span class="linenum">1006</span></a>      }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">    // Chuck away the ones that aren't active.</span>
<a name="l1009"><span class="linenum">1009</span></a>      foreach (<a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a> as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>=&gt;<a class="var it647" onMouseOver="hilite(647)" onMouseOut="lolite()" onClick="logVariable('score')" href="../_variables/score.html">$score</a>) {
<a name="l1010"><span class="linenum">1010</span></a>          if (<a class="var it647" onMouseOver="hilite(647)" onMouseOut="lolite()" onClick="logVariable('score')" href="../_variables/score.html">$score</a> &lt;= 0) {
<a name="l1011"><span class="linenum">1011</span></a>              unset(<a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>]);
<a name="l1012"><span class="linenum">1012</span></a>          } else {
<a name="l1013"><span class="linenum">1013</span></a>              <a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>] = array();
<a name="l1014"><span class="linenum">1014</span></a>          }
<a name="l1015"><span class="linenum">1015</span></a>      }
<a name="l1016"><span class="linenum">1016</span></a>  
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">    // Loop through the contexts to reconstruct filter_active lists for each</span>
<a name="l1018"><span class="linenum">1018</span></a>  <span class="comment">    // cm on the course.</span>
<a name="l1019"><span class="linenum">1019</span></a>      if (!isset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>)) {
<a name="l1020"><span class="linenum">1020</span></a>          <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a> = array();
<a name="l1021"><span class="linenum">1021</span></a>      }
<a name="l1022"><span class="linenum">1022</span></a>      foreach (<a class="var it36550" onMouseOver="hilite(36550)" onMouseOut="lolite()" onClick="logVariable('cmcontextids')" href="../_variables/cmcontextids.html">$cmcontextids</a> as <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">        // Copy course list</span>
<a name="l1024"><span class="linenum">1024</span></a>          <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>[<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>] = <a class="var it36554" onMouseOver="hilite(36554)" onMouseOut="lolite()" onClick="logVariable('courseactive')" href="../_variables/courseactive.html">$courseactive</a>;
<a name="l1025"><span class="linenum">1025</span></a>  
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">        // Are there any changes to the active list?</span>
<a name="l1027"><span class="linenum">1027</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it36555" onMouseOver="hilite(36555)" onMouseOut="lolite()" onClick="logVariable('remainingactives')" href="../_variables/remainingactives.html">$remainingactives</a>)) {
<a name="l1028"><span class="linenum">1028</span></a>              foreach (<a class="var it36555" onMouseOver="hilite(36555)" onMouseOut="lolite()" onClick="logVariable('remainingactives')" href="../_variables/remainingactives.html">$remainingactives</a>[<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>] as <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>) {
<a name="l1029"><span class="linenum">1029</span></a>                  if (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('active')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/active.html">active</a> &gt; 0 &amp;&amp; empty(<a class="var it36556" onMouseOver="hilite(36556)" onMouseOut="lolite()" onClick="logVariable('banned')" href="../_variables/banned.html">$banned</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>])) {
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment">                    // If it's marked active for specific context, add entry</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment">                    // (doesn't matter if one exists already).</span>
<a name="l1032"><span class="linenum">1032</span></a>                      <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>[<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>][<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>] = array();
<a name="l1033"><span class="linenum">1033</span></a>                  } else {
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">                    // If it's marked inactive, remove entry (doesn't matter</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">                    // if it doesn't exist).</span>
<a name="l1036"><span class="linenum">1036</span></a>                      unset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>[<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>][<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>]);
<a name="l1037"><span class="linenum">1037</span></a>                  }
<a name="l1038"><span class="linenum">1038</span></a>              }
<a name="l1039"><span class="linenum">1039</span></a>          }
<a name="l1040"><span class="linenum">1040</span></a>      }
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">    // Process all config rows to add config data to these entries.</span>
<a name="l1043"><span class="linenum">1043</span></a>      foreach (<a class="var it36553" onMouseOver="hilite(36553)" onMouseOut="lolite()" onClick="logVariable('filterconfigs')" href="../_variables/filterconfigs.html">$filterconfigs</a> as <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>) {
<a name="l1044"><span class="linenum">1044</span></a>          if (isset(<a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('contextid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>][<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>])) {
<a name="l1045"><span class="linenum">1045</span></a>              <a class="var it33352" onMouseOver="hilite(33352)" onMouseOut="lolite()" onClick="logVariable('FILTERLIB_PRIVATE')" href="../_variables/FILTERLIB_PRIVATE.html">$FILTERLIB_PRIVATE</a>-&gt;<a onClick="logVariable('active')" class="var it44253" onMouseOver="hilite(44253)" onMouseOut="lolite()" href="../_variables/active.html">active</a>[<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('contextid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>][<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('filter')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>][<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('name')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('value')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../_variables/value.html">value</a>;
<a name="l1046"><span class="linenum">1046</span></a>          }
<a name="l1047"><span class="linenum">1047</span></a>      }
<a name="l1048"><span class="linenum">1048</span></a>  }
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">/**</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment"> * List all of the filters that are available in this context, and what the</span>
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment"> * local and inherited states of that filter are.</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment"> *</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment"> * @param context $context a context that is not the system context.</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment"> * @return array an array with filter names, for example 'tex'</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment"> *      as keys. and and the values are objects with fields:</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment"> *      -&gt;filter filter name, same as the key.</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment"> *      -&gt;localstate TEXTFILTER_ON/OFF/INHERIT</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment"> *      -&gt;inheritedstate TEXTFILTER_ON/OFF - the state that will be used if localstate is set to TEXTFILTER_INHERIT.</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment"> */</span>
<a name="l1061"><span class="linenum">1061</span></a>  function <a class="function" onClick="logFunction('filter_get_available_in_context')" href="../_functions/filter_get_available_in_context.html" onMouseOver="funcPopup(event,'filter_get_available_in_context')">filter_get_available_in_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1062"><span class="linenum">1062</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment">    // The complex logic is working out the active state in the parent context,</span>
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">    // so strip the current context from the list.</span>
<a name="l1066"><span class="linenum">1066</span></a>      <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('path')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, '/'));
<a name="l1067"><span class="linenum">1067</span></a>      <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>);
<a name="l1068"><span class="linenum">1068</span></a>      <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>);
<a name="l1069"><span class="linenum">1069</span></a>      if (empty(<a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>)) {
<a name="l1070"><span class="linenum">1070</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('filter_get_available_in_context cannot be called with the system context.');
<a name="l1071"><span class="linenum">1071</span></a>      }
<a name="l1072"><span class="linenum">1072</span></a>  
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">    // The following SQL is tricky, in the same way at the SQL in filter_get_active_in_context.</span>
<a name="l1074"><span class="linenum">1074</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT parent_states.filter,
<a name="l1075"><span class="linenum">1075</span></a>                  CASE WHEN fa.active IS NULL THEN &quot; . <a class="constant" onClick="logConstant('TEXTFILTER_INHERIT')" href="../_constants/TEXTFILTER_INHERIT.html" onMouseOver="constPopup(event,'TEXTFILTER_INHERIT')">TEXTFILTER_INHERIT</a> . &quot;
<a name="l1076"><span class="linenum">1076</span></a>                  ELSE fa.active END AS localstate,
<a name="l1077"><span class="linenum">1077</span></a>               parent_states.inheritedstate
<a name="l1078"><span class="linenum">1078</span></a>           FROM (SELECT f.filter, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(f.sortorder) AS sortorder,
<a name="l1079"><span class="linenum">1079</span></a>                      CASE WHEN <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(f.active * ctx.depth) &gt; -<a class="phpfunction" onClick="logFunction('MIN')" href="../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">MIN</a>(f.active * ctx.depth) THEN &quot; . <a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a> . &quot;
<a name="l1080"><span class="linenum">1080</span></a>                      ELSE &quot; . <a class="constant" onClick="logConstant('TEXTFILTER_OFF')" href="../_constants/TEXTFILTER_OFF.html" onMouseOver="constPopup(event,'TEXTFILTER_OFF')">TEXTFILTER_OFF</a> . &quot; END AS inheritedstate
<a name="l1081"><span class="linenum">1081</span></a>               FROM {filter_active} f
<a name="l1082"><span class="linenum">1082</span></a>               JOIN {context} ctx ON f.contextid = ctx.id
<a name="l1083"><span class="linenum">1083</span></a>               WHERE ctx.id IN (<a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>)
<a name="l1084"><span class="linenum">1084</span></a>               GROUP BY f.filter
<a name="l1085"><span class="linenum">1085</span></a>               HAVING <a class="phpfunction" onClick="logFunction('MIN')" href="../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">MIN</a>(f.active) &gt; &quot; . <a class="constant" onClick="logConstant('TEXTFILTER_DISABLED')" href="../_constants/TEXTFILTER_DISABLED.html" onMouseOver="constPopup(event,'TEXTFILTER_DISABLED')">TEXTFILTER_DISABLED</a> . &quot;
<a name="l1086"><span class="linenum">1086</span></a>           ) parent_states
<a name="l1087"><span class="linenum">1087</span></a>           LEFT JOIN {filter_active} fa ON fa.filter = parent_states.filter AND fa.contextid = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;id
<a name="l1088"><span class="linenum">1088</span></a>           ORDER BY parent_states.sortorder&quot;;
<a name="l1089"><span class="linenum">1089</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l1090"><span class="linenum">1090</span></a>  }
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>  <span class="comment">/**</span>
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment"> * This function is for use by the filter administration page.</span>
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment"> *</span>
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment"> * @return array 'filtername' =&gt; object with fields 'filter' (=filtername), 'active' and 'sortorder'</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment"> */</span>
<a name="l1097"><span class="linenum">1097</span></a>  function <a class="function" onClick="logFunction('filter_get_global_states')" href="../_functions/filter_get_global_states.html" onMouseOver="funcPopup(event,'filter_get_global_states')">filter_get_global_states</a>() {
<a name="l1098"><span class="linenum">1098</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1099"><span class="linenum">1099</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1100"><span class="linenum">1100</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('filter_active', array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), 'sortorder', 'filter,active,sortorder');
<a name="l1101"><span class="linenum">1101</span></a>  }
<a name="l1102"><span class="linenum">1102</span></a>  
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">/**</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment"> * Delete all the data in the database relating to a filter, prior to deleting it.</span>
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment"> *</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment"> */</span>
<a name="l1108"><span class="linenum">1108</span></a>  function <a class="function" onClick="logFunction('filter_delete_all_for_filter')" href="../_functions/filter_delete_all_for_filter.html" onMouseOver="funcPopup(event,'filter_delete_all_for_filter')">filter_delete_all_for_filter</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l1109"><span class="linenum">1109</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>      <a class="function" onClick="logFunction('unset_all_config_for_plugin')" href="../_functions/unset_all_config_for_plugin.html" onMouseOver="funcPopup(event,'unset_all_config_for_plugin')">unset_all_config_for_plugin</a>('filter_' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>);
<a name="l1112"><span class="linenum">1112</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('filter_active', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>));
<a name="l1113"><span class="linenum">1113</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('filter_config', array('filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>));
<a name="l1114"><span class="linenum">1114</span></a>  }
<a name="l1115"><span class="linenum">1115</span></a>  
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">/**</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment"> * Delete all the data in the database relating to a context, used when contexts are deleted.</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment"> *</span>
<a name="l1119"><span class="linenum">1119</span></a>  <span class="comment"> * @param integer $contextid The id of the context being deleted.</span>
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment"> */</span>
<a name="l1121"><span class="linenum">1121</span></a>  function <a class="function" onClick="logFunction('filter_delete_all_for_context')" href="../_functions/filter_delete_all_for_context.html" onMouseOver="funcPopup(event,'filter_delete_all_for_context')">filter_delete_all_for_context</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l1122"><span class="linenum">1122</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1123"><span class="linenum">1123</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('filter_active', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l1124"><span class="linenum">1124</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('filter_config', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l1125"><span class="linenum">1125</span></a>  }
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">/**</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment"> * Does this filter have a global settings page in the admin tree?</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment"> * (The settings page for a filter must be called, for example, filtersettingfiltertex.)</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment"> *</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment"> * @return boolean Whether there should be a 'Settings' link on the config page.</span>
<a name="l1133"><span class="linenum">1133</span></a>  <span class="comment"> */</span>
<a name="l1134"><span class="linenum">1134</span></a>  function <a class="function" onClick="logFunction('filter_has_global_settings')" href="../_functions/filter_has_global_settings.html" onMouseOver="funcPopup(event,'filter_has_global_settings')">filter_has_global_settings</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l1135"><span class="linenum">1135</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1136"><span class="linenum">1136</span></a>      <a class="var it34010" onMouseOver="hilite(34010)" onMouseOut="lolite()" onClick="logVariable('settingspath')" href="../_variables/settingspath.html">$settingspath</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/filter/' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> . '/settings.php';
<a name="l1137"><span class="linenum">1137</span></a>      if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it34010" onMouseOver="hilite(34010)" onMouseOut="lolite()" onClick="logVariable('settingspath')" href="../_variables/settingspath.html">$settingspath</a>)) {
<a name="l1138"><span class="linenum">1138</span></a>          return true;
<a name="l1139"><span class="linenum">1139</span></a>      }
<a name="l1140"><span class="linenum">1140</span></a>      <a class="var it34010" onMouseOver="hilite(34010)" onMouseOut="lolite()" onClick="logVariable('settingspath')" href="../_variables/settingspath.html">$settingspath</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/filter/' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> . '/filtersettings.php';
<a name="l1141"><span class="linenum">1141</span></a>      return <a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it34010" onMouseOver="hilite(34010)" onMouseOut="lolite()" onClick="logVariable('settingspath')" href="../_variables/settingspath.html">$settingspath</a>);
<a name="l1142"><span class="linenum">1142</span></a>  }
<a name="l1143"><span class="linenum">1143</span></a>  
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">/**</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment"> * Does this filter have local (per-context) settings?</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment"> *</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment"> * @param string $filter The filter name, for example 'tex'.</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment"> * @return boolean Whether there should be a 'Settings' link on the manage filters in context page.</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment"> */</span>
<a name="l1150"><span class="linenum">1150</span></a>  function <a class="function" onClick="logFunction('filter_has_local_settings')" href="../_functions/filter_has_local_settings.html" onMouseOver="funcPopup(event,'filter_has_local_settings')">filter_has_local_settings</a>(<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l1151"><span class="linenum">1151</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1152"><span class="linenum">1152</span></a>      <a class="var it34010" onMouseOver="hilite(34010)" onMouseOut="lolite()" onClick="logVariable('settingspath')" href="../_variables/settingspath.html">$settingspath</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/filter/' . <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a> . '/filterlocalsettings.php';
<a name="l1153"><span class="linenum">1153</span></a>      return <a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it34010" onMouseOver="hilite(34010)" onMouseOut="lolite()" onClick="logVariable('settingspath')" href="../_variables/settingspath.html">$settingspath</a>);
<a name="l1154"><span class="linenum">1154</span></a>  }
<a name="l1155"><span class="linenum">1155</span></a>  
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment">/**</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment"> * Certain types of context (block and user) may not have local filter settings.</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment"> * the function checks a context to see whether it may have local config.</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment"> *</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment"> * @param object $context a context.</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment"> * @return boolean whether this context may have local filter settings.</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment"> */</span>
<a name="l1163"><span class="linenum">1163</span></a>  function <a class="function" onClick="logFunction('filter_context_may_have_filter_settings')" href="../_functions/filter_context_may_have_filter_settings.html" onMouseOver="funcPopup(event,'filter_context_may_have_filter_settings')">filter_context_may_have_filter_settings</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1164"><span class="linenum">1164</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a> &amp;&amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>;
<a name="l1165"><span class="linenum">1165</span></a>  }
<a name="l1166"><span class="linenum">1166</span></a>  
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">/**</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment"> * Process phrases intelligently found within a HTML text (such as adding links).</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment"> *</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment"> * @staticvar array $usedpharses</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment"> * @param string $text             the text that we are filtering</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment"> * @param array $link_array       an array of filterobjects</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment"> * @param array $ignoretagsopen   an array of opening tags that we should ignore while filtering</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment"> * @param array $ignoretagsclose  an array of corresponding closing tags</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment"> * @param bool $overridedefaultignore True to only use tags provided by arguments</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment"> * @return string</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment"> **/</span>
<a name="l1178"><span class="linenum">1178</span></a>  function <a class="function" onClick="logFunction('filter_phrases')" href="../_functions/filter_phrases.html" onMouseOver="funcPopup(event,'filter_phrases')">filter_phrases</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, &amp;<a class="var it36557" onMouseOver="hilite(36557)" onMouseOut="lolite()" onClick="logVariable('link_array')" href="../_variables/link_array.html">$link_array</a>, <a class="var it36558" onMouseOver="hilite(36558)" onMouseOut="lolite()" onClick="logVariable('ignoretagsopen')" href="../_variables/ignoretagsopen.html">$ignoretagsopen</a>=NULL, <a class="var it36559" onMouseOver="hilite(36559)" onMouseOut="lolite()" onClick="logVariable('ignoretagsclose')" href="../_variables/ignoretagsclose.html">$ignoretagsclose</a>=NULL,
<a name="l1179"><span class="linenum">1179</span></a>          <a class="var it36560" onMouseOver="hilite(36560)" onMouseOut="lolite()" onClick="logVariable('overridedefaultignore')" href="../_variables/overridedefaultignore.html">$overridedefaultignore</a>=false) {
<a name="l1180"><span class="linenum">1180</span></a>  
<a name="l1181"><span class="linenum">1181</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>      static <a class="var it36561" onMouseOver="hilite(36561)" onMouseOut="lolite()" onClick="logVariable('usedphrases')" href="../_variables/usedphrases.html">$usedphrases</a>;
<a name="l1184"><span class="linenum">1184</span></a>  
<a name="l1185"><span class="linenum">1185</span></a>      <a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a> = array();  <span class="comment">// To store all the enclosig tags to be completely ignored.</span>
<a name="l1186"><span class="linenum">1186</span></a>      <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a> = array();        <span class="comment">// To store all the simple tags to be ignored.</span>
<a name="l1187"><span class="linenum">1187</span></a>  
<a name="l1188"><span class="linenum">1188</span></a>      if (!<a class="var it36560" onMouseOver="hilite(36560)" onMouseOut="lolite()" onClick="logVariable('overridedefaultignore')" href="../_variables/overridedefaultignore.html">$overridedefaultignore</a>) {
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">        // A list of open/close tags that we should not replace within</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">        // Extended to include &lt;script&gt;, &lt;textarea&gt;, &lt;select&gt; and &lt;a&gt; tags</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">        // Regular expression allows tags with or without attributes</span>
<a name="l1192"><span class="linenum">1192</span></a>          <a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a>  = array('&lt;head&gt;' , '&lt;nolink&gt;' , '&lt;span class=&quot;nolink&quot;&gt;',
<a name="l1193"><span class="linenum">1193</span></a>                  '&lt;<a class="function" onClick="logFunction('script')" href="../_functions/script.html" onMouseOver="funcPopup(event,'script')">script</a>(\s[^&gt;]*?)?&gt;', '&lt;<a class="function" onClick="logFunction('textarea')" href="../_functions/textarea.html" onMouseOver="funcPopup(event,'textarea')">textarea</a>(\s[^&gt;]*?)?&gt;',
<a name="l1194"><span class="linenum">1194</span></a>                  '&lt;<a class="function" onClick="logFunction('select')" href="../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>(\s[^&gt;]*?)?&gt;', '&lt;<a class="function" onClick="logFunction('a')" href="../_functions/a.html" onMouseOver="funcPopup(event,'a')">a</a>(\s[^&gt;]*?)?&gt;');
<a name="l1195"><span class="linenum">1195</span></a>          <a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a> = array('&lt;/head&gt;', '&lt;/nolink&gt;', '&lt;/span&gt;',
<a name="l1196"><span class="linenum">1196</span></a>                   '&lt;/script&gt;', '&lt;/textarea&gt;', '&lt;/select&gt;','&lt;/a&gt;');
<a name="l1197"><span class="linenum">1197</span></a>      } else {
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment">        // Set an empty default list.</span>
<a name="l1199"><span class="linenum">1199</span></a>          <a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a> = array();
<a name="l1200"><span class="linenum">1200</span></a>          <a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a> = array();
<a name="l1201"><span class="linenum">1201</span></a>      }
<a name="l1202"><span class="linenum">1202</span></a>  
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">    // Add the user defined ignore tags to the default list.</span>
<a name="l1204"><span class="linenum">1204</span></a>      if ( <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it36558" onMouseOver="hilite(36558)" onMouseOut="lolite()" onClick="logVariable('ignoretagsopen')" href="../_variables/ignoretagsopen.html">$ignoretagsopen</a>) ) {
<a name="l1205"><span class="linenum">1205</span></a>          foreach (<a class="var it36558" onMouseOver="hilite(36558)" onMouseOut="lolite()" onClick="logVariable('ignoretagsopen')" href="../_variables/ignoretagsopen.html">$ignoretagsopen</a> as <a class="var it10819" onMouseOver="hilite(10819)" onMouseOut="lolite()" onClick="logVariable('open')" href="../_variables/open.html">$open</a>) {
<a name="l1206"><span class="linenum">1206</span></a>              <a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a>[] = <a class="var it10819" onMouseOver="hilite(10819)" onMouseOut="lolite()" onClick="logVariable('open')" href="../_variables/open.html">$open</a>;
<a name="l1207"><span class="linenum">1207</span></a>          }
<a name="l1208"><span class="linenum">1208</span></a>          foreach (<a class="var it36559" onMouseOver="hilite(36559)" onMouseOut="lolite()" onClick="logVariable('ignoretagsclose')" href="../_variables/ignoretagsclose.html">$ignoretagsclose</a> as <a class="var it14272" onMouseOver="hilite(14272)" onMouseOut="lolite()" onClick="logVariable('close')" href="../_variables/close.html">$close</a>) {
<a name="l1209"><span class="linenum">1209</span></a>              <a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a>[] = <a class="var it14272" onMouseOver="hilite(14272)" onMouseOut="lolite()" onClick="logVariable('close')" href="../_variables/close.html">$close</a>;
<a name="l1210"><span class="linenum">1210</span></a>          }
<a name="l1211"><span class="linenum">1211</span></a>      }
<a name="l1212"><span class="linenum">1212</span></a>  
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">    // Invalid prefixes and suffixes for the fullmatch searches</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">    // Every &quot;word&quot; character, but the underscore, is a invalid suffix or prefix.</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">    // (nice to use this because it includes national characters (accents...) as word characters.</span>
<a name="l1216"><span class="linenum">1216</span></a>      <a class="var it36562" onMouseOver="hilite(36562)" onMouseOut="lolite()" onClick="logVariable('filterinvalidprefixes')" href="../_variables/filterinvalidprefixes.html">$filterinvalidprefixes</a> = '([^\W_])';
<a name="l1217"><span class="linenum">1217</span></a>      <a class="var it36563" onMouseOver="hilite(36563)" onMouseOut="lolite()" onClick="logVariable('filterinvalidsuffixes')" href="../_variables/filterinvalidsuffixes.html">$filterinvalidsuffixes</a> = '([^\W_])';
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">    // Double up some magic chars to avoid &quot;accidental matches&quot;</span>
<a name="l1220"><span class="linenum">1220</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/([#*%])/','\1\1',<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1221"><span class="linenum">1221</span></a>  
<a name="l1222"><span class="linenum">1222</span></a>  
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment">    //Remove everything enclosed by the ignore tags from $text</span>
<a name="l1224"><span class="linenum">1224</span></a>      <a class="function" onClick="logFunction('filter_save_ignore_tags')" href="../_functions/filter_save_ignore_tags.html" onMouseOver="funcPopup(event,'filter_save_ignore_tags')">filter_save_ignore_tags</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,<a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a>,<a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a>,<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>);
<a name="l1225"><span class="linenum">1225</span></a>  
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">    // Remove tags from $text</span>
<a name="l1227"><span class="linenum">1227</span></a>      <a class="function" onClick="logFunction('filter_save_tags')" href="../_functions/filter_save_tags.html" onMouseOver="funcPopup(event,'filter_save_tags')">filter_save_tags</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>);
<a name="l1228"><span class="linenum">1228</span></a>  
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment">    // Time to cycle through each phrase to be linked</span>
<a name="l1230"><span class="linenum">1230</span></a>      <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> = sizeof(<a class="var it36557" onMouseOver="hilite(36557)" onMouseOut="lolite()" onClick="logVariable('link_array')" href="../_variables/link_array.html">$link_array</a>);
<a name="l1231"><span class="linenum">1231</span></a>      for (<a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../_variables/n.html">$n</a>=0; <a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../_variables/n.html">$n</a> &lt; <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a>; <a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../_variables/n.html">$n</a>++) {
<a name="l1232"><span class="linenum">1232</span></a>          <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a> =&amp; <a class="var it36557" onMouseOver="hilite(36557)" onMouseOut="lolite()" onClick="logVariable('link_array')" href="../_variables/link_array.html">$link_array</a>[<a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../_variables/n.html">$n</a>];
<a name="l1233"><span class="linenum">1233</span></a>  
<a name="l1234"><span class="linenum">1234</span></a>  <span class="comment">        // Set some defaults if certain properties are missing</span>
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment">        // Properties may be missing if the filterobject class has not been used to construct the object</span>
<a name="l1236"><span class="linenum">1236</span></a>          if (empty(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>)) {
<a name="l1237"><span class="linenum">1237</span></a>              continue;
<a name="l1238"><span class="linenum">1238</span></a>          }
<a name="l1239"><span class="linenum">1239</span></a>  
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment">        // Avoid integers &lt; 1000 to be linked. See bug 1446.</span>
<a name="l1241"><span class="linenum">1241</span></a>          <a class="var it36564" onMouseOver="hilite(36564)" onMouseOut="lolite()" onClick="logVariable('intcurrent')" href="../_variables/intcurrent.html">$intcurrent</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>);
<a name="l1242"><span class="linenum">1242</span></a>          if (!empty(<a class="var it36564" onMouseOver="hilite(36564)" onMouseOut="lolite()" onClick="logVariable('intcurrent')" href="../_variables/intcurrent.html">$intcurrent</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('strval')" href="../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>(<a class="var it36564" onMouseOver="hilite(36564)" onMouseOut="lolite()" onClick="logVariable('intcurrent')" href="../_variables/intcurrent.html">$intcurrent</a>) == <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a> &amp;&amp; <a class="var it36564" onMouseOver="hilite(36564)" onMouseOut="lolite()" onClick="logVariable('intcurrent')" href="../_variables/intcurrent.html">$intcurrent</a> &lt; 1000) {
<a name="l1243"><span class="linenum">1243</span></a>              continue;
<a name="l1244"><span class="linenum">1244</span></a>          }
<a name="l1245"><span class="linenum">1245</span></a>  
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">        // All this work has to be done ONLY it it hasn't been done before</span>
<a name="l1247"><span class="linenum">1247</span></a>           if (!<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_calculated')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_calculated.html">work_calculated</a>) {
<a name="l1248"><span class="linenum">1248</span></a>              if (!isset(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/hreftagbegin.html">hreftagbegin</a>) or !isset(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('hreftagend')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/hreftagend.html">hreftagend</a>)) {
<a name="l1249"><span class="linenum">1249</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagbegin.html">work_hreftagbegin</a> = '&lt;span class=&quot;highlight&quot;';
<a name="l1250"><span class="linenum">1250</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagend')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagend.html">work_hreftagend</a>   = '&lt;/span&gt;';
<a name="l1251"><span class="linenum">1251</span></a>              } else {
<a name="l1252"><span class="linenum">1252</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagbegin.html">work_hreftagbegin</a> = <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/hreftagbegin.html">hreftagbegin</a>;
<a name="l1253"><span class="linenum">1253</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagend')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagend.html">work_hreftagend</a>   = <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('hreftagend')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/hreftagend.html">hreftagend</a>;
<a name="l1254"><span class="linenum">1254</span></a>              }
<a name="l1255"><span class="linenum">1255</span></a>  
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment">            // Double up chars to protect true duplicates</span>
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment">            // be cleared up before returning to the user.</span>
<a name="l1258"><span class="linenum">1258</span></a>              <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagbegin.html">work_hreftagbegin</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/([#*%])/','\1\1',<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagbegin.html">work_hreftagbegin</a>);
<a name="l1259"><span class="linenum">1259</span></a>  
<a name="l1260"><span class="linenum">1260</span></a>              if (empty(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('casesensitive')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/casesensitive.html">casesensitive</a>)) {
<a name="l1261"><span class="linenum">1261</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_casesensitive')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_casesensitive.html">work_casesensitive</a> = false;
<a name="l1262"><span class="linenum">1262</span></a>              } else {
<a name="l1263"><span class="linenum">1263</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_casesensitive')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_casesensitive.html">work_casesensitive</a> = true;
<a name="l1264"><span class="linenum">1264</span></a>              }
<a name="l1265"><span class="linenum">1265</span></a>              if (empty(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('fullmatch')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/fullmatch.html">fullmatch</a>)) {
<a name="l1266"><span class="linenum">1266</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_fullmatch')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_fullmatch.html">work_fullmatch</a> = false;
<a name="l1267"><span class="linenum">1267</span></a>              } else {
<a name="l1268"><span class="linenum">1268</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_fullmatch')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_fullmatch.html">work_fullmatch</a> = true;
<a name="l1269"><span class="linenum">1269</span></a>              }
<a name="l1270"><span class="linenum">1270</span></a>  
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment">            // Strip tags out of the phrase</span>
<a name="l1272"><span class="linenum">1272</span></a>              <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>);
<a name="l1273"><span class="linenum">1273</span></a>  
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">            // Double up chars that might cause a false match -- the duplicates will</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">            // be cleared up before returning to the user.</span>
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/([#*%])/','\1\1',<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>);
<a name="l1277"><span class="linenum">1277</span></a>  
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">            // Set the replacement phrase properly</span>
<a name="l1279"><span class="linenum">1279</span></a>              if (<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('replacementphrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/replacementphrase.html">replacementphrase</a>) {    //We have specified a replacement phrase
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">                // Strip tags</span>
<a name="l1281"><span class="linenum">1281</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_replacementphrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_replacementphrase.html">work_replacementphrase</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('replacementphrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/replacementphrase.html">replacementphrase</a>);
<a name="l1282"><span class="linenum">1282</span></a>              } else {                                 //The replacement is the original phrase as matched below
<a name="l1283"><span class="linenum">1283</span></a>                  <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_replacementphrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_replacementphrase.html">work_replacementphrase</a> = '<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>';
<a name="l1284"><span class="linenum">1284</span></a>              }
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">            // Quote any regular expression characters and the delimiter in the work phrase to be searched</span>
<a name="l1287"><span class="linenum">1287</span></a>              <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a> = <a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>, '/');
<a name="l1288"><span class="linenum">1288</span></a>  
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">            // Work calculated</span>
<a name="l1290"><span class="linenum">1290</span></a>              <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_calculated')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_calculated.html">work_calculated</a> = true;
<a name="l1291"><span class="linenum">1291</span></a>  
<a name="l1292"><span class="linenum">1292</span></a>          }
<a name="l1293"><span class="linenum">1293</span></a>  
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment">        // If $CFG-&gt;filtermatchoneperpage, avoid previously (request) linked phrases</span>
<a name="l1295"><span class="linenum">1295</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('filtermatchoneperpage')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/filtermatchoneperpage.html">filtermatchoneperpage</a>)) {
<a name="l1296"><span class="linenum">1296</span></a>              if (!empty(<a class="var it36561" onMouseOver="hilite(36561)" onMouseOut="lolite()" onClick="logVariable('usedphrases')" href="../_variables/usedphrases.html">$usedphrases</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>,<a class="var it36561" onMouseOver="hilite(36561)" onMouseOut="lolite()" onClick="logVariable('usedphrases')" href="../_variables/usedphrases.html">$usedphrases</a>)) {
<a name="l1297"><span class="linenum">1297</span></a>                  continue;
<a name="l1298"><span class="linenum">1298</span></a>              }
<a name="l1299"><span class="linenum">1299</span></a>          }
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">        // Regular expression modifiers</span>
<a name="l1302"><span class="linenum">1302</span></a>          <a class="var it25396" onMouseOver="hilite(25396)" onMouseOut="lolite()" onClick="logVariable('modifiers')" href="../_variables/modifiers.html">$modifiers</a> = (<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_casesensitive')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_casesensitive.html">work_casesensitive</a>) ? 's' : 'isu'; <span class="comment">// works in unicode mode!</span>
<a name="l1303"><span class="linenum">1303</span></a>  
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">        // Do we need to do a fullmatch?</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">        // If yes then go through and remove any non full matching entries</span>
<a name="l1306"><span class="linenum">1306</span></a>          if (<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_fullmatch')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_fullmatch.html">work_fullmatch</a>) {
<a name="l1307"><span class="linenum">1307</span></a>              <a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a> = array();
<a name="l1308"><span class="linenum">1308</span></a>              <a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../_variables/regexp.html">$regexp</a> = '/'.<a class="var it36562" onMouseOver="hilite(36562)" onMouseOut="lolite()" onClick="logVariable('filterinvalidprefixes')" href="../_variables/filterinvalidprefixes.html">$filterinvalidprefixes</a>.'('.<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>.')|('.<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>.')'.<a class="var it36563" onMouseOver="hilite(36563)" onMouseOut="lolite()" onClick="logVariable('filterinvalidsuffixes')" href="../_variables/filterinvalidsuffixes.html">$filterinvalidsuffixes</a>.'/'.<a class="var it25396" onMouseOver="hilite(25396)" onMouseOut="lolite()" onClick="logVariable('modifiers')" href="../_variables/modifiers.html">$modifiers</a>;
<a name="l1309"><span class="linenum">1309</span></a>  
<a name="l1310"><span class="linenum">1310</span></a>              <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>(<a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../_variables/regexp.html">$regexp</a>,<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,<a class="var it36567" onMouseOver="hilite(36567)" onMouseOut="lolite()" onClick="logVariable('list_of_notfullmatches')" href="../_variables/list_of_notfullmatches.html">$list_of_notfullmatches</a>);
<a name="l1311"><span class="linenum">1311</span></a>  
<a name="l1312"><span class="linenum">1312</span></a>              if (<a class="var it36567" onMouseOver="hilite(36567)" onMouseOut="lolite()" onClick="logVariable('list_of_notfullmatches')" href="../_variables/list_of_notfullmatches.html">$list_of_notfullmatches</a>) {
<a name="l1313"><span class="linenum">1313</span></a>                  foreach (<a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it36567" onMouseOver="hilite(36567)" onMouseOut="lolite()" onClick="logVariable('list_of_notfullmatches')" href="../_variables/list_of_notfullmatches.html">$list_of_notfullmatches</a>[0]) as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1314"><span class="linenum">1314</span></a>                      <a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>['&lt;*'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>.'*&gt;'] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1315"><span class="linenum">1315</span></a>                  }
<a name="l1316"><span class="linenum">1316</span></a>                  if (!empty(<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>)) {
<a name="l1317"><span class="linenum">1317</span></a>                      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>,<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>),<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1318"><span class="linenum">1318</span></a>                  }
<a name="l1319"><span class="linenum">1319</span></a>              }
<a name="l1320"><span class="linenum">1320</span></a>          }
<a name="l1321"><span class="linenum">1321</span></a>  
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment">        // Finally we do our highlighting</span>
<a name="l1323"><span class="linenum">1323</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('filtermatchonepertext')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/filtermatchonepertext.html">filtermatchonepertext</a>) || !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('filtermatchoneperpage')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/filtermatchoneperpage.html">filtermatchoneperpage</a>)) {
<a name="l1324"><span class="linenum">1324</span></a>              <a class="var it36569" onMouseOver="hilite(36569)" onMouseOut="lolite()" onClick="logVariable('resulttext')" href="../_variables/resulttext.html">$resulttext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/('.<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>.')/'.<a class="var it25396" onMouseOver="hilite(25396)" onMouseOut="lolite()" onClick="logVariable('modifiers')" href="../_variables/modifiers.html">$modifiers</a>,
<a name="l1325"><span class="linenum">1325</span></a>                                        <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagbegin.html">work_hreftagbegin</a>.
<a name="l1326"><span class="linenum">1326</span></a>                                        <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_replacementphrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_replacementphrase.html">work_replacementphrase</a>.
<a name="l1327"><span class="linenum">1327</span></a>                                        <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagend')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagend.html">work_hreftagend</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, 1);
<a name="l1328"><span class="linenum">1328</span></a>          } else {
<a name="l1329"><span class="linenum">1329</span></a>              <a class="var it36569" onMouseOver="hilite(36569)" onMouseOut="lolite()" onClick="logVariable('resulttext')" href="../_variables/resulttext.html">$resulttext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/('.<a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>.')/'.<a class="var it25396" onMouseOver="hilite(25396)" onMouseOut="lolite()" onClick="logVariable('modifiers')" href="../_variables/modifiers.html">$modifiers</a>,
<a name="l1330"><span class="linenum">1330</span></a>                                        <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagbegin')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagbegin.html">work_hreftagbegin</a>.
<a name="l1331"><span class="linenum">1331</span></a>                                        <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_replacementphrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_replacementphrase.html">work_replacementphrase</a>.
<a name="l1332"><span class="linenum">1332</span></a>                                        <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_hreftagend')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_hreftagend.html">work_hreftagend</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1333"><span class="linenum">1333</span></a>          }
<a name="l1334"><span class="linenum">1334</span></a>  
<a name="l1335"><span class="linenum">1335</span></a>  
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">        // If the text has changed we have to look for links again</span>
<a name="l1337"><span class="linenum">1337</span></a>          if (<a class="var it36569" onMouseOver="hilite(36569)" onMouseOut="lolite()" onClick="logVariable('resulttext')" href="../_variables/resulttext.html">$resulttext</a> != <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">            // Set $text to $resulttext</span>
<a name="l1339"><span class="linenum">1339</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="var it36569" onMouseOver="hilite(36569)" onMouseOut="lolite()" onClick="logVariable('resulttext')" href="../_variables/resulttext.html">$resulttext</a>;
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">            // Remove everything enclosed by the ignore tags from $text</span>
<a name="l1341"><span class="linenum">1341</span></a>              <a class="function" onClick="logFunction('filter_save_ignore_tags')" href="../_functions/filter_save_ignore_tags.html" onMouseOver="funcPopup(event,'filter_save_ignore_tags')">filter_save_ignore_tags</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,<a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a>,<a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a>,<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>);
<a name="l1342"><span class="linenum">1342</span></a>  <span class="comment">            // Remove tags from $text</span>
<a name="l1343"><span class="linenum">1343</span></a>              <a class="function" onClick="logFunction('filter_save_tags')" href="../_functions/filter_save_tags.html" onMouseOver="funcPopup(event,'filter_save_tags')">filter_save_tags</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>);
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">            // If $CFG-&gt;filtermatchoneperpage, save linked phrases to request</span>
<a name="l1345"><span class="linenum">1345</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('filtermatchoneperpage')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/filtermatchoneperpage.html">filtermatchoneperpage</a>)) {
<a name="l1346"><span class="linenum">1346</span></a>                  <a class="var it36561" onMouseOver="hilite(36561)" onMouseOut="lolite()" onClick="logVariable('usedphrases')" href="../_variables/usedphrases.html">$usedphrases</a>[] = <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>-&gt;<a onClick="logVariable('work_phrase')" class="var it44255" onMouseOver="hilite(44255)" onMouseOut="lolite()" href="../_variables/work_phrase.html">work_phrase</a>;
<a name="l1347"><span class="linenum">1347</span></a>              }
<a name="l1348"><span class="linenum">1348</span></a>          }
<a name="l1349"><span class="linenum">1349</span></a>  
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">        // Replace the not full matches before cycling to next link object</span>
<a name="l1352"><span class="linenum">1352</span></a>          if (!empty(<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>)) {
<a name="l1353"><span class="linenum">1353</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>),<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>,<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1354"><span class="linenum">1354</span></a>              unset(<a class="var it36566" onMouseOver="hilite(36566)" onMouseOut="lolite()" onClick="logVariable('notfullmatches')" href="../_variables/notfullmatches.html">$notfullmatches</a>);
<a name="l1355"><span class="linenum">1355</span></a>          }
<a name="l1356"><span class="linenum">1356</span></a>      }
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">    // Rebuild the text with all the excluded areas</span>
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>      if (!empty(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>)) {
<a name="l1361"><span class="linenum">1361</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>), <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1362"><span class="linenum">1362</span></a>      }
<a name="l1363"><span class="linenum">1363</span></a>  
<a name="l1364"><span class="linenum">1364</span></a>      if (!empty(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>)) {
<a name="l1365"><span class="linenum">1365</span></a>          <a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>);     <span class="comment">// Reversed so &quot;progressive&quot; str_replace() will solve some nesting problems.</span>
<a name="l1366"><span class="linenum">1366</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>),<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>,<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1367"><span class="linenum">1367</span></a>      }
<a name="l1368"><span class="linenum">1368</span></a>  
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">    // Remove the protective doubleups</span>
<a name="l1370"><span class="linenum">1370</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> =  <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/([#*%])(\1)/','\1',<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1371"><span class="linenum">1371</span></a>  
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">    // Add missing javascript for popus</span>
<a name="l1373"><span class="linenum">1373</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('filter_add_javascript')" href="../_functions/filter_add_javascript.html" onMouseOver="funcPopup(event,'filter_add_javascript')">filter_add_javascript</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1374"><span class="linenum">1374</span></a>  
<a name="l1375"><span class="linenum">1375</span></a>  
<a name="l1376"><span class="linenum">1376</span></a>      return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1377"><span class="linenum">1377</span></a>  }
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">/**</span>
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment"> * @todo Document this function</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment"> * @param array $linkarray</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment"> * @return array</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment"> */</span>
<a name="l1384"><span class="linenum">1384</span></a>  function <a class="function" onClick="logFunction('filter_remove_duplicates')" href="../_functions/filter_remove_duplicates.html" onMouseOver="funcPopup(event,'filter_remove_duplicates')">filter_remove_duplicates</a>(<a class="var it28615" onMouseOver="hilite(28615)" onMouseOut="lolite()" onClick="logVariable('linkarray')" href="../_variables/linkarray.html">$linkarray</a>) {
<a name="l1385"><span class="linenum">1385</span></a>  
<a name="l1386"><span class="linenum">1386</span></a>      <a class="var it27209" onMouseOver="hilite(27209)" onMouseOut="lolite()" onClick="logVariable('concepts')" href="../_variables/concepts.html">$concepts</a>  = array(); <span class="comment">// keep a record of concepts as we cycle through</span>
<a name="l1387"><span class="linenum">1387</span></a>      <a class="var it36570" onMouseOver="hilite(36570)" onMouseOut="lolite()" onClick="logVariable('lconcepts')" href="../_variables/lconcepts.html">$lconcepts</a> = array(); <span class="comment">// a lower case version for case insensitive</span>
<a name="l1388"><span class="linenum">1388</span></a>  
<a name="l1389"><span class="linenum">1389</span></a>      <a class="var it36571" onMouseOver="hilite(36571)" onMouseOut="lolite()" onClick="logVariable('cleanlinks')" href="../_variables/cleanlinks.html">$cleanlinks</a> = array();
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>      foreach (<a class="var it28615" onMouseOver="hilite(28615)" onMouseOut="lolite()" onClick="logVariable('linkarray')" href="../_variables/linkarray.html">$linkarray</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>) {
<a name="l1392"><span class="linenum">1392</span></a>          if (<a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>-&gt;<a onClick="logVariable('casesensitive')" class="var it44256" onMouseOver="hilite(44256)" onMouseOut="lolite()" href="../_variables/casesensitive.html">casesensitive</a>) {
<a name="l1393"><span class="linenum">1393</span></a>              <a class="var it2527" onMouseOver="hilite(2527)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../_variables/exists.html">$exists</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44256" onMouseOver="hilite(44256)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>, <a class="var it27209" onMouseOver="hilite(27209)" onMouseOut="lolite()" onClick="logVariable('concepts')" href="../_variables/concepts.html">$concepts</a>);
<a name="l1394"><span class="linenum">1394</span></a>          } else {
<a name="l1395"><span class="linenum">1395</span></a>              <a class="var it2527" onMouseOver="hilite(2527)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../_variables/exists.html">$exists</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44256" onMouseOver="hilite(44256)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>), <a class="var it36570" onMouseOver="hilite(36570)" onMouseOut="lolite()" onClick="logVariable('lconcepts')" href="../_variables/lconcepts.html">$lconcepts</a>);
<a name="l1396"><span class="linenum">1396</span></a>          }
<a name="l1397"><span class="linenum">1397</span></a>  
<a name="l1398"><span class="linenum">1398</span></a>          if (!<a class="var it2527" onMouseOver="hilite(2527)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../_variables/exists.html">$exists</a>) {
<a name="l1399"><span class="linenum">1399</span></a>              <a class="var it36571" onMouseOver="hilite(36571)" onMouseOut="lolite()" onClick="logVariable('cleanlinks')" href="../_variables/cleanlinks.html">$cleanlinks</a>[] = <a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>;
<a name="l1400"><span class="linenum">1400</span></a>              <a class="var it27209" onMouseOver="hilite(27209)" onMouseOut="lolite()" onClick="logVariable('concepts')" href="../_variables/concepts.html">$concepts</a>[] = <a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44256" onMouseOver="hilite(44256)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>;
<a name="l1401"><span class="linenum">1401</span></a>              <a class="var it36570" onMouseOver="hilite(36570)" onMouseOut="lolite()" onClick="logVariable('lconcepts')" href="../_variables/lconcepts.html">$lconcepts</a>[] = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it36572" onMouseOver="hilite(36572)" onMouseOut="lolite()" onClick="logVariable('filterobject')" href="../_variables/filterobject.html">$filterobject</a>-&gt;<a onClick="logVariable('phrase')" class="var it44256" onMouseOver="hilite(44256)" onMouseOut="lolite()" href="../_variables/phrase.html">phrase</a>);
<a name="l1402"><span class="linenum">1402</span></a>          }
<a name="l1403"><span class="linenum">1403</span></a>      }
<a name="l1404"><span class="linenum">1404</span></a>  
<a name="l1405"><span class="linenum">1405</span></a>      return <a class="var it36571" onMouseOver="hilite(36571)" onMouseOut="lolite()" onClick="logVariable('cleanlinks')" href="../_variables/cleanlinks.html">$cleanlinks</a>;
<a name="l1406"><span class="linenum">1406</span></a>  }
<a name="l1407"><span class="linenum">1407</span></a>  
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">/**</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment"> * Extract open/lose tags and their contents to avoid being processed by filters.</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment"> * Useful to extract pieces of code like &lt;a&gt;...&lt;/a&gt; tags. It returns the text</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment"> * converted with some &lt;#xTEXTFILTER_EXCL_SEPARATORx#&gt; codes replacing the extracted text. Such extracted</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment"> * texts are returned in the ignoretags array (as values), with codes as keys.</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> *</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment"> * @param string $text                  the text that we are filtering (in/out)</span>
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment"> * @param array $filterignoretagsopen  an array of open tags to start searching</span>
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment"> * @param array $filterignoretagsclose an array of close tags to end searching</span>
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment"> * @param array $ignoretags            an array of saved strings useful to rebuild the original text (in/out)</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment"> **/</span>
<a name="l1419"><span class="linenum">1419</span></a>  function <a class="function" onClick="logFunction('filter_save_ignore_tags')" href="../_functions/filter_save_ignore_tags.html" onMouseOver="funcPopup(event,'filter_save_ignore_tags')">filter_save_ignore_tags</a>(&amp;<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a>, <a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a>, &amp;<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>) {
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">    // Remove everything enclosed by the ignore tags from $text</span>
<a name="l1422"><span class="linenum">1422</span></a>      foreach (<a class="var it35049" onMouseOver="hilite(35049)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsopen')" href="../_variables/filterignoretagsopen.html">$filterignoretagsopen</a> as <a class="var it36573" onMouseOver="hilite(36573)" onMouseOut="lolite()" onClick="logVariable('ikey')" href="../_variables/ikey.html">$ikey</a>=&gt;<a class="var it36574" onMouseOver="hilite(36574)" onMouseOut="lolite()" onClick="logVariable('opentag')" href="../_variables/opentag.html">$opentag</a>) {
<a name="l1423"><span class="linenum">1423</span></a>          <a class="var it36575" onMouseOver="hilite(36575)" onMouseOut="lolite()" onClick="logVariable('closetag')" href="../_variables/closetag.html">$closetag</a> = <a class="var it35050" onMouseOver="hilite(35050)" onMouseOut="lolite()" onClick="logVariable('filterignoretagsclose')" href="../_variables/filterignoretagsclose.html">$filterignoretagsclose</a>[<a class="var it36573" onMouseOver="hilite(36573)" onMouseOut="lolite()" onClick="logVariable('ikey')" href="../_variables/ikey.html">$ikey</a>];
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">        // form regular expression</span>
<a name="l1425"><span class="linenum">1425</span></a>          <a class="var it36574" onMouseOver="hilite(36574)" onMouseOut="lolite()" onClick="logVariable('opentag')" href="../_variables/opentag.html">$opentag</a>  = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('/','\/',<a class="var it36574" onMouseOver="hilite(36574)" onMouseOut="lolite()" onClick="logVariable('opentag')" href="../_variables/opentag.html">$opentag</a>); <span class="comment">// delimit forward slashes</span>
<a name="l1426"><span class="linenum">1426</span></a>          <a class="var it36575" onMouseOver="hilite(36575)" onMouseOut="lolite()" onClick="logVariable('closetag')" href="../_variables/closetag.html">$closetag</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('/','\/',<a class="var it36575" onMouseOver="hilite(36575)" onMouseOut="lolite()" onClick="logVariable('closetag')" href="../_variables/closetag.html">$closetag</a>); <span class="comment">// delimit forward slashes</span>
<a name="l1427"><span class="linenum">1427</span></a>          <a class="var it36576" onMouseOver="hilite(36576)" onMouseOut="lolite()" onClick="logVariable('pregexp')" href="../_variables/pregexp.html">$pregexp</a> = '/'.<a class="var it36574" onMouseOver="hilite(36574)" onMouseOut="lolite()" onClick="logVariable('opentag')" href="../_variables/opentag.html">$opentag</a>.'(.*?)'.<a class="var it36575" onMouseOver="hilite(36575)" onMouseOut="lolite()" onClick="logVariable('closetag')" href="../_variables/closetag.html">$closetag</a>.'/is';
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>          <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>(<a class="var it36576" onMouseOver="hilite(36576)" onMouseOut="lolite()" onClick="logVariable('pregexp')" href="../_variables/pregexp.html">$pregexp</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it36577" onMouseOver="hilite(36577)" onMouseOut="lolite()" onClick="logVariable('list_of_ignores')" href="../_variables/list_of_ignores.html">$list_of_ignores</a>);
<a name="l1430"><span class="linenum">1430</span></a>          foreach (<a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it36577" onMouseOver="hilite(36577)" onMouseOut="lolite()" onClick="logVariable('list_of_ignores')" href="../_variables/list_of_ignores.html">$list_of_ignores</a>[0]) as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1431"><span class="linenum">1431</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a> = (string)(<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>) + 1);
<a name="l1432"><span class="linenum">1432</span></a>              <a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>['&lt;#'.<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a>.<a class="constant" onClick="logConstant('TEXTFILTER_EXCL_SEPARATOR')" href="../_constants/TEXTFILTER_EXCL_SEPARATOR.html" onMouseOver="constPopup(event,'TEXTFILTER_EXCL_SEPARATOR')">TEXTFILTER_EXCL_SEPARATOR</a>.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>.'#&gt;'] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1433"><span class="linenum">1433</span></a>          }
<a name="l1434"><span class="linenum">1434</span></a>          if (!empty(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>)) {
<a name="l1435"><span class="linenum">1435</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>,<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it35051" onMouseOver="hilite(35051)" onMouseOut="lolite()" onClick="logVariable('ignoretags')" href="../_variables/ignoretags.html">$ignoretags</a>),<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1436"><span class="linenum">1436</span></a>          }
<a name="l1437"><span class="linenum">1437</span></a>      }
<a name="l1438"><span class="linenum">1438</span></a>  }
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">/**</span>
<a name="l1441"><span class="linenum">1441</span></a>  <span class="comment"> * Extract tags (any text enclosed by &lt; and &gt; to avoid being processed by filters.</span>
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment"> * It returns the text converted with some &lt;%xTEXTFILTER_EXCL_SEPARATORx%&gt; codes replacing the extracted text. Such extracted</span>
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment"> * texts are returned in the tags array (as values), with codes as keys.</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment"> *</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment"> * @param string $text   the text that we are filtering (in/out)</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> * @param array $tags   an array of saved strings useful to rebuild the original text (in/out)</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment"> **/</span>
<a name="l1448"><span class="linenum">1448</span></a>  function <a class="function" onClick="logFunction('filter_save_tags')" href="../_functions/filter_save_tags.html" onMouseOver="funcPopup(event,'filter_save_tags')">filter_save_tags</a>(&amp;<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, &amp;<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>) {
<a name="l1449"><span class="linenum">1449</span></a>  
<a name="l1450"><span class="linenum">1450</span></a>      <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>('/&lt;([^#%*].*?)&gt;/is',<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,<a class="var it36578" onMouseOver="hilite(36578)" onMouseOut="lolite()" onClick="logVariable('list_of_newtags')" href="../_variables/list_of_newtags.html">$list_of_newtags</a>);
<a name="l1451"><span class="linenum">1451</span></a>      foreach (<a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it36578" onMouseOver="hilite(36578)" onMouseOut="lolite()" onClick="logVariable('list_of_newtags')" href="../_variables/list_of_newtags.html">$list_of_newtags</a>[0]) as <a class="var it11154" onMouseOver="hilite(11154)" onMouseOut="lolite()" onClick="logVariable('ntkey')" href="../_variables/ntkey.html">$ntkey</a>=&gt;<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1452"><span class="linenum">1452</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a> = (string)(<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>) + 1);
<a name="l1453"><span class="linenum">1453</span></a>          <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>['&lt;%'.<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a>.<a class="constant" onClick="logConstant('TEXTFILTER_EXCL_SEPARATOR')" href="../_constants/TEXTFILTER_EXCL_SEPARATOR.html" onMouseOver="constPopup(event,'TEXTFILTER_EXCL_SEPARATOR')">TEXTFILTER_EXCL_SEPARATOR</a>.<a class="var it11154" onMouseOver="hilite(11154)" onMouseOut="lolite()" onClick="logVariable('ntkey')" href="../_variables/ntkey.html">$ntkey</a>.'%&gt;'] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1454"><span class="linenum">1454</span></a>      }
<a name="l1455"><span class="linenum">1455</span></a>      if (!empty(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>)) {
<a name="l1456"><span class="linenum">1456</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>,<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>),<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1457"><span class="linenum">1457</span></a>      }
<a name="l1458"><span class="linenum">1458</span></a>  }
<a name="l1459"><span class="linenum">1459</span></a>  
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment">/**</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment"> * Add missing openpopup javascript to HTML files.</span>
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment"> *</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment"> * @param string $text</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment"> * @return string</span>
<a name="l1465"><span class="linenum">1465</span></a>  <span class="comment"> */</span>
<a name="l1466"><span class="linenum">1466</span></a>  function <a class="function" onClick="logFunction('filter_add_javascript')" href="../_functions/filter_add_javascript.html" onMouseOver="funcPopup(event,'filter_add_javascript')">filter_add_javascript</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1467"><span class="linenum">1467</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>      if (<a class="phpfunction" onClick="logFunction('stripos')" href="../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '&lt;/html&gt;') === FALSE) {
<a name="l1470"><span class="linenum">1470</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>; <span class="comment">// This is not a html file.</span>
<a name="l1471"><span class="linenum">1471</span></a>      }
<a name="l1472"><span class="linenum">1472</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, 'onclick=&quot;return openpopup') === FALSE) {
<a name="l1473"><span class="linenum">1473</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>; <span class="comment">// No popup - no need to add javascript.</span>
<a name="l1474"><span class="linenum">1474</span></a>      }
<a name="l1475"><span class="linenum">1475</span></a>      <a class="var it4932" onMouseOver="hilite(4932)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a> =&quot;
<a name="l1476"><span class="linenum">1476</span></a>      &lt;script type=\&quot;text/javascript\&quot;&gt;
<a name="l1477"><span class="linenum">1477</span></a>      &lt;!--
<a name="l1478"><span class="linenum">1478</span></a>          function <a class="function" onClick="logFunction('openpopup')" href="../_functions/openpopup.html" onMouseOver="funcPopup(event,'openpopup')">openpopup</a>(url,name,options,fullscreen) {
<a name="l1479"><span class="linenum">1479</span></a>            fullurl = \&quot;&quot;.<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>.&quot;\&quot; + url;
<a name="l1480"><span class="linenum">1480</span></a>            windowobj = window.<a class="function" onClick="logFunction('open')" href="../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>(fullurl,name,options);
<a name="l1481"><span class="linenum">1481</span></a>            if (fullscreen) {
<a name="l1482"><span class="linenum">1482</span></a>              windowobj.moveTo(0,0);
<a name="l1483"><span class="linenum">1483</span></a>              windowobj.resizeTo(screen.availWidth,screen.availHeight);
<a name="l1484"><span class="linenum">1484</span></a>            }
<a name="l1485"><span class="linenum">1485</span></a>            windowobj.<a class="function" onClick="logFunction('focus')" href="../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l1486"><span class="linenum">1486</span></a>            return false;
<a name="l1487"><span class="linenum">1487</span></a>          }
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment">    // --&gt;</span>
<a name="l1489"><span class="linenum">1489</span></a>      &lt;/script&gt;&quot;;
<a name="l1490"><span class="linenum">1490</span></a>      if (<a class="phpfunction" onClick="logFunction('stripos')" href="../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '&lt;/head&gt;') !== FALSE) {
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">        // Try to add it into the head element.</span>
<a name="l1492"><span class="linenum">1492</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>('&lt;/head&gt;', <a class="var it4932" onMouseOver="hilite(4932)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a>.'&lt;/head&gt;', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1493"><span class="linenum">1493</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1494"><span class="linenum">1494</span></a>      }
<a name="l1495"><span class="linenum">1495</span></a>  
<a name="l1496"><span class="linenum">1496</span></a>  <span class="comment">    // Last chance - try adding head element.</span>
<a name="l1497"><span class="linenum">1497</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/&lt;html.*?&gt;/is&quot;, &quot;\\0&lt;head&gt;&quot;.<a class="var it4932" onMouseOver="hilite(4932)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a>.'&lt;/head&gt;', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1498"><span class="linenum">1498</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'select': ['select', '', [['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845],['lib','outputcomponents.php',1265]], 591],
'filter_get_available_in_context': ['filter_get_available_in_context', 'List all of the filters that are available in this context, and what the local and inherited states of that filter are. ', [['lib','filterlib.php',1050]], 10],
'filter_get_active_in_context': ['filter_get_active_in_context', 'Get the list of active filters, in the order that they should be used for a particular context, along with any local configuration variables. ', [['lib','filterlib.php',864]], 15],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'filter_set_local_state': ['filter_set_local_state', 'Set the local activated state for a text filter. ', [['lib','filterlib.php',745]], 22],
'get_course_id': ['get_course_id', 'Can be used by the items to get the course id for which feedback is taken ', [['mod/feedback/classes','complete_form.php',205],['course/tests/behat','behat_course.php',1172],['lib','modinfolib.php',195],['lib','modinfolib.php',1440],['mod/assign','gradingtable.php',1363],['lib/tests/behat','behat_data_generators.php',659],['backup/util/ui','restore_ui_stage.class.php',555]], 10],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_install.php',64],['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50]], 85],
'filter_get_global_states': ['filter_get_global_states', 'This function is for use by the filter administration page. ', [['lib','filterlib.php',1092]], 5],
'filter_phrases': ['filter_phrases', 'Process phrases intelligently found within a HTML text (such as adding links). ', [['lib','filterlib.php',1167]], 5],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'filter_remove_duplicates': ['filter_remove_duplicates', '', [['lib','filterlib.php',1384]], 1],
'filter_add_javascript': ['filter_add_javascript', 'Add missing openpopup javascript to HTML files. ', [['lib','filterlib.php',1460]], 1],
'filter': ['filter', 'Template method for removing certain tokens based on arbitrary criteria. ', [['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Nmtokens.php',55],['lib/htmlpurifier/HTMLPurifier/URIFilter','HostBlacklist.php',35],['filter/emoticon','filter.php',35],['filter/multilang','filter.php',43],['filter/algebra','filter.php',92],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableExternal.php',33],['lib/horde/framework/Horde/Stream/Filter','Null.php',56],['lib/horde/framework/Horde','Variables.php',315],['lib/horde/framework/Horde/Stream/Filter','Crc32.php',41],['filter/emailprotect','filter.php',34],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Class.php',31],['repository','lib.php',2099],['grade/report/singleview/classes/local/screen','filterable_items.php',38],['lib/horde/framework/Horde/Stream/Filter','Bin2hex.php',25],['filter/activitynames','filter.php',39],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableExternalResources.php',16],['filter/glossary','filter.php',53],['lib/horde/framework/Horde/Imap/Client/Data/Format/Filter','Quote.php',28],['lib/horde/framework/Horde/Imap/Client/Data/Format/Filter','String.php',42],['filter/tex','filter.php',115],['filter/tidy','filter.php',41],['lib/htmlpurifier/HTMLPurifier/URIFilter','SafeIframe.php',45],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableResources.php',16],['filter/censor','filter.php',55],['filter/data','filter.php',34],['filter/mathjaxloader','filter.php',133],['lib/horde/framework/Horde/Stream/Filter','Eol.php',85],['filter/urltolink','filter.php',39],['lib/phpexcel/PHPExcel/Calculation','Database.php',70],['filter/mediaplugin','filter.php',50],['grade/report/singleview/classes/local/screen','grade.php',65],['lib/htmlpurifier/HTMLPurifier/URIFilter','Munge.php',62],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',92],['lib/htmlpurifier/HTMLPurifier/URIFilter','MakeAbsolute.php',52],['lib/horde/framework/Horde/Stream/Filter','Htmlspecialchars.php',30]], 280],
'filter_delete_all_for_filter': ['filter_delete_all_for_filter', 'Delete all the data in the database relating to a filter, prior to deleting it. ', [['lib','filterlib.php',1103]], 1],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'filter_get_name': ['filter_get_name', 'Look up the name of this filter ', [['lib','filterlib.php',483]], 5],
'reset_caches': ['reset_caches', 'This implementation does not use any caches. ', [['lib/classes','string_manager_install.php',245],['lib/classes','plugin_manager.php',115],['lib/classes/update','checker.php',74],['backup/moodle2','restore_stepslib.php',1538],['tag/classes','index_builder.php',367],['repository','lib.php',2636],['lib/dml','moodle_database.php',1052],['lib/classes','filetypes.php',419],['lib','accesslib.php',5149],['lib','accesslib.php',6045],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','string_manager_standard.php',599],['lib/classes','string_manager.php',127],['lib','filterlib.php',97],['lib/classes','text.php',108],['lib/classes','user.php',486]], 111],
'make_filter_object': ['make_filter_object', 'Factory method for creating a filter. ', [['lib','filterlib.php',137],['lib','filterlib.php',327]], 2],
'focus': ['focus', 'To autofocus on first form element or first element with error. ', [['lib','formslib.php',239]], 962],
'filter_has_local_settings': ['filter_has_local_settings', 'Does this filter have local (per-context) settings? ', [['lib','filterlib.php',1144]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'filter_unset_local_config': ['filter_unset_local_config', 'Remove a particular local config variable for a filter in a context. ', [['lib','filterlib.php',819]], 1],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'filter_set_applies_to_strings': ['filter_set_applies_to_strings', 'Sets whether a particular active filter should be applied to all strings by format_string, or just used by format_text. ', [['lib','filterlib.php',713]], 10],
'filter_string': ['filter_string', 'Filter a piece of string ', [['lib','filterlib.php',224],['lib','filterlib.php',291],['lib','filterlib.php',338]], 2],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'setup_page_for_filters': ['setup_page_for_filters', 'Setup page with filters requirements and other prepare stuff. ', [['lib','filterlib.php',253]], 3],
'add_to_config_log': ['add_to_config_log', 'Log config changes if necessary. ', [['lib','adminlib.php',1792],['lib','adminlib.php',2352],['lib','datalib.php',1555]], 6],
'asort_objects_by_property': ['asort_objects_by_property', 'Locale aware sort of objects by a property in common to all objects ', [['lib/classes','collator.php',249]], 37],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'filter_get_all_local_settings': ['filter_get_all_local_settings', 'This function is for use by backup. Gets all the filter information specific to one context. ', [['lib','filterlib.php',846]], 1],
'get_records_menu': ['get_records_menu', 'Get the first two columns from a number of records as an associative array where all the given conditions met. ', [['lib/dml','moodle_database.php',1375]], 75],
'filter_preload_activities': ['filter_preload_activities', 'Preloads the list of active filters for all activities (modules) on the course using two database queries. ', [['lib','filterlib.php',922]], 3],
'filter_get_string_filters': ['filter_get_string_filters', 'Return the names of the filters that should also be applied to strings (when they are enabled). ', [['lib','filterlib.php',697]], 3],
'open': ['open', 'Open or create archive (depending on $mode). ', [['lib/filestorage','zip_archive.php',73],['auth/fc','fcFPP.php',48],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/searchreplace','editor_plugin_src.js',14],['lib/spout/src/Spout/Reader','ReaderInterface.php',12],['auth/cas/CAS/CAS/ProxiedService','Imap.php',179],['lib/tcpdf','tcpdf.php',2931],['lib/google/src/Google/Logger','File.php',96],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',56],['lib/spout/src/Spout/Reader/Wrapper','XMLReader.php',17],['lib/spout/src/Spout/Reader','AbstractReader.php',61],['lib/pear/Net','GeoIP.php',400],['lib/pear/Auth','RADIUS.php',271],['lib/pear/Auth','RADIUS.php',593],['lib/pear/Auth','RADIUS.php',898],['lib','webdavlib.php',156]], 261],
'load_filters': ['load_filters', 'Load all the filters required by this context. ', [['lib','filterlib.php',116]], 2],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'get_text_filters': ['get_text_filters', 'Get all the filters that apply to a given context for calls to format_text. ', [['lib','filterlib.php',181]], 3],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'get_cms': ['get_cms', '', [['lib','modinfolib.php',218]], 32],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'filter_text': ['filter_text', '', [['lib','deprecatedlib.php',499],['lib','filterlib.php',207],['lib','filterlib.php',286],['lib','filterlib.php',332],['lib/tests','filter_manager_test.php',37]], 12],
'unload_all_filters': ['unload_all_filters', 'Unloads all filters and other cached information ', [['lib','filterlib.php',107],['lib','filterlib.php',320]], 2],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'filter_set_global_state': ['filter_set_global_state', 'Set the global activated state for a text filter. ', [['lib','filterlib.php',524]], 76],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'filter_set_local_config': ['filter_set_local_config', 'Set a particular local config variable for a filter in a context. ', [['lib','filterlib.php',790]], 27],
'get_performance_summary': ['get_performance_summary', 'Returns information about the core_string_manager performance. ', [['lib/classes','string_manager_standard.php',397],['lib','filterlib.php',343]], 2],
'filter_get_globally_enabled': ['filter_get_globally_enabled', 'Return a list of all the filters that may be in use somewhere. ', [['lib','filterlib.php',677]], 2],
'filter_context_may_have_filter_settings': ['filter_context_may_have_filter_settings', 'Certain types of context (block and user) may not have local filter settings. the function checks a context to see whether it may have local config. ', [['lib','filterlib.php',1156]], 0],
'filter_is_enabled': ['filter_is_enabled', '', [['lib','filterlib.php',667]], 9],
'text_filtering_hash': ['text_filtering_hash', '', [['lib','filterlib.php',241],['lib','filterlib.php',295]], 2],
'filter_get_local_config': ['filter_get_local_config', 'Get local config variables for a filter in a context. Normally (when your filter is running) you don\'t need to call this, becuase the config is fetched for you automatically. You only need this, for example, when you are getting the config so you can show the user an editing from. ', [['lib','filterlib.php',831]], 2],
'script': ['script', '', [['lib/minify/lib','JSMinPlus.php',745],['lib','outputcomponents.php',1476]], 85],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'filter_delete_all_for_context': ['filter_delete_all_for_context', 'Delete all the data in the database relating to a context, used when contexts are deleted. ', [['lib','filterlib.php',1116]], 3],
'filter_has_global_settings': ['filter_has_global_settings', 'Does this filter have a global settings page in the admin tree? (The settings page for a filter must be called, for example, filtersettingfiltertex.) ', [['lib','filterlib.php',1127]], 1],
'allow_commit': ['allow_commit', 'Commit delegated transaction. The real database commit SQL is executed only after committing all delegated transactions. ', [['lib/dml','moodle_transaction.php',78]], 135],
'apply_filter_chain': ['apply_filter_chain', 'Apply a list of filters to some content. ', [['lib','filterlib.php',162]], 2],
'filter_save_ignore_tags': ['filter_save_ignore_tags', 'Extract open/lose tags and their contents to avoid being processed by filters. Useful to extract pieces of code like <a>...</a> tags. It returns the text converted with some <#xTEXTFILTER_EXCL_SEPARATORx#> codes replacing the extracted text. Such extracted texts are returned in the ignoretags array (as values), with codes as keys. ', [['lib','filterlib.php',1408]], 3],
'start_delegated_transaction': ['start_delegated_transaction', 'On DBs that support it, switch to transaction mode and begin a transaction you\'ll need to ensure you call allow_commit() on the returned object or your changes *will* be lost. ', [['lib/dml','moodle_database.php',2393]], 145],
'openpopup': ['openpopup', '', [['lib','javascript-static.js',1170],['lib','filterlib.php',1478],['mod/chat','chatd.php',264]], 8],
'filter_get_all_installed': ['filter_get_all_installed', 'Get the names of all the filters installed in this Moodle. ', [['lib','filterlib.php',504]], 2],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'hash': ['hash', 'Expose the hash function for testing, probing, and extension. ', [['lib/horde/framework/Horde/Support','ConsistentHash.php',218],['mod/assign/feedback/editpdf/classes','document_services.php',100],['filter/censor','filter.php',47],['lib','filterlib.php',393],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',288]], 195],
'a': ['a', '', [['lib/flowplayer','flowplayer-3.2.13.js',857]], 1186],
'unset_all_config_for_plugin': ['unset_all_config_for_plugin', 'Remove all the config variables for a given plugin. ', [['lib','moodlelib.php',1528]], 8],
'textarea': ['textarea', '', [['question/type/essay','renderer.php',442]], 8],
'setup': ['setup', '', [['lib/htmlpurifier/HTMLPurifier/HTMLModule','Target.php',16],['search/tests/generator','lib.php',37],['mod/quiz/tests','repaginate_test.php',71],['lib/tests','statslib_test.php',51],['comment/tests','externallib_test.php',44],['lib/htmlpurifier/HTMLPurifier/HTMLModule','SafeEmbed.php',16],['mod/feedback/tests','events_test.php',59],['search/tests','engine_test.php',40],['question/behaviour/adaptive/tests','mark_display_test.php',47],['mod/wiki/tests','search_test.php',46],['mnet/tests','events_test.php',37],['blocks/comments/tests','events_test.php',43],['mod/workshop/eval/best/tests','lib_test.php',43],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Proprietary.php',17],['message/tests','events_test.php',30],['lib/grade/tests/fixtures','lib.php',52],['mod/glossary/tests','search_test.php',47],['question/behaviour/deferredcbm/tests','behaviourtype_test.php',46],['lib/ddl/tests','ddl_test.php',32],['mod/assign/feedback/editpdf/tests','editpdf_test.php',46],['question/type/gapselect/tests','questiontype_test.php',43],['rating/tests','rating_test.php',42],['webservice/xmlrpc/tests','locallib_test.php',41],['calendar/tests','externallib_test.php',43],['mod/book/tool/importhtml/tests','locallib_test.php',41],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Iframe.php',26],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',61],['question/type/ddimageortext/tests','questiontype_test.php',43],['availability/tests','tree_test.php',38],['mod/choice/tests','events_test.php',50],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Object.php',23],['webservice/tests','events_test.php',38],['mod/lesson/tests','events_test.php',40],['backup/util/plan/tests','step_test.php',39],['mod/book/tool/exportimscp/tests','events_test.php',39],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',71],['question/behaviour/informationitem/tests','behaviourtype_test.php',45],['report/usersessions/tests','lib_test.php',55],['lib/form/tests','dateselector_test.php',50],['admin/tool/recyclebin/tests','events_test.php',38],['lib/tests','blocklib_test.php',42],['course/tests','externallib_test.php',42],['search/tests','document_test.php',46],['report/loglive/tests','events_test.php',38],['question/engine/tests','questionattempt_test.php',50],['report/log/tests','lib_test.php',53],['competency/tests','exporter_test.php',42],['lib/phpunit/classes','database_driver_testcase.php',104],['admin/tool/langimport/tests','events_test.php',36],['question/engine/tests','questionattemptstepiterator_test.php',44],['enrol/tests','role_external_test.php',35],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',227],['webservice/xmlrpc/tests','xmlrpc_server_test.php',41],['lib/htmlpurifier/HTMLPurifier/HTMLModule','SafeScripting.php',17],['lib/tests','rsslib_test.php',43],['lib/tests','gdlib_test.php',41],['question/type/ddwtos/tests','questiontype_test.php',43],['availability/condition/date/tests','condition_test.php',38],['question/type/essay/tests','questiontype_test.php',42],['lib/tests','collator_test.php',48],['admin/tool/monitor/tests','generator_test.php',39],['question/type/calculatedsimple/tests','questiontype_test.php',51],['backup/util/plan/tests','task_test.php',39],['admin/tool/lp/tests','externallib_test.php',75],['course/tests','search_test.php',46],['lib/tests','csvclass_test.php',39],['lib/phpunit/tests','basic_test.php',40],['lib/tests','externallib_test.php',35],['webservice/tests','lib_test.php',40],['mod/assign/submission/file/tests','locallib_test.php',53],['mod/assign/submission/onlinetext/tests','events_test.php',53],['question/engine/tests','questionattempt_with_steps_test.php',47],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Name.php',13],['search/engine/solr/tests','engine_test.php',71],['message/tests','inbound_test.php',36],['lib/tests','eventslib_test.php',34],['admin/tool/capability/tests','events_test.php',36],['backup/util/dbops/tests','backup_dbops_test.php',40],['lib/tests','questionlib_test.php',45],['cache/tests','config_writer_test.php',44],['lib/tests','coursecatlib_test.php',38],['calendar/tests','lib_test.php',38],['lib/htmlpurifier','locallib.php',178],['backup/util/structure/tests','structure_test.php',56],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',273],['question/type/match/tests','questiontype_test.php',45],['message/tests','externallib_test.php',35],['mod/workshop/form/numerrors/tests','lib_test.php',43],['webservice/xmlrpc/tests','lib_test.php',41],['badges/tests','badgeslib_test.php',41],['report/questioninstances/tests','events_test.php',36],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',23],['question/type/truefalse/tests','questiontype_test.php',44],['admin/tool/monitor/tests','events_test.php',33],['lib/tests','moodle_page_test.php',40],['mod/folder/tests','events_test.php',30],['competency/tests','persistent_test.php',37],['mod/lti/tests','externallib_test.php',45],['blocks/online_users/tests','online_users_test.php',44],['lib/htmlpurifier/HTMLPurifier/HTMLModule','TargetBlank.php',17],['question/engine/tests','questionattemptiterator_test.php',45],['mod/scorm/tests','events_test.php',50],['message/output/airnotifier/tests','externallib_test.php',42],['mod/scorm/tests','lib_test.php',45],['question/behaviour/immediatecbm/tests','behaviourtype_test.php',45],['admin/tool/monitor/tests','task_check_subscriptions_test.php',36],['lib','tablelib.php',437],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Tables.php',16],['lib/htmlpurifier/HTMLPurifier/HTMLModule','StyleAttribute.php',27],['lib/htmlpurifier/HTMLPurifier/HTMLModule','List.php',30],['mod/folder/tests','search_test.php',46],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Presentation.php',24],['calendar/tests','calendartype_test.php',59],['notes/tests','lib_test.php',53],['admin/tool/cohortroles/tests','api_test.php',49],['question/behaviour/missing/tests','behaviourtype_test.php',45],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Edit.php',18],['report/stats/tests','events_test.php',38],['user/tests','search_test.php',44],['mod/workshop/form/rubric/tests','lib_test.php',42],['mod/assign/submission/file/tests','events_test.php',59],['mod/quiz/tests','external_test.php',77],['admin/tool/recyclebin/tests','course_bin_test.php',46],['question/behaviour/interactive/tests','behaviourtype_test.php',45],['competency/tests','external_test.php',96],['lib/antivirus/clamav/tests','scanner_test.php',31],['question/behaviour/manualgraded/tests','behaviourtype_test.php',45],['report/stats/tests','lib_test.php',51],['calendar/tests','events_test.php',48],['mod/forum/tests','events_test.php',38],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Text.php',32],['tag/tests','taglib_test.php',32],['filter/algebra/tests','filter_test.php',47],['question/type/random/tests','questiontype_test.php',42],['question/type/multianswer/tests','questiontype_test.php',46],['lib/tests','myprofilelib_test.php',54],['mod/workshop/allocation/random/tests','allocator_test.php',42],['lib/tests','notification_test.php',39],['mod/resource/tests','search_test.php',46],['mod/book/tool/print/tests','events_test.php',39],['auth/manual/tests','manual_test.php',47],['mod/survey/tests','events_test.php',36],['mod/forum/tests','lib_test.php',33],['question/behaviour/interactivecountback/tests','behaviourtype_test.php',45],['enrol/imsenterprise/tests','imsenterprise_test.php',47],['badges/tests','external_test.php',45],['mod/forum/tests','mail_test.php',34],['question/type/numerical/tests','questiontype_test.php',50],['admin/tool/monitor/tests','task_clean_events_test.php',35],['enrol/lti/tests','helper_test.php',46],['lib/tests','medialib_test.php',39],['webservice/tests','externallib_test.php',33],['lib/htmlpurifier/HTMLPurifier','Definition.php',41],['filter/glossary','filter.php',43],['mod/book/tests','search_test.php',46],['admin/tool/monitor/tests','subscription_test.php',34],['lib/tests','lock_test.php',39],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Bdo.php',25],['lib/form/tests','duration_test.php',47],['question/behaviour/adaptive/tests','behaviourtype_test.php',45],['question/type/numerical/tests','form_test.php',65],['lib/form/tests','datetimeselector_test.php',50],['question/tests','events_test.php',34],['calendar/tests','ical_test.php',40],['backup/util/checks/tests','checks_test.php',42],['backup/util/plan/tests','plan_test.php',39],['mod/survey/tests','externallib_test.php',45],['availability/condition/grouping/tests','condition_test.php',37],['search/engine/solr/classes','schema.php',104],['mod/book/tests','events_test.php',39],['mod/assign/tests','search_test.php',47],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Legacy.php',29],['lib/tests','event_user_graded_test.php',44],['availability/condition/completion/tests','condition_test.php',40],['mod/wiki/tests','externallib_test.php',45],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Scripting.php',41],['mod/assign','gradingtable.php',1425],['question/engine/tests','helpers.php',704],['question/behaviour/immediatefeedback/tests','behaviourtype_test.php',45],['question/engine/tests','unitofwork_test.php',50],['admin/tool/monitor/tests','eventobservers_test.php',38],['cache/tests','cache_test.php',44],['question/behaviour/deferredfeedback/tests','behaviourtype_test.php',45],['report/log/tests','events_test.php',38],['lib/tests','unoconv_test.php',42],['filter/mathjaxloader','filter.php',97],['lib/markdown','Markdown.php',132],['mod/wiki/tests','events_test.php',44],['lib/dml/tests','recordset_walk_test.php',38],['mod/forum/tests','search_test.php',48],['calendar/tests','rrule_manager_tests.php',30],['lib/tests','filterlib_test.php',45],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Image.php',19],['mod/feedback/tests','upgradelib_test.php',54],['mod/scorm/tests','externallib_test.php',45],['question/type/shortanswer/tests','questiontype_test.php',48],['lib/filestorage/tests','zip_packer_test.php',40],['report/completion/tests','events_test.php',38],['availability/condition/profile/tests','condition_test.php',48],['question/tests','externallib_test.php',45],['mod/forum/tests','generator_test.php',39],['mod/data/tests','search_test.php',93],['message/tests','messagelib_test.php',44],['search/tests','manager_test.php',44],['lib/htmlpurifier/HTMLPurifier/HTMLModule','SafeObject.php',19],['notes/tests','events_test.php',44],['blog/tests','lib_test.php',42],['question/type/description/tests','questiontype_test.php',44],['backup/controller/tests','controller_test.php',41],['mod/glossary/tests','events_test.php',38],['lib','filterlib.php',400],['lib/tests','events_test.php',32],['mod/forum/tests','maildigest_test.php',41],['grade/report/user/tests','lib_test.php',54],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Hypertext.php',17],['lib/tests','ajaxlib_test.php',32],['question/type/multichoice/tests','questiontype_test.php',43],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Nofollow.php',18],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Forms.php',29],['filter/tex/tests','filter_test.php',43],['admin/tool/monitor/tests','rule_manager_test.php',37],['backup/converter/moodle1/tests','moodle1_converter_test.php',41],['mod/assign/tests','base_test.php',85],['mod/resource/tests','events_test.php',36],['question/type/calculated/tests','questiontype_test.php',48],['mod/workshop/tests','locallib_test.php',42],['lib/tests','customcontext_test.php',103],['availability/condition/group/tests','condition_test.php',37],['mod/forum/tests','subscriptions_test.php',32],['cache/tests','administration_helper_test.php',45],['my/tests','events_test.php',40],['mod/assign/tests','lib_test.php',42],['availability/tests','info_test.php',39],['tag/tests','events_test.php',36],['admin/tool/recyclebin/tests','category_bin_test.php',46],['lib/editor/atto/plugins/equation/tests','upgradelib_testcase.php',44],['lib/dml/tests','dml_test.php',30],['question/type/ddmarker/tests','questiontype_test.php',44],['backup/util/factories/tests','factories_test.php',43],['mod/data/tests','events_test.php',32],['mod/workshop/form/accumulative/tests','lib_test.php',41],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Tidy.php',36],['report/outline/tests','lib_test.php',53],['lib/htmlpurifier/HTMLPurifier/HTMLModule','Ruby.php',18],['mod/assign/submission/onlinetext/tests','locallib_test.php',53],['admin/tool/lpmigrate/tests','processor_test.php',42],['mod/forum/tests','externallib_test.php',34],['lib/tests','user_test.php',34],['mod/workshop/tests','events_test.php',49],['lib/markdown','MarkdownExtra.php',99],['mod/assign/tests','externallib_test.php',33],['question/engine/upgrade/tests','helper.php',100],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',14]], 153],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'filter_save_tags': ['filter_save_tags', 'Extract tags (any text enclosed by < and > to avoid being processed by filters. It returns the text converted with some <%xTEXTFILTER_EXCL_SEPARATORx%> codes replacing the extracted text. Such extracted texts are returned in the tags array (as values), with codes as keys. ', [['lib','filterlib.php',1440]], 3],
'get_string_filters': ['get_string_filters', 'Get all the filters that apply to a given context for calls to format_string. ', [['lib','filterlib.php',194]], 1],
'strip_tags': ['strip_tags', '', [], 150],
'strval': ['strval', '', [], 151],
'is_null': ['is_null', '', [], 2003],
'array_search': ['array_search', '', [], 170],
'is_readable': ['is_readable', '', [], 196],
'min': ['min', '', [], 898],
'array_reverse': ['array_reverse', '', [], 130],
'asort': ['asort', '', [], 114],
'stripos': ['stripos', '', [], 88],
'preg_match_all': ['preg_match_all', '', [], 161],
'array_combine': ['array_combine', '', [], 135],
'implode': ['implode', '', [], 1281],
'is_array': ['is_array', '', [], 1608],
'defined': ['defined', '', [], 4731],
'strpos': ['strpos', '', [], 1604],
'array_pop': ['array_pop', '', [], 483],
'count': ['count', '', [], 4095],
'define': ['define', '', [], 2373],
'class_exists': ['class_exists', '', [], 279],
'trim': ['trim', '', [], 1948],
'array_merge': ['array_merge', '', [], 2944],
'preg_quote': ['preg_quote', '', [], 205],
'max': ['max', '', [], 1266],
'strtolower': ['strtolower', '', [], 817],
'preg_replace': ['preg_replace', '', [], 917],
'str_ireplace': ['str_ireplace', '', [], 24],
'intval': ['intval', '', [], 455],
'explode': ['explode', '', [], 1572],
'array_key_exists': ['array_key_exists', '', [], 1445],
'substr': ['substr', '', [], 2823],
'array_keys': ['array_keys', '', [], 1256],
'str_replace': ['str_replace', '', [], 1648],
'array_unique': ['array_unique', '', [], 171],
'in_array': ['in_array', '', [], 1234]};
CLASS_DATA={
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 152],
'performance_measuring_filter_manager': ['performance_measuring_filter_manager', 'Filter manager subclass that tracks how much work it does. ', [['lib','filterlib.php',304]], 1],
'filter_manager': ['filter_manager', 'Class to manage the filtering of strings. It is intended that this class is only used by weblib.php. Client code should probably be using the format_text and format_string functions. ', [['lib','filterlib.php',44]], 19],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'null_filter_manager': ['null_filter_manager', 'Filter manager subclass that does nothing. Having this simplifies the logic of format_text, etc. ', [['lib','filterlib.php',278]], 1],
'filterobject': ['filterobject', 'This is just a little object to define a phrase and some instructions for how to process it.  Filters can create an array of these to pass to the filter_phrases function below. ', [['lib','filterlib.php',429]], 6],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511]};
CONST_DATA={
'TEXTFILTER_DISABLED': ['TEXTFILTER_DISABLED', '', [['lib','filterlib.php',34]], 34],
'TEXTFILTER_ON': ['TEXTFILTER_ON', '', [['lib','filterlib.php',28]], 73],
'TEXTFILTER_OFF': ['TEXTFILTER_OFF', '', [['lib','filterlib.php',32]], 32],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'CONTEXT_BLOCK': ['CONTEXT_BLOCK', '', [['lib','accesslib.php',156]], 96],
'TEXTFILTER_INHERIT': ['TEXTFILTER_INHERIT', '', [['lib','filterlib.php',30]], 13],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'TEXTFILTER_EXCL_SEPARATOR': ['TEXTFILTER_EXCL_SEPARATOR', '', [['lib','filterlib.php',41]], 3],
'CONTEXT_USER': ['CONTEXT_USER', '', [['lib','accesslib.php',144]], 123]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
