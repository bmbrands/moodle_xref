<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/portfoliolib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='portfoliolib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="portfoliolib.php.html">portfoliolib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="portfoliolib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="portfoliolib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains all global functions to do with manipulating portfolios.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Everything else that is logically namespaced by class is in its own file</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * in lib/portfolio/ directory.</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * Major Contributors</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *     - Penny Leach &lt;penny@catalyst.net.nz&gt;</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @package core_portfolio</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * @category portfolio</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">// require some of the sublibraries first.</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">// this is not an exhaustive list, the others are pulled in as they're needed</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">// so we don't have to always include everything unnecessarily for performance</span>
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">// very lightweight list of constants. always needed and no further dependencies</span>
<a name="l39"><span class="linenum">  39</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/constants.php');
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">// a couple of exception deinitions. always needed and no further dependencies</span>
<a name="l41"><span class="linenum">  41</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/exceptions.php');  <span class="comment">// exception classes used by portfolio code</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">// The base class for the caller classes. We always need this because we're either drawing a button,</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">// in which case the button needs to know the calling class definition, which requires the base class,</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">// or we're exporting, in which case we need the caller class anyway.</span>
<a name="l45"><span class="linenum">  45</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/caller.php');
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">// the other dependencies are included on demand:</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">// libdir/portfolio/formats.php  - the classes for the export formats</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">// libdir/portfolio/forms.php    - all portfolio form classes (requires formslib)</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">// libdir/portfolio/plugin.php   - the base class for the export plugins</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">// libdir/portfolio/exporter.php - the exporter class</span>
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * Use this to add a portfolio button or icon or form to a page.</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> *</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * These class methods do not check permissions. the caller must check permissions first.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * Later, during the export process, the caller class is instantiated and the check_permissions method is called</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * If you are exporting a single file, you should always call set_format_by_file($file)</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * This class can be used like this:</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> * $button = new portfolio_add_button();</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> * $button-&gt;set_callback_options('name_of_caller_class', array('id' =&gt; 6), 'yourcomponent'); eg. mod_forum</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> * $button-&gt;render(PORTFOLIO_ADD_FULL_FORM, get_string('addeverythingtoportfolio', 'yourcomponent'));</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> * or like this:</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * $button = new portfolio_add_button(array('callbackclass' =&gt; 'name_of_caller_class', 'callbackargs' =&gt; array('id' =&gt; 6), 'callbackcomponent' =&gt; 'yourcomponent')); eg. mod_forum</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * $somehtml .= $button-&gt;to_html(PORTFOLIO_ADD_TEXT_LINK);</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *{@link http://docs.moodle.org/dev/Adding_a_Portfolio_Button_to_a_page} for more information</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> *</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @package core_portfolio</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> * @category portfolio</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment"> */</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('portfolio_add_button')" href="../_classes/portfolio_add_button.html" onMouseOver="classPopup(event,'portfolio_add_button')">portfolio_add_button</a> {
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">    /** @var string the name of the callback functions */</span>
<a name="l81"><span class="linenum">  81</span></a>      private <a class="var it10642" onMouseOver="hilite(10642)" onMouseOut="lolite()" onClick="logVariable('callbackclass')" href="../_variables/callbackclass.html">$callbackclass</a>;
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">    /** @var array can be an array of arguments to pass back to the callback functions (passed by reference)*/</span>
<a name="l84"><span class="linenum">  84</span></a>      private <a class="var it10647" onMouseOver="hilite(10647)" onMouseOut="lolite()" onClick="logVariable('callbackargs')" href="../_variables/callbackargs.html">$callbackargs</a>;
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">    /** @var string caller file */</span>
<a name="l87"><span class="linenum">  87</span></a>      private <a class="var it10641" onMouseOver="hilite(10641)" onMouseOut="lolite()" onClick="logVariable('callbackcomponent')" href="../_variables/callbackcomponent.html">$callbackcomponent</a>;
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">    /** @var array array of more specific formats (eg based on mime detection) */</span>
<a name="l90"><span class="linenum">  90</span></a>      private <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>;
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">    /** @var array array of portfolio instances */</span>
<a name="l93"><span class="linenum">  93</span></a>      private <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>;
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">    /** @var stored_file for single-file exports */</span>
<a name="l96"><span class="linenum">  96</span></a>      private <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>;
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">    /** @var string for writing specific types of files*/</span>
<a name="l99"><span class="linenum">  99</span></a>      private <a class="var it27472" onMouseOver="hilite(27472)" onMouseOut="lolite()" onClick="logVariable('intendedmimetype')" href="../_variables/intendedmimetype.html">$intendedmimetype</a>;
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * Constructor. Either pass the options here or set them using the helper methods.</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * Generally the code will be clearer if you use the helper methods.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     *</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     * @param array $options keyed array of options:</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     *                       key 'callbackclass': name of the caller class (eg forum_portfolio_caller')</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     *                       key 'callbackargs': the array of callback arguments your caller class wants passed to it in the constructor</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     *                       key 'callbackcomponent': the file containing the class definition of your caller class.</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     *                       See set_callback_options for more information on these three.</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     *                       key 'formats': an array of PORTFOLIO_FORMATS this caller will support</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     *                       See set_formats or set_format_by_file for more information on this.</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     */</span>
<a name="l113"><span class="linenum"> 113</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>=null) {
<a name="l114"><span class="linenum"> 114</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enableportfolios.html">enableportfolios</a>)) {
<a name="l117"><span class="linenum"> 117</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Building portfolio add button while portfolios is disabled. This code can be optimised.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l118"><span class="linenum"> 118</span></a>          }
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a> = <a class="function" onClick="logFunction('portfolio_instances')" href="../_functions/portfolio_instances.html" onMouseOver="funcPopup(event,'portfolio_instances')">portfolio_instances</a>();
<a name="l121"><span class="linenum"> 121</span></a>          if (empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l122"><span class="linenum"> 122</span></a>              return true;
<a name="l123"><span class="linenum"> 123</span></a>          }
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it27473" onMouseOver="hilite(27473)" onMouseOut="lolite()" onClick="logVariable('constructoroptions')" href="../_variables/constructoroptions.html">$constructoroptions</a> = array('callbackclass', 'callbackargs', 'callbackcomponent');
<a name="l125"><span class="linenum"> 125</span></a>          foreach ((array)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l126"><span class="linenum"> 126</span></a>              if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it27473" onMouseOver="hilite(27473)" onMouseOut="lolite()" onClick="logVariable('constructoroptions')" href="../_variables/constructoroptions.html">$constructoroptions</a>)) {
<a name="l127"><span class="linenum"> 127</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('invalidbuttonproperty', 'portfolio', <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l128"><span class="linenum"> 128</span></a>              }
<a name="l129"><span class="linenum"> 129</span></a>          }
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_callback_options')" href="../_functions/set_callback_options.html" onMouseOver="funcPopup(event,'set_callback_options')">set_callback_options</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['callbackclass'], <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['callbackargs'], <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['callbackcomponent']);
<a name="l132"><span class="linenum"> 132</span></a>      }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * Function to set the callback options</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     *</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * @param string $class Name of the class containing the callback functions</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     *      activity components should ALWAYS use their name_portfolio_caller</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     *      other locations must use something unique</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @param array $argarray This can be an array or hash of arguments to pass</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     *      back to the callback functions (passed by reference)</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     *      these MUST be primatives to be added as hidden form fields.</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     *      and the values get cleaned to PARAM_ALPHAEXT or PARAM_FLOAT or PARAM_PATH</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">     * @param string $component This is the name of the component in Moodle, eg 'mod_forum'</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">     */</span>
<a name="l146"><span class="linenum"> 146</span></a>      public function <a class="function" onClick="logFunction('set_callback_options')" href="../_functions/set_callback_options.html" onMouseOver="funcPopup(event,'set_callback_options')">set_callback_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>, array <a class="var it27474" onMouseOver="hilite(27474)" onMouseOut="lolite()" onClick="logVariable('argarray')" href="../_variables/argarray.html">$argarray</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l147"><span class="linenum"> 147</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">        // Require the base class first before any other files.</span>
<a name="l150"><span class="linenum"> 150</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/caller.php');
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">        // Include any potential callback files and check for errors.</span>
<a name="l153"><span class="linenum"> 153</span></a>          <a class="function" onClick="logFunction('portfolio_include_callback_file')" href="../_functions/portfolio_include_callback_file.html" onMouseOver="funcPopup(event,'portfolio_include_callback_file')">portfolio_include_callback_file</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>);
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">        // This will throw exceptions but should not actually do anything other than verify callbackargs.</span>
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it3797" onMouseOver="hilite(3797)" onMouseOut="lolite()" onClick="logVariable('test')" href="../_variables/test.html">$test</a> = new <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>(<a class="var it27474" onMouseOver="hilite(27474)" onMouseOut="lolite()" onClick="logVariable('argarray')" href="../_variables/argarray.html">$argarray</a>);
<a name="l157"><span class="linenum"> 157</span></a>          unset(<a class="var it3797" onMouseOver="hilite(3797)" onMouseOut="lolite()" onClick="logVariable('test')" href="../_variables/test.html">$test</a>);
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackcomponent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackcomponent.html">callbackcomponent</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>;
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackargs')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackargs.html">callbackargs</a> = <a class="var it27474" onMouseOver="hilite(27474)" onMouseOut="lolite()" onClick="logVariable('argarray')" href="../_variables/argarray.html">$argarray</a>;
<a name="l162"><span class="linenum"> 162</span></a>      }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>      <span class="comment">/**</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * Sets the available export formats for this content.</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * This function will also poll the static function in the caller class</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * and make sure we're not overriding a format that has nothing to do with mimetypes.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * Eg: if you pass IMAGE here but the caller can export LEAP2A it will keep LEAP2A as well.</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @see portfolio_most_specific_formats for more information</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * @see portfolio_format_from_mimetype</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     *</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * @param array $formats if the calling code knows better than the static method on the calling class (base_supported_formats).</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     *                       Eg: if it's going to be a single file, or if you know it's HTML, you can pass it here instead.</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     *                       This is almost always the case so it should be use all the times</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     *                       portfolio_format_from_mimetype for how to get the appropriate formats to pass here for uploaded files.</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     *                       or just call set_format_by_file instead</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     */</span>
<a name="l178"><span class="linenum"> 178</span></a>      public function <a class="function" onClick="logFunction('set_formats')" href="../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>=null) {
<a name="l179"><span class="linenum"> 179</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>)) {
<a name="l180"><span class="linenum"> 180</span></a>              <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = array(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>);
<a name="l181"><span class="linenum"> 181</span></a>          }
<a name="l182"><span class="linenum"> 182</span></a>          if (empty(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>)) {
<a name="l183"><span class="linenum"> 183</span></a>              <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = array();
<a name="l184"><span class="linenum"> 184</span></a>          }
<a name="l185"><span class="linenum"> 185</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a>)) {
<a name="l186"><span class="linenum"> 186</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('noclassbeforeformats', 'portfolio');
<a name="l187"><span class="linenum"> 187</span></a>          }
<a name="l188"><span class="linenum"> 188</span></a>          <a class="var it10643" onMouseOver="hilite(10643)" onMouseOut="lolite()" onClick="logVariable('callerformats')" href="../_variables/callerformats.html">$callerformats</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a>, 'base_supported_formats'));
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('formats')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/formats.html">formats</a> = <a class="function" onClick="logFunction('portfolio_most_specific_formats')" href="../_functions/portfolio_most_specific_formats.html" onMouseOver="funcPopup(event,'portfolio_most_specific_formats')">portfolio_most_specific_formats</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>, <a class="var it10643" onMouseOver="hilite(10643)" onMouseOut="lolite()" onClick="logVariable('callerformats')" href="../_variables/callerformats.html">$callerformats</a>);
<a name="l190"><span class="linenum"> 190</span></a>      }
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      <span class="comment">/**</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     * Reset formats to the default,</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">     * which is usually what base_supported_formats returns</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     */</span>
<a name="l196"><span class="linenum"> 196</span></a>      public function <a class="function" onClick="logFunction('reset_formats')" href="../_functions/reset_formats.html" onMouseOver="funcPopup(event,'reset_formats')">reset_formats</a>() {
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>();
<a name="l198"><span class="linenum"> 198</span></a>      }
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      <span class="comment">/**</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * If we already know we have exactly one file,</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     * bypass set_formats and just pass the file</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     * so we can detect the formats by mimetype.</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     *</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     * @param stored_file $file file to set the format from</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     * @param array $extraformats any additional formats other than by mimetype</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     *                            eg leap2a etc</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">     */</span>
<a name="l210"><span class="linenum"> 210</span></a>      public function <a class="function" onClick="logFunction('set_format_by_file')" href="../_functions/set_format_by_file.html" onMouseOver="funcPopup(event,'set_format_by_file')">set_format_by_file</a>(stored_file <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>=null) {
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('file')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/file.html">file</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>;
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a> = <a class="function" onClick="logFunction('portfolio_format_from_mimetype')" href="../_functions/portfolio_format_from_mimetype.html" onMouseOver="funcPopup(event,'portfolio_format_from_mimetype')">portfolio_format_from_mimetype</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_mimetype')" href="../_functions/get_mimetype.html" onMouseOver="funcPopup(event,'get_mimetype')">get_mimetype</a>());
<a name="l213"><span class="linenum"> 213</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>)) {
<a name="l214"><span class="linenum"> 214</span></a>              <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a> = array(<a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>);
<a name="l215"><span class="linenum"> 215</span></a>          } else if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>)) {
<a name="l216"><span class="linenum"> 216</span></a>              <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a> = array();
<a name="l217"><span class="linenum"> 217</span></a>          }
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array(<a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a>), <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>));
<a name="l219"><span class="linenum"> 219</span></a>      }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>      <span class="comment">/**</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * Correllary this is use to set_format_by_file, but it is also used when there is no stored_file and</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     * when we're writing out a new type of file (like csv or pdf)</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     *</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     * @param string $extn the file extension we intend to generate</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     * @param array  $extraformats any additional formats other than by mimetype</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     *                             eg leap2a etc</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     */</span>
<a name="l229"><span class="linenum"> 229</span></a>      public function <a class="function" onClick="logFunction('set_format_by_intended_file')" href="../_functions/set_format_by_intended_file.html" onMouseOver="funcPopup(event,'set_format_by_intended_file')">set_format_by_intended_file</a>(<a class="var it27476" onMouseOver="hilite(27476)" onMouseOut="lolite()" onClick="logVariable('extn')" href="../_variables/extn.html">$extn</a>, <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>=null) {
<a name="l230"><span class="linenum"> 230</span></a>          <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a> = <a class="function" onClick="logFunction('mimeinfo')" href="../_functions/mimeinfo.html" onMouseOver="funcPopup(event,'mimeinfo')">mimeinfo</a>('type', 'something. ' . <a class="var it27476" onMouseOver="hilite(27476)" onMouseOut="lolite()" onClick="logVariable('extn')" href="../_variables/extn.html">$extn</a>);
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a> = <a class="function" onClick="logFunction('portfolio_format_from_mimetype')" href="../_functions/portfolio_format_from_mimetype.html" onMouseOver="funcPopup(event,'portfolio_format_from_mimetype')">portfolio_format_from_mimetype</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>);
<a name="l232"><span class="linenum"> 232</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('intendedmimetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/intendedmimetype.html">intendedmimetype</a> = <a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a>;
<a name="l233"><span class="linenum"> 233</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>)) {
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a> = array(<a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>);
<a name="l235"><span class="linenum"> 235</span></a>          } else if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>)) {
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a> = array();
<a name="l237"><span class="linenum"> 237</span></a>          }
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array(<a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a>), <a class="var it27475" onMouseOver="hilite(27475)" onMouseOut="lolite()" onClick="logVariable('extraformats')" href="../_variables/extraformats.html">$extraformats</a>));
<a name="l239"><span class="linenum"> 239</span></a>      }
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>      <span class="comment">/**</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * Echo the form/button/icon/text link to the page</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     *</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * @param int $format format to display the button or form or icon or link.</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     *                    See constants PORTFOLIO_ADD_XXX for more info.</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     *                    optional, defaults to PORTFOLIO_ADD_FULL_FORM</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     * @param string $addstr string to use for the button or icon alt text or link text.</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     *                       this is whole string, not key. optional, defaults to 'Export to portfolio';</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     */</span>
<a name="l250"><span class="linenum"> 250</span></a>      public function <a class="function" onClick="logFunction('render')" href="../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>=null, <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>=null) {
<a name="l251"><span class="linenum"> 251</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('to_html')" href="../_functions/to_html.html" onMouseOver="funcPopup(event,'to_html')">to_html</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>);
<a name="l252"><span class="linenum"> 252</span></a>      }
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>      <span class="comment">/**</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * Returns the form/button/icon/text link as html</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     *</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * @param int $format format to display the button or form or icon or link.</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     *                    See constants PORTFOLIO_ADD_XXX for more info.</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     *                    Optional, defaults to PORTFOLIO_ADD_FULL_FORM</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     * @param string $addstr string to use for the button or icon alt text or link text.</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     *                       This is whole string, not key.  optional, defaults to 'Add to portfolio';</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     * @return void|string</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">     */</span>
<a name="l264"><span class="linenum"> 264</span></a>      public function <a class="function" onClick="logFunction('to_html')" href="../_functions/to_html.html" onMouseOver="funcPopup(event,'to_html')">to_html</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>=null, <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>=null) {
<a name="l265"><span class="linenum"> 265</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l266"><span class="linenum"> 266</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_renderable')" href="../_functions/is_renderable.html" onMouseOver="funcPopup(event,'is_renderable')">is_renderable</a>()) {
<a name="l267"><span class="linenum"> 267</span></a>              return;
<a name="l268"><span class="linenum"> 268</span></a>          }
<a name="l269"><span class="linenum"> 269</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a>) || empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackcomponent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackcomponent.html">callbackcomponent</a>)) {
<a name="l270"><span class="linenum"> 270</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('mustsetcallbackoptions', 'portfolio');
<a name="l271"><span class="linenum"> 271</span></a>          }
<a name="l272"><span class="linenum"> 272</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('formats')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/formats.html">formats</a>)) {
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">            // use the caller defaults</span>
<a name="l274"><span class="linenum"> 274</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>();
<a name="l275"><span class="linenum"> 275</span></a>          }
<a name="l276"><span class="linenum"> 276</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../portfolio/add.php.html">/portfolio/add.php</a>');
<a name="l277"><span class="linenum"> 277</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackargs')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackargs.html">callbackargs</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l278"><span class="linenum"> 278</span></a>              if (!empty(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l279"><span class="linenum"> 279</span></a>                  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l280"><span class="linenum"> 280</span></a>                  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('key')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/key.html">key</a> = <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l281"><span class="linenum"> 281</span></a>                  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('value')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/value.html">value</a> = <a class="phpfunction" onClick="logFunction('print_r')" href="../_functions/print_r.html" onMouseOver="phpfuncPopup(event,'print_r')">print_r</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, true);
<a name="l282"><span class="linenum"> 282</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nonprimative', 'portfolio', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>));
<a name="l283"><span class="linenum"> 283</span></a>                  return;
<a name="l284"><span class="linenum"> 284</span></a>              }
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('ca_' . <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l286"><span class="linenum"> 286</span></a>          }
<a name="l287"><span class="linenum"> 287</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('sesskey', <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>());
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('callbackcomponent', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackcomponent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackcomponent.html">callbackcomponent</a>);
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('callbackclass', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a>);
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', (!empty(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>)) ? <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it43316" onMouseOver="hilite(43316)" onMouseOut="lolite()" href="../_variables/id.html">id</a> : 0);
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('callerformats', <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('formats')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/formats.html">formats</a>));
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a> = null;
<a name="l293"><span class="linenum"> 293</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('file')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/file.html">file</a> instanceof stored_file) {
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('file')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/file.html">file</a>-&gt;<a class="function" onClick="logFunction('get_mimetype')" href="../_functions/get_mimetype.html" onMouseOver="funcPopup(event,'get_mimetype')">get_mimetype</a>();
<a name="l295"><span class="linenum"> 295</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('intendedmimetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/intendedmimetype.html">intendedmimetype</a>) {
<a name="l296"><span class="linenum"> 296</span></a>              <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('intendedmimetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/intendedmimetype.html">intendedmimetype</a>;
<a name="l297"><span class="linenum"> 297</span></a>          }
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a> = '';
<a name="l299"><span class="linenum"> 299</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>) == 1) {
<a name="l300"><span class="linenum"> 300</span></a>              <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>);
<a name="l301"><span class="linenum"> 301</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>[0];
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>              <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats_intersect')" href="../_functions/portfolio_supported_formats_intersect.html" onMouseOver="funcPopup(event,'portfolio_supported_formats_intersect')">portfolio_supported_formats_intersect</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('formats')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/formats.html">formats</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('supported_formats')" href="../_functions/supported_formats.html" onMouseOver="funcPopup(event,'supported_formats')">supported_formats</a>());
<a name="l304"><span class="linenum"> 304</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>) == 0) {
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">                // bail. no common formats.</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">                //debugging(get_string('nocommonformats', 'portfolio', (object)array('location' =&gt; $this-&gt;callbackclass, 'formats' =&gt; implode(',', $this-&gt;formats))));</span>
<a name="l307"><span class="linenum"> 307</span></a>                  return;
<a name="l308"><span class="linenum"> 308</span></a>              }
<a name="l309"><span class="linenum"> 309</span></a>              if (<a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../_variables/error.html">$error</a> = <a class="function" onClick="logFunction('portfolio_instance_sanity_check')" href="../_functions/portfolio_instance_sanity_check.html" onMouseOver="funcPopup(event,'portfolio_instance_sanity_check')">portfolio_instance_sanity_check</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>)) {
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">                // bail, plugin is misconfigured</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">                //debugging(get_string('instancemisconfigured', 'portfolio', get_string($error[$instance-&gt;get('id')], 'portfolio_' . $instance-&gt;get('plugin'))));</span>
<a name="l312"><span class="linenum"> 312</span></a>                  return;
<a name="l313"><span class="linenum"> 313</span></a>              }
<a name="l314"><span class="linenum"> 314</span></a>              if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('allows_multiple_exports')" href="../_functions/allows_multiple_exports.html" onMouseOver="funcPopup(event,'allows_multiple_exports')">allows_multiple_exports</a>() &amp;&amp; <a class="var it13852" onMouseOver="hilite(13852)" onMouseOut="lolite()" onClick="logVariable('already')" href="../_variables/already.html">$already</a> = <a class="function" onClick="logFunction('portfolio_existing_exports')" href="../_functions/portfolio_existing_exports.html" onMouseOver="funcPopup(event,'portfolio_existing_exports')">portfolio_existing_exports</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('plugin'))) {
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">                //debugging(get_string('singleinstancenomultiallowed', 'portfolio'));</span>
<a name="l316"><span class="linenum"> 316</span></a>                  return;
<a name="l317"><span class="linenum"> 317</span></a>              }
<a name="l318"><span class="linenum"> 318</span></a>              if (<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>&amp;&amp; !<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('file_mime_check')" href="../_functions/file_mime_check.html" onMouseOver="funcPopup(event,'file_mime_check')">file_mime_check</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>)) {
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">                // bail, we have a specific file or mimetype and this plugin doesn't support it</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">                //debugging(get_string('mimecheckfail', 'portfolio', (object)array('plugin' =&gt; $instance-&gt;get('plugin'), 'mimetype' =&gt; $mimetype)));</span>
<a name="l321"><span class="linenum"> 321</span></a>                  return;
<a name="l322"><span class="linenum"> 322</span></a>              }
<a name="l323"><span class="linenum"> 323</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('instance', <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'));
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>          else {
<a name="l326"><span class="linenum"> 326</span></a>              if (!<a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a> = <a class="function" onClick="logFunction('portfolio_instance_select')" href="../_functions/portfolio_instance_select.html" onMouseOver="funcPopup(event,'portfolio_instance_select')">portfolio_instance_select</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('formats')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/formats.html">formats</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a>, <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>, 'instance', true)) {
<a name="l327"><span class="linenum"> 327</span></a>                  return;
<a name="l328"><span class="linenum"> 328</span></a>              }
<a name="l329"><span class="linenum"> 329</span></a>          }
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">        // if we just want a url to redirect to, do it now</span>
<a name="l331"><span class="linenum"> 331</span></a>          if (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> == <a class="constant" onClick="logConstant('PORTFOLIO_ADD_FAKE_URL')" href="../_constants/PORTFOLIO_ADD_FAKE_URL.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_FAKE_URL')">PORTFOLIO_ADD_FAKE_URL</a>) {
<a name="l332"><span class="linenum"> 332</span></a>              return <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l333"><span class="linenum"> 333</span></a>          }
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>          if (empty(<a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>)) {
<a name="l336"><span class="linenum"> 336</span></a>              <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addtoportfolio', 'portfolio');
<a name="l337"><span class="linenum"> 337</span></a>          }
<a name="l338"><span class="linenum"> 338</span></a>          if (empty(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>)) {
<a name="l339"><span class="linenum"> 339</span></a>              <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = <a class="constant" onClick="logConstant('PORTFOLIO_ADD_FULL_FORM')" href="../_constants/PORTFOLIO_ADD_FULL_FORM.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_FULL_FORM')">PORTFOLIO_ADD_FULL_FORM</a>;
<a name="l340"><span class="linenum"> 340</span></a>          }
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> = '&lt;form method=&quot;post&quot; action=&quot;' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/portfolio/add.php&quot; id=&quot;portfolio-add-button&quot;&gt;' . &quot;\n&quot;;
<a name="l343"><span class="linenum"> 343</span></a>          <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('input_hidden_params')" href="../_functions/input_hidden_params.html" onMouseOver="funcPopup(event,'input_hidden_params')">input_hidden_params</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it27480" onMouseOver="hilite(27480)" onMouseOut="lolite()" onClick="logVariable('linkoutput')" href="../_variables/linkoutput.html">$linkoutput</a> = '';
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>          switch (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l347"><span class="linenum"> 347</span></a>              case <a class="constant" onClick="logConstant('PORTFOLIO_ADD_FULL_FORM')" href="../_constants/PORTFOLIO_ADD_FULL_FORM.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_FULL_FORM')">PORTFOLIO_ADD_FULL_FORM</a>:
<a name="l348"><span class="linenum"> 348</span></a>                  <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a>;
<a name="l349"><span class="linenum"> 349</span></a>                  <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= &quot;\n&quot; . '&lt;input type=&quot;submit&quot; value=&quot;' . <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a> .'&quot; /&gt;';
<a name="l350"><span class="linenum"> 350</span></a>                  <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= &quot;\n&quot; . '&lt;/form&gt;';
<a name="l351"><span class="linenum"> 351</span></a>              break;
<a name="l352"><span class="linenum"> 352</span></a>              case <a class="constant" onClick="logConstant('PORTFOLIO_ADD_ICON_FORM')" href="../_constants/PORTFOLIO_ADD_ICON_FORM.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_ICON_FORM')">PORTFOLIO_ADD_ICON_FORM</a>:
<a name="l353"><span class="linenum"> 353</span></a>                  <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a>;
<a name="l354"><span class="linenum"> 354</span></a>                  <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= &quot;\n&quot; . '&lt;input class=&quot;portfolio-add-icon&quot; type=&quot;image&quot; src=&quot;' . <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/portfolioadd') . '&quot; alt=' . <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a> .'&quot; /&gt;';
<a name="l355"><span class="linenum"> 355</span></a>                  <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> .= &quot;\n&quot; . '&lt;/form&gt;';
<a name="l356"><span class="linenum"> 356</span></a>              break;
<a name="l357"><span class="linenum"> 357</span></a>              case <a class="constant" onClick="logConstant('PORTFOLIO_ADD_ICON_LINK')" href="../_constants/PORTFOLIO_ADD_ICON_LINK.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_ICON_LINK')">PORTFOLIO_ADD_ICON_LINK</a>:
<a name="l358"><span class="linenum"> 358</span></a>                  <a class="var it27480" onMouseOver="hilite(27480)" onMouseOut="lolite()" onClick="logVariable('linkoutput')" href="../_variables/linkoutput.html">$linkoutput</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_icon')" href="../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/portfolioadd', <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>, '',
<a name="l359"><span class="linenum"> 359</span></a>                      array('class' =&gt; 'portfolio-add-icon smallicon')));
<a name="l360"><span class="linenum"> 360</span></a>              break;
<a name="l361"><span class="linenum"> 361</span></a>              case <a class="constant" onClick="logConstant('PORTFOLIO_ADD_TEXT_LINK')" href="../_constants/PORTFOLIO_ADD_TEXT_LINK.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_TEXT_LINK')">PORTFOLIO_ADD_TEXT_LINK</a>:
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it27480" onMouseOver="hilite(27480)" onMouseOut="lolite()" onClick="logVariable('linkoutput')" href="../_variables/linkoutput.html">$linkoutput</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>, array('class' =&gt; 'portfolio-add-link',
<a name="l363"><span class="linenum"> 363</span></a>                      'title' =&gt; <a class="var it27477" onMouseOver="hilite(27477)" onMouseOut="lolite()" onClick="logVariable('addstr')" href="../_variables/addstr.html">$addstr</a>));
<a name="l364"><span class="linenum"> 364</span></a>              break;
<a name="l365"><span class="linenum"> 365</span></a>              default:
<a name="l366"><span class="linenum"> 366</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidaddformat', 'portfolio', <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>));
<a name="l367"><span class="linenum"> 367</span></a>          }
<a name="l368"><span class="linenum"> 368</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, array(<a class="constant" onClick="logConstant('PORTFOLIO_ADD_FULL_FORM')" href="../_constants/PORTFOLIO_ADD_FULL_FORM.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_FULL_FORM')">PORTFOLIO_ADD_FULL_FORM</a>, <a class="constant" onClick="logConstant('PORTFOLIO_ADD_ICON_FORM')" href="../_constants/PORTFOLIO_ADD_ICON_FORM.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_ICON_FORM')">PORTFOLIO_ADD_ICON_FORM</a>)) ? <a class="var it27479" onMouseOver="hilite(27479)" onMouseOut="lolite()" onClick="logVariable('formoutput')" href="../_variables/formoutput.html">$formoutput</a> : <a class="var it27480" onMouseOver="hilite(27480)" onMouseOut="lolite()" onClick="logVariable('linkoutput')" href="../_variables/linkoutput.html">$linkoutput</a>);
<a name="l369"><span class="linenum"> 369</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l370"><span class="linenum"> 370</span></a>      }
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>      <span class="comment">/**</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     * Perform some internal checks.</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * These are not errors, just situations</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     * where it's not appropriate to add the button</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     *</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * @return bool</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     */</span>
<a name="l379"><span class="linenum"> 379</span></a>      private function <a class="function" onClick="logFunction('is_renderable')" href="../_functions/is_renderable.html" onMouseOver="funcPopup(event,'is_renderable')">is_renderable</a>() {
<a name="l380"><span class="linenum"> 380</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l381"><span class="linenum"> 381</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enableportfolios.html">enableportfolios</a>)) {
<a name="l382"><span class="linenum"> 382</span></a>              return false;
<a name="l383"><span class="linenum"> 383</span></a>          }
<a name="l384"><span class="linenum"> 384</span></a>          if (<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('PORTFOLIO_INTERNAL')) {
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">            // something somewhere has detected a risk of this being called during inside the preparation</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">            // eg forum_print_attachments</span>
<a name="l387"><span class="linenum"> 387</span></a>              return false;
<a name="l388"><span class="linenum"> 388</span></a>          }
<a name="l389"><span class="linenum"> 389</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>) || <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>) == 0) {
<a name="l390"><span class="linenum"> 390</span></a>              return false;
<a name="l391"><span class="linenum"> 391</span></a>          }
<a name="l392"><span class="linenum"> 392</span></a>          return true;
<a name="l393"><span class="linenum"> 393</span></a>      }
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>      <span class="comment">/**</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">     * Getter for $format property</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">     *</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">     * @return array</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     */</span>
<a name="l400"><span class="linenum"> 400</span></a>      public function <a class="function" onClick="logFunction('get_formats')" href="../_functions/get_formats.html" onMouseOver="funcPopup(event,'get_formats')">get_formats</a>() {
<a name="l401"><span class="linenum"> 401</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('formats')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/formats.html">formats</a>;
<a name="l402"><span class="linenum"> 402</span></a>      }
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>      <span class="comment">/**</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     * Getter for $callbackargs property</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     *</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     * @return array</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">     */</span>
<a name="l409"><span class="linenum"> 409</span></a>      public function <a class="function" onClick="logFunction('get_callbackargs')" href="../_functions/get_callbackargs.html" onMouseOver="funcPopup(event,'get_callbackargs')">get_callbackargs</a>() {
<a name="l410"><span class="linenum"> 410</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackargs')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackargs.html">callbackargs</a>;
<a name="l411"><span class="linenum"> 411</span></a>      }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>      <span class="comment">/**</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     * Getter for $callbackcomponent property</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     *</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * @return string</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     */</span>
<a name="l418"><span class="linenum"> 418</span></a>      public function <a class="function" onClick="logFunction('get_callbackcomponent')" href="../_functions/get_callbackcomponent.html" onMouseOver="funcPopup(event,'get_callbackcomponent')">get_callbackcomponent</a>() {
<a name="l419"><span class="linenum"> 419</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackcomponent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackcomponent.html">callbackcomponent</a>;
<a name="l420"><span class="linenum"> 420</span></a>      }
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>      <span class="comment">/**</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * Getter for $callbackclass property</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     *</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">     * @return string</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">     */</span>
<a name="l427"><span class="linenum"> 427</span></a>      public function <a class="function" onClick="logFunction('get_callbackclass')" href="../_functions/get_callbackclass.html" onMouseOver="funcPopup(event,'get_callbackclass')">get_callbackclass</a>() {
<a name="l428"><span class="linenum"> 428</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('callbackclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/callbackclass.html">callbackclass</a>;
<a name="l429"><span class="linenum"> 429</span></a>      }
<a name="l430"><span class="linenum"> 430</span></a>  }
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">/**</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment"> * Returns a drop menu with a list of available instances.</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment"> *</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment"> * @param array          $instances      array of portfolio plugin instance objects - the instances to put in the menu</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment"> * @param array          $callerformats  array of PORTFOLIO_FORMAT_XXX constants - the formats the caller supports (this is used to filter plugins)</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment"> * @param string         $callbackclass  the callback class name - used for debugging only for when there are no common formats</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment"> * @param string         $mimetype       if we already know we have exactly one file, or are going to write one, pass it here to do mime filtering.</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment"> * @param string         $selectname     the name of the select element. Optional, defaults to instance.</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"> * @param bool           $return         whether to print or return the output. Optional, defaults to print.</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment"> * @param bool           $returnarray    if returning, whether to return the HTML or the array of options. Optional, defaults to HTML.</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> * @return void|array|string the html, from &lt;select&gt; to &lt;/select&gt; inclusive.</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> */</span>
<a name="l444"><span class="linenum"> 444</span></a>  function <a class="function" onClick="logFunction('portfolio_instance_select')" href="../_functions/portfolio_instance_select.html" onMouseOver="funcPopup(event,'portfolio_instance_select')">portfolio_instance_select</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>, <a class="var it10643" onMouseOver="hilite(10643)" onMouseOut="lolite()" onClick="logVariable('callerformats')" href="../_variables/callerformats.html">$callerformats</a>, <a class="var it10642" onMouseOver="hilite(10642)" onMouseOut="lolite()" onClick="logVariable('callbackclass')" href="../_variables/callbackclass.html">$callbackclass</a>, <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>=null, <a class="var it23721" onMouseOver="hilite(23721)" onMouseOut="lolite()" onClick="logVariable('selectname')" href="../_variables/selectname.html">$selectname</a>='instance', <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=false, <a class="var it27481" onMouseOver="hilite(27481)" onMouseOut="lolite()" onClick="logVariable('returnarray')" href="../_variables/returnarray.html">$returnarray</a>=false) {
<a name="l445"><span class="linenum"> 445</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l446"><span class="linenum"> 446</span></a>  
<a name="l447"><span class="linenum"> 447</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enableportfolios.html">enableportfolios</a>)) {
<a name="l448"><span class="linenum"> 448</span></a>          return;
<a name="l449"><span class="linenum"> 449</span></a>      }
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>      <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a> = <a class="function" onClick="logFunction('portfolio_instance_sanity_check')" href="../_functions/portfolio_instance_sanity_check.html" onMouseOver="funcPopup(event,'portfolio_instance_sanity_check')">portfolio_instance_sanity_check</a>();
<a name="l452"><span class="linenum"> 452</span></a>      <a class="var it27483" onMouseOver="hilite(27483)" onMouseOut="lolite()" onClick="logVariable('pinsane')" href="../_variables/pinsane.html">$pinsane</a> = <a class="function" onClick="logFunction('portfolio_plugin_sanity_check')" href="../_functions/portfolio_plugin_sanity_check.html" onMouseOver="funcPopup(event,'portfolio_plugin_sanity_check')">portfolio_plugin_sanity_check</a>();
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = 0;
<a name="l455"><span class="linenum"> 455</span></a>      <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a> = &quot;\n&quot; . '&lt;label class=&quot;accesshide&quot; for=&quot;instanceid&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('plugin', 'portfolio') . '&lt;/label&gt;';
<a name="l456"><span class="linenum"> 456</span></a>      <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a> .= &quot;\n&quot; . '&lt;select id=&quot;instanceid&quot; name=&quot;' . <a class="var it23721" onMouseOver="hilite(23721)" onMouseOut="lolite()" onClick="logVariable('selectname')" href="../_variables/selectname.html">$selectname</a> . '&quot;&gt;' . &quot;\n&quot;;
<a name="l457"><span class="linenum"> 457</span></a>      <a class="var it27484" onMouseOver="hilite(27484)" onMouseOut="lolite()" onClick="logVariable('existingexports')" href="../_variables/existingexports.html">$existingexports</a> = <a class="function" onClick="logFunction('portfolio_existing_exports_by_plugin')" href="../_functions/portfolio_existing_exports_by_plugin.html" onMouseOver="funcPopup(event,'portfolio_existing_exports_by_plugin')">portfolio_existing_exports_by_plugin</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l458"><span class="linenum"> 458</span></a>      foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l459"><span class="linenum"> 459</span></a>          <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats_intersect')" href="../_functions/portfolio_supported_formats_intersect.html" onMouseOver="funcPopup(event,'portfolio_supported_formats_intersect')">portfolio_supported_formats_intersect</a>(<a class="var it10643" onMouseOver="hilite(10643)" onMouseOut="lolite()" onClick="logVariable('callerformats')" href="../_variables/callerformats.html">$callerformats</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('supported_formats')" href="../_functions/supported_formats.html" onMouseOver="funcPopup(event,'supported_formats')">supported_formats</a>());
<a name="l460"><span class="linenum"> 460</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>) == 0) {
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">            // bail. no common formats.</span>
<a name="l462"><span class="linenum"> 462</span></a>              continue;
<a name="l463"><span class="linenum"> 463</span></a>          }
<a name="l464"><span class="linenum"> 464</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'), <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>)) {
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">            // bail, plugin is misconfigured</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">            //debugging(get_string('instanceismisconfigured', 'portfolio', get_string($insane[$instance-&gt;get('id')], 'portfolio_' . $instance-&gt;get('plugin'))));</span>
<a name="l467"><span class="linenum"> 467</span></a>              continue;
<a name="l468"><span class="linenum"> 468</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('plugin'), <a class="var it27483" onMouseOver="hilite(27483)" onMouseOut="lolite()" onClick="logVariable('pinsane')" href="../_variables/pinsane.html">$pinsane</a>)) {
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">            // bail, plugin is misconfigured</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">            //debugging(get_string('pluginismisconfigured', 'portfolio', get_string($pinsane[$instance-&gt;get('plugin')], 'portfolio_' . $instance-&gt;get('plugin'))));</span>
<a name="l471"><span class="linenum"> 471</span></a>              continue;
<a name="l472"><span class="linenum"> 472</span></a>          }
<a name="l473"><span class="linenum"> 473</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('allows_multiple_exports')" href="../_functions/allows_multiple_exports.html" onMouseOver="funcPopup(event,'allows_multiple_exports')">allows_multiple_exports</a>() &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('plugin'), <a class="var it27484" onMouseOver="hilite(27484)" onMouseOut="lolite()" onClick="logVariable('existingexports')" href="../_variables/existingexports.html">$existingexports</a>)) {
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">            // bail, already exporting something with this plugin and it doesn't support multiple exports</span>
<a name="l475"><span class="linenum"> 475</span></a>              continue;
<a name="l476"><span class="linenum"> 476</span></a>          }
<a name="l477"><span class="linenum"> 477</span></a>          if (<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a> &amp;&amp; !<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('file_mime_check')" href="../_functions/file_mime_check.html" onMouseOver="funcPopup(event,'file_mime_check')">file_mime_check</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>)) {
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">            //debugging(get_string('mimecheckfail', 'portfolio', (object)array('plugin' =&gt; $instance-&gt;get('plugin'), 'mimetype' =&gt; $mimetype())));</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">            // bail, we have a specific file and this plugin doesn't support it</span>
<a name="l480"><span class="linenum"> 480</span></a>              continue;
<a name="l481"><span class="linenum"> 481</span></a>          }
<a name="l482"><span class="linenum"> 482</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>++;
<a name="l483"><span class="linenum"> 483</span></a>          <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a> .= &quot;\n&quot; . '&lt;option value=&quot;' . <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') . '&quot;&gt;' . <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('name') . '&lt;/option&gt;' . &quot;\n&quot;;
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>[<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')] = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('name');
<a name="l485"><span class="linenum"> 485</span></a>      }
<a name="l486"><span class="linenum"> 486</span></a>      if (empty(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>)) {
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">        // bail. no common formats.</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">        //debugging(get_string('nocommonformats', 'portfolio', (object)array('location' =&gt; $callbackclass, 'formats' =&gt; implode(',', $callerformats))));</span>
<a name="l489"><span class="linenum"> 489</span></a>          return;
<a name="l490"><span class="linenum"> 490</span></a>      }
<a name="l491"><span class="linenum"> 491</span></a>      <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a> .= &quot;\n&quot; . &quot;&lt;/select&gt;\n&quot;;
<a name="l492"><span class="linenum"> 492</span></a>      if (!empty(<a class="var it27481" onMouseOver="hilite(27481)" onMouseOut="lolite()" onClick="logVariable('returnarray')" href="../_variables/returnarray.html">$returnarray</a>)) {
<a name="l493"><span class="linenum"> 493</span></a>          return <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>      if (!empty(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>)) {
<a name="l496"><span class="linenum"> 496</span></a>          return <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a>;
<a name="l497"><span class="linenum"> 497</span></a>      }
<a name="l498"><span class="linenum"> 498</span></a>      echo <a class="var it27478" onMouseOver="hilite(27478)" onMouseOut="lolite()" onClick="logVariable('selectoutput')" href="../_variables/selectoutput.html">$selectoutput</a>;
<a name="l499"><span class="linenum"> 499</span></a>  }
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">/**</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment"> * Return all portfolio instances</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment"> *</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment"> * @todo MDL-15768 - check capabilities here</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment"> * @param bool $visibleonly Don't include hidden instances. Defaults to true and will be overridden to true if the next parameter is true</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment"> * @param bool $useronly    Check the visibility preferences and permissions of the logged in user. Defaults to true.</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment"> * @return array of portfolio instances (full objects, not just database records)</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment"> */</span>
<a name="l509"><span class="linenum"> 509</span></a>  function <a class="function" onClick="logFunction('portfolio_instances')" href="../_functions/portfolio_instances.html" onMouseOver="funcPopup(event,'portfolio_instances')">portfolio_instances</a>(<a class="var it27485" onMouseOver="hilite(27485)" onMouseOut="lolite()" onClick="logVariable('visibleonly')" href="../_variables/visibleonly.html">$visibleonly</a>=true, <a class="var it27486" onMouseOver="hilite(27486)" onMouseOut="lolite()" onClick="logVariable('useronly')" href="../_variables/useronly.html">$useronly</a>=true) {
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>      <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a> = array();
<a name="l514"><span class="linenum"> 514</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT * FROM {portfolio_instance}';
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>      if (<a class="var it27485" onMouseOver="hilite(27485)" onMouseOut="lolite()" onClick="logVariable('visibleonly')" href="../_variables/visibleonly.html">$visibleonly</a> || <a class="var it27486" onMouseOver="hilite(27486)" onMouseOut="lolite()" onClick="logVariable('useronly')" href="../_variables/useronly.html">$useronly</a>) {
<a name="l517"><span class="linenum"> 517</span></a>          <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>[] = 1;
<a name="l518"><span class="linenum"> 518</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= ' WHERE visible = ?';
<a name="l519"><span class="linenum"> 519</span></a>      }
<a name="l520"><span class="linenum"> 520</span></a>      if (<a class="var it27486" onMouseOver="hilite(27486)" onMouseOut="lolite()" onClick="logVariable('useronly')" href="../_variables/useronly.html">$useronly</a>) {
<a name="l521"><span class="linenum"> 521</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= ' AND id NOT IN (
<a name="l522"><span class="linenum"> 522</span></a>                  SELECT instance FROM {portfolio_instance_user}
<a name="l523"><span class="linenum"> 523</span></a>                  WHERE userid = ? AND name = ? AND ' . <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_compare_text')" href="../_functions/sql_compare_text.html" onMouseOver="funcPopup(event,'sql_compare_text')">sql_compare_text</a>('value') . ' = ?
<a name="l524"><span class="linenum"> 524</span></a>              )';
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>, array(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'visible', 0));
<a name="l526"><span class="linenum"> 526</span></a>      }
<a name="l527"><span class="linenum"> 527</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= ' ORDER BY name';
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>      <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = array();
<a name="l530"><span class="linenum"> 530</span></a>      foreach (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>) as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l531"><span class="linenum"> 531</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>[<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('portfolio_instance')" href="../_functions/portfolio_instance.html" onMouseOver="funcPopup(event,'portfolio_instance')">portfolio_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>);
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>      return <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>;
<a name="l534"><span class="linenum"> 534</span></a>  }
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">/**</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment"> * Return whether there are visible instances in portfolio.</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment"> *</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment"> * @return bool true when there are some visible instances.</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment"> */</span>
<a name="l541"><span class="linenum"> 541</span></a>  function <a class="function" onClick="logFunction('portfolio_has_visible_instances')" href="../_functions/portfolio_has_visible_instances.html" onMouseOver="funcPopup(event,'portfolio_has_visible_instances')">portfolio_has_visible_instances</a>() {
<a name="l542"><span class="linenum"> 542</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l543"><span class="linenum"> 543</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('portfolio_instance', array('visible' =&gt; 1));
<a name="l544"><span class="linenum"> 544</span></a>  }
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">/**</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment"> * Supported formats currently in use.</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment"> * Canonical place for a list of all formats</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment"> * that portfolio plugins and callers</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment"> * can use for exporting content</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment"> *</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment"> * @return array keyed array of all the available export formats (constant =&gt; classname)</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment"> */</span>
<a name="l554"><span class="linenum"> 554</span></a>  function <a class="function" onClick="logFunction('portfolio_supported_formats')" href="../_functions/portfolio_supported_formats.html" onMouseOver="funcPopup(event,'portfolio_supported_formats')">portfolio_supported_formats</a>() {
<a name="l555"><span class="linenum"> 555</span></a>      return array(
<a name="l556"><span class="linenum"> 556</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_FILE')" href="../_constants/PORTFOLIO_FORMAT_FILE.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_FILE')">PORTFOLIO_FORMAT_FILE</a>         =&gt; 'portfolio_format_file',
<a name="l557"><span class="linenum"> 557</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_IMAGE')" href="../_constants/PORTFOLIO_FORMAT_IMAGE.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_IMAGE')">PORTFOLIO_FORMAT_IMAGE</a>        =&gt; 'portfolio_format_image',
<a name="l558"><span class="linenum"> 558</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_RICHHTML')" href="../_constants/PORTFOLIO_FORMAT_RICHHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_RICHHTML')">PORTFOLIO_FORMAT_RICHHTML</a>     =&gt; 'portfolio_format_richhtml',
<a name="l559"><span class="linenum"> 559</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_PLAINHTML')" href="../_constants/PORTFOLIO_FORMAT_PLAINHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_PLAINHTML')">PORTFOLIO_FORMAT_PLAINHTML</a>    =&gt; 'portfolio_format_plainhtml',
<a name="l560"><span class="linenum"> 560</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_TEXT')" href="../_constants/PORTFOLIO_FORMAT_TEXT.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_TEXT')">PORTFOLIO_FORMAT_TEXT</a>         =&gt; 'portfolio_format_text',
<a name="l561"><span class="linenum"> 561</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_VIDEO')" href="../_constants/PORTFOLIO_FORMAT_VIDEO.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_VIDEO')">PORTFOLIO_FORMAT_VIDEO</a>        =&gt; 'portfolio_format_video',
<a name="l562"><span class="linenum"> 562</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_PDF')" href="../_constants/PORTFOLIO_FORMAT_PDF.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_PDF')">PORTFOLIO_FORMAT_PDF</a>          =&gt; 'portfolio_format_pdf',
<a name="l563"><span class="linenum"> 563</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_DOCUMENT')" href="../_constants/PORTFOLIO_FORMAT_DOCUMENT.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_DOCUMENT')">PORTFOLIO_FORMAT_DOCUMENT</a>     =&gt; 'portfolio_format_document',
<a name="l564"><span class="linenum"> 564</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_SPREADSHEET')" href="../_constants/PORTFOLIO_FORMAT_SPREADSHEET.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_SPREADSHEET')">PORTFOLIO_FORMAT_SPREADSHEET</a>  =&gt; 'portfolio_format_spreadsheet',
<a name="l565"><span class="linenum"> 565</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_PRESENTATION')" href="../_constants/PORTFOLIO_FORMAT_PRESENTATION.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_PRESENTATION')">PORTFOLIO_FORMAT_PRESENTATION</a> =&gt; 'portfolio_format_presentation',
<a name="l566"><span class="linenum"> 566</span></a>          <span class="comment">/*PORTFOLIO_FORMAT_MBKP, */</span> // later
<a name="l567"><span class="linenum"> 567</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_LEAP2A')" href="../_constants/PORTFOLIO_FORMAT_LEAP2A.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_LEAP2A')">PORTFOLIO_FORMAT_LEAP2A</a>       =&gt; 'portfolio_format_leap2a',
<a name="l568"><span class="linenum"> 568</span></a>          <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_RICH')" href="../_constants/PORTFOLIO_FORMAT_RICH.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_RICH')">PORTFOLIO_FORMAT_RICH</a>         =&gt; 'portfolio_format_rich',
<a name="l569"><span class="linenum"> 569</span></a>      );
<a name="l570"><span class="linenum"> 570</span></a>  }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">/**</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment"> * Deduce export format from file mimetype</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment"> * This function returns the revelant portfolio export format</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment"> * which is used to determine which portfolio plugins can be used</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment"> * for exporting this content</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment"> * according to the given mime type</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment"> * this only works when exporting exactly &lt;b&gt;one&lt;/b&gt; file, or generating a new one</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment"> * (like a pdf or csv export)</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment"> *</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment"> * @param string $mimetype (usually $file-&gt;get_mimetype())</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment"> * @return string the format constant (see PORTFOLIO_FORMAT_XXX constants)</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment"> */</span>
<a name="l584"><span class="linenum"> 584</span></a>  function <a class="function" onClick="logFunction('portfolio_format_from_mimetype')" href="../_functions/portfolio_format_from_mimetype.html" onMouseOver="funcPopup(event,'portfolio_format_from_mimetype')">portfolio_format_from_mimetype</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>) {
<a name="l585"><span class="linenum"> 585</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l586"><span class="linenum"> 586</span></a>      static <a class="var it27487" onMouseOver="hilite(27487)" onMouseOut="lolite()" onClick="logVariable('alreadymatched')" href="../_variables/alreadymatched.html">$alreadymatched</a>;
<a name="l587"><span class="linenum"> 587</span></a>      if (empty(<a class="var it27487" onMouseOver="hilite(27487)" onMouseOut="lolite()" onClick="logVariable('alreadymatched')" href="../_variables/alreadymatched.html">$alreadymatched</a>)) {
<a name="l588"><span class="linenum"> 588</span></a>          <a class="var it27487" onMouseOver="hilite(27487)" onMouseOut="lolite()" onClick="logVariable('alreadymatched')" href="../_variables/alreadymatched.html">$alreadymatched</a> = array();
<a name="l589"><span class="linenum"> 589</span></a>      }
<a name="l590"><span class="linenum"> 590</span></a>      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>, <a class="var it27487" onMouseOver="hilite(27487)" onMouseOut="lolite()" onClick="logVariable('alreadymatched')" href="../_variables/alreadymatched.html">$alreadymatched</a>)) {
<a name="l591"><span class="linenum"> 591</span></a>          return <a class="var it27487" onMouseOver="hilite(27487)" onMouseOut="lolite()" onClick="logVariable('alreadymatched')" href="../_variables/alreadymatched.html">$alreadymatched</a>[<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>];
<a name="l592"><span class="linenum"> 592</span></a>      }
<a name="l593"><span class="linenum"> 593</span></a>      <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats')" href="../_functions/portfolio_supported_formats.html" onMouseOver="funcPopup(event,'portfolio_supported_formats')">portfolio_supported_formats</a>();
<a name="l594"><span class="linenum"> 594</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/formats.php');
<a name="l595"><span class="linenum"> 595</span></a>      foreach (<a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> =&gt; <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>) {
<a name="l596"><span class="linenum"> 596</span></a>          <a class="var it27489" onMouseOver="hilite(27489)" onMouseOut="lolite()" onClick="logVariable('supportedmimetypes')" href="../_variables/supportedmimetypes.html">$supportedmimetypes</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>, 'mimetypes'));
<a name="l597"><span class="linenum"> 597</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it27489" onMouseOver="hilite(27489)" onMouseOut="lolite()" onClick="logVariable('supportedmimetypes')" href="../_variables/supportedmimetypes.html">$supportedmimetypes</a>)) {
<a name="l598"><span class="linenum"> 598</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;one of the portfolio format classes, <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>, said it supported something funny for mimetypes, should have been array...&quot;);
<a name="l599"><span class="linenum"> 599</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="phpfunction" onClick="logFunction('print_r')" href="../_functions/print_r.html" onMouseOver="phpfuncPopup(event,'print_r')">print_r</a>(<a class="var it27489" onMouseOver="hilite(27489)" onMouseOut="lolite()" onClick="logVariable('supportedmimetypes')" href="../_variables/supportedmimetypes.html">$supportedmimetypes</a>, true));
<a name="l600"><span class="linenum"> 600</span></a>              continue;
<a name="l601"><span class="linenum"> 601</span></a>          }
<a name="l602"><span class="linenum"> 602</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>, <a class="var it27489" onMouseOver="hilite(27489)" onMouseOut="lolite()" onClick="logVariable('supportedmimetypes')" href="../_variables/supportedmimetypes.html">$supportedmimetypes</a>)) {
<a name="l603"><span class="linenum"> 603</span></a>              <a class="var it27487" onMouseOver="hilite(27487)" onMouseOut="lolite()" onClick="logVariable('alreadymatched')" href="../_variables/alreadymatched.html">$alreadymatched</a>[<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>] = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l604"><span class="linenum"> 604</span></a>              return <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l605"><span class="linenum"> 605</span></a>          }
<a name="l606"><span class="linenum"> 606</span></a>      }
<a name="l607"><span class="linenum"> 607</span></a>      return <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_FILE')" href="../_constants/PORTFOLIO_FORMAT_FILE.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_FILE')">PORTFOLIO_FORMAT_FILE</a>; <span class="comment">// base case for files...</span>
<a name="l608"><span class="linenum"> 608</span></a>  }
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">/**</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment"> * Intersection of plugin formats and caller formats.</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment"> * Walks both the caller formats and portfolio plugin formats</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment"> * and looks for matches (walking the hierarchy as well)</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment"> * and returns the intersection</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment"> *</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment"> * @param array $callerformats formats the caller supports</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment"> * @param array $pluginformats formats the portfolio plugin supports</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment"> * @return array</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment"> */</span>
<a name="l620"><span class="linenum"> 620</span></a>  function <a class="function" onClick="logFunction('portfolio_supported_formats_intersect')" href="../_functions/portfolio_supported_formats_intersect.html" onMouseOver="funcPopup(event,'portfolio_supported_formats_intersect')">portfolio_supported_formats_intersect</a>(<a class="var it10643" onMouseOver="hilite(10643)" onMouseOut="lolite()" onClick="logVariable('callerformats')" href="../_variables/callerformats.html">$callerformats</a>, <a class="var it12580" onMouseOver="hilite(12580)" onMouseOut="lolite()" onClick="logVariable('pluginformats')" href="../_variables/pluginformats.html">$pluginformats</a>) {
<a name="l621"><span class="linenum"> 621</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l622"><span class="linenum"> 622</span></a>      <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats')" href="../_functions/portfolio_supported_formats.html" onMouseOver="funcPopup(event,'portfolio_supported_formats')">portfolio_supported_formats</a>();
<a name="l623"><span class="linenum"> 623</span></a>      <a class="var it27490" onMouseOver="hilite(27490)" onMouseOut="lolite()" onClick="logVariable('intersection')" href="../_variables/intersection.html">$intersection</a> = array();
<a name="l624"><span class="linenum"> 624</span></a>      foreach (<a class="var it10643" onMouseOver="hilite(10643)" onMouseOut="lolite()" onClick="logVariable('callerformats')" href="../_variables/callerformats.html">$callerformats</a> as <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>) {
<a name="l625"><span class="linenum"> 625</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>, <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>)) {
<a name="l626"><span class="linenum"> 626</span></a>              if (!<a class="function" onClick="logFunction('portfolio_format_is_abstract')" href="../_functions/portfolio_format_is_abstract.html" onMouseOver="funcPopup(event,'portfolio_format_is_abstract')">portfolio_format_is_abstract</a>(<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>)) {
<a name="l627"><span class="linenum"> 627</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidformat', 'portfolio', <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>));
<a name="l628"><span class="linenum"> 628</span></a>              }
<a name="l629"><span class="linenum"> 629</span></a>              continue;
<a name="l630"><span class="linenum"> 630</span></a>          }
<a name="l631"><span class="linenum"> 631</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/formats.php');
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it27491" onMouseOver="hilite(27491)" onMouseOut="lolite()" onClick="logVariable('cfobj')" href="../_variables/cfobj.html">$cfobj</a> = new <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>[<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>]();
<a name="l633"><span class="linenum"> 633</span></a>          foreach (<a class="var it12580" onMouseOver="hilite(12580)" onMouseOut="lolite()" onClick="logVariable('pluginformats')" href="../_variables/pluginformats.html">$pluginformats</a> as <a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a> =&gt; <a class="var it16885" onMouseOver="hilite(16885)" onMouseOut="lolite()" onClick="logVariable('pf')" href="../_variables/pf.html">$pf</a>) {
<a name="l634"><span class="linenum"> 634</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it16885" onMouseOver="hilite(16885)" onMouseOut="lolite()" onClick="logVariable('pf')" href="../_variables/pf.html">$pf</a>, <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>)) {
<a name="l635"><span class="linenum"> 635</span></a>                  if (!<a class="function" onClick="logFunction('portfolio_format_is_abstract')" href="../_functions/portfolio_format_is_abstract.html" onMouseOver="funcPopup(event,'portfolio_format_is_abstract')">portfolio_format_is_abstract</a>(<a class="var it16885" onMouseOver="hilite(16885)" onMouseOut="lolite()" onClick="logVariable('pf')" href="../_variables/pf.html">$pf</a>)) {
<a name="l636"><span class="linenum"> 636</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidformat', 'portfolio', <a class="var it16885" onMouseOver="hilite(16885)" onMouseOut="lolite()" onClick="logVariable('pf')" href="../_variables/pf.html">$pf</a>));
<a name="l637"><span class="linenum"> 637</span></a>                  }
<a name="l638"><span class="linenum"> 638</span></a>                  unset(<a class="var it12580" onMouseOver="hilite(12580)" onMouseOut="lolite()" onClick="logVariable('pluginformats')" href="../_variables/pluginformats.html">$pluginformats</a>[<a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>]); <span class="comment">// to avoid the same warning over and over</span>
<a name="l639"><span class="linenum"> 639</span></a>                  continue;
<a name="l640"><span class="linenum"> 640</span></a>              }
<a name="l641"><span class="linenum"> 641</span></a>              if (<a class="var it27491" onMouseOver="hilite(27491)" onMouseOut="lolite()" onClick="logVariable('cfobj')" href="../_variables/cfobj.html">$cfobj</a> instanceof <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>[<a class="var it16885" onMouseOver="hilite(16885)" onMouseOut="lolite()" onClick="logVariable('pf')" href="../_variables/pf.html">$pf</a>]) {
<a name="l642"><span class="linenum"> 642</span></a>                  <a class="var it27490" onMouseOver="hilite(27490)" onMouseOut="lolite()" onClick="logVariable('intersection')" href="../_variables/intersection.html">$intersection</a>[] = <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>;
<a name="l643"><span class="linenum"> 643</span></a>              }
<a name="l644"><span class="linenum"> 644</span></a>          }
<a name="l645"><span class="linenum"> 645</span></a>      }
<a name="l646"><span class="linenum"> 646</span></a>      return <a class="var it27490" onMouseOver="hilite(27490)" onMouseOut="lolite()" onClick="logVariable('intersection')" href="../_variables/intersection.html">$intersection</a>;
<a name="l647"><span class="linenum"> 647</span></a>  }
<a name="l648"><span class="linenum"> 648</span></a>  
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">/**</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment"> * Tiny helper to figure out whether a portfolio format is abstract</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment"> *</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment"> * @param string $format the format to test</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment"> * @return bool</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment"> */</span>
<a name="l655"><span class="linenum"> 655</span></a>  function <a class="function" onClick="logFunction('portfolio_format_is_abstract')" href="../_functions/portfolio_format_is_abstract.html" onMouseOver="funcPopup(event,'portfolio_format_is_abstract')">portfolio_format_is_abstract</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l656"><span class="linenum"> 656</span></a>      if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>)) {
<a name="l657"><span class="linenum"> 657</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l658"><span class="linenum"> 658</span></a>      } else if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>('portfolio_format_' . <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>)) {
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'portfolio_format_' . <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l660"><span class="linenum"> 660</span></a>      } else {
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats')" href="../_functions/portfolio_supported_formats.html" onMouseOver="funcPopup(event,'portfolio_supported_formats')">portfolio_supported_formats</a>();
<a name="l662"><span class="linenum"> 662</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>)) {
<a name="l663"><span class="linenum"> 663</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>[<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>];
<a name="l664"><span class="linenum"> 664</span></a>          }
<a name="l665"><span class="linenum"> 665</span></a>      }
<a name="l666"><span class="linenum"> 666</span></a>      if (empty(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>)) {
<a name="l667"><span class="linenum"> 667</span></a>          return true; <span class="comment">// it may as well be, we can't instantiate it :)</span>
<a name="l668"><span class="linenum"> 668</span></a>      }
<a name="l669"><span class="linenum"> 669</span></a>      <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a> = new ReflectionClass(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>);
<a name="l670"><span class="linenum"> 670</span></a>      return <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('rc')" href="../_variables/rc.html">$rc</a>-&gt;isAbstract();
<a name="l671"><span class="linenum"> 671</span></a>  }
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">/**</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment"> * Return the combination of the two arrays of formats with duplicates in terms of specificity removed</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment"> * and also removes conflicting formats.</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment"> * Use case: a module is exporting a single file, so the general formats would be FILE and MBKP</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment"> *           while the specific formats would be the specific subclass of FILE based on mime (say IMAGE)</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment"> *           and this function would return IMAGE and MBKP</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment"> *</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * @param array $specificformats array of more specific formats (eg based on mime detection)</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * @param array $generalformats  array of more general formats (usually more supported)</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> * @return array merged formats with dups removed</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> */</span>
<a name="l684"><span class="linenum"> 684</span></a>  function <a class="function" onClick="logFunction('portfolio_most_specific_formats')" href="../_functions/portfolio_most_specific_formats.html" onMouseOver="funcPopup(event,'portfolio_most_specific_formats')">portfolio_most_specific_formats</a>(<a class="var it27492" onMouseOver="hilite(27492)" onMouseOut="lolite()" onClick="logVariable('specificformats')" href="../_variables/specificformats.html">$specificformats</a>, <a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>) {
<a name="l685"><span class="linenum"> 685</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l686"><span class="linenum"> 686</span></a>      <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats')" href="../_functions/portfolio_supported_formats.html" onMouseOver="funcPopup(event,'portfolio_supported_formats')">portfolio_supported_formats</a>();
<a name="l687"><span class="linenum"> 687</span></a>      if (empty(<a class="var it27492" onMouseOver="hilite(27492)" onMouseOut="lolite()" onClick="logVariable('specificformats')" href="../_variables/specificformats.html">$specificformats</a>)) {
<a name="l688"><span class="linenum"> 688</span></a>          return <a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>;
<a name="l689"><span class="linenum"> 689</span></a>      } else if (empty(<a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>)) {
<a name="l690"><span class="linenum"> 690</span></a>          return <a class="var it27492" onMouseOver="hilite(27492)" onMouseOut="lolite()" onClick="logVariable('specificformats')" href="../_variables/specificformats.html">$specificformats</a>;
<a name="l691"><span class="linenum"> 691</span></a>      }
<a name="l692"><span class="linenum"> 692</span></a>      <a class="var it27494" onMouseOver="hilite(27494)" onMouseOut="lolite()" onClick="logVariable('removedformats')" href="../_variables/removedformats.html">$removedformats</a> = array();
<a name="l693"><span class="linenum"> 693</span></a>      foreach (<a class="var it27492" onMouseOver="hilite(27492)" onMouseOut="lolite()" onClick="logVariable('specificformats')" href="../_variables/specificformats.html">$specificformats</a> as <a class="var it68" onMouseOver="hilite(68)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a> =&gt; <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">        // look for something less specific and remove it, ie outside of the inheritance tree of the current formats.</span>
<a name="l695"><span class="linenum"> 695</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>, <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>)) {
<a name="l696"><span class="linenum"> 696</span></a>              if (!<a class="function" onClick="logFunction('portfolio_format_is_abstract')" href="../_functions/portfolio_format_is_abstract.html" onMouseOver="funcPopup(event,'portfolio_format_is_abstract')">portfolio_format_is_abstract</a>(<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>)) {
<a name="l697"><span class="linenum"> 697</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('invalidformat', 'portfolio', <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>);
<a name="l698"><span class="linenum"> 698</span></a>              }
<a name="l699"><span class="linenum"> 699</span></a>          }
<a name="l700"><span class="linenum"> 700</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>, <a class="var it27494" onMouseOver="hilite(27494)" onMouseOut="lolite()" onClick="logVariable('removedformats')" href="../_variables/removedformats.html">$removedformats</a>)) {
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">            // already been removed from the general list</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">            //debugging(&quot;skipping $f because it was already removed&quot;);</span>
<a name="l703"><span class="linenum"> 703</span></a>              unset(<a class="var it27492" onMouseOver="hilite(27492)" onMouseOut="lolite()" onClick="logVariable('specificformats')" href="../_variables/specificformats.html">$specificformats</a>[<a class="var it68" onMouseOver="hilite(68)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>]);
<a name="l704"><span class="linenum"> 704</span></a>          }
<a name="l705"><span class="linenum"> 705</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/formats.php');
<a name="l706"><span class="linenum"> 706</span></a>          <a class="var it27495" onMouseOver="hilite(27495)" onMouseOut="lolite()" onClick="logVariable('fobj')" href="../_variables/fobj.html">$fobj</a> = new <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>[<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>];
<a name="l707"><span class="linenum"> 707</span></a>          foreach (<a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>) {
<a name="l708"><span class="linenum"> 708</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>, <a class="var it27494" onMouseOver="hilite(27494)" onMouseOut="lolite()" onClick="logVariable('removedformats')" href="../_variables/removedformats.html">$removedformats</a>)) {
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">                //debugging(&quot;skipping $cf because it was already removed&quot;);</span>
<a name="l710"><span class="linenum"> 710</span></a>                  continue;
<a name="l711"><span class="linenum"> 711</span></a>              }
<a name="l712"><span class="linenum"> 712</span></a>              <a class="var it27496" onMouseOver="hilite(27496)" onMouseOut="lolite()" onClick="logVariable('cfclass')" href="../_variables/cfclass.html">$cfclass</a> = <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>[<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>];
<a name="l713"><span class="linenum"> 713</span></a>              <a class="var it27491" onMouseOver="hilite(27491)" onMouseOut="lolite()" onClick="logVariable('cfobj')" href="../_variables/cfobj.html">$cfobj</a> = new <a class="var it27488" onMouseOver="hilite(27488)" onMouseOut="lolite()" onClick="logVariable('allformats')" href="../_variables/allformats.html">$allformats</a>[<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>];
<a name="l714"><span class="linenum"> 714</span></a>              if (<a class="var it27495" onMouseOver="hilite(27495)" onMouseOut="lolite()" onClick="logVariable('fobj')" href="../_variables/fobj.html">$fobj</a> instanceof <a class="var it27496" onMouseOver="hilite(27496)" onMouseOut="lolite()" onClick="logVariable('cfclass')" href="../_variables/cfclass.html">$cfclass</a> &amp;&amp; <a class="var it27496" onMouseOver="hilite(27496)" onMouseOut="lolite()" onClick="logVariable('cfclass')" href="../_variables/cfclass.html">$cfclass</a> != <a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it27495" onMouseOver="hilite(27495)" onMouseOut="lolite()" onClick="logVariable('fobj')" href="../_variables/fobj.html">$fobj</a>)) {
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">                //debugging(&quot;unsetting $key $cf because it's not specific enough ($f is better)&quot;);</span>
<a name="l716"><span class="linenum"> 716</span></a>                  unset(<a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l717"><span class="linenum"> 717</span></a>                  <a class="var it27494" onMouseOver="hilite(27494)" onMouseOut="lolite()" onClick="logVariable('removedformats')" href="../_variables/removedformats.html">$removedformats</a>[] = <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>;
<a name="l718"><span class="linenum"> 718</span></a>                  continue;
<a name="l719"><span class="linenum"> 719</span></a>              }
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">            // check for conflicts</span>
<a name="l721"><span class="linenum"> 721</span></a>              if (<a class="var it27495" onMouseOver="hilite(27495)" onMouseOut="lolite()" onClick="logVariable('fobj')" href="../_variables/fobj.html">$fobj</a>-&gt;<a class="function" onClick="logFunction('conflicts')" href="../_functions/conflicts.html" onMouseOver="funcPopup(event,'conflicts')">conflicts</a>(<a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>)) {
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">                //debugging(&quot;unsetting $key $cf because it conflicts with $f&quot;);</span>
<a name="l723"><span class="linenum"> 723</span></a>                  unset(<a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l724"><span class="linenum"> 724</span></a>                  <a class="var it27494" onMouseOver="hilite(27494)" onMouseOut="lolite()" onClick="logVariable('removedformats')" href="../_variables/removedformats.html">$removedformats</a>[] = <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>;
<a name="l725"><span class="linenum"> 725</span></a>                  continue;
<a name="l726"><span class="linenum"> 726</span></a>              }
<a name="l727"><span class="linenum"> 727</span></a>              if (<a class="var it27491" onMouseOver="hilite(27491)" onMouseOut="lolite()" onClick="logVariable('cfobj')" href="../_variables/cfobj.html">$cfobj</a>-&gt;<a class="function" onClick="logFunction('conflicts')" href="../_functions/conflicts.html" onMouseOver="funcPopup(event,'conflicts')">conflicts</a>(<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>)) {
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">                //debugging(&quot;unsetting $key $cf because it reverse-conflicts with $f&quot;);</span>
<a name="l729"><span class="linenum"> 729</span></a>                  <a class="var it27494" onMouseOver="hilite(27494)" onMouseOut="lolite()" onClick="logVariable('removedformats')" href="../_variables/removedformats.html">$removedformats</a>[] = <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('cf')" href="../_variables/cf.html">$cf</a>;
<a name="l730"><span class="linenum"> 730</span></a>                  unset(<a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l731"><span class="linenum"> 731</span></a>                  continue;
<a name="l732"><span class="linenum"> 732</span></a>              }
<a name="l733"><span class="linenum"> 733</span></a>          }
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">        //debugging('inside loop');</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">        //print_object($generalformats);</span>
<a name="l736"><span class="linenum"> 736</span></a>      }
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">    //debugging('final formats');</span>
<a name="l739"><span class="linenum"> 739</span></a>      <a class="var it27497" onMouseOver="hilite(27497)" onMouseOut="lolite()" onClick="logVariable('finalformats')" href="../_variables/finalformats.html">$finalformats</a> =  <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it27492" onMouseOver="hilite(27492)" onMouseOut="lolite()" onClick="logVariable('specificformats')" href="../_variables/specificformats.html">$specificformats</a>), <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it27493" onMouseOver="hilite(27493)" onMouseOut="lolite()" onClick="logVariable('generalformats')" href="../_variables/generalformats.html">$generalformats</a>)));
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">    //print_object($finalformats);</span>
<a name="l741"><span class="linenum"> 741</span></a>      return <a class="var it27497" onMouseOver="hilite(27497)" onMouseOut="lolite()" onClick="logVariable('finalformats')" href="../_variables/finalformats.html">$finalformats</a>;
<a name="l742"><span class="linenum"> 742</span></a>  }
<a name="l743"><span class="linenum"> 743</span></a>  
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">/**</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment"> * Helper function to return a format object from the constant</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> *</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> * @param string $name the constant PORTFOLIO_FORMAT_XXX</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment"> * @return portfolio_format</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment"> */</span>
<a name="l750"><span class="linenum"> 750</span></a>  function <a class="function" onClick="logFunction('portfolio_format_object')" href="../_functions/portfolio_format_object.html" onMouseOver="funcPopup(event,'portfolio_format_object')">portfolio_format_object</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l751"><span class="linenum"> 751</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l752"><span class="linenum"> 752</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/formats.php');
<a name="l753"><span class="linenum"> 753</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = <a class="function" onClick="logFunction('portfolio_supported_formats')" href="../_functions/portfolio_supported_formats.html" onMouseOver="funcPopup(event,'portfolio_supported_formats')">portfolio_supported_formats</a>();
<a name="l754"><span class="linenum"> 754</span></a>      return new <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>];
<a name="l755"><span class="linenum"> 755</span></a>  }
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">/**</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment"> * Helper function to return an instance of a plugin (with config loaded)</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment"> *</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment"> * @param int   $instanceid id of instance</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment"> * @param object $record database row that corresponds to this instance</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment"> *                       this is passed to avoid unnecessary lookups</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment"> *                       Optional, and the record will be retrieved if null.</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment"> * @return object of portfolio_plugin_XXX</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment"> */</span>
<a name="l766"><span class="linenum"> 766</span></a>  function <a class="function" onClick="logFunction('portfolio_instance')" href="../_functions/portfolio_instance.html" onMouseOver="funcPopup(event,'portfolio_instance')">portfolio_instance</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>=null) {
<a name="l767"><span class="linenum"> 767</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>      if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>  = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>;
<a name="l771"><span class="linenum"> 771</span></a>      } else {
<a name="l772"><span class="linenum"> 772</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('portfolio_instance', array('id' =&gt; <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>))) {
<a name="l773"><span class="linenum"> 773</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_exception')" href="../_classes/portfolio_exception.html" onMouseOver="classPopup(event,'portfolio_exception')">portfolio_exception</a>('invalidinstance', 'portfolio');
<a name="l774"><span class="linenum"> 774</span></a>          }
<a name="l775"><span class="linenum"> 775</span></a>      }
<a name="l776"><span class="linenum"> 776</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/plugin.php');
<a name="l777"><span class="linenum"> 777</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/portfolio/'. <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('plugin')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a> . '/lib.php');
<a name="l778"><span class="linenum"> 778</span></a>      <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'portfolio_plugin_' . <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('plugin')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>;
<a name="l779"><span class="linenum"> 779</span></a>      return new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>);
<a name="l780"><span class="linenum"> 780</span></a>  }
<a name="l781"><span class="linenum"> 781</span></a>  
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">/**</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment"> * Helper function to call a static function on a portfolio plugin class.</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment"> * This will figure out the classname and require the right file and call the function.</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment"> * You can send a variable number of arguments to this function after the first two</span>
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment"> * and they will be passed on to the function you wish to call.</span>
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment"> *</span>
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment"> * @param string $plugin   name of plugin</span>
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment"> * @param string $function function to call</span>
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment"> * @return mixed</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment"> */</span>
<a name="l792"><span class="linenum"> 792</span></a>  function <a class="function" onClick="logFunction('portfolio_static_function')" href="../_functions/portfolio_static_function.html" onMouseOver="funcPopup(event,'portfolio_static_function')">portfolio_static_function</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l793"><span class="linenum"> 793</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>      <a class="var it4660" onMouseOver="hilite(4660)" onMouseOut="lolite()" onClick="logVariable('pname')" href="../_variables/pname.html">$pname</a> = null;
<a name="l796"><span class="linenum"> 796</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) || <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>)) {
<a name="l797"><span class="linenum"> 797</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = (object)<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l798"><span class="linenum"> 798</span></a>          <a class="var it4660" onMouseOver="hilite(4660)" onMouseOut="lolite()" onClick="logVariable('pname')" href="../_variables/pname.html">$pname</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('name')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l799"><span class="linenum"> 799</span></a>      } else {
<a name="l800"><span class="linenum"> 800</span></a>          <a class="var it4660" onMouseOver="hilite(4660)" onMouseOut="lolite()" onClick="logVariable('pname')" href="../_variables/pname.html">$pname</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l801"><span class="linenum"> 801</span></a>      }
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>      <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l804"><span class="linenum"> 804</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>) &lt;= 2) {
<a name="l805"><span class="linenum"> 805</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a> = array();
<a name="l806"><span class="linenum"> 806</span></a>      }
<a name="l807"><span class="linenum"> 807</span></a>      else {
<a name="l808"><span class="linenum"> 808</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l809"><span class="linenum"> 809</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l810"><span class="linenum"> 810</span></a>      }
<a name="l811"><span class="linenum"> 811</span></a>  
<a name="l812"><span class="linenum"> 812</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/plugin.php');
<a name="l813"><span class="linenum"> 813</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/portfolio/' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> .  '/lib.php');
<a name="l814"><span class="linenum"> 814</span></a>      return <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>(array('portfolio_plugin_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>), <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l815"><span class="linenum"> 815</span></a>  }
<a name="l816"><span class="linenum"> 816</span></a>  
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment">/**</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment"> * Helper function to check all the plugins for sanity and set any insane ones to invisible.</span>
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment"> *</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment"> * @param array $plugins array of supported plugin types</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment"> * @return array array of insane instances (keys= id, values = reasons (keys for plugin lang)</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment"> */</span>
<a name="l823"><span class="linenum"> 823</span></a>  function <a class="function" onClick="logFunction('portfolio_plugin_sanity_check')" href="../_functions/portfolio_plugin_sanity_check.html" onMouseOver="funcPopup(event,'portfolio_plugin_sanity_check')">portfolio_plugin_sanity_check</a>(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>=null) {
<a name="l824"><span class="linenum"> 824</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l825"><span class="linenum"> 825</span></a>      if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>)) {
<a name="l826"><span class="linenum"> 826</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> = array(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>);
<a name="l827"><span class="linenum"> 827</span></a>      } else if (empty(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>)) {
<a name="l828"><span class="linenum"> 828</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('portfolio');
<a name="l829"><span class="linenum"> 829</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>);
<a name="l830"><span class="linenum"> 830</span></a>      }
<a name="l831"><span class="linenum"> 831</span></a>  
<a name="l832"><span class="linenum"> 832</span></a>      <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a> = array();
<a name="l833"><span class="linenum"> 833</span></a>      foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) {
<a name="l834"><span class="linenum"> 834</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('portfolio_static_function')" href="../_functions/portfolio_static_function.html" onMouseOver="funcPopup(event,'portfolio_static_function')">portfolio_static_function</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'plugin_sanity_check')) {
<a name="l835"><span class="linenum"> 835</span></a>              <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>[<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>] = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>      }
<a name="l838"><span class="linenum"> 838</span></a>      if (empty(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>)) {
<a name="l839"><span class="linenum"> 839</span></a>          return array();
<a name="l840"><span class="linenum"> 840</span></a>      }
<a name="l841"><span class="linenum"> 841</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>));
<a name="l842"><span class="linenum"> 842</span></a>      <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = ' plugin ' . <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>;
<a name="l843"><span class="linenum"> 843</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field_select')" href="../_functions/set_field_select.html" onMouseOver="funcPopup(event,'set_field_select')">set_field_select</a>('portfolio_instance', 'visible', 0, <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l844"><span class="linenum"> 844</span></a>      return <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>;
<a name="l845"><span class="linenum"> 845</span></a>  }
<a name="l846"><span class="linenum"> 846</span></a>  
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">/**</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment"> * Helper function to check all the instances for sanity and set any insane ones to invisible.</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> *</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment"> * @param array $instances array of plugin instances</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment"> * @return array array of insane instances (keys= id, values = reasons (keys for plugin lang)</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment"> */</span>
<a name="l853"><span class="linenum"> 853</span></a>  function <a class="function" onClick="logFunction('portfolio_instance_sanity_check')" href="../_functions/portfolio_instance_sanity_check.html" onMouseOver="funcPopup(event,'portfolio_instance_sanity_check')">portfolio_instance_sanity_check</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>=null) {
<a name="l854"><span class="linenum"> 854</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l855"><span class="linenum"> 855</span></a>      if (empty(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>)) {
<a name="l856"><span class="linenum"> 856</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="function" onClick="logFunction('portfolio_instances')" href="../_functions/portfolio_instances.html" onMouseOver="funcPopup(event,'portfolio_instances')">portfolio_instances</a>(false);
<a name="l857"><span class="linenum"> 857</span></a>      } else if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>)) {
<a name="l858"><span class="linenum"> 858</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = array(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>);
<a name="l859"><span class="linenum"> 859</span></a>      }
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>      <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a> = array();
<a name="l862"><span class="linenum"> 862</span></a>      foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l863"><span class="linenum"> 863</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) &amp;&amp; !(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> instanceof portfolio_plugin_base)) {
<a name="l864"><span class="linenum"> 864</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="function" onClick="logFunction('portfolio_instance')" href="../_functions/portfolio_instance.html" onMouseOver="funcPopup(event,'portfolio_instance')">portfolio_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>);
<a name="l865"><span class="linenum"> 865</span></a>          } else if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>)) {
<a name="l866"><span class="linenum"> 866</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="function" onClick="logFunction('portfolio_instance')" href="../_functions/portfolio_instance.html" onMouseOver="funcPopup(event,'portfolio_instance')">portfolio_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>);
<a name="l867"><span class="linenum"> 867</span></a>          }
<a name="l868"><span class="linenum"> 868</span></a>          if (!(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> instanceof portfolio_plugin_base)) {
<a name="l869"><span class="linenum"> 869</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('something weird passed to portfolio_instance_sanity_check, not subclass or id');
<a name="l870"><span class="linenum"> 870</span></a>              continue;
<a name="l871"><span class="linenum"> 871</span></a>          }
<a name="l872"><span class="linenum"> 872</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('instance_sanity_check')" href="../_functions/instance_sanity_check.html" onMouseOver="funcPopup(event,'instance_sanity_check')">instance_sanity_check</a>()) {
<a name="l873"><span class="linenum"> 873</span></a>              <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>[<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')] = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l874"><span class="linenum"> 874</span></a>          }
<a name="l875"><span class="linenum"> 875</span></a>      }
<a name="l876"><span class="linenum"> 876</span></a>      if (empty(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>)) {
<a name="l877"><span class="linenum"> 877</span></a>          return array();
<a name="l878"><span class="linenum"> 878</span></a>      }
<a name="l879"><span class="linenum"> 879</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a> (<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>));
<a name="l880"><span class="linenum"> 880</span></a>      <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = ' id ' . <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>;
<a name="l881"><span class="linenum"> 881</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field_select')" href="../_functions/set_field_select.html" onMouseOver="funcPopup(event,'set_field_select')">set_field_select</a>('portfolio_instance', 'visible', 0, <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l882"><span class="linenum"> 882</span></a>      <a class="function" onClick="logFunction('portfolio_insane_notify_admins')" href="../_functions/portfolio_insane_notify_admins.html" onMouseOver="funcPopup(event,'portfolio_insane_notify_admins')">portfolio_insane_notify_admins</a>(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>, true);
<a name="l883"><span class="linenum"> 883</span></a>      return <a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>;
<a name="l884"><span class="linenum"> 884</span></a>  }
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">/**</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment"> * Helper function to display a table of plugins (or instances) and reasons for disabling</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment"> *</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment"> * @param array $insane array of portfolio plugin</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment"> * @param array $instances if reporting instances rather than whole plugins, pass the array (key = id, value = object) here</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment"> * @param bool $return option to deliver the report in html format or print it out directly to the page.</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> * @return void|string of portfolio report in html table format</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> */</span>
<a name="l894"><span class="linenum"> 894</span></a>  function <a class="function" onClick="logFunction('portfolio_report_insane')" href="../_functions/portfolio_report_insane.html" onMouseOver="funcPopup(event,'portfolio_report_insane')">portfolio_report_insane</a>(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>, <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>=false, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=false) {
<a name="l895"><span class="linenum"> 895</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l896"><span class="linenum"> 896</span></a>      if (empty(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>)) {
<a name="l897"><span class="linenum"> 897</span></a>          return;
<a name="l898"><span class="linenum"> 898</span></a>      }
<a name="l899"><span class="linenum"> 899</span></a>  
<a name="l900"><span class="linenum"> 900</span></a>      static <a class="var it21408" onMouseOver="hilite(21408)" onMouseOut="lolite()" onClick="logVariable('pluginstr')" href="../_variables/pluginstr.html">$pluginstr</a>;
<a name="l901"><span class="linenum"> 901</span></a>      if (empty(<a class="var it21408" onMouseOver="hilite(21408)" onMouseOut="lolite()" onClick="logVariable('pluginstr')" href="../_variables/pluginstr.html">$pluginstr</a>)) {
<a name="l902"><span class="linenum"> 902</span></a>          <a class="var it21408" onMouseOver="hilite(21408)" onMouseOut="lolite()" onClick="logVariable('pluginstr')" href="../_variables/pluginstr.html">$pluginstr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('plugin', 'portfolio');
<a name="l903"><span class="linenum"> 903</span></a>      }
<a name="l904"><span class="linenum"> 904</span></a>      if (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>) {
<a name="l905"><span class="linenum"> 905</span></a>          <a class="var it24285" onMouseOver="hilite(24285)" onMouseOut="lolite()" onClick="logVariable('headerstr')" href="../_variables/headerstr.html">$headerstr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('someinstancesdisabled', 'portfolio');
<a name="l906"><span class="linenum"> 906</span></a>      } else {
<a name="l907"><span class="linenum"> 907</span></a>          <a class="var it24285" onMouseOver="hilite(24285)" onMouseOut="lolite()" onClick="logVariable('headerstr')" href="../_variables/headerstr.html">$headerstr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('somepluginsdisabled', 'portfolio');
<a name="l908"><span class="linenum"> 908</span></a>      }
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it24285" onMouseOver="hilite(24285)" onMouseOut="lolite()" onClick="logVariable('headerstr')" href="../_variables/headerstr.html">$headerstr</a>, 'notifyproblem');
<a name="l911"><span class="linenum"> 911</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l912"><span class="linenum"> 912</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a> = array(<a class="var it21408" onMouseOver="hilite(21408)" onMouseOut="lolite()" onClick="logVariable('pluginstr')" href="../_variables/pluginstr.html">$pluginstr</a>, '');
<a name="l913"><span class="linenum"> 913</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a> = array();
<a name="l914"><span class="linenum"> 914</span></a>      foreach (<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> =&gt; <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('reason')" href="../_variables/reason.html">$reason</a>) {
<a name="l915"><span class="linenum"> 915</span></a>          if (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>) {
<a name="l916"><span class="linenum"> 916</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>[<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>];
<a name="l917"><span class="linenum"> 917</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>   = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('plugin');
<a name="l918"><span class="linenum"> 918</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>     = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('name');
<a name="l919"><span class="linenum"> 919</span></a>          } else {
<a name="l920"><span class="linenum"> 920</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l921"><span class="linenum"> 921</span></a>          }
<a name="l922"><span class="linenum"> 922</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a>[] = array(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('reason')" href="../_variables/reason.html">$reason</a>, 'portfolio_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>));
<a name="l923"><span class="linenum"> 923</span></a>      }
<a name="l924"><span class="linenum"> 924</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l925"><span class="linenum"> 925</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;';
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l928"><span class="linenum"> 928</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l929"><span class="linenum"> 929</span></a>      }
<a name="l930"><span class="linenum"> 930</span></a>      echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l931"><span class="linenum"> 931</span></a>  }
<a name="l932"><span class="linenum"> 932</span></a>  
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">/**</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment"> * Main portfolio cronjob.</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment"> * Currently just cleans up expired transfer records.</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment"> */</span>
<a name="l937"><span class="linenum"> 937</span></a>  function <a class="function" onClick="logFunction('portfolio_cron')" href="../_functions/portfolio_cron.html" onMouseOver="funcPopup(event,'portfolio_cron')">portfolio_cron</a>() {
<a name="l938"><span class="linenum"> 938</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l939"><span class="linenum"> 939</span></a>  
<a name="l940"><span class="linenum"> 940</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfolio/exporter.php');
<a name="l941"><span class="linenum"> 941</span></a>      if (<a class="var it27498" onMouseOver="hilite(27498)" onMouseOut="lolite()" onClick="logVariable('expired')" href="../_variables/expired.html">$expired</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('portfolio_tempdata', 'expirytime &lt; ?', array(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()), '', 'id')) {
<a name="l942"><span class="linenum"> 942</span></a>          foreach (<a class="var it27498" onMouseOver="hilite(27498)" onMouseOut="lolite()" onClick="logVariable('expired')" href="../_variables/expired.html">$expired</a> as <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>) {
<a name="l943"><span class="linenum"> 943</span></a>              try {
<a name="l944"><span class="linenum"> 944</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a> = <a class="class" onClick="logClass('portfolio_exporter')" href="../_classes/portfolio_exporter.html" onMouseOver="classPopup(event,'portfolio_exporter')">portfolio_exporter</a>::<a class="function" onClick="logFunction('rewaken_object')" href="../_functions/rewaken_object.html" onMouseOver="funcPopup(event,'rewaken_object')">rewaken_object</a>(<a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>-&gt;<a onClick="logVariable('id')" class="var it43413" onMouseOver="hilite(43413)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l945"><span class="linenum"> 945</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('process_stage_cleanup')" href="../_functions/process_stage_cleanup.html" onMouseOver="funcPopup(event,'process_stage_cleanup')">process_stage_cleanup</a>(true);
<a name="l946"><span class="linenum"> 946</span></a>              } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) {
<a name="l947"><span class="linenum"> 947</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Exception thrown in portfolio cron while cleaning up ' . <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>-&gt;<a onClick="logVariable('id')" class="var it43413" onMouseOver="hilite(43413)" onMouseOut="lolite()" href="../_variables/id.html">id</a> . ': ' . <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l948"><span class="linenum"> 948</span></a>              }
<a name="l949"><span class="linenum"> 949</span></a>          }
<a name="l950"><span class="linenum"> 950</span></a>      }
<a name="l951"><span class="linenum"> 951</span></a>  
<a name="l952"><span class="linenum"> 952</span></a>      <a class="var it4483" onMouseOver="hilite(4483)" onMouseOut="lolite()" onClick="logVariable('process')" href="../_variables/process.html">$process</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('portfolio_tempdata', array('queued' =&gt; 1), 'id ASC', 'id');
<a name="l953"><span class="linenum"> 953</span></a>      foreach (<a class="var it4483" onMouseOver="hilite(4483)" onMouseOut="lolite()" onClick="logVariable('process')" href="../_variables/process.html">$process</a> as <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>) {
<a name="l954"><span class="linenum"> 954</span></a>          try {
<a name="l955"><span class="linenum"> 955</span></a>              <a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a> = <a class="class" onClick="logClass('portfolio_exporter')" href="../_classes/portfolio_exporter.html" onMouseOver="classPopup(event,'portfolio_exporter')">portfolio_exporter</a>::<a class="function" onClick="logFunction('rewaken_object')" href="../_functions/rewaken_object.html" onMouseOver="funcPopup(event,'rewaken_object')">rewaken_object</a>(<a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>-&gt;<a onClick="logVariable('id')" class="var it43413" onMouseOver="hilite(43413)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l956"><span class="linenum"> 956</span></a>              <a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a>-&gt;<a class="function" onClick="logFunction('process_stage_package')" href="../_functions/process_stage_package.html" onMouseOver="funcPopup(event,'process_stage_package')">process_stage_package</a>();
<a name="l957"><span class="linenum"> 957</span></a>              <a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a>-&gt;<a class="function" onClick="logFunction('process_stage_send')" href="../_functions/process_stage_send.html" onMouseOver="funcPopup(event,'process_stage_send')">process_stage_send</a>();
<a name="l958"><span class="linenum"> 958</span></a>              <a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a>-&gt;<a class="function" onClick="logFunction('save')" href="../_functions/save.html" onMouseOver="funcPopup(event,'save')">save</a>();
<a name="l959"><span class="linenum"> 959</span></a>              <a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a>-&gt;<a class="function" onClick="logFunction('process_stage_cleanup')" href="../_functions/process_stage_cleanup.html" onMouseOver="funcPopup(event,'process_stage_cleanup')">process_stage_cleanup</a>();
<a name="l960"><span class="linenum"> 960</span></a>          } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) {
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">            // This will get probably retried in the next cron until it is discarded by the code above.</span>
<a name="l962"><span class="linenum"> 962</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Exception thrown in portfolio cron while processing ' . <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>-&gt;<a onClick="logVariable('id')" class="var it43413" onMouseOver="hilite(43413)" onMouseOut="lolite()" href="../_variables/id.html">id</a> . ': ' . <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l963"><span class="linenum"> 963</span></a>          }
<a name="l964"><span class="linenum"> 964</span></a>      }
<a name="l965"><span class="linenum"> 965</span></a>  }
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">/**</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> * Helper function to rethrow a caught portfolio_exception as an export exception.</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * Used because when a portfolio_export exception is thrown the export is cancelled</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> * throws portfolio_export_exceptiog</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> *</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * @param portfolio_exporter $exporter  current exporter object</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> * @param object             $exception exception to rethrow</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> */</span>
<a name="l975"><span class="linenum"> 975</span></a>  function <a class="function" onClick="logFunction('portfolio_export_rethrow_exception')" href="../_functions/portfolio_export_rethrow_exception.html" onMouseOver="funcPopup(event,'portfolio_export_rethrow_exception')">portfolio_export_rethrow_exception</a>(<a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a>, <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('exception')" href="../_variables/exception.html">$exception</a>) {
<a name="l976"><span class="linenum"> 976</span></a>      throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_export_exception')" href="../_classes/portfolio_export_exception.html" onMouseOver="classPopup(event,'portfolio_export_exception')">portfolio_export_exception</a>(<a class="var it915" onMouseOver="hilite(915)" onMouseOut="lolite()" onClick="logVariable('exporter')" href="../_variables/exporter.html">$exporter</a>, <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('exception')" href="../_variables/exception.html">$exception</a>-&gt;<a onClick="logVariable('errorcode')" class="var it43955" onMouseOver="hilite(43955)" onMouseOut="lolite()" href="../_variables/errorcode.html">errorcode</a>, <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('exception')" href="../_variables/exception.html">$exception</a>-&gt;<a onClick="logVariable('module')" class="var it43955" onMouseOver="hilite(43955)" onMouseOut="lolite()" href="../_variables/module.html">module</a>, <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('exception')" href="../_variables/exception.html">$exception</a>-&gt;<a onClick="logVariable('link')" class="var it43955" onMouseOver="hilite(43955)" onMouseOut="lolite()" href="../_variables/link.html">link</a>, <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('exception')" href="../_variables/exception.html">$exception</a>-&gt;<a onClick="logVariable('a')" class="var it43955" onMouseOver="hilite(43955)" onMouseOut="lolite()" href="../_variables/a.html">a</a>);
<a name="l977"><span class="linenum"> 977</span></a>  }
<a name="l978"><span class="linenum"> 978</span></a>  
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment">/**</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment"> * Try and determine expected_time for purely file based exports</span>
<a name="l981"><span class="linenum"> 981</span></a>  <span class="comment"> * or exports that might include large file attachments.</span>
<a name="l982"><span class="linenum"> 982</span></a>  <span class="comment"> *</span>
<a name="l983"><span class="linenum"> 983</span></a>  <span class="comment"> * @param stored_file|array $totest - either an array of stored_file objects or a single stored_file object</span>
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment"> * @return string PORTFOLIO_TIME_XXX</span>
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment"> */</span>
<a name="l986"><span class="linenum"> 986</span></a>  function <a class="function" onClick="logFunction('portfolio_expected_time_file')" href="../_functions/portfolio_expected_time_file.html" onMouseOver="funcPopup(event,'portfolio_expected_time_file')">portfolio_expected_time_file</a>(<a class="var it27499" onMouseOver="hilite(27499)" onMouseOut="lolite()" onClick="logVariable('totest')" href="../_variables/totest.html">$totest</a>) {
<a name="l987"><span class="linenum"> 987</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l988"><span class="linenum"> 988</span></a>      if (<a class="var it27499" onMouseOver="hilite(27499)" onMouseOut="lolite()" onClick="logVariable('totest')" href="../_variables/totest.html">$totest</a> instanceof stored_file) {
<a name="l989"><span class="linenum"> 989</span></a>          <a class="var it27499" onMouseOver="hilite(27499)" onMouseOut="lolite()" onClick="logVariable('totest')" href="../_variables/totest.html">$totest</a> = array(<a class="var it27499" onMouseOver="hilite(27499)" onMouseOut="lolite()" onClick="logVariable('totest')" href="../_variables/totest.html">$totest</a>);
<a name="l990"><span class="linenum"> 990</span></a>      }
<a name="l991"><span class="linenum"> 991</span></a>      <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> = 0;
<a name="l992"><span class="linenum"> 992</span></a>      foreach (<a class="var it27499" onMouseOver="hilite(27499)" onMouseOut="lolite()" onClick="logVariable('totest')" href="../_variables/totest.html">$totest</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l993"><span class="linenum"> 993</span></a>          if (!(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> instanceof stored_file)) {
<a name="l994"><span class="linenum"> 994</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('something weird passed to portfolio_expected_time_file - not stored_file object');
<a name="l995"><span class="linenum"> 995</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="phpfunction" onClick="logFunction('print_r')" href="../_functions/print_r.html" onMouseOver="phpfuncPopup(event,'print_r')">print_r</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, true));
<a name="l996"><span class="linenum"> 996</span></a>              continue;
<a name="l997"><span class="linenum"> 997</span></a>          }
<a name="l998"><span class="linenum"> 998</span></a>          <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> += <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>();
<a name="l999"><span class="linenum"> 999</span></a>      }
<a name="l1000"><span class="linenum">1000</span></a>  
<a name="l1001"><span class="linenum">1001</span></a>      <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a> = <a class="function" onClick="logFunction('portfolio_filesize_info')" href="../_functions/portfolio_filesize_info.html" onMouseOver="funcPopup(event,'portfolio_filesize_info')">portfolio_filesize_info</a>();
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>      <a class="var it27500" onMouseOver="hilite(27500)" onMouseOut="lolite()" onClick="logVariable('moderate')" href="../_variables/moderate.html">$moderate</a> = <a class="var it14301" onMouseOver="hilite(14301)" onMouseOut="lolite()" onClick="logVariable('high')" href="../_variables/high.html">$high</a> = 0; <span class="comment">// avoid warnings</span>
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>      foreach (array('moderate', 'high') as <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>) {
<a name="l1006"><span class="linenum">1006</span></a>          <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../_variables/settingname.html">$settingname</a> = 'portfolio_' . <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> . '_filesize_threshold';
<a name="l1007"><span class="linenum">1007</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../_variables/settingname.html">$settingname</a>}) || !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../_variables/settingname.html">$settingname</a>}, <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>['options'])) {
<a name="l1008"><span class="linenum">1008</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;weird or unset admin value for <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../_variables/settingname.html">$settingname</a>, using default instead&quot;);
<a name="l1009"><span class="linenum">1009</span></a>              $<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>[<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>];
<a name="l1010"><span class="linenum">1010</span></a>          } else {
<a name="l1011"><span class="linenum">1011</span></a>              $<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../_variables/settingname.html">$settingname</a>};
<a name="l1012"><span class="linenum">1012</span></a>          }
<a name="l1013"><span class="linenum">1013</span></a>      }
<a name="l1014"><span class="linenum">1014</span></a>  
<a name="l1015"><span class="linenum">1015</span></a>      if (<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> &lt; <a class="var it27500" onMouseOver="hilite(27500)" onMouseOut="lolite()" onClick="logVariable('moderate')" href="../_variables/moderate.html">$moderate</a>) {
<a name="l1016"><span class="linenum">1016</span></a>          return <a class="constant" onClick="logConstant('PORTFOLIO_TIME_LOW')" href="../_constants/PORTFOLIO_TIME_LOW.html" onMouseOver="constPopup(event,'PORTFOLIO_TIME_LOW')">PORTFOLIO_TIME_LOW</a>;
<a name="l1017"><span class="linenum">1017</span></a>      } else if (<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> &lt; <a class="var it14301" onMouseOver="hilite(14301)" onMouseOut="lolite()" onClick="logVariable('high')" href="../_variables/high.html">$high</a>) {
<a name="l1018"><span class="linenum">1018</span></a>          return <a class="constant" onClick="logConstant('PORTFOLIO_TIME_MODERATE')" href="../_constants/PORTFOLIO_TIME_MODERATE.html" onMouseOver="constPopup(event,'PORTFOLIO_TIME_MODERATE')">PORTFOLIO_TIME_MODERATE</a>;
<a name="l1019"><span class="linenum">1019</span></a>      }
<a name="l1020"><span class="linenum">1020</span></a>      return <a class="constant" onClick="logConstant('PORTFOLIO_TIME_HIGH')" href="../_constants/PORTFOLIO_TIME_HIGH.html" onMouseOver="constPopup(event,'PORTFOLIO_TIME_HIGH')">PORTFOLIO_TIME_HIGH</a>;
<a name="l1021"><span class="linenum">1021</span></a>  }
<a name="l1022"><span class="linenum">1022</span></a>  
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">/**</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment"> * The default filesizes and threshold information for file based transfers.</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment"> * This shouldn't need to be used outside the admin pages and the portfolio code</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment"> *</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment"> * @return array</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment"> */</span>
<a name="l1030"><span class="linenum">1030</span></a>  function <a class="function" onClick="logFunction('portfolio_filesize_info')" href="../_functions/portfolio_filesize_info.html" onMouseOver="funcPopup(event,'portfolio_filesize_info')">portfolio_filesize_info</a>() {
<a name="l1031"><span class="linenum">1031</span></a>      <a class="var it27501" onMouseOver="hilite(27501)" onMouseOut="lolite()" onClick="logVariable('filesizes')" href="../_variables/filesizes.html">$filesizes</a> = array();
<a name="l1032"><span class="linenum">1032</span></a>      <a class="var it5367" onMouseOver="hilite(5367)" onMouseOut="lolite()" onClick="logVariable('sizelist')" href="../_variables/sizelist.html">$sizelist</a> = array(10240, 51200, 102400, 512000, 1048576, 2097152, 5242880, 10485760, 20971520, 52428800);
<a name="l1033"><span class="linenum">1033</span></a>      foreach (<a class="var it5367" onMouseOver="hilite(5367)" onMouseOut="lolite()" onClick="logVariable('sizelist')" href="../_variables/sizelist.html">$sizelist</a> as <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a>) {
<a name="l1034"><span class="linenum">1034</span></a>          <a class="var it27501" onMouseOver="hilite(27501)" onMouseOut="lolite()" onClick="logVariable('filesizes')" href="../_variables/filesizes.html">$filesizes</a>[<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a>] = <a class="function" onClick="logFunction('display_size')" href="../_functions/display_size.html" onMouseOver="funcPopup(event,'display_size')">display_size</a>(<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a>);
<a name="l1035"><span class="linenum">1035</span></a>      }
<a name="l1036"><span class="linenum">1036</span></a>      return array(
<a name="l1037"><span class="linenum">1037</span></a>          'options' =&gt; <a class="var it27501" onMouseOver="hilite(27501)" onMouseOut="lolite()" onClick="logVariable('filesizes')" href="../_variables/filesizes.html">$filesizes</a>,
<a name="l1038"><span class="linenum">1038</span></a>          'moderate' =&gt; 1048576,
<a name="l1039"><span class="linenum">1039</span></a>          'high'     =&gt; 5242880,
<a name="l1040"><span class="linenum">1040</span></a>      );
<a name="l1041"><span class="linenum">1041</span></a>  }
<a name="l1042"><span class="linenum">1042</span></a>  
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">/**</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> * Try and determine expected_time for purely database based exports</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment"> * or exports that might include large parts of a database.</span>
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment"> *</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment"> * @param int $recordcount number of records trying to export</span>
<a name="l1048"><span class="linenum">1048</span></a>  <span class="comment"> * @return string PORTFOLIO_TIME_XXX</span>
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment"> */</span>
<a name="l1050"><span class="linenum">1050</span></a>  function <a class="function" onClick="logFunction('portfolio_expected_time_db')" href="../_functions/portfolio_expected_time_db.html" onMouseOver="funcPopup(event,'portfolio_expected_time_db')">portfolio_expected_time_db</a>(<a class="var it27502" onMouseOver="hilite(27502)" onMouseOut="lolite()" onClick="logVariable('recordcount')" href="../_variables/recordcount.html">$recordcount</a>) {
<a name="l1051"><span class="linenum">1051</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1052"><span class="linenum">1052</span></a>  
<a name="l1053"><span class="linenum">1053</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('portfolio_moderate_dbsize_threshold')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/portfolio_moderate_dbsize_threshold.html">portfolio_moderate_dbsize_threshold</a>)) {
<a name="l1054"><span class="linenum">1054</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('portfolio_moderate_dbsize_threshold', 10);
<a name="l1055"><span class="linenum">1055</span></a>      }
<a name="l1056"><span class="linenum">1056</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('portfolio_high_dbsize_threshold')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/portfolio_high_dbsize_threshold.html">portfolio_high_dbsize_threshold</a>)) {
<a name="l1057"><span class="linenum">1057</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('portfolio_high_dbsize_threshold', 50);
<a name="l1058"><span class="linenum">1058</span></a>      }
<a name="l1059"><span class="linenum">1059</span></a>      if (<a class="var it27502" onMouseOver="hilite(27502)" onMouseOut="lolite()" onClick="logVariable('recordcount')" href="../_variables/recordcount.html">$recordcount</a> &lt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('portfolio_moderate_dbsize_threshold')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/portfolio_moderate_dbsize_threshold.html">portfolio_moderate_dbsize_threshold</a>) {
<a name="l1060"><span class="linenum">1060</span></a>          return <a class="constant" onClick="logConstant('PORTFOLIO_TIME_LOW')" href="../_constants/PORTFOLIO_TIME_LOW.html" onMouseOver="constPopup(event,'PORTFOLIO_TIME_LOW')">PORTFOLIO_TIME_LOW</a>;
<a name="l1061"><span class="linenum">1061</span></a>      } else if (<a class="var it27502" onMouseOver="hilite(27502)" onMouseOut="lolite()" onClick="logVariable('recordcount')" href="../_variables/recordcount.html">$recordcount</a> &lt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('portfolio_high_dbsize_threshold')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/portfolio_high_dbsize_threshold.html">portfolio_high_dbsize_threshold</a>) {
<a name="l1062"><span class="linenum">1062</span></a>          return <a class="constant" onClick="logConstant('PORTFOLIO_TIME_MODERATE')" href="../_constants/PORTFOLIO_TIME_MODERATE.html" onMouseOver="constPopup(event,'PORTFOLIO_TIME_MODERATE')">PORTFOLIO_TIME_MODERATE</a>;
<a name="l1063"><span class="linenum">1063</span></a>      }
<a name="l1064"><span class="linenum">1064</span></a>      return <a class="constant" onClick="logConstant('PORTFOLIO_TIME_HIGH')" href="../_constants/PORTFOLIO_TIME_HIGH.html" onMouseOver="constPopup(event,'PORTFOLIO_TIME_HIGH')">PORTFOLIO_TIME_HIGH</a>;
<a name="l1065"><span class="linenum">1065</span></a>  }
<a name="l1066"><span class="linenum">1066</span></a>  
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">/**</span>
<a name="l1068"><span class="linenum">1068</span></a>  <span class="comment"> * Function to send portfolio report to admins</span>
<a name="l1069"><span class="linenum">1069</span></a>  <span class="comment"> *</span>
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment"> * @param array $insane array of insane plugins</span>
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment"> * @param array $instances (optional) if reporting instances rather than whole plugins</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment"> */</span>
<a name="l1073"><span class="linenum">1073</span></a>  function <a class="function" onClick="logFunction('portfolio_insane_notify_admins')" href="../_functions/portfolio_insane_notify_admins.html" onMouseOver="funcPopup(event,'portfolio_insane_notify_admins')">portfolio_insane_notify_admins</a>(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>, <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>=false) {
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1076"><span class="linenum">1076</span></a>  
<a name="l1077"><span class="linenum">1077</span></a>      if (<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('ADMIN_EDITING_PORTFOLIO')" href="../_constants/ADMIN_EDITING_PORTFOLIO.html" onMouseOver="constPopup(event,'ADMIN_EDITING_PORTFOLIO')">ADMIN_EDITING_PORTFOLIO</a>')) {
<a name="l1078"><span class="linenum">1078</span></a>          return true;
<a name="l1079"><span class="linenum">1079</span></a>      }
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>      <a class="var it1091" onMouseOver="hilite(1091)" onMouseOut="lolite()" onClick="logVariable('admins')" href="../_variables/admins.html">$admins</a> = <a class="function" onClick="logFunction('get_admins')" href="../_functions/get_admins.html" onMouseOver="funcPopup(event,'get_admins')">get_admins</a>();
<a name="l1082"><span class="linenum">1082</span></a>  
<a name="l1083"><span class="linenum">1083</span></a>      if (empty(<a class="var it1091" onMouseOver="hilite(1091)" onMouseOut="lolite()" onClick="logVariable('admins')" href="../_variables/admins.html">$admins</a>)) {
<a name="l1084"><span class="linenum">1084</span></a>          return;
<a name="l1085"><span class="linenum">1085</span></a>      }
<a name="l1086"><span class="linenum">1086</span></a>      if (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>) {
<a name="l1087"><span class="linenum">1087</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="function" onClick="logFunction('portfolio_instances')" href="../_functions/portfolio_instances.html" onMouseOver="funcPopup(event,'portfolio_instances')">portfolio_instances</a>(false, false);
<a name="l1088"><span class="linenum">1088</span></a>      }
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a> = <a class="function" onClick="logFunction('get_site')" href="../_functions/get_site.html" onMouseOver="funcPopup(event,'get_site')">get_site</a>();
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new StdClass;
<a name="l1093"><span class="linenum">1093</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('sitename')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/sitename.html">sitename</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a>-&gt;<a onClick="logVariable('fullname')" class="var it42988" onMouseOver="hilite(42988)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, true, array('context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>)));
<a name="l1094"><span class="linenum">1094</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('fixurl')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/fixurl.html">fixurl</a>   = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/settings.php?section=manageportfolios&quot;;
<a name="l1095"><span class="linenum">1095</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('htmllist')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/htmllist.html">htmllist</a> = <a class="function" onClick="logFunction('portfolio_report_insane')" href="../_functions/portfolio_report_insane.html" onMouseOver="funcPopup(event,'portfolio_report_insane')">portfolio_report_insane</a>(<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a>, <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>, true);
<a name="l1096"><span class="linenum">1096</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('textlist')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/textlist.html">textlist</a> = '';
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>      foreach (<a class="var it27482" onMouseOver="hilite(27482)" onMouseOut="lolite()" onClick="logVariable('insane')" href="../_variables/insane.html">$insane</a> as <a class="var it68" onMouseOver="hilite(68)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a> =&gt; <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('reason')" href="../_variables/reason.html">$reason</a>) {
<a name="l1099"><span class="linenum">1099</span></a>          if (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>) {
<a name="l1100"><span class="linenum">1100</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('textlist')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/textlist.html">textlist</a> = <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>[<a class="var it68" onMouseOver="hilite(68)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>]-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('name') . ': ' . <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('reason')" href="../_variables/reason.html">$reason</a> . &quot;\n&quot;;
<a name="l1101"><span class="linenum">1101</span></a>          } else {
<a name="l1102"><span class="linenum">1102</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('textlist')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/textlist.html">textlist</a> = <a class="var it68" onMouseOver="hilite(68)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a> . ': ' . <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('reason')" href="../_variables/reason.html">$reason</a> . &quot;\n&quot;;
<a name="l1103"><span class="linenum">1103</span></a>          }
<a name="l1104"><span class="linenum">1104</span></a>      }
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>      <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>   = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('insanesubject', 'portfolio');
<a name="l1107"><span class="linenum">1107</span></a>      <a class="var it27507" onMouseOver="hilite(27507)" onMouseOut="lolite()" onClick="logVariable('plainbody')" href="../_variables/plainbody.html">$plainbody</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('insanebody', 'portfolio', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l1108"><span class="linenum">1108</span></a>      <a class="var it27508" onMouseOver="hilite(27508)" onMouseOut="lolite()" onClick="logVariable('htmlbody')" href="../_variables/htmlbody.html">$htmlbody</a>  = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('insanebodyhtml', 'portfolio', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l1109"><span class="linenum">1109</span></a>      <a class="var it27509" onMouseOver="hilite(27509)" onMouseOut="lolite()" onClick="logVariable('smallbody')" href="../_variables/smallbody.html">$smallbody</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('insanebodysmall', 'portfolio', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>      foreach (<a class="var it1091" onMouseOver="hilite(1091)" onMouseOut="lolite()" onClick="logVariable('admins')" href="../_variables/admins.html">$admins</a> as <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('admin')" href="../_variables/admin.html">$admin</a>) {
<a name="l1112"><span class="linenum">1112</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l1113"><span class="linenum">1113</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('modulename')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a> = 'portfolio';
<a name="l1114"><span class="linenum">1114</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = 'portfolio';
<a name="l1115"><span class="linenum">1115</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = 'notices';
<a name="l1116"><span class="linenum">1116</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/userfrom.html">userfrom</a> = <a class="function" onClick="logFunction('get_admin')" href="../_functions/get_admin.html" onMouseOver="funcPopup(event,'get_admin')">get_admin</a>();
<a name="l1117"><span class="linenum">1117</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/userto.html">userto</a> = <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('admin')" href="../_variables/admin.html">$admin</a>;
<a name="l1118"><span class="linenum">1118</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/subject.html">subject</a> = <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>;
<a name="l1119"><span class="linenum">1119</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/fullmessage.html">fullmessage</a> = <a class="var it27507" onMouseOver="hilite(27507)" onMouseOut="lolite()" onClick="logVariable('plainbody')" href="../_variables/plainbody.html">$plainbody</a>;
<a name="l1120"><span class="linenum">1120</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/fullmessageformat.html">fullmessageformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l1121"><span class="linenum">1121</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/fullmessagehtml.html">fullmessagehtml</a> = <a class="var it27508" onMouseOver="hilite(27508)" onMouseOut="lolite()" onClick="logVariable('htmlbody')" href="../_variables/htmlbody.html">$htmlbody</a>;
<a name="l1122"><span class="linenum">1122</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/smallmessage.html">smallmessage</a> = <a class="var it27509" onMouseOver="hilite(27509)" onMouseOut="lolite()" onClick="logVariable('smallbody')" href="../_variables/smallbody.html">$smallbody</a>;
<a name="l1123"><span class="linenum">1123</span></a>          <a class="function" onClick="logFunction('message_send')" href="../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>);
<a name="l1124"><span class="linenum">1124</span></a>      }
<a name="l1125"><span class="linenum">1125</span></a>  }
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">/**</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment"> * Setup page export</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment"> *</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment"> * @param moodle_page $PAGE global variable from page object</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment"> * @param portfolio_caller_base $caller plugin type caller</span>
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment"> */</span>
<a name="l1133"><span class="linenum">1133</span></a>  function <a class="function" onClick="logFunction('portfolio_export_pagesetup')" href="../_functions/portfolio_export_pagesetup.html" onMouseOver="funcPopup(event,'portfolio_export_pagesetup')">portfolio_export_pagesetup</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it1190" onMouseOver="hilite(1190)" onMouseOut="lolite()" onClick="logVariable('caller')" href="../_variables/caller.html">$caller</a>) {
<a name="l1134"><span class="linenum">1134</span></a>  <span class="comment">    // set up the context so that build_navigation works nice</span>
<a name="l1135"><span class="linenum">1135</span></a>      <a class="var it1190" onMouseOver="hilite(1190)" onMouseOut="lolite()" onClick="logVariable('caller')" href="../_variables/caller.html">$caller</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>);
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it27510" onMouseOver="hilite(27510)" onMouseOut="lolite()" onClick="logVariable('extranav')" href="../_variables/extranav.html">$extranav</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) = <a class="var it1190" onMouseOver="hilite(1190)" onMouseOut="lolite()" onClick="logVariable('caller')" href="../_variables/caller.html">$caller</a>-&gt;<a class="function" onClick="logFunction('get_navigation')" href="../_functions/get_navigation.html" onMouseOver="funcPopup(event,'get_navigation')">get_navigation</a>();
<a name="l1138"><span class="linenum">1138</span></a>  
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment">    // and now we know the course for sure and maybe the cm, call require_login with it</span>
<a name="l1140"><span class="linenum">1140</span></a>      <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, false, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1141"><span class="linenum">1141</span></a>  
<a name="l1142"><span class="linenum">1142</span></a>      foreach (<a class="var it27510" onMouseOver="hilite(27510)" onMouseOut="lolite()" onClick="logVariable('extranav')" href="../_variables/extranav.html">$extranav</a> as <a class="var it27511" onMouseOver="hilite(27511)" onMouseOut="lolite()" onClick="logVariable('navitem')" href="../_variables/navitem.html">$navitem</a>) {
<a name="l1143"><span class="linenum">1143</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it27511" onMouseOver="hilite(27511)" onMouseOut="lolite()" onClick="logVariable('navitem')" href="../_variables/navitem.html">$navitem</a>['name']);
<a name="l1144"><span class="linenum">1144</span></a>      }
<a name="l1145"><span class="linenum">1145</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exporting', 'portfolio'));
<a name="l1146"><span class="linenum">1146</span></a>  }
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">/**</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment"> * Get export type id</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment"> *</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment"> * @param string $type plugin type</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment"> * @param int $userid the user to check for</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment"> * @return mixed|bool</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment"> */</span>
<a name="l1155"><span class="linenum">1155</span></a>  function <a class="function" onClick="logFunction('portfolio_export_type_to_id')" href="../_functions/portfolio_export_type_to_id.html" onMouseOver="funcPopup(event,'portfolio_export_type_to_id')">portfolio_export_type_to_id</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l1156"><span class="linenum">1156</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1157"><span class="linenum">1157</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT t.id FROM {portfolio_tempdata} t JOIN {portfolio_instance} i ON t.instance = i.id WHERE t.userid = ? AND i.plugin = ?';
<a name="l1158"><span class="linenum">1158</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>));
<a name="l1159"><span class="linenum">1159</span></a>  }
<a name="l1160"><span class="linenum">1160</span></a>  
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment">/**</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment"> * Return a list of current exports for the given user.</span>
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment"> * This will not go through and call rewaken_object, because it's heavy.</span>
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment"> * It's really just used to figure out what exports are currently happening.</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment"> * This is useful for plugins that don't support multiple exports per session</span>
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment"> *</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment"> * @param int $userid the user to check for</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment"> * @param string $type (optional) the portfolio plugin to filter by</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment"> * @return array</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment"> */</span>
<a name="l1171"><span class="linenum">1171</span></a>  function <a class="function" onClick="logFunction('portfolio_existing_exports')" href="../_functions/portfolio_existing_exports.html" onMouseOver="funcPopup(event,'portfolio_existing_exports')">portfolio_existing_exports</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null) {
<a name="l1172"><span class="linenum">1172</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1173"><span class="linenum">1173</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT t.*,t.instance,i.plugin,i.name FROM {portfolio_tempdata} t JOIN {portfolio_instance} i ON t.instance = i.id WHERE t.userid = ? ';
<a name="l1174"><span class="linenum">1174</span></a>      <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a> = array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1175"><span class="linenum">1175</span></a>      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l1176"><span class="linenum">1176</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= ' AND i.plugin = ?';
<a name="l1177"><span class="linenum">1177</span></a>          <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>[] = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1178"><span class="linenum">1178</span></a>      }
<a name="l1179"><span class="linenum">1179</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>);
<a name="l1180"><span class="linenum">1180</span></a>  }
<a name="l1181"><span class="linenum">1181</span></a>  
<a name="l1182"><span class="linenum">1182</span></a>  <span class="comment">/**</span>
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment"> * Return an array of existing exports by type for a given user.</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment"> * This is much more lightweight than existing_exports because it only returns the types, rather than the whole serialised data</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment"> * so can be used for checking availability of multiple plugins at the same time.</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment"> * @see existing_exports</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment"> *</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment"> * @param int $userid the user to check for</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment"> * @return array</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment"> */</span>
<a name="l1191"><span class="linenum">1191</span></a>  function <a class="function" onClick="logFunction('portfolio_existing_exports_by_plugin')" href="../_functions/portfolio_existing_exports_by_plugin.html" onMouseOver="funcPopup(event,'portfolio_existing_exports_by_plugin')">portfolio_existing_exports_by_plugin</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l1192"><span class="linenum">1192</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1193"><span class="linenum">1193</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT t.id,i.plugin FROM {portfolio_tempdata} t JOIN {portfolio_instance} i ON t.instance = i.id WHERE t.userid = ? ';
<a name="l1194"><span class="linenum">1194</span></a>      <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a> = array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1195"><span class="linenum">1195</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql_menu')" href="../_functions/get_records_sql_menu.html" onMouseOver="funcPopup(event,'get_records_sql_menu')">get_records_sql_menu</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../_variables/values.html">$values</a>);
<a name="l1196"><span class="linenum">1196</span></a>  }
<a name="l1197"><span class="linenum">1197</span></a>  
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment">/**</span>
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment"> * Return default common options for {@link format_text()} when preparing a content to be exported.</span>
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment"> * It is important not to apply filters and not to clean the HTML in format_text()</span>
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment"> *</span>
<a name="l1202"><span class="linenum">1202</span></a>  <span class="comment"> * @return stdClass</span>
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment"> */</span>
<a name="l1204"><span class="linenum">1204</span></a>  function <a class="function" onClick="logFunction('portfolio_format_text_options')" href="../_functions/portfolio_format_text_options.html" onMouseOver="funcPopup(event,'portfolio_format_text_options')">portfolio_format_text_options</a>() {
<a name="l1205"><span class="linenum">1205</span></a>  
<a name="l1206"><span class="linenum">1206</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>                = new stdClass();
<a name="l1207"><span class="linenum">1207</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/para.html">para</a>          = false;
<a name="l1208"><span class="linenum">1208</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('newlines')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/newlines.html">newlines</a>      = true;
<a name="l1209"><span class="linenum">1209</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('filter')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a>        = false;
<a name="l1210"><span class="linenum">1210</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('noclean')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/noclean.html">noclean</a>       = true;
<a name="l1211"><span class="linenum">1211</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/overflowdiv.html">overflowdiv</a>   = false;
<a name="l1212"><span class="linenum">1212</span></a>  
<a name="l1213"><span class="linenum">1213</span></a>      return <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l1214"><span class="linenum">1214</span></a>  }
<a name="l1215"><span class="linenum">1215</span></a>  
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment">/**</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment"> * callback function from {@link portfolio_rewrite_pluginfile_urls}</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment"> * looks through preg_replace matches and replaces content with whatever the active portfolio export format says</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment"> *</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> * @param int $contextid module context id</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> * @param string $component module name (eg:mod_assignment)</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment"> * @param string $filearea normal file_area arguments</span>
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment"> * @param int $itemid component item id</span>
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment"> * @param portfolio_format $format exporter format type</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment"> * @param array $options extra options to pass through to the file_output function in the format (optional)</span>
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment"> * @param array $matches internal matching</span>
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment"> * @return object|array|string</span>
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment"> */</span>
<a name="l1229"><span class="linenum">1229</span></a>  function <a class="function" onClick="logFunction('portfolio_rewrite_pluginfile_url_callback')" href="../_functions/portfolio_rewrite_pluginfile_url_callback.html" onMouseOver="funcPopup(event,'portfolio_rewrite_pluginfile_url_callback')">portfolio_rewrite_pluginfile_url_callback</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>) {
<a name="l1230"><span class="linenum">1230</span></a>      <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>[0]; <span class="comment">// No internal matching.</span>
<a name="l1231"><span class="linenum">1231</span></a>  
<a name="l1232"><span class="linenum">1232</span></a>  <span class="comment">    // Loads the HTML.</span>
<a name="l1233"><span class="linenum">1233</span></a>      <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('dom')" href="../_variables/dom.html">$dom</a> = new DomDocument();
<a name="l1234"><span class="linenum">1234</span></a>      if (!<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('dom')" href="../_variables/dom.html">$dom</a>-&gt;<a class="function" onClick="logFunction('loadHTML')" href="../_functions/loadhtml.html" onMouseOver="funcPopup(event,'loadhtml')">loadHTML</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>)) {
<a name="l1235"><span class="linenum">1235</span></a>          return <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>;
<a name="l1236"><span class="linenum">1236</span></a>      }
<a name="l1237"><span class="linenum">1237</span></a>  
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">    // Navigates to the node.</span>
<a name="l1239"><span class="linenum">1239</span></a>      <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('xpath')" href="../_variables/xpath.html">$xpath</a> = new DOMXPath(<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('dom')" href="../_variables/dom.html">$dom</a>);
<a name="l1240"><span class="linenum">1240</span></a>      <a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> = <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('xpath')" href="../_variables/xpath.html">$xpath</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>('/html/body/child::*');
<a name="l1241"><span class="linenum">1241</span></a>      if (empty(<a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a>) || <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a>) &gt; 1) {
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">        // Unexpected sequence, none or too many nodes.</span>
<a name="l1243"><span class="linenum">1243</span></a>          return <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>;
<a name="l1244"><span class="linenum">1244</span></a>      }
<a name="l1245"><span class="linenum">1245</span></a>      <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('dom')" href="../_variables/dom.html">$dom</a> = <a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a>-&gt;<a class="function" onClick="logFunction('item')" href="../_functions/item.html" onMouseOver="funcPopup(event,'item')">item</a>(0);
<a name="l1246"><span class="linenum">1246</span></a>  
<a name="l1247"><span class="linenum">1247</span></a>      <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a> = array();
<a name="l1248"><span class="linenum">1248</span></a>      foreach (<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('dom')" href="../_variables/dom.html">$dom</a>-&gt;<a onClick="logVariable('attributes')" class="var it43499" onMouseOver="hilite(43499)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a> as <a class="var it492" onMouseOver="hilite(492)" onMouseOut="lolite()" onClick="logVariable('attr')" href="../_variables/attr.html">$attr</a> =&gt; <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l1249"><span class="linenum">1249</span></a>          <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>[<a class="var it492" onMouseOver="hilite(492)" onMouseOut="lolite()" onClick="logVariable('attr')" href="../_variables/attr.html">$attr</a>] = <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('value')" class="var it43037" onMouseOver="hilite(43037)" onMouseOut="lolite()" href="../_variables/value.html">value</a>;
<a name="l1250"><span class="linenum">1250</span></a>      }
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">    // now figure out the file</span>
<a name="l1252"><span class="linenum">1252</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1253"><span class="linenum">1253</span></a>      <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = 'href';
<a name="l1254"><span class="linenum">1254</span></a>      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('href', <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('src', <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>)) {
<a name="l1255"><span class="linenum">1255</span></a>          <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = 'src';
<a name="l1256"><span class="linenum">1256</span></a>      }
<a name="l1257"><span class="linenum">1257</span></a>      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>)) {
<a name="l1258"><span class="linenum">1258</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Couldn\'t find an attribute to use that contains @@PLUGINFILE@@ in portfolio_rewrite_pluginfile');
<a name="l1259"><span class="linenum">1259</span></a>          return <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>;
<a name="l1260"><span class="linenum">1260</span></a>      }
<a name="l1261"><span class="linenum">1261</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>], <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>], '@@PLUGINFILE@@') + <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>('@@PLUGINFILE@@'));
<a name="l1262"><span class="linenum">1262</span></a>      <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a> = '/';
<a name="l1263"><span class="linenum">1263</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, '/') !== 0) {
<a name="l1264"><span class="linenum">1264</span></a>          <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l1265"><span class="linenum">1265</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l1266"><span class="linenum">1266</span></a>          <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l1267"><span class="linenum">1267</span></a>      }
<a name="l1268"><span class="linenum">1268</span></a>      if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="phpfunction" onClick="logFunction('urldecode')" href="../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>))) {
<a name="l1269"><span class="linenum">1269</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Couldn't find a file from the embedded path info context <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> component <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> filearea <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a> itemid <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> filepath <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a> name <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>&quot;);
<a name="l1270"><span class="linenum">1270</span></a>          return <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>;
<a name="l1271"><span class="linenum">1271</span></a>      }
<a name="l1272"><span class="linenum">1272</span></a>      if (empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l1273"><span class="linenum">1273</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array();
<a name="l1274"><span class="linenum">1274</span></a>      }
<a name="l1275"><span class="linenum">1275</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['attributes'] = <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>;
<a name="l1276"><span class="linenum">1276</span></a>      return <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>-&gt;<a class="function" onClick="logFunction('file_output')" href="../_functions/file_output.html" onMouseOver="funcPopup(event,'file_output')">file_output</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1277"><span class="linenum">1277</span></a>  }
<a name="l1278"><span class="linenum">1278</span></a>  
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">/**</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment"> * Function to require any potential callback files, throwing exceptions</span>
<a name="l1281"><span class="linenum">1281</span></a>  <span class="comment"> * if an issue occurs.</span>
<a name="l1282"><span class="linenum">1282</span></a>  <span class="comment"> *</span>
<a name="l1283"><span class="linenum">1283</span></a>  <span class="comment"> * @param string $component This is the name of the component in Moodle, eg 'mod_forum'</span>
<a name="l1284"><span class="linenum">1284</span></a>  <span class="comment"> * @param string $class Name of the class containing the callback functions</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment"> *     activity components should ALWAYS use their name_portfolio_caller</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment"> *     other locations must use something unique</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment"> */</span>
<a name="l1288"><span class="linenum">1288</span></a>  function <a class="function" onClick="logFunction('portfolio_include_callback_file')" href="../_functions/portfolio_include_callback_file.html" onMouseOver="funcPopup(event,'portfolio_include_callback_file')">portfolio_include_callback_file</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = null) {
<a name="l1289"><span class="linenum">1289</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1290"><span class="linenum">1290</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/adminlib.php');
<a name="l1291"><span class="linenum">1291</span></a>  
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment">    // It's possible that they are passing a file path rather than passing a component.</span>
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">    // We want to try and convert this to a component name, eg. mod_forum.</span>
<a name="l1294"><span class="linenum">1294</span></a>      <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> = <a class="phpfunction" onClick="logFunction('strrpos')" href="../_functions/strrpos.html" onMouseOver="phpfuncPopup(event,'strrpos')">strrpos</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, '/');
<a name="l1295"><span class="linenum">1295</span></a>      if (<a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> !== false) {
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">        // Get rid of the first slash (if it exists).</span>
<a name="l1297"><span class="linenum">1297</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="phpfunction" onClick="logFunction('ltrim')" href="../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, '/');
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment">        // Get a list of valid plugin types.</span>
<a name="l1299"><span class="linenum">1299</span></a>          <a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">        // Assume it is not valid for now.</span>
<a name="l1301"><span class="linenum">1301</span></a>          <a class="var it9136" onMouseOver="hilite(9136)" onMouseOut="lolite()" onClick="logVariable('isvalid')" href="../_variables/isvalid.html">$isvalid</a> = false;
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">        // Go through the plugin types.</span>
<a name="l1303"><span class="linenum">1303</span></a>          foreach (<a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> =&gt; <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">            // Getting the path relative to the dirroot.</span>
<a name="l1305"><span class="linenum">1305</span></a>              <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|^' . <a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>, '|') . '/|', '', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>);
<a name="l1306"><span class="linenum">1306</span></a>              if (<a class="phpfunction" onClick="logFunction('strrpos')" href="../_functions/strrpos.html" onMouseOver="phpfuncPopup(event,'strrpos')">strrpos</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) === 0) {
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">                // Found the plugin type.</span>
<a name="l1308"><span class="linenum">1308</span></a>                  <a class="var it9136" onMouseOver="hilite(9136)" onMouseOut="lolite()" onClick="logVariable('isvalid')" href="../_variables/isvalid.html">$isvalid</a> = true;
<a name="l1309"><span class="linenum">1309</span></a>                  <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1310"><span class="linenum">1310</span></a>                  <a class="var it27512" onMouseOver="hilite(27512)" onMouseOut="lolite()" onClick="logVariable('pluginpath')" href="../_variables/pluginpath.html">$pluginpath</a> = <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>;
<a name="l1311"><span class="linenum">1311</span></a>              }
<a name="l1312"><span class="linenum">1312</span></a>          }
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment">        // Throw exception if not a valid component.</span>
<a name="l1314"><span class="linenum">1314</span></a>          if (!<a class="var it9136" onMouseOver="hilite(9136)" onMouseOut="lolite()" onClick="logVariable('isvalid')" href="../_variables/isvalid.html">$isvalid</a>) {
<a name="l1315"><span class="linenum">1315</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Somehow a non-valid plugin path was passed, could be a hackz0r attempt, exiting.');
<a name="l1316"><span class="linenum">1316</span></a>          }
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment">        // Remove the file name.</span>
<a name="l1318"><span class="linenum">1318</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 0, <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a>), '/');
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">        // Replace the path with the type.</span>
<a name="l1320"><span class="linenum">1320</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it27512" onMouseOver="hilite(27512)" onMouseOut="lolite()" onClick="logVariable('pluginpath')" href="../_variables/pluginpath.html">$pluginpath</a>, <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">        // Ok, replace '/' with '_'.</span>
<a name="l1322"><span class="linenum">1322</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('/', '_', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">        // Place a debug message saying the third parameter should be changed.</span>
<a name="l1324"><span class="linenum">1324</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The third parameter sent to the function set_callback_options should be the component name, not a file path, please update this.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1325"><span class="linenum">1325</span></a>      }
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">    // Check that it is a valid component.</span>
<a name="l1328"><span class="linenum">1328</span></a>      if (!<a class="function" onClick="logFunction('get_component_version')" href="../_functions/get_component_version.html" onMouseOver="funcPopup(event,'get_component_version')">get_component_version</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l1329"><span class="linenum">1329</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('nocallbackcomponent', 'portfolio', '', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1330"><span class="linenum">1330</span></a>      }
<a name="l1331"><span class="linenum">1331</span></a>  
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">    // Obtain the component's location.</span>
<a name="l1333"><span class="linenum">1333</span></a>      if (!<a class="var it27513" onMouseOver="hilite(27513)" onMouseOut="lolite()" onClick="logVariable('componentloc')" href="../_variables/componentloc.html">$componentloc</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l1334"><span class="linenum">1334</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('nocallbackcomponent', 'portfolio', '', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1335"><span class="linenum">1335</span></a>      }
<a name="l1336"><span class="linenum">1336</span></a>  
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">    // Check if the component contains the necessary file for the portfolio plugin.</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">    // These are locallib.php, portfoliolib.php and portfolio_callback.php.</span>
<a name="l1339"><span class="linenum">1339</span></a>      <a class="var it27514" onMouseOver="hilite(27514)" onMouseOut="lolite()" onClick="logVariable('filefound')" href="../_variables/filefound.html">$filefound</a> = false;
<a name="l1340"><span class="linenum">1340</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it27513" onMouseOver="hilite(27513)" onMouseOut="lolite()" onClick="logVariable('componentloc')" href="../_variables/componentloc.html">$componentloc</a> . '/locallib.php')) {
<a name="l1341"><span class="linenum">1341</span></a>          <a class="var it27514" onMouseOver="hilite(27514)" onMouseOut="lolite()" onClick="logVariable('filefound')" href="../_variables/filefound.html">$filefound</a> = true;
<a name="l1342"><span class="linenum">1342</span></a>          require_once(<a class="var it27513" onMouseOver="hilite(27513)" onMouseOut="lolite()" onClick="logVariable('componentloc')" href="../_variables/componentloc.html">$componentloc</a> . '/locallib.php');
<a name="l1343"><span class="linenum">1343</span></a>      }
<a name="l1344"><span class="linenum">1344</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it27513" onMouseOver="hilite(27513)" onMouseOut="lolite()" onClick="logVariable('componentloc')" href="../_variables/componentloc.html">$componentloc</a> . '/portfoliolib.php')) {
<a name="l1345"><span class="linenum">1345</span></a>          <a class="var it27514" onMouseOver="hilite(27514)" onMouseOut="lolite()" onClick="logVariable('filefound')" href="../_variables/filefound.html">$filefound</a> = true;
<a name="l1346"><span class="linenum">1346</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Please standardise your plugin by renaming your portfolio callback file to locallib.php, or if that file already exists moving the portfolio functionality there.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1347"><span class="linenum">1347</span></a>          <span class="keyword">require_once</span> <a class="filename" href="../lib/portfoliolib.php.html" onMouseOver="reqPopup(event, 'portfoliolib.php', '../lib/portfoliolib.php')">($componentloc . '/portfoliolib.php')</a>;
<a name="l1348"><span class="linenum">1348</span></a>      }
<a name="l1349"><span class="linenum">1349</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it27513" onMouseOver="hilite(27513)" onMouseOut="lolite()" onClick="logVariable('componentloc')" href="../_variables/componentloc.html">$componentloc</a> . '/portfolio_callback.php')) {
<a name="l1350"><span class="linenum">1350</span></a>          <a class="var it27514" onMouseOver="hilite(27514)" onMouseOut="lolite()" onClick="logVariable('filefound')" href="../_variables/filefound.html">$filefound</a> = true;
<a name="l1351"><span class="linenum">1351</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Please standardise your plugin by renaming your portfolio callback file to locallib.php, or if that file already exists moving the portfolio functionality there.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1352"><span class="linenum">1352</span></a>          require_once(<a class="var it27513" onMouseOver="hilite(27513)" onMouseOut="lolite()" onClick="logVariable('componentloc')" href="../_variables/componentloc.html">$componentloc</a> . '/portfolio_callback.php');
<a name="l1353"><span class="linenum">1353</span></a>      }
<a name="l1354"><span class="linenum">1354</span></a>  
<a name="l1355"><span class="linenum">1355</span></a>  <span class="comment">    // Ensure that we found a file we can use, if not throw an exception.</span>
<a name="l1356"><span class="linenum">1356</span></a>      if (!<a class="var it27514" onMouseOver="hilite(27514)" onMouseOut="lolite()" onClick="logVariable('filefound')" href="../_variables/filefound.html">$filefound</a>) {
<a name="l1357"><span class="linenum">1357</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('nocallbackfile', 'portfolio', '', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1358"><span class="linenum">1358</span></a>      }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>)) {
<a name="l1361"><span class="linenum">1361</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_button_exception')" href="../_classes/portfolio_button_exception.html" onMouseOver="classPopup(event,'portfolio_button_exception')">portfolio_button_exception</a>('nocallbackclass', 'portfolio', '', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>);
<a name="l1362"><span class="linenum">1362</span></a>      }
<a name="l1363"><span class="linenum">1363</span></a>  }
<a name="l1364"><span class="linenum">1364</span></a>  
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">/**</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment"> * Go through all the @@PLUGINFILE@@ matches in some text,</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment"> * extract the file information and pass it back to the portfolio export format</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment"> * to regenerate the html to output</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment"> *</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment"> * @param string $text the text to search through</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment"> * @param int $contextid normal file_area arguments</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment"> * @param string $component module name</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment"> * @param string $filearea normal file_area arguments</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment"> * @param int $itemid normal file_area arguments</span>
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment"> * @param portfolio_format $format the portfolio export format</span>
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment"> * @param array $options additional options to be included in the plugin file url (optional)</span>
<a name="l1377"><span class="linenum">1377</span></a>  <span class="comment"> * @return mixed</span>
<a name="l1378"><span class="linenum">1378</span></a>  <span class="comment"> */</span>
<a name="l1379"><span class="linenum">1379</span></a>  function <a class="function" onClick="logFunction('portfolio_rewrite_pluginfile_urls')" href="../_functions/portfolio_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'portfolio_rewrite_pluginfile_urls')">portfolio_rewrite_pluginfile_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>=null) {
<a name="l1380"><span class="linenum">1380</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(
<a name="l1381"><span class="linenum">1381</span></a>          '(&lt;(a|A)[^&lt;]*?href=&quot;@@PLUGINFILE@@/[^&gt;]*?&gt;.*?&lt;/(a|A)&gt;)',
<a name="l1382"><span class="linenum">1382</span></a>          '(&lt;(img|IMG)\s[^&lt;]*?src=&quot;@@PLUGINFILE@@/[^&gt;]*?/?&gt;)',
<a name="l1383"><span class="linenum">1383</span></a>      );
<a name="l1384"><span class="linenum">1384</span></a>      <a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> = '~' . <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('|', <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>) . '~';
<a name="l1385"><span class="linenum">1385</span></a>      <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../_variables/callback.html">$callback</a> = <a class="function" onClick="logFunction('partial')" href="../_functions/partial.html" onMouseOver="funcPopup(event,'partial')">partial</a>('portfolio_rewrite_pluginfile_url_callback', <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1386"><span class="linenum">1386</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>, <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../_variables/callback.html">$callback</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1387"><span class="linenum">1387</span></a>  }
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">// this function has to go last, because the regexp screws up syntax highlighting in some editors</span>
<a name="l1389"><span class="linenum">1389</span></a>  
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'portfolio_format_from_mimetype': ['portfolio_format_from_mimetype', 'Deduce export format from file mimetype This function returns the revelant portfolio export format which is used to determine which portfolio plugins can be used for exporting this content according to the given mime type this only works when exporting exactly <b>one</b> file, or generating a new one (like a pdf or csv export) ', [['lib','portfoliolib.php',572]], 3],
'portfolio_existing_exports': ['portfolio_existing_exports', 'Return a list of current exports for the given user. This will not go through and call rewaken_object, because it\'s heavy. It\'s really just used to figure out what exports are currently happening. This is useful for plugins that don\'t support multiple exports per session ', [['lib','portfoliolib.php',1161]], 2],
'display_size': ['display_size', 'Converts bytes into display form ', [['lib','moodlelib.php',6538]], 34],
'portfolio_export_type_to_id': ['portfolio_export_type_to_id', 'Get export type id ', [['lib','portfoliolib.php',1148]], 1],
'get_admins': ['get_admins', 'Returns list of all admins, using 1 DB query ', [['lib','datalib.php',93]], 11],
'get_callbackcomponent': ['get_callbackcomponent', 'Getter for $callbackcomponent property ', [['lib','portfoliolib.php',413]], 0],
'get_admin': ['get_admin', 'Returns $user object of the main admin user ', [['lib','datalib.php',53]], 61],
'portfolio_report_insane': ['portfolio_report_insane', 'Helper function to display a table of plugins (or instances) and reasons for disabling ', [['lib','portfoliolib.php',886]], 1],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'get_component_version': ['get_component_version', 'Returns the version of installed component ', [['lib','adminlib.php',253]], 4],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'set_format_by_file': ['set_format_by_file', 'If we already know we have exactly one file, bypass set_formats and just pass the file so we can detect the formats by mimetype. ', [['lib','portfoliolib.php',201]], 4],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'process_stage_package': ['process_stage_package', 'Processes the \'package\' stage of the export ', [['lib/portfolio','exporter.php',448]], 1],
'instance_sanity_check': ['instance_sanity_check', '', [['portfolio/boxnet','lib.php',206],['portfolio/googledocs','lib.php',206],['portfolio/mahara','lib.php',100],['portfolio/picasa','lib.php',134],['lib/portfolio','plugin.php',139]], 2],
'portfolio_include_callback_file': ['portfolio_include_callback_file', 'Function to require any potential callback files, throwing exceptions if an issue occurs. ', [['lib','portfoliolib.php',1279]], 8],
'portfolio_rewrite_pluginfile_url_callback': ['portfolio_rewrite_pluginfile_url_callback', 'callback function from {@link portfolio_rewrite_pluginfile_urls} looks through preg_replace matches and replaces content with whatever the active portfolio export format says ', [['lib','portfoliolib.php',1216]], 0],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'message_send': ['message_send', 'Called when a message provider wants to send a message. This functions checks the message recipient\'s message processor configuration then sends the message to the configured processors ', [['lib','messagelib.php',29]], 94],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'get_callbackargs': ['get_callbackargs', 'Getter for $callbackargs property ', [['lib','portfoliolib.php',404]], 0],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'portfolio_filesize_info': ['portfolio_filesize_info', 'The default filesizes and threshold information for file based transfers. This shouldn\'t need to be used outside the admin pages and the portfolio code ', [['lib','portfoliolib.php',1024]], 2],
'portfolio_instances': ['portfolio_instances', 'Return all portfolio instances ', [['lib','portfoliolib.php',501]], 8],
'get_file': ['get_file', 'Downloads a repository file and saves to a path. ', [['repository/boxnet','lib.php',179],['repository/flickr_public','lib.php',453],['repository/dropbox','lib.php',410],['repository/skydrive','lib.php',130],['repository','lib.php',1647],['repository/s3','lib.php',227],['repository/equella','lib.php',166],['mod/data/field/picture','field.class.php',126],['mod/data/field/file','field.class.php',123],['repository/googledocs','lib.php',408],['lib/filestorage','file_storage.php',700],['repository/webdav','lib.php',73],['repository/filesystem','lib.php',398],['repository/flickr','lib.php',277],['lib','externallib.php',1076],['repository/dropbox','locallib.php',114],['lib','webdavlib.php',391]], 169],
'portfolio_instance': ['portfolio_instance', 'Helper function to return an instance of a plugin (with config loaded) ', [['lib','portfoliolib.php',757]], 12],
'item': ['item', 'A managed course. ', [['course/yui/src/management/js','item.js',1],['course/yui/build/moodle-course-management','moodle-course-management.js',854],['course/yui/build/moodle-course-management','moodle-course-management-debug.js',864]], 874],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'portfolio_instance_select': ['portfolio_instance_select', 'Returns a drop menu with a list of available instances. ', [['lib','portfoliolib.php',432]], 3],
'render': ['render', 'Renders this element ', [['lib/classes/output','inplace_editable.php',238],['lib/adodb','adodb-pager.inc.php',241],['lib/phpexcel/PHPExcel','Chart.php',656],['lib','formslib.php',948],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',170],['lib','outputrenderers.php',302],['question/behaviour','behaviourbase.php',97],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['filter/tex','latex.php',88],['lib','portfoliolib.php',241],['mod/quiz/classes/question/bank','custom_view.php',133],['lib/mustache/src/Mustache','Engine.php',204],['question/engine/tests','helpers.php',797],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib/mustache/src/Mustache','Template.php',57],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',790],['question/engine','questionattempt.php',814],['lib/mustache/src/Mustache','LambdaHelper.php',39]], 942],
'set_format_by_intended_file': ['set_format_by_intended_file', 'Correllary this is use to set_format_by_file, but it is also used when there is no stored_file and when we\'re writing out a new type of file (like csv or pdf) ', [['lib','portfoliolib.php',221]], 0],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'portfolio_has_visible_instances': ['portfolio_has_visible_instances', 'Return whether there are visible instances in portfolio. ', [['lib','portfoliolib.php',536]], 1],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'portfolio_cron': ['portfolio_cron', 'Main portfolio cronjob. Currently just cleans up expired transfer records. ', [['lib','portfoliolib.php',933]], 1],
'get_navigation': ['get_navigation', 'Returns the navigation ', [['blocks/navigation','block_navigation.php',217],['lib/portfolio','caller.php',513],['mod/forum','locallib.php',151]], 3],
'portfolio_format_text_options': ['portfolio_format_text_options', 'Return default common options for {@link format_text()} when preparing a content to be exported. It is important not to apply filters and not to clean the HTML in format_text() ', [['lib','portfoliolib.php',1198]], 4],
'portfolio_existing_exports_by_plugin': ['portfolio_existing_exports_by_plugin', 'Return an array of existing exports by type for a given user. This is much more lightweight than existing_exports because it only returns the types, rather than the whole serialised data so can be used for checking availability of multiple plugins at the same time. ', [['lib','portfoliolib.php',1182]], 1],
'pix_url': ['pix_url', 'Return the moodle_url for an image. ', [['lib','outputrenderers.php',237],['lib','outputlib.php',1394]], 367],
'sql_compare_text': ['sql_compare_text', 'Returns the SQL text to be used to compare one TEXT (clob) column with one varchar column, because some RDBMS doesn\'t support such direct comparisons. ', [['lib/dml','moodle_database.php',2040]], 95],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'query': ['query', 'Retrieve your YouTube Analytics reports. (reports.query) ', [['lib/google/src/Google/Service','YouTubeAnalytics.php',574],['lib/google/src/Google/Service','Bigquery.php',753],['lib/google/src/Google/Service','Webmasters.php',320],['lib/google/src/Google/Service','Webmasters.php',504],['repository/googledocs','lib.php',288],['lib/adodb','adodb.inc.php',903],['lib/google/src/Google/Service','Calendar.php',1847],['lib/google/src/Google/Service','Dfareporting.php',6223],['lib/google/src/Google/Service','Dfareporting.php',8230]], 282],
'mimeinfo': ['mimeinfo', 'Obtains information about a filetype based on its extension. Will use a default if no information is present about that particular extension. ', [['lib','filelib.php',1422]], 33],
'portfolio_rewrite_pluginfile_urls': ['portfolio_rewrite_pluginfile_urls', 'Go through all the @@PLUGINFILE@@ matches in some text, extract the file information and pass it back to the portfolio export format to regenerate the html to output ', [['lib','portfoliolib.php',1365]], 16],
'get_records_sql_menu': ['get_records_sql_menu', 'Get the first two columns from a number of records as an associative array using a SQL statement. ', [['lib/dml','moodle_database.php',1436]], 30],
'portfolio_plugin_sanity_check': ['portfolio_plugin_sanity_check', 'Helper function to check all the plugins for sanity and set any insane ones to invisible. ', [['lib','portfoliolib.php',817]], 3],
'save': ['save', 'Save PHPExcel to file ', [['lib/phpexcel/PHPExcel/Writer','CSV.php',89],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',48],['question/engine','datalib.php',1531],['lib/adodb','adodb-active-record.inc.php',834],['backup/cc/cc_lib','xmlbase.php',168],['lib/phpexcel/PHPExcel/Writer','HTML.php',139],['availability/condition/grouping/classes','condition.php',71],['availability/tests/fixtures','mock_condition.php',67],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',49],['lib/simplepie/library/SimplePie/Cache','File.php',97],['availability/condition/group/classes','condition.php',60],['completion','completion_aggregation.php',106],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',111],['lib','badgeslib.php',208],['lib/portfolio','exporter.php',638],['mod/assign/submission/file','locallib.php',189],['mod/assign/feedback/comments','locallib.php',323],['lib/phpexcel/PHPExcel/Writer','PDF.php',82],['lib/adodb','adodb-active-recordx.inc.php',943],['lib/simplepie/library/SimplePie/Cache','Base.php',79],['lib/simplepie/library/SimplePie/Cache','MySQL.php',147],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',48],['lib/phpexcel/PHPExcel/Writer','IWriter.php',30],['badges/criteria','award_criteria_overall.php',171],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',175],['availability/classes','tree.php',618],['mod/assign','assignmentplugin.php',190],['availability/condition/completion/classes','condition.php',72],['availability/condition/date/classes','condition.php',75],['lib/lessphp','Parser.php',654],['lib/simplepie/library/SimplePie/Cache','Memcache.php',108],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',50],['availability/condition/profile/classes','condition.php',127],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',137],['mod/assign/submission/onlinetext','locallib.php',182],['mod/assign/feedback/file','locallib.php',257],['mod/assign/feedback/editpdf','locallib.php',252],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',83],['availability/condition/grade/classes','condition.php',77],['badges/criteria','award_criteria.php',354],['lib/portfolio','plugin.php',670],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',476],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',4783],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',270]], 212],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1588]], 138],
'action_icon': ['action_icon', 'Renders an action_icon. ', [['course/classes','management_renderer.php',987],['lib','outputrenderers.php',1694]], 113],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'file_mime_check': ['file_mime_check', 'Override this if you are supporting the \'file\' type (or a subformat) but have restrictions on mimetypes ', [['lib/portfolio','plugin.php',89]], 2],
'file_output': ['file_output', 'Given a file, return a snippet of markup in whatever format to link to that file. Usually involves the path given by get_file_directory. This is not supported in subclasses of portfolio_format_file since they\'re all just single files. ', [['lib/portfolio','formats.php',65],['lib/portfolio','formats.php',169],['lib/portfolio','formats.php',385],['lib/portfolio','formats.php',461],['lib/tests','portfoliolib_test.php',160]], 5],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'conflicts': ['conflicts', 'Whether this format conflicts with the given format. This is used for the case where an export location "generally" supports something like FORMAT_PLAINHTML but then in a specific export case, must add attachments, which means that FORMAT_RICHHTML is supported in that case, which implies removing support for FORMAT_PLAINHTML. Note that conflicts don\'t have to be bi-directional (eg FORMAT_PLAINHTML conflicts with FORMAT_RICHHTML but not the other way around) and things within the class hierarchy are resolved automatically anyway. This is really just between subclasses of format_rich and subclasses of format_file. ', [['lib/portfolio','formats.php',117],['lib/portfolio','formats.php',204],['lib/portfolio','formats.php',248],['lib/portfolio','formats.php',315],['lib/portfolio','formats.php',407]], 2],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'portfolio_export_rethrow_exception': ['portfolio_export_rethrow_exception', 'Helper function to rethrow a caught portfolio_exception as an export exception. Used because when a portfolio_export exception is thrown the export is cancelled throws portfolio_export_exceptiog ', [['lib','portfoliolib.php',967]], 5],
'set_field_select': ['set_field_select', 'Set a single field in every table row where the select statement evaluates to true. ', [['lib/dml','pdo_moodle_database.php',492],['lib/dml','oci_native_moodle_database.php',1436],['lib/dml','pgsql_native_moodle_database.php',1121],['lib/dml','mssql_native_moodle_database.php',1097],['lib/dml','mysqli_native_moodle_database.php',1435],['lib/dml','sqlsrv_native_moodle_database.php',1178],['lib/dml/tests','dml_test.php',5552]], 67],
'get_site': ['get_site', 'Returns $course object of the top-level site. ', [['lib','datalib.php',547]], 77],
'partial': ['partial', 'Generate Mustache Template partial call PHP source. ', [['lib/mustache/src/Mustache','Compiler.php',432],['lib','moodlelib.php',9390]], 6],
'rewaken_object': ['rewaken_object', 'Rewakens the data from the database given the id. Makes sure to load the required files with the class definitions ', [['lib/portfolio','exporter.php',668]], 9],
'portfolio_supported_formats': ['portfolio_supported_formats', 'Supported formats currently in use. Canonical place for a list of all formats that portfolio plugins and callers can use for exporting content ', [['lib','portfoliolib.php',546]], 6],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'is_renderable': ['is_renderable', 'Perform some internal checks. These are not errors, just situations where it\'s not appropriate to add the button ', [['lib','portfoliolib.php',372]], 1],
'to_html': ['to_html', 'Returns html string. ', [['lib','listlib.php',110],['lib','listlib.php',523],['lib','portfoliolib.php',254]], 17],
'portfolio_supported_formats_intersect': ['portfolio_supported_formats_intersect', 'Intersection of plugin formats and caller formats. Walks both the caller formats and portfolio plugin formats and looks for matches (walking the hierarchy as well) and returns the intersection ', [['lib','portfoliolib.php',610]], 3],
'get_formats': ['get_formats', 'Getter for $format property ', [['lib','portfoliolib.php',395],['mod/lti/classes/local/ltiservice','resource_base.php',147]], 3],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'loadhtml': ['loadhtml', '', [['backup/cc/cc_lib','xmlbase.php',112]], 20],
'portfolio_expected_time_file': ['portfolio_expected_time_file', 'Try and determine expected_time for purely file based exports or exports that might include large file attachments. ', [['lib','portfoliolib.php',979]], 3],
'reset_formats': ['reset_formats', 'Reset formats to the default, which is usually what base_supported_formats returns ', [['lib','portfoliolib.php',192]], 1],
'set_callback_options': ['set_callback_options', 'Function to set the callback options ', [['lib','portfoliolib.php',134]], 18],
'input_hidden_params': ['input_hidden_params', 'Returns hidden input fields created from url parameters. ', [['lib','outputcomponents.php',1454]], 16],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'set_formats': ['set_formats', 'Sets the available export formats for this content. This function will also poll the static function in the caller class and make sure we\'re not overriding a format that has nothing to do with mimetypes. Eg: if you pass IMAGE here but the caller can export LEAP2A it will keep LEAP2A as well. ', [['lib','portfoliolib.php',164]], 12],
'portfolio_instance_sanity_check': ['portfolio_instance_sanity_check', 'Helper function to check all the instances for sanity and set any insane ones to invisible. ', [['lib','portfoliolib.php',847]], 6],
'get_callbackclass': ['get_callbackclass', 'Getter for $callbackclass property ', [['lib','portfoliolib.php',422]], 0],
'portfolio_insane_notify_admins': ['portfolio_insane_notify_admins', 'Function to send portfolio report to admins ', [['lib','portfoliolib.php',1067]], 1],
'process_stage_cleanup': ['process_stage_cleanup', 'Processes the \'cleanup\' stage of the export ', [['lib/portfolio','exporter.php',478]], 6],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'get_plugin_types': ['get_plugin_types', 'Lists all plugin types. ', [['lib','deprecatedlib.php',116],['lib/classes','plugin_manager.php',140],['lib/classes','component.php',786]], 60],
'mtrace': ['mtrace', 'Outputs the given message via {@link mtrace()}. ', [['lib/classes','plugin_manager.php',1376],['lib','moodlelib.php',8509]], 406],
'table': ['table', 'Log a table in the firebug console ', [['lib/minify/lib','FirePHP.php',454],['lib/adodb','adodb-perf.inc.php',234],['lib','outputcomponents.php',1497]], 257],
'get_filesize': ['get_filesize', 'Returns file size in bytes, null for directories ', [['lib/filebrowser','file_info.php',268],['lib/filebrowser','virtual_root_file.php',245],['lib/filebrowser','file_info_stored.php',221],['lib/filestorage','stored_file.php',717]], 83],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'get_mimetype': ['get_mimetype', 'Returns mimetype ', [['lib/filebrowser','file_info.php',277],['lib/filebrowser','virtual_root_file.php',254],['lib/filebrowser','file_info_stored.php',240],['lib/filestorage','stored_file.php',738],['lib','medialib.php',192],['lib/portfolio','caller.php',453]], 59],
'portfolio_format_is_abstract': ['portfolio_format_is_abstract', 'Tiny helper to figure out whether a portfolio format is abstract ', [['lib','portfoliolib.php',649]], 3],
'portfolio_most_specific_formats': ['portfolio_most_specific_formats', 'Return the combination of the two arrays of formats with duplicates in terms of specificity removed and also removes conflicting formats. Use case: a module is exporting a single file, so the general formats would be FILE and MBKP while the specific formats would be the specific subclass of FILE based on mime (say IMAGE) and this function would return IMAGE and MBKP ', [['lib','portfoliolib.php',673]], 5],
'supported_formats': ['supported_formats', '', [['portfolio/flickr','lib.php',37],['portfolio/boxnet','lib.php',219],['portfolio/googledocs','lib.php',44],['portfolio/mahara','lib.php',69],['lib/portfolio','caller.php',307],['portfolio/picasa','lib.php',29],['lib/portfolio','plugin.php',77]], 6],
'allows_multiple_exports': ['allows_multiple_exports', 'For now, flickr doesn\'t support this because we can\'t dynamically construct callbackurl ', [['portfolio/flickr','lib.php',250],['portfolio/boxnet','lib.php',227],['lib/portfolio','plugin.php',718]], 3],
'process_stage_send': ['process_stage_send', 'Processes the \'send\' stage of the export ', [['lib/portfolio','exporter.php',502]], 1],
'portfolio_expected_time_db': ['portfolio_expected_time_db', 'Try and determine expected_time for purely database based exports or exports that might include large parts of a database. ', [['lib','portfoliolib.php',1043]], 4],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib','deprecatedlib.php',226],['lib/classes','component.php',1051]], 51],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'portfolio_export_pagesetup': ['portfolio_export_pagesetup', 'Setup page export ', [['lib','portfoliolib.php',1127]], 4],
'portfolio_static_function': ['portfolio_static_function', 'Helper function to call a static function on a portfolio plugin class. This will figure out the classname and require the right file and call the function. You can send a variable number of arguments to this function after the first two and they will be passed on to the function you wish to call. ', [['lib','portfoliolib.php',782]], 10],
'portfolio_format_object': ['portfolio_format_object', 'Helper function to return a format object from the constant ', [['lib','portfoliolib.php',744]], 1],
'is_null': ['is_null', '', [], 2003],
'preg_quote': ['preg_quote', '', [], 205],
'array_values': ['array_values', '', [], 342],
'trim': ['trim', '', [], 1948],
'time': ['time', '', [], 1959],
'is_numeric': ['is_numeric', '', [], 672],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'is_array': ['is_array', '', [], 1608],
'array_pop': ['array_pop', '', [], 483],
'strpos': ['strpos', '', [], 1604],
'implode': ['implode', '', [], 1281],
'get_class': ['get_class', '', [], 305],
'urldecode': ['urldecode', '', [], 53],
'is_string': ['is_string', '', [], 536],
'explode': ['explode', '', [], 1572],
'strrpos': ['strrpos', '', [], 75],
'in_array': ['in_array', '', [], 1234],
'is_object': ['is_object', '', [], 544],
'array_shift': ['array_shift', '', [], 700],
'substr': ['substr', '', [], 2823],
'link': ['link', '', [], 695],
'preg_replace_callback': ['preg_replace_callback', '', [], 136],
'ltrim': ['ltrim', '', [], 92],
'print_r': ['print_r', '', [], 46],
'call_user_func': ['call_user_func', '', [], 113],
'array_merge': ['array_merge', '', [], 2944],
'call_user_func_array': ['call_user_func_array', '', [], 94],
'class_exists': ['class_exists', '', [], 279],
'defined': ['defined', '', [], 4731],
'func_get_args': ['func_get_args', '', [], 147],
'array_key_exists': ['array_key_exists', '', [], 1445],
'preg_replace': ['preg_replace', '', [], 917],
'array_unique': ['array_unique', '', [], 171],
'str_replace': ['str_replace', '', [], 1648],
'array_keys': ['array_keys', '', [], 1256]};
CLASS_DATA={
'html_table': ['html_table', 'Holds all the information required to render a <table> by {@link core_renderer::table()} ', [['lib','outputcomponents.php',2011]], 225],
'portfolio_button_exception': ['portfolio_button_exception', 'Exception for interacting with the button class ', [['lib/portfolio','exceptions.php',119]], 8],
'portfolio_export_exception': ['portfolio_export_exception', 'Exception to throw during an export - will clean up session and tempdata ', [['lib/portfolio','exceptions.php',40]], 32],
'portfolio_exception': ['portfolio_exception', 'Top level portfolio exception. ', [['lib/portfolio','exceptions.php',27]], 16],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'portfolio_exporter': ['portfolio_exporter', 'The class that handles the various stages of the actual export and the communication between the caller and the portfolio plugin. ', [['lib/portfolio','exporter.php',28]], 12],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 275],
'portfolio_add_button': ['portfolio_add_button', 'Use this to add a portfolio button or icon or form to a page. ', [['lib','portfoliolib.php',54]], 13]};
CONST_DATA={
'PORTFOLIO_FORMAT_LEAP2A': ['PORTFOLIO_FORMAT_LEAP2A', '', [['lib/portfolio','constants.php',142]], 15],
'PORTFOLIO_ADD_ICON_LINK': ['PORTFOLIO_ADD_ICON_LINK', '', [['lib/portfolio','constants.php',190]], 8],
'PORTFOLIO_ADD_TEXT_LINK': ['PORTFOLIO_ADD_TEXT_LINK', '', [['lib/portfolio','constants.php',196]], 5],
'PORTFOLIO_FORMAT_PDF': ['PORTFOLIO_FORMAT_PDF', '', [['lib/portfolio','constants.php',117]], 2],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PORTFOLIO_ADD_FAKE_URL': ['PORTFOLIO_ADD_FAKE_URL', '', [['lib/portfolio','constants.php',202]], 2],
'PORTFOLIO_FORMAT_TEXT': ['PORTFOLIO_FORMAT_TEXT', '', [['lib/portfolio','constants.php',112]], 2],
'PORTFOLIO_FORMAT_PRESENTATION': ['PORTFOLIO_FORMAT_PRESENTATION', '', [['lib/portfolio','constants.php',132]], 2],
'PORTFOLIO_FORMAT_SPREADSHEET': ['PORTFOLIO_FORMAT_SPREADSHEET', '', [['lib/portfolio','constants.php',127]], 4],
'PORTFOLIO_FORMAT_PLAINHTML': ['PORTFOLIO_FORMAT_PLAINHTML', '', [['lib/portfolio','constants.php',97]], 17],
'PORTFOLIO_ADD_ICON_FORM': ['PORTFOLIO_ADD_ICON_FORM', '', [['lib/portfolio','constants.php',184]], 3],
'PORTFOLIO_ADD_FULL_FORM': ['PORTFOLIO_ADD_FULL_FORM', '', [['lib/portfolio','constants.php',177]], 6],
'PORTFOLIO_TIME_MODERATE': ['PORTFOLIO_TIME_MODERATE', '', [['lib/portfolio','constants.php',157]], 4],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'PORTFOLIO_FORMAT_VIDEO': ['PORTFOLIO_FORMAT_VIDEO', '', [['lib/portfolio','constants.php',107]], 3],
'PORTFOLIO_TIME_LOW': ['PORTFOLIO_TIME_LOW', '', [['lib/portfolio','constants.php',151]], 14],
'PORTFOLIO_FORMAT_IMAGE': ['PORTFOLIO_FORMAT_IMAGE', '', [['lib/portfolio','constants.php',102]], 4],
'PORTFOLIO_FORMAT_RICH': ['PORTFOLIO_FORMAT_RICH', '', [['lib/portfolio','constants.php',137]], 6],
'PORTFOLIO_FORMAT_FILE': ['PORTFOLIO_FORMAT_FILE', '', [['lib/portfolio','constants.php',80]], 12],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608],
'ADMIN_EDITING_PORTFOLIO': ['ADMIN_EDITING_PORTFOLIO', '', [['admin','portfolio.php',171]], 2],
'PORTFOLIO_FORMAT_RICHHTML': ['PORTFOLIO_FORMAT_RICHHTML', '', [['lib/portfolio','constants.php',92]], 19],
'PORTFOLIO_TIME_HIGH': ['PORTFOLIO_TIME_HIGH', '', [['lib/portfolio','constants.php',163]], 4],
'PORTFOLIO_FORMAT_DOCUMENT': ['PORTFOLIO_FORMAT_DOCUMENT', '', [['lib/portfolio','constants.php',122]], 2]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
