<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of questionlib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='questionlib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="questionlib.php.source.html">questionlib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="questionlib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>Code for handling and processing questions This is code that is module independent, i.e., can be used by any module that uses questions, like quiz, lesson, .. This script also loads the questiontype classes Code for handling the editing of questions is in {@link question/editlib.php}</b></p>
<table>
<tr><td align="right">Copyright: </td><td>1999 onwards Martin Dougiamas and others {@link http://moodle.com}</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>1973 lines (72 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 2 classes</h3>
<div class="inset">
<p><b>context_to_string_translator::</b> (10 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#context_to_string">context_to_string</a>()<br>
&nbsp;&nbsp;<a href="#string_to_context">string_to_context</a>()<br>
&nbsp;&nbsp;<a href="#generate_context_to_string_array">generate_context_to_string_array</a>()<br>
&nbsp;&nbsp;<a href="#question_has_capability_on">question_has_capability_on</a>()<br>
&nbsp;&nbsp;<a href="#question_require_capability_on">question_require_capability_on</a>()<br>
&nbsp;&nbsp;<a href="#question_edit_url">question_edit_url</a>()<br>
&nbsp;&nbsp;<a href="#question_extend_settings_navigation">question_extend_settings_navigation</a>()<br>
&nbsp;&nbsp;<a href="#question_get_question_capabilities">question_get_question_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#question_get_all_capabilities">question_get_all_capabilities</a>()<br>
</p>
<p><b>question_edit_contexts::</b> (20 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#all">all</a>()<br>
&nbsp;&nbsp;<a href="#lowest">lowest</a>()<br>
&nbsp;&nbsp;<a href="#having_cap">having_cap</a>()<br>
&nbsp;&nbsp;<a href="#having_one_cap">having_one_cap</a>()<br>
&nbsp;&nbsp;<a href="#having_one_edit_tab_cap">having_one_edit_tab_cap</a>()<br>
&nbsp;&nbsp;<a href="#having_add_and_use">having_add_and_use</a>()<br>
&nbsp;&nbsp;<a href="#have_cap">have_cap</a>()<br>
&nbsp;&nbsp;<a href="#have_one_cap">have_one_cap</a>()<br>
&nbsp;&nbsp;<a href="#have_one_edit_tab_cap">have_one_edit_tab_cap</a>()<br>
&nbsp;&nbsp;<a href="#require_cap">require_cap</a>()<br>
&nbsp;&nbsp;<a href="#require_one_cap">require_one_cap</a>()<br>
&nbsp;&nbsp;<a href="#require_one_edit_tab_cap">require_one_edit_tab_cap</a>()<br>
&nbsp;&nbsp;<a href="#question_rewrite_question_urls">question_rewrite_question_urls</a>()<br>
&nbsp;&nbsp;<a href="#question_rewrite_question_preview_urls">question_rewrite_question_preview_urls</a>()<br>
&nbsp;&nbsp;<a href="#question_pluginfile">question_pluginfile</a>()<br>
&nbsp;&nbsp;<a href="#core_question_question_preview_pluginfile">core_question_question_preview_pluginfile</a>()<br>
&nbsp;&nbsp;<a href="#question_make_export_url">question_make_export_url</a>()<br>
&nbsp;&nbsp;<a href="#question_page_type_list">question_page_type_list</a>()<br>
&nbsp;&nbsp;<a href="#question_module_uses_questions">question_module_uses_questions</a>()<br>
</p>
</div>
<h3>Defines 20 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#question_reorder_qtypes">question_reorder_qtypes</a>()<br>
&nbsp;&nbsp;<a href="#question_save_qtype_order">question_save_qtype_order</a>()<br>
&nbsp;&nbsp;<a href="#questions_in_use">questions_in_use</a>()<br>
&nbsp;&nbsp;<a href="#question_context_has_any_questions">question_context_has_any_questions</a>()<br>
&nbsp;&nbsp;<a href="#match_grade_options">match_grade_options</a>()<br>
&nbsp;&nbsp;<a href="#question_category_in_use">question_category_in_use</a>()<br>
&nbsp;&nbsp;<a href="#question_delete_question">question_delete_question</a>()<br>
&nbsp;&nbsp;<a href="#question_delete_course">question_delete_course</a>()<br>
&nbsp;&nbsp;<a href="#question_delete_course_category">question_delete_course_category</a>()<br>
&nbsp;&nbsp;<a href="#question_save_from_deletion">question_save_from_deletion</a>()<br>
&nbsp;&nbsp;<a href="#question_delete_activity">question_delete_activity</a>()<br>
&nbsp;&nbsp;<a href="#question_move_questions_to_category">question_move_questions_to_category</a>()<br>
&nbsp;&nbsp;<a href="#question_move_category_to_context">question_move_category_to_context</a>()<br>
&nbsp;&nbsp;<a href="#question_preview_url">question_preview_url</a>()<br>
&nbsp;&nbsp;<a href="#question_preview_popup_params">question_preview_popup_params</a>()<br>
&nbsp;&nbsp;<a href="#question_preload_questions">question_preload_questions</a>()<br>
&nbsp;&nbsp;<a href="#question_load_questions">question_load_questions</a>()<br>
&nbsp;&nbsp;<a href="#_tidy_question">_tidy_question</a>()<br>
&nbsp;&nbsp;<a href="#get_question_options">get_question_options</a>()<br>
&nbsp;&nbsp;<a href="#print_question_icon">print_question_icon</a>()<br>
&nbsp;&nbsp;<a href="#question_hash">question_hash</a>()<br>
&nbsp;&nbsp;<a href="#sort_categories_by_tree">sort_categories_by_tree</a>()<br>
&nbsp;&nbsp;<a href="#flatten_category_tree">flatten_category_tree</a>()<br>
&nbsp;&nbsp;<a href="#add_indented_names">add_indented_names</a>()<br>
&nbsp;&nbsp;<a href="#question_category_select_menu">question_category_select_menu</a>()<br>
&nbsp;&nbsp;<a href="#question_get_default_category">question_get_default_category</a>()<br>
&nbsp;&nbsp;<a href="#question_make_default_categories">question_make_default_categories</a>()<br>
&nbsp;&nbsp;<a href="#get_categories_for_contexts">get_categories_for_contexts</a>()<br>
&nbsp;&nbsp;<a href="#question_category_options">question_category_options</a>()<br>
&nbsp;&nbsp;<a href="#question_add_context_in_key">question_add_context_in_key</a>()<br>
&nbsp;&nbsp;<a href="#question_add_tops">question_add_tops</a>()<br>
&nbsp;&nbsp;<a href="#question_categorylist">question_categorylist</a>()<br>
&nbsp;&nbsp;<a href="#get_import_export_formats">get_import_export_formats</a>()<br>
&nbsp;&nbsp;<a href="#question_default_export_filename">question_default_export_filename</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_to_string_translator"><b>context_to_string_translator</b></a>&nbsp;&nbsp;- <a href="../_classes/context_to_string_translator.html"><small>X-Ref</small></a>
</p>
<b>Converts contextlevels to strings and back to help with reading/writing contexts<BR>
to/from import/export files.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'questionlib.php.source.html#l1269')" href="questionlib.php.source.html#l1269">__construct</a>(<a href="../_variables/contexts.html">$contexts</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="context_to_string" onClick="logFunction('context_to_string', 'questionlib.php.source.html#l1273')" href="questionlib.php.source.html#l1273">context_to_string</a>(<a href="../_variables/contextid.html">$contextid</a>)&nbsp;&nbsp;
<a href="../_functions/context_to_string.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="string_to_context" onClick="logFunction('string_to_context', 'questionlib.php.source.html#l1277')" href="questionlib.php.source.html#l1277">string_to_context</a>(<a href="../_variables/contextname.html">$contextname</a>)&nbsp;&nbsp;
<a href="../_functions/string_to_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="generate_context_to_string_array" onClick="logFunction('generate_context_to_string_array', 'questionlib.php.source.html#l1282')" href="questionlib.php.source.html#l1282">generate_context_to_string_array</a>(<a href="../_variables/contexts.html">$contexts</a>)&nbsp;&nbsp;
<a href="../_functions/generate_context_to_string_array.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_has_capability_on" onClick="logFunction('question_has_capability_on', 'questionlib.php.source.html#l1308')" href="questionlib.php.source.html#l1308">question_has_capability_on</a>(<a href="../_variables/question.html">$question</a>, <a href="../_variables/cap.html">$cap</a>, <a href="../_variables/cachecat.html">$cachecat</a> = -1)&nbsp;&nbsp;
<a href="../_functions/question_has_capability_on.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check capability on category<BR>
</b><BR><b>param:</b> mixed $question object or id<br>
<b>param:</b> string $cap 'add', 'edit', 'view', 'use', 'move'<br>
<b>param:</b> integer $cachecat useful to cache all question records in a category<br>
<b>return:</b> boolean this user has the capability $cap for this question $question?<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_require_capability_on" onClick="logFunction('question_require_capability_on', 'questionlib.php.source.html#l1368')" href="questionlib.php.source.html#l1368">question_require_capability_on</a>(<a href="../_variables/question.html">$question</a>, <a href="../_variables/cap.html">$cap</a>)&nbsp;&nbsp;
<a href="../_functions/question_require_capability_on.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Require capability on question.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_edit_url" onClick="logFunction('question_edit_url', 'questionlib.php.source.html#l1382')" href="questionlib.php.source.html#l1382">question_edit_url</a>(<a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/question_edit_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> object $context a context<br>
<b>return:</b> string A URL for editing questions in this context.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_extend_settings_navigation" onClick="logFunction('question_extend_settings_navigation', 'questionlib.php.source.html#l1407')" href="questionlib.php.source.html#l1407">question_extend_settings_navigation</a>(navigation_node <a href="../_variables/navigationnode.html">$navigationnode</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/question_extend_settings_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds question bank setting links to the given navigation node if caps are met.<BR>
</b><BR><b>param:</b> navigation_node $navigationnode The navigation node to add the question branch to<br>
<b>param:</b> object $context<br>
<b>return:</b> navigation_node Returns the question branch that was added<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_get_question_capabilities" onClick="logFunction('question_get_question_capabilities', 'questionlib.php.source.html#l1456')" href="questionlib.php.source.html#l1456">question_get_question_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/question_get_question_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array all the capabilities that relate to accessing particular questions.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_get_all_capabilities" onClick="logFunction('question_get_all_capabilities', 'questionlib.php.source.html#l1473')" href="questionlib.php.source.html#l1473">question_get_all_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/question_get_all_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array all the question bank capabilities.<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="question_edit_contexts"><b>question_edit_contexts</b></a>&nbsp;&nbsp;- <a href="../_classes/question_edit_contexts.html"><small>X-Ref</small></a>
</p>
<b>Tracks all the contexts related to the one where we are currently editing<BR>
questions, and provides helper methods to check permissions.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'questionlib.php.source.html#l1513')" href="questionlib.php.source.html#l1513">__construct</a>(context <a href="../_variables/thiscontext.html">$thiscontext</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> context the current context.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="all" onClick="logFunction('all', 'questionlib.php.source.html#l1524')" href="questionlib.php.source.html#l1524">all</a>()&nbsp;&nbsp;
<a href="../_functions/all.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array all parent contexts<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lowest" onClick="logFunction('lowest', 'questionlib.php.source.html#l1531')" href="questionlib.php.source.html#l1531">lowest</a>()&nbsp;&nbsp;
<a href="../_functions/lowest.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> object lowest context which must be either the module or course context<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="having_cap" onClick="logFunction('having_cap', 'questionlib.php.source.html#l1539')" href="questionlib.php.source.html#l1539">having_cap</a>(<a href="../_variables/cap.html">$cap</a>)&nbsp;&nbsp;
<a href="../_functions/having_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> string $cap capability<br>
<b>return:</b> array parent contexts having capability, zero based index<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="having_one_cap" onClick="logFunction('having_one_cap', 'questionlib.php.source.html#l1553')" href="questionlib.php.source.html#l1553">having_one_cap</a>(<a href="../_variables/caps.html">$caps</a>)&nbsp;&nbsp;
<a href="../_functions/having_one_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> array $caps capabilities<br>
<b>return:</b> array parent contexts having at least one of $caps, zero based index<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="having_one_edit_tab_cap" onClick="logFunction('having_one_edit_tab_cap', 'questionlib.php.source.html#l1570')" href="questionlib.php.source.html#l1570">having_one_edit_tab_cap</a>(<a href="../_variables/tabname.html">$tabname</a>)&nbsp;&nbsp;
<a href="../_functions/having_one_edit_tab_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> string $tabname edit tab name<br>
<b>return:</b> array parent contexts having at least one of $caps, zero based index<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="having_add_and_use" onClick="logFunction('having_add_and_use', 'questionlib.php.source.html#l1577')" href="questionlib.php.source.html#l1577">having_add_and_use</a>()&nbsp;&nbsp;
<a href="../_functions/having_add_and_use.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> those contexts where a user can add a question and then use it.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="have_cap" onClick="logFunction('have_cap', 'questionlib.php.source.html#l1591')" href="questionlib.php.source.html#l1591">have_cap</a>(<a href="../_variables/cap.html">$cap</a>)&nbsp;&nbsp;
<a href="../_functions/have_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Has at least one parent context got the cap $cap?<BR>
</b><BR><b>param:</b> string $cap capability<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="have_one_cap" onClick="logFunction('have_one_cap', 'questionlib.php.source.html#l1601')" href="questionlib.php.source.html#l1601">have_one_cap</a>(<a href="../_variables/caps.html">$caps</a>)&nbsp;&nbsp;
<a href="../_functions/have_one_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Has at least one parent context got one of the caps $caps?<BR>
</b><BR><b>param:</b> array $caps capability<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="have_one_edit_tab_cap" onClick="logFunction('have_one_edit_tab_cap', 'questionlib.php.source.html#l1616')" href="questionlib.php.source.html#l1616">have_one_edit_tab_cap</a>(<a href="../_variables/tabname.html">$tabname</a>)&nbsp;&nbsp;
<a href="../_functions/have_one_edit_tab_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Has at least one parent context got one of the caps for actions on $tabname<BR>
</b><BR><b>param:</b> string $tabname edit tab name<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="require_cap" onClick="logFunction('require_cap', 'questionlib.php.source.html#l1626')" href="questionlib.php.source.html#l1626">require_cap</a>(<a href="../_variables/cap.html">$cap</a>)&nbsp;&nbsp;
<a href="../_functions/require_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Throw error if at least one parent context hasn't got the cap $cap<BR>
</b><BR><b>param:</b> string $cap capability<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="require_one_cap" onClick="logFunction('require_one_cap', 'questionlib.php.source.html#l1637')" href="questionlib.php.source.html#l1637">require_one_cap</a>(<a href="../_variables/caps.html">$caps</a>)&nbsp;&nbsp;
<a href="../_functions/require_one_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Throw error if at least one parent context hasn't got one of the caps $caps<BR>
</b><BR><b>param:</b> array $cap capabilities<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="require_one_edit_tab_cap" onClick="logFunction('require_one_edit_tab_cap', 'questionlib.php.source.html#l1649')" href="questionlib.php.source.html#l1649">require_one_edit_tab_cap</a>(<a href="../_variables/tabname.html">$tabname</a>)&nbsp;&nbsp;
<a href="../_functions/require_one_edit_tab_cap.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Throw error if at least one parent context hasn't got one of the caps $caps<BR>
</b><BR><b>param:</b> string $tabname edit tab name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_rewrite_question_urls" onClick="logFunction('question_rewrite_question_urls', 'questionlib.php.source.html#l1662')" href="questionlib.php.source.html#l1662">question_rewrite_question_urls</a>(<a href="../_variables/text.html">$text</a>, <a href="../_variables/file.html">$file</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>,<a href="../_variables/filearea.html">$filearea</a>, array <a href="../_variables/ids.html">$ids</a>, <a href="../_variables/itemid.html">$itemid</a>, array <a href="../_variables/options.html">$options</a>=null)&nbsp;&nbsp;
<a href="../_functions/question_rewrite_question_urls.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Helps call file_rewrite_pluginfile_urls with the right parameters.<BR>
</b><BR><b>param:</b> string $text text being processed<br>
<b>param:</b> string $file the php script used to serve files<br>
<b>param:</b> int $contextid context ID<br>
<b>param:</b> string $component component<br>
<b>param:</b> string $filearea filearea<br>
<b>param:</b> array $ids other IDs will be used to check file permission<br>
<b>param:</b> int $itemid item ID<br>
<b>param:</b> array $options options<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_rewrite_question_preview_urls" onClick="logFunction('question_rewrite_question_preview_urls', 'questionlib.php.source.html#l1691')" href="questionlib.php.source.html#l1691">question_rewrite_question_preview_urls</a>(<a href="../_variables/text.html">$text</a>, <a href="../_variables/questionid.html">$questionid</a>,<a href="../_variables/filecontextid.html">$filecontextid</a>, <a href="../_variables/filecomponent.html">$filecomponent</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>,<a href="../_variables/previewcontextid.html">$previewcontextid</a>, <a href="../_variables/previewcomponent.html">$previewcomponent</a>, <a href="../_variables/options.html">$options</a> = null)&nbsp;&nbsp;
<a href="../_functions/question_rewrite_question_preview_urls.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rewrite the PLUGINFILE urls in part of the content of a question, for use when<BR>
viewing the question outside an attempt (for example, in the question bank<BR>
listing or in the quiz statistics report).<BR>
</b><BR><b>param:</b> string $text the question text.<br>
<b>param:</b> int $questionid the question id.<br>
<b>param:</b> int $filecontextid the context id of the question being displayed.<br>
<b>param:</b> string $filecomponent the component that owns the file area.<br>
<b>param:</b> string $filearea the file area name.<br>
<b>param:</b> int|null $itemid the file's itemid<br>
<b>param:</b> int $previewcontextid the context id where the preview is being displayed.<br>
<b>param:</b> string $previewcomponent component responsible for displaying the preview.<br>
<b>param:</b> array $options text and file options ('forcehttps'=&gt;false)<br>
<b>return:</b> string $questiontext with URLs rewritten.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_pluginfile" onClick="logFunction('question_pluginfile', 'questionlib.php.source.html#l1720')" href="questionlib.php.source.html#l1720">question_pluginfile</a>(<a href="../_variables/course.html">$course</a>, <a href="../_variables/context.html">$context</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/args.html">$args</a>, <a href="../_variables/forcedownload.html">$forcedownload</a>, array <a href="../_variables/options.html">$options</a>=array()&nbsp;&nbsp;
<a href="../_functions/question_pluginfile.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called by pluginfile.php to serve files related to the 'question' core<BR>
component and for files belonging to qtypes.<BR>
</b><BR>For files that relate to questions in a question_attempt, then we delegate to<BR>
a function in the component that owns the attempt (for example in the quiz,<BR>
or in core question preview) to get necessary inforation.<BR>
<BR>
(Note that, at the moment, all question file areas relate to questions in<BR>
attempts, so the If at the start of the last paragraph is always true.)<BR>
<BR>
Does not return, either calls send_file_not_found(); or serves the file.<BR>
<BR>
<b>param:</b> stdClass $course course settings object<br>
<b>param:</b> stdClass $context context object<br>
<b>param:</b> string $component the name of the component we are serving files for.<br>
<b>param:</b> string $filearea the name of the file area.<br>
<b>param:</b> array $args the remaining bits of the file path.<br>
<b>param:</b> bool $forcedownload whether the user must be forced to download the file.<br>
<b>param:</b> array $options additional options affecting the file serving<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="core_question_question_preview_pluginfile" onClick="logFunction('core_question_question_preview_pluginfile', 'questionlib.php.source.html#l1871')" href="questionlib.php.source.html#l1871">core_question_question_preview_pluginfile</a>(<a href="../_variables/previewcontext.html">$previewcontext</a>, <a href="../_variables/questionid.html">$questionid</a>,<a href="../_variables/filecontext.html">$filecontext</a>, <a href="../_variables/filecomponent.html">$filecomponent</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/args.html">$args</a>, <a href="../_variables/forcedownload.html">$forcedownload</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/core_question_question_preview_pluginfile.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Serve questiontext files in the question text when they are displayed in this report.<BR>
</b><BR><b>param:</b> context $previewcontext the context in which the preview is happening.<br>
<b>param:</b> int $questionid the question id.<br>
<b>param:</b> context $filecontext the file (question) context.<br>
<b>param:</b> string $filecomponent the component the file belongs to.<br>
<b>param:</b> string $filearea the file area.<br>
<b>param:</b> array $args remaining file args.<br>
<b>param:</b> bool $forcedownload.<br>
<b>param:</b> array $options additional options affecting the file serving.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_make_export_url" onClick="logFunction('question_make_export_url', 'questionlib.php.source.html#l1913')" href="questionlib.php.source.html#l1913">question_make_export_url</a>(<a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/categoryid.html">$categoryid</a>, <a href="../_variables/format.html">$format</a>, <a href="../_variables/withcategories.html">$withcategories</a>,<a href="../_variables/withcontexts.html">$withcontexts</a>, <a href="../_variables/filename.html">$filename</a>)&nbsp;&nbsp;
<a href="../_functions/question_make_export_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create url for question export<BR>
</b><BR><b>param:</b> int $contextid, current context<br>
<b>param:</b> int $categoryid, categoryid<br>
<b>param:</b> string $format<br>
<b>param:</b> string $withcategories<br>
<b>param:</b> string $ithcontexts<br>
<b>param:</b> moodle_url export file url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_page_type_list" onClick="logFunction('question_page_type_list', 'questionlib.php.source.html#l1932')" href="questionlib.php.source.html#l1932">question_page_type_list</a>(<a href="../_variables/pagetype.html">$pagetype</a>, <a href="../_variables/parentcontext.html">$parentcontext</a>, <a href="../_variables/currentcontext.html">$currentcontext</a>)&nbsp;&nbsp;
<a href="../_functions/question_page_type_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return a list of page types<BR>
</b><BR><b>param:</b> string $pagetype current page type<br>
<b>param:</b> stdClass $parentcontext Block's parent context<br>
<b>param:</b> stdClass $currentcontext Current context of block<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_module_uses_questions" onClick="logFunction('question_module_uses_questions', 'questionlib.php.source.html#l1955')" href="questionlib.php.source.html#l1955">question_module_uses_questions</a>(<a href="../_variables/modname.html">$modname</a>)&nbsp;&nbsp;
<a href="../_functions/question_module_uses_questions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does an activity module use the question bank?<BR>
</b><BR><b>param:</b> string $modname The name of the module (without mod_ prefix).<br>
<b>return:</b> bool true if the module uses questions.<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_reorder_qtypes" onClick="logFunction('question_reorder_qtypes', 'questionlib.php.source.html#l64')" href="questionlib.php.source.html#l64">question_reorder_qtypes</a>(<a href="../_variables/sortedqtypes.html">$sortedqtypes</a>, <a href="../_variables/tomove.html">$tomove</a>, <a href="../_variables/direction.html">$direction</a>)&nbsp;&nbsp;
<a href="../_functions/question_reorder_qtypes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Move one question type in a list of question types. If you try to move one element<BR>
off of the end, nothing will change.<BR>
</b><BR><b>param:</b> array $sortedqtypes An array $qtype =&gt; anything.<br>
<b>param:</b> string $tomove one of the keys from $sortedqtypes<br>
<b>param:</b> integer $direction +1 or -1<br>
<b>return:</b> array an array $index =&gt; $qtype, with $index from 0 to n in order, and<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_save_qtype_order" onClick="logFunction('question_save_qtype_order', 'questionlib.php.source.html#l94')" href="questionlib.php.source.html#l94">question_save_qtype_order</a>(<a href="../_variables/neworder.html">$neworder</a>, <a href="../_variables/config.html">$config</a> = null)&nbsp;&nbsp;
<a href="../_functions/question_save_qtype_order.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Save a new question type order to the config_plugins table.<BR>
</b><BR><b>param:</b> $neworder An arra $index =&gt; $qtype. Indices should start at 0 and be in order.<br>
<b>param:</b> $config get_config('question'), if you happen to have it around, to save one DB query.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="questions_in_use" onClick="logFunction('questions_in_use', 'questionlib.php.source.html#l121')" href="questionlib.php.source.html#l121">questions_in_use</a>(<a href="../_variables/questionids.html">$questionids</a>)&nbsp;&nbsp;
<a href="../_functions/questions_in_use.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> array $questionids of question ids.<br>
<b>return:</b> boolean whether any of these questions are being used by any part of Moodle.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_context_has_any_questions" onClick="logFunction('question_context_has_any_questions', 'questionlib.php.source.html#l157')" href="questionlib.php.source.html#l157">question_context_has_any_questions</a>(<a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/question_context_has_any_questions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determine whether there arey any questions belonging to this context, that is whether any of its<BR>
question categories contain any questions. This will return true even if all the questions are<BR>
hidden.<BR>
</b><BR><b>param:</b> mixed $context either a context object, or a context id.<br>
<b>return:</b> boolean whether any of the question categories beloning to this context have<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="match_grade_options" onClick="logFunction('match_grade_options', 'questionlib.php.source.html#l181')" href="questionlib.php.source.html#l181">match_grade_options</a>(<a href="../_variables/gradeoptionsfull.html">$gradeoptionsfull</a>, <a href="../_variables/grade.html">$grade</a>, <a href="../_variables/matchgrades.html">$matchgrades</a> = 'error')&nbsp;&nbsp;
<a href="../_functions/match_grade_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check whether a given grade is one of a list of allowed options. If not,<BR>
depending on $matchgrades, either return the nearest match, or return false<BR>
to signal an error.<BR>
</b><BR><b>param:</b> array $gradeoptionsfull list of valid options<br>
<b>param:</b> int $grade grade to be tested<br>
<b>param:</b> string $matchgrades 'error' or 'nearest'<br>
<b>return:</b> mixed either 'fixed' value or false if error.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_category_in_use" onClick="logFunction('question_category_in_use', 'questionlib.php.source.html#l223')" href="questionlib.php.source.html#l223">question_category_in_use</a>(<a href="../_variables/categoryid.html">$categoryid</a>, <a href="../_variables/recursive.html">$recursive</a> = false)&nbsp;&nbsp;
<a href="../_functions/question_category_in_use.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Tests whether any question in a category is used by any part of Moodle.<BR>
</b><BR><b>param:</b> integer $categoryid a question category id.<br>
<b>param:</b> boolean $recursive whether to check child categories too.<br>
<b>return:</b> boolean whether any question in this category is in use.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_delete_question" onClick="logFunction('question_delete_question', 'questionlib.php.source.html#l257')" href="questionlib.php.source.html#l257">question_delete_question</a>(<a href="../_variables/questionid.html">$questionid</a>)&nbsp;&nbsp;
<a href="../_functions/question_delete_question.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes question and all associated data from the database<BR>
</b><BR>It will not delete a question if it is used by an activity module<BR>
<b>param:</b> object $question&nbsp;&nbsp;The question being deleted<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_delete_course" onClick="logFunction('question_delete_course', 'questionlib.php.source.html#l308')" href="questionlib.php.source.html#l308">question_delete_course</a>(<a href="../_variables/course.html">$course</a>, <a href="../_variables/feedback.html">$feedback</a>=true)&nbsp;&nbsp;
<a href="../_functions/question_delete_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>All question categories and their questions are deleted for this course.<BR>
</b><BR><b>param:</b> stdClass $course an object representing the activity<br>
<b>param:</b> boolean $feedback to specify if the process must output a summary of its work<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_delete_course_category" onClick="logFunction('question_delete_course_category', 'questionlib.php.source.html#l361')" href="questionlib.php.source.html#l361">question_delete_course_category</a>(<a href="../_variables/category.html">$category</a>, <a href="../_variables/newcategory.html">$newcategory</a>, <a href="../_variables/feedback.html">$feedback</a>=true)&nbsp;&nbsp;
<a href="../_functions/question_delete_course_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Category is about to be deleted,<BR>
1/ All question categories and their questions are deleted for this course category.<BR>
2/ All questions are moved to new category<BR>
</b><BR><b>param:</b> object|coursecat $category course category object<br>
<b>param:</b> object|coursecat $newcategory empty means everything deleted, otherwise id of<br>
<b>param:</b> boolean $feedback to specify if the process must output a summary of its work<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_save_from_deletion" onClick="logFunction('question_save_from_deletion', 'questionlib.php.source.html#l459')" href="questionlib.php.source.html#l459">question_save_from_deletion</a>(<a href="../_variables/questionids.html">$questionids</a>, <a href="../_variables/newcontextid.html">$newcontextid</a>, <a href="../_variables/oldplace.html">$oldplace</a>,<a href="../_variables/newcategory.html">$newcategory</a> = null)&nbsp;&nbsp;
<a href="../_functions/question_save_from_deletion.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Enter description here...<BR>
</b><BR><b>param:</b> array $questionids of question ids<br>
<b>param:</b> object $newcontext the context to create the saved category in.<br>
<b>param:</b> string $oldplace a textual description of the think being deleted,<br>
<b>param:</b> object $newcategory<br>
<b>return:</b> mixed false on<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_delete_activity" onClick="logFunction('question_delete_activity', 'questionlib.php.source.html#l492')" href="questionlib.php.source.html#l492">question_delete_activity</a>(<a href="../_variables/cm.html">$cm</a>, <a href="../_variables/feedback.html">$feedback</a>=true)&nbsp;&nbsp;
<a href="../_functions/question_delete_activity.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>All question categories and their questions are deleted for this activity.<BR>
</b><BR><b>param:</b> object $cm the course module object representing the activity<br>
<b>param:</b> boolean $feedback to specify if the process must output a summary of its work<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_move_questions_to_category" onClick="logFunction('question_move_questions_to_category', 'questionlib.php.source.html#l542')" href="questionlib.php.source.html#l542">question_move_questions_to_category</a>(<a href="../_variables/questionids.html">$questionids</a>, <a href="../_variables/newcategoryid.html">$newcategoryid</a>)&nbsp;&nbsp;
<a href="../_functions/question_move_questions_to_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function should be considered private to the question bank, it is called from<BR>
question/editlib.php question/contextmoveq.php and a few similar places to to the<BR>
work of acutally moving questions and associated data. However, callers of this<BR>
function also have to do other work, which is why you should not call this method<BR>
directly from outside the questionbank.<BR>
</b><BR><b>param:</b> array $questionids of question ids.<br>
<b>param:</b> integer $newcategoryid the id of the category to move to.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_move_category_to_context" onClick="logFunction('question_move_category_to_context', 'questionlib.php.source.html#l592')" href="questionlib.php.source.html#l592">question_move_category_to_context</a>(<a href="../_variables/categoryid.html">$categoryid</a>, <a href="../_variables/oldcontextid.html">$oldcontextid</a>, <a href="../_variables/newcontextid.html">$newcontextid</a>)&nbsp;&nbsp;
<a href="../_functions/question_move_category_to_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function helps move a question cateogry to a new context by moving all<BR>
the files belonging to all the questions to the new context.<BR>
Also moves subcategories.<BR>
</b><BR><b>param:</b> integer $categoryid the id of the category being moved.<br>
<b>param:</b> integer $oldcontextid the old context id.<br>
<b>param:</b> integer $newcontextid the new context id.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_preview_url" onClick="logFunction('question_preview_url', 'questionlib.php.source.html#l628')" href="questionlib.php.source.html#l628">question_preview_url</a>(<a href="../_variables/questionid.html">$questionid</a>, <a href="../_variables/preferredbehaviour.html">$preferredbehaviour</a> = null,<a href="../_variables/maxmark.html">$maxmark</a> = null, <a href="../_variables/displayoptions.html">$displayoptions</a> = null, <a href="../_variables/variant.html">$variant</a> = null, <a href="../_variables/context.html">$context</a> = null)&nbsp;&nbsp;
<a href="../_functions/question_preview_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generate the URL for starting a new preview of a given question with the given options.<BR>
</b><BR><b>param:</b> integer $questionid the question to preview.<br>
<b>param:</b> string $preferredbehaviour the behaviour to use for the preview.<br>
<b>param:</b> float $maxmark the maximum to mark the question out of.<br>
<b>param:</b> question_display_options $displayoptions the display options to use.<br>
<b>param:</b> int $variant the variant of the question to preview. If null, one will<br>
<b>param:</b> object $context context to run the preview in (affects things like<br>
<b>return:</b> moodle_url the URL.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_preview_popup_params" onClick="logFunction('question_preview_popup_params', 'questionlib.php.source.html#l683')" href="questionlib.php.source.html#l683">question_preview_popup_params</a>()&nbsp;&nbsp;
<a href="../_functions/question_preview_popup_params.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array that can be passed as $params to the {@link popup_action} constructor.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_preload_questions" onClick="logFunction('question_preload_questions', 'questionlib.php.source.html#l690')" href="questionlib.php.source.html#l690">question_preload_questions</a>(<a href="../_variables/questionids.html">$questionids</a> = null, <a href="../_variables/extrafields.html">$extrafields</a> = '', <a href="../_variables/join.html">$join</a> = '',<a href="../_variables/extraparams.html">$extraparams</a> = array()&nbsp;&nbsp;
<a href="../_functions/question_preload_questions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given a list of ids, load the basic information about a set of questions from<BR>
the questions table. The $join and $extrafields arguments can be used together<BR>
to pull in extra data. See, for example, the usage in mod/quiz/attemptlib.php, and<BR>
read the code below to see how the SQL is assembled. Throws exceptions on error.<BR>
</b><BR><b>param:</b> array $questionids array of question ids to load. If null, then all<br>
<b>param:</b> string $extrafields extra SQL code to be added to the query.<br>
<b>param:</b> string $join extra SQL code to be added to the query.<br>
<b>param:</b> array $extraparams values for any placeholders in $join.<br>
<b>param:</b> string $orderby what to order the results by. Optional, default is unspecified order.<br>
<b>return:</b> array partially complete question objects. You need to call get_question_options<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_load_questions" onClick="logFunction('question_load_questions', 'questionlib.php.source.html#l752')" href="questionlib.php.source.html#l752">question_load_questions</a>(<a href="../_variables/questionids.html">$questionids</a>, <a href="../_variables/extrafields.html">$extrafields</a> = '', <a href="../_variables/join.html">$join</a> = '')&nbsp;&nbsp;
<a href="../_functions/question_load_questions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load a set of questions, given a list of ids. The $join and $extrafields arguments can be used<BR>
together to pull in extra data. See, for example, the usage in mod/quiz/attempt.php, and<BR>
read the code below to see how the SQL is assembled. Throws exceptions on error.<BR>
</b><BR><b>param:</b> array $questionids array of question ids.<br>
<b>param:</b> string $extrafields extra SQL code to be added to the query.<br>
<b>param:</b> string $join extra SQL code to be added to the query.<br>
<b>param:</b> array $extraparams values for any placeholders in $join.<br>
<b>return:</b> array question objects.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="_tidy_question" onClick="logFunction('_tidy_question', 'questionlib.php.source.html#l776')" href="questionlib.php.source.html#l776">_tidy_question</a>(<a href="../_variables/question.html">$question</a>, <a href="../_variables/loadtags.html">$loadtags</a> = false)&nbsp;&nbsp;
<a href="../_functions/_tidy_question.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Private function to factor common code out of get_question_options().<BR>
</b><BR><b>param:</b> object $question the question to tidy.<br>
<b>param:</b> boolean $loadtags load the question tags from the tags table. Optional, default false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_question_options" onClick="logFunction('get_question_options', 'questionlib.php.source.html#l806')" href="questionlib.php.source.html#l806">get_question_options</a>(&amp;<a href="../_variables/questions.html">$questions</a>, <a href="../_variables/loadtags.html">$loadtags</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_question_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the question objects with question type specific<BR>
information by calling {@link get_question_options()}<BR>
</b><BR>Can be called either with an array of question objects or with a single<BR>
question object.<BR>
<BR>
<b>param:</b> mixed $questions Either an array of question objects to be updated<br>
<b>param:</b> boolean $loadtags load the question tags from the tags table. Optional, default false.<br>
<b>return:</b> bool Indicates success or failure.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_question_icon" onClick="logFunction('print_question_icon', 'questionlib.php.source.html#l829')" href="questionlib.php.source.html#l829">print_question_icon</a>(<a href="../_variables/question.html">$question</a>)&nbsp;&nbsp;
<a href="../_functions/print_question_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Print the icon for the question type<BR>
</b><BR><b>param:</b> object $question The question object for which the icon is required.<br>
<b>return:</b> string the HTML for the img tag.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_hash" onClick="logFunction('question_hash', 'questionlib.php.source.html#l841')" href="questionlib.php.source.html#l841">question_hash</a>(<a href="../_variables/question.html">$question</a>)&nbsp;&nbsp;
<a href="../_functions/question_hash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a stamp that uniquely identifies this version of the question<BR>
</b><BR>In future we want this to use a hash of the question data to guarantee that<BR>
identical versions have the same version stamp.<BR>
<BR>
<b>param:</b> object $question<br>
<b>return:</b> string A unique version stamp<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sort_categories_by_tree" onClick="logFunction('sort_categories_by_tree', 'questionlib.php.source.html#l856')" href="questionlib.php.source.html#l856">sort_categories_by_tree</a>(&amp;<a href="../_variables/categories.html">$categories</a>, <a href="../_variables/id.html">$id</a> = 0, <a href="../_variables/level.html">$level</a> = 1)&nbsp;&nbsp;
<a href="../_functions/sort_categories_by_tree.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>returns the categories with their names ordered following parent-child relationships<BR>
finally it tries to return pending categories (those being orphaned, whose parent is<BR>
incorrect) to avoid missing any category from original array.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="flatten_category_tree" onClick="logFunction('flatten_category_tree', 'questionlib.php.source.html#l894')" href="questionlib.php.source.html#l894">flatten_category_tree</a>(&amp;<a href="../_variables/categories.html">$categories</a>, <a href="../_variables/id.html">$id</a>, <a href="../_variables/depth.html">$depth</a> = 0, <a href="../_variables/nochildrenof.html">$nochildrenof</a> = -1)&nbsp;&nbsp;
<a href="../_functions/flatten_category_tree.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Private method, only for the use of add_indented_names().<BR>
</b><BR>Recursively adds an indentedname field to each category, starting with the category<BR>
with id $id, and dealing with that category and all its children, and<BR>
return a new array, with those categories in the right order.<BR>
<BR>
<b>param:</b> array $categories an array of categories which has had childids<br>
<b>param:</b> int $id the category to start the indenting process from.<br>
<b>param:</b> int $depth the indent depth. Used in recursive calls.<br>
<b>return:</b> array a new array of categories, in the right order for the tree.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_indented_names" onClick="logFunction('add_indented_names', 'questionlib.php.source.html#l930')" href="questionlib.php.source.html#l930">add_indented_names</a>(<a href="../_variables/categories.html">$categories</a>, <a href="../_variables/nochildrenof.html">$nochildrenof</a> = -1)&nbsp;&nbsp;
<a href="../_functions/add_indented_names.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Format categories into an indented list reflecting the tree structure.<BR>
</b><BR><b>param:</b> array $categories An array of category objects, for example from the.<br>
<b>return:</b> array The formatted list of categories.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_category_select_menu" onClick="logFunction('question_category_select_menu', 'questionlib.php.source.html#l968')" href="questionlib.php.source.html#l968">question_category_select_menu</a>(<a href="../_variables/contexts.html">$contexts</a>, <a href="../_variables/top.html">$top</a> = false, <a href="../_variables/currentcat.html">$currentcat</a> = 0,<a href="../_variables/selected.html">$selected</a> = &quot;&quot;, <a href="../_variables/nochildrenof.html">$nochildrenof</a> = -1)&nbsp;&nbsp;
<a href="../_functions/question_category_select_menu.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Output a select menu of question categories.<BR>
</b><BR>Categories from this course and (optionally) published categories from other courses<BR>
are included. Optionally, only categories the current user may edit can be included.<BR>
<BR>
<b>param:</b> integer $courseid the id of the course to get the categories for.<br>
<b>param:</b> integer $published if true, include publised categories from other courses.<br>
<b>param:</b> integer $only_editable if true, exclude categories this user is not allowed to edit.<br>
<b>param:</b> integer $selected optionally, the id of a category to be selected by<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_get_default_category" onClick="logFunction('question_get_default_category', 'questionlib.php.source.html#l1002')" href="questionlib.php.source.html#l1002">question_get_default_category</a>(<a href="../_variables/contextid.html">$contextid</a>)&nbsp;&nbsp;
<a href="../_functions/question_get_default_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> integer $contextid a context id.<br>
<b>return:</b> object the default question category for that context, or false if none.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_make_default_categories" onClick="logFunction('question_make_default_categories', 'questionlib.php.source.html#l1013')" href="questionlib.php.source.html#l1013">question_make_default_categories</a>(<a href="../_variables/contexts.html">$contexts</a>)&nbsp;&nbsp;
<a href="../_functions/question_make_default_categories.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the default category in the most specific context.<BR>
If no categories exist yet then default ones are created in all contexts.<BR>
</b><BR><b>param:</b> array $contexts&nbsp;&nbsp;The context objects for this context and all parent contexts.<br>
<b>return:</b> object The default category - the category in the course context<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_categories_for_contexts" onClick="logFunction('get_categories_for_contexts', 'questionlib.php.source.html#l1065')" href="questionlib.php.source.html#l1065">get_categories_for_contexts</a>(<a href="../_variables/contexts.html">$contexts</a>, <a href="../_variables/sortorder.html">$sortorder</a> = 'parent, sortorder, name ASC')&nbsp;&nbsp;
<a href="../_functions/get_categories_for_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get all the category objects, including a count of the number of questions in that category,<BR>
for all the categories in the lists $contexts.<BR>
</b><BR><b>param:</b> mixed $contexts either a single contextid, or a comma-separated list of context ids.<br>
<b>param:</b> string $sortorder used as the ORDER BY clause in the select statement.<br>
<b>return:</b> array of category objects.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_category_options" onClick="logFunction('question_category_options', 'questionlib.php.source.html#l1083')" href="questionlib.php.source.html#l1083">question_category_options</a>(<a href="../_variables/contexts.html">$contexts</a>, <a href="../_variables/top.html">$top</a> = false, <a href="../_variables/currentcat.html">$currentcat</a> = 0,<a href="../_variables/popupform.html">$popupform</a> = false, <a href="../_variables/nochildrenof.html">$nochildrenof</a> = -1)&nbsp;&nbsp;
<a href="../_functions/question_category_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Output an array of question categories.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_add_context_in_key" onClick="logFunction('question_add_context_in_key', 'questionlib.php.source.html#l1138')" href="questionlib.php.source.html#l1138">question_add_context_in_key</a>(<a href="../_variables/categories.html">$categories</a>)&nbsp;&nbsp;
<a href="../_functions/question_add_context_in_key.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_add_tops" onClick="logFunction('question_add_tops', 'questionlib.php.source.html#l1148')" href="questionlib.php.source.html#l1148">question_add_tops</a>(<a href="../_variables/categories.html">$categories</a>, <a href="../_variables/pcontexts.html">$pcontexts</a>)&nbsp;&nbsp;
<a href="../_functions/question_add_tops.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_categorylist" onClick="logFunction('question_categorylist', 'questionlib.php.source.html#l1165')" href="questionlib.php.source.html#l1165">question_categorylist</a>(<a href="../_variables/categoryid.html">$categoryid</a>)&nbsp;&nbsp;
<a href="../_functions/question_categorylist.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array of question category ids of the category and all subcategories.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_import_export_formats" onClick="logFunction('get_import_export_formats', 'questionlib.php.source.html#l1196')" href="questionlib.php.source.html#l1196">get_import_export_formats</a>(<a href="../_variables/type.html">$type</a>)&nbsp;&nbsp;
<a href="../_functions/get_import_export_formats.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get list of available import or export formats<BR>
</b><BR><b>param:</b> string $type 'import' if import list, otherwise export list assumed<br>
<b>return:</b> array sorted list of import/export formats available<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="question_default_export_filename" onClick="logFunction('question_default_export_filename', 'questionlib.php.source.html#l1228')" href="questionlib.php.source.html#l1228">question_default_export_filename</a>(<a href="../_variables/course.html">$course</a>, <a href="../_variables/category.html">$category</a>)&nbsp;&nbsp;
<a href="../_functions/question_default_export_filename.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create a reasonable default file name for exporting questions from a particular<BR>
category.<BR>
</b><BR><b>param:</b> object $course the course the questions are in.<br>
<b>param:</b> object $category the question category.<br>
<b>return:</b> string the filename.<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
