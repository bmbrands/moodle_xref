<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/gradelib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='gradelib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="gradelib.php.html">gradelib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="gradelib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="gradelib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library of functions for gradebook - both public and internal</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   core_grades</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/** Include essential files */</span>
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/grade/constants.php');
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/grade/grade_category.php');
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/grade/grade_item.php');
<a name="l32"><span class="linenum">  32</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/grade/grade_grade.php');
<a name="l33"><span class="linenum">  33</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/grade/grade_scale.php');
<a name="l34"><span class="linenum">  34</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/grade/grade_outcome.php');
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/////////////////////////////////////////////////////////////////////</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">///// Start of public API for communication with modules/blocks /////</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">/////////////////////////////////////////////////////////////////////</span>
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">/**</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * Submit new or update grade; update/create grade_item definition. Grade must have userid specified,</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * rawgrade and feedback with format are optional. rawgrade NULL means 'Not graded'.</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * Missing property or key means does not change the existing value.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> *</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * Only following grade item properties can be changed 'itemname', 'idnumber', 'gradetype', 'grademax',</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * 'grademin', 'scaleid', 'multfactor', 'plusfactor', 'deleted' and 'hidden'. 'reset' means delete all current grades including locked ones.</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> *</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * Manual, course or category items can not be updated by this function.</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> *</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * @category grade</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @param string $source Source of the grade such as 'mod/assignment'</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * @param int    $courseid ID of course</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @param string $itemtype Type of grade item. For example, mod or block</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @param string $itemmodule More specific then $itemtype. For example, assignment or forum. May be NULL for some item types</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @param int    $iteminstance Instance ID of graded item</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @param int    $itemnumber Most probably 0. Modules can use other numbers when having more than one grade for each user</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @param mixed  $grades Grade (object, array) or several grades (arrays of arrays or objects), NULL if updating grade_item definition only</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @param mixed  $itemdetails Object or array describing the grading item, NULL if no change</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * @return int Returns GRADE_UPDATE_OK, GRADE_UPDATE_FAILED, GRADE_UPDATE_MULTIPLE or GRADE_UPDATE_ITEM_LOCKED</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> */</span>
<a name="l61"><span class="linenum">  61</span></a>  function <a class="function" onClick="logFunction('grade_update')" href="../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>(<a class="var it1344" onMouseOver="hilite(1344)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, <a class="var it6480" onMouseOver="hilite(6480)" onMouseOut="lolite()" onClick="logVariable('itemmodule')" href="../_variables/itemmodule.html">$itemmodule</a>, <a class="var it6497" onMouseOver="hilite(6497)" onMouseOut="lolite()" onClick="logVariable('iteminstance')" href="../_variables/iteminstance.html">$iteminstance</a>, <a class="var it5026" onMouseOver="hilite(5026)" onMouseOut="lolite()" onClick="logVariable('itemnumber')" href="../_variables/itemnumber.html">$itemnumber</a>, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>=NULL, <a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>=NULL) {
<a name="l62"><span class="linenum">  62</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">    // only following grade_item properties can be changed in this function</span>
<a name="l65"><span class="linenum">  65</span></a>      <a class="var it2730" onMouseOver="hilite(2730)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a> = array('itemname', 'idnumber', 'gradetype', 'grademax', 'grademin', 'scaleid', 'multfactor', 'plusfactor', 'deleted', 'hidden');
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">    // list of 10,5 numeric fields</span>
<a name="l67"><span class="linenum">  67</span></a>      <a class="var it9641" onMouseOver="hilite(9641)" onMouseOut="lolite()" onClick="logVariable('floats')" href="../_variables/floats.html">$floats</a>  = array('grademin', 'grademax', 'multfactor', 'plusfactor');
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    // grade item identification</span>
<a name="l70"><span class="linenum">  70</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('compact')" href="../_functions/compact.html" onMouseOver="phpfuncPopup(event,'compact')">compact</a>('courseid', 'itemtype', 'itemmodule', 'iteminstance', 'itemnumber');
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) or <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>)) {
<a name="l73"><span class="linenum">  73</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Missing courseid or itemtype');
<a name="l74"><span class="linenum">  74</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_FAILED')" href="../_constants/GRADE_UPDATE_FAILED.html" onMouseOver="constPopup(event,'GRADE_UPDATE_FAILED')">GRADE_UPDATE_FAILED</a>;
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      if (!<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">        // create a new one</span>
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> = false;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      } else if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>) == 1){
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>);
<a name="l83"><span class="linenum">  83</span></a>          unset(<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>); <span class="comment">//release memory</span>
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>      } else {
<a name="l86"><span class="linenum">  86</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Found more than one grade item');
<a name="l87"><span class="linenum">  87</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_MULTIPLE')" href="../_constants/GRADE_UPDATE_MULTIPLE.html" onMouseOver="constPopup(event,'GRADE_UPDATE_MULTIPLE')">GRADE_UPDATE_MULTIPLE</a>;
<a name="l88"><span class="linenum">  88</span></a>      }
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>      if (!empty(<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>['deleted'])) {
<a name="l91"><span class="linenum">  91</span></a>          if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l92"><span class="linenum">  92</span></a>              if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it1344" onMouseOver="hilite(1344)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>)) {
<a name="l93"><span class="linenum">  93</span></a>                  return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l94"><span class="linenum">  94</span></a>              } else {
<a name="l95"><span class="linenum">  95</span></a>                  return <a class="constant" onClick="logConstant('GRADE_UPDATE_FAILED')" href="../_constants/GRADE_UPDATE_FAILED.html" onMouseOver="constPopup(event,'GRADE_UPDATE_FAILED')">GRADE_UPDATE_FAILED</a>;
<a name="l96"><span class="linenum">  96</span></a>              }
<a name="l97"><span class="linenum">  97</span></a>          }
<a name="l98"><span class="linenum">  98</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">/// Create or update the grade_item if needed</span>
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>      if (!<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l104"><span class="linenum"> 104</span></a>          if (<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>) {
<a name="l105"><span class="linenum"> 105</span></a>              <a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a> = (array)<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">            // grademin and grademax ignored when scale specified</span>
<a name="l108"><span class="linenum"> 108</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('scaleid', <a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>)) {
<a name="l109"><span class="linenum"> 109</span></a>                  if (<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>['scaleid']) {
<a name="l110"><span class="linenum"> 110</span></a>                      unset(<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>['grademin']);
<a name="l111"><span class="linenum"> 111</span></a>                      unset(<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>['grademax']);
<a name="l112"><span class="linenum"> 112</span></a>                  }
<a name="l113"><span class="linenum"> 113</span></a>              }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>              foreach (<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a> as <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>=&gt;<a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>) {
<a name="l116"><span class="linenum"> 116</span></a>                  if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>, <a class="var it2730" onMouseOver="hilite(2730)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>)) {
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">                    // ignore it</span>
<a name="l118"><span class="linenum"> 118</span></a>                      continue;
<a name="l119"><span class="linenum"> 119</span></a>                  }
<a name="l120"><span class="linenum"> 120</span></a>                  if (<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a> == 'gradetype' and <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>) {
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">                    // no grade item needed!</span>
<a name="l122"><span class="linenum"> 122</span></a>                      return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l123"><span class="linenum"> 123</span></a>                  }
<a name="l124"><span class="linenum"> 124</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>[<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>] = <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>;
<a name="l125"><span class="linenum"> 125</span></a>              }
<a name="l126"><span class="linenum"> 126</span></a>          }
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>      } else {
<a name="l131"><span class="linenum"> 131</span></a>          if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>()) {
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">            // no notice() here, test returned value instead!</span>
<a name="l133"><span class="linenum"> 133</span></a>              return <a class="constant" onClick="logConstant('GRADE_UPDATE_ITEM_LOCKED')" href="../_constants/GRADE_UPDATE_ITEM_LOCKED.html" onMouseOver="constPopup(event,'GRADE_UPDATE_ITEM_LOCKED')">GRADE_UPDATE_ITEM_LOCKED</a>;
<a name="l134"><span class="linenum"> 134</span></a>          }
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>          if (<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>) {
<a name="l137"><span class="linenum"> 137</span></a>              <a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a> = (array)<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>;
<a name="l138"><span class="linenum"> 138</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l139"><span class="linenum"> 139</span></a>              foreach (<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a> as <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>=&gt;<a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>) {
<a name="l140"><span class="linenum"> 140</span></a>                  if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>, <a class="var it2730" onMouseOver="hilite(2730)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>)) {
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">                    // ignore it</span>
<a name="l142"><span class="linenum"> 142</span></a>                      continue;
<a name="l143"><span class="linenum"> 143</span></a>                  }
<a name="l144"><span class="linenum"> 144</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>, <a class="var it9641" onMouseOver="hilite(9641)" onMouseOut="lolite()" onClick="logVariable('floats')" href="../_variables/floats.html">$floats</a>)) {
<a name="l145"><span class="linenum"> 145</span></a>                      if (<a class="function" onClick="logFunction('grade_floats_different')" href="../_functions/grade_floats_different.html" onMouseOver="funcPopup(event,'grade_floats_different')">grade_floats_different</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;{<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>}, <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>)) {
<a name="l146"><span class="linenum"> 146</span></a>                          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;{<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>} = <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>;
<a name="l147"><span class="linenum"> 147</span></a>                          <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l148"><span class="linenum"> 148</span></a>                      }
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>                  } else {
<a name="l151"><span class="linenum"> 151</span></a>                      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;{<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>} != <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>) {
<a name="l152"><span class="linenum"> 152</span></a>                          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;{<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>} = <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>;
<a name="l153"><span class="linenum"> 153</span></a>                          <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l154"><span class="linenum"> 154</span></a>                      }
<a name="l155"><span class="linenum"> 155</span></a>                  }
<a name="l156"><span class="linenum"> 156</span></a>              }
<a name="l157"><span class="linenum"> 157</span></a>              if (<a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l158"><span class="linenum"> 158</span></a>                  <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l159"><span class="linenum"> 159</span></a>              }
<a name="l160"><span class="linenum"> 160</span></a>          }
<a name="l161"><span class="linenum"> 161</span></a>      }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">/// reset grades if requested</span>
<a name="l164"><span class="linenum"> 164</span></a>      if (!empty(<a class="var it27879" onMouseOver="hilite(27879)" onMouseOut="lolite()" onClick="logVariable('itemdetails')" href="../_variables/itemdetails.html">$itemdetails</a>['reset'])) {
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('delete_all_grades')" href="../_functions/delete_all_grades.html" onMouseOver="funcPopup(event,'delete_all_grades')">delete_all_grades</a>('reset');
<a name="l166"><span class="linenum"> 166</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l167"><span class="linenum"> 167</span></a>      }
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">/// Some extra checks</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">    // do we use grading?</span>
<a name="l171"><span class="linenum"> 171</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>) {
<a name="l172"><span class="linenum"> 172</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l173"><span class="linenum"> 173</span></a>      }
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">    // no grade submitted</span>
<a name="l176"><span class="linenum"> 176</span></a>      if (empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>)) {
<a name="l177"><span class="linenum"> 177</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l178"><span class="linenum"> 178</span></a>      }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">/// Finally start processing of grades</span>
<a name="l181"><span class="linenum"> 181</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>)) {
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> = array(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('userid')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>=&gt;<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>);
<a name="l183"><span class="linenum"> 183</span></a>      } else {
<a name="l184"><span class="linenum"> 184</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('userid', <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>)) {
<a name="l185"><span class="linenum"> 185</span></a>              <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> = array(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>['userid']=&gt;<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>);
<a name="l186"><span class="linenum"> 186</span></a>          }
<a name="l187"><span class="linenum"> 187</span></a>      }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">/// normalize and verify grade array</span>
<a name="l190"><span class="linenum"> 190</span></a>      foreach(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> as <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>=&gt;<a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>) {
<a name="l191"><span class="linenum"> 191</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>)) {
<a name="l192"><span class="linenum"> 192</span></a>              <a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a> = (array)<a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>;
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>] = <a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>;
<a name="l194"><span class="linenum"> 194</span></a>          }
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>          if (empty(<a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>['userid']) or <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a> != <a class="var it2364" onMouseOver="hilite(2364)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>['userid']) {
<a name="l197"><span class="linenum"> 197</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Incorrect grade array index, must be user id! Grade ignored.');
<a name="l198"><span class="linenum"> 198</span></a>              unset(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('k')" href="../_variables/k.html">$k</a>]);
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>      }
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>      if (empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>)) {
<a name="l203"><span class="linenum"> 203</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_FAILED')" href="../_constants/GRADE_UPDATE_FAILED.html" onMouseOver="constPopup(event,'GRADE_UPDATE_FAILED')">GRADE_UPDATE_FAILED</a>;
<a name="l204"><span class="linenum"> 204</span></a>      }
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>      <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>);
<a name="l207"><span class="linenum"> 207</span></a>      if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> &gt; 0 and <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> &lt; 200) {
<a name="l208"><span class="linenum"> 208</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it9650" onMouseOver="hilite(9650)" onMouseOut="lolite()" onClick="logVariable('uids')" href="../_variables/uids.html">$uids</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('start')" href="../_variables/start.html">$start</a>='uid');
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['gid'] = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT * FROM {grade_grades} WHERE itemid = :gid AND userid <a class="var it9650" onMouseOver="hilite(9650)" onMouseOut="lolite()" onClick="logVariable('uids')" href="../_variables/uids.html">$uids</a>&quot;;
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      } else {
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT * FROM {grade_grades} WHERE itemid = :gid&quot;;
<a name="l214"><span class="linenum"> 214</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('gid'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l215"><span class="linenum"> 215</span></a>      }
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>      <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = false;
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>      while (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>) &gt; 0) {
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a> = null;
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>       = null;
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>          foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it21669" onMouseOver="hilite(21669)" onMouseOut="lolite()" onClick="logVariable('gd')" href="../_variables/gd.html">$gd</a>) {
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>              <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it21669" onMouseOver="hilite(21669)" onMouseOut="lolite()" onClick="logVariable('gd')" href="../_variables/gd.html">$gd</a>-&gt;<a onClick="logVariable('userid')" class="var it41048" onMouseOver="hilite(41048)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>;
<a name="l228"><span class="linenum"> 228</span></a>              if (!isset(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>])) {
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">                // this grade not requested, continue</span>
<a name="l230"><span class="linenum"> 230</span></a>                  continue;
<a name="l231"><span class="linenum"> 231</span></a>              }
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">            // existing grade requested</span>
<a name="l233"><span class="linenum"> 233</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>       = <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>];
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(<a class="var it21669" onMouseOver="hilite(21669)" onMouseOut="lolite()" onClick="logVariable('gd')" href="../_variables/gd.html">$gd</a>, false);
<a name="l235"><span class="linenum"> 235</span></a>              unset(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]);
<a name="l236"><span class="linenum"> 236</span></a>              break;
<a name="l237"><span class="linenum"> 237</span></a>          }
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a>)) {
<a name="l240"><span class="linenum"> 240</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>) == 0) {
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">                // no more grades to process</span>
<a name="l242"><span class="linenum"> 242</span></a>                  break;
<a name="l243"><span class="linenum"> 243</span></a>              }
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>       = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>);
<a name="l246"><span class="linenum"> 246</span></a>              <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>      = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['userid'];
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(array('itemid'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'userid'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>), false);
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('load_optional_fields')" href="../_functions/load_optional_fields.html" onMouseOver="funcPopup(event,'load_optional_fields')">load_optional_fields</a>(); <span class="comment">// add feedback and info too</span>
<a name="l249"><span class="linenum"> 249</span></a>              unset(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]);
<a name="l250"><span class="linenum"> 250</span></a>          }
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it4887" onMouseOver="hilite(4887)" onMouseOut="lolite()" onClick="logVariable('rawgrade')" href="../_variables/rawgrade.html">$rawgrade</a>       = false;
<a name="l253"><span class="linenum"> 253</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>       = false;
<a name="l254"><span class="linenum"> 254</span></a>          <a class="var it2281" onMouseOver="hilite(2281)" onMouseOut="lolite()" onClick="logVariable('feedbackformat')" href="../_variables/feedbackformat.html">$feedbackformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../_variables/usermodified.html">$usermodified</a>   = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l256"><span class="linenum"> 256</span></a>          <a class="var it10026" onMouseOver="hilite(10026)" onMouseOut="lolite()" onClick="logVariable('datesubmitted')" href="../_variables/datesubmitted.html">$datesubmitted</a>  = null;
<a name="l257"><span class="linenum"> 257</span></a>          <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('dategraded')" href="../_variables/dategraded.html">$dategraded</a>     = null;
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('rawgrade', <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>)) {
<a name="l260"><span class="linenum"> 260</span></a>              <a class="var it4887" onMouseOver="hilite(4887)" onMouseOut="lolite()" onClick="logVariable('rawgrade')" href="../_variables/rawgrade.html">$rawgrade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['rawgrade'];
<a name="l261"><span class="linenum"> 261</span></a>          }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('feedback', <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>)) {
<a name="l264"><span class="linenum"> 264</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['feedback'];
<a name="l265"><span class="linenum"> 265</span></a>          }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('feedbackformat', <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>)) {
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it2281" onMouseOver="hilite(2281)" onMouseOut="lolite()" onClick="logVariable('feedbackformat')" href="../_variables/feedbackformat.html">$feedbackformat</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['feedbackformat'];
<a name="l269"><span class="linenum"> 269</span></a>          }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('usermodified', <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>)) {
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../_variables/usermodified.html">$usermodified</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['usermodified'];
<a name="l273"><span class="linenum"> 273</span></a>          }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('datesubmitted', <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>)) {
<a name="l276"><span class="linenum"> 276</span></a>              <a class="var it10026" onMouseOver="hilite(10026)" onMouseOut="lolite()" onClick="logVariable('datesubmitted')" href="../_variables/datesubmitted.html">$datesubmitted</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['datesubmitted'];
<a name="l277"><span class="linenum"> 277</span></a>          }
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('dategraded', <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>)) {
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('dategraded')" href="../_variables/dategraded.html">$dategraded</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>['dategraded'];
<a name="l281"><span class="linenum"> 281</span></a>          }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">        // update or insert the grade</span>
<a name="l284"><span class="linenum"> 284</span></a>          if (!<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('update_raw_grade')" href="../_functions/update_raw_grade.html" onMouseOver="funcPopup(event,'update_raw_grade')">update_raw_grade</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it4887" onMouseOver="hilite(4887)" onMouseOut="lolite()" onClick="logVariable('rawgrade')" href="../_variables/rawgrade.html">$rawgrade</a>, <a class="var it1344" onMouseOver="hilite(1344)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>, <a class="var it2281" onMouseOver="hilite(2281)" onMouseOut="lolite()" onClick="logVariable('feedbackformat')" href="../_variables/feedbackformat.html">$feedbackformat</a>, <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../_variables/usermodified.html">$usermodified</a>, <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('dategraded')" href="../_variables/dategraded.html">$dategraded</a>, <a class="var it10026" onMouseOver="hilite(10026)" onMouseOut="lolite()" onClick="logVariable('datesubmitted')" href="../_variables/datesubmitted.html">$datesubmitted</a>, <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a>)) {
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = true;
<a name="l286"><span class="linenum"> 286</span></a>          }
<a name="l287"><span class="linenum"> 287</span></a>      }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>      if (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>) {
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l291"><span class="linenum"> 291</span></a>      }
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>      if (!<a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>) {
<a name="l294"><span class="linenum"> 294</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l295"><span class="linenum"> 295</span></a>      } else {
<a name="l296"><span class="linenum"> 296</span></a>          return <a class="constant" onClick="logConstant('GRADE_UPDATE_FAILED')" href="../_constants/GRADE_UPDATE_FAILED.html" onMouseOver="constPopup(event,'GRADE_UPDATE_FAILED')">GRADE_UPDATE_FAILED</a>;
<a name="l297"><span class="linenum"> 297</span></a>      }
<a name="l298"><span class="linenum"> 298</span></a>  }
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">/**</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment"> * Updates a user's outcomes. Manual outcomes can not be updated.</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment"> *</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment"> * @category grade</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment"> * @param string $source Source of the grade such as 'mod/assignment'</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment"> * @param int    $courseid ID of course</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment"> * @param string $itemtype Type of grade item. For example, 'mod' or 'block'</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment"> * @param string $itemmodule More specific then $itemtype. For example, 'forum' or 'quiz'. May be NULL for some item types</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment"> * @param int    $iteminstance Instance ID of graded item. For example the forum ID.</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment"> * @param int    $userid ID of the graded user</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment"> * @param array  $data Array consisting of grade item itemnumber ({@link grade_update()}) =&gt; outcomegrade</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment"> * @return bool returns true if grade items were found and updated successfully</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment"> */</span>
<a name="l313"><span class="linenum"> 313</span></a>  function <a class="function" onClick="logFunction('grade_update_outcomes')" href="../_functions/grade_update_outcomes.html" onMouseOver="funcPopup(event,'grade_update_outcomes')">grade_update_outcomes</a>(<a class="var it1344" onMouseOver="hilite(1344)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, <a class="var it6480" onMouseOver="hilite(6480)" onMouseOut="lolite()" onClick="logVariable('itemmodule')" href="../_variables/itemmodule.html">$itemmodule</a>, <a class="var it6497" onMouseOver="hilite(6497)" onMouseOut="lolite()" onClick="logVariable('iteminstance')" href="../_variables/iteminstance.html">$iteminstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l314"><span class="linenum"> 314</span></a>      if (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('itemtype'=&gt;<a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, 'itemmodule'=&gt;<a class="var it6480" onMouseOver="hilite(6480)" onMouseOut="lolite()" onClick="logVariable('itemmodule')" href="../_variables/itemmodule.html">$itemmodule</a>, 'iteminstance'=&gt;<a class="var it6497" onMouseOver="hilite(6497)" onMouseOut="lolite()" onClick="logVariable('iteminstance')" href="../_variables/iteminstance.html">$iteminstance</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l316"><span class="linenum"> 316</span></a>          foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l317"><span class="linenum"> 317</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>)) {
<a name="l318"><span class="linenum"> 318</span></a>                  continue;
<a name="l319"><span class="linenum"> 319</span></a>              }
<a name="l320"><span class="linenum"> 320</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>] &lt; 1 ? null : <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>];
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a class="function" onClick="logFunction('update_final_grade')" href="../_functions/update_final_grade.html" onMouseOver="funcPopup(event,'update_final_grade')">update_final_grade</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>, <a class="var it1344" onMouseOver="hilite(1344)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>);
<a name="l322"><span class="linenum"> 322</span></a>          }
<a name="l323"><span class="linenum"> 323</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l324"><span class="linenum"> 324</span></a>      }
<a name="l325"><span class="linenum"> 325</span></a>      return false; <span class="comment">//grade items not found</span>
<a name="l326"><span class="linenum"> 326</span></a>  }
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">/**</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> * Returns grading information for given activity, optionally with user grades</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * Manual, course or category items can not be queried.</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> *</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @category grade</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @param int    $courseid ID of course</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * @param string $itemtype Type of grade item. For example, 'mod' or 'block'</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * @param string $itemmodule More specific then $itemtype. For example, 'forum' or 'quiz'. May be NULL for some item types</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> * @param int    $iteminstance ID of the item module</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> * @param mixed  $userid_or_ids Either a single user ID, an array of user IDs or null. If user ID or IDs are not supplied returns information about grade_item</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * @return array Array of grade information objects (scaleid, name, grade and locked status, etc.) indexed with itemnumbers</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> */</span>
<a name="l340"><span class="linenum"> 340</span></a>  function <a class="function" onClick="logFunction('grade_get_grades')" href="../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, <a class="var it6480" onMouseOver="hilite(6480)" onMouseOut="lolite()" onClick="logVariable('itemmodule')" href="../_variables/itemmodule.html">$itemmodule</a>, <a class="var it6497" onMouseOver="hilite(6497)" onMouseOut="lolite()" onClick="logVariable('iteminstance')" href="../_variables/iteminstance.html">$iteminstance</a>, <a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>=null) {
<a name="l341"><span class="linenum"> 341</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = new stdClass();
<a name="l344"><span class="linenum"> 344</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('items')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/items.html">items</a>    = array();
<a name="l345"><span class="linenum"> 345</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('outcomes')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/outcomes.html">outcomes</a> = array();
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>      <a class="var it10010" onMouseOver="hilite(10010)" onMouseOut="lolite()" onClick="logVariable('course_item')" href="../_variables/course_item.html">$course_item</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_course_item')" href="../_functions/fetch_course_item.html" onMouseOver="funcPopup(event,'fetch_course_item')">fetch_course_item</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l348"><span class="linenum"> 348</span></a>      <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a> = array();
<a name="l349"><span class="linenum"> 349</span></a>      if (<a class="var it10010" onMouseOver="hilite(10010)" onMouseOut="lolite()" onClick="logVariable('course_item')" href="../_variables/course_item.html">$course_item</a>-&gt;<a onClick="logVariable('needsupdate')" class="var it39609" onMouseOver="hilite(39609)" onMouseOut="lolite()" href="../_variables/needsupdate.html">needsupdate</a>) {
<a name="l350"><span class="linenum"> 350</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l351"><span class="linenum"> 351</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> !== true) {
<a name="l352"><span class="linenum"> 352</span></a>              <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>);
<a name="l353"><span class="linenum"> 353</span></a>          }
<a name="l354"><span class="linenum"> 354</span></a>      }
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>      if (<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('itemtype'=&gt;<a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, 'itemmodule'=&gt;<a class="var it6480" onMouseOver="hilite(6480)" onMouseOut="lolite()" onClick="logVariable('itemmodule')" href="../_variables/itemmodule.html">$itemmodule</a>, 'iteminstance'=&gt;<a class="var it6497" onMouseOver="hilite(6497)" onMouseOut="lolite()" onClick="logVariable('iteminstance')" href="../_variables/iteminstance.html">$iteminstance</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l357"><span class="linenum"> 357</span></a>          foreach (<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> as <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l358"><span class="linenum"> 358</span></a>              <a class="var it10042" onMouseOver="hilite(10042)" onMouseOut="lolite()" onClick="logVariable('decimalpoints')" href="../_variables/decimalpoints.html">$decimalpoints</a> = null;
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>              if (empty(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('outcomeid')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/outcomeid.html">outcomeid</a>)) {
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">                // prepare information about grade item</span>
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a> = new stdClass();
<a name="l363"><span class="linenum"> 363</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l364"><span class="linenum"> 364</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>;
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemtype')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/itemtype.html">itemtype</a>  = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemtype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemtype.html">itemtype</a>;
<a name="l366"><span class="linenum"> 366</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemmodule')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/itemmodule.html">itemmodule</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemmodule')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemmodule.html">itemmodule</a>;
<a name="l367"><span class="linenum"> 367</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('iteminstance')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/iteminstance.html">iteminstance</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('iteminstance')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/iteminstance.html">iteminstance</a>;
<a name="l368"><span class="linenum"> 368</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('scaleid')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/scaleid.html">scaleid</a>    = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('scaleid')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/scaleid.html">scaleid</a>;
<a name="l369"><span class="linenum"> 369</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('name')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>       = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l370"><span class="linenum"> 370</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grademin')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/grademin.html">grademin</a>   = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademin')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademin.html">grademin</a>;
<a name="l371"><span class="linenum"> 371</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grademax')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/grademax.html">grademax</a>   = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademax')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademax.html">grademax</a>;
<a name="l372"><span class="linenum"> 372</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/gradepass.html">gradepass</a>  = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradepass.html">gradepass</a>;
<a name="l373"><span class="linenum"> 373</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('locked')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/locked.html">locked</a>     = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>();
<a name="l374"><span class="linenum"> 374</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('hidden')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>     = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>();
<a name="l375"><span class="linenum"> 375</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grades')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/grades.html">grades</a>     = array();
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>                  switch (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a>) {
<a name="l378"><span class="linenum"> 378</span></a>                      case <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>:
<a name="l379"><span class="linenum"> 379</span></a>                          continue;
<a name="l380"><span class="linenum"> 380</span></a>  
<a name="l381"><span class="linenum"> 381</span></a>                      case <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>:
<a name="l382"><span class="linenum"> 382</span></a>                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('scaleid')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/scaleid.html">scaleid</a> = 0;
<a name="l383"><span class="linenum"> 383</span></a>                          break;
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>                      case <a class="constant" onClick="logConstant('GRADE_TYPE_TEXT')" href="../_constants/GRADE_TYPE_TEXT.html" onMouseOver="constPopup(event,'GRADE_TYPE_TEXT')">GRADE_TYPE_TEXT</a>:
<a name="l386"><span class="linenum"> 386</span></a>                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('scaleid')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/scaleid.html">scaleid</a>   = 0;
<a name="l387"><span class="linenum"> 387</span></a>                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grademin')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/grademin.html">grademin</a>   = 0;
<a name="l388"><span class="linenum"> 388</span></a>                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grademax')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/grademax.html">grademax</a>   = 0;
<a name="l389"><span class="linenum"> 389</span></a>                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/gradepass.html">gradepass</a>  = 0;
<a name="l390"><span class="linenum"> 390</span></a>                          break;
<a name="l391"><span class="linenum"> 391</span></a>                  }
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>                  if (empty(<a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>)) {
<a name="l394"><span class="linenum"> 394</span></a>                      <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = array();
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>)) {
<a name="l397"><span class="linenum"> 397</span></a>                      <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = <a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>;
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>                  } else {
<a name="l400"><span class="linenum"> 400</span></a>                      <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = array(<a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>);
<a name="l401"><span class="linenum"> 401</span></a>                  }
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>                  if (<a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>) {
<a name="l404"><span class="linenum"> 404</span></a>                      <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a> = <a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch_users_grades')" href="../_functions/fetch_users_grades.html" onMouseOver="funcPopup(event,'fetch_users_grades')">fetch_users_grades</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>, true);
<a name="l405"><span class="linenum"> 405</span></a>                      foreach (<a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> as <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l406"><span class="linenum"> 406</span></a>                          <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;grade_item =&amp; <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>;
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a> = new stdClass();
<a name="l409"><span class="linenum"> 409</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>          = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;finalgrade;
<a name="l410"><span class="linenum"> 410</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('locked')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/locked.html">locked</a>         = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('is_locked')" href="../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>();
<a name="l411"><span class="linenum"> 411</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>         = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>();
<a name="l412"><span class="linenum"> 412</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/overridden.html">overridden</a>     = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;overridden;
<a name="l413"><span class="linenum"> 413</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>       = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;feedback;
<a name="l414"><span class="linenum"> 414</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;feedbackformat;
<a name="l415"><span class="linenum"> 415</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/usermodified.html">usermodified</a>   = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;usermodified;
<a name="l416"><span class="linenum"> 416</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/datesubmitted.html">datesubmitted</a>  = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('get_datesubmitted')" href="../_functions/get_datesubmitted.html" onMouseOver="funcPopup(event,'get_datesubmitted')">get_datesubmitted</a>();
<a name="l417"><span class="linenum"> 417</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/dategraded.html">dategraded</a>     = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('get_dategraded')" href="../_functions/get_dategraded.html" onMouseOver="funcPopup(event,'get_dategraded')">get_dategraded</a>();
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">                        // create text representation of grade</span>
<a name="l420"><span class="linenum"> 420</span></a>                          if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_TEXT')" href="../_constants/GRADE_TYPE_TEXT.html" onMouseOver="constPopup(event,'GRADE_TYPE_TEXT')">GRADE_TYPE_TEXT</a> or <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>) {
<a name="l421"><span class="linenum"> 421</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>          = null;
<a name="l422"><span class="linenum"> 422</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>      = '-';
<a name="l423"><span class="linenum"> 423</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_long_grade.html">str_long_grade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>;
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>                          } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a>)) {
<a name="l426"><span class="linenum"> 426</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>          = false;
<a name="l427"><span class="linenum"> 427</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>      = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('error');
<a name="l428"><span class="linenum"> 428</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_long_grade.html">str_long_grade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>;
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>                          } else if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>)) {
<a name="l431"><span class="linenum"> 431</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>      = '-';
<a name="l432"><span class="linenum"> 432</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_long_grade.html">str_long_grade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>;
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>                          } else {
<a name="l435"><span class="linenum"> 435</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a> = <a class="function" onClick="logFunction('grade_format_gradevalue')" href="../_functions/grade_format_gradevalue.html" onMouseOver="funcPopup(event,'grade_format_gradevalue')">grade_format_gradevalue</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>);
<a name="l436"><span class="linenum"> 436</span></a>                              if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a> or <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('get_displaytype')" href="../_functions/get_displaytype.html" onMouseOver="funcPopup(event,'get_displaytype')">get_displaytype</a>() != <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_REAL')" href="../_constants/GRADE_DISPLAY_TYPE_REAL.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_REAL')">GRADE_DISPLAY_TYPE_REAL</a>) {
<a name="l437"><span class="linenum"> 437</span></a>                                  <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_long_grade.html">str_long_grade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>;
<a name="l438"><span class="linenum"> 438</span></a>                              } else {
<a name="l439"><span class="linenum"> 439</span></a>                                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l440"><span class="linenum"> 440</span></a>                                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('grade')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a>;
<a name="l441"><span class="linenum"> 441</span></a>                                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('max')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/max.html">max</a>   = <a class="function" onClick="logFunction('grade_format_gradevalue')" href="../_functions/grade_format_gradevalue.html" onMouseOver="funcPopup(event,'grade_format_gradevalue')">grade_format_gradevalue</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademax')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademax.html">grademax</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>);
<a name="l442"><span class="linenum"> 442</span></a>                                  <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_long_grade.html">str_long_grade</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradelong', 'grades', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l443"><span class="linenum"> 443</span></a>                              }
<a name="l444"><span class="linenum"> 444</span></a>                          }
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">                        // create html representation of feedback</span>
<a name="l447"><span class="linenum"> 447</span></a>                          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>)) {
<a name="l448"><span class="linenum"> 448</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_feedback.html">str_feedback</a> = '';
<a name="l449"><span class="linenum"> 449</span></a>                          } else {
<a name="l450"><span class="linenum"> 450</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_feedback.html">str_feedback</a> = <a class="function" onClick="logFunction('format_text')" href="../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedbackformat.html">feedbackformat</a>);
<a name="l451"><span class="linenum"> 451</span></a>                          }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grades')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/grades.html">grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>] = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>;
<a name="l454"><span class="linenum"> 454</span></a>                      }
<a name="l455"><span class="linenum"> 455</span></a>                  }
<a name="l456"><span class="linenum"> 456</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('items')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/items.html">items</a>[<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>] = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>;
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>              } else {
<a name="l459"><span class="linenum"> 459</span></a>                  if (!<a class="var it33011" onMouseOver="hilite(33011)" onMouseOut="lolite()" onClick="logVariable('grade_outcome')" href="../_variables/grade_outcome.html">$grade_outcome</a> = <a class="class" onClick="logClass('grade_outcome')" href="../_classes/grade_outcome.html" onMouseOver="classPopup(event,'grade_outcome')">grade_outcome</a>::<a class="function" onClick="logFunction('fetch')" href="../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('id'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('outcomeid')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/outcomeid.html">outcomeid</a>))) {
<a name="l460"><span class="linenum"> 460</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Incorect outcomeid found');
<a name="l461"><span class="linenum"> 461</span></a>                      continue;
<a name="l462"><span class="linenum"> 462</span></a>                  }
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">                // outcome info</span>
<a name="l465"><span class="linenum"> 465</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> = new stdClass();
<a name="l466"><span class="linenum"> 466</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('id')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l467"><span class="linenum"> 467</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>;
<a name="l468"><span class="linenum"> 468</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('itemtype')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/itemtype.html">itemtype</a>   = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemtype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemtype.html">itemtype</a>;
<a name="l469"><span class="linenum"> 469</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('itemmodule')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/itemmodule.html">itemmodule</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemmodule')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemmodule.html">itemmodule</a>;
<a name="l470"><span class="linenum"> 470</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('iteminstance')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/iteminstance.html">iteminstance</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('iteminstance')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/iteminstance.html">iteminstance</a>;
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('scaleid')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/scaleid.html">scaleid</a>    = <a class="var it33011" onMouseOver="hilite(33011)" onMouseOut="lolite()" onClick="logVariable('grade_outcome')" href="../_variables/grade_outcome.html">$grade_outcome</a>-&gt;<a onClick="logVariable('scaleid')" class="var it40955" onMouseOver="hilite(40955)" onMouseOut="lolite()" href="../_variables/scaleid.html">scaleid</a>;
<a name="l472"><span class="linenum"> 472</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('name')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/name.html">name</a>       = <a class="var it33011" onMouseOver="hilite(33011)" onMouseOut="lolite()" onClick="logVariable('grade_outcome')" href="../_variables/grade_outcome.html">$grade_outcome</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l473"><span class="linenum"> 473</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('locked')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/locked.html">locked</a>     = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>();
<a name="l474"><span class="linenum"> 474</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('hidden')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>     = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>();
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>                  if (empty(<a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>)) {
<a name="l477"><span class="linenum"> 477</span></a>                      <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = array();
<a name="l478"><span class="linenum"> 478</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>)) {
<a name="l479"><span class="linenum"> 479</span></a>                      <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = <a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>;
<a name="l480"><span class="linenum"> 480</span></a>                  } else {
<a name="l481"><span class="linenum"> 481</span></a>                      <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = array(<a class="var it15040" onMouseOver="hilite(15040)" onMouseOut="lolite()" onClick="logVariable('userid_or_ids')" href="../_variables/userid_or_ids.html">$userid_or_ids</a>);
<a name="l482"><span class="linenum"> 482</span></a>                  }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>                  if (<a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>) {
<a name="l485"><span class="linenum"> 485</span></a>                      <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a> = <a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch_users_grades')" href="../_functions/fetch_users_grades.html" onMouseOver="funcPopup(event,'fetch_users_grades')">fetch_users_grades</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>, true);
<a name="l486"><span class="linenum"> 486</span></a>                      foreach (<a class="var it2955" onMouseOver="hilite(2955)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> as <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l487"><span class="linenum"> 487</span></a>                          <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;grade_item =&amp; <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>;
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a> = new stdClass();
<a name="l490"><span class="linenum"> 490</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>          = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;finalgrade;
<a name="l491"><span class="linenum"> 491</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('locked')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/locked.html">locked</a>         = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('is_locked')" href="../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>();
<a name="l492"><span class="linenum"> 492</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>         = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>();
<a name="l493"><span class="linenum"> 493</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>       = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;feedback;
<a name="l494"><span class="linenum"> 494</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;feedbackformat;
<a name="l495"><span class="linenum"> 495</span></a>                          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/usermodified.html">usermodified</a>   = <a class="var it6047" onMouseOver="hilite(6047)" onMouseOut="lolite()" onClick="logVariable('grade_grades')" href="../_variables/grade_grades.html">$grade_grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>]-&gt;usermodified;
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">                        // create text representation of grade</span>
<a name="l498"><span class="linenum"> 498</span></a>                          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a>)) {
<a name="l499"><span class="linenum"> 499</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>     = false;
<a name="l500"><span class="linenum"> 500</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('error');
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>                          } else if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>)) {
<a name="l503"><span class="linenum"> 503</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a> = 0;
<a name="l504"><span class="linenum"> 504</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nooutcome', 'grades');
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>                          } else {
<a name="l507"><span class="linenum"> 507</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a> = (int)<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>;
<a name="l508"><span class="linenum"> 508</span></a>                              <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../_variables/scale.html">$scale</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('load_scale')" href="../_functions/load_scale.html" onMouseOver="funcPopup(event,'load_scale')">load_scale</a>();
<a name="l509"><span class="linenum"> 509</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_grade.html">str_grade</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../_variables/scale.html">$scale</a>-&gt;<a onClick="logVariable('scale_items')" class="var it39533" onMouseOver="hilite(39533)" onMouseOut="lolite()" href="../_variables/scale_items.html">scale_items</a>[(int)<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/grade.html">grade</a>-1]);
<a name="l510"><span class="linenum"> 510</span></a>                          }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">                        // create html representation of feedback</span>
<a name="l513"><span class="linenum"> 513</span></a>                          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>)) {
<a name="l514"><span class="linenum"> 514</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_feedback.html">str_feedback</a> = '';
<a name="l515"><span class="linenum"> 515</span></a>                          } else {
<a name="l516"><span class="linenum"> 516</span></a>                              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/str_feedback.html">str_feedback</a> = <a class="function" onClick="logFunction('format_text')" href="../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../_variables/feedbackformat.html">feedbackformat</a>);
<a name="l517"><span class="linenum"> 517</span></a>                          }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>                          <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('grades')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/grades.html">grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>] = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>;
<a name="l520"><span class="linenum"> 520</span></a>                      }
<a name="l521"><span class="linenum"> 521</span></a>                  }
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>                  if (isset(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('outcomes')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/outcomes.html">outcomes</a>[<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>])) {
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">                    // itemnumber duplicates - lets fix them!</span>
<a name="l525"><span class="linenum"> 525</span></a>                      <a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('newnumber')" href="../_variables/newnumber.html">$newnumber</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a> + 1;
<a name="l526"><span class="linenum"> 526</span></a>                      while(<a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('itemtype'=&gt;<a class="var it5769" onMouseOver="hilite(5769)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../_variables/itemtype.html">$itemtype</a>, 'itemmodule'=&gt;<a class="var it6480" onMouseOver="hilite(6480)" onMouseOut="lolite()" onClick="logVariable('itemmodule')" href="../_variables/itemmodule.html">$itemmodule</a>, 'iteminstance'=&gt;<a class="var it6497" onMouseOver="hilite(6497)" onMouseOut="lolite()" onClick="logVariable('iteminstance')" href="../_variables/iteminstance.html">$iteminstance</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'itemnumber'=&gt;<a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('newnumber')" href="../_variables/newnumber.html">$newnumber</a>))) {
<a name="l527"><span class="linenum"> 527</span></a>                          <a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('newnumber')" href="../_variables/newnumber.html">$newnumber</a>++;
<a name="l528"><span class="linenum"> 528</span></a>                      }
<a name="l529"><span class="linenum"> 529</span></a>                      <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>    = <a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('newnumber')" href="../_variables/newnumber.html">$newnumber</a>;
<a name="l530"><span class="linenum"> 530</span></a>                      <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a> = <a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('newnumber')" href="../_variables/newnumber.html">$newnumber</a>;
<a name="l531"><span class="linenum"> 531</span></a>                      <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>('system');
<a name="l532"><span class="linenum"> 532</span></a>                  }
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>                  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('outcomes')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/outcomes.html">outcomes</a>[<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a>] = <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>;
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>              }
<a name="l537"><span class="linenum"> 537</span></a>          }
<a name="l538"><span class="linenum"> 538</span></a>      }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">    // sort results using itemnumbers</span>
<a name="l541"><span class="linenum"> 541</span></a>      <a class="phpfunction" onClick="logFunction('ksort')" href="../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('items')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/items.html">items</a>, SORT_NUMERIC);
<a name="l542"><span class="linenum"> 542</span></a>      <a class="phpfunction" onClick="logFunction('ksort')" href="../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('outcomes')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../_variables/outcomes.html">outcomes</a>, SORT_NUMERIC);
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>      return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>;
<a name="l545"><span class="linenum"> 545</span></a>  }
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">///////////////////////////////////////////////////////////////////</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">///// End of public API for communication with modules/blocks /////</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">///////////////////////////////////////////////////////////////////</span>
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">///////////////////////////////////////////////////////////////////</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">///// Internal API: used by gradebook plugins and Moodle core /////</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">///////////////////////////////////////////////////////////////////</span>
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">/**</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment"> * Returns a  course gradebook setting</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment"> *</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment"> * @param string $name of setting, maybe null if reset only</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment"> * @param string $default value to return if setting is not found</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment"> * @param bool $resetcache force reset of internal static cache</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment"> * @return string value of the setting, $default if setting not found, NULL if supplied $name is null</span>
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment"> */</span>
<a name="l566"><span class="linenum"> 566</span></a>  function <a class="function" onClick="logFunction('grade_get_setting')" href="../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>=null, <a class="var it37298" onMouseOver="hilite(37298)" onMouseOut="lolite()" onClick="logVariable('resetcache')" href="../_variables/resetcache.html">$resetcache</a>=false) {
<a name="l567"><span class="linenum"> 567</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>      static <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = array();
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>      if (<a class="var it37298" onMouseOver="hilite(37298)" onMouseOut="lolite()" onClick="logVariable('resetcache')" href="../_variables/resetcache.html">$resetcache</a> or !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>)) {
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>] = array();
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>      } else if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>)) {
<a name="l575"><span class="linenum"> 575</span></a>          return null;
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>      } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>])) {
<a name="l578"><span class="linenum"> 578</span></a>          return <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>][<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>];
<a name="l579"><span class="linenum"> 579</span></a>      }
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grade_settings', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'name'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>))) {
<a name="l582"><span class="linenum"> 582</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = null;
<a name="l583"><span class="linenum"> 583</span></a>      } else {
<a name="l584"><span class="linenum"> 584</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('value')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/value.html">value</a>;
<a name="l585"><span class="linenum"> 585</span></a>      }
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>)) {
<a name="l588"><span class="linenum"> 588</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>;
<a name="l589"><span class="linenum"> 589</span></a>      }
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>      <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>][<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>] = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l592"><span class="linenum"> 592</span></a>      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l593"><span class="linenum"> 593</span></a>  }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">/**</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment"> * Returns all course gradebook settings as object properties</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment"> *</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment"> * @return object</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment"> */</span>
<a name="l601"><span class="linenum"> 601</span></a>  function <a class="function" onClick="logFunction('grade_get_settings')" href="../_functions/grade_get_settings.html" onMouseOver="funcPopup(event,'grade_get_settings')">grade_get_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l602"><span class="linenum"> 602</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>       <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> = new stdClass();
<a name="l605"><span class="linenum"> 605</span></a>       <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('id')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>;
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>      if (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('grade_settings', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l608"><span class="linenum"> 608</span></a>          foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l609"><span class="linenum"> 609</span></a>              <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a>-&gt;{<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('name')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../_variables/name.html">name</a>} = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('value')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../_variables/value.html">value</a>;
<a name="l610"><span class="linenum"> 610</span></a>          }
<a name="l611"><span class="linenum"> 611</span></a>      }
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>      return <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a>;
<a name="l614"><span class="linenum"> 614</span></a>  }
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">/**</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment"> * Add, update or delete a course gradebook setting</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment"> *</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment"> * @param string $name Name of the setting</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment"> * @param string $value Value of the setting. NULL means delete the setting.</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment"> */</span>
<a name="l623"><span class="linenum"> 623</span></a>  function <a class="function" onClick="logFunction('grade_set_setting')" href="../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l624"><span class="linenum"> 624</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_settings', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'name'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>));
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      } else if (!<a class="var it3149" onMouseOver="hilite(3149)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grade_settings', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'name'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>))) {
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = new stdClass();
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>;
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/name.html">name</a>     = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('value')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/value.html">value</a>    = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_settings', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>      } else {
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = new stdClass();
<a name="l638"><span class="linenum"> 638</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/id.html">id</a>       = <a class="var it3149" onMouseOver="hilite(3149)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a>-&gt;<a onClick="logVariable('id')" class="var it39876" onMouseOver="hilite(39876)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l639"><span class="linenum"> 639</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('value')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/value.html">value</a>    = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l640"><span class="linenum"> 640</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('grade_settings', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      <a class="function" onClick="logFunction('grade_get_setting')" href="../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, null, null, true); <span class="comment">// reset the cache</span>
<a name="l644"><span class="linenum"> 644</span></a>  }
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">/**</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment"> * Returns string representation of grade value</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment"> *</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment"> * @param float $value The grade value</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment"> * @param object $grade_item Grade item object passed by reference to prevent scale reloading</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment"> * @param bool $localized use localised decimal separator</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment"> * @param int $displaytype type of display. For example GRADE_DISPLAY_TYPE_REAL, GRADE_DISPLAY_TYPE_PERCENTAGE, GRADE_DISPLAY_TYPE_LETTER</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment"> * @param int $decimals The number of decimal places when displaying float values</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment"> * @return string</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment"> */</span>
<a name="l656"><span class="linenum"> 656</span></a>  function <a class="function" onClick="logFunction('grade_format_gradevalue')" href="../_functions/grade_format_gradevalue.html" onMouseOver="funcPopup(event,'grade_format_gradevalue')">grade_format_gradevalue</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, &amp;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>=true, <a class="var it10041" onMouseOver="hilite(10041)" onMouseOut="lolite()" onClick="logVariable('displaytype')" href="../_variables/displaytype.html">$displaytype</a>=null, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>=null) {
<a name="l657"><span class="linenum"> 657</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a> or <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_TEXT')" href="../_constants/GRADE_TYPE_TEXT.html" onMouseOver="constPopup(event,'GRADE_TYPE_TEXT')">GRADE_TYPE_TEXT</a>) {
<a name="l658"><span class="linenum"> 658</span></a>          return '';
<a name="l659"><span class="linenum"> 659</span></a>      }
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">    // no grade yet?</span>
<a name="l662"><span class="linenum"> 662</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l663"><span class="linenum"> 663</span></a>          return '-';
<a name="l664"><span class="linenum"> 664</span></a>      }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> != <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a> and <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> != <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>) {
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">        //unknown type??</span>
<a name="l668"><span class="linenum"> 668</span></a>          return '';
<a name="l669"><span class="linenum"> 669</span></a>      }
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it10041" onMouseOver="hilite(10041)" onMouseOut="lolite()" onClick="logVariable('displaytype')" href="../_variables/displaytype.html">$displaytype</a>)) {
<a name="l672"><span class="linenum"> 672</span></a>          <a class="var it10041" onMouseOver="hilite(10041)" onMouseOut="lolite()" onClick="logVariable('displaytype')" href="../_variables/displaytype.html">$displaytype</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('get_displaytype')" href="../_functions/get_displaytype.html" onMouseOver="funcPopup(event,'get_displaytype')">get_displaytype</a>();
<a name="l673"><span class="linenum"> 673</span></a>      }
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>)) {
<a name="l676"><span class="linenum"> 676</span></a>          <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('get_decimals')" href="../_functions/get_decimals.html" onMouseOver="funcPopup(event,'get_decimals')">get_decimals</a>();
<a name="l677"><span class="linenum"> 677</span></a>      }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>      switch (<a class="var it10041" onMouseOver="hilite(10041)" onMouseOut="lolite()" onClick="logVariable('displaytype')" href="../_variables/displaytype.html">$displaytype</a>) {
<a name="l680"><span class="linenum"> 680</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_REAL')" href="../_constants/GRADE_DISPLAY_TYPE_REAL.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_REAL')">GRADE_DISPLAY_TYPE_REAL</a>:
<a name="l681"><span class="linenum"> 681</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_real')" href="../_functions/grade_format_gradevalue_real.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_real')">grade_format_gradevalue_real</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>);
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_PERCENTAGE')" href="../_constants/GRADE_DISPLAY_TYPE_PERCENTAGE.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_PERCENTAGE')">GRADE_DISPLAY_TYPE_PERCENTAGE</a>:
<a name="l684"><span class="linenum"> 684</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_percentage')" href="../_functions/grade_format_gradevalue_percentage.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_percentage')">grade_format_gradevalue_percentage</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>);
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_LETTER')" href="../_constants/GRADE_DISPLAY_TYPE_LETTER.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_LETTER')">GRADE_DISPLAY_TYPE_LETTER</a>:
<a name="l687"><span class="linenum"> 687</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_letter')" href="../_functions/grade_format_gradevalue_letter.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_letter')">grade_format_gradevalue_letter</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>);
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_REAL_PERCENTAGE')" href="../_constants/GRADE_DISPLAY_TYPE_REAL_PERCENTAGE.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_REAL_PERCENTAGE')">GRADE_DISPLAY_TYPE_REAL_PERCENTAGE</a>:
<a name="l690"><span class="linenum"> 690</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_real')" href="../_functions/grade_format_gradevalue_real.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_real')">grade_format_gradevalue_real</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ' (' .
<a name="l691"><span class="linenum"> 691</span></a>                      <a class="function" onClick="logFunction('grade_format_gradevalue_percentage')" href="../_functions/grade_format_gradevalue_percentage.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_percentage')">grade_format_gradevalue_percentage</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ')';
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_REAL_LETTER')" href="../_constants/GRADE_DISPLAY_TYPE_REAL_LETTER.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_REAL_LETTER')">GRADE_DISPLAY_TYPE_REAL_LETTER</a>:
<a name="l694"><span class="linenum"> 694</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_real')" href="../_functions/grade_format_gradevalue_real.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_real')">grade_format_gradevalue_real</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ' (' .
<a name="l695"><span class="linenum"> 695</span></a>                      <a class="function" onClick="logFunction('grade_format_gradevalue_letter')" href="../_functions/grade_format_gradevalue_letter.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_letter')">grade_format_gradevalue_letter</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) . ')';
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_PERCENTAGE_REAL')" href="../_constants/GRADE_DISPLAY_TYPE_PERCENTAGE_REAL.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_PERCENTAGE_REAL')">GRADE_DISPLAY_TYPE_PERCENTAGE_REAL</a>:
<a name="l698"><span class="linenum"> 698</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_percentage')" href="../_functions/grade_format_gradevalue_percentage.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_percentage')">grade_format_gradevalue_percentage</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ' (' .
<a name="l699"><span class="linenum"> 699</span></a>                      <a class="function" onClick="logFunction('grade_format_gradevalue_real')" href="../_functions/grade_format_gradevalue_real.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_real')">grade_format_gradevalue_real</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ')';
<a name="l700"><span class="linenum"> 700</span></a>  
<a name="l701"><span class="linenum"> 701</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_LETTER_REAL')" href="../_constants/GRADE_DISPLAY_TYPE_LETTER_REAL.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_LETTER_REAL')">GRADE_DISPLAY_TYPE_LETTER_REAL</a>:
<a name="l702"><span class="linenum"> 702</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_letter')" href="../_functions/grade_format_gradevalue_letter.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_letter')">grade_format_gradevalue_letter</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) . ' (' .
<a name="l703"><span class="linenum"> 703</span></a>                      <a class="function" onClick="logFunction('grade_format_gradevalue_real')" href="../_functions/grade_format_gradevalue_real.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_real')">grade_format_gradevalue_real</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ')';
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_LETTER_PERCENTAGE')" href="../_constants/GRADE_DISPLAY_TYPE_LETTER_PERCENTAGE.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_LETTER_PERCENTAGE')">GRADE_DISPLAY_TYPE_LETTER_PERCENTAGE</a>:
<a name="l706"><span class="linenum"> 706</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_letter')" href="../_functions/grade_format_gradevalue_letter.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_letter')">grade_format_gradevalue_letter</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) . ' (' .
<a name="l707"><span class="linenum"> 707</span></a>                      <a class="function" onClick="logFunction('grade_format_gradevalue_percentage')" href="../_functions/grade_format_gradevalue_percentage.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_percentage')">grade_format_gradevalue_percentage</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ')';
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>          case <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER')" href="../_constants/GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER')">GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER</a>:
<a name="l710"><span class="linenum"> 710</span></a>              return <a class="function" onClick="logFunction('grade_format_gradevalue_percentage')" href="../_functions/grade_format_gradevalue_percentage.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_percentage')">grade_format_gradevalue_percentage</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) . ' (' .
<a name="l711"><span class="linenum"> 711</span></a>                      <a class="function" onClick="logFunction('grade_format_gradevalue_letter')" href="../_functions/grade_format_gradevalue_letter.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_letter')">grade_format_gradevalue_letter</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) . ')';
<a name="l712"><span class="linenum"> 712</span></a>          default:
<a name="l713"><span class="linenum"> 713</span></a>              return '';
<a name="l714"><span class="linenum"> 714</span></a>      }
<a name="l715"><span class="linenum"> 715</span></a>  }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">/**</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment"> * Returns a float representation of a grade value</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> *</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> * @param float $value The grade value</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment"> * @param object $grade_item Grade item object</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> * @param int $decimals The number of decimal places</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment"> * @param bool $localized use localised decimal separator</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment"> * @return string</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment"> */</span>
<a name="l726"><span class="linenum"> 726</span></a>  function <a class="function" onClick="logFunction('grade_format_gradevalue_real')" href="../_functions/grade_format_gradevalue_real.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_real')">grade_format_gradevalue_real</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) {
<a name="l727"><span class="linenum"> 727</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>) {
<a name="l728"><span class="linenum"> 728</span></a>          if (!<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../_variables/scale.html">$scale</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('load_scale')" href="../_functions/load_scale.html" onMouseOver="funcPopup(event,'load_scale')">load_scale</a>()) {
<a name="l729"><span class="linenum"> 729</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('error');
<a name="l730"><span class="linenum"> 730</span></a>          }
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('bounded_grade')" href="../_functions/bounded_grade.html" onMouseOver="funcPopup(event,'bounded_grade')">bounded_grade</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l733"><span class="linenum"> 733</span></a>          return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../_variables/scale.html">$scale</a>-&gt;<a onClick="logVariable('scale_items')" class="var it39533" onMouseOver="hilite(39533)" onMouseOut="lolite()" href="../_variables/scale_items.html">scale_items</a>[<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>-1]);
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>      } else {
<a name="l736"><span class="linenum"> 736</span></a>          return <a class="function" onClick="logFunction('format_float')" href="../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>);
<a name="l737"><span class="linenum"> 737</span></a>      }
<a name="l738"><span class="linenum"> 738</span></a>  }
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">/**</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment"> * Returns a percentage representation of a grade value</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment"> *</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment"> * @param float $value The grade value</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment"> * @param object $grade_item Grade item object</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment"> * @param int $decimals The number of decimal places</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> * @param bool $localized use localised decimal separator</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> * @return string</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment"> */</span>
<a name="l749"><span class="linenum"> 749</span></a>  function <a class="function" onClick="logFunction('grade_format_gradevalue_percentage')" href="../_functions/grade_format_gradevalue_percentage.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_percentage')">grade_format_gradevalue_percentage</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>) {
<a name="l750"><span class="linenum"> 750</span></a>      <a class="var it1329" onMouseOver="hilite(1329)" onMouseOut="lolite()" onClick="logVariable('min')" href="../_variables/min.html">$min</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademin')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademin.html">grademin</a>;
<a name="l751"><span class="linenum"> 751</span></a>      <a class="var it588" onMouseOver="hilite(588)" onMouseOut="lolite()" onClick="logVariable('max')" href="../_variables/max.html">$max</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademax')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademax.html">grademax</a>;
<a name="l752"><span class="linenum"> 752</span></a>      if (<a class="var it1329" onMouseOver="hilite(1329)" onMouseOut="lolite()" onClick="logVariable('min')" href="../_variables/min.html">$min</a> == <a class="var it588" onMouseOver="hilite(588)" onMouseOut="lolite()" onClick="logVariable('max')" href="../_variables/max.html">$max</a>) {
<a name="l753"><span class="linenum"> 753</span></a>          return '';
<a name="l754"><span class="linenum"> 754</span></a>      }
<a name="l755"><span class="linenum"> 755</span></a>      <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('bounded_grade')" href="../_functions/bounded_grade.html" onMouseOver="funcPopup(event,'bounded_grade')">bounded_grade</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l756"><span class="linenum"> 756</span></a>      <a class="var it12062" onMouseOver="hilite(12062)" onMouseOut="lolite()" onClick="logVariable('percentage')" href="../_variables/percentage.html">$percentage</a> = ((<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>-<a class="var it1329" onMouseOver="hilite(1329)" onMouseOut="lolite()" onClick="logVariable('min')" href="../_variables/min.html">$min</a>)*100)/(<a class="var it588" onMouseOver="hilite(588)" onMouseOut="lolite()" onClick="logVariable('max')" href="../_variables/max.html">$max</a>-<a class="var it1329" onMouseOver="hilite(1329)" onMouseOut="lolite()" onClick="logVariable('min')" href="../_variables/min.html">$min</a>);
<a name="l757"><span class="linenum"> 757</span></a>      return <a class="function" onClick="logFunction('format_float')" href="../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it12062" onMouseOver="hilite(12062)" onMouseOut="lolite()" onClick="logVariable('percentage')" href="../_variables/percentage.html">$percentage</a>, <a class="var it8848" onMouseOver="hilite(8848)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../_variables/decimals.html">$decimals</a>, <a class="var it13189" onMouseOver="hilite(13189)" onMouseOut="lolite()" onClick="logVariable('localized')" href="../_variables/localized.html">$localized</a>).' %';
<a name="l758"><span class="linenum"> 758</span></a>  }
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">/**</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment"> * Returns a letter grade representation of a grade value</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment"> * The array of grade letters used is produced by {@link grade_get_letters()} using the course context</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment"> *</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment"> * @param float $value The grade value</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment"> * @param object $grade_item Grade item object</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment"> * @return string</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment"> */</span>
<a name="l768"><span class="linenum"> 768</span></a>  function <a class="function" onClick="logFunction('grade_format_gradevalue_letter')" href="../_functions/grade_format_gradevalue_letter.html" onMouseOver="funcPopup(event,'grade_format_gradevalue_letter')">grade_format_gradevalue_letter</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l769"><span class="linenum"> 769</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('courseid')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l770"><span class="linenum"> 770</span></a>      if (!<a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a> = <a class="function" onClick="logFunction('grade_get_letters')" href="../_functions/grade_get_letters.html" onMouseOver="funcPopup(event,'grade_get_letters')">grade_get_letters</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l771"><span class="linenum"> 771</span></a>          return ''; <span class="comment">// no letters??</span>
<a name="l772"><span class="linenum"> 772</span></a>      }
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l775"><span class="linenum"> 775</span></a>          return '-';
<a name="l776"><span class="linenum"> 776</span></a>      }
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>      <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> = <a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('standardise_score')" href="../_functions/standardise_score.html" onMouseOver="funcPopup(event,'standardise_score')">standardise_score</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademin')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademin.html">grademin</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('grademax')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/grademax.html">grademax</a>, 0, 100);
<a name="l779"><span class="linenum"> 779</span></a>      <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('bounded_number')" href="../_functions/bounded_number.html" onMouseOver="funcPopup(event,'bounded_number')">bounded_number</a>(0, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, 100); <span class="comment">// just in case</span>
<a name="l780"><span class="linenum"> 780</span></a>      foreach (<a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a> as <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../_variables/boundary.html">$boundary</a> =&gt; <a class="var it4483" onMouseOver="hilite(4483)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../_variables/letter.html">$letter</a>) {
<a name="l781"><span class="linenum"> 781</span></a>          if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> &gt;= <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../_variables/boundary.html">$boundary</a>) {
<a name="l782"><span class="linenum"> 782</span></a>              return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it4483" onMouseOver="hilite(4483)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../_variables/letter.html">$letter</a>);
<a name="l783"><span class="linenum"> 783</span></a>          }
<a name="l784"><span class="linenum"> 784</span></a>      }
<a name="l785"><span class="linenum"> 785</span></a>      return '-'; <span class="comment">// no match? maybe '' would be more correct</span>
<a name="l786"><span class="linenum"> 786</span></a>  }
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment">/**</span>
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment"> * Returns grade options for gradebook grade category menu</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment"> *</span>
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment"> * @param bool $includenew Include option for new category at array index -1</span>
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment"> * @return array of grade categories in course</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment"> */</span>
<a name="l796"><span class="linenum"> 796</span></a>  function <a class="function" onClick="logFunction('grade_get_categories_menu')" href="../_functions/grade_get_categories_menu.html" onMouseOver="funcPopup(event,'grade_get_categories_menu')">grade_get_categories_menu</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it20401" onMouseOver="hilite(20401)" onMouseOut="lolite()" onClick="logVariable('includenew')" href="../_variables/includenew.html">$includenew</a>=false) {
<a name="l797"><span class="linenum"> 797</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = array();
<a name="l798"><span class="linenum"> 798</span></a>      if (!<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="class" onClick="logClass('grade_category')" href="../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">        //make sure course category exists</span>
<a name="l800"><span class="linenum"> 800</span></a>          if (!<a class="class" onClick="logClass('grade_category')" href="../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('fetch_course_category')" href="../_functions/fetch_course_category.html" onMouseOver="funcPopup(event,'fetch_course_category')">fetch_course_category</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)) {
<a name="l801"><span class="linenum"> 801</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Can not create course grade category!');
<a name="l802"><span class="linenum"> 802</span></a>              return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l803"><span class="linenum"> 803</span></a>          }
<a name="l804"><span class="linenum"> 804</span></a>          <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="class" onClick="logClass('grade_category')" href="../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l805"><span class="linenum"> 805</span></a>      }
<a name="l806"><span class="linenum"> 806</span></a>      foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l807"><span class="linenum"> 807</span></a>          if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a class="function" onClick="logFunction('is_course_category')" href="../_functions/is_course_category.html" onMouseOver="funcPopup(event,'is_course_category')">is_course_category</a>()) {
<a name="l808"><span class="linenum"> 808</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('uncategorised', 'grades');
<a name="l809"><span class="linenum"> 809</span></a>              unset(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l810"><span class="linenum"> 810</span></a>          }
<a name="l811"><span class="linenum"> 811</span></a>      }
<a name="l812"><span class="linenum"> 812</span></a>      if (<a class="var it20401" onMouseOver="hilite(20401)" onMouseOut="lolite()" onClick="logVariable('includenew')" href="../_variables/includenew.html">$includenew</a>) {
<a name="l813"><span class="linenum"> 813</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>[-1] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('newcategory', 'grades');
<a name="l814"><span class="linenum"> 814</span></a>      }
<a name="l815"><span class="linenum"> 815</span></a>      <a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a> = array();
<a name="l816"><span class="linenum"> 816</span></a>      foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l818"><span class="linenum"> 818</span></a>      }
<a name="l819"><span class="linenum"> 819</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a>);
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>      return (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>+<a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a>);
<a name="l822"><span class="linenum"> 822</span></a>  }
<a name="l823"><span class="linenum"> 823</span></a>  
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">/**</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment"> * Returns the array of grade letters to be used in the supplied context</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment"> *</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment"> * @param object $context Context object or null for defaults</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment"> * @return array of grade_boundary (minimum) =&gt; letter_string</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment"> */</span>
<a name="l830"><span class="linenum"> 830</span></a>  function <a class="function" onClick="logFunction('grade_get_letters')" href="../_functions/grade_get_letters.html" onMouseOver="funcPopup(event,'grade_get_letters')">grade_get_letters</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>=null) {
<a name="l831"><span class="linenum"> 831</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>      if (empty(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">        //default grading letters</span>
<a name="l835"><span class="linenum"> 835</span></a>          return array('93'=&gt;'A', '90'=&gt;'A-', '87'=&gt;'B+', '83'=&gt;'B', '80'=&gt;'B-', '77'=&gt;'C+', '73'=&gt;'C', '70'=&gt;'C-', '67'=&gt;'D+', '60'=&gt;'D', '0'=&gt;'F');
<a name="l836"><span class="linenum"> 836</span></a>      }
<a name="l837"><span class="linenum"> 837</span></a>  
<a name="l838"><span class="linenum"> 838</span></a>      static <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = array();
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>)) {
<a name="l841"><span class="linenum"> 841</span></a>          return <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l842"><span class="linenum"> 842</span></a>      }
<a name="l843"><span class="linenum"> 843</span></a>  
<a name="l844"><span class="linenum"> 844</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>) &gt; 100) {
<a name="l845"><span class="linenum"> 845</span></a>          <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = array(); <span class="comment">// cache size limit</span>
<a name="l846"><span class="linenum"> 846</span></a>      }
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>      <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a> = array();
<a name="l849"><span class="linenum"> 849</span></a>  
<a name="l850"><span class="linenum"> 850</span></a>      <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>();
<a name="l851"><span class="linenum"> 851</span></a>      <a class="phpfunction" onClick="logFunction('array_unshift')" href="../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>      foreach (<a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> as <a class="var it16813" onMouseOver="hilite(16813)" onMouseOut="lolite()" onClick="logVariable('ctxid')" href="../_variables/ctxid.html">$ctxid</a>) {
<a name="l854"><span class="linenum"> 854</span></a>          if (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('grade_letters', array('contextid'=&gt;<a class="var it16813" onMouseOver="hilite(16813)" onMouseOut="lolite()" onClick="logVariable('ctxid')" href="../_variables/ctxid.html">$ctxid</a>), 'lowerboundary DESC')) {
<a name="l855"><span class="linenum"> 855</span></a>              foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l856"><span class="linenum"> 856</span></a>                  <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a>[<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('lowerboundary')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../_variables/lowerboundary.html">lowerboundary</a>] = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('letter')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../_variables/letter.html">letter</a>;
<a name="l857"><span class="linenum"> 857</span></a>              }
<a name="l858"><span class="linenum"> 858</span></a>          }
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>          if (!empty(<a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a>)) {
<a name="l861"><span class="linenum"> 861</span></a>              <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a>;
<a name="l862"><span class="linenum"> 862</span></a>              return <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a>;
<a name="l863"><span class="linenum"> 863</span></a>          }
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>      <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a> = <a class="function" onClick="logFunction('grade_get_letters')" href="../_functions/grade_get_letters.html" onMouseOver="funcPopup(event,'grade_get_letters')">grade_get_letters</a>(null);
<a name="l867"><span class="linenum"> 867</span></a>      <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>[<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a>;
<a name="l868"><span class="linenum"> 868</span></a>      return <a class="var it3696" onMouseOver="hilite(3696)" onMouseOut="lolite()" onClick="logVariable('letters')" href="../_variables/letters.html">$letters</a>;
<a name="l869"><span class="linenum"> 869</span></a>  }
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>  
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">/**</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment"> * Verify new value of grade item idnumber. Checks for uniqueness of new ID numbers. Old ID numbers are kept intact.</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment"> *</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment"> * @param string $idnumber string (with magic quotes)</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment"> * @param int $courseid ID numbers are course unique only</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment"> * @param grade_item $grade_item The grade item this idnumber is associated with</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment"> * @param stdClass $cm used for course module idnumbers and items attached to modules</span>
<a name="l879"><span class="linenum"> 879</span></a>  <span class="comment"> * @return bool true means idnumber ok</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment"> */</span>
<a name="l881"><span class="linenum"> 881</span></a>  function <a class="function" onClick="logFunction('grade_verify_idnumber')" href="../_functions/grade_verify_idnumber.html" onMouseOver="funcPopup(event,'grade_verify_idnumber')">grade_verify_idnumber</a>(<a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>=null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>=null) {
<a name="l882"><span class="linenum"> 882</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l883"><span class="linenum"> 883</span></a>  
<a name="l884"><span class="linenum"> 884</span></a>      if (<a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a> == '') {
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">        //we allow empty idnumbers</span>
<a name="l886"><span class="linenum"> 886</span></a>          return true;
<a name="l887"><span class="linenum"> 887</span></a>      }
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">    // keep existing even when not unique</span>
<a name="l890"><span class="linenum"> 890</span></a>      if (<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> and <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('idnumber')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> == <a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>) {
<a name="l891"><span class="linenum"> 891</span></a>          if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> and <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/itemnumber.html">itemnumber</a> != 0) {
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">            // grade item with itemnumber &gt; 0 can't have the same idnumber as the main</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">            // itemnumber 0 which is synced with course_modules</span>
<a name="l894"><span class="linenum"> 894</span></a>              return false;
<a name="l895"><span class="linenum"> 895</span></a>          }
<a name="l896"><span class="linenum"> 896</span></a>          return true;
<a name="l897"><span class="linenum"> 897</span></a>      } else if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> and <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('idnumber')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> == <a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>) {
<a name="l898"><span class="linenum"> 898</span></a>          return true;
<a name="l899"><span class="linenum"> 899</span></a>      }
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('course_modules', array('course'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'idnumber'=&gt;<a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>))) {
<a name="l902"><span class="linenum"> 902</span></a>          return false;
<a name="l903"><span class="linenum"> 903</span></a>      }
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'idnumber'=&gt;<a class="var it2926" onMouseOver="hilite(2926)" onMouseOut="lolite()" onClick="logVariable('idnumber')" href="../_variables/idnumber.html">$idnumber</a>))) {
<a name="l906"><span class="linenum"> 906</span></a>          return false;
<a name="l907"><span class="linenum"> 907</span></a>      }
<a name="l908"><span class="linenum"> 908</span></a>  
<a name="l909"><span class="linenum"> 909</span></a>      return true;
<a name="l910"><span class="linenum"> 910</span></a>  }
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">/**</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment"> * Force final grade recalculation in all course items</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment"> *</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment"> * @param int $courseid The course ID to recalculate</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment"> */</span>
<a name="l917"><span class="linenum"> 917</span></a>  function <a class="function" onClick="logFunction('grade_force_full_regrading')" href="../_functions/grade_force_full_regrading.html" onMouseOver="funcPopup(event,'grade_force_full_regrading')">grade_force_full_regrading</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l918"><span class="linenum"> 918</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l919"><span class="linenum"> 919</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('grade_items', 'needsupdate', 1, array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l920"><span class="linenum"> 920</span></a>  }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">/**</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> * Forces regrading of all site grades. Used when changing site setings</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> */</span>
<a name="l925"><span class="linenum"> 925</span></a>  function <a class="function" onClick="logFunction('grade_force_site_regrading')" href="../_functions/grade_force_site_regrading.html" onMouseOver="funcPopup(event,'grade_force_site_regrading')">grade_force_site_regrading</a>() {
<a name="l926"><span class="linenum"> 926</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l927"><span class="linenum"> 927</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('grade_items', 'needsupdate', 1);
<a name="l928"><span class="linenum"> 928</span></a>  }
<a name="l929"><span class="linenum"> 929</span></a>  
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">/**</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment"> * Recover a user's grades from grade_grades_history</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment"> * @param int $userid the user ID whose grades we want to recover</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment"> * @param int $courseid the relevant course</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment"> * @return bool true if successful or false if there was an error or no grades could be recovered</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment"> */</span>
<a name="l936"><span class="linenum"> 936</span></a>  function <a class="function" onClick="logFunction('grade_recover_history_grades')" href="../_functions/grade_recover_history_grades.html" onMouseOver="funcPopup(event,'grade_recover_history_grades')">grade_recover_history_grades</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l937"><span class="linenum"> 937</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>      if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('disablegradehistory')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/disablegradehistory.html">disablegradehistory</a>) {
<a name="l940"><span class="linenum"> 940</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Attempting to recover grades when grade history is disabled.');
<a name="l941"><span class="linenum"> 941</span></a>          return false;
<a name="l942"><span class="linenum"> 942</span></a>      }
<a name="l943"><span class="linenum"> 943</span></a>  
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment">    //Were grades recovered? Flag to return.</span>
<a name="l945"><span class="linenum"> 945</span></a>      <a class="var it37299" onMouseOver="hilite(37299)" onMouseOut="lolite()" onClick="logVariable('recoveredgrades')" href="../_variables/recoveredgrades.html">$recoveredgrades</a> = false;
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment">    //Check the user is enrolled in this course</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">    //Dont bother checking if they have a gradeable role. They may get one later so recover</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">    //whatever grades they have now just in case.</span>
<a name="l950"><span class="linenum"> 950</span></a>      <a class="var it26482" onMouseOver="hilite(26482)" onMouseOut="lolite()" onClick="logVariable('course_context')" href="../_variables/course_context.html">$course_context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l951"><span class="linenum"> 951</span></a>      if (!<a class="function" onClick="logFunction('is_enrolled')" href="../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it26482" onMouseOver="hilite(26482)" onMouseOut="lolite()" onClick="logVariable('course_context')" href="../_variables/course_context.html">$course_context</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l952"><span class="linenum"> 952</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Attempting to recover the grades of a user who is deleted or not enrolled. Skipping recover.');
<a name="l953"><span class="linenum"> 953</span></a>          return false;
<a name="l954"><span class="linenum"> 954</span></a>      }
<a name="l955"><span class="linenum"> 955</span></a>  
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">    //Check for existing grades for this user in this course</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">    //Recovering grades when the user already has grades can lead to duplicate indexes and bad data</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">    //In the future we could move the existing grades to the history table then recover the grades from before then</span>
<a name="l959"><span class="linenum"> 959</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT gg.id
<a name="l960"><span class="linenum"> 960</span></a>                FROM {grade_grades} gg
<a name="l961"><span class="linenum"> 961</span></a>                JOIN {grade_items} gi ON gi.id = gg.itemid
<a name="l962"><span class="linenum"> 962</span></a>               WHERE gi.courseid = :courseid AND gg.userid = :userid&quot;;
<a name="l963"><span class="linenum"> 963</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, 'courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l964"><span class="linenum"> 964</span></a>      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l965"><span class="linenum"> 965</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Attempting to recover the grades of a user who already has grades. Skipping recover.');
<a name="l966"><span class="linenum"> 966</span></a>          return false;
<a name="l967"><span class="linenum"> 967</span></a>      } else {
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">        //Retrieve the user's old grades</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">        //have history ID as first column to guarantee we a unique first column</span>
<a name="l970"><span class="linenum"> 970</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT h.id, gi.itemtype, gi.itemmodule, gi.iteminstance as iteminstance, gi.itemnumber, h.source, h.itemid, h.userid, h.rawgrade, h.rawgrademax,
<a name="l971"><span class="linenum"> 971</span></a>                         h.rawgrademin, h.rawscaleid, h.usermodified, h.finalgrade, h.hidden, h.locked, h.locktime, h.exported, h.overridden, h.excluded, h.feedback,
<a name="l972"><span class="linenum"> 972</span></a>                         h.feedbackformat, h.information, h.informationformat, h.timemodified, itemcreated.tm AS timecreated
<a name="l973"><span class="linenum"> 973</span></a>                    FROM {grade_grades_history} h
<a name="l974"><span class="linenum"> 974</span></a>                    <a class="function" onClick="logFunction('JOIN')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> (SELECT itemid, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(id) AS id
<a name="l975"><span class="linenum"> 975</span></a>                            FROM {grade_grades_history}
<a name="l976"><span class="linenum"> 976</span></a>                           WHERE userid = :userid1
<a name="l977"><span class="linenum"> 977</span></a>                        GROUP BY itemid) maxquery ON h.id = maxquery.id AND h.itemid = maxquery.itemid
<a name="l978"><span class="linenum"> 978</span></a>                    JOIN {grade_items} gi ON gi.id = h.itemid
<a name="l979"><span class="linenum"> 979</span></a>                    <a class="function" onClick="logFunction('JOIN')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> (SELECT itemid, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(timemodified) AS tm
<a name="l980"><span class="linenum"> 980</span></a>                            FROM {grade_grades_history}
<a name="l981"><span class="linenum"> 981</span></a>                           WHERE userid = :userid2 AND action = :insertaction
<a name="l982"><span class="linenum"> 982</span></a>                        GROUP BY itemid) itemcreated ON itemcreated.itemid = h.itemid
<a name="l983"><span class="linenum"> 983</span></a>                   WHERE gi.courseid = :courseid&quot;;
<a name="l984"><span class="linenum"> 984</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('userid1' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, 'userid2' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> , 'insertaction' =&gt; <a class="constant" onClick="logConstant('GRADE_HISTORY_INSERT')" href="../_constants/GRADE_HISTORY_INSERT.html" onMouseOver="constPopup(event,'GRADE_HISTORY_INSERT')">GRADE_HISTORY_INSERT</a>, 'courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l985"><span class="linenum"> 985</span></a>          <a class="var it37300" onMouseOver="hilite(37300)" onMouseOut="lolite()" onClick="logVariable('oldgrades')" href="../_variables/oldgrades.html">$oldgrades</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">        //now move the old grades to the grade_grades table</span>
<a name="l988"><span class="linenum"> 988</span></a>          foreach (<a class="var it37300" onMouseOver="hilite(37300)" onMouseOut="lolite()" onClick="logVariable('oldgrades')" href="../_variables/oldgrades.html">$oldgrades</a> as <a class="var it9477" onMouseOver="hilite(9477)" onMouseOut="lolite()" onClick="logVariable('oldgrade')" href="../_variables/oldgrade.html">$oldgrade</a>) {
<a name="l989"><span class="linenum"> 989</span></a>              unset(<a class="var it9477" onMouseOver="hilite(9477)" onMouseOut="lolite()" onClick="logVariable('oldgrade')" href="../_variables/oldgrade.html">$oldgrade</a>-&gt;<a onClick="logVariable('id')" class="var it40063" onMouseOver="hilite(40063)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l990"><span class="linenum"> 990</span></a>  
<a name="l991"><span class="linenum"> 991</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(<a class="var it9477" onMouseOver="hilite(9477)" onMouseOut="lolite()" onClick="logVariable('oldgrade')" href="../_variables/oldgrade.html">$oldgrade</a>, false);<span class="comment">//2nd arg false as dont want to try and retrieve a record from the DB</span>
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>(<a class="var it9477" onMouseOver="hilite(9477)" onMouseOut="lolite()" onClick="logVariable('oldgrade')" href="../_variables/oldgrade.html">$oldgrade</a>-&gt;<a onClick="logVariable('source')" class="var it40063" onMouseOver="hilite(40063)" onMouseOut="lolite()" href="../_variables/source.html">source</a>);
<a name="l993"><span class="linenum"> 993</span></a>  
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">            //dont include default empty grades created when activities are created</span>
<a name="l995"><span class="linenum"> 995</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it9477" onMouseOver="hilite(9477)" onMouseOut="lolite()" onClick="logVariable('oldgrade')" href="../_variables/oldgrade.html">$oldgrade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it40063" onMouseOver="hilite(40063)" onMouseOut="lolite()" href="../_variables/finalgrade.html">finalgrade</a>) || !<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it9477" onMouseOver="hilite(9477)" onMouseOut="lolite()" onClick="logVariable('oldgrade')" href="../_variables/oldgrade.html">$oldgrade</a>-&gt;<a onClick="logVariable('feedback')" class="var it40063" onMouseOver="hilite(40063)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>)) {
<a name="l996"><span class="linenum"> 996</span></a>                  <a class="var it37299" onMouseOver="hilite(37299)" onMouseOut="lolite()" onClick="logVariable('recoveredgrades')" href="../_variables/recoveredgrades.html">$recoveredgrades</a> = true;
<a name="l997"><span class="linenum"> 997</span></a>              }
<a name="l998"><span class="linenum"> 998</span></a>          }
<a name="l999"><span class="linenum"> 999</span></a>      }
<a name="l1000"><span class="linenum">1000</span></a>  
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment">    //Some activities require manual grade synching (moving grades from the activity into the gradebook)</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">    //If the student was deleted when synching was done they may have grades in the activity that haven't been moved across</span>
<a name="l1003"><span class="linenum">1003</span></a>      <a class="function" onClick="logFunction('grade_grab_course_grades')" href="../_functions/grade_grab_course_grades.html" onMouseOver="funcPopup(event,'grade_grab_course_grades')">grade_grab_course_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, null, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>      return <a class="var it37299" onMouseOver="hilite(37299)" onMouseOut="lolite()" onClick="logVariable('recoveredgrades')" href="../_variables/recoveredgrades.html">$recoveredgrades</a>;
<a name="l1006"><span class="linenum">1006</span></a>  }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">/**</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment"> * Updates all final grades in course.</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment"> *</span>
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment"> * @param int $userid If specified try to do a quick regrading of the grades of this user only</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment"> * @param object $updated_item Optional grade item to be marked for regrading</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment"> * @return bool true if ok, array of errors if problems found. Grade item id =&gt; error message</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment"> */</span>
<a name="l1016"><span class="linenum">1016</span></a>  function <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>=null, <a class="var it37301" onMouseOver="hilite(37301)" onMouseOut="lolite()" onClick="logVariable('updated_item')" href="../_variables/updated_item.html">$updated_item</a>=null) {
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">    // This may take a very long time.</span>
<a name="l1018"><span class="linenum">1018</span></a>      \<a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>      <a class="var it10010" onMouseOver="hilite(10010)" onMouseOut="lolite()" onClick="logVariable('course_item')" href="../_variables/course_item.html">$course_item</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_course_item')" href="../_functions/fetch_course_item.html" onMouseOver="funcPopup(event,'fetch_course_item')">fetch_course_item</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1021"><span class="linenum">1021</span></a>  
<a name="l1022"><span class="linenum">1022</span></a>      if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">        // one raw grade updated for one user</span>
<a name="l1024"><span class="linenum">1024</span></a>          if (empty(<a class="var it37301" onMouseOver="hilite(37301)" onMouseOut="lolite()" onClick="logVariable('updated_item')" href="../_variables/updated_item.html">$updated_item</a>)) {
<a name="l1025"><span class="linenum">1025</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(&quot;cannotbenull&quot;, 'debug', '', &quot;updated_item&quot;);
<a name="l1026"><span class="linenum">1026</span></a>          }
<a name="l1027"><span class="linenum">1027</span></a>          if (<a class="var it10010" onMouseOver="hilite(10010)" onMouseOut="lolite()" onClick="logVariable('course_item')" href="../_variables/course_item.html">$course_item</a>-&gt;<a onClick="logVariable('needsupdate')" class="var it39609" onMouseOver="hilite(39609)" onMouseOut="lolite()" href="../_variables/needsupdate.html">needsupdate</a>) {
<a name="l1028"><span class="linenum">1028</span></a>              <a class="var it37301" onMouseOver="hilite(37301)" onMouseOut="lolite()" onClick="logVariable('updated_item')" href="../_variables/updated_item.html">$updated_item</a>-&gt;<a class="function" onClick="logFunction('force_regrading')" href="../_functions/force_regrading.html" onMouseOver="funcPopup(event,'force_regrading')">force_regrading</a>();
<a name="l1029"><span class="linenum">1029</span></a>              return array(<a class="var it10010" onMouseOver="hilite(10010)" onMouseOut="lolite()" onClick="logVariable('course_item')" href="../_variables/course_item.html">$course_item</a>-&gt;<a onClick="logVariable('id')" class="var it39609" onMouseOver="hilite(39609)" onMouseOut="lolite()" href="../_variables/id.html">id</a> =&gt;'Can not do fast regrading after updating of raw grades');
<a name="l1030"><span class="linenum">1030</span></a>          }
<a name="l1031"><span class="linenum">1031</span></a>  
<a name="l1032"><span class="linenum">1032</span></a>      } else {
<a name="l1033"><span class="linenum">1033</span></a>          if (!<a class="var it10010" onMouseOver="hilite(10010)" onMouseOut="lolite()" onClick="logVariable('course_item')" href="../_variables/course_item.html">$course_item</a>-&gt;<a onClick="logVariable('needsupdate')" class="var it39609" onMouseOver="hilite(39609)" onMouseOut="lolite()" href="../_variables/needsupdate.html">needsupdate</a>) {
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">            // nothing to do :-)</span>
<a name="l1035"><span class="linenum">1035</span></a>              return true;
<a name="l1036"><span class="linenum">1036</span></a>          }
<a name="l1037"><span class="linenum">1037</span></a>      }
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">    // Categories might have to run some processing before we fetch the grade items.</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">    // This gives them a final opportunity to update and mark their children to be updated.</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">    // We need to work on the children categories up to the parent ones, so that, for instance,</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">    // if a category total is updated it will be reflected in the parent category.</span>
<a name="l1043"><span class="linenum">1043</span></a>      <a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a> = <a class="class" onClick="logClass('grade_category')" href="../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1044"><span class="linenum">1044</span></a>      <a class="var it37302" onMouseOver="hilite(37302)" onMouseOut="lolite()" onClick="logVariable('flatcattree')" href="../_variables/flatcattree.html">$flatcattree</a> = array();
<a name="l1045"><span class="linenum">1045</span></a>      foreach (<a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a> as <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>) {
<a name="l1046"><span class="linenum">1046</span></a>          if (!isset(<a class="var it37302" onMouseOver="hilite(37302)" onMouseOut="lolite()" onClick="logVariable('flatcattree')" href="../_variables/flatcattree.html">$flatcattree</a>[<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('depth')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a>])) {
<a name="l1047"><span class="linenum">1047</span></a>              <a class="var it37302" onMouseOver="hilite(37302)" onMouseOut="lolite()" onClick="logVariable('flatcattree')" href="../_variables/flatcattree.html">$flatcattree</a>[<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('depth')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a>] = array();
<a name="l1048"><span class="linenum">1048</span></a>          }
<a name="l1049"><span class="linenum">1049</span></a>          <a class="var it37302" onMouseOver="hilite(37302)" onMouseOut="lolite()" onClick="logVariable('flatcattree')" href="../_variables/flatcattree.html">$flatcattree</a>[<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('depth')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/depth.html">depth</a>][] = <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>;
<a name="l1050"><span class="linenum">1050</span></a>      }
<a name="l1051"><span class="linenum">1051</span></a>      <a class="phpfunction" onClick="logFunction('krsort')" href="../_functions/krsort.html" onMouseOver="phpfuncPopup(event,'krsort')">krsort</a>(<a class="var it37302" onMouseOver="hilite(37302)" onMouseOut="lolite()" onClick="logVariable('flatcattree')" href="../_variables/flatcattree.html">$flatcattree</a>);
<a name="l1052"><span class="linenum">1052</span></a>      foreach (<a class="var it37302" onMouseOver="hilite(37302)" onMouseOut="lolite()" onClick="logVariable('flatcattree')" href="../_variables/flatcattree.html">$flatcattree</a> as <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> =&gt; <a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a>) {
<a name="l1053"><span class="linenum">1053</span></a>          foreach (<a class="var it10802" onMouseOver="hilite(10802)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../_variables/cats.html">$cats</a> as <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>) {
<a name="l1054"><span class="linenum">1054</span></a>              <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a class="function" onClick="logFunction('pre_regrade_final_grades')" href="../_functions/pre_regrade_final_grades.html" onMouseOver="funcPopup(event,'pre_regrade_final_grades')">pre_regrade_final_grades</a>();
<a name="l1055"><span class="linenum">1055</span></a>          }
<a name="l1056"><span class="linenum">1056</span></a>      }
<a name="l1057"><span class="linenum">1057</span></a>  
<a name="l1058"><span class="linenum">1058</span></a>      <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1059"><span class="linenum">1059</span></a>      <a class="var it33675" onMouseOver="hilite(33675)" onMouseOut="lolite()" onClick="logVariable('depends_on')" href="../_variables/depends_on.html">$depends_on</a> = array();
<a name="l1060"><span class="linenum">1060</span></a>  
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment">    // first mark all category and calculated items as needing regrading</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">    // this is slower, but 100% accurate</span>
<a name="l1063"><span class="linenum">1063</span></a>      foreach (<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> as <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>=&gt;<a class="var it11736" onMouseOver="hilite(11736)" onMouseOut="lolite()" onClick="logVariable('gitem')" href="../_variables/gitem.html">$gitem</a>) {
<a name="l1064"><span class="linenum">1064</span></a>          if (!empty(<a class="var it37301" onMouseOver="hilite(37301)" onMouseOut="lolite()" onClick="logVariable('updated_item')" href="../_variables/updated_item.html">$updated_item</a>) and <a class="var it37301" onMouseOver="hilite(37301)" onMouseOut="lolite()" onClick="logVariable('updated_item')" href="../_variables/updated_item.html">$updated_item</a>-&gt;<a onClick="logVariable('id')" class="var it41049" onMouseOver="hilite(41049)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>) {
<a name="l1065"><span class="linenum">1065</span></a>              <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;needsupdate = 1;
<a name="l1066"><span class="linenum">1066</span></a>  
<a name="l1067"><span class="linenum">1067</span></a>          } else if (<a class="var it11736" onMouseOver="hilite(11736)" onMouseOut="lolite()" onClick="logVariable('gitem')" href="../_variables/gitem.html">$gitem</a>-&gt;<a class="function" onClick="logFunction('is_course_item')" href="../_functions/is_course_item.html" onMouseOver="funcPopup(event,'is_course_item')">is_course_item</a>() or <a class="var it11736" onMouseOver="hilite(11736)" onMouseOut="lolite()" onClick="logVariable('gitem')" href="../_variables/gitem.html">$gitem</a>-&gt;<a class="function" onClick="logFunction('is_category_item')" href="../_functions/is_category_item.html" onMouseOver="funcPopup(event,'is_category_item')">is_category_item</a>() or <a class="var it11736" onMouseOver="hilite(11736)" onMouseOut="lolite()" onClick="logVariable('gitem')" href="../_variables/gitem.html">$gitem</a>-&gt;<a class="function" onClick="logFunction('is_calculated')" href="../_functions/is_calculated.html" onMouseOver="funcPopup(event,'is_calculated')">is_calculated</a>()) {
<a name="l1068"><span class="linenum">1068</span></a>              <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;needsupdate = 1;
<a name="l1069"><span class="linenum">1069</span></a>          }
<a name="l1070"><span class="linenum">1070</span></a>  
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment">        // construct depends_on lookup array</span>
<a name="l1072"><span class="linenum">1072</span></a>          <a class="var it33675" onMouseOver="hilite(33675)" onMouseOut="lolite()" onClick="logVariable('depends_on')" href="../_variables/depends_on.html">$depends_on</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>] = <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;<a class="function" onClick="logFunction('depends_on')" href="../_functions/depends_on.html" onMouseOver="funcPopup(event,'depends_on')">depends_on</a>();
<a name="l1073"><span class="linenum">1073</span></a>      }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>      <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = array();
<a name="l1076"><span class="linenum">1076</span></a>      <a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a> = array();
<a name="l1077"><span class="linenum">1077</span></a>      <a class="var it37304" onMouseOver="hilite(37304)" onMouseOut="lolite()" onClick="logVariable('gids')" href="../_variables/gids.html">$gids</a>     = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>);
<a name="l1078"><span class="linenum">1078</span></a>      <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = 0;
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>      while (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a>) &lt; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37304" onMouseOver="hilite(37304)" onMouseOut="lolite()" onClick="logVariable('gids')" href="../_variables/gids.html">$gids</a>)) { // work until all grades are final or error found
<a name="l1081"><span class="linenum">1081</span></a>          <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = 0;
<a name="l1082"><span class="linenum">1082</span></a>          foreach (<a class="var it37304" onMouseOver="hilite(37304)" onMouseOut="lolite()" onClick="logVariable('gids')" href="../_variables/gids.html">$gids</a> as <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>) {
<a name="l1083"><span class="linenum">1083</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>, <a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a>)) {
<a name="l1084"><span class="linenum">1084</span></a>                  continue; <span class="comment">// already final</span>
<a name="l1085"><span class="linenum">1085</span></a>              }
<a name="l1086"><span class="linenum">1086</span></a>  
<a name="l1087"><span class="linenum">1087</span></a>              if (!<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;needsupdate) {
<a name="l1088"><span class="linenum">1088</span></a>                  <a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a>[] = <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>; <span class="comment">// we can make it final - does not need update</span>
<a name="l1089"><span class="linenum">1089</span></a>                  continue;
<a name="l1090"><span class="linenum">1090</span></a>              }
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>              <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('doupdate')" href="../_variables/doupdate.html">$doupdate</a> = true;
<a name="l1093"><span class="linenum">1093</span></a>              foreach (<a class="var it33675" onMouseOver="hilite(33675)" onMouseOut="lolite()" onClick="logVariable('depends_on')" href="../_variables/depends_on.html">$depends_on</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>] as <a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('did')" href="../_variables/did.html">$did</a>) {
<a name="l1094"><span class="linenum">1094</span></a>                  if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('did')" href="../_variables/did.html">$did</a>, <a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a>)) {
<a name="l1095"><span class="linenum">1095</span></a>                      <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('doupdate')" href="../_variables/doupdate.html">$doupdate</a> = false;
<a name="l1096"><span class="linenum">1096</span></a>                      continue; <span class="comment">// this item depends on something that is not yet in finals array</span>
<a name="l1097"><span class="linenum">1097</span></a>                  }
<a name="l1098"><span class="linenum">1098</span></a>              }
<a name="l1099"><span class="linenum">1099</span></a>  
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">            //oki - let's update, calculate or aggregate :-)</span>
<a name="l1101"><span class="linenum">1101</span></a>              if (<a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('doupdate')" href="../_variables/doupdate.html">$doupdate</a>) {
<a name="l1102"><span class="linenum">1102</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;<a class="function" onClick="logFunction('regrade_final_grades')" href="../_functions/regrade_final_grades.html" onMouseOver="funcPopup(event,'regrade_final_grades')">regrade_final_grades</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1103"><span class="linenum">1103</span></a>  
<a name="l1104"><span class="linenum">1104</span></a>                  if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> === true) {
<a name="l1105"><span class="linenum">1105</span></a>                      <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;<a class="function" onClick="logFunction('regrading_finished')" href="../_functions/regrading_finished.html" onMouseOver="funcPopup(event,'regrading_finished')">regrading_finished</a>();
<a name="l1106"><span class="linenum">1106</span></a>                      <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;<a class="function" onClick="logFunction('check_locktime')" href="../_functions/check_locktime.html" onMouseOver="funcPopup(event,'check_locktime')">check_locktime</a>(); <span class="comment">// do the locktime item locking</span>
<a name="l1107"><span class="linenum">1107</span></a>                      <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>++;
<a name="l1108"><span class="linenum">1108</span></a>                      <a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a>[] = <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>;
<a name="l1109"><span class="linenum">1109</span></a>  
<a name="l1110"><span class="linenum">1110</span></a>                  } else {
<a name="l1111"><span class="linenum">1111</span></a>                      <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;<a class="function" onClick="logFunction('force_regrading')" href="../_functions/force_regrading.html" onMouseOver="funcPopup(event,'force_regrading')">force_regrading</a>();
<a name="l1112"><span class="linenum">1112</span></a>                      <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>] = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l1113"><span class="linenum">1113</span></a>                  }
<a name="l1114"><span class="linenum">1114</span></a>              }
<a name="l1115"><span class="linenum">1115</span></a>          }
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>          if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> == 0) {
<a name="l1118"><span class="linenum">1118</span></a>              <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>++;
<a name="l1119"><span class="linenum">1119</span></a>          } else {
<a name="l1120"><span class="linenum">1120</span></a>              <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = 0;
<a name="l1121"><span class="linenum">1121</span></a>          }
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>          if (<a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> &gt; 1) {
<a name="l1124"><span class="linenum">1124</span></a>              foreach(<a class="var it37304" onMouseOver="hilite(37304)" onMouseOut="lolite()" onClick="logVariable('gids')" href="../_variables/gids.html">$gids</a> as <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>) {
<a name="l1125"><span class="linenum">1125</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>, <a class="var it37303" onMouseOver="hilite(37303)" onMouseOut="lolite()" onClick="logVariable('finalids')" href="../_variables/finalids.html">$finalids</a>)) {
<a name="l1126"><span class="linenum">1126</span></a>                      continue; <span class="comment">// this one is ok</span>
<a name="l1127"><span class="linenum">1127</span></a>                  }
<a name="l1128"><span class="linenum">1128</span></a>                  <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;<a class="function" onClick="logFunction('force_regrading')" href="../_functions/force_regrading.html" onMouseOver="funcPopup(event,'force_regrading')">force_regrading</a>();
<a name="l1129"><span class="linenum">1129</span></a>                  <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>[<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a>[<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>]-&gt;id] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errorcalculationbroken', 'grades');
<a name="l1130"><span class="linenum">1130</span></a>              }
<a name="l1131"><span class="linenum">1131</span></a>              break; <span class="comment">// Found error.</span>
<a name="l1132"><span class="linenum">1132</span></a>          }
<a name="l1133"><span class="linenum">1133</span></a>      }
<a name="l1134"><span class="linenum">1134</span></a>  
<a name="l1135"><span class="linenum">1135</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>) == 0) {
<a name="l1136"><span class="linenum">1136</span></a>          if (empty(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment">            // do the locktime locking of grades, but only when doing full regrading</span>
<a name="l1138"><span class="linenum">1138</span></a>              <a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('check_locktime_all')" href="../_functions/check_locktime_all.html" onMouseOver="funcPopup(event,'check_locktime_all')">check_locktime_all</a>(<a class="var it37304" onMouseOver="hilite(37304)" onMouseOut="lolite()" onClick="logVariable('gids')" href="../_variables/gids.html">$gids</a>);
<a name="l1139"><span class="linenum">1139</span></a>          }
<a name="l1140"><span class="linenum">1140</span></a>          return true;
<a name="l1141"><span class="linenum">1141</span></a>      } else {
<a name="l1142"><span class="linenum">1142</span></a>          return <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>;
<a name="l1143"><span class="linenum">1143</span></a>      }
<a name="l1144"><span class="linenum">1144</span></a>  }
<a name="l1145"><span class="linenum">1145</span></a>  
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">/**</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment"> * Refetches grade data from course activities</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment"> *</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment"> * @param string $modname Limit the grade fetch to a single module type. For example 'forum'</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment"> * @param int $userid limit the grade fetch to a single user</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment"> */</span>
<a name="l1153"><span class="linenum">1153</span></a>  function <a class="function" onClick="logFunction('grade_grab_course_grades')" href="../_functions/grade_grab_course_grades.html" onMouseOver="funcPopup(event,'grade_grab_course_grades')">grade_grab_course_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>=null, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>=0) {
<a name="l1154"><span class="linenum">1154</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1155"><span class="linenum">1155</span></a>  
<a name="l1156"><span class="linenum">1156</span></a>      if (<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l1157"><span class="linenum">1157</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT a.*, cm.idnumber as cmidnumber, m.name as modname
<a name="l1158"><span class="linenum">1158</span></a>                    FROM {&quot;.<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>.&quot;} a, {course_modules} cm, {modules} m
<a name="l1159"><span class="linenum">1159</span></a>                   WHERE m.name=:modname AND m.visible=1 AND m.id=cm.module AND cm.instance=a.id AND cm.course=:courseid&quot;;
<a name="l1160"><span class="linenum">1160</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('modname'=&gt;<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1161"><span class="linenum">1161</span></a>  
<a name="l1162"><span class="linenum">1162</span></a>          if (<a class="var it30529" onMouseOver="hilite(30529)" onMouseOut="lolite()" onClick="logVariable('modinstances')" href="../_variables/modinstances.html">$modinstances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l1163"><span class="linenum">1163</span></a>              foreach (<a class="var it30529" onMouseOver="hilite(30529)" onMouseOut="lolite()" onClick="logVariable('modinstances')" href="../_variables/modinstances.html">$modinstances</a> as <a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>) {
<a name="l1164"><span class="linenum">1164</span></a>                  <a class="function" onClick="logFunction('grade_update_mod_grades')" href="../_functions/grade_update_mod_grades.html" onMouseOver="funcPopup(event,'grade_update_mod_grades')">grade_update_mod_grades</a>(<a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1165"><span class="linenum">1165</span></a>              }
<a name="l1166"><span class="linenum">1166</span></a>          }
<a name="l1167"><span class="linenum">1167</span></a>          return;
<a name="l1168"><span class="linenum">1168</span></a>      }
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>      if (!<a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('mod') ) {
<a name="l1171"><span class="linenum">1171</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nomodules', 'debug');
<a name="l1172"><span class="linenum">1172</span></a>      }
<a name="l1173"><span class="linenum">1173</span></a>  
<a name="l1174"><span class="linenum">1174</span></a>      foreach (<a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> as <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a> =&gt; <a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>) {
<a name="l1175"><span class="linenum">1175</span></a>          if (<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a> == 'NEWMODULE') {   // Someone has unzipped the template, ignore it
<a name="l1176"><span class="linenum">1176</span></a>              continue;
<a name="l1177"><span class="linenum">1177</span></a>          }
<a name="l1178"><span class="linenum">1178</span></a>  
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">        // include the module lib once</span>
<a name="l1180"><span class="linenum">1180</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/lib.php')) {
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">            // get all instance of the activity</span>
<a name="l1182"><span class="linenum">1182</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT a.*, cm.idnumber as cmidnumber, m.name as modname
<a name="l1183"><span class="linenum">1183</span></a>                        FROM {&quot;.<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>.&quot;} a, {course_modules} cm, {modules} m
<a name="l1184"><span class="linenum">1184</span></a>                       WHERE m.name=:mod AND m.visible=1 AND m.id=cm.module AND cm.instance=a.id AND cm.course=:courseid&quot;;
<a name="l1185"><span class="linenum">1185</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('mod'=&gt;<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1186"><span class="linenum">1186</span></a>  
<a name="l1187"><span class="linenum">1187</span></a>              if (<a class="var it30529" onMouseOver="hilite(30529)" onMouseOut="lolite()" onClick="logVariable('modinstances')" href="../_variables/modinstances.html">$modinstances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l1188"><span class="linenum">1188</span></a>                  foreach (<a class="var it30529" onMouseOver="hilite(30529)" onMouseOut="lolite()" onClick="logVariable('modinstances')" href="../_variables/modinstances.html">$modinstances</a> as <a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>) {
<a name="l1189"><span class="linenum">1189</span></a>                      <a class="function" onClick="logFunction('grade_update_mod_grades')" href="../_functions/grade_update_mod_grades.html" onMouseOver="funcPopup(event,'grade_update_mod_grades')">grade_update_mod_grades</a>(<a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1190"><span class="linenum">1190</span></a>                  }
<a name="l1191"><span class="linenum">1191</span></a>              }
<a name="l1192"><span class="linenum">1192</span></a>          }
<a name="l1193"><span class="linenum">1193</span></a>      }
<a name="l1194"><span class="linenum">1194</span></a>  }
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment">/**</span>
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment"> * Force full update of module grades in central gradebook</span>
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment"> *</span>
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment"> * @param object $modinstance Module object with extra cmidnumber and modname property</span>
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment"> * @param int $userid Optional user ID if limiting the update to a single user</span>
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment"> * @return bool True if success</span>
<a name="l1202"><span class="linenum">1202</span></a>  <span class="comment"> */</span>
<a name="l1203"><span class="linenum">1203</span></a>  function <a class="function" onClick="logFunction('grade_update_mod_grades')" href="../_functions/grade_update_mod_grades.html" onMouseOver="funcPopup(event,'grade_update_mod_grades')">grade_update_mod_grades</a>(<a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>=0) {
<a name="l1204"><span class="linenum">1204</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1205"><span class="linenum">1205</span></a>  
<a name="l1206"><span class="linenum">1206</span></a>      <a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/mod/'.<a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>-&gt;<a onClick="logVariable('modname')" class="var it41050" onMouseOver="hilite(41050)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>;
<a name="l1207"><span class="linenum">1207</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/lib.php')) {
<a name="l1208"><span class="linenum">1208</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('missing lib.php file in module ' . <a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>-&gt;<a onClick="logVariable('modname')" class="var it41050" onMouseOver="hilite(41050)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>);
<a name="l1209"><span class="linenum">1209</span></a>          return false;
<a name="l1210"><span class="linenum">1210</span></a>      }
<a name="l1211"><span class="linenum">1211</span></a>      include_once(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/lib.php');
<a name="l1212"><span class="linenum">1212</span></a>  
<a name="l1213"><span class="linenum">1213</span></a>      <a class="var it37306" onMouseOver="hilite(37306)" onMouseOut="lolite()" onClick="logVariable('updateitemfunc')" href="../_variables/updateitemfunc.html">$updateitemfunc</a>   = <a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>-&gt;<a onClick="logVariable('modname')" class="var it41050" onMouseOver="hilite(41050)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>.'_grade_item_update';
<a name="l1214"><span class="linenum">1214</span></a>      <a class="var it37307" onMouseOver="hilite(37307)" onMouseOut="lolite()" onClick="logVariable('updategradesfunc')" href="../_variables/updategradesfunc.html">$updategradesfunc</a> = <a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>-&gt;<a onClick="logVariable('modname')" class="var it41050" onMouseOver="hilite(41050)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>.'_update_grades';
<a name="l1215"><span class="linenum">1215</span></a>  
<a name="l1216"><span class="linenum">1216</span></a>      if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37307" onMouseOver="hilite(37307)" onMouseOut="lolite()" onClick="logVariable('updategradesfunc')" href="../_variables/updategradesfunc.html">$updategradesfunc</a>) and <a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37306" onMouseOver="hilite(37306)" onMouseOut="lolite()" onClick="logVariable('updateitemfunc')" href="../_variables/updateitemfunc.html">$updateitemfunc</a>)) {
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">        //new grading supported, force updating of grades</span>
<a name="l1218"><span class="linenum">1218</span></a>          <a class="var it37306" onMouseOver="hilite(37306)" onMouseOut="lolite()" onClick="logVariable('updateitemfunc')" href="../_variables/updateitemfunc.html">$updateitemfunc</a>(<a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>);
<a name="l1219"><span class="linenum">1219</span></a>          <a class="var it37307" onMouseOver="hilite(37307)" onMouseOut="lolite()" onClick="logVariable('updategradesfunc')" href="../_variables/updategradesfunc.html">$updategradesfunc</a>(<a class="var it6650" onMouseOver="hilite(6650)" onMouseOut="lolite()" onClick="logVariable('modinstance')" href="../_variables/modinstance.html">$modinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l1220"><span class="linenum">1220</span></a>  
<a name="l1221"><span class="linenum">1221</span></a>      } else {
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment">        // Module does not support grading?</span>
<a name="l1223"><span class="linenum">1223</span></a>      }
<a name="l1224"><span class="linenum">1224</span></a>  
<a name="l1225"><span class="linenum">1225</span></a>      return true;
<a name="l1226"><span class="linenum">1226</span></a>  }
<a name="l1227"><span class="linenum">1227</span></a>  
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment">/**</span>
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment"> * Remove grade letters for given context</span>
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment"> *</span>
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment"> * @param context $context The context</span>
<a name="l1232"><span class="linenum">1232</span></a>  <span class="comment"> * @param bool $showfeedback If true a success notification will be displayed</span>
<a name="l1233"><span class="linenum">1233</span></a>  <span class="comment"> */</span>
<a name="l1234"><span class="linenum">1234</span></a>  function <a class="function" onClick="logFunction('remove_grade_letters')" href="../_functions/remove_grade_letters.html" onMouseOver="funcPopup(event,'remove_grade_letters')">remove_grade_letters</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1235"><span class="linenum">1235</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1236"><span class="linenum">1236</span></a>  
<a name="l1237"><span class="linenum">1237</span></a>      <a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleted');
<a name="l1238"><span class="linenum">1238</span></a>  
<a name="l1239"><span class="linenum">1239</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_letters', array('contextid'=&gt;<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1240"><span class="linenum">1240</span></a>      if (<a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1241"><span class="linenum">1241</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a>.' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('letters', 'grades'), 'notifysuccess');
<a name="l1242"><span class="linenum">1242</span></a>      }
<a name="l1243"><span class="linenum">1243</span></a>  }
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment">/**</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment"> * Remove all grade related course data</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment"> * Grade history is kept</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment"> *</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment"> * @param bool $showfeedback If true success notifications will be displayed</span>
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment"> */</span>
<a name="l1252"><span class="linenum">1252</span></a>  function <a class="function" onClick="logFunction('remove_course_grades')" href="../_functions/remove_course_grades.html" onMouseOver="funcPopup(event,'remove_course_grades')">remove_course_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1253"><span class="linenum">1253</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1254"><span class="linenum">1254</span></a>  
<a name="l1255"><span class="linenum">1255</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1256"><span class="linenum">1256</span></a>      <a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleted');
<a name="l1257"><span class="linenum">1257</span></a>  
<a name="l1258"><span class="linenum">1258</span></a>      <a class="var it9997" onMouseOver="hilite(9997)" onMouseOut="lolite()" onClick="logVariable('course_category')" href="../_variables/course_category.html">$course_category</a> = <a class="class" onClick="logClass('grade_category')" href="../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('fetch_course_category')" href="../_functions/fetch_course_category.html" onMouseOver="funcPopup(event,'fetch_course_category')">fetch_course_category</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1259"><span class="linenum">1259</span></a>      <a class="var it9997" onMouseOver="hilite(9997)" onMouseOut="lolite()" onClick="logVariable('course_category')" href="../_variables/course_category.html">$course_category</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('coursedelete');
<a name="l1260"><span class="linenum">1260</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)-&gt;id, 'grade', 'feedback');
<a name="l1261"><span class="linenum">1261</span></a>      if (<a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1262"><span class="linenum">1262</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a>.' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades', 'grades').', '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('items', 'grades').', '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('categories', 'grades'), 'notifysuccess');
<a name="l1263"><span class="linenum">1263</span></a>      }
<a name="l1264"><span class="linenum">1264</span></a>  
<a name="l1265"><span class="linenum">1265</span></a>      if (<a class="var it3695" onMouseOver="hilite(3695)" onMouseOut="lolite()" onClick="logVariable('outcomes')" href="../_variables/outcomes.html">$outcomes</a> = <a class="class" onClick="logClass('grade_outcome')" href="../_classes/grade_outcome.html" onMouseOver="classPopup(event,'grade_outcome')">grade_outcome</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l1266"><span class="linenum">1266</span></a>          foreach (<a class="var it3695" onMouseOver="hilite(3695)" onMouseOut="lolite()" onClick="logVariable('outcomes')" href="../_variables/outcomes.html">$outcomes</a> as <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>) {
<a name="l1267"><span class="linenum">1267</span></a>              <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('coursedelete');
<a name="l1268"><span class="linenum">1268</span></a>          }
<a name="l1269"><span class="linenum">1269</span></a>      }
<a name="l1270"><span class="linenum">1270</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_outcomes_courses', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1271"><span class="linenum">1271</span></a>      if (<a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1272"><span class="linenum">1272</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a>.' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('outcomes', 'grades'), 'notifysuccess');
<a name="l1273"><span class="linenum">1273</span></a>      }
<a name="l1274"><span class="linenum">1274</span></a>  
<a name="l1275"><span class="linenum">1275</span></a>      if (<a class="var it3693" onMouseOver="hilite(3693)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../_variables/scales.html">$scales</a> = <a class="class" onClick="logClass('grade_scale')" href="../_classes/grade_scale.html" onMouseOver="classPopup(event,'grade_scale')">grade_scale</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l1276"><span class="linenum">1276</span></a>          foreach (<a class="var it3693" onMouseOver="hilite(3693)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../_variables/scales.html">$scales</a> as <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../_variables/scale.html">$scale</a>) {
<a name="l1277"><span class="linenum">1277</span></a>              <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../_variables/scale.html">$scale</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('coursedelete');
<a name="l1278"><span class="linenum">1278</span></a>          }
<a name="l1279"><span class="linenum">1279</span></a>      }
<a name="l1280"><span class="linenum">1280</span></a>      if (<a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1281"><span class="linenum">1281</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a>.' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('scales'), 'notifysuccess');
<a name="l1282"><span class="linenum">1282</span></a>      }
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_settings', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1285"><span class="linenum">1285</span></a>      if (<a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1286"><span class="linenum">1286</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it13005" onMouseOver="hilite(13005)" onMouseOut="lolite()" onClick="logVariable('strdeleted')" href="../_variables/strdeleted.html">$strdeleted</a>.' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('settings', 'grades'), 'notifysuccess');
<a name="l1287"><span class="linenum">1287</span></a>      }
<a name="l1288"><span class="linenum">1288</span></a>  }
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">/**</span>
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment"> * Called when course category is deleted</span>
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment"> * Cleans the gradebook of associated data</span>
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment"> *</span>
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment"> * @param int $categoryid The course category id</span>
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment"> * @param int $newparentid If empty everything is deleted. Otherwise the ID of the category where content moved</span>
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment"> * @param bool $showfeedback print feedback</span>
<a name="l1297"><span class="linenum">1297</span></a>  <span class="comment"> */</span>
<a name="l1298"><span class="linenum">1298</span></a>  function <a class="function" onClick="logFunction('grade_course_category_delete')" href="../_functions/grade_course_category_delete.html" onMouseOver="funcPopup(event,'grade_course_category_delete')">grade_course_category_delete</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it25243" onMouseOver="hilite(25243)" onMouseOut="lolite()" onClick="logVariable('newparentid')" href="../_variables/newparentid.html">$newparentid</a>, <a class="var it13004" onMouseOver="hilite(13004)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l1299"><span class="linenum">1299</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>);
<a name="l1302"><span class="linenum">1302</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_letters', array('contextid'=&gt;<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1303"><span class="linenum">1303</span></a>  }
<a name="l1304"><span class="linenum">1304</span></a>  
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">/**</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment"> * Does gradebook cleanup when a module is uninstalled</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment"> * Deletes all associated grade items</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment"> *</span>
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment"> * @param string $modname The grade item module name to remove. For example 'forum'</span>
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment"> */</span>
<a name="l1311"><span class="linenum">1311</span></a>  function <a class="function" onClick="logFunction('grade_uninstalled_module')" href="../_functions/grade_uninstalled_module.html" onMouseOver="funcPopup(event,'grade_uninstalled_module')">grade_uninstalled_module</a>(<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l1312"><span class="linenum">1312</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT *
<a name="l1315"><span class="linenum">1315</span></a>                FROM {grade_items}
<a name="l1316"><span class="linenum">1316</span></a>               WHERE itemtype='mod' AND itemmodule=?&quot;;
<a name="l1317"><span class="linenum">1317</span></a>  
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">    // go all items for this module and delete them including the grades</span>
<a name="l1319"><span class="linenum">1319</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array(<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>));
<a name="l1320"><span class="linenum">1320</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l1321"><span class="linenum">1321</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>, false);
<a name="l1322"><span class="linenum">1322</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('moduninstall');
<a name="l1323"><span class="linenum">1323</span></a>      }
<a name="l1324"><span class="linenum">1324</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1325"><span class="linenum">1325</span></a>  }
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">/**</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment"> * Deletes all of a user's grade data from gradebook</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment"> *</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment"> * @param int $userid The user whose grade data should be deleted</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment"> */</span>
<a name="l1332"><span class="linenum">1332</span></a>  function <a class="function" onClick="logFunction('grade_user_delete')" href="../_functions/grade_user_delete.html" onMouseOver="funcPopup(event,'grade_user_delete')">grade_user_delete</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l1333"><span class="linenum">1333</span></a>      if (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> = <a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('userid'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>))) {
<a name="l1334"><span class="linenum">1334</span></a>          foreach (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> as <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>) {
<a name="l1335"><span class="linenum">1335</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('userdelete');
<a name="l1336"><span class="linenum">1336</span></a>          }
<a name="l1337"><span class="linenum">1337</span></a>      }
<a name="l1338"><span class="linenum">1338</span></a>  }
<a name="l1339"><span class="linenum">1339</span></a>  
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">/**</span>
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment"> * Purge course data when user unenrolls from a course</span>
<a name="l1342"><span class="linenum">1342</span></a>  <span class="comment"> *</span>
<a name="l1343"><span class="linenum">1343</span></a>  <span class="comment"> * @param int $courseid The ID of the course the user has unenrolled from</span>
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment"> * @param int $userid The ID of the user unenrolling</span>
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment"> */</span>
<a name="l1346"><span class="linenum">1346</span></a>  function <a class="function" onClick="logFunction('grade_user_unenrol')" href="../_functions/grade_user_unenrol.html" onMouseOver="funcPopup(event,'grade_user_unenrol')">grade_user_unenrol</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l1347"><span class="linenum">1347</span></a>      if (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>))) {
<a name="l1348"><span class="linenum">1348</span></a>          foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l1349"><span class="linenum">1349</span></a>              if (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> = <a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('userid'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, 'itemid'=&gt;<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1350"><span class="linenum">1350</span></a>                  foreach (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a> as <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>) {
<a name="l1351"><span class="linenum">1351</span></a>                      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('userdelete');
<a name="l1352"><span class="linenum">1352</span></a>                  }
<a name="l1353"><span class="linenum">1353</span></a>              }
<a name="l1354"><span class="linenum">1354</span></a>          }
<a name="l1355"><span class="linenum">1355</span></a>      }
<a name="l1356"><span class="linenum">1356</span></a>  }
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">/**</span>
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment"> * Grading cron job. Performs background clean up on the gradebook</span>
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment"> */</span>
<a name="l1361"><span class="linenum">1361</span></a>  function <a class="function" onClick="logFunction('grade_cron')" href="../_functions/grade_cron.html" onMouseOver="funcPopup(event,'grade_cron')">grade_cron</a>() {
<a name="l1362"><span class="linenum">1362</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1363"><span class="linenum">1363</span></a>  
<a name="l1364"><span class="linenum">1364</span></a>      <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT i.*
<a name="l1367"><span class="linenum">1367</span></a>                FROM {grade_items} i
<a name="l1368"><span class="linenum">1368</span></a>               WHERE i.locked = 0 AND i.locktime &gt; 0 AND i.locktime &lt; ? AND <a class="function" onClick="logFunction('EXISTS')" href="../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">EXISTS</a> (
<a name="l1369"><span class="linenum">1369</span></a>                  SELECT 'x' FROM {grade_items} c WHERE c.itemtype='course' AND c.needsupdate=0 AND c.courseid=i.courseid)&quot;;
<a name="l1370"><span class="linenum">1370</span></a>  
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">    // go through all courses that have proper final grades and lock them if needed</span>
<a name="l1372"><span class="linenum">1372</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array(<a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>));
<a name="l1373"><span class="linenum">1373</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l1374"><span class="linenum">1374</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>, false);
<a name="l1375"><span class="linenum">1375</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('locked')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../_variables/locked.html">locked</a> = <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>;
<a name="l1376"><span class="linenum">1376</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>('locktime');
<a name="l1377"><span class="linenum">1377</span></a>      }
<a name="l1378"><span class="linenum">1378</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>      <a class="var it10004" onMouseOver="hilite(10004)" onMouseOut="lolite()" onClick="logVariable('grade_inst')" href="../_variables/grade_inst.html">$grade_inst</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>();
<a name="l1381"><span class="linenum">1381</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = 'g.'.<a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',g.', <a class="var it10004" onMouseOver="hilite(10004)" onMouseOut="lolite()" onClick="logVariable('grade_inst')" href="../_variables/grade_inst.html">$grade_inst</a>-&gt;<a onClick="logVariable('required_fields')" class="var it40061" onMouseOver="hilite(40061)" onMouseOut="lolite()" href="../_variables/required_fields.html">required_fields</a>);
<a name="l1382"><span class="linenum">1382</span></a>  
<a name="l1383"><span class="linenum">1383</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>
<a name="l1384"><span class="linenum">1384</span></a>                FROM {grade_grades} g, {grade_items} i
<a name="l1385"><span class="linenum">1385</span></a>               WHERE g.locked = 0 AND g.locktime &gt; 0 AND g.locktime &lt; ? AND g.itemid=i.id AND <a class="function" onClick="logFunction('EXISTS')" href="../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">EXISTS</a> (
<a name="l1386"><span class="linenum">1386</span></a>                  SELECT 'x' FROM {grade_items} c WHERE c.itemtype='course' AND c.needsupdate=0 AND c.courseid=i.courseid)&quot;;
<a name="l1387"><span class="linenum">1387</span></a>  
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">    // go through all courses that have proper final grades and lock them if needed</span>
<a name="l1389"><span class="linenum">1389</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array(<a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>));
<a name="l1390"><span class="linenum">1390</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>) {
<a name="l1391"><span class="linenum">1391</span></a>          <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>, false);
<a name="l1392"><span class="linenum">1392</span></a>          <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('locked')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../_variables/locked.html">locked</a> = <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>;
<a name="l1393"><span class="linenum">1393</span></a>          <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>('locktime');
<a name="l1394"><span class="linenum">1394</span></a>      }
<a name="l1395"><span class="linenum">1395</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1396"><span class="linenum">1396</span></a>  
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment">    //TODO: do not run this cleanup every cron invocation</span>
<a name="l1398"><span class="linenum">1398</span></a>  <span class="comment">    // cleanup history tables</span>
<a name="l1399"><span class="linenum">1399</span></a>      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('gradehistorylifetime')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/gradehistorylifetime.html">gradehistorylifetime</a>)) {  // value in days
<a name="l1400"><span class="linenum">1400</span></a>          <a class="var it37309" onMouseOver="hilite(37309)" onMouseOut="lolite()" onClick="logVariable('histlifetime')" href="../_variables/histlifetime.html">$histlifetime</a> = <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> - (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('gradehistorylifetime')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/gradehistorylifetime.html">gradehistorylifetime</a> * 3600 * 24);
<a name="l1401"><span class="linenum">1401</span></a>          <a class="var it448" onMouseOver="hilite(448)" onMouseOut="lolite()" onClick="logVariable('tables')" href="../_variables/tables.html">$tables</a> = array('grade_outcomes_history', 'grade_categories_history', 'grade_items_history', 'grade_grades_history', 'scale_history');
<a name="l1402"><span class="linenum">1402</span></a>          foreach (<a class="var it448" onMouseOver="hilite(448)" onMouseOut="lolite()" onClick="logVariable('tables')" href="../_variables/tables.html">$tables</a> as <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>) {
<a name="l1403"><span class="linenum">1403</span></a>              if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, &quot;timemodified &lt; ?&quot;, array(<a class="var it37309" onMouseOver="hilite(37309)" onMouseOut="lolite()" onClick="logVariable('histlifetime')" href="../_variables/histlifetime.html">$histlifetime</a>))) {
<a name="l1404"><span class="linenum">1404</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;    Deleted old grade history records from '<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>'&quot;);
<a name="l1405"><span class="linenum">1405</span></a>              }
<a name="l1406"><span class="linenum">1406</span></a>          }
<a name="l1407"><span class="linenum">1407</span></a>      }
<a name="l1408"><span class="linenum">1408</span></a>  }
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">/**</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment"> * Reset all course grades, refetch from the activities and recalculate</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment"> *</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> * @param int $courseid The course to reset</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment"> * @return bool success</span>
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment"> */</span>
<a name="l1416"><span class="linenum">1416</span></a>  function <a class="function" onClick="logFunction('grade_course_reset')" href="../_functions/grade_course_reset.html" onMouseOver="funcPopup(event,'grade_course_reset')">grade_course_reset</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l1417"><span class="linenum">1417</span></a>  
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment">    // no recalculations</span>
<a name="l1419"><span class="linenum">1419</span></a>      <a class="function" onClick="logFunction('grade_force_full_regrading')" href="../_functions/grade_force_full_regrading.html" onMouseOver="funcPopup(event,'grade_force_full_regrading')">grade_force_full_regrading</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>      <a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> = <a class="class" onClick="logClass('grade_item')" href="../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l1422"><span class="linenum">1422</span></a>      foreach (<a class="var it6045" onMouseOver="hilite(6045)" onMouseOut="lolite()" onClick="logVariable('grade_items')" href="../_variables/grade_items.html">$grade_items</a> as <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../_variables/gid.html">$gid</a>=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>) {
<a name="l1423"><span class="linenum">1423</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('delete_all_grades')" href="../_functions/delete_all_grades.html" onMouseOver="funcPopup(event,'delete_all_grades')">delete_all_grades</a>('reset');
<a name="l1424"><span class="linenum">1424</span></a>      }
<a name="l1425"><span class="linenum">1425</span></a>  
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment">    //refetch all grades</span>
<a name="l1427"><span class="linenum">1427</span></a>      <a class="function" onClick="logFunction('grade_grab_course_grades')" href="../_functions/grade_grab_course_grades.html" onMouseOver="funcPopup(event,'grade_grab_course_grades')">grade_grab_course_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">    // recalculate all grades</span>
<a name="l1430"><span class="linenum">1430</span></a>      <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1431"><span class="linenum">1431</span></a>      return true;
<a name="l1432"><span class="linenum">1432</span></a>  }
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">/**</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment"> * Convert a number to 5 decimal point float, an empty string or a null db compatible format</span>
<a name="l1436"><span class="linenum">1436</span></a>  <span class="comment"> * (we need this to decide if db value changed)</span>
<a name="l1437"><span class="linenum">1437</span></a>  <span class="comment"> *</span>
<a name="l1438"><span class="linenum">1438</span></a>  <span class="comment"> * @param mixed $number The number to convert</span>
<a name="l1439"><span class="linenum">1439</span></a>  <span class="comment"> * @return mixed float or null</span>
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment"> */</span>
<a name="l1441"><span class="linenum">1441</span></a>  function <a class="function" onClick="logFunction('grade_floatval')" href="../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it2919" onMouseOver="hilite(2919)" onMouseOut="lolite()" onClick="logVariable('number')" href="../_variables/number.html">$number</a>) {
<a name="l1442"><span class="linenum">1442</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2919" onMouseOver="hilite(2919)" onMouseOut="lolite()" onClick="logVariable('number')" href="../_variables/number.html">$number</a>) or <a class="var it2919" onMouseOver="hilite(2919)" onMouseOut="lolite()" onClick="logVariable('number')" href="../_variables/number.html">$number</a> === '') {
<a name="l1443"><span class="linenum">1443</span></a>          return null;
<a name="l1444"><span class="linenum">1444</span></a>      }
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">    // we must round to 5 digits to get the same precision as in 10,5 db fields</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment">    // note: db rounding for 10,5 is different from php round() function</span>
<a name="l1447"><span class="linenum">1447</span></a>      return <a class="phpfunction" onClick="logFunction('round')" href="../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it2919" onMouseOver="hilite(2919)" onMouseOut="lolite()" onClick="logVariable('number')" href="../_variables/number.html">$number</a>, 5);
<a name="l1448"><span class="linenum">1448</span></a>  }
<a name="l1449"><span class="linenum">1449</span></a>  
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">/**</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment"> * Compare two float numbers safely. Uses 5 decimals php precision using {@link grade_floatval()}. Nulls accepted too.</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment"> * Used for determining if a database update is required</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment"> *</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment"> * @param float $f1 Float one to compare</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment"> * @param float $f2 Float two to compare</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment"> * @return bool True if the supplied values are different</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment"> */</span>
<a name="l1458"><span class="linenum">1458</span></a>  function <a class="function" onClick="logFunction('grade_floats_different')" href="../_functions/grade_floats_different.html" onMouseOver="funcPopup(event,'grade_floats_different')">grade_floats_different</a>(<a class="var it4099" onMouseOver="hilite(4099)" onMouseOut="lolite()" onClick="logVariable('f1')" href="../_variables/f1.html">$f1</a>, <a class="var it20812" onMouseOver="hilite(20812)" onMouseOut="lolite()" onClick="logVariable('f2')" href="../_variables/f2.html">$f2</a>) {
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">    // note: db rounding for 10,5 is different from php round() function</span>
<a name="l1460"><span class="linenum">1460</span></a>      return (<a class="function" onClick="logFunction('grade_floatval')" href="../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it4099" onMouseOver="hilite(4099)" onMouseOut="lolite()" onClick="logVariable('f1')" href="../_variables/f1.html">$f1</a>) !== <a class="function" onClick="logFunction('grade_floatval')" href="../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it20812" onMouseOver="hilite(20812)" onMouseOut="lolite()" onClick="logVariable('f2')" href="../_variables/f2.html">$f2</a>));
<a name="l1461"><span class="linenum">1461</span></a>  }
<a name="l1462"><span class="linenum">1462</span></a>  
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment">/**</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment"> * Compare two float numbers safely. Uses 5 decimals php precision using {@link grade_floatval()}</span>
<a name="l1465"><span class="linenum">1465</span></a>  <span class="comment"> *</span>
<a name="l1466"><span class="linenum">1466</span></a>  <span class="comment"> * Do not use rounding for 10,5 at the database level as the results may be</span>
<a name="l1467"><span class="linenum">1467</span></a>  <span class="comment"> * different from php round() function.</span>
<a name="l1468"><span class="linenum">1468</span></a>  <span class="comment"> *</span>
<a name="l1469"><span class="linenum">1469</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l1470"><span class="linenum">1470</span></a>  <span class="comment"> * @param float $f1 Float one to compare</span>
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment"> * @param float $f2 Float two to compare</span>
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment"> * @return bool True if the values should be considered as the same grades</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment"> */</span>
<a name="l1474"><span class="linenum">1474</span></a>  function <a class="function" onClick="logFunction('grade_floats_equal')" href="../_functions/grade_floats_equal.html" onMouseOver="funcPopup(event,'grade_floats_equal')">grade_floats_equal</a>(<a class="var it4099" onMouseOver="hilite(4099)" onMouseOut="lolite()" onClick="logVariable('f1')" href="../_variables/f1.html">$f1</a>, <a class="var it20812" onMouseOver="hilite(20812)" onMouseOut="lolite()" onClick="logVariable('f2')" href="../_variables/f2.html">$f2</a>) {
<a name="l1475"><span class="linenum">1475</span></a>      return (<a class="function" onClick="logFunction('grade_floatval')" href="../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it4099" onMouseOver="hilite(4099)" onMouseOut="lolite()" onClick="logVariable('f1')" href="../_variables/f1.html">$f1</a>) === <a class="function" onClick="logFunction('grade_floatval')" href="../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it20812" onMouseOver="hilite(20812)" onMouseOut="lolite()" onClick="logVariable('f2')" href="../_variables/f2.html">$f2</a>));
<a name="l1476"><span class="linenum">1476</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'bounded_number': ['bounded_number', 'Used to make sure that $min <= $value <= $max ', [['lib','moodlelib.php',8547]], 3],
'grade_get_categories_menu': ['grade_get_categories_menu', 'Returns grade options for gradebook grade category menu ', [['lib','gradelib.php',789]], 5],
'is_locked': ['is_locked', 'Returns the locked state of this grade_item (if the grade_item is locked OR no specific $userid is given) or the locked state of a specific grade within this item if a specific $userid is given and the grade_item is unlocked. ', [['lib/grade','grade_item.php',476],['backup/util/settings','setting_dependency.class.php',187],['backup/util/settings','setting_dependency.class.php',340],['backup/util/settings','setting_dependency.class.php',534],['backup/util/settings','setting_dependency.class.php',598],['user/profile','lib.php',354],['lib/grade','grade_grade.php',265],['lib/grade','grade_category.php',2312],['lib','badgeslib.php',317]], 57],
'grade_format_gradevalue': ['grade_format_gradevalue', 'Returns string representation of grade value ', [['lib','gradelib.php',646]], 20],
'grade_get_settings': ['grade_get_settings', 'Returns all course gradebook settings as object properties ', [['lib','gradelib.php',595]], 1],
'exists': ['exists', 'Checks whether or not the variable exists. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',73],['lib/horde/framework/Horde','Variables.php',101],['admin/tool/health','index.php',139],['admin/tool/health','index.php',160],['admin/tool/health','index.php',184],['admin/tool/health','index.php',208],['admin/tool/health','index.php',229],['admin/tool/health','index.php',248],['admin/tool/health','index.php',267],['admin/tool/health','index.php',313],['admin/tool/health','index.php',334],['admin/tool/health','index.php',420],['admin/tool/health','index.php',444],['admin/tool/health','index.php',481],['admin/tool/health','index.php',506],['admin/tool/health','index.php',554],['admin/tool/health','index.php',617],['admin/tool/health','index.php',707],['admin/tool/health','index.php',777],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',468],['admin/tool/uploadcourse/classes','course.php',252]], 56],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',328]], 53],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2762],['lib','outputrenderers.php',4128],['lib','outputrenderers.php',4201]], 495],
'grade_user_unenrol': ['grade_user_unenrol', 'Purge course data when user unenrolls from a course ', [['lib','gradelib.php',1340]], 1],
'grade_force_site_regrading': ['grade_force_site_regrading', 'Forces regrading of all site grades. Used when changing site setings ', [['lib','gradelib.php',922]], 1],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',740]], 117],
'grade_update_outcomes': ['grade_update_outcomes', 'Updates a user\'s outcomes. Manual outcomes can not be updated. ', [['lib','gradelib.php',300]], 2],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'grade_regrade_final_grades': ['grade_regrade_final_grades', 'Updates all final grades in course. ', [['lib','gradelib.php',1008]], 27],
'grade_format_gradevalue_real': ['grade_format_gradevalue_real', 'Returns a float representation of a grade value ', [['lib','gradelib.php',717]], 5],
'get_datesubmitted': ['get_datesubmitted', 'Returns timestamp of submission related to this grade, null if not submitted. ', [['lib/grade','grade_grade.php',290]], 6],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'grade_grab_course_grades': ['grade_grab_course_grades', 'Refetches grade data from course activities ', [['lib','gradelib.php',1146]], 3],
'get_dategraded': ['get_dategraded', 'Returns timestamp when last graded, null if no grade present ', [['lib/grade','grade_grade.php',340]], 5],
'grade_get_setting': ['grade_get_setting', 'Returns a  course gradebook setting ', [['lib','gradelib.php',557]], 29],
'mtrace': ['mtrace', 'For outputting debugging info ', [['lib','moodlelib.php',8221]], 323],
'delete': ['delete', 'Deletes a key pair ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',110],['lib/google/src/Google/Service','Reseller.php',440],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1006],['lib/adodb','adodb-active-recordx.inc.php',949],['lib/zend/Zend/Service/Delicious','Post.php',236],['lib/grade','grade_object.php',270],['lib/zend/Zend/Gdata','Gapps.php',258],['lib/google/src/Google/Service','Fusiontables.php',644],['lib/google/src/Google/Service','Fusiontables.php',809],['lib/google/src/Google/Service','Fusiontables.php',934],['lib/google/src/Google/Service','Fusiontables.php',1127],['lib/google/src/Google/Service','Fusiontables.php',1188],['blog','locallib.php',325],['lib/google/src/Google/Service','Blogger.php',1051],['lib/google/src/Google/Service','Blogger.php',1212],['lib/google/src/Google/Service','Blogger.php',1434],['lib/portfolio','plugin.php',692],['lib/google/src/Google/Service','AdExchangeBuyer.php',605],['lib/google/src/Google/Service','Manager.php',240],['lib/google/src/Google/Service','Manager.php',320],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',137],['lib','webdavlib.php',691],['lib/grade','grade_item.php',354],['lib/google/src/Google/Service','Gmail.php',686],['lib/google/src/Google/Service','Gmail.php',843],['lib/google/src/Google/Service','Gmail.php',936],['lib/google/src/Google/Service','Gmail.php',1146],['course','lib.php',3133],['lib/google/src/Google/Service','Mirror.php',424],['lib/google/src/Google/Service','Mirror.php',592],['lib/google/src/Google/Service','Mirror.php',660],['lib/google/src/Google/Service','Mirror.php',771],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',731],['lib/google/src/Google/Service','Genomics.php',963],['lib/google/src/Google/Service','Genomics.php',1327],['lib/google/src/Google/Service','Genomics.php',1399],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Dfareporting.php',470],['lib/zend/Zend/Gdata/Gbase','ItemEntry.php',133],['lib/google/src/Google/Service','Licensing.php',221],['lib/google/src/Google/Service','Drive.php',1462],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1681],['lib/google/src/Google/Service','Drive.php',1932],['lib/google/src/Google/Service','Drive.php',2002],['lib/google/src/Google/Service','Drive.php',2131],['lib/google/src/Google/Service','Drive.php',2294],['lib/google/src/Google/Service','Drive.php',2414],['completion','data_object.php',272],['lib/google/src/Google/Service','Books.php',1804],['lib/zend/Zend/Gdata','App.php',914],['lib/google/src/Google/Cache','Memcache.php',142],['lib/google/src/Google/Service','Bigquery.php',512],['lib/google/src/Google/Service','Bigquery.php',822],['cache','disabledlib.php',102],['lib/zend/Zend/Server','Cache.php',132],['lib/zend/Zend/Gdata/App','Entry.php',212],['cache/stores/memcached','lib.php',368],['lib/google/src/Google/Service','YouTube.php',1470],['lib/google/src/Google/Service','YouTube.php',1979],['lib/google/src/Google/Service','YouTube.php',2277],['lib/google/src/Google/Service','YouTube.php',2510],['lib/google/src/Google/Service','YouTube.php',2657],['lib/google/src/Google/Service','YouTube.php',2998],['lib/google/src/Google/Service','YouTube.php',3196],['lib/google/src/Google/Service','Webmasters.php',298],['lib/google/src/Google/Service','Webmasters.php',388],['lib/google/src/Google/Service','Autoscaler.php',314],['lib/google/src/Google/Service','Autoscaler.php',428],['calendar','lib.php',2388],['lib/zend/Zend/Service/Amazon','Sqs.php',129],['lib/google/src/Google/Service','ShoppingContent.php',553],['lib/google/src/Google/Service','ShoppingContent.php',735],['lib/google/src/Google/Service','ShoppingContent.php',969],['mod/lesson','locallib.php',1039],['mod/lesson','locallib.php',2274],['lib/google/src/Google/Service','SQLAdmin.php',628],['lib/google/src/Google/Service','SQLAdmin.php',923],['lib/google/src/Google/Service','Fitness.php',458],['lib/google/src/Google/Service','Fitness.php',563],['lib/google/src/Google/Service','TagManager.php',1049],['lib/google/src/Google/Service','TagManager.php',1140],['lib/google/src/Google/Service','TagManager.php',1233],['lib/google/src/Google/Service','TagManager.php',1326],['lib/google/src/Google/Service','TagManager.php',1419],['lib/google/src/Google/Service','TagManager.php',1513],['lib/google/src/Google/Service','TagManager.php',1607],['lib/google/src/Google/Service','TagManager.php',1757],['lib/google/src/Google/Service','Directory.php',1300],['lib/google/src/Google/Service','Directory.php',1477],['lib/google/src/Google/Service','Directory.php',1587],['lib/google/src/Google/Service','Directory.php',1642],['lib/google/src/Google/Service','Directory.php',1769],['lib/google/src/Google/Service','Directory.php',1838],['lib/google/src/Google/Service','Directory.php',1935],['lib/google/src/Google/Service','Directory.php',2042],['lib/google/src/Google/Service','Directory.php',2144],['lib/google/src/Google/Service','Directory.php',2205],['lib/google/src/Google/Service','Directory.php',2405],['lib/google/src/Google/Service','Directory.php',2480],['cache/stores/static','lib.php',374],['lib/google/src/Google/Service','AppState.php',153],['lib/google/src/Google/Service','Taskqueue.php',292],['lib/google/src/Google/Service','Container.php',343],['lib/google/src/Google/Service','AndroidPublisher.php',1177],['lib/google/src/Google/Service','AndroidPublisher.php',1257],['lib/google/src/Google/Service','AndroidPublisher.php',1595],['lib/google/src/Google/Service','AndroidPublisher.php',1690],['lib/google/src/Google/Service','AndroidPublisher.php',1972],['repository','lib.php',427],['repository','lib.php',2012],['lib','accesslib.php',5529],['lib/google/src/Google/Service','AdSenseHost.php',733],['lib/google/src/Google/Service','AdSenseHost.php',1009],['lib/google/src/Google/Service','AdSenseHost.php',1167],['cache/stores/memcache','lib.php',401],['lib','filelib.php',3440],['lib/google/src/Google/Service','MapsEngine.php',1692],['lib/google/src/Google/Service','MapsEngine.php',1990],['lib/google/src/Google/Service','MapsEngine.php',2343],['lib/google/src/Google/Service','MapsEngine.php',2650],['lib/google/src/Google/Service','MapsEngine.php',2911],['lib/grade','grade_grade.php',955],['comment','lib.php',786],['lib/google/src/Google/Service','SiteVerification.php',138],['lib/google/src/Google/Service','Prediction.php',261],['cache/stores/session','lib.php',417],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Compute.php',2812],['lib/google/src/Google/Service','Compute.php',2896],['lib/google/src/Google/Service','Compute.php',3139],['lib/google/src/Google/Service','Compute.php',3225],['lib/google/src/Google/Service','Compute.php',3361],['lib/google/src/Google/Service','Compute.php',3463],['lib/google/src/Google/Service','Compute.php',3543],['lib/google/src/Google/Service','Compute.php',3662],['lib/google/src/Google/Service','Compute.php',3725],['lib/google/src/Google/Service','Compute.php',3844],['lib/google/src/Google/Service','Compute.php',3941],['lib/google/src/Google/Service','Compute.php',4080],['lib/google/src/Google/Service','Compute.php',4406],['lib/google/src/Google/Service','Compute.php',4543],['lib/google/src/Google/Service','Compute.php',4660],['lib/google/src/Google/Service','Compute.php',4740],['lib/google/src/Google/Service','Compute.php',4806],['lib/google/src/Google/Service','Compute.php',4927],['lib/google/src/Google/Service','Compute.php',5069],['lib/google/src/Google/Service','Compute.php',5229],['lib/google/src/Google/Service','Compute.php',5360],['badges/criteria','award_criteria.php',330],['badges/criteria','award_criteria_manual.php',220],['lib/google/src/Google/Service','Calendar.php',886],['lib/google/src/Google/Service','Calendar.php',1040],['lib/google/src/Google/Service','Calendar.php',1228],['lib/google/src/Google/Service','Calendar.php',1362],['lib/google/src/Google/Service','Analytics.php',2068],['lib/google/src/Google/Service','Analytics.php',2211],['lib/google/src/Google/Service','Analytics.php',2293],['lib/google/src/Google/Service','Analytics.php',2414],['lib/google/src/Google/Service','Analytics.php',2631],['lib/google/src/Google/Service','Analytics.php',2760],['lib/google/src/Google/Service','Analytics.php',2851],['lib/google/src/Google/Service','Analytics.php',3181],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Tasks.php',309],['lib/google/src/Google/Service','Tasks.php',427],['cache/classes','loaders.php',777],['cache/classes','loaders.php',1491],['cache/classes','loaders.php',1859],['cache/stores/mongodb','lib.php',361],['lib/grade','grade_category.php',259],['cache/stores/file','lib.php',392],['lib/google/src/Google/Service','Storage.php',945],['lib/google/src/Google/Service','Storage.php',1060],['lib/google/src/Google/Service','Storage.php',1227],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1565],['admin/tool/uploadcourse/classes','course.php',226],['lib/google/src/Google/Cache','Null.php',51],['lib/filestorage','stored_file.php',323],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','AdSense.php',1257],['lib/google/src/Google/Service','AdSense.php',1729],['lib/google/src/Google/Service','Pubsub.php',239],['lib/google/src/Google/Service','Pubsub.php',378],['lib/grade','grade_scale.php',136],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Cache','File.php',106],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/google/src/Google/Service','Dns.php',370],['lib/filebrowser','file_info_stored.php',631],['lib/google/src/Google/Service','Replicapool.php',374],['lib/google/src/Google/Service','Resourceviews.php',419],['lib','badgeslib.php',620],['lib/google/src/Google/Cache','Apc.php',103],['lib/adodb','adodb-active-record.inc.php',792],['mnet','peer.php',122],['lib/grade','grade_outcome.php',97]], 260],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'grade_course_reset': ['grade_course_reset', 'Reset all course grades, refetch from the activities and recalculate ', [['lib','gradelib.php',1410]], 1],
'update': ['update', 'Update a customer resource if one it exists and is owned by the reseller. (customers.update) ', [['lib/google/src/Google/Service','Reseller.php',343],['mod/lesson/pagetypes','matching.php',308],['lib/adodb','adodb-active-recordx.inc.php',1047],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','Fusiontables.php',726],['lib/google/src/Google/Service','Fusiontables.php',889],['lib/google/src/Google/Service','Fusiontables.php',1095],['lib/google/src/Google/Service','Fusiontables.php',1269],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Blogger.php',1332],['lib/google/src/Google/Service','Blogger.php',1630],['lib/google/src/Google/Service','Doubleclicksearch.php',325],['lib/google/src/Google/Service','AdExchangeBuyer.php',392],['lib/google/src/Google/Service','AdExchangeBuyer.php',684],['lib/grade','grade_item.php',260],['lib/google/src/Google/Service','Gmail.php',756],['lib/google/src/Google/Service','Gmail.php',908],['lib/google/src/Google/Service','Mirror.php',495],['lib/google/src/Google/Service','Mirror.php',633],['lib/google/src/Google/Service','Mirror.php',744],['lib/google/src/Google/Service','Genomics.php',690],['lib/google/src/Google/Service','Genomics.php',811],['lib/google/src/Google/Service','Genomics.php',1064],['lib/google/src/Google/Service','Genomics.php',1370],['lib/google/src/Google/Service','Genomics.php',1521],['lib/google/src/Google/Service','Dfareporting.php',570],['lib/google/src/Google/Service','PlusDomains.php',691],['lib/google/src/Google/Service','Licensing.php',332],['lib/google/src/Google/Service','Drive.php',1624],['lib/google/src/Google/Service','Drive.php',1859],['lib/google/src/Google/Service','Drive.php',2100],['lib/google/src/Google/Service','Drive.php',2211],['lib/google/src/Google/Service','Drive.php',2261],['lib/google/src/Google/Service','Drive.php',2385],['lib/google/src/Google/Service','Drive.php',2473],['completion','data_object.php',251],['lib/google/src/Google/Service','Books.php',1901],['lib/google/src/Google/Service','Bigquery.php',603],['lib/google/src/Google/Service','Bigquery.php',911],['lib/google/src/Google/Service','Groupssettings.php',137],['lib/google/src/Google/Service','YouTube.php',1596],['lib/google/src/Google/Service','YouTube.php',1697],['lib/google/src/Google/Service','YouTube.php',2201],['lib/google/src/Google/Service','YouTube.php',2439],['lib/google/src/Google/Service','YouTube.php',2613],['lib/google/src/Google/Service','YouTube.php',2809],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','Coordinate.php',568],['lib/google/src/Google/Service','Coordinate.php',680],['lib/google/src/Google/Service','Autoscaler.php',399],['calendar','lib.php',2171],['lib/google/src/Google/Service','ShoppingContent.php',633],['lib/google/src/Google/Service','ShoppingContent.php',815],['lib','weblib.php',3154],['mod/lesson','locallib.php',2682],['lib/google/src/Google/Service','SQLAdmin.php',843],['lib/google/src/Google/Service','Fitness.php',424],['lib/google/src/Google/Service','Fitness.php',607],['lib/google/src/Google/Service','TagManager.php',1004],['lib/google/src/Google/Service','TagManager.php',1093],['lib/google/src/Google/Service','TagManager.php',1186],['lib/google/src/Google/Service','TagManager.php',1279],['lib/google/src/Google/Service','TagManager.php',1372],['lib/google/src/Google/Service','TagManager.php',1466],['lib/google/src/Google/Service','TagManager.php',1560],['lib/google/src/Google/Service','TagManager.php',1711],['lib/google/src/Google/Service','TagManager.php',1804],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Directory.php',1446],['lib/google/src/Google/Service','Directory.php',1559],['lib/google/src/Google/Service','Directory.php',1724],['lib/google/src/Google/Service','Directory.php',1907],['lib/google/src/Google/Service','Directory.php',2014],['lib/google/src/Google/Service','Directory.php',2116],['lib/google/src/Google/Service','Directory.php',2337],['lib/google/src/Google/Service','Directory.php',2523],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['lib/google/src/Google/Service','AppState.php',201],['lib/google/src/Google/Service','Taskqueue.php',397],['lib/google/src/Google/Service','AndroidPublisher.php',1360],['lib/google/src/Google/Service','AndroidPublisher.php',1472],['lib/google/src/Google/Service','AndroidPublisher.php',1542],['lib/google/src/Google/Service','AndroidPublisher.php',1780],['lib/google/src/Google/Service','AndroidPublisher.php',1846],['lib/google/src/Google/Service','AndroidPublisher.php',1928],['lib/google/src/Google/Service','AndroidPublisher.php',2066],['mod/lesson/pagetypes','essay.php',158],['lib/google/src/Google/Service','AdSenseHost.php',845],['lib/google/src/Google/Service','AdSenseHost.php',1096],['lib/google/src/Google/Service','Games.php',1507],['lib/grade','grade_grade.php',940],['lib/google/src/Google/Service','SiteVerification.php',226],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Prediction.php',338],['lib/google/src/Google/Service','Compute.php',2999],['lib/google/src/Google/Service','Compute.php',3310],['lib/google/src/Google/Service','Compute.php',3814],['lib/google/src/Google/Service','Compute.php',5314],['lib/google/src/Google/Service','Calendar.php',979],['lib/google/src/Google/Service','Calendar.php',1144],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1633],['lib/google/src/Google/Service','Analytics.php',2118],['lib/google/src/Google/Service','Analytics.php',2385],['lib/google/src/Google/Service','Analytics.php',2495],['lib/google/src/Google/Service','Analytics.php',2602],['lib/google/src/Google/Service','Analytics.php',2730],['lib/google/src/Google/Service','Analytics.php',2821],['lib/google/src/Google/Service','Analytics.php',2944],['lib/google/src/Google/Service','Analytics.php',3277],['lib/google/src/Google/Service','Analytics.php',3379],['lib/google/src/Google/Service','Analytics.php',3461],['lib/google/src/Google/Service','Tasks.php',385],['lib/google/src/Google/Service','Tasks.php',555],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72],['grade/grading/form/guide','lib.php',826],['lib/grade','grade_category.php',204],['lib/google/src/Google/Service','Storage.php',1030],['lib/google/src/Google/Service','Storage.php',1165],['lib/google/src/Google/Service','Storage.php',1318],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1718],['lib/filestorage','stored_file.php',103],['grade/grading/form/rubric','lib.php',828],['lib/grade','grade_scale.php',125],['lib','coursecatlib.php',441],['lib/adodb','adodb-active-record.inc.php',878],['lib/grade','grade_outcome.php',144],['mod/lesson/pagetypes','branchtable.php',262]], 290],
'grade_update_mod_grades': ['grade_update_mod_grades', 'Force full update of module grades in central gradebook ', [['lib','gradelib.php',1196]], 6],
'update_final_grade': ['update_final_grade', 'Updates final grade value for given user, this is a only way to update final grades from gradebook and import because it logs the change in history table and deals with overridden flag. This flag is set to prevent later overriding from raw grades submitted from modules. ', [['lib/grade','grade_item.php',1521]], 14],
'bounded_grade': ['bounded_grade', 'Makes sure value is a valid grade value. ', [['lib/grade','grade_item.php',1354]], 18],
'fetch': ['fetch', 'Fetches the available update status from the remote site ', [['lib/classes/update','checker.php',113],['lib/minify/lib/Minify/Cache','XCache.php',86],['lib/grade','grade_object.php',126],['completion/criteria','completion_criteria_unenrol.php',43],['completion/criteria','completion_criteria_grade.php',45],['lib/grade','grade_item.php',332],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/minify/lib/Minify/Cache','APC.php',91],['completion/criteria','completion_criteria_activity.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','data_object.php',152],['completion/criteria','completion_criteria_course.php',46],['completion','completion_completion.php',70],['completion/criteria','completion_criteria_role.php',43],['completion','completion_criteria_completion.php',74],['lib/grade','grade_grade.php',576],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['completion/criteria','completion_criteria_self.php',43],['lib/grade','grade_scale.php',89],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_duration.php',43],['lib/grade','grade_outcome.php',182]], 192],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'fetch_users_grades': ['fetch_users_grades', 'Returns array of grades for given grade_item+users ', [['lib/grade','grade_grade.php',175]], 7],
'load_scale': ['load_scale', 'Instantiates a grade_scale object from the DB if this item\'s scaleid variable is set ', [['lib/grade','grade_item.php',822],['lib/grade','grade_outcome.php',204]], 13],
'grade_cron': ['grade_cron', 'Grading cron job. Performs background clean up on the gradebook ', [['lib','gradelib.php',1358]], 1],
'grade_floats_different': ['grade_floats_different', 'Compare two float numbers safely. Uses 5 decimals php precision using {@link grade_floatval()}. Nulls accepted too. Used for determining if a database update is required ', [['lib','gradelib.php',1450]], 26],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1715],['lib/google/src/Google/Service','Games.php',2099]], 949],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'grade_verify_idnumber': ['grade_verify_idnumber', 'Verify new value of grade item idnumber. Checks for uniqueness of new ID numbers. Old ID numbers are kept intact. ', [['lib','gradelib.php',872]], 5],
'record_exists': ['record_exists', 'Test whether a record exists in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1768]], 735],
'get_parent_context_ids': ['get_parent_context_ids', 'Returns parent contexts of this context in reversed order, i.e. parent first, then grand parent, etc. ', [['lib','accesslib.php',5674]], 58],
'get_displaytype': ['get_displaytype', 'Returns the value of the display type ', [['lib/grade','grade_item.php',2084]], 9],
'remove_course_grades': ['remove_course_grades', 'Remove all grade related course data Grade history is kept ', [['lib','gradelib.php',1245]], 2],
'get_decimals': ['get_decimals', 'Returns the value of the decimals field ', [['lib/grade','grade_item.php',2102]], 21],
'is_course_item': ['is_course_item', 'Is the grade item associated with course? ', [['lib/grade','grade_item.php',930]], 29],
'delete_all_grades': ['delete_all_grades', 'Delete all grades ', [['lib/grade','grade_item.php',365]], 5],
'fetch_all': ['fetch_all', 'Finds and returns all grade_object instances based on $params. ', [['lib/grade','grade_object.php',138],['lib/grade','grade_item.php',343],['completion/criteria','completion_criteria.php',153],['completion','data_object.php',165],['completion','completion_criteria_completion.php',84],['lib/grade','grade_grade.php',586],['lib/grade','grade_category.php',194],['lib/grade','grade_scale.php',100],['completion','completion_aggregation.php',79],['lib/grade','grade_outcome.php',193]], 65],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'depends_on': ['depends_on', 'Finds out on which other items does this depend directly when doing calculation or category aggregation ', [['lib/grade','grade_item.php',1392]], 12],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1797]], 47],
'grade_force_full_regrading': ['grade_force_full_regrading', 'Force final grade recalculation in all course items ', [['lib','gradelib.php',912]], 1],
'get_name': ['get_name', 'Return localised event name. ', [['report/log/classes/event','user_report_viewed.php',54],['mod/wiki/classes/event','page_deleted.php',54],['mod/forum/classes/message/inbound','reply_handler.php',50],['mod/chat/classes/event','sessions_viewed.php',65],['mod/glossary/classes/event','category_deleted.php',46],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['lib/classes/event','tag_updated.php',58],['lib/classes/event','course_resources_list_viewed.php',60],['mod/lesson/classes/event','content_page_viewed.php',48],['lib/classes/event','blog_association_created.php',56],['lib/classes/event','user_profile_viewed.php',56],['mod/feedback/classes/event','response_submitted.php',60],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','badge_awarded.php',54],['report/outline/classes/event','report_viewed.php',54],['question/classes/bank','checkbox_column.php',32],['mod/assign/classes/event','extension_granted.php',77],['admin/tool/capability/classes/event','report_viewed.php',47],['portfolio/picasa','lib.php',33],['lib/classes/event','message_viewed.php',54],['lib/classes/event','course_category_created.php',48],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/task','context_cleanup_task.php',32],['mod/survey/classes/event','response_submitted.php',53],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['cache/classes','definition.php',604],['report/loglive/classes/event','report_viewed.php',48],['mod/forum/classes/event','post_deleted.php',67],['mod/assign/classes/event','submission_duplicated.php',77],['mod/chat/classes/event','message_sent.php',59],['mod/workshop/classes/event','submission_created.php',63],['lib/classes/event','note_updated.php',56],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/feedback/classes/event','response_deleted.php',57],['lib/classes/event','course_module_instance_list_viewed.php',75],['mod/assign/classes/event','submission_locked.php',78],['enrol/imsenterprise/classes/task','cron_task.php',34],['mod/lesson/classes/event','page_updated.php',72],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['mod/quiz/classes/event','attempt_preview_started.php',54],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/task','calendar_cron_task.php',31],['mod/quiz/classes/event','report_viewed.php',56],['mod/lesson/classes/event','question_answered.php',54],['lib/portfolio','plugin.php',120],['mod/forum/classes/event','discussion_viewed.php',60],['mod/workshop/classes/event','submission_viewed.php',63],['lib/classes/task','registration_cron_task.php',31],['mod/assign/submission/file','locallib.php',44],['mod/assign/classes/event','submission_updated.php',57],['mod/workshop/classes/event','submission_reassessed.php',77],['mod/glossary/classes/event','entry_deleted.php',54],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','user_created.php',48],['question/classes/bank','preview_action_column.php',26],['mod/data/classes/event','field_updated.php',57],['mod/assign/submission/onlinetext','locallib.php',40],['mod/data/classes/event','template_updated.php',56],['lib/classes/event','comment_created.php',58],['lib/classes/event','cohort_deleted.php',49],['lib/grade','grade_item.php',1274],['mod/scorm/classes/event','tracks_viewed.php',64],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','course_viewed.php',75],['grade/report/overview/classes/event','grade_report_viewed.php',48],['lib/classes/task','stats_cron_task.php',31],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','course_content_deleted.php',54],['lib/classes/task','backup_cleanup_task.php',31],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/quiz/classes/event','attempt_abandoned.php',63],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','phase_switched.php',75],['lib/classes/event','base.php',282],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','content_viewed.php',80],['backup/util/ui','backup_ui.class.php',194],['lib/classes/event','course_completion_updated.php',47],['report/completion/classes/event','report_viewed.php',49],['lib/dml','pgsql_native_moodle_database.php',88],['backup/util/settings','base_setting.class.php',145],['lib/classes/task','messaging_cleanup_task.php',31],['question/classes/bank','modifier_name_column.php',27],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_reset_ended.php',53],['mod/choice/classes/event','answer_submitted.php',72],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/wiki/classes/event','page_diff_viewed.php',55],['lib/classes/event','course_category_updated.php',51],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/task','session_cleanup_task.php',31],['lib/classes/task','completion_cron_task.php',31],['lib/classes/event','webservice_service_created.php',65],['lib/classes/event','course_created.php',55],['lib/dml','oci_native_moodle_database.php',94],['mod/lesson/classes/event','lesson_started.php',48],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','calendar_event_deleted.php',58],['backup/util/plan','base_task.class.php',58],['lib/classes/event','group_created.php',65],['mod/quiz/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['repository/coursefiles','lib.php',183],['mod/assign/classes/event','submission_viewed.php',76],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/event','user_password_updated.php',70],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['backup/util/ui','restore_ui.class.php',349],['lib/classes/event','user_loggedinas.php',57],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['lib','modinfolib.php',1285],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/forum/classes/event','discussion_moved.php',66],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['mod/survey/classes/event','report_downloaded.php',55],['mod/wiki/classes/event','page_updated.php',54],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','user_list_viewed.php',56],['mod/forum/classes/event','readtracking_disabled.php',64],['lib/classes/event','comments_viewed.php',51],['lib/classes/event','cohort_member_added.php',49],['lib/classes/event','grouping_created.php',65],['lib/classes/event','recent_activity_viewed.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/dml','sqlsrv_native_moodle_database.php',102],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['question/classes/bank','question_name_column.php',28],['lib/classes/event','user_login_failed.php',56],['lib/classes/event','message_contact_added.php',48],['lib','enrollib.php',1075],['question/classes/bank','question_text_row.php',35],['lib/classes/event','role_allow_assign_updated.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['user/selector','lib.php',309],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/classes/event','email_failed.php',48],['portfolio/flickr','lib.php',41],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/classes/event','tag_removed.php',58],['mod/lesson/classes/event','highscores_viewed.php',48],['report/stats/classes/event','user_report_viewed.php',48],['mod/quiz/classes/event','group_override_deleted.php',54],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/log','reader.php',30],['mod/lesson/classes/event','question_viewed.php',54],['mod/scorm/classes/event','interactions_viewed.php',63],['lib/classes/event','course_module_updated.php',57],['mod/forum/classes/event','discussion_subscription_created.php',66],['lib/classes/task','plagiarism_cron_task.php',31],['mod/quiz/classes/event','question_manually_graded.php',55],['lib/classes/event','mnet_access_control_created.php',57],['lib/classes/event','role_assigned.php',56],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/lti/classes/local/ltiservice','service_base.php',87],['lib/classes/event','unknown_logged.php',43],['lib/simplepie/library/SimplePie','Author.php',106],['mod/scorm/classes/event','user_report_viewed.php',62],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['mod/forum/classes/task','cron_task.php',30],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','user_updated.php',48],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','comment_deleted.php',58],['mod/assign/classes/event','marker_updated.php',89],['lib/classes/event','webservice_login_failed.php',71],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','cohort_updated.php',49],['mod/assign/submission/comments','locallib.php',39],['lib/editor/tinymce/classes','plugin.php',101],['mod/forum/classes/event','post_updated.php',67],['mod/book/classes/event','chapter_viewed.php',79],['portfolio/download','lib.php',9],['lib/classes/event','note_deleted.php',56],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/task','file_trash_cleanup_task.php',31],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/book/classes/event','chapter_deleted.php',79],['lib/classes/event','course_deleted.php',56],['lib/classes/event','blog_entry_deleted.php',53],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['question/classes/bank','copy_action_column.php',35],['mod/assign/feedback/editpdf','locallib.php',43],['lib/classes/event','webservice_token_created.php',65],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','group_updated.php',65],['mod/quiz/classes/event','attempt_started.php',56],['mod/lesson/classes/event','group_override_updated.php',54],['lib/classes/event','course_module_viewed.php',62],['lib/classes/event','mnet_access_control_updated.php',57],['mod/quiz/classes/question/bank','add_action_column.php',45],['question/classes/bank','edit_action_column.php',35],['lib/classes/message/inbound','private_files_handler.php',56],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/quiz/classes/event','attempt_submitted.php',63],['mod/data/classes/event','field_created.php',58],['lib/classes/task','automated_backup_task.php',31],['lib/classes/event','question_category_created.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['backup/util/ui','restore_ui_stage.class.php',75],['backup/converter/moodle1','lib.php',1033],['mod/lesson/classes/event','group_override_created.php',55],['mod/workshop/classes/event','assessments_reset.php',74],['mod/lesson/classes/event','lesson_resumed.php',48],['mod/assign/classes/event','feedback_viewed.php',76],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['lib/classes/event','blog_entry_updated.php',74],['report/questioninstances/classes/event','report_viewed.php',55],['mod/assign/classes/event','submission_form_viewed.php',82],['mod/folder/classes/event','folder_updated.php',48],['mod/assign/classes/event','submission_created.php',57],['mod/assign/classes/event','statement_accepted.php',77],['lib/classes/event','grade_deleted.php',94],['lib/classes/event','role_capabilities_updated.php',51],['lib/classes/event','blog_entries_viewed.php',62],['lib/tests','messageinbound_test.php',170],['mod/wiki/classes/event','page_viewed.php',48],['lib/classes/event','group_deleted.php',65],['question/classes/bank','delete_action_column.php',36],['lib/classes/event','webservice_token_sent.php',56],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['lib/classes/task','create_contexts_task.php',31],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/assign/classes/event','submission_status_updated.php',79],['mod/assign/classes/event','grading_form_viewed.php',82],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','course_module_completion_updated.php',48],['mod/assign/feedback/file','locallib.php',45],['mod/workshop/classes/event','assessment_evaluated.php',66],['report/log/classes/event','report_viewed.php',58],['lib/classes/event','course_module_deleted.php',56],['lib/dml','mssql_native_moodle_database.php',83],['repository','lib.php',1884],['mod/book/classes/event','chapter_created.php',79],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','cohort_created.php',49],['lib/classes/event','webservice_function_called.php',67],['mod/scorm/classes/event','sco_launched.php',64],['lib/classes/event','blog_entry_created.php',76],['lib/classes/event','user_enrolment_created.php',53],['mod/data/classes/event','record_created.php',56],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','user_enrolment_updated.php',53],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/task','cache_cleanup_task.php',31],['mod/lesson/classes/event','page_moved.php',56],['mod/glossary/classes/event','category_created.php',46],['mod/lesson/classes/event','page_created.php',54],['lib/classes/event','cohort_member_removed.php',50],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/wiki/classes/event','page_version_viewed.php',54],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','role_allow_override_updated.php',47],['lib/classes/task','cache_cron_task.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib/classes/event','grouping_updated.php',65],['admin/tool/monitor/classes/event','rule_updated.php',50],['lib/classes/event','course_module_created.php',86],['lib/classes/event','tag_added.php',58],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/assign/classes/event','assessable_submitted.php',109],['mod/workshop/classes/event','submission_updated.php',63],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','grouping_deleted.php',72],['backup/util/ui','backup_ui_setting.class.php',86],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['backup/converter','convertlib.php',109],['lib/classes/event','tag_flagged.php',55],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/task','question_cron_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['lib/classes/event','tag_created.php',55],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','note_created.php',56],['lib/simplepie/library/SimplePie','Credit.php',139],['lib/bennu','iCalendar_components.php',37],['lib/dml','mysqli_native_moodle_database.php',352],['lib/classes/event','course_reset_started.php',53],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','webservice_service_user_removed.php',59],['mod/data/classes/event','record_deleted.php',56],['mod/choice/classes/event','answer_updated.php',72],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','group_member_removed.php',69],['mod/glossary/classes/event','entry_viewed.php',48],['mod/forum/classes/event','user_report_viewed.php',65],['lib/classes/event','course_category_deleted.php',59],['lib/classes/task','events_cron_task.php',31],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','calendar_event_created.php',58],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','webservice_service_updated.php',59],['backup/util/ui','base_ui_stage.class.php',110],['mod/wiki/classes/event','page_version_restored.php',54],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/data/classes/event','template_viewed.php',55],['lib/classes/event','course_user_report_viewed.php',66],['mod/data/classes/event','record_updated.php',56],['mod/wiki/classes/event','page_map_viewed.php',54],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['lib/grade','grade_category.php',2128],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/assign/feedback/comments','locallib.php',36],['question/behaviour','behaviourbase.php',83],['calendar/type/gregorian/classes','structure.php',29],['lib/classes/event','role_unassigned.php',53],['lib/classes/task','tag_cron_task.php',31],['lib/classes/task','blog_cron_task.php',31],['lib/classes/event','course_restored.php',58],['backup/util/structure','base_atom.class.php',71],['portfolio/boxnet','lib.php',14],['mod/choice/classes/event','report_viewed.php',47],['lib/classes/event','user_deleted.php',57],['lib/classes/event','user_enrolment_deleted.php',54],['lib/classes/task','send_failed_login_notifications_task.php',34],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/assign/classes/event','identities_revealed.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','course_updated.php',58],['admin/tool/log/classes/helper','reader.php',41],['mod/forum/classes/event','post_created.php',67],['mod/data/classes/event','field_deleted.php',57],['lib/classes/event','tag_deleted.php',55],['mod/glossary/classes/event','entry_created.php',52],['mod/forum/classes/event','discussion_created.php',65],['mod/forum/classes/event','discussion_deleted.php',66],['mod/scorm/classes/event','attempt_deleted.php',62],['mod/lesson/classes/event','lesson_ended.php',49],['lib/grade','grade_scale.php',156],['admin/tool/monitor/classes','subscription.php',123],['mod/forum/classes/event','subscribers_viewed.php',65],['backup/util/structure','restore_path_element.class.php',98],['mod/scorm/classes/event','report_viewed.php',63],['lib/classes/task','grade_cron_task.php',31],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib/dml/tests','dml_test.php',5409],['mod/lesson/classes/event','user_override_deleted.php',53],['report/completion/classes/event','user_report_viewed.php',49],['admin/tool/langimport/classes/event','langpack_imported.php',80],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/feedback/offline','locallib.php',42],['mod/lesson/classes/event','highscore_added.php',56],['mod/lesson/classes/event','essay_assessed.php',78],['lib/classes/event','message_sent.php',82],['lib/classes/event','message_contact_removed.php',48],['lib/classes/event','tag_unflagged.php',55],['mod/assign/classes/event','submission_graded.php',78],['lib','csslib.php',2155],['lib','csslib.php',2283],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/event','calendar_event_updated.php',58],['mod/lesson/classes/event','user_override_created.php',53],['lib/classes/task','legacy_plugin_cron_task.php',33],['portfolio/googledocs','lib.php',54],['mod/workshop/classes/event','assessment_reevaluated.php',76],['lib/dml','pdo_moodle_database.php',113],['lib','medialib.php',345],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','webservice_service_user_added.php',59],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['lib/classes/event','notes_viewed.php',49],['mod/glossary/classes/event','entry_updated.php',52],['admin/tool/monitor/classes/event','rule_created.php',50],['lib/classes/task','check_for_updates_task.php',31],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/classes/event','course_completed.php',73],['mod/assign/classes/event','submission_status_viewed.php',81],['portfolio/mahara','lib.php',61],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_created.php',48],['mod/quiz/classes/event','group_override_created.php',55],['lib/classes/task','delete_incomplete_users_task.php',31],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','group_member_added.php',78],['lib/classes/event','message_contact_unblocked.php',48],['mod/quiz/classes/event','attempt_deleted.php',47],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','user_loggedin.php',64],['admin/tool/monitor/classes/task','clean_events.php',32],['question/classes/bank','question_type_column.php',26],['admin/tool/monitor/classes','rule.php',239],['mod/lesson/classes/event','lesson_restarted.php',48],['lib/grade','grade_outcome.php',272]], 409],
'grade_floats_equal': ['grade_floats_equal', 'Compare two float numbers safely. Uses 5 decimals php precision using {@link grade_floatval()} ', [['lib','gradelib.php',1463]], 3],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'is_hidden': ['is_hidden', 'Returns the current hidden state of this grade_item ', [['lib/grade','grade_object.php',415],['lib/grade','grade_grade.php',503],['lib','adminlib.php',709],['lib','adminlib.php',996],['lib','adminlib.php',1306],['lib','adminlib.php',1503]], 55],
'is_course_category': ['is_course_category', 'Return true if this is the top most category that represents the total course grade. ', [['lib/grade','grade_category.php',2269]], 9],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2037]], 143],
'grade_floatval': ['grade_floatval', 'Convert a number to 5 decimal point float, an empty string or a null db compatible format (we need this to decide if db value changed) ', [['lib','gradelib.php',1434]], 53],
'is_category_item': ['is_category_item', 'Is the grade item associated with category? ', [['lib/grade','grade_item.php',921]], 28],
'fetch_course_category': ['fetch_course_category', 'Return the course level grade_category object ', [['lib/grade','grade_category.php',2279]], 20],
'force_regrading': ['force_regrading', 'Sets this grade_item\'s needsupdate to true. Also marks the course item as needing update. ', [['lib/grade','grade_item.php',808],['lib/grade','grade_category.php',411]], 29],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 85],
'remove_grade_letters': ['remove_grade_letters', 'Remove grade letters for given context ', [['lib','gradelib.php',1228]], 1],
'grade_get_letters': ['grade_get_letters', 'Returns the array of grade letters to be used in the supplied context ', [['lib','gradelib.php',824]], 3],
'insert': ['insert', 'Creates a customer resource if one does not already exist. (customers.insert) ', [['lib/google/src/Google/Service','Reseller.php',309],['lib/google/src/Google/Service','Reseller.php',473],['lib/adodb','adodb-active-recordx.inc.php',899],['lib/grade','grade_object.php',325],['lib/google/src/Google/Service','Replicapoolupdater.php',294],['lib/google/src/Google/Service','Fusiontables.php',674],['lib/google/src/Google/Service','Fusiontables.php',838],['lib/google/src/Google/Service','Fusiontables.php',1012],['lib/google/src/Google/Service','Fusiontables.php',1217],['lib/google/src/Google/Service','Blogger.php',1243],['lib/google/src/Google/Service','Blogger.php',1493],['lib/google/src/Google/Service','Doubleclicksearch.php',285],['lib/google/src/Google/Service','AdExchangeBuyer.php',476],['lib/google/src/Google/Service','AdExchangeBuyer.php',635],['lib/google/src/Google/Service','Manager.php',271],['lib/google/src/Google/Service','Manager.php',349],['lib/grade','grade_item.php',385],['lib/google/src/Google/Service','Gmail.php',993],['lib/google/src/Google/Service','Plus.php',475],['lib/google/src/Google/Service','Mirror.php',393],['lib/google/src/Google/Service','Mirror.php',451],['lib/google/src/Google/Service','Mirror.php',605],['lib/google/src/Google/Service','Mirror.php',687],['lib/google/src/Google/Service','Mirror.php',801],['lib/google/src/Google/Service','Urlshortener.php',124],['lib/google/src/Google/Service','Dfareporting.php',499],['lib/google/src/Google/Service','PlusDomains.php',481],['lib/google/src/Google/Service','PlusDomains.php',606],['lib/google/src/Google/Service','PlusDomains.php',732],['lib/google/src/Google/Service','PlusDomains.php',781],['lib/google/src/Google/Service','GroupsMigration.php',85],['lib/google/src/Google/Service','Licensing.php',253],['lib/google/src/Google/Service','Drive.php',1491],['lib/google/src/Google/Service','Drive.php',1568],['lib/google/src/Google/Service','Drive.php',1727],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2045],['lib/google/src/Google/Service','Drive.php',2164],['lib/google/src/Google/Service','Drive.php',2328],['completion','data_object.php',316],['lib/google/src/Google/Service','Books.php',1835],['lib/google/src/Google/Service','Bigquery.php',548],['lib/google/src/Google/Service','Bigquery.php',672],['lib/google/src/Google/Service','Bigquery.php',856],['lib/google/src/Google/Service','YouTube.php',1323],['lib/google/src/Google/Service','YouTube.php',1423],['lib/google/src/Google/Service','YouTube.php',1498],['lib/google/src/Google/Service','YouTube.php',2025],['lib/google/src/Google/Service','YouTube.php',2323],['lib/google/src/Google/Service','YouTube.php',2525],['lib/google/src/Google/Service','YouTube.php',2685],['lib/google/src/Google/Service','YouTube.php',3013],['lib/google/src/Google/Service','YouTube.php',3254],['lib/google/src/Google/Service','Coordinate.php',491],['lib/google/src/Google/Service','Autoscaler.php',346],['lib/google/src/Google/Service','ShoppingContent.php',582],['lib/google/src/Google/Service','ShoppingContent.php',764],['lib/google/src/Google/Service','ShoppingContent.php',1000],['lib/google/src/Google/Service','SQLAdmin.php',698],['lib/google/src/Google/Service','SQLAdmin.php',959],['lib/google/src/Google/Service','Directory.php',1504],['lib/google/src/Google/Service','Directory.php',1601],['lib/google/src/Google/Service','Directory.php',1671],['lib/google/src/Google/Service','Directory.php',1964],['lib/google/src/Google/Service','Directory.php',2071],['lib/google/src/Google/Service','Directory.php',2239],['lib/google/src/Google/Service','Directory.php',2419],['lib/google/src/Google/Service','Taskqueue.php',323],['lib/google/src/Google/Service','AndroidPublisher.php',1211],['lib/google/src/Google/Service','AndroidPublisher.php',2002],['lib/google/src/Google/Service','AdSenseHost.php',786],['lib/google/src/Google/Service','AdSenseHost.php',1041],['lib/google/src/Google/Service','AdSenseHost.php',1182],['lib/google/src/Google/Service','MapsEngine.php',2780],['lib/google/src/Google/Service','MapsEngine.php',3184],['lib/grade','grade_grade.php',928],['lib/google/src/Google/Service','SiteVerification.php',180],['lib/google/src/Google/Service','Prediction.php',290],['lib/google/src/Google/Service','Compute.php',2844],['lib/google/src/Google/Service','Compute.php',2944],['lib/google/src/Google/Service','Compute.php',3171],['lib/google/src/Google/Service','Compute.php',3255],['lib/google/src/Google/Service','Compute.php',3393],['lib/google/src/Google/Service','Compute.php',3493],['lib/google/src/Google/Service','Compute.php',3573],['lib/google/src/Google/Service','Compute.php',3757],['lib/google/src/Google/Service','Compute.php',3891],['lib/google/src/Google/Service','Compute.php',3973],['lib/google/src/Google/Service','Compute.php',4165],['lib/google/src/Google/Service','Compute.php',4436],['lib/google/src/Google/Service','Compute.php',4690],['lib/google/src/Google/Service','Compute.php',4838],['lib/google/src/Google/Service','Compute.php',4959],['lib/google/src/Google/Service','Compute.php',5120],['lib/google/src/Google/Service','Compute.php',5259],['lib/google/src/Google/Service','Calendar.php',915],['lib/google/src/Google/Service','Calendar.php',1067],['lib/google/src/Google/Service','Calendar.php',1255],['lib/google/src/Google/Service','Calendar.php',1422],['lib/google/src/Google/Service','Analytics.php',2082],['lib/google/src/Google/Service','Analytics.php',2326],['lib/google/src/Google/Service','Analytics.php',2444],['lib/google/src/Google/Service','Analytics.php',2539],['lib/google/src/Google/Service','Analytics.php',2666],['lib/google/src/Google/Service','Analytics.php',2776],['lib/google/src/Google/Service','Analytics.php',2883],['lib/google/src/Google/Service','Analytics.php',3022],['lib/google/src/Google/Service','Analytics.php',3216],['lib/google/src/Google/Service','Analytics.php',3323],['lib/google/src/Google/Service','Analytics.php',3421],['lib/google/src/Google/Service','Tasks.php',336],['lib/google/src/Google/Service','Tasks.php',456],['lib/grade','grade_category.php',318],['lib/google/src/Google/Service','Storage.php',980],['lib/google/src/Google/Service','Storage.php',1100],['lib/google/src/Google/Service','Storage.php',1262],['lib/google/src/Google/Service','Storage.php',1392],['lib/google/src/Google/Service','Storage.php',1619],['lib/grade','grade_scale.php',111],['lib/google/src/Google/Service','Admin.php',87],['lib/google/src/Google/Service','Replicapool.php',434],['lib/google/src/Google/Service','Resourceviews.php',471],['lib/adodb','adodb-active-record.inc.php',742],['lib/grade','grade_outcome.php',120]], 459],
'grade_format_gradevalue_percentage': ['grade_format_gradevalue_percentage', 'Returns a percentage representation of a grade value ', [['lib','gradelib.php',740]], 5],
'delete_records_select': ['delete_records_select', 'Delete one or more records from a table which match a particular WHERE clause. ', [['lib/dml','pgsql_native_moodle_database.php',1247],['lib/dml','oci_native_moodle_database.php',1445],['lib/dml','sqlsrv_native_moodle_database.php',1153],['lib/dml','mssql_native_moodle_database.php',1082],['lib/dml','mysqli_native_moodle_database.php',1469],['lib/dml/tests','dml_test.php',5432],['lib/dml','pdo_moodle_database.php',207]], 166],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'grade_set_setting': ['grade_set_setting', 'Add, update or delete a course gradebook setting ', [['lib','gradelib.php',616]], 1],
'check_locktime_all': ['check_locktime_all', 'Lock the grade if needed. Make sure this is called only when final grades are valid ', [['lib/grade','grade_grade.php',453]], 1],
'check_locktime': ['check_locktime', 'Lock the grade if needed. Make sure this is called only when final grades are valid ', [['lib/grade','grade_item.php',556]], 1],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'grade_uninstalled_module': ['grade_uninstalled_module', 'Does gradebook cleanup when a module is uninstalled Deletes all associated grade items ', [['lib','gradelib.php',1305]], 1],
'is_calculated': ['is_calculated', 'Checks if grade calculated. Returns this object\'s calculation. ', [['lib/grade','grade_item.php',1024]], 14],
'update_raw_grade': ['update_raw_grade', 'Updates raw grade value for given user, this is a only way to update raw grades from external source (modules, etc.), because it logs the change in history table and deals with final grade recalculation. ', [['lib/grade','grade_item.php',1646]], 3],
'grade_user_delete': ['grade_user_delete', 'Deletes all of a user\'s grade data from gradebook ', [['lib','gradelib.php',1327]], 1],
'grade_recover_history_grades': ['grade_recover_history_grades', 'Recover a user\'s grades from grade_grades_history ', [['lib','gradelib.php',930]], 1],
'fetch_course_item': ['fetch_course_item', 'Returns the grade item associated with the course ', [['lib/grade','grade_item.php',999]], 16],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'get_plugin_list': ['get_plugin_list', 'Get list of plugins of given type. ', [['lib/classes','component.php',781],['lib','deprecatedlib.php',467],['admin/tool/monitor/classes','eventlist.php',176]], 184],
'standardise_score': ['standardise_score', 'Given a float value situated between a source minimum and a source maximum, converts it to the corresponding value situated between a target minimum and a target maximum. Thanks to Darlene for the formula :-) ', [['lib/grade','grade_grade.php',596]], 17],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'grade_format_gradevalue_letter': ['grade_format_gradevalue_letter', 'Returns a letter grade representation of a grade value The array of grade letters used is produced by {@link grade_get_letters()} using the course context ', [['lib','gradelib.php',760]], 5],
'pre_regrade_final_grades': ['pre_regrade_final_grades', 'Something that should be called before we start regrading the whole course. ', [['lib/grade','grade_category.php',419]], 1],
'grade_course_category_delete': ['grade_course_category_delete', 'Called when course category is deleted Cleans the gradebook of associated data ', [['lib','gradelib.php',1290]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'load_optional_fields': ['load_optional_fields', 'Makes sure all the optional fields are loaded. ', [['lib/grade','grade_object.php',106],['completion','data_object.php',132]], 1],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'regrading_finished': ['regrading_finished', 'Mark regrading as finished successfully. ', [['lib/grade','grade_item.php',640]], 1],
'regrade_final_grades': ['regrade_final_grades', 'Performs the necessary calculations on the grades_final referenced by this grade_item. Also resets the needsupdate flag once successfully performed. ', [['lib/grade','grade_item.php',650]], 2],
'format_float': ['format_float', 'This function should be identical to {@link qtype_calculated_variable_substituter::format_float()}. Except that we do not try to do locale-aware replacement of the decimal point. ', [['question/type/calculated/db','upgradelib.php',205],['lib','moodlelib.php',7707],['question/type/calculatedmulti/db','upgradelib.php',229],['question/type/calculated','question.php',328]], 154],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'in_array': ['in_array', '', [], 1173],
'krsort': ['krsort', '', [], 15],
'time': ['time', '', [], 1768],
'round': ['round', '', [], 903],
'implode': ['implode', '', [], 1259],
'array_unshift': ['array_unshift', '', [], 114],
'array_key_exists': ['array_key_exists', '', [], 1539],
'is_null': ['is_null', '', [], 1992],
'file_exists': ['file_exists', '', [], 873],
'array_keys': ['array_keys', '', [], 1152],
'asort': ['asort', '', [], 109],
'max': ['max', '', [], 1096],
'ksort': ['ksort', '', [], 158],
'compact': ['compact', '', [], 31],
'defined': ['defined', '', [], 4098],
'function_exists': ['function_exists', '', [], 443],
'reset': ['reset', '', [], 1070],
'is_object': ['is_object', '', [], 508]};
CLASS_DATA={
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 87],
'grade_outcome': ['grade_outcome', 'Class representing a grade outcome. ', [['lib/grade','grade_outcome.php',30]], 39],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 206],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6534]], 160],
'grade_scale': ['grade_scale', 'Class representing a grade scale. ', [['lib/grade','grade_scale.php',30]], 37],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 130],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'grade_grade': ['grade_grade', 'grade_grades is an object mapped to DB table {prefix}grade_grades ', [['lib/grade','grade_grade.php',30]], 129],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'grade_category': ['grade_category', 'grade_category is an object mapped to DB table {prefix}grade_categories ', [['lib/grade','grade_category.php',29]], 144]};
CONST_DATA={
'GRADE_DISPLAY_TYPE_REAL': ['GRADE_DISPLAY_TYPE_REAL', '', [['lib/grade','constants.php',148]], 31],
'GRADE_DISPLAY_TYPE_PERCENTAGE_REAL': ['GRADE_DISPLAY_TYPE_PERCENTAGE_REAL', '', [['lib/grade','constants.php',188]], 7],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 378],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 204],
'GRADE_UPDATE_FAILED': ['GRADE_UPDATE_FAILED', '', [['lib/grade','constants.php',108]], 6],
'GRADE_DISPLAY_TYPE_LETTER_REAL': ['GRADE_DISPLAY_TYPE_LETTER_REAL', '', [['lib/grade','constants.php',173]], 7],
'GRADE_HISTORY_INSERT': ['GRADE_HISTORY_INSERT', '', [['lib/grade','constants.php',126]], 3],
'GRADE_UPDATE_OK': ['GRADE_UPDATE_OK', '', [['lib/grade','constants.php',103]], 18],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 271],
'GRADE_DISPLAY_TYPE_LETTER_PERCENTAGE': ['GRADE_DISPLAY_TYPE_LETTER_PERCENTAGE', '', [['lib/grade','constants.php',178]], 7],
'GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER': ['GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER', '', [['lib/grade','constants.php',183]], 7],
'GRADE_TYPE_NONE': ['GRADE_TYPE_NONE', '', [['lib/grade','constants.php',80]], 41],
'GRADE_TYPE_SCALE': ['GRADE_TYPE_SCALE', '', [['lib/grade','constants.php',90]], 63],
'GRADE_DISPLAY_TYPE_PERCENTAGE': ['GRADE_DISPLAY_TYPE_PERCENTAGE', '', [['lib/grade','constants.php',153]], 24],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 71],
'GRADE_TYPE_TEXT': ['GRADE_TYPE_TEXT', '', [['lib/grade','constants.php',95]], 25],
'GRADE_DISPLAY_TYPE_REAL_LETTER': ['GRADE_DISPLAY_TYPE_REAL_LETTER', '', [['lib/grade','constants.php',168]], 7],
'GRADE_DISPLAY_TYPE_LETTER': ['GRADE_DISPLAY_TYPE_LETTER', '', [['lib/grade','constants.php',158]], 28],
'GRADE_UPDATE_MULTIPLE': ['GRADE_UPDATE_MULTIPLE', '', [['lib/grade','constants.php',113]], 2],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'GRADE_UPDATE_ITEM_LOCKED': ['GRADE_UPDATE_ITEM_LOCKED', '', [['lib/grade','constants.php',118]], 3],
'GRADE_DISPLAY_TYPE_REAL_PERCENTAGE': ['GRADE_DISPLAY_TYPE_REAL_PERCENTAGE', '', [['lib/grade','constants.php',163]], 7]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
