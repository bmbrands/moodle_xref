<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/upgradelib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='upgradelib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="upgradelib.php.html">upgradelib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="upgradelib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="upgradelib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Various upgrade/install related functions and classes.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    core</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas (http://dougiamas.com)</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/** UPGRADE_LOG_NORMAL = 0 */</span>
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>', 0);
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/** UPGRADE_LOG_NOTICE = 1 */</span>
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('UPGRADE_LOG_NOTICE')" href="../_constants/UPGRADE_LOG_NOTICE.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NOTICE')">UPGRADE_LOG_NOTICE</a>', 1);
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">/** UPGRADE_LOG_ERROR = 2 */</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('UPGRADE_LOG_ERROR')" href="../_constants/UPGRADE_LOG_ERROR.html" onMouseOver="constPopup(event,'UPGRADE_LOG_ERROR')">UPGRADE_LOG_ERROR</a>',  2);
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * Exception indicating unknown error during upgrade.</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @package    core</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> */</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l45"><span class="linenum">  45</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it545" onMouseOver="hilite(545)" onMouseOut="lolite()" onClick="logVariable('debuginfo')" href="../_variables/debuginfo.html">$debuginfo</a>=NULL) {
<a name="l46"><span class="linenum">  46</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = (object)array('plugin'=&gt;<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'version'=&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l48"><span class="linenum">  48</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('upgradeerror', 'admin', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, <a class="var it545" onMouseOver="hilite(545)" onMouseOut="lolite()" onClick="logVariable('debuginfo')" href="../_variables/debuginfo.html">$debuginfo</a>);
<a name="l49"><span class="linenum">  49</span></a>      }
<a name="l50"><span class="linenum">  50</span></a>  }
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * Exception indicating downgrade error during upgrade.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> *</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @package    core</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> */</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l61"><span class="linenum">  61</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('oldversion')" href="../_variables/oldversion.html">$oldversion</a>, <a class="var it21614" onMouseOver="hilite(21614)" onMouseOut="lolite()" onClick="logVariable('newversion')" href="../_variables/newversion.html">$newversion</a>) {
<a name="l62"><span class="linenum">  62</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) ? 'moodle' : <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = (object)array('plugin'=&gt;<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'oldversion'=&gt;<a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('oldversion')" href="../_variables/oldversion.html">$oldversion</a>, 'newversion'=&gt;<a class="var it21614" onMouseOver="hilite(21614)" onMouseOut="lolite()" onClick="logVariable('newversion')" href="../_variables/newversion.html">$newversion</a>);
<a name="l65"><span class="linenum">  65</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('cannotdowngrade', 'debug', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l66"><span class="linenum">  66</span></a>      }
<a name="l67"><span class="linenum">  67</span></a>  }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">/**</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * @package    core</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> */</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l76"><span class="linenum">  76</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>, <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('currentmoodle')" href="../_variables/currentmoodle.html">$currentmoodle</a>, <a class="var it32114" onMouseOver="hilite(32114)" onMouseOut="lolite()" onClick="logVariable('requiremoodle')" href="../_variables/requiremoodle.html">$requiremoodle</a>) {
<a name="l77"><span class="linenum">  77</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('pluginname')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/pluginname.html">pluginname</a>     = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('pluginversion')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/pluginversion.html">pluginversion</a>  = <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>;
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('currentmoodle')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/currentmoodle.html">currentmoodle</a>  = <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('currentmoodle')" href="../_variables/currentmoodle.html">$currentmoodle</a>;
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('requiremoodle')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/requiremoodle.html">requiremoodle</a>  = <a class="var it32114" onMouseOver="hilite(32114)" onMouseOut="lolite()" onClick="logVariable('requiremoodle')" href="../_variables/requiremoodle.html">$requiremoodle</a>;
<a name="l83"><span class="linenum">  83</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('pluginrequirementsnotmet', 'error', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l84"><span class="linenum">  84</span></a>      }
<a name="l85"><span class="linenum">  85</span></a>  }
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">/**</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * @package    core</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> */</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l94"><span class="linenum">  94</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it1213" onMouseOver="hilite(1213)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>) {
<a name="l95"><span class="linenum">  95</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l96"><span class="linenum">  96</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('detectedbrokenplugin', 'error', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it1213" onMouseOver="hilite(1213)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>);
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">/**</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment"> * Misplaced plugin exception.</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> *</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * Note: this should be used only from the upgrade/admin code.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> *</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> * @package    core</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment"> */</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l111"><span class="linenum"> 111</span></a>      <span class="comment">/**</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * Constructor.</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * @param string $component the component from version.php</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * @param string $expected expected directory, null means calculate</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     * @param string $current plugin directory path</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     */</span>
<a name="l117"><span class="linenum"> 117</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>, <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>) {
<a name="l118"><span class="linenum"> 118</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l119"><span class="linenum"> 119</span></a>          if (empty(<a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>)) {
<a name="l120"><span class="linenum"> 120</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l121"><span class="linenum"> 121</span></a>              <a class="var it15535" onMouseOver="hilite(15535)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l122"><span class="linenum"> 122</span></a>              if (isset(<a class="var it15535" onMouseOver="hilite(15535)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l123"><span class="linenum"> 123</span></a>                  <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a> = <a class="var it15535" onMouseOver="hilite(15535)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] . '/' . <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l124"><span class="linenum"> 124</span></a>              }
<a name="l125"><span class="linenum"> 125</span></a>          }
<a name="l126"><span class="linenum"> 126</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>, '<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>') !== 0) {
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>, '<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>', <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>);
<a name="l128"><span class="linenum"> 128</span></a>          }
<a name="l129"><span class="linenum"> 129</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>, '<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>') !== 0) {
<a name="l130"><span class="linenum"> 130</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>, '<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>);
<a name="l131"><span class="linenum"> 131</span></a>          }
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('component')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('expected')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/expected.html">expected</a>  = <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>;
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('current')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/current.html">current</a>   = <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>;
<a name="l136"><span class="linenum"> 136</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('detectedmisplacedplugin', 'core_plugin', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l137"><span class="linenum"> 137</span></a>      }
<a name="l138"><span class="linenum"> 138</span></a>  }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">/**</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment"> * Sets maximum expected time needed for upgrade task.</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment"> * Please always make sure that upgrade will not run longer!</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment"> *</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment"> * The script may be automatically aborted if upgrade times out.</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"> *</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> * @param int $max_execution_time in seconds (can not be less than 60 s)</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment"> */</span>
<a name="l149"><span class="linenum"> 149</span></a>  function <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>(<a class="var it37694" onMouseOver="hilite(37694)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a>=300) {
<a name="l150"><span class="linenum"> 150</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      if (!isset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>) or <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a> &lt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()) {
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it35423" onMouseOver="hilite(35423)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(null, 'upgraderunning');
<a name="l154"><span class="linenum"> 154</span></a>      } else {
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it35423" onMouseOver="hilite(35423)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>;
<a name="l156"><span class="linenum"> 156</span></a>      }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>      if (!<a class="var it35423" onMouseOver="hilite(35423)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a>) {
<a name="l159"><span class="linenum"> 159</span></a>          if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">            // never stop CLI upgrades</span>
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it35423" onMouseOver="hilite(35423)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> = 0;
<a name="l162"><span class="linenum"> 162</span></a>          } else {
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">            // web upgrade not running or aborted</span>
<a name="l164"><span class="linenum"> 164</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('upgradetimedout', 'admin', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/&quot;);
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>      if (<a class="var it37694" onMouseOver="hilite(37694)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a> &lt; 60) {
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">        // protection against 0 here</span>
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it37694" onMouseOver="hilite(37694)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a> = 60;
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>      <a class="var it37950" onMouseOver="hilite(37950)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() + <a class="var it37694" onMouseOver="hilite(37694)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a>;
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>      if (<a class="var it37950" onMouseOver="hilite(37950)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a> &lt; <a class="var it35423" onMouseOver="hilite(35423)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> + 10 and <a class="var it37950" onMouseOver="hilite(37950)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a> &gt; <a class="var it35423" onMouseOver="hilite(35423)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> - 10) {
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // no need to store new end, it is nearly the same ;-)</span>
<a name="l177"><span class="linenum"> 177</span></a>          return;
<a name="l178"><span class="linenum"> 178</span></a>      }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>      if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">        // there is no point in timing out of CLI scripts, admins can stop them if necessary</span>
<a name="l182"><span class="linenum"> 182</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l183"><span class="linenum"> 183</span></a>      } else {
<a name="l184"><span class="linenum"> 184</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(<a class="var it37694" onMouseOver="hilite(37694)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a>);
<a name="l185"><span class="linenum"> 185</span></a>      }
<a name="l186"><span class="linenum"> 186</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('upgraderunning', <a class="var it37950" onMouseOver="hilite(37950)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a>); <span class="comment">// keep upgrade locked until this time</span>
<a name="l187"><span class="linenum"> 187</span></a>  }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">/**</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment"> * Upgrade savepoint, marks end of each upgrade block.</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment"> * It stores new main version, resets upgrade timeout</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment"> *</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment"> * Please do not make large upgrade blocks with lots of operations,</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment"> * for example when adding tables keep only one table operation per block.</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment"> *</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> * @return void</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment"> */</span>
<a name="l203"><span class="linenum"> 203</span></a>  function <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l204"><span class="linenum"> 204</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">    //sanity check to avoid confusion with upgrade_mod_savepoint usage.</span>
<a name="l207"><span class="linenum"> 207</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_bool')" href="../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>)) {
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it3102" onMouseOver="hilite(3102)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a> = 'Parameter type mismatch. Are you mixing up <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>() and <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>()?';
<a name="l209"><span class="linenum"> 209</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(<a class="var it3102" onMouseOver="hilite(3102)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a>);
<a name="l210"><span class="linenum"> 210</span></a>      }
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l213"><span class="linenum"> 213</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(null, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l214"><span class="linenum"> 214</span></a>      }
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>      if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &gt;= <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">        // something really wrong is going on in main upgrade script</span>
<a name="l218"><span class="linenum"> 218</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(null, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l219"><span class="linenum"> 219</span></a>      }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l222"><span class="linenum"> 222</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, null, 'Upgrade savepoint reached');
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">    // reset upgrade timeout to default</span>
<a name="l225"><span class="linenum"> 225</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">    // this is a safe place to stop upgrades if user aborts page loading</span>
<a name="l228"><span class="linenum"> 228</span></a>      if (<a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l229"><span class="linenum"> 229</span></a>          die;
<a name="l230"><span class="linenum"> 230</span></a>      }
<a name="l231"><span class="linenum"> 231</span></a>  }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">/**</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> * Module upgrade savepoint, marks end of module upgrade blocks</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> * It stores module version, resets upgrade timeout</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> *</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment"> * @param string $modname name of module</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment"> * @return void</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment"> */</span>
<a name="l245"><span class="linenum"> 245</span></a>  function <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l246"><span class="linenum"> 246</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>      <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'mod_'.<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>;
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l251"><span class="linenum"> 251</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l252"><span class="linenum"> 252</span></a>      }
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>      <a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'name'=&gt;'version'));
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>      if (!<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('modules', array('name'=&gt;<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>))) {
<a name="l257"><span class="linenum"> 257</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('modulenotexist', 'debug', '', <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>);
<a name="l258"><span class="linenum"> 258</span></a>      }
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>      if (<a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> &gt;= <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">        // something really wrong is going on in upgrade script</span>
<a name="l262"><span class="linenum"> 262</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l263"><span class="linenum"> 263</span></a>      }
<a name="l264"><span class="linenum"> 264</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Upgrade savepoint reached');
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">    // reset upgrade timeout to default</span>
<a name="l269"><span class="linenum"> 269</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">    // this is a safe place to stop upgrades if user aborts page loading</span>
<a name="l272"><span class="linenum"> 272</span></a>      if (<a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l273"><span class="linenum"> 273</span></a>          die;
<a name="l274"><span class="linenum"> 274</span></a>      }
<a name="l275"><span class="linenum"> 275</span></a>  }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment"> * Blocks upgrade savepoint, marks end of blocks upgrade blocks</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> * It stores block version, resets upgrade timeout</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> *</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment"> * @param string $blockname name of block</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * @return void</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> */</span>
<a name="l289"><span class="linenum"> 289</span></a>  function <a class="function" onClick="logFunction('upgrade_block_savepoint')" href="../_functions/upgrade_block_savepoint.html" onMouseOver="funcPopup(event,'upgrade_block_savepoint')">upgrade_block_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l290"><span class="linenum"> 290</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>      <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l295"><span class="linenum"> 295</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l296"><span class="linenum"> 296</span></a>      }
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>      <a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'name'=&gt;'version'));
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>      if (!<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('block', array('name'=&gt;<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>))) {
<a name="l301"><span class="linenum"> 301</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('blocknotexist', 'debug', '', <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>      if (<a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> &gt;= <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">        // something really wrong is going on in upgrade script</span>
<a name="l306"><span class="linenum"> 306</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l307"><span class="linenum"> 307</span></a>      }
<a name="l308"><span class="linenum"> 308</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Upgrade savepoint reached');
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">    // reset upgrade timeout to default</span>
<a name="l313"><span class="linenum"> 313</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">    // this is a safe place to stop upgrades if user aborts page loading</span>
<a name="l316"><span class="linenum"> 316</span></a>      if (<a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l317"><span class="linenum"> 317</span></a>          die;
<a name="l318"><span class="linenum"> 318</span></a>      }
<a name="l319"><span class="linenum"> 319</span></a>  }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">/**</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> * Plugins upgrade savepoint, marks end of blocks upgrade blocks</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> * It stores plugin version, resets upgrade timeout</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment"> *</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> * @param string $type name of plugin</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * @param string $dir location of plugin</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @return void</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> */</span>
<a name="l334"><span class="linenum"> 334</span></a>  function <a class="function" onClick="logFunction('upgrade_plugin_savepoint')" href="../_functions/upgrade_plugin_savepoint.html" onMouseOver="funcPopup(event,'upgrade_plugin_savepoint')">upgrade_plugin_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l335"><span class="linenum"> 335</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>      <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'_'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>      if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l340"><span class="linenum"> 340</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l341"><span class="linenum"> 341</span></a>      }
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      <a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'name'=&gt;'version'));
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      if (<a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> &gt;= <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">        // Something really wrong is going on in the upgrade script</span>
<a name="l347"><span class="linenum"> 347</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it14698" onMouseOver="hilite(14698)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l348"><span class="linenum"> 348</span></a>      }
<a name="l349"><span class="linenum"> 349</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l350"><span class="linenum"> 350</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Upgrade savepoint reached');
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">    // Reset upgrade timeout to default</span>
<a name="l353"><span class="linenum"> 353</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">    // This is a safe place to stop upgrades if user aborts page loading</span>
<a name="l356"><span class="linenum"> 356</span></a>      if (<a class="var it37951" onMouseOver="hilite(37951)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l357"><span class="linenum"> 357</span></a>          die;
<a name="l358"><span class="linenum"> 358</span></a>      }
<a name="l359"><span class="linenum"> 359</span></a>  }
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">/**</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment"> * Detect if there are leftovers in PHP source files.</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment"> *</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment"> * During main version upgrades administrators MUST move away</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment"> * old PHP source files and start from scratch (or better</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment"> * use git).</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> *</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment"> * @return bool true means borked upgrade, false means previous PHP files were properly removed</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment"> */</span>
<a name="l370"><span class="linenum"> 370</span></a>  function <a class="function" onClick="logFunction('upgrade_stale_php_files_present')" href="../_functions/upgrade_stale_php_files_present.html" onMouseOver="funcPopup(event,'upgrade_stale_php_files_present')">upgrade_stale_php_files_present</a>() {
<a name="l371"><span class="linenum"> 371</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>      <a class="var it37952" onMouseOver="hilite(37952)" onMouseOut="lolite()" onClick="logVariable('someexamplesofremovedfiles')" href="../_variables/someexamplesofremovedfiles.html">$someexamplesofremovedfiles</a> = array(
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">        // Removed in 2.9.</span>
<a name="l375"><span class="linenum"> 375</span></a>          '/lib/timezone.txt',
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">        // Removed in 2.8.</span>
<a name="l377"><span class="linenum"> 377</span></a>          '/course/delete_category_form.php',
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">        // Removed in 2.7.</span>
<a name="l379"><span class="linenum"> 379</span></a>          '/admin/tool/qeupgradehelper/version.php',
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">        // Removed in 2.6.</span>
<a name="l381"><span class="linenum"> 381</span></a>          '/admin/block.php',
<a name="l382"><span class="linenum"> 382</span></a>          '/admin/oacleanup.php',
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">        // Removed in 2.5.</span>
<a name="l384"><span class="linenum"> 384</span></a>          '/backup/lib.php',
<a name="l385"><span class="linenum"> 385</span></a>          '/backup/bb/README.txt',
<a name="l386"><span class="linenum"> 386</span></a>          '/lib/excel/test.php',
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">        // Removed in 2.4.</span>
<a name="l388"><span class="linenum"> 388</span></a>          '/admin/tool/unittest/simpletestlib.php',
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">        // Removed in 2.3.</span>
<a name="l390"><span class="linenum"> 390</span></a>          '/lib/minify/builder/',
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">        // Removed in 2.2.</span>
<a name="l392"><span class="linenum"> 392</span></a>          '/lib/yui/3.4.1pr1/',
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">        // Removed in 2.2.</span>
<a name="l394"><span class="linenum"> 394</span></a>          '/search/cron_php5.php',
<a name="l395"><span class="linenum"> 395</span></a>          '/course/report/log/indexlive.php',
<a name="l396"><span class="linenum"> 396</span></a>          '/admin/report/backups/index.php',
<a name="l397"><span class="linenum"> 397</span></a>          '/admin/generator.php',
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">        // Removed in 2.1.</span>
<a name="l399"><span class="linenum"> 399</span></a>          '/lib/yui/2.8.0r4/',
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">        // Removed in 2.0.</span>
<a name="l401"><span class="linenum"> 401</span></a>          '/blocks/admin/block_admin.php',
<a name="l402"><span class="linenum"> 402</span></a>          '/blocks/admin_tree/block_admin_tree.php',
<a name="l403"><span class="linenum"> 403</span></a>      );
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>      foreach (<a class="var it37952" onMouseOver="hilite(37952)" onMouseOut="lolite()" onClick="logVariable('someexamplesofremovedfiles')" href="../_variables/someexamplesofremovedfiles.html">$someexamplesofremovedfiles</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l406"><span class="linenum"> 406</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l407"><span class="linenum"> 407</span></a>              return true;
<a name="l408"><span class="linenum"> 408</span></a>          }
<a name="l409"><span class="linenum"> 409</span></a>      }
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>      return false;
<a name="l412"><span class="linenum"> 412</span></a>  }
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">/**</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> * Upgrade plugins</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> * @param string $type The type of plugins that should be updated (e.g. 'enrol', 'qtype')</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"> * return void</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment"> */</span>
<a name="l419"><span class="linenum"> 419</span></a>  function <a class="function" onClick="logFunction('upgrade_plugins')" href="../_functions/upgrade_plugins.html" onMouseOver="funcPopup(event,'upgrade_plugins')">upgrade_plugins</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l420"><span class="linenum"> 420</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">/// special cases</span>
<a name="l423"><span class="linenum"> 423</span></a>      if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'mod') {
<a name="l424"><span class="linenum"> 424</span></a>          return <a class="function" onClick="logFunction('upgrade_plugins_modules')" href="../_functions/upgrade_plugins_modules.html" onMouseOver="funcPopup(event,'upgrade_plugins_modules')">upgrade_plugins_modules</a>(<a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l425"><span class="linenum"> 425</span></a>      } else if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'block') {
<a name="l426"><span class="linenum"> 426</span></a>          return <a class="function" onClick="logFunction('upgrade_plugins_blocks')" href="../_functions/upgrade_plugins_blocks.html" onMouseOver="funcPopup(event,'upgrade_plugins_blocks')">upgrade_plugins_blocks</a>(<a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l427"><span class="linenum"> 427</span></a>      }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>      <a class="var it15556" onMouseOver="hilite(15556)" onMouseOut="lolite()" onClick="logVariable('plugs')" href="../_variables/plugs.html">$plugs</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>      foreach (<a class="var it15556" onMouseOver="hilite(15556)" onMouseOut="lolite()" onClick="logVariable('plugs')" href="../_variables/plugs.html">$plugs</a> as <a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>=&gt;<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>) {
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">        // Reset time so that it works when installing a large number of plugins</span>
<a name="l433"><span class="linenum"> 433</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(600);
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'_'.<a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>); <span class="comment">// standardised plugin name</span>
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">        // check plugin dir is valid name</span>
<a name="l437"><span class="linenum"> 437</span></a>          if (empty(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l438"><span class="linenum"> 438</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'_'.<a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, 'Invalid plugin directory name.');
<a name="l439"><span class="linenum"> 439</span></a>          }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'<a class="filename" href="../version.php.html">/version.php</a>')) {
<a name="l442"><span class="linenum"> 442</span></a>              continue;
<a name="l443"><span class="linenum"> 443</span></a>          }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>; <span class="comment">// Prevent some notices when plugin placed in wrong directory.</span>
<a name="l448"><span class="linenum"> 448</span></a>          <span class="keyword">require</span> <a class="filename" href="../version.php.html" onMouseOver="reqPopup(event, 'version.php', '../version.php')">($fullplug.'/version.php')</a>;  <span class="comment">// defines $plugin with version etc</span>
<a name="l449"><span class="linenum"> 449</span></a>          unset(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">        // if plugin tells us it's full name we may check the location</span>
<a name="l452"><span class="linenum"> 452</span></a>          if (isset(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l453"><span class="linenum"> 453</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a> !== <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l454"><span class="linenum"> 454</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, null, <a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>);
<a name="l455"><span class="linenum"> 455</span></a>              }
<a name="l456"><span class="linenum"> 456</span></a>          }
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l459"><span class="linenum"> 459</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing version value in version.php');
<a name="l460"><span class="linenum"> 460</span></a>          }
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('name')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/name.html">name</a>     = <a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>;
<a name="l463"><span class="linenum"> 463</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a> = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>          if (!empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>)) {
<a name="l466"><span class="linenum"> 466</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l467"><span class="linenum"> 467</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>);
<a name="l468"><span class="linenum"> 468</span></a>              } else if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &lt; 2010000000) {
<a name="l469"><span class="linenum"> 469</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Plugin is not compatible with Moodle 2.x or later.');
<a name="l470"><span class="linenum"> 470</span></a>              }
<a name="l471"><span class="linenum"> 471</span></a>          }
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">        // try to recover from interrupted install.php if needed</span>
<a name="l474"><span class="linenum"> 474</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.php')) {
<a name="l475"><span class="linenum"> 475</span></a>              if (<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, 'installrunning')) {
<a name="l476"><span class="linenum"> 476</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullplug.'/db/install.php')</a>;
<a name="l477"><span class="linenum"> 477</span></a>                  <a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a> = 'xmldb_'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>.'_install_recovery';
<a name="l478"><span class="linenum"> 478</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>)) {
<a name="l479"><span class="linenum"> 479</span></a>                      <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l480"><span class="linenum"> 480</span></a>                      <a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>();
<a name="l481"><span class="linenum"> 481</span></a>                      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l482"><span class="linenum"> 482</span></a>                      <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l483"><span class="linenum"> 483</span></a>                      <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l484"><span class="linenum"> 484</span></a>                      <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l485"><span class="linenum"> 485</span></a>                      <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l486"><span class="linenum"> 486</span></a>                      \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l487"><span class="linenum"> 487</span></a>                      <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l488"><span class="linenum"> 488</span></a>                      \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l489"><span class="linenum"> 489</span></a>                      if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'message') {
<a name="l490"><span class="linenum"> 490</span></a>                          <a class="function" onClick="logFunction('message_update_processors')" href="../_functions/message_update_processors.html" onMouseOver="funcPopup(event,'message_update_processors')">message_update_processors</a>(<a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>);
<a name="l491"><span class="linenum"> 491</span></a>                      }
<a name="l492"><span class="linenum"> 492</span></a>                      <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l493"><span class="linenum"> 493</span></a>                      <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l494"><span class="linenum"> 494</span></a>                  }
<a name="l495"><span class="linenum"> 495</span></a>              }
<a name="l496"><span class="linenum"> 496</span></a>          }
<a name="l497"><span class="linenum"> 497</span></a>  
<a name="l498"><span class="linenum"> 498</span></a>          <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l499"><span class="linenum"> 499</span></a>          if (empty(<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>)) { // new installation
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">        /// Install tables if defined</span>
<a name="l503"><span class="linenum"> 503</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.xml')) {
<a name="l504"><span class="linenum"> 504</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.xml');
<a name="l505"><span class="linenum"> 505</span></a>              }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">        /// store version</span>
<a name="l508"><span class="linenum"> 508</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_savepoint')" href="../_functions/upgrade_plugin_savepoint.html" onMouseOver="funcPopup(event,'upgrade_plugin_savepoint')">upgrade_plugin_savepoint</a>(true, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, false);
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">        /// execute post install file</span>
<a name="l511"><span class="linenum"> 511</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.php')) {
<a name="l512"><span class="linenum"> 512</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullplug.'/db/install.php')</a>;
<a name="l513"><span class="linenum"> 513</span></a>                  <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('installrunning', 1, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l514"><span class="linenum"> 514</span></a>                  <a class="var it37957" onMouseOver="hilite(37957)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a> = 'xmldb_'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>.'_install';
<a name="l515"><span class="linenum"> 515</span></a>                  <a class="var it37957" onMouseOver="hilite(37957)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a>();
<a name="l516"><span class="linenum"> 516</span></a>                  <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l517"><span class="linenum"> 517</span></a>              }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">        /// Install various components</span>
<a name="l520"><span class="linenum"> 520</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l521"><span class="linenum"> 521</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l522"><span class="linenum"> 522</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l523"><span class="linenum"> 523</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l524"><span class="linenum"> 524</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l525"><span class="linenum"> 525</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l526"><span class="linenum"> 526</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l527"><span class="linenum"> 527</span></a>              if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'message') {
<a name="l528"><span class="linenum"> 528</span></a>                  <a class="function" onClick="logFunction('message_update_processors')" href="../_functions/message_update_processors.html" onMouseOver="funcPopup(event,'message_update_processors')">message_update_processors</a>(<a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>);
<a name="l529"><span class="linenum"> 529</span></a>              }
<a name="l530"><span class="linenum"> 530</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l531"><span class="linenum"> 531</span></a>              <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>          } else if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) { // upgrade
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">        /// Run the upgrade function for the plugin.</span>
<a name="l535"><span class="linenum"> 535</span></a>              <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>              if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it15558" onMouseOver="hilite(15558)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/upgrade.php')) {
<a name="l538"><span class="linenum"> 538</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/upgrade.php.html" onMouseOver="reqPopup(event, 'upgrade.php', '../lib/db/upgrade.php')">($fullplug.'/db/upgrade.php')</a>;  <span class="comment">// defines upgrading function</span>
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>                  <a class="var it37958" onMouseOver="hilite(37958)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a> = 'xmldb_'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>.'_upgrade';
<a name="l541"><span class="linenum"> 541</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it37958" onMouseOver="hilite(37958)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a>(<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>);
<a name="l542"><span class="linenum"> 542</span></a>              } else {
<a name="l543"><span class="linenum"> 543</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l544"><span class="linenum"> 544</span></a>              }
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>              <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l547"><span class="linenum"> 547</span></a>              if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">                // store version if not already there</span>
<a name="l549"><span class="linenum"> 549</span></a>                  <a class="function" onClick="logFunction('upgrade_plugin_savepoint')" href="../_functions/upgrade_plugin_savepoint.html" onMouseOver="funcPopup(event,'upgrade_plugin_savepoint')">upgrade_plugin_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, false);
<a name="l550"><span class="linenum"> 550</span></a>              }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">        /// Upgrade various components</span>
<a name="l553"><span class="linenum"> 553</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l554"><span class="linenum"> 554</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l555"><span class="linenum"> 555</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l556"><span class="linenum"> 556</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l557"><span class="linenum"> 557</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l558"><span class="linenum"> 558</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l559"><span class="linenum"> 559</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l560"><span class="linenum"> 560</span></a>              if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'message') {
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">                // Ugly hack!</span>
<a name="l562"><span class="linenum"> 562</span></a>                  <a class="function" onClick="logFunction('message_update_processors')" href="../_functions/message_update_processors.html" onMouseOver="funcPopup(event,'message_update_processors')">message_update_processors</a>(<a class="var it15557" onMouseOver="hilite(15557)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>);
<a name="l563"><span class="linenum"> 563</span></a>              }
<a name="l564"><span class="linenum"> 564</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>          } else if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &gt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l568"><span class="linenum"> 568</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  }
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">/**</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment"> * Find and check all modules and load them up or upgrade them if necessary</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment"> *</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment"> * @global object</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment"> * @global object</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment"> */</span>
<a name="l579"><span class="linenum"> 579</span></a>  function <a class="function" onClick="logFunction('upgrade_plugins_modules')" href="../_functions/upgrade_plugins_modules.html" onMouseOver="funcPopup(event,'upgrade_plugins_modules')">upgrade_plugins_modules</a>(<a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l580"><span class="linenum"> 580</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l581"><span class="linenum"> 581</span></a>  
<a name="l582"><span class="linenum"> 582</span></a>      <a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('mod');
<a name="l583"><span class="linenum"> 583</span></a>  
<a name="l584"><span class="linenum"> 584</span></a>      foreach (<a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> as <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>=&gt;<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>) {
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>          if (<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a> === 'NEWMODULE') {   // Someone has unzipped the template, ignore it
<a name="l587"><span class="linenum"> 587</span></a>              continue;
<a name="l588"><span class="linenum"> 588</span></a>          }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>('mod_'.<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>);
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">        // check module dir is valid name</span>
<a name="l593"><span class="linenum"> 593</span></a>          if (empty(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l594"><span class="linenum"> 594</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('mod_'.<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, 'Invalid plugin directory name.');
<a name="l595"><span class="linenum"> 595</span></a>          }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'<a class="filename" href="../version.php.html">/version.php</a>')) {
<a name="l598"><span class="linenum"> 598</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing version.php');
<a name="l599"><span class="linenum"> 599</span></a>          }
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">        // TODO: Support for $module will end with Moodle 2.10 by MDL-43896. Was deprecated for Moodle 2.7 by MDL-43040.</span>
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l603"><span class="linenum"> 603</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l604"><span class="linenum"> 604</span></a>          <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l605"><span class="linenum"> 605</span></a>          <span class="keyword">require</span> <a class="filename" href="../version.php.html" onMouseOver="reqPopup(event, 'version.php', '../version.php')">($fullmod .'/version.php')</a>;  <span class="comment">// Defines $plugin with version etc.</span>
<a name="l606"><span class="linenum"> 606</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l607"><span class="linenum"> 607</span></a>          unset(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('version')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l608"><span class="linenum"> 608</span></a>          unset(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('component')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/component.html">component</a>);
<a name="l609"><span class="linenum"> 609</span></a>          unset(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('dependencies')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/dependencies.html">dependencies</a>);
<a name="l610"><span class="linenum"> 610</span></a>          unset(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('release')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/release.html">release</a>);
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">        // if plugin tells us it's full name we may check the location</span>
<a name="l613"><span class="linenum"> 613</span></a>          if (isset(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l614"><span class="linenum"> 614</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a> !== <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l615"><span class="linenum"> 615</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, null, <a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>);
<a name="l616"><span class="linenum"> 616</span></a>              }
<a name="l617"><span class="linenum"> 617</span></a>          }
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">            // Version must be always set now!</span>
<a name="l621"><span class="linenum"> 621</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing version value in version.php');
<a name="l622"><span class="linenum"> 622</span></a>          }
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>          if (!empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>)) {
<a name="l625"><span class="linenum"> 625</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l626"><span class="linenum"> 626</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>);
<a name="l627"><span class="linenum"> 627</span></a>              } else if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &lt; 2010000000) {
<a name="l628"><span class="linenum"> 628</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Plugin is not compatible with Moodle 2.x or later.');
<a name="l629"><span class="linenum"> 629</span></a>              }
<a name="l630"><span class="linenum"> 630</span></a>          }
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>          if (empty(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>)) {
<a name="l633"><span class="linenum"> 633</span></a>              <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a> = 0;
<a name="l634"><span class="linenum"> 634</span></a>          }
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment">        // all modules must have en lang pack</span>
<a name="l637"><span class="linenum"> 637</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(&quot;<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>/lang/en/<a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>.php&quot;)) {
<a name="l638"><span class="linenum"> 638</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing mandatory en language pack.');
<a name="l639"><span class="linenum"> 639</span></a>          }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>          <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>;   <span class="comment">// The name MUST match the directory</span>
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>          <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/db/install.php')) {
<a name="l646"><span class="linenum"> 646</span></a>              if (<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, 'installrunning')) {
<a name="l647"><span class="linenum"> 647</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullmod.'/db/install.php')</a>;
<a name="l648"><span class="linenum"> 648</span></a>                  <a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a> = 'xmldb_'.<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'_install_recovery';
<a name="l649"><span class="linenum"> 649</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>)) {
<a name="l650"><span class="linenum"> 650</span></a>                      <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l651"><span class="linenum"> 651</span></a>                      <a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>();
<a name="l652"><span class="linenum"> 652</span></a>                      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">                    // Install various components too</span>
<a name="l654"><span class="linenum"> 654</span></a>                      <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l655"><span class="linenum"> 655</span></a>                      <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l656"><span class="linenum"> 656</span></a>                      <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l657"><span class="linenum"> 657</span></a>                      <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l658"><span class="linenum"> 658</span></a>                      \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l659"><span class="linenum"> 659</span></a>                      <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l660"><span class="linenum"> 660</span></a>                      \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l661"><span class="linenum"> 661</span></a>                      <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l662"><span class="linenum"> 662</span></a>                      <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l663"><span class="linenum"> 663</span></a>                  }
<a name="l664"><span class="linenum"> 664</span></a>              }
<a name="l665"><span class="linenum"> 665</span></a>          }
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>          if (empty(<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>)) {
<a name="l668"><span class="linenum"> 668</span></a>              <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">        /// Execute install.xml (XMLDB) - must be present in all modules</span>
<a name="l671"><span class="linenum"> 671</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/db/install.xml');
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">        /// Add record into modules table - may be needed in install.php already</span>
<a name="l674"><span class="linenum"> 674</span></a>              <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('modules', <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l675"><span class="linenum"> 675</span></a>              <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>(true, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, false);
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">        /// Post installation hook - optional</span>
<a name="l678"><span class="linenum"> 678</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>/db/install.php&quot;)) {
<a name="l679"><span class="linenum"> 679</span></a>                  require_once(&quot;<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>/db/install.php&quot;);
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">                // Set installation running flag, we need to recover after exception or error</span>
<a name="l681"><span class="linenum"> 681</span></a>                  <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('installrunning', 1, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l682"><span class="linenum"> 682</span></a>                  <a class="var it37957" onMouseOver="hilite(37957)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a> = 'xmldb_'.<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'_install';
<a name="l683"><span class="linenum"> 683</span></a>                  <a class="var it37957" onMouseOver="hilite(37957)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a>();
<a name="l684"><span class="linenum"> 684</span></a>                  <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l685"><span class="linenum"> 685</span></a>              }
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">        /// Install various components</span>
<a name="l688"><span class="linenum"> 688</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l689"><span class="linenum"> 689</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l690"><span class="linenum"> 690</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l691"><span class="linenum"> 691</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l692"><span class="linenum"> 692</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l693"><span class="linenum"> 693</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l694"><span class="linenum"> 694</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l695"><span class="linenum"> 695</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>              <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>          } else if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">        /// If versions say that we need to upgrade but no upgrade files are available, notify and continue</span>
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l702"><span class="linenum"> 702</span></a>  
<a name="l703"><span class="linenum"> 703</span></a>              if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it37305" onMouseOver="hilite(37305)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/db/upgrade.php')) {
<a name="l704"><span class="linenum"> 704</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/upgrade.php.html" onMouseOver="reqPopup(event, 'upgrade.php', '../lib/db/upgrade.php')">($fullmod.'/db/upgrade.php')</a>;  <span class="comment">// defines new upgrading function</span>
<a name="l705"><span class="linenum"> 705</span></a>                  <a class="var it37958" onMouseOver="hilite(37958)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a> = 'xmldb_'.<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'_upgrade';
<a name="l706"><span class="linenum"> 706</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it37958" onMouseOver="hilite(37958)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a>(<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l707"><span class="linenum"> 707</span></a>              } else {
<a name="l708"><span class="linenum"> 708</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l709"><span class="linenum"> 709</span></a>              }
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>              <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l712"><span class="linenum"> 712</span></a>              <a class="var it37959" onMouseOver="hilite(37959)" onMouseOut="lolite()" onClick="logVariable('currmodule')" href="../_variables/currmodule.html">$currmodule</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('modules', array('name'=&gt;<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l713"><span class="linenum"> 713</span></a>              if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">                // store version if not already there</span>
<a name="l715"><span class="linenum"> 715</span></a>                  <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, false);
<a name="l716"><span class="linenum"> 716</span></a>              }
<a name="l717"><span class="linenum"> 717</span></a>  
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">            // update cron flag if needed</span>
<a name="l719"><span class="linenum"> 719</span></a>              if (<a class="var it37959" onMouseOver="hilite(37959)" onMouseOut="lolite()" onClick="logVariable('currmodule')" href="../_variables/currmodule.html">$currmodule</a>-&gt;<a onClick="logVariable('cron')" class="var it41123" onMouseOver="hilite(41123)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a> != <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>) {
<a name="l720"><span class="linenum"> 720</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('modules', 'cron', <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>, array('name' =&gt; <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l721"><span class="linenum"> 721</span></a>              }
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">            // Upgrade various components</span>
<a name="l724"><span class="linenum"> 724</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l725"><span class="linenum"> 725</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l726"><span class="linenum"> 726</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l727"><span class="linenum"> 727</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l728"><span class="linenum"> 728</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l729"><span class="linenum"> 729</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l730"><span class="linenum"> 730</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l731"><span class="linenum"> 731</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>              <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>          } else if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &gt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l736"><span class="linenum"> 736</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l737"><span class="linenum"> 737</span></a>          }
<a name="l738"><span class="linenum"> 738</span></a>      }
<a name="l739"><span class="linenum"> 739</span></a>  }
<a name="l740"><span class="linenum"> 740</span></a>  
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">/**</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment"> * This function finds all available blocks and install them</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment"> * into blocks table or do all the upgrade process if newer.</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment"> *</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> * @global object</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> * @global object</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment"> */</span>
<a name="l749"><span class="linenum"> 749</span></a>  function <a class="function" onClick="logFunction('upgrade_plugins_blocks')" href="../_functions/upgrade_plugins_blocks.html" onMouseOver="funcPopup(event,'upgrade_plugins_blocks')">upgrade_plugins_blocks</a>(<a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l750"><span class="linenum"> 750</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l751"><span class="linenum"> 751</span></a>  
<a name="l752"><span class="linenum"> 752</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blocks/moodleblock.class.php.html">/blocks/moodleblock.class.php</a>');
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>      <a class="var it37960" onMouseOver="hilite(37960)" onMouseOut="lolite()" onClick="logVariable('blocktitles')" href="../_variables/blocktitles.html">$blocktitles</a>   = array(); <span class="comment">// we do not want duplicate titles</span>
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">    //Is this a first install</span>
<a name="l757"><span class="linenum"> 757</span></a>      <a class="var it37961" onMouseOver="hilite(37961)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a> = null;
<a name="l758"><span class="linenum"> 758</span></a>  
<a name="l759"><span class="linenum"> 759</span></a>      <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('block');
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>      foreach (<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>=&gt;<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>) {
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it37961" onMouseOver="hilite(37961)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a>)) {
<a name="l764"><span class="linenum"> 764</span></a>              <a class="var it37961" onMouseOver="hilite(37961)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a> = (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('block_instances') == 0);
<a name="l765"><span class="linenum"> 765</span></a>          }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>          if (<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> === 'NEWBLOCK') {   // Someone has unzipped the template, ignore it
<a name="l768"><span class="linenum"> 768</span></a>              continue;
<a name="l769"><span class="linenum"> 769</span></a>          }
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>('block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>);
<a name="l772"><span class="linenum"> 772</span></a>  
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">        // check block dir is valid name</span>
<a name="l774"><span class="linenum"> 774</span></a>          if (empty(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l775"><span class="linenum"> 775</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'Invalid plugin directory name.');
<a name="l776"><span class="linenum"> 776</span></a>          }
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'<a class="filename" href="../version.php.html">/version.php</a>')) {
<a name="l779"><span class="linenum"> 779</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('block/'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'Missing version.php file.');
<a name="l780"><span class="linenum"> 780</span></a>          }
<a name="l781"><span class="linenum"> 781</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l782"><span class="linenum"> 782</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l783"><span class="linenum"> 783</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('cron')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>    = 0;
<a name="l784"><span class="linenum"> 784</span></a>          <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>; <span class="comment">// Prevent some notices when module placed in wrong directory.</span>
<a name="l785"><span class="linenum"> 785</span></a>          <span class="keyword">include</span> <a class="filename" href="../version.php.html" onMouseOver="reqPopup(event, 'version.php', '../version.php')">($fullblock.'/version.php')</a>;
<a name="l786"><span class="linenum"> 786</span></a>          unset(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l788"><span class="linenum"> 788</span></a>          unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('version')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l789"><span class="linenum"> 789</span></a>          unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('component')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/component.html">component</a>);
<a name="l790"><span class="linenum"> 790</span></a>          unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('dependencies')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/dependencies.html">dependencies</a>);
<a name="l791"><span class="linenum"> 791</span></a>          unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('release')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/release.html">release</a>);
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment">        // if plugin tells us it's full name we may check the location</span>
<a name="l794"><span class="linenum"> 794</span></a>          if (isset(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l795"><span class="linenum"> 795</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a> !== <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l796"><span class="linenum"> 796</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, null, <a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>);
<a name="l797"><span class="linenum"> 797</span></a>              }
<a name="l798"><span class="linenum"> 798</span></a>          }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l801"><span class="linenum"> 801</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing block version.');
<a name="l802"><span class="linenum"> 802</span></a>          }
<a name="l803"><span class="linenum"> 803</span></a>  
<a name="l804"><span class="linenum"> 804</span></a>          if (!empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>)) {
<a name="l805"><span class="linenum"> 805</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l806"><span class="linenum"> 806</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>);
<a name="l807"><span class="linenum"> 807</span></a>              } else if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &lt; 2010000000) {
<a name="l808"><span class="linenum"> 808</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Plugin is not compatible with Moodle 2.x or later.');
<a name="l809"><span class="linenum"> 809</span></a>              }
<a name="l810"><span class="linenum"> 810</span></a>          }
<a name="l811"><span class="linenum"> 811</span></a>  
<a name="l812"><span class="linenum"> 812</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'.php')) {
<a name="l813"><span class="linenum"> 813</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('block/'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'Missing main block <span class="keyword">class </span><a class="class" onClick="logClass('file')" href="../_classes/file.html" onMouseOver="classPopup(event,'file')">file</a>.');
<a name="l814"><span class="linenum"> 814</span></a>          }
<a name="l815"><span class="linenum"> 815</span></a>          include_once(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'.php');
<a name="l816"><span class="linenum"> 816</span></a>  
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l820"><span class="linenum"> 820</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Can not load main class.');
<a name="l821"><span class="linenum"> 821</span></a>          }
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>          <a class="var it37369" onMouseOver="hilite(37369)" onMouseOut="lolite()" onClick="logVariable('blockobj')" href="../_variables/blockobj.html">$blockobj</a>    = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>;   <span class="comment">// This is what we'll be testing</span>
<a name="l824"><span class="linenum"> 824</span></a>          <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>  = <a class="var it37369" onMouseOver="hilite(37369)" onMouseOut="lolite()" onClick="logVariable('blockobj')" href="../_variables/blockobj.html">$blockobj</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">        // OK, it's as we all hoped. For further tests, the object will do them itself.</span>
<a name="l827"><span class="linenum"> 827</span></a>          if (!<a class="var it37369" onMouseOver="hilite(37369)" onMouseOut="lolite()" onClick="logVariable('blockobj')" href="../_variables/blockobj.html">$blockobj</a>-&gt;<a class="function" onClick="logFunction('_self_test')" href="../_functions/_self_test.html" onMouseOver="funcPopup(event,'_self_test')">_self_test</a>()) {
<a name="l828"><span class="linenum"> 828</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Self test failed.');
<a name="l829"><span class="linenum"> 829</span></a>          }
<a name="l830"><span class="linenum"> 830</span></a>  
<a name="l831"><span class="linenum"> 831</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>     = <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;   <span class="comment">// The name MUST match the directory</span>
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>          <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.php')) {
<a name="l836"><span class="linenum"> 836</span></a>              if (<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'installrunning')) {
<a name="l837"><span class="linenum"> 837</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullblock.'/db/install.php')</a>;
<a name="l838"><span class="linenum"> 838</span></a>                  <a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a> = 'xmldb_block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'_install_recovery';
<a name="l839"><span class="linenum"> 839</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>)) {
<a name="l840"><span class="linenum"> 840</span></a>                      <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l841"><span class="linenum"> 841</span></a>                      <a class="var it37955" onMouseOver="hilite(37955)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>();
<a name="l842"><span class="linenum"> 842</span></a>                      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">                    // Install various components</span>
<a name="l844"><span class="linenum"> 844</span></a>                      <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l845"><span class="linenum"> 845</span></a>                      <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l846"><span class="linenum"> 846</span></a>                      <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l847"><span class="linenum"> 847</span></a>                      <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l848"><span class="linenum"> 848</span></a>                      \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l849"><span class="linenum"> 849</span></a>                      <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l850"><span class="linenum"> 850</span></a>                      \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l851"><span class="linenum"> 851</span></a>                      <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l852"><span class="linenum"> 852</span></a>                      <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l853"><span class="linenum"> 853</span></a>                  }
<a name="l854"><span class="linenum"> 854</span></a>              }
<a name="l855"><span class="linenum"> 855</span></a>          }
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>          if (empty(<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>)) { // block not installed yet, so install it
<a name="l858"><span class="linenum"> 858</span></a>              <a class="var it37962" onMouseOver="hilite(37962)" onMouseOut="lolite()" onClick="logVariable('conflictblock')" href="../_variables/conflictblock.html">$conflictblock</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>, <a class="var it37960" onMouseOver="hilite(37960)" onMouseOut="lolite()" onClick="logVariable('blocktitles')" href="../_variables/blocktitles.html">$blocktitles</a>);
<a name="l859"><span class="linenum"> 859</span></a>              if (<a class="var it37962" onMouseOver="hilite(37962)" onMouseOut="lolite()" onClick="logVariable('conflictblock')" href="../_variables/conflictblock.html">$conflictblock</a> !== false) {
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">                // Duplicate block titles are not allowed, they confuse people</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">                // AND PHP's associative arrays ;)</span>
<a name="l862"><span class="linenum"> 862</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blocknameconflict', 'error', (object)array('name'=&gt;<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, 'conflict'=&gt;<a class="var it37962" onMouseOver="hilite(37962)" onMouseOut="lolite()" onClick="logVariable('conflictblock')" href="../_variables/conflictblock.html">$conflictblock</a>)));
<a name="l863"><span class="linenum"> 863</span></a>              }
<a name="l864"><span class="linenum"> 864</span></a>              <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.xml')) {
<a name="l867"><span class="linenum"> 867</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.xml');
<a name="l868"><span class="linenum"> 868</span></a>              }
<a name="l869"><span class="linenum"> 869</span></a>              <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('id')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block', <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>);
<a name="l870"><span class="linenum"> 870</span></a>              <a class="function" onClick="logFunction('upgrade_block_savepoint')" href="../_functions/upgrade_block_savepoint.html" onMouseOver="funcPopup(event,'upgrade_block_savepoint')">upgrade_block_savepoint</a>(true, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, false);
<a name="l871"><span class="linenum"> 871</span></a>  
<a name="l872"><span class="linenum"> 872</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.php')) {
<a name="l873"><span class="linenum"> 873</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullblock.'/db/install.php')</a>;
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">                // Set installation running flag, we need to recover after exception or error</span>
<a name="l875"><span class="linenum"> 875</span></a>                  <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('installrunning', 1, 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l876"><span class="linenum"> 876</span></a>                  <a class="var it37957" onMouseOver="hilite(37957)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a> = 'xmldb_block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'_install';
<a name="l877"><span class="linenum"> 877</span></a>                  <a class="var it37957" onMouseOver="hilite(37957)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a>();
<a name="l878"><span class="linenum"> 878</span></a>                  <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l879"><span class="linenum"> 879</span></a>              }
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>              <a class="var it37960" onMouseOver="hilite(37960)" onMouseOut="lolite()" onClick="logVariable('blocktitles')" href="../_variables/blocktitles.html">$blocktitles</a>[<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>;
<a name="l882"><span class="linenum"> 882</span></a>  
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">            // Install various components</span>
<a name="l884"><span class="linenum"> 884</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l885"><span class="linenum"> 885</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l886"><span class="linenum"> 886</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l887"><span class="linenum"> 887</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l888"><span class="linenum"> 888</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l889"><span class="linenum"> 889</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l890"><span class="linenum"> 890</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l891"><span class="linenum"> 891</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>              <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>          } else if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l896"><span class="linenum"> 896</span></a>              <a class="var it37953" onMouseOver="hilite(37953)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l897"><span class="linenum"> 897</span></a>  
<a name="l898"><span class="linenum"> 898</span></a>              if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it34975" onMouseOver="hilite(34975)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/upgrade.php')) {
<a name="l899"><span class="linenum"> 899</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/upgrade.php.html" onMouseOver="reqPopup(event, 'upgrade.php', '../lib/db/upgrade.php')">($fullblock.'/db/upgrade.php')</a>;  <span class="comment">// defines new upgrading function</span>
<a name="l900"><span class="linenum"> 900</span></a>                  <a class="var it37958" onMouseOver="hilite(37958)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a> = 'xmldb_block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'_upgrade';
<a name="l901"><span class="linenum"> 901</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it37958" onMouseOver="hilite(37958)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a>(<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>);
<a name="l902"><span class="linenum"> 902</span></a>              } else {
<a name="l903"><span class="linenum"> 903</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l904"><span class="linenum"> 904</span></a>              }
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>              <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l907"><span class="linenum"> 907</span></a>              <a class="var it37963" onMouseOver="hilite(37963)" onMouseOut="lolite()" onClick="logVariable('currblock')" href="../_variables/currblock.html">$currblock</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('block', array('name'=&gt;<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l908"><span class="linenum"> 908</span></a>              if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">                // store version if not already there</span>
<a name="l910"><span class="linenum"> 910</span></a>                  <a class="function" onClick="logFunction('upgrade_block_savepoint')" href="../_functions/upgrade_block_savepoint.html" onMouseOver="funcPopup(event,'upgrade_block_savepoint')">upgrade_block_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, false);
<a name="l911"><span class="linenum"> 911</span></a>              }
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>              if (<a class="var it37963" onMouseOver="hilite(37963)" onMouseOut="lolite()" onClick="logVariable('currblock')" href="../_variables/currblock.html">$currblock</a>-&gt;<a onClick="logVariable('cron')" class="var it41124" onMouseOver="hilite(41124)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a> != <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('cron')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>) {
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">                // update cron flag if needed</span>
<a name="l915"><span class="linenum"> 915</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('block', 'cron', <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('cron')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>, array('id' =&gt; <a class="var it37963" onMouseOver="hilite(37963)" onMouseOut="lolite()" onClick="logVariable('currblock')" href="../_variables/currblock.html">$currblock</a>-&gt;<a onClick="logVariable('id')" class="var it41124" onMouseOver="hilite(41124)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l916"><span class="linenum"> 916</span></a>              }
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">            // Upgrade various components</span>
<a name="l919"><span class="linenum"> 919</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l920"><span class="linenum"> 920</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l921"><span class="linenum"> 921</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l922"><span class="linenum"> 922</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l923"><span class="linenum"> 923</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l924"><span class="linenum"> 924</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l925"><span class="linenum"> 925</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l926"><span class="linenum"> 926</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l927"><span class="linenum"> 927</span></a>  
<a name="l928"><span class="linenum"> 928</span></a>              <a class="var it37954" onMouseOver="hilite(37954)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l929"><span class="linenum"> 929</span></a>  
<a name="l930"><span class="linenum"> 930</span></a>          } else if (<a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &gt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l931"><span class="linenum"> 931</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it37956" onMouseOver="hilite(37956)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l932"><span class="linenum"> 932</span></a>          }
<a name="l933"><span class="linenum"> 933</span></a>      }
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment">    // Finally, if we are in the first_install of BLOCKS setup frontpage and admin page blocks</span>
<a name="l937"><span class="linenum"> 937</span></a>      if (<a class="var it37961" onMouseOver="hilite(37961)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a>) {
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">        //Iterate over each course - there should be only site course here now</span>
<a name="l939"><span class="linenum"> 939</span></a>          if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course')) {
<a name="l940"><span class="linenum"> 940</span></a>              foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l941"><span class="linenum"> 941</span></a>                  <a class="function" onClick="logFunction('blocks_add_default_course_blocks')" href="../_functions/blocks_add_default_course_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_course_blocks')">blocks_add_default_course_blocks</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l942"><span class="linenum"> 942</span></a>              }
<a name="l943"><span class="linenum"> 943</span></a>          }
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>          <a class="function" onClick="logFunction('blocks_add_default_system_blocks')" href="../_functions/blocks_add_default_system_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_system_blocks')">blocks_add_default_system_blocks</a>();
<a name="l946"><span class="linenum"> 946</span></a>      }
<a name="l947"><span class="linenum"> 947</span></a>  }
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">/**</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment"> * Log_display description function used during install and upgrade.</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment"> *</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment"> * @param string $component name of component (moodle, mod_assignment, etc.)</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment"> * @return void</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment"> */</span>
<a name="l956"><span class="linenum"> 956</span></a>  function <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l957"><span class="linenum"> 957</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>      <a class="var it17358" onMouseOver="hilite(17358)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>).'/db/log.php';
<a name="l960"><span class="linenum"> 960</span></a>  
<a name="l961"><span class="linenum"> 961</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it17358" onMouseOver="hilite(17358)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>)) {
<a name="l962"><span class="linenum"> 962</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('log_display', array('component'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l963"><span class="linenum"> 963</span></a>          return;
<a name="l964"><span class="linenum"> 964</span></a>      }
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment">    // load new info</span>
<a name="l967"><span class="linenum"> 967</span></a>      <a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = array();
<a name="l968"><span class="linenum"> 968</span></a>      include(<a class="var it17358" onMouseOver="hilite(17358)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>);
<a name="l969"><span class="linenum"> 969</span></a>      <a class="var it37964" onMouseOver="hilite(37964)" onMouseOut="lolite()" onClick="logVariable('newlogs')" href="../_variables/newlogs.html">$newlogs</a> = array();
<a name="l970"><span class="linenum"> 970</span></a>      foreach (<a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> as <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l971"><span class="linenum"> 971</span></a>          <a class="var it37964" onMouseOver="hilite(37964)" onMouseOut="lolite()" onClick="logVariable('newlogs')" href="../_variables/newlogs.html">$newlogs</a>[<a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>['module'].'-'.<a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>['action']] = <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>; <span class="comment">// kind of unique name</span>
<a name="l972"><span class="linenum"> 972</span></a>      }
<a name="l973"><span class="linenum"> 973</span></a>      unset(<a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>);
<a name="l974"><span class="linenum"> 974</span></a>      <a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="var it37964" onMouseOver="hilite(37964)" onMouseOut="lolite()" onClick="logVariable('newlogs')" href="../_variables/newlogs.html">$newlogs</a>;
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = array('module', 'action', 'mtable', 'field');
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">    // update all log fist</span>
<a name="l978"><span class="linenum"> 978</span></a>      <a class="var it37965" onMouseOver="hilite(37965)" onMouseOut="lolite()" onClick="logVariable('dblogs')" href="../_variables/dblogs.html">$dblogs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('log_display', array('component'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l979"><span class="linenum"> 979</span></a>      foreach (<a class="var it37965" onMouseOver="hilite(37965)" onMouseOut="lolite()" onClick="logVariable('dblogs')" href="../_variables/dblogs.html">$dblogs</a> as <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>) {
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('module')" class="var it41125" onMouseOver="hilite(41125)" onMouseOut="lolite()" href="../_variables/module.html">module</a>.'-'.<a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('action')" class="var it41125" onMouseOver="hilite(41125)" onMouseOut="lolite()" href="../_variables/action.html">action</a>;
<a name="l981"><span class="linenum"> 981</span></a>  
<a name="l982"><span class="linenum"> 982</span></a>          if (empty(<a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>[<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>])) {
<a name="l983"><span class="linenum"> 983</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('log_display', array('id'=&gt;<a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('id')" class="var it41125" onMouseOver="hilite(41125)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l984"><span class="linenum"> 984</span></a>              continue;
<a name="l985"><span class="linenum"> 985</span></a>          }
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>          <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a> = <a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>[<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>];
<a name="l988"><span class="linenum"> 988</span></a>          unset(<a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>[<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>]);
<a name="l989"><span class="linenum"> 989</span></a>  
<a name="l990"><span class="linenum"> 990</span></a>          <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l991"><span class="linenum"> 991</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) {
<a name="l992"><span class="linenum"> 992</span></a>              if (<a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> != <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>]) {
<a name="l993"><span class="linenum"> 993</span></a>                  <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>];
<a name="l994"><span class="linenum"> 994</span></a>                  <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l995"><span class="linenum"> 995</span></a>              }
<a name="l996"><span class="linenum"> 996</span></a>          }
<a name="l997"><span class="linenum"> 997</span></a>          if (<a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l998"><span class="linenum"> 998</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('log_display', <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>);
<a name="l999"><span class="linenum"> 999</span></a>          }
<a name="l1000"><span class="linenum">1000</span></a>      }
<a name="l1001"><span class="linenum">1001</span></a>      foreach (<a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> as <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l1002"><span class="linenum">1002</span></a>          <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a> = (object)<a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>;
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('component')" class="var it41125" onMouseOver="hilite(41125)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1004"><span class="linenum">1004</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('log_display', <a class="var it37966" onMouseOver="hilite(37966)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>);
<a name="l1005"><span class="linenum">1005</span></a>      }
<a name="l1006"><span class="linenum">1006</span></a>  }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">/**</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment"> * Web service discovery function used during install and upgrade.</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment"> * @param string $component name of component (moodle, mod_assignment, etc.)</span>
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment"> * @return void</span>
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment"> */</span>
<a name="l1013"><span class="linenum">1013</span></a>  function <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l1014"><span class="linenum">1014</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1015"><span class="linenum">1015</span></a>  
<a name="l1016"><span class="linenum">1016</span></a>      <a class="var it17358" onMouseOver="hilite(17358)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>).'/db/services.php';
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it17358" onMouseOver="hilite(17358)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>)) {
<a name="l1019"><span class="linenum">1019</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../lib/externallib.php.html">/lib/externallib.php</a>');
<a name="l1020"><span class="linenum">1020</span></a>          <a class="function" onClick="logFunction('external_delete_descriptions')" href="../_functions/external_delete_descriptions.html" onMouseOver="funcPopup(event,'external_delete_descriptions')">external_delete_descriptions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1021"><span class="linenum">1021</span></a>          return;
<a name="l1022"><span class="linenum">1022</span></a>      }
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">    // load new info</span>
<a name="l1025"><span class="linenum">1025</span></a>      <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> = array();
<a name="l1026"><span class="linenum">1026</span></a>      <a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a> = array();
<a name="l1027"><span class="linenum">1027</span></a>      include(<a class="var it17358" onMouseOver="hilite(17358)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>);
<a name="l1028"><span class="linenum">1028</span></a>  
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">    // update all function fist</span>
<a name="l1030"><span class="linenum">1030</span></a>      <a class="var it37967" onMouseOver="hilite(37967)" onMouseOut="lolite()" onClick="logVariable('dbfunctions')" href="../_variables/dbfunctions.html">$dbfunctions</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('external_functions', array('component'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l1031"><span class="linenum">1031</span></a>      foreach (<a class="var it37967" onMouseOver="hilite(37967)" onMouseOut="lolite()" onClick="logVariable('dbfunctions')" href="../_variables/dbfunctions.html">$dbfunctions</a> as <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>) {
<a name="l1032"><span class="linenum">1032</span></a>          if (empty(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>[<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/name.html">name</a>])) {
<a name="l1033"><span class="linenum">1033</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_functions', array('id'=&gt;<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('id')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">            // do not delete functions from external_services_functions, beacuse</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">            // we want to notify admins when functions used in custom services disappear</span>
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment">            //TODO: this looks wrong, we have to delete it eventually (skodak)</span>
<a name="l1038"><span class="linenum">1038</span></a>              continue;
<a name="l1039"><span class="linenum">1039</span></a>          }
<a name="l1040"><span class="linenum">1040</span></a>  
<a name="l1041"><span class="linenum">1041</span></a>          <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>[<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/name.html">name</a>];
<a name="l1042"><span class="linenum">1042</span></a>          unset(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>[<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/name.html">name</a>]);
<a name="l1043"><span class="linenum">1043</span></a>          <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'] = empty(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath']) ? null : <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'];
<a name="l1044"><span class="linenum">1044</span></a>  
<a name="l1045"><span class="linenum">1045</span></a>          <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l1046"><span class="linenum">1046</span></a>          if (<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classname')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a> != <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classname']) {
<a name="l1047"><span class="linenum">1047</span></a>              <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classname')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classname'];
<a name="l1048"><span class="linenum">1048</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1049"><span class="linenum">1049</span></a>          }
<a name="l1050"><span class="linenum">1050</span></a>          if (<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('methodname')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/methodname.html">methodname</a> != <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['methodname']) {
<a name="l1051"><span class="linenum">1051</span></a>              <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('methodname')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/methodname.html">methodname</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['methodname'];
<a name="l1052"><span class="linenum">1052</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1053"><span class="linenum">1053</span></a>          }
<a name="l1054"><span class="linenum">1054</span></a>          if (<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classpath')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/classpath.html">classpath</a> != <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath']) {
<a name="l1055"><span class="linenum">1055</span></a>              <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classpath')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/classpath.html">classpath</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'];
<a name="l1056"><span class="linenum">1056</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1057"><span class="linenum">1057</span></a>          }
<a name="l1058"><span class="linenum">1058</span></a>          <a class="var it37969" onMouseOver="hilite(37969)" onMouseOut="lolite()" onClick="logVariable('functioncapabilities')" href="../_variables/functioncapabilities.html">$functioncapabilities</a> = <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('capabilities', <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)?<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['capabilities']:'';
<a name="l1059"><span class="linenum">1059</span></a>          if (<a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('capabilities')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/capabilities.html">capabilities</a> != <a class="var it37969" onMouseOver="hilite(37969)" onMouseOut="lolite()" onClick="logVariable('functioncapabilities')" href="../_variables/functioncapabilities.html">$functioncapabilities</a>) {
<a name="l1060"><span class="linenum">1060</span></a>              <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('capabilities')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/capabilities.html">capabilities</a> = <a class="var it37969" onMouseOver="hilite(37969)" onMouseOut="lolite()" onClick="logVariable('functioncapabilities')" href="../_variables/functioncapabilities.html">$functioncapabilities</a>;
<a name="l1061"><span class="linenum">1061</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1062"><span class="linenum">1062</span></a>          }
<a name="l1063"><span class="linenum">1063</span></a>          if (<a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l1064"><span class="linenum">1064</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('external_functions', <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>);
<a name="l1065"><span class="linenum">1065</span></a>          }
<a name="l1066"><span class="linenum">1066</span></a>      }
<a name="l1067"><span class="linenum">1067</span></a>      foreach (<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> as <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a> =&gt; <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1068"><span class="linenum">1068</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a> = new stdClass();
<a name="l1069"><span class="linenum">1069</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/name.html">name</a>       = <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>;
<a name="l1070"><span class="linenum">1070</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classname')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>  = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classname'];
<a name="l1071"><span class="linenum">1071</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('methodname')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/methodname.html">methodname</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['methodname'];
<a name="l1072"><span class="linenum">1072</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classpath')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/classpath.html">classpath</a>  = empty(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath']) ? null : <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'];
<a name="l1073"><span class="linenum">1073</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('component')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/component.html">component</a>  = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1074"><span class="linenum">1074</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('capabilities')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/capabilities.html">capabilities</a> = <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('capabilities', <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)?<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['capabilities']:'';
<a name="l1075"><span class="linenum">1075</span></a>          <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('id')" class="var it41126" onMouseOver="hilite(41126)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_functions', <a class="var it37968" onMouseOver="hilite(37968)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>);
<a name="l1076"><span class="linenum">1076</span></a>      }
<a name="l1077"><span class="linenum">1077</span></a>      unset(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>);
<a name="l1078"><span class="linenum">1078</span></a>  
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">    // now deal with services</span>
<a name="l1080"><span class="linenum">1080</span></a>      <a class="var it37970" onMouseOver="hilite(37970)" onMouseOut="lolite()" onClick="logVariable('dbservices')" href="../_variables/dbservices.html">$dbservices</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('external_services', array('component'=&gt;<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l1081"><span class="linenum">1081</span></a>      foreach (<a class="var it37970" onMouseOver="hilite(37970)" onMouseOut="lolite()" onClick="logVariable('dbservices')" href="../_variables/dbservices.html">$dbservices</a> as <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>) {
<a name="l1082"><span class="linenum">1082</span></a>          if (empty(<a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a>[<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/name.html">name</a>])) {
<a name="l1083"><span class="linenum">1083</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_tokens', array('externalserviceid'=&gt;<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1084"><span class="linenum">1084</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_functions', array('externalserviceid'=&gt;<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1085"><span class="linenum">1085</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_users', array('externalserviceid'=&gt;<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1086"><span class="linenum">1086</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services', array('id'=&gt;<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1087"><span class="linenum">1087</span></a>              continue;
<a name="l1088"><span class="linenum">1088</span></a>          }
<a name="l1089"><span class="linenum">1089</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> = <a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a>[<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/name.html">name</a>];
<a name="l1090"><span class="linenum">1090</span></a>          unset(<a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a>[<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/name.html">name</a>]);
<a name="l1091"><span class="linenum">1091</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled'] = empty(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled']) ? 0 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled'];
<a name="l1092"><span class="linenum">1092</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'] = empty(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability']) ? null : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'];
<a name="l1093"><span class="linenum">1093</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'] = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers']) ? 1 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'];
<a name="l1094"><span class="linenum">1094</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'] = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles']) ? 0 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'];
<a name="l1095"><span class="linenum">1095</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'] = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles']) ? 0 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'];
<a name="l1096"><span class="linenum">1096</span></a>          <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'] = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) ? null : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'];
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>          <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l1099"><span class="linenum">1099</span></a>          if (<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('requiredcapability')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/requiredcapability.html">requiredcapability</a> != <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability']) {
<a name="l1100"><span class="linenum">1100</span></a>              <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('requiredcapability')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/requiredcapability.html">requiredcapability</a> = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'];
<a name="l1101"><span class="linenum">1101</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1102"><span class="linenum">1102</span></a>          }
<a name="l1103"><span class="linenum">1103</span></a>          if (<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('restrictedusers')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/restrictedusers.html">restrictedusers</a> != <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers']) {
<a name="l1104"><span class="linenum">1104</span></a>              <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('restrictedusers')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/restrictedusers.html">restrictedusers</a> = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'];
<a name="l1105"><span class="linenum">1105</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1106"><span class="linenum">1106</span></a>          }
<a name="l1107"><span class="linenum">1107</span></a>          if (<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('downloadfiles')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/downloadfiles.html">downloadfiles</a> != <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles']) {
<a name="l1108"><span class="linenum">1108</span></a>              <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('downloadfiles')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/downloadfiles.html">downloadfiles</a> = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'];
<a name="l1109"><span class="linenum">1109</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1110"><span class="linenum">1110</span></a>          }
<a name="l1111"><span class="linenum">1111</span></a>          if (<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('uploadfiles')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/uploadfiles.html">uploadfiles</a> != <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles']) {
<a name="l1112"><span class="linenum">1112</span></a>              <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('uploadfiles')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/uploadfiles.html">uploadfiles</a> = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'];
<a name="l1113"><span class="linenum">1113</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1114"><span class="linenum">1114</span></a>          }
<a name="l1115"><span class="linenum">1115</span></a>  <span class="comment">        //if shortname is not a PARAM_ALPHANUMEXT, fail (tested here for service update and creation)</span>
<a name="l1116"><span class="linenum">1116</span></a>          if (isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) and
<a name="l1117"><span class="linenum">1117</span></a>                  (<a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'], <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>) != <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'])) {
<a name="l1118"><span class="linenum">1118</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installserviceshortnameerror', 'webservice', '', <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']);
<a name="l1119"><span class="linenum">1119</span></a>          }
<a name="l1120"><span class="linenum">1120</span></a>          if (<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('shortname')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> != <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) {
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment">            //check that shortname is unique</span>
<a name="l1122"><span class="linenum">1122</span></a>              if (isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'])) { //we currently accepts multiple shortname == null
<a name="l1123"><span class="linenum">1123</span></a>                  <a class="var it37972" onMouseOver="hilite(37972)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('external_services',
<a name="l1124"><span class="linenum">1124</span></a>                          array('shortname' =&gt; <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']));
<a name="l1125"><span class="linenum">1125</span></a>                  if (!empty(<a class="var it37972" onMouseOver="hilite(37972)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a>)) {
<a name="l1126"><span class="linenum">1126</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installexistingserviceshortnameerror', 'webservice', '', <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']);
<a name="l1127"><span class="linenum">1127</span></a>                  }
<a name="l1128"><span class="linenum">1128</span></a>              }
<a name="l1129"><span class="linenum">1129</span></a>              <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('shortname')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'];
<a name="l1130"><span class="linenum">1130</span></a>              <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1131"><span class="linenum">1131</span></a>          }
<a name="l1132"><span class="linenum">1132</span></a>          if (<a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l1133"><span class="linenum">1133</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('external_services', <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>);
<a name="l1134"><span class="linenum">1134</span></a>          }
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>          <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('external_services_functions', array('externalserviceid'=&gt;<a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1137"><span class="linenum">1137</span></a>          foreach (<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> as <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1138"><span class="linenum">1138</span></a>              <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('functionname')" class="var it40435" onMouseOver="hilite(40435)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions']);
<a name="l1139"><span class="linenum">1139</span></a>              if (<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> === false) {
<a name="l1140"><span class="linenum">1140</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_functions', array('id'=&gt;<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('id')" class="var it40435" onMouseOver="hilite(40435)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1141"><span class="linenum">1141</span></a>              } else {
<a name="l1142"><span class="linenum">1142</span></a>                  unset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions'][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l1143"><span class="linenum">1143</span></a>              }
<a name="l1144"><span class="linenum">1144</span></a>          }
<a name="l1145"><span class="linenum">1145</span></a>          foreach (<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions'] as <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>) {
<a name="l1146"><span class="linenum">1146</span></a>              <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a> = new stdClass();
<a name="l1147"><span class="linenum">1147</span></a>              <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('externalserviceid')" class="var it41128" onMouseOver="hilite(41128)" onMouseOut="lolite()" href="../_variables/externalserviceid.html">externalserviceid</a> = <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1148"><span class="linenum">1148</span></a>              <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('functionname')" class="var it41128" onMouseOver="hilite(41128)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>      = <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>;
<a name="l1149"><span class="linenum">1149</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services_functions', <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>);
<a name="l1150"><span class="linenum">1150</span></a>          }
<a name="l1151"><span class="linenum">1151</span></a>          unset(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>);
<a name="l1152"><span class="linenum">1152</span></a>      }
<a name="l1153"><span class="linenum">1153</span></a>      foreach (<a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a> as <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> =&gt; <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>) {
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">        //check that shortname is unique</span>
<a name="l1155"><span class="linenum">1155</span></a>          if (isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'])) { //we currently accepts multiple shortname == null
<a name="l1156"><span class="linenum">1156</span></a>              <a class="var it37972" onMouseOver="hilite(37972)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('external_services',
<a name="l1157"><span class="linenum">1157</span></a>                      array('shortname' =&gt; <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']));
<a name="l1158"><span class="linenum">1158</span></a>              if (!empty(<a class="var it37972" onMouseOver="hilite(37972)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a>)) {
<a name="l1159"><span class="linenum">1159</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installserviceshortnameerror', 'webservice');
<a name="l1160"><span class="linenum">1160</span></a>              }
<a name="l1161"><span class="linenum">1161</span></a>          }
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a> = new stdClass();
<a name="l1164"><span class="linenum">1164</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/name.html">name</a>               = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l1165"><span class="linenum">1165</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('enabled')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>            = empty(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled']) ? 0 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled'];
<a name="l1166"><span class="linenum">1166</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('requiredcapability')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/requiredcapability.html">requiredcapability</a> = empty(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability']) ? null : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'];
<a name="l1167"><span class="linenum">1167</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('restrictedusers')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/restrictedusers.html">restrictedusers</a>    = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers']) ? 1 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'];
<a name="l1168"><span class="linenum">1168</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('downloadfiles')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/downloadfiles.html">downloadfiles</a>      = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles']) ? 0 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'];
<a name="l1169"><span class="linenum">1169</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('uploadfiles')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/uploadfiles.html">uploadfiles</a>        = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles']) ? 0 : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'];
<a name="l1170"><span class="linenum">1170</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('shortname')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>          = !isset(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) ? null : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'];
<a name="l1171"><span class="linenum">1171</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('component')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/component.html">component</a>          = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1172"><span class="linenum">1172</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('timecreated')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>        = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1173"><span class="linenum">1173</span></a>          <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services', <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>);
<a name="l1174"><span class="linenum">1174</span></a>          foreach (<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions'] as <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>) {
<a name="l1175"><span class="linenum">1175</span></a>              <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a> = new stdClass();
<a name="l1176"><span class="linenum">1176</span></a>              <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('externalserviceid')" class="var it41128" onMouseOver="hilite(41128)" onMouseOut="lolite()" href="../_variables/externalserviceid.html">externalserviceid</a> = <a class="var it37971" onMouseOver="hilite(37971)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it41127" onMouseOver="hilite(41127)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1177"><span class="linenum">1177</span></a>              <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('functionname')" class="var it41128" onMouseOver="hilite(41128)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>      = <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>;
<a name="l1178"><span class="linenum">1178</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services_functions', <a class="var it37973" onMouseOver="hilite(37973)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>);
<a name="l1179"><span class="linenum">1179</span></a>          }
<a name="l1180"><span class="linenum">1180</span></a>      }
<a name="l1181"><span class="linenum">1181</span></a>  }
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment">/**</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment"> * upgrade logging functions</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment"> */</span>
<a name="l1186"><span class="linenum">1186</span></a>  function <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = null) {
<a name="l1187"><span class="linenum">1187</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">    // rollback everything, we need to log all upgrade problems</span>
<a name="l1190"><span class="linenum">1190</span></a>      <a class="function" onClick="logFunction('abort_all_db_transactions')" href="../_functions/abort_all_db_transactions.html" onMouseOver="funcPopup(event,'abort_all_db_transactions')">abort_all_db_transactions</a>();
<a name="l1191"><span class="linenum">1191</span></a>  
<a name="l1192"><span class="linenum">1192</span></a>      <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('get_exception_info')" href="../_functions/get_exception_info.html" onMouseOver="funcPopup(event,'get_exception_info')">get_exception_info</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1193"><span class="linenum">1193</span></a>  
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment">    // First log upgrade error</span>
<a name="l1195"><span class="linenum">1195</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_ERROR')" href="../_constants/UPGRADE_LOG_ERROR.html" onMouseOver="constPopup(event,'UPGRADE_LOG_ERROR')">UPGRADE_LOG_ERROR</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Exception: ' . <a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>), <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('message')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../_variables/message.html">message</a>, <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('backtrace')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../_variables/backtrace.html">backtrace</a>);
<a name="l1196"><span class="linenum">1196</span></a>  
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment">    // Always turn on debugging - admins need to know what is going on</span>
<a name="l1198"><span class="linenum">1198</span></a>      <a class="function" onClick="logFunction('set_debugging')" href="../_functions/set_debugging.html" onMouseOver="funcPopup(event,'set_debugging')">set_debugging</a>(<a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>, true);
<a name="l1199"><span class="linenum">1199</span></a>  
<a name="l1200"><span class="linenum">1200</span></a>      <a class="function" onClick="logFunction('default_exception_handler')" href="../_functions/default_exception_handler.html" onMouseOver="funcPopup(event,'default_exception_handler')">default_exception_handler</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>, true, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1201"><span class="linenum">1201</span></a>  }
<a name="l1202"><span class="linenum">1202</span></a>  
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">/**</span>
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment"> * Adds log entry into upgrade_log table</span>
<a name="l1205"><span class="linenum">1205</span></a>  <span class="comment"> *</span>
<a name="l1206"><span class="linenum">1206</span></a>  <span class="comment"> * @param int $type UPGRADE_LOG_NORMAL, UPGRADE_LOG_NOTICE or UPGRADE_LOG_ERROR</span>
<a name="l1207"><span class="linenum">1207</span></a>  <span class="comment"> * @param string $plugin frankenstyle component name</span>
<a name="l1208"><span class="linenum">1208</span></a>  <span class="comment"> * @param string $info short description text of log entry</span>
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment"> * @param string $details long problem description</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment"> * @param string $backtrace string used for errors only</span>
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment"> * @return void</span>
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment"> */</span>
<a name="l1213"><span class="linenum">1213</span></a>  function <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>, <a class="var it1213" onMouseOver="hilite(1213)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>=null, <a class="var it5932" onMouseOver="hilite(5932)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>=null) {
<a name="l1214"><span class="linenum">1214</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1215"><span class="linenum">1215</span></a>  
<a name="l1216"><span class="linenum">1216</span></a>      if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>)) {
<a name="l1217"><span class="linenum">1217</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = 'core';
<a name="l1218"><span class="linenum">1218</span></a>      }
<a name="l1219"><span class="linenum">1219</span></a>  
<a name="l1220"><span class="linenum">1220</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a>, <a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>) = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1221"><span class="linenum">1221</span></a>      <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>) ? <a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> : <a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> . '_' . <a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>;
<a name="l1222"><span class="linenum">1222</span></a>  
<a name="l1223"><span class="linenum">1223</span></a>      <a class="var it5932" onMouseOver="hilite(5932)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a> = <a class="function" onClick="logFunction('format_backtrace')" href="../_functions/format_backtrace.html" onMouseOver="funcPopup(event,'format_backtrace')">format_backtrace</a>(<a class="var it5932" onMouseOver="hilite(5932)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>, true);
<a name="l1224"><span class="linenum">1224</span></a>  
<a name="l1225"><span class="linenum">1225</span></a>      <a class="var it1808" onMouseOver="hilite(1808)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = null;
<a name="l1226"><span class="linenum">1226</span></a>      <a class="var it37974" onMouseOver="hilite(37974)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a>  = null;
<a name="l1227"><span class="linenum">1227</span></a>  
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment">    //first try to find out current version number</span>
<a name="l1229"><span class="linenum">1229</span></a>      if (<a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> === 'core') {
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment">        //main</span>
<a name="l1231"><span class="linenum">1231</span></a>          <a class="var it1808" onMouseOver="hilite(1808)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>;
<a name="l1232"><span class="linenum">1232</span></a>  
<a name="l1233"><span class="linenum">1233</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> = null;
<a name="l1234"><span class="linenum">1234</span></a>          include(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/version.php&quot;);
<a name="l1235"><span class="linenum">1235</span></a>          <a class="var it37974" onMouseOver="hilite(37974)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a> = <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>;
<a name="l1236"><span class="linenum">1236</span></a>  
<a name="l1237"><span class="linenum">1237</span></a>      } else {
<a name="l1238"><span class="linenum">1238</span></a>          <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'version');
<a name="l1239"><span class="linenum">1239</span></a>          if (!empty(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>)) {
<a name="l1240"><span class="linenum">1240</span></a>              <a class="var it1808" onMouseOver="hilite(1808)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>;
<a name="l1241"><span class="linenum">1241</span></a>          }
<a name="l1242"><span class="linenum">1242</span></a>          <a class="var it2334" onMouseOver="hilite(2334)" onMouseOut="lolite()" onClick="logVariable('cd')" href="../_variables/cd.html">$cd</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1243"><span class="linenum">1243</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it2334" onMouseOver="hilite(2334)" onMouseOut="lolite()" onClick="logVariable('cd')" href="../_variables/cd.html">$cd</a>/version.php&quot;)) {
<a name="l1244"><span class="linenum">1244</span></a>              <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l1245"><span class="linenum">1245</span></a>              <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l1246"><span class="linenum">1246</span></a>              <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l1247"><span class="linenum">1247</span></a>              include(&quot;<a class="var it2334" onMouseOver="hilite(2334)" onMouseOut="lolite()" onClick="logVariable('cd')" href="../_variables/cd.html">$cd</a>/version.php&quot;);
<a name="l1248"><span class="linenum">1248</span></a>              <a class="var it37974" onMouseOver="hilite(37974)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a> = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it39450" onMouseOver="hilite(39450)" onMouseOut="lolite()" href="../_variables/version.html">version</a>;
<a name="l1249"><span class="linenum">1249</span></a>          }
<a name="l1250"><span class="linenum">1250</span></a>      }
<a name="l1251"><span class="linenum">1251</span></a>  
<a name="l1252"><span class="linenum">1252</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a> = new stdClass();
<a name="l1253"><span class="linenum">1253</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('type')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/type.html">type</a>          = <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1254"><span class="linenum">1254</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('plugin')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>        = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1255"><span class="linenum">1255</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('version')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/version.html">version</a>       = <a class="var it1808" onMouseOver="hilite(1808)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a>;
<a name="l1256"><span class="linenum">1256</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('targetversion')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/targetversion.html">targetversion</a> = <a class="var it37974" onMouseOver="hilite(37974)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a>;
<a name="l1257"><span class="linenum">1257</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/info.html">info</a>          = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>;
<a name="l1258"><span class="linenum">1258</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('details')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/details.html">details</a>       = <a class="var it1213" onMouseOver="hilite(1213)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>;
<a name="l1259"><span class="linenum">1259</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('backtrace')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/backtrace.html">backtrace</a>     = <a class="var it5932" onMouseOver="hilite(5932)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>;
<a name="l1260"><span class="linenum">1260</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>        = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1261"><span class="linenum">1261</span></a>      <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39682" onMouseOver="hilite(39682)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1262"><span class="linenum">1262</span></a>      try {
<a name="l1263"><span class="linenum">1263</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('upgrade_log', <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>);
<a name="l1264"><span class="linenum">1264</span></a>      } catch (Exception <a class="var it7277" onMouseOver="hilite(7277)" onMouseOut="lolite()" onClick="logVariable('ignored')" href="../_variables/ignored.html">$ignored</a>) {
<a name="l1265"><span class="linenum">1265</span></a>  <span class="comment">        // possible during install or 2.0 upgrade</span>
<a name="l1266"><span class="linenum">1266</span></a>      }
<a name="l1267"><span class="linenum">1267</span></a>  }
<a name="l1268"><span class="linenum">1268</span></a>  
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">/**</span>
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment"> * Marks start of upgrade, blocks any other access to site.</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment"> * The upgrade is finished at the end of script or after timeout.</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment"> *</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment"> * @global object</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment"> * @global object</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment"> * @global object</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment"> */</span>
<a name="l1277"><span class="linenum">1277</span></a>  function <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>(<a class="var it37975" onMouseOver="hilite(37975)" onMouseOut="lolite()" onClick="logVariable('preinstall')" href="../_variables/preinstall.html">$preinstall</a>=false) {
<a name="l1278"><span class="linenum">1278</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1279"><span class="linenum">1279</span></a>  
<a name="l1280"><span class="linenum">1280</span></a>      static <a class="var it5763" onMouseOver="hilite(5763)" onMouseOut="lolite()" onClick="logVariable('started')" href="../_variables/started.html">$started</a> = false;
<a name="l1281"><span class="linenum">1281</span></a>  
<a name="l1282"><span class="linenum">1282</span></a>      if (<a class="var it37975" onMouseOver="hilite(37975)" onMouseOut="lolite()" onClick="logVariable('preinstall')" href="../_variables/preinstall.html">$preinstall</a>) {
<a name="l1283"><span class="linenum">1283</span></a>          <a class="phpfunction" onClick="logFunction('ignore_user_abort')" href="../_functions/ignore_user_abort.html" onMouseOver="phpfuncPopup(event,'ignore_user_abort')">ignore_user_abort</a>(true);
<a name="l1284"><span class="linenum">1284</span></a>          <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(true);
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>      } else if (<a class="var it5763" onMouseOver="hilite(5763)" onMouseOut="lolite()" onClick="logVariable('started')" href="../_variables/started.html">$started</a>) {
<a name="l1287"><span class="linenum">1287</span></a>          <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>(120);
<a name="l1288"><span class="linenum">1288</span></a>  
<a name="l1289"><span class="linenum">1289</span></a>      } else {
<a name="l1290"><span class="linenum">1290</span></a>          if (!<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a> and !<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('headerprinted')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/headerprinted.html">headerprinted</a>) {
<a name="l1291"><span class="linenum">1291</span></a>              <a class="var it37976" onMouseOver="hilite(37976)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>  = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('upgradingversion', 'admin');
<a name="l1292"><span class="linenum">1292</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('maintenance');
<a name="l1293"><span class="linenum">1293</span></a>              <a class="function" onClick="logFunction('upgrade_init_javascript')" href="../_functions/upgrade_init_javascript.html" onMouseOver="funcPopup(event,'upgrade_init_javascript')">upgrade_init_javascript</a>();
<a name="l1294"><span class="linenum">1294</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it37976" onMouseOver="hilite(37976)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>.' - Moodle '.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a>);
<a name="l1295"><span class="linenum">1295</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it37976" onMouseOver="hilite(37976)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>);
<a name="l1296"><span class="linenum">1296</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it37976" onMouseOver="hilite(37976)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>);
<a name="l1297"><span class="linenum">1297</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l1298"><span class="linenum">1298</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1299"><span class="linenum">1299</span></a>          }
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>          <a class="phpfunction" onClick="logFunction('ignore_user_abort')" href="../_functions/ignore_user_abort.html" onMouseOver="phpfuncPopup(event,'ignore_user_abort')">ignore_user_abort</a>(true);
<a name="l1302"><span class="linenum">1302</span></a>          <a class="class" onClick="logClass('core_shutdown_manager')" href="../_classes/core_shutdown_manager.html" onMouseOver="classPopup(event,'core_shutdown_manager')">core_shutdown_manager</a>::<a class="function" onClick="logFunction('register_function')" href="../_functions/register_function.html" onMouseOver="funcPopup(event,'register_function')">register_function</a>('upgrade_finished_handler');
<a name="l1303"><span class="linenum">1303</span></a>          <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(true);
<a name="l1304"><span class="linenum">1304</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('upgraderunning', <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()+300);
<a name="l1305"><span class="linenum">1305</span></a>          <a class="var it5763" onMouseOver="hilite(5763)" onMouseOut="lolite()" onClick="logVariable('started')" href="../_variables/started.html">$started</a> = true;
<a name="l1306"><span class="linenum">1306</span></a>      }
<a name="l1307"><span class="linenum">1307</span></a>  }
<a name="l1308"><span class="linenum">1308</span></a>  
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment">/**</span>
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment"> * Internal function - executed if upgrade interrupted.</span>
<a name="l1311"><span class="linenum">1311</span></a>  <span class="comment"> */</span>
<a name="l1312"><span class="linenum">1312</span></a>  function <a class="function" onClick="logFunction('upgrade_finished_handler')" href="../_functions/upgrade_finished_handler.html" onMouseOver="funcPopup(event,'upgrade_finished_handler')">upgrade_finished_handler</a>() {
<a name="l1313"><span class="linenum">1313</span></a>      <a class="function" onClick="logFunction('upgrade_finished')" href="../_functions/upgrade_finished.html" onMouseOver="funcPopup(event,'upgrade_finished')">upgrade_finished</a>();
<a name="l1314"><span class="linenum">1314</span></a>  }
<a name="l1315"><span class="linenum">1315</span></a>  
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment">/**</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment"> * Indicates upgrade is finished.</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment"> *</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment"> * This function may be called repeatedly.</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment"> *</span>
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment"> * @global object</span>
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment"> * @global object</span>
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment"> */</span>
<a name="l1324"><span class="linenum">1324</span></a>  function <a class="function" onClick="logFunction('upgrade_finished')" href="../_functions/upgrade_finished.html" onMouseOver="funcPopup(event,'upgrade_finished')">upgrade_finished</a>(<a class="var it7243" onMouseOver="hilite(7243)" onMouseOut="lolite()" onClick="logVariable('continueurl')" href="../_variables/continueurl.html">$continueurl</a>=null) {
<a name="l1325"><span class="linenum">1325</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>)) {
<a name="l1328"><span class="linenum">1328</span></a>          <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('upgraderunning');
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment">        // We have to forcefully purge the caches using the writer here.</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment">        // This has to be done after we unset the config var. If someone hits the site while this is set they will</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment">        // cause the config values to propogate to the caches.</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">        // Caches are purged after the last step in an upgrade but there is several code routines that exceute between</span>
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">        // then and now that leaving a window for things to fall out of sync.</span>
<a name="l1334"><span class="linenum">1334</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1335"><span class="linenum">1335</span></a>          <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(false);
<a name="l1336"><span class="linenum">1336</span></a>          <a class="phpfunction" onClick="logFunction('ignore_user_abort')" href="../_functions/ignore_user_abort.html" onMouseOver="phpfuncPopup(event,'ignore_user_abort')">ignore_user_abort</a>(false);
<a name="l1337"><span class="linenum">1337</span></a>          if (<a class="var it7243" onMouseOver="hilite(7243)" onMouseOut="lolite()" onClick="logVariable('continueurl')" href="../_variables/continueurl.html">$continueurl</a>) {
<a name="l1338"><span class="linenum">1338</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('continue_button')" href="../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(<a class="var it7243" onMouseOver="hilite(7243)" onMouseOut="lolite()" onClick="logVariable('continueurl')" href="../_variables/continueurl.html">$continueurl</a>);
<a name="l1339"><span class="linenum">1339</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1340"><span class="linenum">1340</span></a>              die;
<a name="l1341"><span class="linenum">1341</span></a>          }
<a name="l1342"><span class="linenum">1342</span></a>      }
<a name="l1343"><span class="linenum">1343</span></a>  }
<a name="l1344"><span class="linenum">1344</span></a>  
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment">/**</span>
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment"> * @global object</span>
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment"> * @global object</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment"> */</span>
<a name="l1349"><span class="linenum">1349</span></a>  function <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(<a class="var it37977" onMouseOver="hilite(37977)" onMouseOut="lolite()" onClick="logVariable('starting')" href="../_variables/starting.html">$starting</a>) {
<a name="l1350"><span class="linenum">1350</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1351"><span class="linenum">1351</span></a>  
<a name="l1352"><span class="linenum">1352</span></a>      static <a class="var it37978" onMouseOver="hilite(37978)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a> = null;
<a name="l1353"><span class="linenum">1353</span></a>  
<a name="l1354"><span class="linenum">1354</span></a>      if (<a class="var it37977" onMouseOver="hilite(37977)" onMouseOut="lolite()" onClick="logVariable('starting')" href="../_variables/starting.html">$starting</a>) {
<a name="l1355"><span class="linenum">1355</span></a>          if (<a class="var it37978" onMouseOver="hilite(37978)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a> === null) {
<a name="l1356"><span class="linenum">1356</span></a>              <a class="var it37978" onMouseOver="hilite(37978)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_debug')" href="../_functions/get_debug.html" onMouseOver="funcPopup(event,'get_debug')">get_debug</a>();
<a name="l1357"><span class="linenum">1357</span></a>          }
<a name="l1358"><span class="linenum">1358</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgradeshowsql')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/upgradeshowsql.html">upgradeshowsql</a>)) {
<a name="l1359"><span class="linenum">1359</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_debug')" href="../_functions/set_debug.html" onMouseOver="funcPopup(event,'set_debug')">set_debug</a>(true);
<a name="l1360"><span class="linenum">1360</span></a>          }
<a name="l1361"><span class="linenum">1361</span></a>      } else {
<a name="l1362"><span class="linenum">1362</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_debug')" href="../_functions/set_debug.html" onMouseOver="funcPopup(event,'set_debug')">set_debug</a>(<a class="var it37978" onMouseOver="hilite(37978)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a>);
<a name="l1363"><span class="linenum">1363</span></a>      }
<a name="l1364"><span class="linenum">1364</span></a>  }
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>  function <a class="function" onClick="logFunction('print_upgrade_separator')" href="../_functions/print_upgrade_separator.html" onMouseOver="funcPopup(event,'print_upgrade_separator')">print_upgrade_separator</a>() {
<a name="l1367"><span class="linenum">1367</span></a>      if (!<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l1368"><span class="linenum">1368</span></a>          echo '&lt;hr /&gt;';
<a name="l1369"><span class="linenum">1369</span></a>      }
<a name="l1370"><span class="linenum">1370</span></a>  }
<a name="l1371"><span class="linenum">1371</span></a>  
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">/**</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment"> * Default start upgrade callback</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment"> * @param string $plugin</span>
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment"> * @param bool $installation true if installation, false means upgrade</span>
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment"> */</span>
<a name="l1377"><span class="linenum">1377</span></a>  function <a class="function" onClick="logFunction('print_upgrade_part_start')" href="../_functions/print_upgrade_part_start.html" onMouseOver="funcPopup(event,'print_upgrade_part_start')">print_upgrade_part_start</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it37980" onMouseOver="hilite(37980)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1378"><span class="linenum">1378</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1379"><span class="linenum">1379</span></a>      if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1380"><span class="linenum">1380</span></a>          <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>(<a class="var it37980" onMouseOver="hilite(37980)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>); <span class="comment">// does not store upgrade running flag yet</span>
<a name="l1381"><span class="linenum">1381</span></a>          if (<a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1382"><span class="linenum">1382</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coresystem'));
<a name="l1383"><span class="linenum">1383</span></a>          }
<a name="l1384"><span class="linenum">1384</span></a>      } else {
<a name="l1385"><span class="linenum">1385</span></a>          <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>();
<a name="l1386"><span class="linenum">1386</span></a>          if (<a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1387"><span class="linenum">1387</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1388"><span class="linenum">1388</span></a>          }
<a name="l1389"><span class="linenum">1389</span></a>      }
<a name="l1390"><span class="linenum">1390</span></a>      if (<a class="var it37980" onMouseOver="hilite(37980)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>) {
<a name="l1391"><span class="linenum">1391</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment">            // no need to log - log table not yet there ;-)</span>
<a name="l1393"><span class="linenum">1393</span></a>          } else {
<a name="l1394"><span class="linenum">1394</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Starting plugin installation');
<a name="l1395"><span class="linenum">1395</span></a>          }
<a name="l1396"><span class="linenum">1396</span></a>      } else {
<a name="l1397"><span class="linenum">1397</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1398"><span class="linenum">1398</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Starting core upgrade');
<a name="l1399"><span class="linenum">1399</span></a>          } else {
<a name="l1400"><span class="linenum">1400</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Starting plugin upgrade');
<a name="l1401"><span class="linenum">1401</span></a>          }
<a name="l1402"><span class="linenum">1402</span></a>      }
<a name="l1403"><span class="linenum">1403</span></a>  }
<a name="l1404"><span class="linenum">1404</span></a>  
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">/**</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment"> * Default end upgrade callback</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment"> * @param string $plugin</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment"> * @param bool $installation true if installation, false means upgrade</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment"> */</span>
<a name="l1410"><span class="linenum">1410</span></a>  function <a class="function" onClick="logFunction('print_upgrade_part_end')" href="../_functions/print_upgrade_part_end.html" onMouseOver="funcPopup(event,'print_upgrade_part_end')">print_upgrade_part_end</a>(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it37980" onMouseOver="hilite(37980)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1411"><span class="linenum">1411</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1412"><span class="linenum">1412</span></a>      <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>();
<a name="l1413"><span class="linenum">1413</span></a>      if (<a class="var it37980" onMouseOver="hilite(37980)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>) {
<a name="l1414"><span class="linenum">1414</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1415"><span class="linenum">1415</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Core installed');
<a name="l1416"><span class="linenum">1416</span></a>          } else {
<a name="l1417"><span class="linenum">1417</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Plugin installed');
<a name="l1418"><span class="linenum">1418</span></a>          }
<a name="l1419"><span class="linenum">1419</span></a>      } else {
<a name="l1420"><span class="linenum">1420</span></a>          if (empty(<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1421"><span class="linenum">1421</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Core upgraded');
<a name="l1422"><span class="linenum">1422</span></a>          } else {
<a name="l1423"><span class="linenum">1423</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Plugin upgraded');
<a name="l1424"><span class="linenum">1424</span></a>          }
<a name="l1425"><span class="linenum">1425</span></a>      }
<a name="l1426"><span class="linenum">1426</span></a>      if (<a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1427"><span class="linenum">1427</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('success'), 'notifysuccess');
<a name="l1428"><span class="linenum">1428</span></a>          <a class="function" onClick="logFunction('print_upgrade_separator')" href="../_functions/print_upgrade_separator.html" onMouseOver="funcPopup(event,'print_upgrade_separator')">print_upgrade_separator</a>();
<a name="l1429"><span class="linenum">1429</span></a>      }
<a name="l1430"><span class="linenum">1430</span></a>  }
<a name="l1431"><span class="linenum">1431</span></a>  
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">/**</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment"> * Sets up JS code required for all upgrade scripts.</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment"> * @global object</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment"> */</span>
<a name="l1436"><span class="linenum">1436</span></a>  function <a class="function" onClick="logFunction('upgrade_init_javascript')" href="../_functions/upgrade_init_javascript.html" onMouseOver="funcPopup(event,'upgrade_init_javascript')">upgrade_init_javascript</a>() {
<a name="l1437"><span class="linenum">1437</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1438"><span class="linenum">1438</span></a>  <span class="comment">    // scroll to the end of each upgrade page so that ppl see either error or continue button,</span>
<a name="l1439"><span class="linenum">1439</span></a>  <span class="comment">    // no need to scroll continuously any more, it is enough to jump to end once the footer is printed ;-)</span>
<a name="l1440"><span class="linenum">1440</span></a>      <a class="var it1159" onMouseOver="hilite(1159)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a> = &quot;window.scrollTo(0, 5000000);&quot;;
<a name="l1441"><span class="linenum">1441</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_code')" href="../_functions/js_init_code.html" onMouseOver="funcPopup(event,'js_init_code')">js_init_code</a>(<a class="var it1159" onMouseOver="hilite(1159)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a>);
<a name="l1442"><span class="linenum">1442</span></a>  }
<a name="l1443"><span class="linenum">1443</span></a>  
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">/**</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment"> * Try to upgrade the given language pack (or current language)</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> *</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment"> * @param string $lang the code of the language to update, defaults to the current language</span>
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment"> */</span>
<a name="l1449"><span class="linenum">1449</span></a>  function <a class="function" onClick="logFunction('upgrade_language_pack')" href="../_functions/upgrade_language_pack.html" onMouseOver="funcPopup(event,'upgrade_language_pack')">upgrade_language_pack</a>(<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a> = null) {
<a name="l1450"><span class="linenum">1450</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1451"><span class="linenum">1451</span></a>  
<a name="l1452"><span class="linenum">1452</span></a>      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('skiplangupgrade')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/skiplangupgrade.html">skiplangupgrade</a>)) {
<a name="l1453"><span class="linenum">1453</span></a>          return;
<a name="l1454"><span class="linenum">1454</span></a>      }
<a name="l1455"><span class="linenum">1455</span></a>  
<a name="l1456"><span class="linenum">1456</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/tool/langimport/lib.php&quot;)) {
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">        // weird, somebody uninstalled the import utility</span>
<a name="l1458"><span class="linenum">1458</span></a>          return;
<a name="l1459"><span class="linenum">1459</span></a>      }
<a name="l1460"><span class="linenum">1460</span></a>  
<a name="l1461"><span class="linenum">1461</span></a>      if (!<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a>) {
<a name="l1462"><span class="linenum">1462</span></a>          <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a> = <a class="function" onClick="logFunction('current_language')" href="../_functions/current_language.html" onMouseOver="funcPopup(event,'current_language')">current_language</a>();
<a name="l1463"><span class="linenum">1463</span></a>      }
<a name="l1464"><span class="linenum">1464</span></a>  
<a name="l1465"><span class="linenum">1465</span></a>      if (!<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('translation_exists')" href="../_functions/translation_exists.html" onMouseOver="funcPopup(event,'translation_exists')">translation_exists</a>(<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a>)) {
<a name="l1466"><span class="linenum">1466</span></a>          return;
<a name="l1467"><span class="linenum">1467</span></a>      }
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>      <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l1470"><span class="linenum">1470</span></a>  
<a name="l1471"><span class="linenum">1471</span></a>      if (<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a> === 'en') {
<a name="l1472"><span class="linenum">1472</span></a>          return;  <span class="comment">// Nothing to do</span>
<a name="l1473"><span class="linenum">1473</span></a>      }
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>      <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>(false);
<a name="l1476"><span class="linenum">1476</span></a>  
<a name="l1477"><span class="linenum">1477</span></a>      require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/tool/langimport/lib.php&quot;);
<a name="l1478"><span class="linenum">1478</span></a>      <a class="function" onClick="logFunction('tool_langimport_preupgrade_update')" href="../_functions/tool_langimport_preupgrade_update.html" onMouseOver="funcPopup(event,'tool_langimport_preupgrade_update')">tool_langimport_preupgrade_update</a>(<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a>);
<a name="l1479"><span class="linenum">1479</span></a>  
<a name="l1480"><span class="linenum">1480</span></a>      <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l1481"><span class="linenum">1481</span></a>  
<a name="l1482"><span class="linenum">1482</span></a>      <a class="function" onClick="logFunction('print_upgrade_separator')" href="../_functions/print_upgrade_separator.html" onMouseOver="funcPopup(event,'print_upgrade_separator')">print_upgrade_separator</a>();
<a name="l1483"><span class="linenum">1483</span></a>  }
<a name="l1484"><span class="linenum">1484</span></a>  
<a name="l1485"><span class="linenum">1485</span></a>  <span class="comment">/**</span>
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment"> * Install core moodle tables and initialize</span>
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment"> * @param float $version target version</span>
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment"> * @param bool $verbose</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment"> * @return void, may throw exception</span>
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment"> */</span>
<a name="l1491"><span class="linenum">1491</span></a>  function <a class="function" onClick="logFunction('install_core')" href="../_functions/install_core.html" onMouseOver="funcPopup(event,'install_core')">install_core</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1492"><span class="linenum">1492</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1493"><span class="linenum">1493</span></a>  
<a name="l1494"><span class="linenum">1494</span></a>  <span class="comment">    // We can not call purge_all_caches() yet, make sure the temp and cache dirs exist and are empty.</span>
<a name="l1495"><span class="linenum">1495</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('cachedir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/cachedir.html">cachedir</a>.'', true);
<a name="l1496"><span class="linenum">1496</span></a>      <a class="function" onClick="logFunction('make_cache_directory')" href="../_functions/make_cache_directory.html" onMouseOver="funcPopup(event,'make_cache_directory')">make_cache_directory</a>('', true);
<a name="l1497"><span class="linenum">1497</span></a>  
<a name="l1498"><span class="linenum">1498</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('localcachedir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/localcachedir.html">localcachedir</a>.'', true);
<a name="l1499"><span class="linenum">1499</span></a>      <a class="function" onClick="logFunction('make_localcache_directory')" href="../_functions/make_localcache_directory.html" onMouseOver="funcPopup(event,'make_localcache_directory')">make_localcache_directory</a>('', true);
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/tempdir.html">tempdir</a>.'', true);
<a name="l1502"><span class="linenum">1502</span></a>      <a class="function" onClick="logFunction('make_temp_directory')" href="../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>('', true);
<a name="l1503"><span class="linenum">1503</span></a>  
<a name="l1504"><span class="linenum">1504</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dataroot.html">dataroot</a>.'/muc', true);
<a name="l1505"><span class="linenum">1505</span></a>      <a class="function" onClick="logFunction('make_writable_directory')" href="../_functions/make_writable_directory.html" onMouseOver="funcPopup(event,'make_writable_directory')">make_writable_directory</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dataroot.html">dataroot</a>.'/muc', true);
<a name="l1506"><span class="linenum">1506</span></a>  
<a name="l1507"><span class="linenum">1507</span></a>      try {
<a name="l1508"><span class="linenum">1508</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(600);
<a name="l1509"><span class="linenum">1509</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_start')" href="../_functions/print_upgrade_part_start.html" onMouseOver="funcPopup(event,'print_upgrade_part_start')">print_upgrade_part_start</a>('moodle', true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>); <span class="comment">// does not store upgrade running flag</span>
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/db/install.xml&quot;);
<a name="l1512"><span class="linenum">1512</span></a>          <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>();     <span class="comment">// we want the flag to be stored in config table ;-)</span>
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment">        // set all core default records and default settings</span>
<a name="l1515"><span class="linenum">1515</span></a>          require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/db/install.php&quot;);
<a name="l1516"><span class="linenum">1516</span></a>          <a class="function" onClick="logFunction('xmldb_main_install')" href="../_functions/xmldb_main_install.html" onMouseOver="funcPopup(event,'xmldb_main_install')">xmldb_main_install</a>(); <span class="comment">// installs the capabilities too</span>
<a name="l1517"><span class="linenum">1517</span></a>  
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">        // store version</span>
<a name="l1519"><span class="linenum">1519</span></a>          <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>(true, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, false);
<a name="l1520"><span class="linenum">1520</span></a>  
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">        // Continue with the installation</span>
<a name="l1522"><span class="linenum">1522</span></a>          <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>('moodle');
<a name="l1523"><span class="linenum">1523</span></a>          <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>('moodle');
<a name="l1524"><span class="linenum">1524</span></a>          <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>('moodle');
<a name="l1525"><span class="linenum">1525</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>('moodle');
<a name="l1526"><span class="linenum">1526</span></a>          <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>('moodle');
<a name="l1527"><span class="linenum">1527</span></a>          \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>('moodle');
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">        // Write default settings unconditionally</span>
<a name="l1530"><span class="linenum">1530</span></a>          <a class="function" onClick="logFunction('admin_apply_default_settings')" href="../_functions/admin_apply_default_settings.html" onMouseOver="funcPopup(event,'admin_apply_default_settings')">admin_apply_default_settings</a>(NULL, true);
<a name="l1531"><span class="linenum">1531</span></a>  
<a name="l1532"><span class="linenum">1532</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_end')" href="../_functions/print_upgrade_part_end.html" onMouseOver="funcPopup(event,'print_upgrade_part_end')">print_upgrade_part_end</a>(null, true, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment">        // Purge all caches. They're disabled but this ensures that we don't have any persistent data just in case something</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">        // during installation didn't use APIs.</span>
<a name="l1536"><span class="linenum">1536</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>();
<a name="l1537"><span class="linenum">1537</span></a>      } catch (exception <a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1538"><span class="linenum">1538</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1539"><span class="linenum">1539</span></a>      }
<a name="l1540"><span class="linenum">1540</span></a>  }
<a name="l1541"><span class="linenum">1541</span></a>  
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment">/**</span>
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment"> * Upgrade moodle core</span>
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment"> * @param float $version target version</span>
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment"> * @param bool $verbose</span>
<a name="l1546"><span class="linenum">1546</span></a>  <span class="comment"> * @return void, may throw exception</span>
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment"> */</span>
<a name="l1548"><span class="linenum">1548</span></a>  function <a class="function" onClick="logFunction('upgrade_core')" href="../_functions/upgrade_core.html" onMouseOver="funcPopup(event,'upgrade_core')">upgrade_core</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1549"><span class="linenum">1549</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>;
<a name="l1550"><span class="linenum">1550</span></a>  
<a name="l1551"><span class="linenum">1551</span></a>      <a class="function" onClick="logFunction('raise_memory_limit')" href="../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/db/upgrade.php');    <span class="comment">// Defines upgrades</span>
<a name="l1554"><span class="linenum">1554</span></a>  
<a name="l1555"><span class="linenum">1555</span></a>      try {
<a name="l1556"><span class="linenum">1556</span></a>  <span class="comment">        // Reset caches before any output.</span>
<a name="l1557"><span class="linenum">1557</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1558"><span class="linenum">1558</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">        // Upgrade current language pack if we can</span>
<a name="l1561"><span class="linenum">1561</span></a>          <a class="function" onClick="logFunction('upgrade_language_pack')" href="../_functions/upgrade_language_pack.html" onMouseOver="funcPopup(event,'upgrade_language_pack')">upgrade_language_pack</a>();
<a name="l1562"><span class="linenum">1562</span></a>  
<a name="l1563"><span class="linenum">1563</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_start')" href="../_functions/print_upgrade_part_start.html" onMouseOver="funcPopup(event,'print_upgrade_part_start')">print_upgrade_part_start</a>('moodle', false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment">        // Pre-upgrade scripts for local hack workarounds.</span>
<a name="l1566"><span class="linenum">1566</span></a>          <a class="var it37981" onMouseOver="hilite(37981)" onMouseOut="lolite()" onClick="logVariable('preupgradefile')" href="../_variables/preupgradefile.html">$preupgradefile</a> = &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/local/preupgrade.php&quot;;
<a name="l1567"><span class="linenum">1567</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it37981" onMouseOver="hilite(37981)" onMouseOut="lolite()" onClick="logVariable('preupgradefile')" href="../_variables/preupgradefile.html">$preupgradefile</a>)) {
<a name="l1568"><span class="linenum">1568</span></a>              <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l1569"><span class="linenum">1569</span></a>              <a class="function" onClick="logFunction('require')" href="../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(<a class="var it37981" onMouseOver="hilite(37981)" onMouseOut="lolite()" onClick="logVariable('preupgradefile')" href="../_variables/preupgradefile.html">$preupgradefile</a>);
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment">            // Reset upgrade timeout to default.</span>
<a name="l1571"><span class="linenum">1571</span></a>              <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l1572"><span class="linenum">1572</span></a>          }
<a name="l1573"><span class="linenum">1573</span></a>  
<a name="l1574"><span class="linenum">1574</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('xmldb_main_upgrade')" href="../_functions/xmldb_main_upgrade.html" onMouseOver="funcPopup(event,'xmldb_main_upgrade')">xmldb_main_upgrade</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l1575"><span class="linenum">1575</span></a>          if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> &gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment">            // store version if not already there</span>
<a name="l1577"><span class="linenum">1577</span></a>              <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, false);
<a name="l1578"><span class="linenum">1578</span></a>          }
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">        // In case structure of 'course' table has been changed and we forgot to update $SITE, re-read it from db.</span>
<a name="l1581"><span class="linenum">1581</span></a>          <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1582"><span class="linenum">1582</span></a>          <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1583"><span class="linenum">1583</span></a>  
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">        // perform all other component upgrade routines</span>
<a name="l1585"><span class="linenum">1585</span></a>          <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>('moodle');
<a name="l1586"><span class="linenum">1586</span></a>          <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>('moodle');
<a name="l1587"><span class="linenum">1587</span></a>          <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>('moodle');
<a name="l1588"><span class="linenum">1588</span></a>          <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>('moodle');
<a name="l1589"><span class="linenum">1589</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>('moodle');
<a name="l1590"><span class="linenum">1590</span></a>          <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>('moodle');
<a name="l1591"><span class="linenum">1591</span></a>          \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>('moodle');
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">        // Update core definitions.</span>
<a name="l1593"><span class="linenum">1593</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('update_definitions')" href="../_functions/update_definitions.html" onMouseOver="funcPopup(event,'update_definitions')">update_definitions</a>(true);
<a name="l1594"><span class="linenum">1594</span></a>  
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment">        // Purge caches again, just to be sure we arn't holding onto old stuff now.</span>
<a name="l1596"><span class="linenum">1596</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1597"><span class="linenum">1597</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1598"><span class="linenum">1598</span></a>  
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment">        // Clean up contexts - more and more stuff depends on existence of paths and contexts</span>
<a name="l1600"><span class="linenum">1600</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('cleanup_instances')" href="../_functions/cleanup_instances.html" onMouseOver="funcPopup(event,'cleanup_instances')">cleanup_instances</a>();
<a name="l1601"><span class="linenum">1601</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('create_instances')" href="../_functions/create_instances.html" onMouseOver="funcPopup(event,'create_instances')">create_instances</a>(null, false);
<a name="l1602"><span class="linenum">1602</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('build_all_paths')" href="../_functions/build_all_paths.html" onMouseOver="funcPopup(event,'build_all_paths')">build_all_paths</a>(false);
<a name="l1603"><span class="linenum">1603</span></a>          <a class="var it1172" onMouseOver="hilite(1172)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1604"><span class="linenum">1604</span></a>          <a class="var it1172" onMouseOver="hilite(1172)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a>-&gt;<a class="function" onClick="logFunction('mark_dirty')" href="../_functions/mark_dirty.html" onMouseOver="funcPopup(event,'mark_dirty')">mark_dirty</a>();
<a name="l1605"><span class="linenum">1605</span></a>  
<a name="l1606"><span class="linenum">1606</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_end')" href="../_functions/print_upgrade_part_end.html" onMouseOver="funcPopup(event,'print_upgrade_part_end')">print_upgrade_part_end</a>('moodle', false, <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1607"><span class="linenum">1607</span></a>      } catch (Exception <a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1608"><span class="linenum">1608</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1609"><span class="linenum">1609</span></a>      }
<a name="l1610"><span class="linenum">1610</span></a>  }
<a name="l1611"><span class="linenum">1611</span></a>  
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">/**</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment"> * Upgrade/install other parts of moodle</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment"> * @param bool $verbose</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment"> * @return void, may throw exception</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment"> */</span>
<a name="l1617"><span class="linenum">1617</span></a>  function <a class="function" onClick="logFunction('upgrade_noncore')" href="../_functions/upgrade_noncore.html" onMouseOver="funcPopup(event,'upgrade_noncore')">upgrade_noncore</a>(<a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1618"><span class="linenum">1618</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1619"><span class="linenum">1619</span></a>  
<a name="l1620"><span class="linenum">1620</span></a>      <a class="function" onClick="logFunction('raise_memory_limit')" href="../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l1621"><span class="linenum">1621</span></a>  
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">    // upgrade all plugins types</span>
<a name="l1623"><span class="linenum">1623</span></a>      try {
<a name="l1624"><span class="linenum">1624</span></a>  <span class="comment">        // Reset caches before any output.</span>
<a name="l1625"><span class="linenum">1625</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1626"><span class="linenum">1626</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1627"><span class="linenum">1627</span></a>  
<a name="l1628"><span class="linenum">1628</span></a>          <a class="var it15535" onMouseOver="hilite(15535)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l1629"><span class="linenum">1629</span></a>          foreach (<a class="var it15535" onMouseOver="hilite(15535)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> as <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=&gt;<a class="var it1311" onMouseOver="hilite(1311)" onMouseOut="lolite()" onClick="logVariable('location')" href="../_variables/location.html">$location</a>) {
<a name="l1630"><span class="linenum">1630</span></a>              <a class="function" onClick="logFunction('upgrade_plugins')" href="../_functions/upgrade_plugins.html" onMouseOver="funcPopup(event,'upgrade_plugins')">upgrade_plugins</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, 'print_upgrade_part_start', 'print_upgrade_part_end', <a class="var it14981" onMouseOver="hilite(14981)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1631"><span class="linenum">1631</span></a>          }
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment">        // Update cache definitions. Involves scanning each plugin for any changes.</span>
<a name="l1633"><span class="linenum">1633</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('update_definitions')" href="../_functions/update_definitions.html" onMouseOver="funcPopup(event,'update_definitions')">update_definitions</a>();
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">        // Mark the site as upgraded.</span>
<a name="l1635"><span class="linenum">1635</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('allversionshash', <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_all_versions_hash')" href="../_functions/get_all_versions_hash.html" onMouseOver="funcPopup(event,'get_all_versions_hash')">get_all_versions_hash</a>());
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">        // Purge caches again, just to be sure we arn't holding onto old stuff now.</span>
<a name="l1638"><span class="linenum">1638</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1639"><span class="linenum">1639</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>      } catch (Exception <a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1642"><span class="linenum">1642</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it2200" onMouseOver="hilite(2200)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1643"><span class="linenum">1643</span></a>      }
<a name="l1644"><span class="linenum">1644</span></a>  }
<a name="l1645"><span class="linenum">1645</span></a>  
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment">/**</span>
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment"> * Checks if the main tables have been installed yet or not.</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment"> *</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment"> * Note: we can not use caches here because they might be stale,</span>
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment"> *       use with care!</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment"> *</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment"> * @return bool</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment"> */</span>
<a name="l1654"><span class="linenum">1654</span></a>  function <a class="function" onClick="logFunction('core_tables_exist')" href="../_functions/core_tables_exist.html" onMouseOver="funcPopup(event,'core_tables_exist')">core_tables_exist</a>() {
<a name="l1655"><span class="linenum">1655</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1656"><span class="linenum">1656</span></a>  
<a name="l1657"><span class="linenum">1657</span></a>      if (!<a class="var it448" onMouseOver="hilite(448)" onMouseOut="lolite()" onClick="logVariable('tables')" href="../_variables/tables.html">$tables</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_tables')" href="../_functions/get_tables.html" onMouseOver="funcPopup(event,'get_tables')">get_tables</a>(false) ) {    // No tables yet at all.
<a name="l1658"><span class="linenum">1658</span></a>          return false;
<a name="l1659"><span class="linenum">1659</span></a>  
<a name="l1660"><span class="linenum">1660</span></a>      } else {                                 // Check for missing main tables
<a name="l1661"><span class="linenum">1661</span></a>          <a class="var it37982" onMouseOver="hilite(37982)" onMouseOut="lolite()" onClick="logVariable('mtables')" href="../_variables/mtables.html">$mtables</a> = array('config', 'course', 'groupings'); <span class="comment">// some tables used in 1.9 and 2.0, preferable something from the start and end of install.xml</span>
<a name="l1662"><span class="linenum">1662</span></a>          foreach (<a class="var it37982" onMouseOver="hilite(37982)" onMouseOut="lolite()" onClick="logVariable('mtables')" href="../_variables/mtables.html">$mtables</a> as <a class="var it10773" onMouseOver="hilite(10773)" onMouseOut="lolite()" onClick="logVariable('mtable')" href="../_variables/mtable.html">$mtable</a>) {
<a name="l1663"><span class="linenum">1663</span></a>              if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it10773" onMouseOver="hilite(10773)" onMouseOut="lolite()" onClick="logVariable('mtable')" href="../_variables/mtable.html">$mtable</a>, <a class="var it448" onMouseOver="hilite(448)" onMouseOut="lolite()" onClick="logVariable('tables')" href="../_variables/tables.html">$tables</a>)) {
<a name="l1664"><span class="linenum">1664</span></a>                  return false;
<a name="l1665"><span class="linenum">1665</span></a>              }
<a name="l1666"><span class="linenum">1666</span></a>          }
<a name="l1667"><span class="linenum">1667</span></a>          return true;
<a name="l1668"><span class="linenum">1668</span></a>      }
<a name="l1669"><span class="linenum">1669</span></a>  }
<a name="l1670"><span class="linenum">1670</span></a>  
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">/**</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment"> * upgrades the mnet rpc definitions for the given component.</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment"> * this method doesn't return status, an exception will be thrown in the case of an error</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment"> *</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment"> * @param string $component the plugin to upgrade, eg auth_mnet</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment"> */</span>
<a name="l1677"><span class="linenum">1677</span></a>  function <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l1678"><span class="linenum">1678</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1679"><span class="linenum">1679</span></a>  
<a name="l1680"><span class="linenum">1680</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1681"><span class="linenum">1681</span></a>      <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_directory')" href="../_functions/get_plugin_directory.html" onMouseOver="funcPopup(event,'get_plugin_directory')">get_plugin_directory</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1682"><span class="linenum">1682</span></a>  
<a name="l1683"><span class="linenum">1683</span></a>      <a class="var it9836" onMouseOver="hilite(9836)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> = array();
<a name="l1684"><span class="linenum">1684</span></a>      <a class="var it9837" onMouseOver="hilite(9837)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a> = array();
<a name="l1685"><span class="linenum">1685</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/db/mnet.php')) {
<a name="l1686"><span class="linenum">1686</span></a>          require_once(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/db/mnet.php'); <span class="comment">// $publishes comes from this file</span>
<a name="l1687"><span class="linenum">1687</span></a>      }
<a name="l1688"><span class="linenum">1688</span></a>      if (empty(<a class="var it9836" onMouseOver="hilite(9836)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a>)) {
<a name="l1689"><span class="linenum">1689</span></a>          <a class="var it9836" onMouseOver="hilite(9836)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> = array(); <span class="comment">// still need this to be able to disable stuff later</span>
<a name="l1690"><span class="linenum">1690</span></a>      }
<a name="l1691"><span class="linenum">1691</span></a>      if (empty(<a class="var it9837" onMouseOver="hilite(9837)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a>)) {
<a name="l1692"><span class="linenum">1692</span></a>          <a class="var it9837" onMouseOver="hilite(9837)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a> = array(); <span class="comment">// still need this to be able to disable stuff later</span>
<a name="l1693"><span class="linenum">1693</span></a>      }
<a name="l1694"><span class="linenum">1694</span></a>  
<a name="l1695"><span class="linenum">1695</span></a>      static <a class="var it37983" onMouseOver="hilite(37983)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a> = array();
<a name="l1696"><span class="linenum">1696</span></a>  
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment">    // rekey an array based on the rpc method for easy lookups later</span>
<a name="l1698"><span class="linenum">1698</span></a>      <a class="var it37984" onMouseOver="hilite(37984)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a> = array();
<a name="l1699"><span class="linenum">1699</span></a>      <a class="var it37985" onMouseOver="hilite(37985)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a> = array();
<a name="l1700"><span class="linenum">1700</span></a>      foreach(<a class="var it9836" onMouseOver="hilite(9836)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> as <a class="var it17201" onMouseOver="hilite(17201)" onMouseOut="lolite()" onClick="logVariable('servicename')" href="../_variables/servicename.html">$servicename</a> =&gt; <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>) {
<a name="l1701"><span class="linenum">1701</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['methods'])) {
<a name="l1702"><span class="linenum">1702</span></a>              foreach(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['methods'] as <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../_variables/methodname.html">$methodname</a>) {
<a name="l1703"><span class="linenum">1703</span></a>                  <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename'] = <a class="var it17201" onMouseOver="hilite(17201)" onMouseOut="lolite()" onClick="logVariable('servicename')" href="../_variables/servicename.html">$servicename</a>;
<a name="l1704"><span class="linenum">1704</span></a>                  <a class="var it37984" onMouseOver="hilite(37984)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>[<a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../_variables/methodname.html">$methodname</a>][] = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>;
<a name="l1705"><span class="linenum">1705</span></a>              }
<a name="l1706"><span class="linenum">1706</span></a>          }
<a name="l1707"><span class="linenum">1707</span></a>      }
<a name="l1708"><span class="linenum">1708</span></a>  
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment">    // Disable functions that don't exist (any more) in the source</span>
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment">    // Should these be deleted? What about their permissions records?</span>
<a name="l1711"><span class="linenum">1711</span></a>      foreach (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('mnet_rpc', array('pluginname'=&gt;<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'plugintype'=&gt;<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>), 'functionname ASC ') as <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>) {
<a name="l1712"><span class="linenum">1712</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it37984" onMouseOver="hilite(37984)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>) &amp;&amp; <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1713"><span class="linenum">1713</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_rpc', 'enabled', 0, array('id' =&gt; <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1714"><span class="linenum">1714</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it37984" onMouseOver="hilite(37984)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>) &amp;&amp; !<a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1715"><span class="linenum">1715</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_rpc', 'enabled', 1, array('id' =&gt; <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1716"><span class="linenum">1716</span></a>          }
<a name="l1717"><span class="linenum">1717</span></a>      }
<a name="l1718"><span class="linenum">1718</span></a>  
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment">    // reflect all the services we're publishing and save them</span>
<a name="l1720"><span class="linenum">1720</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../lib/zend/Zend/Server/Reflection.php.html">/lib/zend/Zend/Server/Reflection.php</a>');
<a name="l1721"><span class="linenum">1721</span></a>      static <a class="var it37987" onMouseOver="hilite(37987)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a> = array(); <span class="comment">// to store reflection information in</span>
<a name="l1722"><span class="linenum">1722</span></a>      foreach (<a class="var it9836" onMouseOver="hilite(9836)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> as <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l1723"><span class="linenum">1723</span></a>          <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['filename'];
<a name="l1724"><span class="linenum">1724</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['classname'];
<a name="l1725"><span class="linenum">1725</span></a>          foreach (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['methods'] as <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>) {
<a name="l1726"><span class="linenum">1726</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a> = new stdClass();
<a name="l1727"><span class="linenum">1727</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('plugintype')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/plugintype.html">plugintype</a>  = <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1728"><span class="linenum">1728</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('pluginname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/pluginname.html">pluginname</a>  = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l1729"><span class="linenum">1729</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('enabled')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>     = 1;
<a name="l1730"><span class="linenum">1730</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>   = <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a>;
<a name="l1731"><span class="linenum">1731</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>    = <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>;
<a name="l1732"><span class="linenum">1732</span></a>  
<a name="l1733"><span class="linenum">1733</span></a>              if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>)) {
<a name="l1734"><span class="linenum">1734</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a> = <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>;
<a name="l1735"><span class="linenum">1735</span></a>  
<a name="l1736"><span class="linenum">1736</span></a>              } else if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>)) { // wants to override file or class
<a name="l1737"><span class="linenum">1737</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a> = <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>['method'];
<a name="l1738"><span class="linenum">1738</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>     = <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>['classname'];
<a name="l1739"><span class="linenum">1739</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>      = <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>['filename'];
<a name="l1740"><span class="linenum">1740</span></a>              }
<a name="l1741"><span class="linenum">1741</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('xmlrpcpath')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/xmlrpcpath.html">xmlrpcpath</a> = <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'/'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>.'/'.<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>.'/'.<a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>;
<a name="l1742"><span class="linenum">1742</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('static')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/static.html">static</a> = false;
<a name="l1743"><span class="linenum">1743</span></a>  
<a name="l1744"><span class="linenum">1744</span></a>              require_once(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/' . <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>);
<a name="l1745"><span class="linenum">1745</span></a>              <a class="var it37988" onMouseOver="hilite(37988)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a> = null; <span class="comment">// slightly different ways to get this depending on whether it's a class method or a function</span>
<a name="l1746"><span class="linenum">1746</span></a>              if (!empty(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>)) {
<a name="l1747"><span class="linenum">1747</span></a>                  if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>)) {
<a name="l1748"><span class="linenum">1748</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installnosuchmethod', 'mnet', '', (object)array('method' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'class' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>));
<a name="l1749"><span class="linenum">1749</span></a>                  }
<a name="l1750"><span class="linenum">1750</span></a>                  <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a> . '|' . <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>;
<a name="l1751"><span class="linenum">1751</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it37987" onMouseOver="hilite(37987)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a>)) { // look to see if we've already got a reflection object
<a name="l1752"><span class="linenum">1752</span></a>                      try {
<a name="l1753"><span class="linenum">1753</span></a>                          <a class="var it37987" onMouseOver="hilite(37987)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="class" onClick="logClass('Zend_Server_Reflection')" href="../_classes/zend_server_reflection.html" onMouseOver="classPopup(event,'zend_server_reflection')">Zend_Server_Reflection</a>::<a class="function" onClick="logFunction('reflectClass')" href="../_functions/reflectclass.html" onMouseOver="funcPopup(event,'reflectclass')">reflectClass</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>);
<a name="l1754"><span class="linenum">1754</span></a>                      } catch (Zend_Server_Reflection_Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) { // catch these and rethrow them to something more helpful
<a name="l1755"><span class="linenum">1755</span></a>                          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installreflectionclasserror', 'mnet', '', (object)array('method' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'class' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>, 'error' =&gt; <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>()));
<a name="l1756"><span class="linenum">1756</span></a>                      }
<a name="l1757"><span class="linenum">1757</span></a>                  }
<a name="l1758"><span class="linenum">1758</span></a>                  <a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> =&amp; <a class="var it37987" onMouseOver="hilite(37987)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l1759"><span class="linenum">1759</span></a>                  if (!<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a class="function" onClick="logFunction('hasMethod')" href="../_functions/hasmethod.html" onMouseOver="funcPopup(event,'hasmethod')">hasMethod</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>)) {
<a name="l1760"><span class="linenum">1760</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installnosuchmethod', 'mnet', '', (object)array('method' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'class' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>));
<a name="l1761"><span class="linenum">1761</span></a>                  }
<a name="l1762"><span class="linenum">1762</span></a>  <span class="comment">                // stupid workaround for zend not having a getMethod($name) function</span>
<a name="l1763"><span class="linenum">1763</span></a>                  <a class="var it15822" onMouseOver="hilite(15822)" onMouseOut="lolite()" onClick="logVariable('ms')" href="../_variables/ms.html">$ms</a> = <a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a class="function" onClick="logFunction('getMethods')" href="../_functions/getmethods.html" onMouseOver="funcPopup(event,'getmethods')">getMethods</a>();
<a name="l1764"><span class="linenum">1764</span></a>                  foreach (<a class="var it15822" onMouseOver="hilite(15822)" onMouseOut="lolite()" onClick="logVariable('ms')" href="../_variables/ms.html">$ms</a> as <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>) {
<a name="l1765"><span class="linenum">1765</span></a>                      if (<a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>() == <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>) {
<a name="l1766"><span class="linenum">1766</span></a>                          <a class="var it37988" onMouseOver="hilite(37988)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a> = <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>;
<a name="l1767"><span class="linenum">1767</span></a>                          break;
<a name="l1768"><span class="linenum">1768</span></a>                      }
<a name="l1769"><span class="linenum">1769</span></a>                  }
<a name="l1770"><span class="linenum">1770</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('static')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/static.html">static</a> = (int)<a class="var it37988" onMouseOver="hilite(37988)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a>-&gt;isStatic();
<a name="l1771"><span class="linenum">1771</span></a>              } else {
<a name="l1772"><span class="linenum">1772</span></a>                  if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>)) {
<a name="l1773"><span class="linenum">1773</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installnosuchfunction', 'mnet', '', (object)array('method' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'file' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>));
<a name="l1774"><span class="linenum">1774</span></a>                  }
<a name="l1775"><span class="linenum">1775</span></a>                  try {
<a name="l1776"><span class="linenum">1776</span></a>                      <a class="var it37988" onMouseOver="hilite(37988)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a> = <a class="class" onClick="logClass('Zend_Server_Reflection')" href="../_classes/zend_server_reflection.html" onMouseOver="classPopup(event,'zend_server_reflection')">Zend_Server_Reflection</a>::<a class="function" onClick="logFunction('reflectFunction')" href="../_functions/reflectfunction.html" onMouseOver="funcPopup(event,'reflectfunction')">reflectFunction</a>(<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>);
<a name="l1777"><span class="linenum">1777</span></a>                  } catch (Zend_Server_Reflection_Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) { // catch these and rethrow them to something more helpful
<a name="l1778"><span class="linenum">1778</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installreflectionfunctionerror', 'mnet', '', (object)array('method' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, '' =&gt; <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>, 'error' =&gt; <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>()));
<a name="l1779"><span class="linenum">1779</span></a>                  }
<a name="l1780"><span class="linenum">1780</span></a>              }
<a name="l1781"><span class="linenum">1781</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('profile')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/profile.html">profile</a> =  <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="function" onClick="logFunction('admin_mnet_method_profile')" href="../_functions/admin_mnet_method_profile.html" onMouseOver="funcPopup(event,'admin_mnet_method_profile')">admin_mnet_method_profile</a>(<a class="var it37988" onMouseOver="hilite(37988)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a>));
<a name="l1782"><span class="linenum">1782</span></a>              <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('help')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/help.html">help</a> = <a class="var it37988" onMouseOver="hilite(37988)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a>-&gt;<a class="function" onClick="logFunction('getDescription')" href="../_functions/getdescription.html" onMouseOver="funcPopup(event,'getdescription')">getDescription</a>();
<a name="l1783"><span class="linenum">1783</span></a>  
<a name="l1784"><span class="linenum">1784</span></a>              if (<a class="var it37989" onMouseOver="hilite(37989)" onMouseOut="lolite()" onClick="logVariable('record_exists')" href="../_variables/record_exists.html">$record_exists</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('mnet_rpc', array('xmlrpcpath'=&gt;<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('xmlrpcpath')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/xmlrpcpath.html">xmlrpcpath</a>))) {
<a name="l1785"><span class="linenum">1785</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/id.html">id</a>      = <a class="var it37989" onMouseOver="hilite(37989)" onMouseOut="lolite()" onClick="logVariable('record_exists')" href="../_variables/record_exists.html">$record_exists</a>-&gt;<a onClick="logVariable('id')" class="var it41131" onMouseOver="hilite(41131)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1786"><span class="linenum">1786</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('enabled')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a> = <a class="var it37989" onMouseOver="hilite(37989)" onMouseOut="lolite()" onClick="logVariable('record_exists')" href="../_variables/record_exists.html">$record_exists</a>-&gt;<a onClick="logVariable('enabled')" class="var it41131" onMouseOver="hilite(41131)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>;
<a name="l1787"><span class="linenum">1787</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('mnet_rpc', <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>);
<a name="l1788"><span class="linenum">1788</span></a>              } else {
<a name="l1789"><span class="linenum">1789</span></a>                  <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_rpc', <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>, true);
<a name="l1790"><span class="linenum">1790</span></a>              }
<a name="l1791"><span class="linenum">1791</span></a>  
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment">            // TODO this API versioning must be reworked, here the recently processed method</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment">            // sets the service API which may not be correct</span>
<a name="l1794"><span class="linenum">1794</span></a>              foreach (<a class="var it37984" onMouseOver="hilite(37984)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>[<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>] as <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>) {
<a name="l1795"><span class="linenum">1795</span></a>                  if (<a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('mnet_service', array('name'=&gt;<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename']))) {
<a name="l1796"><span class="linenum">1796</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('apiversion')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/apiversion.html">apiversion</a> = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['apiversion'];
<a name="l1797"><span class="linenum">1797</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('mnet_service', <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>);
<a name="l1798"><span class="linenum">1798</span></a>                  } else {
<a name="l1799"><span class="linenum">1799</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = new stdClass();
<a name="l1800"><span class="linenum">1800</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('name')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/name.html">name</a>        = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename'];
<a name="l1801"><span class="linenum">1801</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('description')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = empty(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['description']) ? '' : <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['description'];
<a name="l1802"><span class="linenum">1802</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('apiversion')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/apiversion.html">apiversion</a>  = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['apiversion'];
<a name="l1803"><span class="linenum">1803</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('offer')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/offer.html">offer</a>       = 1;
<a name="l1804"><span class="linenum">1804</span></a>                      <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/id.html">id</a>          = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_service', <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>);
<a name="l1805"><span class="linenum">1805</span></a>                  }
<a name="l1806"><span class="linenum">1806</span></a>                  <a class="var it37983" onMouseOver="hilite(37983)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>[<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename']] = <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>;
<a name="l1807"><span class="linenum">1807</span></a>                  if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('mnet_service2rpc', array('rpcid'=&gt;<a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'serviceid'=&gt;<a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1808"><span class="linenum">1808</span></a>                      <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a> = new stdClass();
<a name="l1809"><span class="linenum">1809</span></a>                      <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('rpcid')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../_variables/rpcid.html">rpcid</a> = <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it41130" onMouseOver="hilite(41130)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1810"><span class="linenum">1810</span></a>                      <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('serviceid')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../_variables/serviceid.html">serviceid</a> = <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1811"><span class="linenum">1811</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_service2rpc', <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>, true);
<a name="l1812"><span class="linenum">1812</span></a>                  }
<a name="l1813"><span class="linenum">1813</span></a>              }
<a name="l1814"><span class="linenum">1814</span></a>          }
<a name="l1815"><span class="linenum">1815</span></a>      }
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment">    // finished with methods we publish, now do subscribable methods</span>
<a name="l1817"><span class="linenum">1817</span></a>      foreach(<a class="var it9837" onMouseOver="hilite(9837)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a> as <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> =&gt; <a class="var it3198" onMouseOver="hilite(3198)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../_variables/methods.html">$methods</a>) {
<a name="l1818"><span class="linenum">1818</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>, <a class="var it37983" onMouseOver="hilite(37983)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>)) {
<a name="l1819"><span class="linenum">1819</span></a>              if (!<a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('mnet_service', array('name' =&gt;  <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>))) {
<a name="l1820"><span class="linenum">1820</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;TODO: skipping unknown service <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> - somebody needs to fix MDL-21993&quot;);
<a name="l1821"><span class="linenum">1821</span></a>                  continue;
<a name="l1822"><span class="linenum">1822</span></a>              }
<a name="l1823"><span class="linenum">1823</span></a>              <a class="var it37983" onMouseOver="hilite(37983)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>[<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>] = <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>;
<a name="l1824"><span class="linenum">1824</span></a>          } else {
<a name="l1825"><span class="linenum">1825</span></a>              <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = <a class="var it37983" onMouseOver="hilite(37983)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>[<a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>];
<a name="l1826"><span class="linenum">1826</span></a>          }
<a name="l1827"><span class="linenum">1827</span></a>          foreach (<a class="var it3198" onMouseOver="hilite(3198)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../_variables/methods.html">$methods</a> as <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a> =&gt; <a class="var it18089" onMouseOver="hilite(18089)" onMouseOut="lolite()" onClick="logVariable('xmlrpcpath')" href="../_variables/xmlrpcpath.html">$xmlrpcpath</a>) {
<a name="l1828"><span class="linenum">1828</span></a>              if (!<a class="var it37991" onMouseOver="hilite(37991)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('mnet_remote_rpc', 'id', array('xmlrpcpath'=&gt;<a class="var it18089" onMouseOver="hilite(18089)" onMouseOut="lolite()" onClick="logVariable('xmlrpcpath')" href="../_variables/xmlrpcpath.html">$xmlrpcpath</a>))) {
<a name="l1829"><span class="linenum">1829</span></a>                  <a class="var it37992" onMouseOver="hilite(37992)" onMouseOut="lolite()" onClick="logVariable('remoterpc')" href="../_variables/remoterpc.html">$remoterpc</a> = (object)array(
<a name="l1830"><span class="linenum">1830</span></a>                      'functionname' =&gt; <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>,
<a name="l1831"><span class="linenum">1831</span></a>                      'xmlrpcpath' =&gt; <a class="var it18089" onMouseOver="hilite(18089)" onMouseOut="lolite()" onClick="logVariable('xmlrpcpath')" href="../_variables/xmlrpcpath.html">$xmlrpcpath</a>,
<a name="l1832"><span class="linenum">1832</span></a>                      'plugintype' =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>,
<a name="l1833"><span class="linenum">1833</span></a>                      'pluginname' =&gt; <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>,
<a name="l1834"><span class="linenum">1834</span></a>                      'enabled'    =&gt; 1,
<a name="l1835"><span class="linenum">1835</span></a>                  );
<a name="l1836"><span class="linenum">1836</span></a>                  <a class="var it37991" onMouseOver="hilite(37991)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a> = <a class="var it37992" onMouseOver="hilite(37992)" onMouseOut="lolite()" onClick="logVariable('remoterpc')" href="../_variables/remoterpc.html">$remoterpc</a>-&gt;<a onClick="logVariable('id')" class="var it41133" onMouseOver="hilite(41133)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_remote_rpc', <a class="var it37992" onMouseOver="hilite(37992)" onMouseOut="lolite()" onClick="logVariable('remoterpc')" href="../_variables/remoterpc.html">$remoterpc</a>, true);
<a name="l1837"><span class="linenum">1837</span></a>              }
<a name="l1838"><span class="linenum">1838</span></a>              if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('mnet_remote_service2rpc', array('rpcid'=&gt;<a class="var it37991" onMouseOver="hilite(37991)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a>, 'serviceid'=&gt;<a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1839"><span class="linenum">1839</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a> = new stdClass();
<a name="l1840"><span class="linenum">1840</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('rpcid')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../_variables/rpcid.html">rpcid</a> = <a class="var it37991" onMouseOver="hilite(37991)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a>;
<a name="l1841"><span class="linenum">1841</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('serviceid')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../_variables/serviceid.html">serviceid</a> = <a class="var it37990" onMouseOver="hilite(37990)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it41132" onMouseOver="hilite(41132)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1842"><span class="linenum">1842</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_remote_service2rpc', <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>, true);
<a name="l1843"><span class="linenum">1843</span></a>              }
<a name="l1844"><span class="linenum">1844</span></a>              <a class="var it37985" onMouseOver="hilite(37985)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a>[<a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>][] = <a class="var it98" onMouseOver="hilite(98)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>;
<a name="l1845"><span class="linenum">1845</span></a>          }
<a name="l1846"><span class="linenum">1846</span></a>      }
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>      foreach (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('mnet_remote_rpc', array('pluginname'=&gt;<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'plugintype'=&gt;<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>), 'functionname ASC ') as <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>) {
<a name="l1849"><span class="linenum">1849</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it37985" onMouseOver="hilite(37985)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a>) &amp;&amp; <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1850"><span class="linenum">1850</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_remote_rpc', 'enabled', 0, array('id' =&gt; <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1851"><span class="linenum">1851</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it37985" onMouseOver="hilite(37985)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a>) &amp;&amp; !<a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1852"><span class="linenum">1852</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_remote_rpc', 'enabled', 1, array('id' =&gt; <a class="var it37986" onMouseOver="hilite(37986)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it41129" onMouseOver="hilite(41129)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1853"><span class="linenum">1853</span></a>          }
<a name="l1854"><span class="linenum">1854</span></a>      }
<a name="l1855"><span class="linenum">1855</span></a>  
<a name="l1856"><span class="linenum">1856</span></a>      return true;
<a name="l1857"><span class="linenum">1857</span></a>  }
<a name="l1858"><span class="linenum">1858</span></a>  
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">/**</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment"> * Given some sort of Zend Reflection function/method object, return a profile array, ready to be serialized and stored</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment"> *</span>
<a name="l1862"><span class="linenum">1862</span></a>  <span class="comment"> * @param Zend_Server_Reflection_Function_Abstract $function can be any subclass of this object type</span>
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment"> *</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment"> * @return array</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment"> */</span>
<a name="l1866"><span class="linenum">1866</span></a>  function <a class="function" onClick="logFunction('admin_mnet_method_profile')" href="../_functions/admin_mnet_method_profile.html" onMouseOver="funcPopup(event,'admin_mnet_method_profile')">admin_mnet_method_profile</a>(Zend_Server_Reflection_Function_Abstract <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1867"><span class="linenum">1867</span></a>      <a class="var it37993" onMouseOver="hilite(37993)" onMouseOut="lolite()" onClick="logVariable('protos')" href="../_variables/protos.html">$protos</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a class="function" onClick="logFunction('getPrototypes')" href="../_functions/getprototypes.html" onMouseOver="funcPopup(event,'getprototypes')">getPrototypes</a>();
<a name="l1868"><span class="linenum">1868</span></a>      <a class="var it25454" onMouseOver="hilite(25454)" onMouseOut="lolite()" onClick="logVariable('proto')" href="../_variables/proto.html">$proto</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it37993" onMouseOver="hilite(37993)" onMouseOut="lolite()" onClick="logVariable('protos')" href="../_variables/protos.html">$protos</a>);
<a name="l1869"><span class="linenum">1869</span></a>      <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a> = <a class="var it25454" onMouseOver="hilite(25454)" onMouseOut="lolite()" onClick="logVariable('proto')" href="../_variables/proto.html">$proto</a>-&gt;<a class="function" onClick="logFunction('getReturnValue')" href="../_functions/getreturnvalue.html" onMouseOver="funcPopup(event,'getreturnvalue')">getReturnValue</a>();
<a name="l1870"><span class="linenum">1870</span></a>      <a class="var it4402" onMouseOver="hilite(4402)" onMouseOut="lolite()" onClick="logVariable('profile')" href="../_variables/profile.html">$profile</a> = array(
<a name="l1871"><span class="linenum">1871</span></a>          'parameters' =&gt;  array(),
<a name="l1872"><span class="linenum">1872</span></a>          'return'     =&gt;  array(
<a name="l1873"><span class="linenum">1873</span></a>              'type'        =&gt; <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>(),
<a name="l1874"><span class="linenum">1874</span></a>              'description' =&gt; <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>-&gt;<a class="function" onClick="logFunction('getDescription')" href="../_functions/getdescription.html" onMouseOver="funcPopup(event,'getdescription')">getDescription</a>(),
<a name="l1875"><span class="linenum">1875</span></a>          ),
<a name="l1876"><span class="linenum">1876</span></a>      );
<a name="l1877"><span class="linenum">1877</span></a>      foreach (<a class="var it25454" onMouseOver="hilite(25454)" onMouseOut="lolite()" onClick="logVariable('proto')" href="../_variables/proto.html">$proto</a>-&gt;<a class="function" onClick="logFunction('getParameters')" href="../_functions/getparameters.html" onMouseOver="funcPopup(event,'getparameters')">getParameters</a>() as <a class="var it3345" onMouseOver="hilite(3345)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>) {
<a name="l1878"><span class="linenum">1878</span></a>          <a class="var it4402" onMouseOver="hilite(4402)" onMouseOut="lolite()" onClick="logVariable('profile')" href="../_variables/profile.html">$profile</a>['parameters'][] = array(
<a name="l1879"><span class="linenum">1879</span></a>              'name' =&gt; <a class="var it3345" onMouseOver="hilite(3345)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>(),
<a name="l1880"><span class="linenum">1880</span></a>              'type' =&gt; <a class="var it3345" onMouseOver="hilite(3345)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>(),
<a name="l1881"><span class="linenum">1881</span></a>              'description' =&gt; <a class="var it3345" onMouseOver="hilite(3345)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>-&gt;<a class="function" onClick="logFunction('getDescription')" href="../_functions/getdescription.html" onMouseOver="funcPopup(event,'getdescription')">getDescription</a>(),
<a name="l1882"><span class="linenum">1882</span></a>          );
<a name="l1883"><span class="linenum">1883</span></a>      }
<a name="l1884"><span class="linenum">1884</span></a>      return <a class="var it4402" onMouseOver="hilite(4402)" onMouseOut="lolite()" onClick="logVariable('profile')" href="../_variables/profile.html">$profile</a>;
<a name="l1885"><span class="linenum">1885</span></a>  }
<a name="l1886"><span class="linenum">1886</span></a>  
<a name="l1887"><span class="linenum">1887</span></a>  
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">/**</span>
<a name="l1889"><span class="linenum">1889</span></a>  <span class="comment"> * This function finds duplicate records (based on combinations of fields that should be unique)</span>
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment"> * and then progamatically generated a &quot;most correct&quot; version of the data, update and removing</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment"> * records as appropriate</span>
<a name="l1892"><span class="linenum">1892</span></a>  <span class="comment"> *</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment"> * Thanks to Dan Marsden for help</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment"> *</span>
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment"> * @param   string  $table      Table name</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment"> * @param   array   $uniques    Array of field names that should be unique</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * @param   array   $fieldstocheck  Array of fields to generate &quot;correct&quot; data from (optional)</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> * @return  void</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment"> */</span>
<a name="l1900"><span class="linenum">1900</span></a>  function <a class="function" onClick="logFunction('upgrade_course_completion_remove_duplicates')" href="../_functions/upgrade_course_completion_remove_duplicates.html" onMouseOver="funcPopup(event,'upgrade_course_completion_remove_duplicates')">upgrade_course_completion_remove_duplicates</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, <a class="var it37994" onMouseOver="hilite(37994)" onMouseOut="lolite()" onClick="logVariable('uniques')" href="../_variables/uniques.html">$uniques</a>, <a class="var it7814" onMouseOver="hilite(7814)" onMouseOut="lolite()" onClick="logVariable('fieldstocheck')" href="../_variables/fieldstocheck.html">$fieldstocheck</a> = array()) {
<a name="l1901"><span class="linenum">1901</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1902"><span class="linenum">1902</span></a>  
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment">    // Find duplicates</span>
<a name="l1904"><span class="linenum">1904</span></a>      <a class="var it37995" onMouseOver="hilite(37995)" onMouseOut="lolite()" onClick="logVariable('sql_cols')" href="../_variables/sql_cols.html">$sql_cols</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(', ', <a class="var it37994" onMouseOver="hilite(37994)" onMouseOut="lolite()" onClick="logVariable('uniques')" href="../_variables/uniques.html">$uniques</a>);
<a name="l1905"><span class="linenum">1905</span></a>  
<a name="l1906"><span class="linenum">1906</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT {<a class="var it37995" onMouseOver="hilite(37995)" onMouseOut="lolite()" onClick="logVariable('sql_cols')" href="../_variables/sql_cols.html">$sql_cols</a>} FROM {{<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>}} GROUP BY {<a class="var it37995" onMouseOver="hilite(37995)" onMouseOut="lolite()" onClick="logVariable('sql_cols')" href="../_variables/sql_cols.html">$sql_cols</a>} HAVING (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(id) &gt; 1)&quot;;
<a name="l1907"><span class="linenum">1907</span></a>      <a class="var it11353" onMouseOver="hilite(11353)" onMouseOut="lolite()" onClick="logVariable('duplicates')" href="../_variables/duplicates.html">$duplicates</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array());
<a name="l1908"><span class="linenum">1908</span></a>  
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment">    // Loop through duplicates</span>
<a name="l1910"><span class="linenum">1910</span></a>      foreach (<a class="var it11353" onMouseOver="hilite(11353)" onMouseOut="lolite()" onClick="logVariable('duplicates')" href="../_variables/duplicates.html">$duplicates</a> as <a class="var it10012" onMouseOver="hilite(10012)" onMouseOut="lolite()" onClick="logVariable('duplicate')" href="../_variables/duplicate.html">$duplicate</a>) {
<a name="l1911"><span class="linenum">1911</span></a>          <a class="var it3271" onMouseOver="hilite(3271)" onMouseOut="lolite()" onClick="logVariable('pointer')" href="../_variables/pointer.html">$pointer</a> = 0;
<a name="l1912"><span class="linenum">1912</span></a>  
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">        // Generate SQL for finding records with these duplicate uniques</span>
<a name="l1914"><span class="linenum">1914</span></a>          <a class="var it37996" onMouseOver="hilite(37996)" onMouseOut="lolite()" onClick="logVariable('sql_select')" href="../_variables/sql_select.html">$sql_select</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' = ? AND ', <a class="var it37994" onMouseOver="hilite(37994)" onMouseOut="lolite()" onClick="logVariable('uniques')" href="../_variables/uniques.html">$uniques</a>).' = ?'; <span class="comment">// builds &quot;fieldname = ? AND fieldname = ?&quot;</span>
<a name="l1915"><span class="linenum">1915</span></a>          <a class="var it37997" onMouseOver="hilite(37997)" onMouseOut="lolite()" onClick="logVariable('uniq_values')" href="../_variables/uniq_values.html">$uniq_values</a> = array();
<a name="l1916"><span class="linenum">1916</span></a>          foreach (<a class="var it37994" onMouseOver="hilite(37994)" onMouseOut="lolite()" onClick="logVariable('uniques')" href="../_variables/uniques.html">$uniques</a> as <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../_variables/u.html">$u</a>) {
<a name="l1917"><span class="linenum">1917</span></a>              <a class="var it37997" onMouseOver="hilite(37997)" onMouseOut="lolite()" onClick="logVariable('uniq_values')" href="../_variables/uniq_values.html">$uniq_values</a>[] = <a class="var it10012" onMouseOver="hilite(10012)" onMouseOut="lolite()" onClick="logVariable('duplicate')" href="../_variables/duplicate.html">$duplicate</a>-&gt;<a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../_variables/u.html">$u</a>;
<a name="l1918"><span class="linenum">1918</span></a>          }
<a name="l1919"><span class="linenum">1919</span></a>  
<a name="l1920"><span class="linenum">1920</span></a>          <a class="var it37998" onMouseOver="hilite(37998)" onMouseOut="lolite()" onClick="logVariable('sql_order')" href="../_variables/sql_order.html">$sql_order</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' DESC, ', <a class="var it37994" onMouseOver="hilite(37994)" onMouseOut="lolite()" onClick="logVariable('uniques')" href="../_variables/uniques.html">$uniques</a>).' DESC'; <span class="comment">// builds &quot;fieldname DESC, fieldname DESC&quot;</span>
<a name="l1921"><span class="linenum">1921</span></a>  
<a name="l1922"><span class="linenum">1922</span></a>  <span class="comment">        // Get records with these duplicate uniques</span>
<a name="l1923"><span class="linenum">1923</span></a>          <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(
<a name="l1924"><span class="linenum">1924</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>,
<a name="l1925"><span class="linenum">1925</span></a>              <a class="var it37996" onMouseOver="hilite(37996)" onMouseOut="lolite()" onClick="logVariable('sql_select')" href="../_variables/sql_select.html">$sql_select</a>,
<a name="l1926"><span class="linenum">1926</span></a>              <a class="var it37997" onMouseOver="hilite(37997)" onMouseOut="lolite()" onClick="logVariable('uniq_values')" href="../_variables/uniq_values.html">$uniq_values</a>,
<a name="l1927"><span class="linenum">1927</span></a>              <a class="var it37998" onMouseOver="hilite(37998)" onMouseOut="lolite()" onClick="logVariable('sql_order')" href="../_variables/sql_order.html">$sql_order</a>
<a name="l1928"><span class="linenum">1928</span></a>          );
<a name="l1929"><span class="linenum">1929</span></a>  
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment">        // Loop through and build a &quot;correct&quot; record, deleting the others</span>
<a name="l1931"><span class="linenum">1931</span></a>          <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a> = false;
<a name="l1932"><span class="linenum">1932</span></a>          <a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a> = null;
<a name="l1933"><span class="linenum">1933</span></a>          foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1934"><span class="linenum">1934</span></a>              <a class="var it3271" onMouseOver="hilite(3271)" onMouseOut="lolite()" onClick="logVariable('pointer')" href="../_variables/pointer.html">$pointer</a>++;
<a name="l1935"><span class="linenum">1935</span></a>              if (<a class="var it3271" onMouseOver="hilite(3271)" onMouseOut="lolite()" onClick="logVariable('pointer')" href="../_variables/pointer.html">$pointer</a> === 1) { // keep 1st record but delete all others.
<a name="l1936"><span class="linenum">1936</span></a>                  <a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>;
<a name="l1937"><span class="linenum">1937</span></a>              } else {
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment">                // If we have fields to check, update original record</span>
<a name="l1939"><span class="linenum">1939</span></a>                  if (<a class="var it7814" onMouseOver="hilite(7814)" onMouseOut="lolite()" onClick="logVariable('fieldstocheck')" href="../_variables/fieldstocheck.html">$fieldstocheck</a>) {
<a name="l1940"><span class="linenum">1940</span></a>  <span class="comment">                    // we need to keep the &quot;oldest&quot; of all these fields as the valid completion record.</span>
<a name="l1941"><span class="linenum">1941</span></a>  <span class="comment">                    // but we want to ignore null values</span>
<a name="l1942"><span class="linenum">1942</span></a>                      foreach (<a class="var it7814" onMouseOver="hilite(7814)" onMouseOut="lolite()" onClick="logVariable('fieldstocheck')" href="../_variables/fieldstocheck.html">$fieldstocheck</a> as <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l1943"><span class="linenum">1943</span></a>                          if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a> &amp;&amp; ((<a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>-&gt;<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a> &gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) || !<a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>-&gt;<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>)) {
<a name="l1944"><span class="linenum">1944</span></a>                              <a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>-&gt;<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>;
<a name="l1945"><span class="linenum">1945</span></a>                              <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a> = true;
<a name="l1946"><span class="linenum">1946</span></a>                          }
<a name="l1947"><span class="linenum">1947</span></a>                      }
<a name="l1948"><span class="linenum">1948</span></a>                  }
<a name="l1949"><span class="linenum">1949</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, array('id' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1950"><span class="linenum">1950</span></a>              }
<a name="l1951"><span class="linenum">1951</span></a>          }
<a name="l1952"><span class="linenum">1952</span></a>          if (<a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('needsupdate')" href="../_variables/needsupdate.html">$needsupdate</a> || isset(<a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>-&gt;<a onClick="logVariable('reaggregate')" class="var it41134" onMouseOver="hilite(41134)" onMouseOut="lolite()" href="../_variables/reaggregate.html">reaggregate</a>)) {
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment">            // If this table has a reaggregate field, update to force recheck on next cron run</span>
<a name="l1954"><span class="linenum">1954</span></a>              if (isset(<a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>-&gt;<a onClick="logVariable('reaggregate')" class="var it41134" onMouseOver="hilite(41134)" onMouseOut="lolite()" href="../_variables/reaggregate.html">reaggregate</a>)) {
<a name="l1955"><span class="linenum">1955</span></a>                  <a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>-&gt;<a onClick="logVariable('reaggregate')" class="var it41134" onMouseOver="hilite(41134)" onMouseOut="lolite()" href="../_variables/reaggregate.html">reaggregate</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1956"><span class="linenum">1956</span></a>              }
<a name="l1957"><span class="linenum">1957</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, <a class="var it37999" onMouseOver="hilite(37999)" onMouseOut="lolite()" onClick="logVariable('origrecord')" href="../_variables/origrecord.html">$origrecord</a>);
<a name="l1958"><span class="linenum">1958</span></a>          }
<a name="l1959"><span class="linenum">1959</span></a>      }
<a name="l1960"><span class="linenum">1960</span></a>  }
<a name="l1961"><span class="linenum">1961</span></a>  
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment">/**</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment"> * Find questions missing an existing category and associate them with</span>
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment"> * a category which purpose is to gather them.</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment"> *</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment"> * @return void</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment"> */</span>
<a name="l1968"><span class="linenum">1968</span></a>  function <a class="function" onClick="logFunction('upgrade_save_orphaned_questions')" href="../_functions/upgrade_save_orphaned_questions.html" onMouseOver="funcPopup(event,'upgrade_save_orphaned_questions')">upgrade_save_orphaned_questions</a>() {
<a name="l1969"><span class="linenum">1969</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1970"><span class="linenum">1970</span></a>  
<a name="l1971"><span class="linenum">1971</span></a>  <span class="comment">    // Looking for orphaned questions</span>
<a name="l1972"><span class="linenum">1972</span></a>      <a class="var it37627" onMouseOver="hilite(37627)" onMouseOut="lolite()" onClick="logVariable('orphans')" href="../_variables/orphans.html">$orphans</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_select')" href="../_functions/record_exists_select.html" onMouseOver="funcPopup(event,'record_exists_select')">record_exists_select</a>('question',
<a name="l1973"><span class="linenum">1973</span></a>              'NOT <a class="function" onClick="logFunction('EXISTS')" href="../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">EXISTS</a> (SELECT 1 FROM {question_categories} WHERE {question_categories}.id = {question}.category)');
<a name="l1974"><span class="linenum">1974</span></a>      if (!<a class="var it37627" onMouseOver="hilite(37627)" onMouseOut="lolite()" onClick="logVariable('orphans')" href="../_variables/orphans.html">$orphans</a>) {
<a name="l1975"><span class="linenum">1975</span></a>          return;
<a name="l1976"><span class="linenum">1976</span></a>      }
<a name="l1977"><span class="linenum">1977</span></a>  
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">    // Generate a unique stamp for the orphaned questions category, easier to identify it later on</span>
<a name="l1979"><span class="linenum">1979</span></a>      <a class="var it38000" onMouseOver="hilite(38000)" onMouseOut="lolite()" onClick="logVariable('uniquestamp')" href="../_variables/uniquestamp.html">$uniquestamp</a> = &quot;unknownhost+120719170400+orphan&quot;;
<a name="l1980"><span class="linenum">1980</span></a>      <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment">    // Create the orphaned category at system level</span>
<a name="l1983"><span class="linenum">1983</span></a>      <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('question_categories', array('stamp' =&gt; <a class="var it38000" onMouseOver="hilite(38000)" onMouseOut="lolite()" onClick="logVariable('uniquestamp')" href="../_variables/uniquestamp.html">$uniquestamp</a>,
<a name="l1984"><span class="linenum">1984</span></a>              'contextid' =&gt; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39845" onMouseOver="hilite(39845)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1985"><span class="linenum">1985</span></a>      if (!<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>) {
<a name="l1986"><span class="linenum">1986</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a> = new stdClass();
<a name="l1987"><span class="linenum">1987</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('parent')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = 0;
<a name="l1988"><span class="linenum">1988</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('contextid')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39845" onMouseOver="hilite(39845)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1989"><span class="linenum">1989</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('name')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('orphanedquestionscategory', 'question');
<a name="l1990"><span class="linenum">1990</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('info')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('orphanedquestionscategoryinfo', 'question');
<a name="l1991"><span class="linenum">1991</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('sortorder')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = 999;
<a name="l1992"><span class="linenum">1992</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('stamp')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/stamp.html">stamp</a> = <a class="var it38000" onMouseOver="hilite(38000)" onMouseOut="lolite()" onClick="logVariable('uniquestamp')" href="../_variables/uniquestamp.html">$uniquestamp</a>;
<a name="l1993"><span class="linenum">1993</span></a>          <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;question_categories&quot;, <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>);
<a name="l1994"><span class="linenum">1994</span></a>      }
<a name="l1995"><span class="linenum">1995</span></a>  
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment">    // Set a category to those orphans</span>
<a name="l1997"><span class="linenum">1997</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('catid' =&gt; <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1998"><span class="linenum">1998</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>('UPDATE {question} SET category = :catid WHERE NOT EXISTS
<a name="l1999"><span class="linenum">1999</span></a>              (SELECT 1 FROM {question_categories} WHERE {question_categories}.id = {question}.category)', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l2000"><span class="linenum">2000</span></a>  }
<a name="l2001"><span class="linenum">2001</span></a>  
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment">/**</span>
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment"> * Rename old backup files to current backup files.</span>
<a name="l2004"><span class="linenum">2004</span></a>  <span class="comment"> *</span>
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment"> * When added the setting 'backup_shortname' (MDL-28657) the backup file names did not contain the id of the course.</span>
<a name="l2006"><span class="linenum">2006</span></a>  <span class="comment"> * Further we fixed that behaviour by forcing the id to be always present in the file name (MDL-33812).</span>
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment"> * This function will explore the backup directory and attempt to rename the previously created files to include</span>
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment"> * the id in the name. Doing this will put them back in the process of deleting the excess backups for each course.</span>
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment"> *</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment"> * This function manually recreates the file name, instead of using</span>
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment"> * {@link backup_plan_dbops::get_default_backup_filename()}, use it carefully if you're using it outside of the</span>
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment"> * usual upgrade process.</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment"> *</span>
<a name="l2014"><span class="linenum">2014</span></a>  <span class="comment"> * @see backup_cron_automated_helper::remove_excess_backups()</span>
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment"> * @link http://tracker.moodle.org/browse/MDL-35116</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment"> * @return void</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment"> * @since Moodle 2.4</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment"> */</span>
<a name="l2019"><span class="linenum">2019</span></a>  function <a class="function" onClick="logFunction('upgrade_rename_old_backup_files_using_shortname')" href="../_functions/upgrade_rename_old_backup_files_using_shortname.html" onMouseOver="funcPopup(event,'upgrade_rename_old_backup_files_using_shortname')">upgrade_rename_old_backup_files_using_shortname</a>() {
<a name="l2020"><span class="linenum">2020</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2021"><span class="linenum">2021</span></a>      <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('backup', 'backup_auto_destination');
<a name="l2022"><span class="linenum">2022</span></a>      <a class="var it38001" onMouseOver="hilite(38001)" onMouseOut="lolite()" onClick="logVariable('useshortname')" href="../_variables/useshortname.html">$useshortname</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('backup', 'backup_shortname');
<a name="l2023"><span class="linenum">2023</span></a>      if (empty(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>) || !<a class="phpfunction" onClick="logFunction('is_dir')" href="../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>) || !<a class="phpfunction" onClick="logFunction('is_writable')" href="../_functions/is_writable.html" onMouseOver="phpfuncPopup(event,'is_writable')">is_writable</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>)) {
<a name="l2024"><span class="linenum">2024</span></a>          return;
<a name="l2025"><span class="linenum">2025</span></a>      }
<a name="l2026"><span class="linenum">2026</span></a>  
<a name="l2027"><span class="linenum">2027</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../backup/util/includes/backup_includes.php.html">/backup/util/includes/backup_includes.php</a>');
<a name="l2028"><span class="linenum">2028</span></a>      <a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../_variables/backupword.html">$backupword</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backupfilename')));
<a name="l2029"><span class="linenum">2029</span></a>      <a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../_variables/backupword.html">$backupword</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../_variables/backupword.html">$backupword</a>), '_');
<a name="l2030"><span class="linenum">2030</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = <a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../_variables/backupword.html">$backupword</a> . '-' . backup::<a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a> . '-' . backup::TYPE_1COURSE . '-';
<a name="l2031"><span class="linenum">2031</span></a>      <a class="var it4072" onMouseOver="hilite(4072)" onMouseOut="lolite()" onClick="logVariable('regex')" href="../_variables/regex.html">$regex</a> = '#^'.<a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, '#').'.*\.mbz$#';
<a name="l2032"><span class="linenum">2032</span></a>      <a class="var it38002" onMouseOver="hilite(38002)" onMouseOut="lolite()" onClick="logVariable('thirtyapril')" href="../_variables/thirtyapril.html">$thirtyapril</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('30 April 2012 00:00');
<a name="l2033"><span class="linenum">2033</span></a>  
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment">    // Reading the directory.</span>
<a name="l2035"><span class="linenum">2035</span></a>      if (!<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="phpfunction" onClick="logFunction('scandir')" href="../_functions/scandir.html" onMouseOver="phpfuncPopup(event,'scandir')">scandir</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>)) {
<a name="l2036"><span class="linenum">2036</span></a>          return;
<a name="l2037"><span class="linenum">2037</span></a>      }
<a name="l2038"><span class="linenum">2038</span></a>      foreach (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l2039"><span class="linenum">2039</span></a>  <span class="comment">        // Skip directories and files which do not start with the common prefix.</span>
<a name="l2040"><span class="linenum">2040</span></a>  <span class="comment">        // This avoids working on files which are not related to this issue.</span>
<a name="l2041"><span class="linenum">2041</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_file')" href="../_functions/is_file.html" onMouseOver="phpfuncPopup(event,'is_file')">is_file</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> . '/' . <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) || !<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it4072" onMouseOver="hilite(4072)" onMouseOut="lolite()" onClick="logVariable('regex')" href="../_variables/regex.html">$regex</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l2042"><span class="linenum">2042</span></a>              continue;
<a name="l2043"><span class="linenum">2043</span></a>          }
<a name="l2044"><span class="linenum">2044</span></a>  
<a name="l2045"><span class="linenum">2045</span></a>  <span class="comment">        // Extract the information from the XML file.</span>
<a name="l2046"><span class="linenum">2046</span></a>          try {
<a name="l2047"><span class="linenum">2047</span></a>              <a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a> = backup_general_helper::<a class="function" onClick="logFunction('get_backup_information_from_mbz')" href="../_functions/get_backup_information_from_mbz.html" onMouseOver="funcPopup(event,'get_backup_information_from_mbz')">get_backup_information_from_mbz</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> . '/' . <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>);
<a name="l2048"><span class="linenum">2048</span></a>          } catch (backup_helper_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) {
<a name="l2049"><span class="linenum">2049</span></a>  <span class="comment">            // Some error while retrieving the backup informations, skipping...</span>
<a name="l2050"><span class="linenum">2050</span></a>              continue;
<a name="l2051"><span class="linenum">2051</span></a>          }
<a name="l2052"><span class="linenum">2052</span></a>  
<a name="l2053"><span class="linenum">2053</span></a>  <span class="comment">        // Make sure this a course backup.</span>
<a name="l2054"><span class="linenum">2054</span></a>          if (<a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('format')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/format.html">format</a> !== backup::<a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a> || <a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('type')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/type.html">type</a> !== backup::TYPE_1COURSE) {
<a name="l2055"><span class="linenum">2055</span></a>              continue;
<a name="l2056"><span class="linenum">2056</span></a>          }
<a name="l2057"><span class="linenum">2057</span></a>  
<a name="l2058"><span class="linenum">2058</span></a>  <span class="comment">        // Skip the backups created before the short name option was initially introduced (MDL-28657).</span>
<a name="l2059"><span class="linenum">2059</span></a>  <span class="comment">        // This was integrated on the 2nd of May 2012. Let's play safe with timezone and use the 30th of April.</span>
<a name="l2060"><span class="linenum">2060</span></a>          if (<a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('backup_date')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/backup_date.html">backup_date</a> &lt; <a class="var it38002" onMouseOver="hilite(38002)" onMouseOut="lolite()" onClick="logVariable('thirtyapril')" href="../_variables/thirtyapril.html">$thirtyapril</a>) {
<a name="l2061"><span class="linenum">2061</span></a>              continue;
<a name="l2062"><span class="linenum">2062</span></a>          }
<a name="l2063"><span class="linenum">2063</span></a>  
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment">        // Let's check if the file name contains the ID where it is supposed to be, if it is the case then</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment">        // we will skip the file. Of course it could happen that the course ID is identical to the course short name</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment">        // even though really unlikely, but then renaming this file is not necessary. If the ID is not found in the</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">        // file name then it was probably the short name which was used.</span>
<a name="l2068"><span class="linenum">2068</span></a>          <a class="var it38003" onMouseOver="hilite(38003)" onMouseOut="lolite()" onClick="logVariable('idfilename')" href="../_variables/idfilename.html">$idfilename</a> = <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> . <a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('original_course_id')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/original_course_id.html">original_course_id</a> . '-';
<a name="l2069"><span class="linenum">2069</span></a>          <a class="var it38004" onMouseOver="hilite(38004)" onMouseOut="lolite()" onClick="logVariable('idregex')" href="../_variables/idregex.html">$idregex</a> = '#^'.<a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it38003" onMouseOver="hilite(38003)" onMouseOut="lolite()" onClick="logVariable('idfilename')" href="../_variables/idfilename.html">$idfilename</a>, '#').'.*\.mbz$#';
<a name="l2070"><span class="linenum">2070</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it38004" onMouseOver="hilite(38004)" onMouseOut="lolite()" onClick="logVariable('idregex')" href="../_variables/idregex.html">$idregex</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l2071"><span class="linenum">2071</span></a>              continue;
<a name="l2072"><span class="linenum">2072</span></a>          }
<a name="l2073"><span class="linenum">2073</span></a>  
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment">        // Generating the file name manually. We do not use backup_plan_dbops::get_default_backup_filename() because</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment">        // it will query the database to get some course information, and the course could not exist any more.</span>
<a name="l2076"><span class="linenum">2076</span></a>          <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> = <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> . <a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('original_course_id')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/original_course_id.html">original_course_id</a> . '-';
<a name="l2077"><span class="linenum">2077</span></a>          if (<a class="var it38001" onMouseOver="hilite(38001)" onMouseOut="lolite()" onClick="logVariable('useshortname')" href="../_variables/useshortname.html">$useshortname</a>) {
<a name="l2078"><span class="linenum">2078</span></a>              <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('original_course_shortname')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/original_course_shortname.html">original_course_shortname</a>);
<a name="l2079"><span class="linenum">2079</span></a>              <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>), '_'));
<a name="l2080"><span class="linenum">2080</span></a>              <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> .= <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> . '-';
<a name="l2081"><span class="linenum">2081</span></a>          }
<a name="l2082"><span class="linenum">2082</span></a>  
<a name="l2083"><span class="linenum">2083</span></a>          <a class="var it5178" onMouseOver="hilite(5178)" onMouseOut="lolite()" onClick="logVariable('backupdateformat')" href="../_variables/backupdateformat.html">$backupdateformat</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backupnameformat', 'langconfig'));
<a name="l2084"><span class="linenum">2084</span></a>          <a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('backup_date')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/backup_date.html">backup_date</a>, <a class="var it5178" onMouseOver="hilite(5178)" onMouseOut="lolite()" onClick="logVariable('backupdateformat')" href="../_variables/backupdateformat.html">$backupdateformat</a>, 99, false);
<a name="l2085"><span class="linenum">2085</span></a>          <a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>), '_'));
<a name="l2086"><span class="linenum">2086</span></a>          <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> .= <a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>;
<a name="l2087"><span class="linenum">2087</span></a>  
<a name="l2088"><span class="linenum">2088</span></a>          if (isset(<a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('root_settings')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/root_settings.html">root_settings</a>['users']) &amp;&amp; !<a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('root_settings')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/root_settings.html">root_settings</a>['users']) {
<a name="l2089"><span class="linenum">2089</span></a>              <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> .= '-nu';
<a name="l2090"><span class="linenum">2090</span></a>          } else if (isset(<a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('root_settings')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/root_settings.html">root_settings</a>['anonymize']) &amp;&amp; <a class="var it10366" onMouseOver="hilite(10366)" onMouseOut="lolite()" onClick="logVariable('bcinfo')" href="../_variables/bcinfo.html">$bcinfo</a>-&gt;<a onClick="logVariable('root_settings')" class="var it40471" onMouseOver="hilite(40471)" onMouseOut="lolite()" href="../_variables/root_settings.html">root_settings</a>['anonymize']) {
<a name="l2091"><span class="linenum">2091</span></a>              <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> .= '-an';
<a name="l2092"><span class="linenum">2092</span></a>          }
<a name="l2093"><span class="linenum">2093</span></a>          <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> .= '.mbz';
<a name="l2094"><span class="linenum">2094</span></a>  
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment">        // Final check before attempting the renaming.</span>
<a name="l2096"><span class="linenum">2096</span></a>          if (<a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a> == <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> || <a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> . '/' . <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a>)) {
<a name="l2097"><span class="linenum">2097</span></a>              continue;
<a name="l2098"><span class="linenum">2098</span></a>          }
<a name="l2099"><span class="linenum">2099</span></a>          @<a class="phpfunction" onClick="logFunction('rename')" href="../_functions/rename.html" onMouseOver="phpfuncPopup(event,'rename')">rename</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> . '/' . <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> . '/' . <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../_variables/newname.html">$newname</a>);
<a name="l2100"><span class="linenum">2100</span></a>      }
<a name="l2101"><span class="linenum">2101</span></a>  }
<a name="l2102"><span class="linenum">2102</span></a>  
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment">/**</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment"> * Detect duplicate grade item sortorders and resort the</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment"> * items to remove them.</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> */</span>
<a name="l2107"><span class="linenum">2107</span></a>  function <a class="function" onClick="logFunction('upgrade_grade_item_fix_sortorder')" href="../_functions/upgrade_grade_item_fix_sortorder.html" onMouseOver="funcPopup(event,'upgrade_grade_item_fix_sortorder')">upgrade_grade_item_fix_sortorder</a>() {
<a name="l2108"><span class="linenum">2108</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2109"><span class="linenum">2109</span></a>  
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment">    // The simple way to fix these sortorder duplicates would be simply to resort each</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment">    // affected course. But in order to reduce the impact of this upgrade step we're trying</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment">    // to do it more efficiently by doing a series of update statements rather than updating</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment">    // every single grade item in affected courses.</span>
<a name="l2114"><span class="linenum">2114</span></a>  
<a name="l2115"><span class="linenum">2115</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT DISTINCT g1.courseid
<a name="l2116"><span class="linenum">2116</span></a>                FROM {grade_items} g1
<a name="l2117"><span class="linenum">2117</span></a>                JOIN {grade_items} g2 ON g1.courseid = g2.courseid
<a name="l2118"><span class="linenum">2118</span></a>               WHERE g1.sortorder = g2.sortorder AND g1.id != g2.id
<a name="l2119"><span class="linenum">2119</span></a>               ORDER BY g1.courseid ASC&quot;;
<a name="l2120"><span class="linenum">2120</span></a>      foreach (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_sql')" href="../_functions/get_fieldset_sql.html" onMouseOver="funcPopup(event,'get_fieldset_sql')">get_fieldset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>) as <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l2121"><span class="linenum">2121</span></a>          <a class="var it2929" onMouseOver="hilite(2929)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('start_delegated_transaction')" href="../_functions/start_delegated_transaction.html" onMouseOver="funcPopup(event,'start_delegated_transaction')">start_delegated_transaction</a>();
<a name="l2122"><span class="linenum">2122</span></a>          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('grade_items', array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>), '', 'id, sortorder, sortorder AS oldsort');
<a name="l2123"><span class="linenum">2123</span></a>  
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment">        // Get all duplicates in course order, highest sort order, and higest id first so that we can make space at the</span>
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment">        // bottom higher end of the sort orders and work down by id.</span>
<a name="l2126"><span class="linenum">2126</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT DISTINCT g1.id, g1.sortorder
<a name="l2127"><span class="linenum">2127</span></a>                  FROM {grade_items} g1
<a name="l2128"><span class="linenum">2128</span></a>                  JOIN {grade_items} g2 ON g1.courseid = g2.courseid
<a name="l2129"><span class="linenum">2129</span></a>                  WHERE g1.sortorder = g2.sortorder AND g1.id != g2.id AND g1.courseid = :courseid
<a name="l2130"><span class="linenum">2130</span></a>                  ORDER BY g1.sortorder DESC, g1.id DESC&quot;;
<a name="l2131"><span class="linenum">2131</span></a>  
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment">        // This is the O(N*N) like the database version we're replacing, but at least the constants are a billion times smaller...</span>
<a name="l2133"><span class="linenum">2133</span></a>          foreach (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)) as <a class="var it10012" onMouseOver="hilite(10012)" onMouseOut="lolite()" onClick="logVariable('duplicate')" href="../_variables/duplicate.html">$duplicate</a>) {
<a name="l2134"><span class="linenum">2134</span></a>              foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l2135"><span class="linenum">2135</span></a>                  if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('sortorder')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> &gt; <a class="var it10012" onMouseOver="hilite(10012)" onMouseOut="lolite()" onClick="logVariable('duplicate')" href="../_variables/duplicate.html">$duplicate</a>-&gt;<a onClick="logVariable('sortorder')" class="var it40068" onMouseOver="hilite(40068)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> || (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('sortorder')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> == <a class="var it10012" onMouseOver="hilite(10012)" onMouseOut="lolite()" onClick="logVariable('duplicate')" href="../_variables/duplicate.html">$duplicate</a>-&gt;<a onClick="logVariable('sortorder')" class="var it40068" onMouseOver="hilite(40068)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> &amp;&amp; <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &gt; <a class="var it10012" onMouseOver="hilite(10012)" onMouseOut="lolite()" onClick="logVariable('duplicate')" href="../_variables/duplicate.html">$duplicate</a>-&gt;<a onClick="logVariable('id')" class="var it40068" onMouseOver="hilite(40068)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2136"><span class="linenum">2136</span></a>                      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('sortorder')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> += 1;
<a name="l2137"><span class="linenum">2137</span></a>                  }
<a name="l2138"><span class="linenum">2138</span></a>              }
<a name="l2139"><span class="linenum">2139</span></a>          }
<a name="l2140"><span class="linenum">2140</span></a>          foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>) {
<a name="l2141"><span class="linenum">2141</span></a>              if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('sortorder')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> != <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('oldsort')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/oldsort.html">oldsort</a>) {
<a name="l2142"><span class="linenum">2142</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('grade_items', array('id' =&gt; <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'sortorder' =&gt; <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('sortorder')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>));
<a name="l2143"><span class="linenum">2143</span></a>              }
<a name="l2144"><span class="linenum">2144</span></a>          }
<a name="l2145"><span class="linenum">2145</span></a>  
<a name="l2146"><span class="linenum">2146</span></a>          <a class="var it2929" onMouseOver="hilite(2929)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a>-&gt;<a class="function" onClick="logFunction('allow_commit')" href="../_functions/allow_commit.html" onMouseOver="funcPopup(event,'allow_commit')">allow_commit</a>();
<a name="l2147"><span class="linenum">2147</span></a>      }
<a name="l2148"><span class="linenum">2148</span></a>  }
<a name="l2149"><span class="linenum">2149</span></a>  
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment">/**</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment"> * Detect file areas with missing root directory records and add them.</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment"> */</span>
<a name="l2153"><span class="linenum">2153</span></a>  function <a class="function" onClick="logFunction('upgrade_fix_missing_root_folders')" href="../_functions/upgrade_fix_missing_root_folders.html" onMouseOver="funcPopup(event,'upgrade_fix_missing_root_folders')">upgrade_fix_missing_root_folders</a>() {
<a name="l2154"><span class="linenum">2154</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2155"><span class="linenum">2155</span></a>  
<a name="l2156"><span class="linenum">2156</span></a>      <a class="var it2929" onMouseOver="hilite(2929)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('start_delegated_transaction')" href="../_functions/start_delegated_transaction.html" onMouseOver="funcPopup(event,'start_delegated_transaction')">start_delegated_transaction</a>();
<a name="l2157"><span class="linenum">2157</span></a>  
<a name="l2158"><span class="linenum">2158</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT contextid, component, filearea, itemid
<a name="l2159"><span class="linenum">2159</span></a>                FROM {files}
<a name="l2160"><span class="linenum">2160</span></a>               <a class="function" onClick="logFunction('WHERE')" href="../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> (component &lt;&gt; 'user' OR filearea &lt;&gt; 'draft')
<a name="l2161"><span class="linenum">2161</span></a>            GROUP BY contextid, component, filearea, itemid
<a name="l2162"><span class="linenum">2162</span></a>              HAVING <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(CASE WHEN filename = '.' AND filepath = '/' THEN 1 ELSE 0 END) = 0&quot;;
<a name="l2163"><span class="linenum">2163</span></a>  
<a name="l2164"><span class="linenum">2164</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l2165"><span class="linenum">2165</span></a>      <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a> = array('filepath' =&gt; '/',
<a name="l2166"><span class="linenum">2166</span></a>          'filename' =&gt; '.',
<a name="l2167"><span class="linenum">2167</span></a>          'userid' =&gt; 0, // Don't rely on any particular user for these system records.
<a name="l2168"><span class="linenum">2168</span></a>          'filesize' =&gt; 0,
<a name="l2169"><span class="linenum">2169</span></a>          'timecreated' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),
<a name="l2170"><span class="linenum">2170</span></a>          'timemodified' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),
<a name="l2171"><span class="linenum">2171</span></a>          'contenthash' =&gt; <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(''));
<a name="l2172"><span class="linenum">2172</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>) {
<a name="l2173"><span class="linenum">2173</span></a>          <a class="var it16798" onMouseOver="hilite(16798)" onMouseOut="lolite()" onClick="logVariable('pathhash')" href="../_variables/pathhash.html">$pathhash</a> = <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(&quot;/<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('contextid')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>/<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('component')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/component.html">component</a>/<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('filearea')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/filearea.html">filearea</a>/<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('itemid')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a>/.&quot;);
<a name="l2174"><span class="linenum">2174</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('files', (array)<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> + <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a> +
<a name="l2175"><span class="linenum">2175</span></a>              array('pathnamehash' =&gt; <a class="var it16798" onMouseOver="hilite(16798)" onMouseOut="lolite()" onClick="logVariable('pathhash')" href="../_variables/pathhash.html">$pathhash</a>));
<a name="l2176"><span class="linenum">2176</span></a>      }
<a name="l2177"><span class="linenum">2177</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2178"><span class="linenum">2178</span></a>      <a class="var it2929" onMouseOver="hilite(2929)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a>-&gt;<a class="function" onClick="logFunction('allow_commit')" href="../_functions/allow_commit.html" onMouseOver="funcPopup(event,'allow_commit')">allow_commit</a>();
<a name="l2179"><span class="linenum">2179</span></a>  }
<a name="l2180"><span class="linenum">2180</span></a>  
<a name="l2181"><span class="linenum">2181</span></a>  <span class="comment">/**</span>
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment"> * Detect draft file areas with missing root directory records and add them.</span>
<a name="l2183"><span class="linenum">2183</span></a>  <span class="comment"> */</span>
<a name="l2184"><span class="linenum">2184</span></a>  function <a class="function" onClick="logFunction('upgrade_fix_missing_root_folders_draft')" href="../_functions/upgrade_fix_missing_root_folders_draft.html" onMouseOver="funcPopup(event,'upgrade_fix_missing_root_folders_draft')">upgrade_fix_missing_root_folders_draft</a>() {
<a name="l2185"><span class="linenum">2185</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2186"><span class="linenum">2186</span></a>  
<a name="l2187"><span class="linenum">2187</span></a>      <a class="var it2929" onMouseOver="hilite(2929)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('start_delegated_transaction')" href="../_functions/start_delegated_transaction.html" onMouseOver="funcPopup(event,'start_delegated_transaction')">start_delegated_transaction</a>();
<a name="l2188"><span class="linenum">2188</span></a>  
<a name="l2189"><span class="linenum">2189</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT contextid, itemid, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(timecreated) AS timecreated, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(timemodified) AS timemodified
<a name="l2190"><span class="linenum">2190</span></a>                FROM {files}
<a name="l2191"><span class="linenum">2191</span></a>               <a class="function" onClick="logFunction('WHERE')" href="../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> (component = 'user' AND filearea = 'draft')
<a name="l2192"><span class="linenum">2192</span></a>            GROUP BY contextid, itemid
<a name="l2193"><span class="linenum">2193</span></a>              HAVING <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(CASE WHEN filename = '.' AND filepath = '/' THEN 1 ELSE 0 END) = 0&quot;;
<a name="l2194"><span class="linenum">2194</span></a>  
<a name="l2195"><span class="linenum">2195</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l2196"><span class="linenum">2196</span></a>      <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a> = array('component' =&gt; 'user',
<a name="l2197"><span class="linenum">2197</span></a>          'filearea' =&gt; 'draft',
<a name="l2198"><span class="linenum">2198</span></a>          'filepath' =&gt; '/',
<a name="l2199"><span class="linenum">2199</span></a>          'filename' =&gt; '.',
<a name="l2200"><span class="linenum">2200</span></a>          'userid' =&gt; 0, // Don't rely on any particular user for these system records.
<a name="l2201"><span class="linenum">2201</span></a>          'filesize' =&gt; 0,
<a name="l2202"><span class="linenum">2202</span></a>          'contenthash' =&gt; <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(''));
<a name="l2203"><span class="linenum">2203</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>) {
<a name="l2204"><span class="linenum">2204</span></a>          <a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('pathnamehash')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/pathnamehash.html">pathnamehash</a> = <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(&quot;/<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('contextid')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>/user/draft/<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('itemid')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a>/.&quot;);
<a name="l2205"><span class="linenum">2205</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('files', (array)<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> + <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>);
<a name="l2206"><span class="linenum">2206</span></a>      }
<a name="l2207"><span class="linenum">2207</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2208"><span class="linenum">2208</span></a>      <a class="var it2929" onMouseOver="hilite(2929)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a>-&gt;<a class="function" onClick="logFunction('allow_commit')" href="../_functions/allow_commit.html" onMouseOver="funcPopup(event,'allow_commit')">allow_commit</a>();
<a name="l2209"><span class="linenum">2209</span></a>  }
<a name="l2210"><span class="linenum">2210</span></a>  
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment">/**</span>
<a name="l2212"><span class="linenum">2212</span></a>  <span class="comment"> * This function verifies that the database is not using an unsupported storage engine.</span>
<a name="l2213"><span class="linenum">2213</span></a>  <span class="comment"> *</span>
<a name="l2214"><span class="linenum">2214</span></a>  <span class="comment"> * @param environment_results $result object to update, if relevant</span>
<a name="l2215"><span class="linenum">2215</span></a>  <span class="comment"> * @return environment_results|null updated results object, or null if the storage engine is supported</span>
<a name="l2216"><span class="linenum">2216</span></a>  <span class="comment"> */</span>
<a name="l2217"><span class="linenum">2217</span></a>  function <a class="function" onClick="logFunction('check_database_storage_engine')" href="../_functions/check_database_storage_engine.html" onMouseOver="funcPopup(event,'check_database_storage_engine')">check_database_storage_engine</a>(environment_results <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l2218"><span class="linenum">2218</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2219"><span class="linenum">2219</span></a>  
<a name="l2220"><span class="linenum">2220</span></a>  <span class="comment">    // Check if MySQL is the DB family (this will also be the same for MariaDB).</span>
<a name="l2221"><span class="linenum">2221</span></a>      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_dbfamily')" href="../_functions/get_dbfamily.html" onMouseOver="funcPopup(event,'get_dbfamily')">get_dbfamily</a>() == 'mysql') {
<a name="l2222"><span class="linenum">2222</span></a>  <span class="comment">        // Get the database engine we will either be using to install the tables, or what we are currently using.</span>
<a name="l2223"><span class="linenum">2223</span></a>          <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../_variables/engine.html">$engine</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_dbengine')" href="../_functions/get_dbengine.html" onMouseOver="funcPopup(event,'get_dbengine')">get_dbengine</a>();
<a name="l2224"><span class="linenum">2224</span></a>  <span class="comment">        // Check if MyISAM is the storage engine that will be used, if so, do not proceed and display an error.</span>
<a name="l2225"><span class="linenum">2225</span></a>          if (<a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../_variables/engine.html">$engine</a> == 'MyISAM') {
<a name="l2226"><span class="linenum">2226</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('unsupported_db_storage_engine');
<a name="l2227"><span class="linenum">2227</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2228"><span class="linenum">2228</span></a>              return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2229"><span class="linenum">2229</span></a>          }
<a name="l2230"><span class="linenum">2230</span></a>      }
<a name="l2231"><span class="linenum">2231</span></a>  
<a name="l2232"><span class="linenum">2232</span></a>      return null;
<a name="l2233"><span class="linenum">2233</span></a>  }
<a name="l2234"><span class="linenum">2234</span></a>  
<a name="l2235"><span class="linenum">2235</span></a>  <span class="comment">/**</span>
<a name="l2236"><span class="linenum">2236</span></a>  <span class="comment"> * Method used to check the usage of slasharguments config and display a warning message.</span>
<a name="l2237"><span class="linenum">2237</span></a>  <span class="comment"> *</span>
<a name="l2238"><span class="linenum">2238</span></a>  <span class="comment"> * @param environment_results $result object to update, if relevant.</span>
<a name="l2239"><span class="linenum">2239</span></a>  <span class="comment"> * @return environment_results|null updated results or null if slasharguments is disabled.</span>
<a name="l2240"><span class="linenum">2240</span></a>  <span class="comment"> */</span>
<a name="l2241"><span class="linenum">2241</span></a>  function <a class="function" onClick="logFunction('check_slasharguments')" href="../_functions/check_slasharguments.html" onMouseOver="funcPopup(event,'check_slasharguments')">check_slasharguments</a>(environment_results <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>){
<a name="l2242"><span class="linenum">2242</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2243"><span class="linenum">2243</span></a>  
<a name="l2244"><span class="linenum">2244</span></a>      if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('slasharguments')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/slasharguments.html">slasharguments</a>)) {
<a name="l2245"><span class="linenum">2245</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('slasharguments');
<a name="l2246"><span class="linenum">2246</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2247"><span class="linenum">2247</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2248"><span class="linenum">2248</span></a>      }
<a name="l2249"><span class="linenum">2249</span></a>  
<a name="l2250"><span class="linenum">2250</span></a>      return null;
<a name="l2251"><span class="linenum">2251</span></a>  }
<a name="l2252"><span class="linenum">2252</span></a>  
<a name="l2253"><span class="linenum">2253</span></a>  <span class="comment">/**</span>
<a name="l2254"><span class="linenum">2254</span></a>  <span class="comment"> * This function verifies if the database has tables using innoDB Antelope row format.</span>
<a name="l2255"><span class="linenum">2255</span></a>  <span class="comment"> *</span>
<a name="l2256"><span class="linenum">2256</span></a>  <span class="comment"> * @param environment_results $result</span>
<a name="l2257"><span class="linenum">2257</span></a>  <span class="comment"> * @return environment_results|null updated results object, or null if no Antelope table has been found.</span>
<a name="l2258"><span class="linenum">2258</span></a>  <span class="comment"> */</span>
<a name="l2259"><span class="linenum">2259</span></a>  function <a class="function" onClick="logFunction('check_database_tables_row_format')" href="../_functions/check_database_tables_row_format.html" onMouseOver="funcPopup(event,'check_database_tables_row_format')">check_database_tables_row_format</a>(environment_results <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l2260"><span class="linenum">2260</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2261"><span class="linenum">2261</span></a>  
<a name="l2262"><span class="linenum">2262</span></a>      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_dbfamily')" href="../_functions/get_dbfamily.html" onMouseOver="funcPopup(event,'get_dbfamily')">get_dbfamily</a>() == 'mysql') {
<a name="l2263"><span class="linenum">2263</span></a>          <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../_variables/generator.html">$generator</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;generator;
<a name="l2264"><span class="linenum">2264</span></a>  
<a name="l2265"><span class="linenum">2265</span></a>          foreach (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_tables')" href="../_functions/get_tables.html" onMouseOver="funcPopup(event,'get_tables')">get_tables</a>(false) as <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>) {
<a name="l2266"><span class="linenum">2266</span></a>              <a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../_variables/columns.html">$columns</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, false);
<a name="l2267"><span class="linenum">2267</span></a>              <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> = <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../_variables/generator.html">$generator</a>-&gt;<a class="function" onClick="logFunction('guess_antelope_row_size')" href="../_functions/guess_antelope_row_size.html" onMouseOver="funcPopup(event,'guess_antelope_row_size')">guess_antelope_row_size</a>(<a class="var it1020" onMouseOver="hilite(1020)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../_variables/columns.html">$columns</a>);
<a name="l2268"><span class="linenum">2268</span></a>              <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row_format')" href="../_functions/get_row_format.html" onMouseOver="funcPopup(event,'get_row_format')">get_row_format</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l2269"><span class="linenum">2269</span></a>  
<a name="l2270"><span class="linenum">2270</span></a>              if (<a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> &lt;= <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../_variables/generator.html">$generator</a>::ANTELOPE_MAX_ROW_SIZE) {
<a name="l2271"><span class="linenum">2271</span></a>                  continue;
<a name="l2272"><span class="linenum">2272</span></a>              }
<a name="l2273"><span class="linenum">2273</span></a>  
<a name="l2274"><span class="linenum">2274</span></a>              if (<a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> === 'Compact' or <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> === 'Redundant') {
<a name="l2275"><span class="linenum">2275</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('unsupported_db_table_row_format');
<a name="l2276"><span class="linenum">2276</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2277"><span class="linenum">2277</span></a>                  return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2278"><span class="linenum">2278</span></a>              }
<a name="l2279"><span class="linenum">2279</span></a>          }
<a name="l2280"><span class="linenum">2280</span></a>      }
<a name="l2281"><span class="linenum">2281</span></a>  
<a name="l2282"><span class="linenum">2282</span></a>      return null;
<a name="l2283"><span class="linenum">2283</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'continue_button': ['continue_button', 'Displays a continue button ', [['backup/util/ui','renderer.php',501],['lib','outputrenderers.php',2875]], 104],
'set_config': ['set_config', 'Set a configuration value for this plugin ', [['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515],['lib','moodlelib.php',1331],['lib','enrollib.php',1152],['lib/editor/tinymce/classes','plugin.php',84]], 985],
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6378]], 61],
'get_config': ['get_config', 'Get a configuration value for this plugin ', [['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546],['question/engine','bank.php',109],['lib','moodlelib.php',1404],['lib','enrollib.php',1141],['lib/editor/tinymce/classes','plugin.php',73],['admin/tool/log/classes/helper','store.php',63]], 847],
'upgrade_grade_item_fix_sortorder': ['upgrade_grade_item_fix_sortorder', 'Detect duplicate grade item sortorders and resort the items to remove them. ', [['lib','upgradelib.php',2103]], 2],
'format_backtrace': ['format_backtrace', 'Formats a backtrace ready for output. ', [['lib','setuplib.php',697]], 16],
'where': ['where', 'Add where clause ', [['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntityQuery.php',120],['question/classes/bank/search','category_condition.php',96],['question/classes/bank/search','hidden_condition.php',53],['question/engine','datalib.php',1882],['question/engine','datalib.php',1964]], 61],
'message_update_processors': ['message_update_processors', 'This function populates default message preferences for all existing providers when the new message processor is added. ', [['lib','messagelib.php',290]], 3],
'get_all_versions_hash': ['get_all_versions_hash', 'Returns hash of all versions including core and all plugins. ', [['lib/classes','component.php',1069]], 5],
'exists': ['exists', 'Checks whether or not the variable exists. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',73],['lib/horde/framework/Horde','Variables.php',101],['admin/tool/health','index.php',139],['admin/tool/health','index.php',160],['admin/tool/health','index.php',184],['admin/tool/health','index.php',208],['admin/tool/health','index.php',229],['admin/tool/health','index.php',248],['admin/tool/health','index.php',267],['admin/tool/health','index.php',313],['admin/tool/health','index.php',334],['admin/tool/health','index.php',420],['admin/tool/health','index.php',444],['admin/tool/health','index.php',481],['admin/tool/health','index.php',506],['admin/tool/health','index.php',554],['admin/tool/health','index.php',617],['admin/tool/health','index.php',707],['admin/tool/health','index.php',777],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',468],['admin/tool/uploadcourse/classes','course.php',252]], 56],
'getdescription': ['getdescription', '', [['lib/alfresco/Service','Version.php',112],['lib/minify/lib/MrClay/Cli','Arg.php',136],['lib/zend/Zend/Server/Reflection','Parameter.php',115],['lib/google/src/Google/Service','Fusiontables.php',1407],['lib/google/src/Google/Service','Fusiontables.php',2180],['lib/google/src/Google/Service','QPXExpress.php',209],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',455],['lib/google/src/Google/Service','Blogger.php',1721],['lib/google/src/Google/Service','Manager.php',503],['lib/google/src/Google/Service','Manager.php',621],['lib/google/src/Google/Service','Manager.php',804],['lib/google/src/Google/Service','Manager.php',885],['lib/google/src/Google/Service','Manager.php',974],['lib/google/src/Google/Service','Manager.php',1340],['lib/google/src/Google/Service','Manager.php',1637],['lib/google/src/Google/Service','Manager.php',1801],['lib/google/src/Google/Service','Plus.php',656],['lib/google/src/Google/Service','Plus.php',1448],['lib/google/src/Google/Service','Plus.php',2193],['lib/google/src/Google/Service','Plus.php',3244],['lib/zend/Zend/Service/Simpy','Watchlist.php',142],['lib/zend/Zend/Server/Method','Parameter.php',123],['lib/google/src/Google/Service','Genomics.php',2599],['lib/google/src/Google/Service','Genomics.php',2959],['lib/google/src/Google/Service','Genomics.php',3323],['lib/google/src/Google/Service','PlusDomains.php',916],['lib/google/src/Google/Service','PlusDomains.php',1753],['lib/google/src/Google/Service','PlusDomains.php',2094],['lib/google/src/Google/Service','PlusDomains.php',3414],['lib/google/src/Google/Service','Drive.php',4060],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',181],['lib/google/src/Google/Service','Books.php',3131],['lib/google/src/Google/Service','Books.php',4663],['lib/google/src/Google/Service','Books.php',4923],['lib/google/src/Google/Service','Books.php',5881],['lib/google/src/Google/Service','AdExchangeSeller.php',1168],['lib/google/src/Google/Service','Bigquery.php',981],['lib/google/src/Google/Service','Bigquery.php',2659],['lib/google/src/Google/Service','Bigquery.php',2968],['lib/google/src/Google/Service','Groupssettings.php',242],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',425],['lib/google/src/Google/Service','YouTube.php',4212],['lib/google/src/Google/Service','YouTube.php',5022],['lib/google/src/Google/Service','YouTube.php',5123],['lib/google/src/Google/Service','YouTube.php',6988],['lib/google/src/Google/Service','YouTube.php',7294],['lib/google/src/Google/Service','YouTube.php',7779],['lib/google/src/Google/Service','YouTube.php',7995],['lib/google/src/Google/Service','YouTube.php',8383],['lib/google/src/Google/Service','YouTube.php',8649],['lib/google/src/Google/Service','YouTube.php',8710],['lib/google/src/Google/Service','YouTube.php',10135],['lib/google/src/Google/Service','Autoscaler.php',550],['lib/google/src/Google/Service','Autoscaler.php',1241],['lib/google/src/Google/Service','Autoscaler.php',1380],['lib/google/src/Google/Service','ShoppingContent.php',3127],['lib/zend/Zend/Service/Simpy','Note.php',206],['lib/zend/Zend/Server/Reflection','ReturnValue.php',85],['lib/google/src/Google/Service','Fitness.php',1085],['lib/google/src/Google/Service','Directory.php',3260],['lib/google/src/Google/Service','Directory.php',3997],['lib/google/src/Google/Service','Directory.php',5075],['lib/zend/Zend/Service/Technorati','Author.php',146],['lib/phpexcel/PHPExcel','DocumentProperties.php',262],['lib/google/src/Google/Service','Container.php',502],['lib/google/src/Google/Service','AndroidPublisher.php',2700],['lib/google/src/Google/Service','Games.php',2293],['lib/google/src/Google/Service','Games.php',2868],['lib/google/src/Google/Service','Games.php',3135],['lib/google/src/Google/Service','Games.php',5358],['lib/google/src/Google/Service','Games.php',5739],['lib/google/src/Google/Service','Games.php',6576],['lib/google/src/Google/Service','Games.php',6859],['lib/google/src/Google/Service','MapsEngine.php',3380],['lib/google/src/Google/Service','MapsEngine.php',4050],['lib/google/src/Google/Service','MapsEngine.php',4291],['lib/google/src/Google/Service','MapsEngine.php',4591],['lib/google/src/Google/Service','MapsEngine.php',5240],['lib/google/src/Google/Service','MapsEngine.php',5339],['lib/google/src/Google/Service','MapsEngine.php',5469],['lib/google/src/Google/Service','MapsEngine.php',5639],['lib/google/src/Google/Service','MapsEngine.php',5805],['lib/google/src/Google/Service','MapsEngine.php',6160],['lib/horde/framework/Horde/Mime','Part.php',802],['lib/google/src/Google/Service','Compute.php',5550],['lib/google/src/Google/Service','Compute.php',6003],['lib/google/src/Google/Service','Compute.php',6082],['lib/google/src/Google/Service','Compute.php',6339],['lib/google/src/Google/Service','Compute.php',6615],['lib/google/src/Google/Service','Compute.php',7005],['lib/google/src/Google/Service','Compute.php',7205],['lib/google/src/Google/Service','Compute.php',7547],['lib/google/src/Google/Service','Compute.php',7608],['lib/google/src/Google/Service','Compute.php',7801],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8300],['lib/google/src/Google/Service','Compute.php',8405],['lib/google/src/Google/Service','Compute.php',8685],['lib/google/src/Google/Service','Compute.php',9099],['lib/google/src/Google/Service','Compute.php',9801],['lib/google/src/Google/Service','Compute.php',9889],['lib/google/src/Google/Service','Compute.php',10017],['lib/google/src/Google/Service','Compute.php',10186],['lib/google/src/Google/Service','Compute.php',10534],['lib/google/src/Google/Service','Compute.php',10735],['lib/google/src/Google/Service','Compute.php',10863],['lib/google/src/Google/Service','Compute.php',11169],['lib/google/src/Google/Service','Compute.php',11658],['lib/google/src/Google/Service','Compute.php',11814],['lib/google/src/Google/Service','Compute.php',11991],['lib/google/src/Google/Service','Compute.php',12130],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',173],['lib/google/src/Google/Service','CloudMonitoring.php',573],['lib/google/src/Google/Service','CloudMonitoring.php',623],['lib/google/src/Google/Service','Calendar.php',2003],['lib/google/src/Google/Service','Calendar.php',2183],['lib/google/src/Google/Service','Calendar.php',2643],['lib/google/src/Google/Service','Calendar.php',3357],['lib/google/src/Google/Service','Analytics.php',4193],['lib/google/src/Google/Service','Analytics.php',5161],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',193],['lib/google/src/Google/Service','Tasks.php',733],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',105],['lib/zend/Zend/Service/SlideShare','SlideShow.php',340],['lib/google/src/Google/Service','AdSense.php',3085],['lib/google/src/Google/Service','Dns.php',619],['lib/google/src/Google/Service','Replicapool.php',663],['lib/google/src/Google/Service','Resourceviews.php',1047]], 18],
'upgrade_plugins_blocks': ['upgrade_plugins_blocks', 'This function finds all available blocks and install them into blocks table or do all the upgrade process if newer. ', [['lib','upgradelib.php',742]], 1],
'check_slasharguments': ['check_slasharguments', 'Method used to check the usage of slasharguments config and display a warning message. ', [['lib','upgradelib.php',2235]], 0],
'upgrade_finished': ['upgrade_finished', 'Indicates upgrade is finished. ', [['lib','upgradelib.php',1316]], 4],
'message_update_providers': ['message_update_providers', 'Updates the message_providers table with the current set of message providers ', [['lib','messagelib.php',233]], 11],
'update_handlers_for_component': ['update_handlers_for_component', 'Update the database to create, update, and remove handlers. ', [['lib/classes/message/inbound','manager.php',62]], 11],
'external_delete_descriptions': ['external_delete_descriptions', 'Delete all pre-built services (+ related tokens) and external functions information defined in the specified component. ', [['lib','externallib.php',619]], 2],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2762],['lib','outputrenderers.php',4128],['lib','outputrenderers.php',4201]], 495],
'register_function': ['register_function', 'Register custom shutdown function. ', [['lib/classes','shutdown_manager.php',53]], 11],
'external_update_descriptions': ['external_update_descriptions', 'Web service discovery function used during install and upgrade. ', [['lib','upgradelib.php',1008]], 11],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'admin_mnet_method_profile': ['admin_mnet_method_profile', 'Given some sort of Zend Reflection function/method object, return a profile array, ready to be serialized and stored ', [['lib','upgradelib.php',1859]], 1],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib/classes','component.php',1003],['lib','deprecatedlib.php',543]], 44],
'getreturnvalue': ['getreturnvalue', 'Retrieve the return value object ', [['lib/zend/Zend/Server/Reflection','Prototype.php',83],['lib/zend/Zend/XmlRpc','Response.php',121]], 3],
'xmldb_main_install': ['xmldb_main_install', 'Main post-install tasks to be executed after the BD schema is available ', [['lib/db','install.php',31]], 1],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1578]], 58],
'getparameters': ['getparameters', '', [['lib/google/src/Google/Service','Reports.php',628],['lib/google/src/Google/Service','Reports.php',901],['lib/google/src/Google/Service','Audit.php',342],['lib/zend/Zend/Server/Reflection','Prototype.php',94],['lib/zend/Zend/Server/Method','Prototype.php',135]], 12],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'get_fieldset_sql': ['get_fieldset_sql', 'Selects records and return values (first field) as an array using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',800],['lib/dml','oci_native_moodle_database.php',1151],['lib/dml','sqlsrv_native_moodle_database.php',858],['lib/dml','mssql_native_moodle_database.php',775],['lib/dml','mysqli_native_moodle_database.php',1098],['lib/dml/tests','dml_test.php',5425],['lib/dml','pdo_moodle_database.php',287]], 51],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 315],
'get_row_format': ['get_row_format', 'Get the row format from the database schema. ', [['lib/dml','mysqli_native_moodle_database.php',285]], 5],
'start_delegated_transaction': ['start_delegated_transaction', 'On DBs that support it, switch to transaction mode and begin a transaction you\'ll need to ensure you call allow_commit() on the returned object or your changes *will* be lost. ', [['lib/dml','moodle_database.php',2344]], 137],
'update_capabilities': ['update_capabilities', 'Updates the capabilities table with the component capability definitions. If no parameters are given, the function updates the core moodle capabilities. ', [['lib','accesslib.php',2681]], 13],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'allow_commit': ['allow_commit', 'Commit delegated transaction. The real database commit SQL is executed only after committing all delegated transactions. ', [['lib/dml','moodle_transaction.php',78]], 127],
'mark_dirty': ['mark_dirty', 'Mark a context as dirty (with timestamp) so as to force reloading of the context. ', [['lib','accesslib.php',5792]], 42],
'translation_exists': ['translation_exists', 'Checks if the translation exists for the language ', [['lib/classes','string_manager_standard.php',492],['lib/classes','string_manager.php',93],['lib/classes','string_manager_install.php',198]], 10],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'reflectclass': ['reflectclass', 'Perform class reflection to create dispatch signatures ', [['lib/zend/Zend/Server','Reflection.php',43]], 6],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6481]], 147],
'js_init_code': ['js_init_code', 'Add short static javascript code fragment to page footer. This is intended primarily for loading of js modules and initialising page layout. Ideally the JS code fragment should be stored in plugin renderer so that themes may override it. ', [['lib','outputrequirementslib.php',1074]], 7],
'get_plugin_directory': ['get_plugin_directory', 'Returns the exact absolute path to plugin directory. ', [['lib/classes','component.php',890],['lib','deprecatedlib.php',508]], 21],
'get_dbengine': ['get_dbengine', 'Returns the current MySQL db engine. ', [['lib/dml','mysqli_native_moodle_database.php',144]], 7],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'setinfo': ['setinfo', '', [['lib/google/src/Google/Service','Genomics.php',1696],['lib/google/src/Google/Service','Genomics.php',2151],['lib/google/src/Google/Service','Genomics.php',2611],['lib/google/src/Google/Service','Genomics.php',2854],['lib/google/src/Google/Service','Genomics.php',2979],['lib/google/src/Google/Service','Genomics.php',4120],['lib','environmentlib.php',1324]], 9],
'upgrade_core': ['upgrade_core', 'Upgrade moodle core ', [['lib','upgradelib.php',1542]], 2],
'upgrade_stale_php_files_present': ['upgrade_stale_php_files_present', 'Detect if there are leftovers in PHP source files. ', [['lib','upgradelib.php',361]], 2],
'userdate': ['userdate', 'Also in ADORecordSet. ', [['lib/adodb','adodb.inc.php',2607],['lib/adodb','adodb.inc.php',3271],['lib','moodlelib.php',2150]], 496],
'getmessage': ['getmessage', 'Get the error message from an error object. ', [['lib/pear','PEAR.php',921],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Reports.php',1105],['lib/google/src/Google/Service','Gmail.php',1283],['lib/google/src/Google/Service','IdentityToolkit.php',1159],['lib/google/src/Google/Service','Dfareporting.php',2039],['lib/zend/Zend/XmlRpc','Fault.php',152],['lib/google/src/Google/Service','Books.php',3266],['lib/google/src/Google/Service','Books.php',3951],['lib/google/src/Google/Service','AdExchangeSeller.php',1042],['lib/google/src/Google/Service','Bigquery.php',1245],['lib/google/src/Google/Service','Freebase.php',440],['lib/google/src/Google/Service','Autoscaler.php',1078],['lib/google/src/Google/Service','Autoscaler.php',1170],['lib/google/src/Google/Service','ShoppingContent.php',2096],['lib/google/src/Google/Service','ShoppingContent.php',2498],['lib/google/src/Google/Service','ShoppingContent.php',2543],['lib/zend/Zend/Http','Response.php',323],['lib/google/src/Google/Service','Compute.php',5785],['lib/google/src/Google/Service','Compute.php',6842],['lib/google/src/Google/Service','Compute.php',6934],['lib/google/src/Google/Service','Compute.php',7440],['lib/google/src/Google/Service','Compute.php',8566],['lib/google/src/Google/Service','Compute.php',8969],['lib/google/src/Google/Service','Compute.php',9561],['lib/google/src/Google/Service','Compute.php',9653],['lib/google/src/Google/Service','Compute.php',9745],['lib/google/src/Google/Service','Compute.php',10382],['lib/google/src/Google/Service','Compute.php',11098],['lib/google/src/Google/Service','Compute.php',11524],['lib/zend/Zend/Service/DeveloperGarden/Request/SendSms','SendSmsAbstract.php',148],['lib/google/src/Google/Service','AdSense.php',2959],['lib/google/src/Google/Service','Pubsub.php',700],['lib/google/src/Google/Service','Pubsub.php',737],['lib/google/src/Google/Service','Replicapool.php',1151],['lib/google/src/Google/Service','Replicapool.php',1243],['lib/google/src/Google/Service','Resourceviews.php',890],['lib/google/src/Google/Service','Resourceviews.php',982]], 434],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'print_upgrade_part_start': ['print_upgrade_part_start', 'Default start upgrade callback ', [['lib','upgradelib.php',1372]], 2],
'upgrade_noncore': ['upgrade_noncore', 'Upgrade/install other parts of moodle ', [['lib','upgradelib.php',1612]], 3],
'default_exception_handler': ['default_exception_handler', 'Default exception handler ', [['','mdeploy.php',1539],['lib','setuplib.php',330]], 1],
'set_debug': ['set_debug', 'Enable/disable very detailed debugging. ', [['lib/dml','moodle_database.php',1067],['lib/dml/tests','dml_test.php',5419]], 12],
'set_cacheable': ['set_cacheable', 'Sets whether the browser should cache this page or not. ', [['lib','pagelib.php',1320]], 27],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'upgrade_save_orphaned_questions': ['upgrade_save_orphaned_questions', 'Find questions missing an existing category and associate them with a category which purpose is to gather them. ', [['lib','upgradelib.php',1962]], 1],
'build_all_paths': ['build_all_paths', 'Rebuild paths and depths in all context levels. ', [['lib','accesslib.php',5977]], 10],
'tool_langimport_preupgrade_update': ['tool_langimport_preupgrade_update', 'Called during upgrade, we need up-to-date lang pack because it may be used during upgrade... ', [['admin/tool/langimport','lib.php',28]], 1],
'current_language': ['current_language', 'Returns the code for the current language ', [['lib','moodlelib.php',6392]], 44],
'xmldb_main_upgrade': ['xmldb_main_upgrade', 'Main upgrade tasks to be executed on Moodle version bump ', [['lib/db','upgrade.php',45]], 1],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'blocks_add_default_system_blocks': ['blocks_add_default_system_blocks', 'Add the default system-context blocks. E.g. the admin tree. ', [['lib','blocklib.php',2205]], 1],
'record_exists': ['record_exists', 'Test whether a record exists in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1768]], 735],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'get_title': ['get_title', 'Returns the class $title var value. ', [['blocks','moodleblock.class.php',155],['question/classes/bank','checkbox_column.php',36],['completion/criteria','completion_criteria_unenrol.php',92],['lib','authlib.php',510],['completion/criteria','completion_criteria_grade.php',129],['question/classes/bank','modifier_name_column.php',31],['completion/criteria','completion_criteria_activity.php',165],['completion/criteria','completion_criteria_course.php',120],['question/classes/bank','question_name_column.php',32],['question/classes/bank','question_text_row.php',39],['lib/simplepie/library/SimplePie','Enclosure.php',860],['lib/simplepie/library','SimplePie.php',1969],['question/classes/bank','action_column_base.php',28],['enrol','locallib.php',1388],['lib/simplepie/library/SimplePie','Item.php',260],['lib','outputcomponents.php',2759],['completion/criteria','completion_criteria_role.php',118],['badges/criteria','award_criteria.php',162],['completion/criteria','completion_criteria_date.php',106],['enrol/manual','locallib.php',167],['enrol/manual','locallib.php',312],['completion/criteria','completion_criteria_self.php',109],['lib/simplepie/library/SimplePie','Source.php',104],['lib','navigationlib.php',580],['question/classes/bank','creator_name_column.php',32],['completion/criteria','completion_criteria_duration.php',153],['question/classes/bank','question_type_column.php',30]], 71],
'upgrade_set_timeout': ['upgrade_set_timeout', 'Sets maximum expected time needed for upgrade task. Please always make sure that upgrade will not run longer! ', [['lib','upgradelib.php',140]], 19],
'get_tables': ['get_tables', 'Return tables in database WITHOUT current prefix. ', [['lib/dml','pgsql_native_moodle_database.php',304],['lib/dml','oci_native_moodle_database.php',384],['lib/dml','sqlsrv_native_moodle_database.php',366],['lib/dml','sqlite3_pdo_moodle_database.php',137],['lib/dml','mssql_native_moodle_database.php',309],['lib/dml','mysqli_native_moodle_database.php',512],['lib/dml/tests','dml_test.php',5415]], 38],
'upgrade_started': ['upgrade_started', 'Marks start of upgrade, blocks any other access to site. The upgrade is finished at the end of script or after timeout. ', [['lib','upgradelib.php',1269]], 5],
'print_upgrade_separator': ['print_upgrade_separator', '', [['lib','upgradelib.php',1366]], 2],
'core_tables_exist': ['core_tables_exist', 'Checks if the main tables have been installed yet or not. ', [['lib','upgradelib.php',1646]], 1],
'getmethods': ['getmethods', 'Get the method descriptions ', [['webservice/amf','introspector.php',112],['lib/zend/Zend/Server','Definition.php',159],['lib/zend/Zend/Server/Reflection','Class.php',144]], 12],
'raise_memory_limit': ['raise_memory_limit', 'Function to raise the memory limit to a new value. Will respect the memory limit if it is higher, thus allowing settings in php.ini, apache conf or command line switches to override it. ', [['lib','setuplib.php',1139]], 56],
'install_core': ['install_core', 'Install core moodle tables and initialize ', [['lib','upgradelib.php',1485]], 2],
'upgrade_course_completion_remove_duplicates': ['upgrade_course_completion_remove_duplicates', 'This function finds duplicate records (based on combinations of fields that should be unique) and then progamatically generated a "most correct" version of the data, update and removing records as appropriate ', [['lib','upgradelib.php',1888]], 3],
'upgrade_rename_old_backup_files_using_shortname': ['upgrade_rename_old_backup_files_using_shortname', 'Rename old backup files to current backup files. ', [['lib','upgradelib.php',2002]], 1],
'hasmethod': ['hasmethod', 'Does the definition have the given method? ', [['lib/zend/Zend/Server','Definition.php',134]], 10],
'print_upgrade_part_end': ['print_upgrade_part_end', 'Default end upgrade callback ', [['lib','upgradelib.php',1405]], 2],
'upgrade_plugins_modules': ['upgrade_plugins_modules', 'Find and check all modules and load them up or upgrade them if necessary ', [['lib','upgradelib.php',573]], 1],
'upgrade_fix_missing_root_folders_draft': ['upgrade_fix_missing_root_folders_draft', 'Detect draft file areas with missing root directory records and add them. ', [['lib','upgradelib.php',2181]], 2],
'set_debugging': ['set_debugging', 'Alter debugging level for the current request, the change is not saved in database. ', [['lib','weblib.php',2836]], 35],
'get_debug': ['get_debug', 'Returns debug status ', [['lib/dml','moodle_database.php',1076],['lib/dml/tests','dml_test.php',5420]], 6],
'upgrade_mod_savepoint': ['upgrade_mod_savepoint', 'Module upgrade savepoint, marks end of module upgrade blocks It stores module version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',233]], 124],
'upgrade_block_savepoint': ['upgrade_block_savepoint', 'Blocks upgrade savepoint, marks end of blocks upgrade blocks It stores block version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',277]], 12],
'get_exception_info': ['get_exception_info', 'Wrapper to call {@link get_exception_info()}. ', [['lib/tests','setuplib_test.php',497],['lib','setuplib.php',466]], 21],
'upgrade_setup_debug': ['upgrade_setup_debug', '', [['lib','upgradelib.php',1349]], 3],
'log_update_descriptions': ['log_update_descriptions', 'Log_display description function used during install and upgrade. ', [['lib','upgradelib.php',950]], 13],
'upgrade_log': ['upgrade_log', 'Adds log entry into upgrade_log table ', [['lib','upgradelib.php',1203]], 12],
'get_backup_information_from_mbz': ['get_backup_information_from_mbz', 'Load and format all the needed information from a backup file. ', [['backup/util/helper','backup_general_helper.class.php',243]], 3],
'get_dbfamily': ['get_dbfamily', 'Returns database family type - describes SQL dialect Note: can be used before connect() ', [['lib/dml','pgsql_native_moodle_database.php',61],['lib/dml','oci_native_moodle_database.php',67],['lib/dml','sqlsrv_native_moodle_database.php',75],['lib/dml','sqlite3_pdo_moodle_database.php',50],['lib/dml','mssql_native_moodle_database.php',56],['lib/dml','mysqli_native_moodle_database.php',117],['lib/dml/tests','dml_test.php',5406]], 59],
'events_update_definition': ['events_update_definition', 'Updates all of the event definitions within the database. ', [['lib','eventslib.php',119]], 14],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'blocks_add_default_course_blocks': ['blocks_add_default_course_blocks', 'Add the default blocks to a course. ', [['lib','blocklib.php',2172]], 2],
'upgrade_plugins': ['upgrade_plugins', 'Upgrade plugins ', [['lib','upgradelib.php',414]], 1],
'record_exists_select': ['record_exists_select', 'Test whether any records exists in a table which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1781]], 35],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'getprototypes': ['getprototypes', 'Retrieve all prototypes as array of {@link Zend_Server_Reflection_Prototype Zend_Server_Reflection_Prototypes} ', [['lib/zend/Zend/Server/Reflection/Function','Abstract.php',465],['lib/zend/Zend/Server/Method','Definition.php',191]], 6],
'check_database_storage_engine': ['check_database_storage_engine', 'This function verifies that the database is not using an unsupported storage engine. ', [['lib','upgradelib.php',2211]], 0],
'cleanup_instances': ['cleanup_instances', 'Remove stale contexts that belonged to deleted instances. Ideally all code should cleanup contexts properly, unfortunately accidents happen... ', [['lib','accesslib.php',5924]], 7],
'guess_antelope_row_size': ['guess_antelope_row_size', 'Calculate proximate row size when using InnoDB tables in Antelope row format. ', [['lib/ddl','mysql_sql_generator.php',130]], 9],
'upgrade_language_pack': ['upgrade_language_pack', 'Try to upgrade the given language pack (or current language) ', [['lib','upgradelib.php',1444]], 1],
'reflectfunction': ['reflectfunction', 'Perform function reflection to create dispatch signatures ', [['lib/zend/Zend/Server','Reflection.php',79]], 5],
'getname': ['getname', '', [['lib/google/src/Google/Service','Fusiontables.php',1439],['lib/google/src/Google/Service','Fusiontables.php',2031],['lib/google/src/Google/Service','Fusiontables.php',2204],['lib/google/src/Google/Service','Fusiontables.php',2419],['lib/pear/HTML/QuickForm','input.php',89],['lib/form','filemanager.php',109],['lib/xmldb','xmldb_object.php',118],['lib/zend/Zend/Http','Cookie.php',133],['lib/google/src/Google/Service','QPXExpress.php',127],['lib/google/src/Google/Service','QPXExpress.php',171],['lib/google/src/Google/Service','QPXExpress.php',260],['lib/google/src/Google/Service','QPXExpress.php',304],['lib/google/src/Google/Service','QPXExpress.php',1223],['lib/google/src/Google/Service','Blogger.php',1753],['lib/google/src/Google/Service','Blogger.php',2957],['lib/google/src/Google/Service','Doubleclicksearch.php',792],['lib/google/src/Google/Service','Doubleclicksearch.php',818],['lib/google/src/Google/Service','AdExchangeBuyer.php',1339],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',102],['lib/google/src/Google/Service','Manager.php',401],['lib/google/src/Google/Service','Manager.php',637],['lib/google/src/Google/Service','Manager.php',1296],['lib/google/src/Google/Service','Manager.php',1817],['lib/pear/HTML/QuickForm','link.php',89],['lib/google/src/Google/Service','Reports.php',620],['lib/google/src/Google/Service','Reports.php',691],['lib/google/src/Google/Service','Reports.php',1000],['lib/google/src/Google/Service','Customsearch.php',1076],['lib/google/src/Google/Service','Gmail.php',1376],['lib/google/src/Google/Service','Gmail.php',1768],['lib/google/src/Google/Service','Plus.php',912],['lib/google/src/Google/Service','Plus.php',2321],['lib/google/src/Google/Service','Plus.php',2877],['lib/google/src/Google/Service','Plus.php',3268],['lib/google/src/Google/Service','Spectrum.php',245],['lib/zend/Zend/Service/Simpy','Watchlist.php',132],['lib/zend/Zend/Server/Method','Parameter.php',145],['lib/form','editor.php',128],['lib/google/src/Google/Service','Genomics.php',1708],['lib/google/src/Google/Service','Genomics.php',1826],['lib/google/src/Google/Service','Genomics.php',2991],['lib/google/src/Google/Service','Genomics.php',3108],['lib/google/src/Google/Service','Genomics.php',3172],['lib/google/src/Google/Service','Genomics.php',3240],['lib/google/src/Google/Service','Genomics.php',3392],['lib/google/src/Google/Service','Genomics.php',3564],['lib/form','selectgroups.php',114],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',108],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',204],['lib/google/src/Google/Service','Dfareporting.php',1086],['lib/google/src/Google/Service','Dfareporting.php',1404],['lib/google/src/Google/Service','Dfareporting.php',1704],['lib/google/src/Google/Service','Dfareporting.php',2569],['lib/google/src/Google/Service','PlusDomains.php',1180],['lib/google/src/Google/Service','PlusDomains.php',3073],['lib/google/src/Google/Service','PlusDomains.php',3438],['lib/zend/Zend/Server/Method','Definition.php',106],['lib/google/src/Google/Service','Drive.php',2622],['lib/google/src/Google/Service','Drive.php',3011],['lib/google/src/Google/Service','Drive.php',5034],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',107],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',161],['lib/google/src/Google/Service','AdExchangeSeller.php',860],['lib/google/src/Google/Service','AdExchangeSeller.php',1132],['lib/google/src/Google/Service','AdExchangeSeller.php',1466],['lib/google/src/Google/Service','AdExchangeSeller.php',1581],['lib/google/src/Google/Service','Bigquery.php',2992],['lib/pear/HTML/QuickForm','select.php',151],['lib/google/src/Google/Service','Freebase.php',304],['lib/google/src/Google/Service','Freebase.php',338],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',68],['lib/google/src/Google/Service','Groupssettings.php',314],['lib/google/src/Google/Service','YouTube.php',6163],['lib/google/src/Google/Service','YouTube.php',6289],['lib/google/src/Google/Service','Coordinate.php',807],['lib/google/src/Google/Service','Autoscaler.php',574],['lib/google/src/Google/Service','Autoscaler.php',928],['lib/google/src/Google/Service','Autoscaler.php',1273],['lib/google/src/Google/Service','Autoscaler.php',1396],['lib/google/src/Google/Service','Audit.php',334],['lib/google/src/Google/Service','Audit.php',360],['lib/pear/HTML/QuickForm','static.php',78],['lib/google/src/Google/Service','Datastore.php',579],['lib/google/src/Google/Service','Datastore.php',651],['lib/google/src/Google/Service','Datastore.php',668],['lib/google/src/Google/Service','Datastore.php',1096],['lib/google/src/Google/Service','YouTubeAnalytics.php',344],['lib/google/src/Google/Service','YouTubeAnalytics.php',604],['lib/pear/HTML/QuickForm','textarea.php',84],['lib/google/src/Google/Service','ShoppingContent.php',1155],['lib/google/src/Google/Service','ShoppingContent.php',1862],['lib/google/src/Google/Service','ShoppingContent.php',2835],['lib/google/src/Google/Service','ShoppingContent.php',3459],['lib/google/src/Google/Service','ShoppingContent.php',3511],['lib/google/src/Google/Service','Appsactivity.php',388],['lib/google/src/Google/Service','Appsactivity.php',535],['lib/google/src/Google/Service','Appsactivity.php',554],['lib/phpexcel/PHPExcel','NamedRange.php',99],['lib/google/src/Google/Service','SQLAdmin.php',1299],['lib/google/src/Google/Service','SQLAdmin.php',1572],['lib/google/src/Google/Service','Fitness.php',653],['lib/google/src/Google/Service','Fitness.php',817],['lib/google/src/Google/Service','Fitness.php',853],['lib/google/src/Google/Service','Fitness.php',879],['lib/google/src/Google/Service','Fitness.php',1117],['lib/google/src/Google/Service','TagManager.php',1854],['lib/google/src/Google/Service','TagManager.php',1976],['lib/google/src/Google/Service','TagManager.php',2135],['lib/google/src/Google/Service','TagManager.php',2233],['lib/google/src/Google/Service','TagManager.php',2292],['lib/google/src/Google/Service','TagManager.php',2594],['lib/google/src/Google/Service','TagManager.php',2774],['lib/google/src/Google/Service','TagManager.php',2889],['lib/google/src/Google/Service','TagManager.php',3080],['lib/google/src/Google/Service','TagManager.php',3254],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',3308],['lib/google/src/Google/Service','Directory.php',3650],['lib/google/src/Google/Service','Directory.php',4021],['lib/google/src/Google/Service','Directory.php',4618],['lib/google/src/Google/Service','Directory.php',5099],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',116],['lib/pear/HTML/QuickForm','element.php',143],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',62],['lib/google/src/Google/Service','CivicInfo.php',354],['lib/google/src/Google/Service','CivicInfo.php',468],['lib/google/src/Google/Service','CivicInfo.php',542],['lib/google/src/Google/Service','CivicInfo.php',821],['lib/google/src/Google/Service','CivicInfo.php',864],['lib/google/src/Google/Service','CivicInfo.php',901],['lib/google/src/Google/Service','CivicInfo.php',972],['lib/google/src/Google/Service','CivicInfo.php',1008],['lib/google/src/Google/Service','CivicInfo.php',1056],['lib/google/src/Google/Service','CivicInfo.php',1131],['lib/google/src/Google/Service','CivicInfo.php',1215],['lib/google/src/Google/Service','CivicInfo.php',1449],['lib/google/src/Google/Service','Container.php',526],['lib/google/src/Google/Service','Container.php',758],['lib/phpexcel/PHPExcel/Style','Font.php',226],['lib/google/src/Google/Service','AdSenseHost.php',1253],['lib/google/src/Google/Service','AdSenseHost.php',1623],['lib/google/src/Google/Service','AdSenseHost.php',1926],['lib/google/src/Google/Service','AdSenseHost.php',2072],['lib/google/src/Google/Service','Games.php',2357],['lib/google/src/Google/Service','Games.php',2924],['lib/google/src/Google/Service','Games.php',3555],['lib/google/src/Google/Service','Games.php',3631],['lib/google/src/Google/Service','Games.php',3867],['lib/google/src/Google/Service','Games.php',4512],['lib/google/src/Google/Service','Games.php',5430],['lib/google/src/Google/Service','MapsEngine.php',3420],['lib/google/src/Google/Service','MapsEngine.php',3610],['lib/google/src/Google/Service','MapsEngine.php',4066],['lib/google/src/Google/Service','MapsEngine.php',4096],['lib/google/src/Google/Service','MapsEngine.php',4347],['lib/google/src/Google/Service','MapsEngine.php',4639],['lib/google/src/Google/Service','MapsEngine.php',4754],['lib/google/src/Google/Service','MapsEngine.php',4819],['lib/google/src/Google/Service','MapsEngine.php',4876],['lib/google/src/Google/Service','MapsEngine.php',5196],['lib/google/src/Google/Service','MapsEngine.php',5264],['lib/google/src/Google/Service','MapsEngine.php',5355],['lib/google/src/Google/Service','MapsEngine.php',5533],['lib/google/src/Google/Service','MapsEngine.php',5695],['lib/google/src/Google/Service','MapsEngine.php',5829],['lib/google/src/Google/Service','MapsEngine.php',6216],['lib/google/src/Google/Service','MapsEngine.php',6290],['lib/horde/framework/Horde/Mime','Part.php',374],['lib/google/src/Google/Service','Compute.php',5491],['lib/google/src/Google/Service','Compute.php',5574],['lib/google/src/Google/Service','Compute.php',6122],['lib/google/src/Google/Service','Compute.php',6371],['lib/google/src/Google/Service','Compute.php',6639],['lib/google/src/Google/Service','Compute.php',7029],['lib/google/src/Google/Service','Compute.php',7229],['lib/google/src/Google/Service','Compute.php',7648],['lib/google/src/Google/Service','Compute.php',7841],['lib/google/src/Google/Service','Compute.php',8083],['lib/google/src/Google/Service','Compute.php',8429],['lib/google/src/Google/Service','Compute.php',8628],['lib/google/src/Google/Service','Compute.php',8749],['lib/google/src/Google/Service','Compute.php',9131],['lib/google/src/Google/Service','Compute.php',9169],['lib/google/src/Google/Service','Compute.php',9353],['lib/google/src/Google/Service','Compute.php',9809],['lib/google/src/Google/Service','Compute.php',9913],['lib/google/src/Google/Service','Compute.php',10041],['lib/google/src/Google/Service','Compute.php',10218],['lib/google/src/Google/Service','Compute.php',10574],['lib/google/src/Google/Service','Compute.php',10759],['lib/google/src/Google/Service','Compute.php',10895],['lib/google/src/Google/Service','Compute.php',11217],['lib/google/src/Google/Service','Compute.php',11698],['lib/google/src/Google/Service','Compute.php',12023],['lib/google/src/Google/Service','Compute.php',12146],['lib/google/src/Google/Service','CloudMonitoring.php',589],['lib/google/src/Google/Service','Analytics.php',3601],['lib/google/src/Google/Service','Analytics.php',3713],['lib/google/src/Google/Service','Analytics.php',3833],['lib/google/src/Google/Service','Analytics.php',4225],['lib/google/src/Google/Service','Analytics.php',4788],['lib/google/src/Google/Service','Analytics.php',5225],['lib/google/src/Google/Service','Analytics.php',5408],['lib/google/src/Google/Service','Analytics.php',5624],['lib/google/src/Google/Service','Analytics.php',5919],['lib/google/src/Google/Service','Analytics.php',6254],['lib/google/src/Google/Service','Analytics.php',6627],['lib/google/src/Google/Service','Analytics.php',6888],['lib/google/src/Google/Service','Analytics.php',7221],['lib/google/src/Google/Service','Analytics.php',7584],['lib/google/src/Google/Service','Analytics.php',7959],['lib/google/src/Google/Service','Analytics.php',8003],['lib/google/src/Google/Service','Analytics.php',8221],['lib/google/src/Google/Service','Analytics.php',8408],['lib/google/src/Google/Service','Analytics.php',9063],['lib/google/src/Google/Service','Analytics.php',9120],['lib/google/src/Google/Service','Analytics.php',9325],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',125],['lib/google/src/Google/Service','GamesManagement.php',1219],['lib/google/src/Google/Service','Oauth2.php',370],['lib/google/src/Google/Service','Storage.php',1900],['lib/google/src/Google/Service','Storage.php',2571],['lib/google/src/Google/Service','Storage.php',3000],['mod/wiki/editors','wikifiletable.php',66],['lib/google/src/Google/Service','AdSense.php',2151],['lib/google/src/Google/Service','AdSense.php',2566],['lib/google/src/Google/Service','AdSense.php',2905],['lib/google/src/Google/Service','AdSense.php',3049],['lib/google/src/Google/Service','AdSense.php',3373],['lib/google/src/Google/Service','AdSense.php',3454],['lib/google/src/Google/Service','Pubsub.php',943],['lib/google/src/Google/Service','Pubsub.php',976],['lib/zend/Zend/Gdata/App/Extension','Person.php',112],['lib/alfresco/Service','ChildAssociation.php',55],['lib/zend/Zend/Service/Technorati','Weblog.php',212],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',60],['lib/google/src/Google/Service','Translate.php',319],['lib/pear/HTML/QuickForm','group.php',129],['lib/google/src/Google/Service','Dns.php',651],['lib/google/src/Google/Service','Dns.php',842],['lib/pear/HTML/QuickForm','xbutton.php',82],['lib/phpexcel/PHPExcel','Chart.php',165],['lib/google/src/Google/Service','Replicapool.php',711],['lib/google/src/Google/Service','Replicapool.php',1001],['lib/google/src/Google/Service','Resourceviews.php',740],['lib/google/src/Google/Service','Resourceviews.php',1095],['lib/google/src/Google/Service','Resourceviews.php',1145],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',84]], 882],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1030]], 273],
'setstatus': ['setstatus', '', [['lib/google/src/Google/Service','Reseller.php',932],['lib/google/src/Google/Service','DoubleClickBidManager.php',825],['lib/google/src/Google/Service','Blogger.php',1789],['lib/google/src/Google/Service','Blogger.php',2144],['lib/google/src/Google/Service','Blogger.php',2405],['lib/google/src/Google/Service','Blogger.php',2752],['lib/google/src/Google/Service','AdExchangeBuyer.php',1082],['lib/google/src/Google/Service','Manager.php',582],['lib/google/src/Google/Service','Genomics.php',2371],['lib/google/src/Google/Service','Genomics.php',3503],['lib/google/src/Google/Service','Urlshortener.php',363],['lib/zend/Zend/Service/ReCaptcha','Response.php',75],['lib/google/src/Google/Service','Dfareporting.php',1022],['lib','environmentlib.php',1276],['lib/google/src/Google/Service','Drive.php',3711],['lib/google/src/Google/Service','Bigquery.php',1435],['lib/google/src/Google/Service','Bigquery.php',2075],['lib/google/src/Google/Service','YouTube.php',4411],['lib/google/src/Google/Service','YouTube.php',6760],['lib/google/src/Google/Service','YouTube.php',7143],['lib/google/src/Google/Service','YouTube.php',7513],['lib/google/src/Google/Service','YouTube.php',7595],['lib/google/src/Google/Service','YouTube.php',9043],['lib/google/src/Google/Service','Autoscaler.php',972],['lib/google/src/Google/Service','Autoscaler.php',1293],['lib/google/src/Google/Service','YouTubeAnalytics.php',348],['lib/google/src/Google/Service','ShoppingContent.php',1209],['lib/google/src/Google/Service','SQLAdmin.php',1160],['lib/google/src/Google/Service','Directory.php',3099],['lib/google/src/Google/Service','Directory.php',3686],['lib/google/src/Google/Service','Directory.php',4985],['lib/google/src/Google/Service','Container.php',562],['lib/google/src/Google/Service','Container.php',770],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',122],['lib/google/src/Google/Service','AndroidPublisher.php',2662],['lib/google/src/Google/Service','AdSenseHost.php',1257],['lib/google/src/Google/Service','AdSenseHost.php',1627],['lib/google/src/Google/Service','AdSenseHost.php',1854],['lib/google/src/Google/Service','Games.php',5791],['lib/google/src/Google/Service','Games.php',6280],['lib/google/src/Google/Service','Games.php',6418],['lib/google/src/Google/Service','Games.php',6475],['lib/google/src/Google/Service','Games.php',6951],['lib/google/src/Google/Service','Games.php',7227],['lib/google/src/Google/Service','Compute.php',5594],['lib/google/src/Google/Service','Compute.php',6431],['lib/google/src/Google/Service','Compute.php',7885],['lib/google/src/Google/Service','Compute.php',8119],['lib/google/src/Google/Service','Compute.php',9397],['lib/google/src/Google/Service','Compute.php',10061],['lib/google/src/Google/Service','Compute.php',10602],['lib/google/src/Google/Service','Compute.php',12043],['lib/google/src/Google/Service','Calendar.php',2839],['lib/google/src/Google/Service','Analytics.php',5309],['lib/google/src/Google/Service','Analytics.php',5412],['lib/google/src/Google/Service','Analytics.php',8677],['lib/google/src/Google/Service','Analytics.php',8889],['lib/google/src/Google/Service','Tasks.php',694],['lib/zend/Zend/Service/SlideShare','SlideShow.php',350],['lib/google/src/Google/Service','AdSense.php',2578],['lib/zend/Zend/Gdata/YouTube','ContactEntry.php',114],['lib/google/src/Google/Service','Dns.php',546],['lib/google/src/Google/Service','Replicapool.php',1045],['lib/google/src/Google/Service','Resourceviews.php',784]], 63],
'unset_config': ['unset_config', 'Removes a key from global configuration. ', [['lib','moodlelib.php',1499]], 89],
'reset_caches': ['reset_caches', 'Reset any caches ', [['lib/classes/update','checker.php',74],['lib/dml','moodle_database.php',1019],['lib/classes','string_manager_standard.php',594],['lib/classes','text.php',108],['lib/classes','string_manager.php',127],['repository','lib.php',2686],['lib','accesslib.php',5098],['lib','accesslib.php',5994],['lib/classes','string_manager_install.php',245],['lib/classes','filetypes.php',419],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','plugin_manager.php',95],['lib','filterlib.php',93],['lib/classes/update','deployer.php',66]], 101],
'get_plugin_types': ['get_plugin_types', 'Get list of available plugin types together with their location. ', [['lib/classes','component.php',771],['lib','deprecatedlib.php',433],['lib/classes','plugin_manager.php',116]], 60],
'upgrade_fix_missing_root_folders': ['upgrade_fix_missing_root_folders', 'Detect file areas with missing root directory records and add them. ', [['lib','upgradelib.php',2150]], 2],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 85],
'abort_all_db_transactions': ['abort_all_db_transactions', 'Unconditionally abort all database transactions, this function should be called from exception handlers only. ', [['lib','setuplib.php',398]], 4],
'upgrade_handle_exception': ['upgrade_handle_exception', 'upgrade logging functions ', [['lib','upgradelib.php',1183]], 3],
'upgrade_main_savepoint': ['upgrade_main_savepoint', 'Upgrade savepoint, marks end of each upgrade block. It stores new main version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',189]], 199],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',768]], 607],
'_self_test': ['_self_test', 'Tests if this block has been implemented correctly. Also, $errors isn\'t used right now ', [['blocks','moodleblock.class.php',297]], 1],
'__construct': ['__construct', 'Constructor ', [['lib/jabber/XMPP','Log.php',67],['lib/zend/Zend/Gdata/Books','VolumeFeed.php',41],['lib/markdown','MarkdownExtra.php',51],['lib/zend/Zend/Gdata/Books/Extension','BooksCategory.php',42],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/zend/Zend/Validate','Iban.php',106],['repository/wikimedia','wikimedia.php',35],['lib/lessphp/Tree','Operation.php',19],['lib/alfresco/Service','Version.php',38],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['backup/moodle2','backup_activity_task.class.php',45],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/phpunit/classes','advanced_testcase.php',45],['lib/zend/Zend/Service/DeveloperGarden/Request','RequestAbstract.php',40],['lib','outputlib.php',447],['lib','outputlib.php',2000],['repository/filesystem','lib.php',48],['lib/zend/Zend/XmlRpc/Value','Nil.php',40],['lib/lessphp/Tree','NameValue.php',21],['lib/zend/Zend/Gdata/YouTube','UserProfileEntry.php',283],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientEntry.php',69],['lib/simplepie/library/SimplePie','Restriction.php',81],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes/update','checker.php',50],['lib/adodb','adodb-active-recordx.inc.php',131],['lib/phpexcel/PHPExcel','Calculation.php',1721],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotos.php',50],['availability/classes','info_module.php',40],['lib/zend/Zend/Gdata/Geo/Extension','GmlPos.php',49],['lib/zend/Zend/Gdata/App/Extension','Link.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Access.php',51],['lib/zend/Zend/Server/Reflection','Parameter.php',58],['lib/zend/Zend/Service/DeveloperGarden/Client','ClientAbstract.php',129],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['lib/zend/Zend/Validate/Db','Abstract.php',79],['cache/locks/file','lib.php',66],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',180],['question/type/missingtype','edit_missingtype_form.php',38],['auth/cas/CAS/CAS','Client.php',862],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/zend/Zend/Gdata/Books','VolumeQuery.php',46],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/zend/Zend/XmlRpc','Request.php',92],['lib/zend/Zend/Service/Delicious','Post.php',74],['lib/zend/Zend/Gdata/Extension','FeedLink.php',53],['lib/zend/Zend/Http/Client/Adapter','Socket.php',97],['lib/grade','grade_object.php',80],['lib/zend/Zend/Gdata/YouTube','ContactFeed.php',55],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['lib/google/src/Google/Auth','LoginTicket.php',35],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',84],['lib/zend/Zend/Service/DeveloperGarden/SecurityTokenServer','Cache.php',59],['question/type/randomsamatch','question.php',114],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',49],['lib/zend/Zend/Amf/Parse','OutputStream.php',40],['blocks','moodleblock.class.php',111],['lib/simplepie','autoloader.php',62],['mod/scorm','renderer.php',129],['lib/zend/Zend/Gdata/Extension','Who.php',64],['lib/zend/Zend/Gdata/Gapps','EmailListQuery.php',54],['lib/zend/Zend/Service/Simpy','LinkSet.php',47],['repository/flickr_public','lib.php',49],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Replicapoolupdater.php',47],['admin/tool/generator/classes','site_backend.php',58],['mod/assign','assignmentplugin.php',50],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['mod/lti/service/profile/classes/local/resource','profile.php',43],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['lib/lessphp/Tree','Anonymous.php',21],['user','renderer.php',186],['lib/zend/Zend/Service/WindowsAzure','Storage.php',170],['lib/google/src/Google','Service.php',26],['lib/lessphp/Tree','Url.php',17],['webservice','lib.php',745],['webservice','lib.php',841],['webservice','lib.php',1120],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',270],['lib/zend/Zend/Gdata/YouTube/Extension','MediaContent.php',55],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib/tests','completionlib_test.php',863],['lib/zend/Zend/Service/Amazon','Accessories.php',44],['lib/zend/Zend/Validate/Barcode','Code39ext.php',47],['mod/assign/feedback/editpdf/classes','comment.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',46],['backup/moodle2','backup_settingslib.php',42],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateListRequest.php',46],['lib/zend/Zend/XmlRpc/Value','Base64.php',40],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['lib/zend/Zend/Service/WindowsAzure/Storage','Blob.php',117],['lib/lessphp','Parser.php',75],['lib/zend/Zend/Service/DeveloperGarden/Response/IpLocation','LocateIPResponse.php',47],['lib/zend/Zend/Gdata','Query.php',72],['lib/zend/Zend/Service/Technorati','TagResultSet.php',57],['lib/zend/Zend/Rest/Client','Result.php',42],['lib/lessphp/Tree','Call.php',19],['lib/zend/Zend/Server/Method','Callback.php',59],['lib/minify/lib/Minify/JS','ClosureCompiler.php',38],['mod/workshop/backup/moodle1','lib.php',308],['lib/zend/Zend/Gdata/YouTube','ActivityFeed.php',54],['admin/tool/log/store/database/classes/log','store.php',47],['lib/zend/Zend/Validate','Alpha.php',65],['lib/zend/Zend/Gdata','Gapps.php',109],['lib/zend/Zend/Service/Flickr','Result.php',174],['question/type/multianswer','edit_multianswer_form.php',58],['mod/assign/feedback/file','renderable.php',44],['lib/horde/framework/Horde','Secret.php',48],['lib/zend/Zend/Gdata/Photos/Extension','AlbumId.php',51],['lib/lessphp/SourceMap','Base64VLQ.php',67],['lib/lessphp/Tree/Mixin','Call.php',14],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/google/src/Google/Service','Fusiontables.php',48],['grade/report/singleview','lib.php',69],['lib/classes/lock','lock.php',55],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['blog','locallib.php',71],['blog','locallib.php',581],['blog','locallib.php',849],['blog','locallib.php',894],['blog','locallib.php',953],['blog','locallib.php',1004],['blog','locallib.php',1028],['blog','locallib.php',1038],['blog','locallib.php',1050],['blog','locallib.php',1071],['lib/zend/Zend/Gdata/Exif/Extension','Flash.php',49],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',61],['admin/webservice','lib.php',38],['lib/zend/Zend/Validate/File','FilesSize.php',60],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',46],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['lib/zend/Zend/Validate','Int.php',53],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['lib/zend/Zend/Soap','Server.php',146],['lib/zend/Zend/Gdata/Photos','PhotoEntry.php',215],['lib/zend/Zend/Service/Yahoo','LocalResult.php',111],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetAccountBalance.php',40],['badges/lib','backpacklib.php',40],['lib/zend/Zend/Service/Yahoo','Result.php',77],['lib/form','filemanager.php',306],['lib/lessphp/Tree','Condition.php',18],['lib/pear/PEAR','Exception.php',107],['lib/zend/Zend/Gdata/YouTube/Extension','Racy.php',45],['question/classes/bank','view.php',70],['lib/adodb','adodb.inc.php',2790],['lib/adodb','adodb.inc.php',2865],['lib/zend/Zend/Gdata/App/Extension','Text.php',45],['question/engine/upgrade/tests','helper.php',45],['lib/zend/Zend/Validate/Barcode','Ean5.php',47],['blocks/private_files','renderer.php',83],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/classes','useragent.php',115],['lib/zend/Zend/Gdata/Photos/Extension','CommentCount.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/zend/Zend/Gdata/Spreadsheets/Extension','ColCount.php',49],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/portfolio','exceptions.php',50],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',45],['lib/xmldb','xmldb_object.php',55],['lib/zend/Zend/Service','SlideShare.php',283],['webservice/amf','introspector.php',52],['question/behaviour/adaptive','behaviour.php',310],['question/behaviour','behaviourtypebase.php',133],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['course','renderer.php',52],['lib/zend/Zend/Validate','Hostname.php',315],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',249],['lib/zend/Zend/Amf','Server.php',134],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/zend/Zend/Http','Cookie.php',98],['lib/lessphp/Tree','Extend.php',28],['lib/zend/Zend/Validate','Barcode.php',75],['lib/zend/Zend/XmlRpc/Value','BigInteger.php',47],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/google/src/Google/Service','QPXExpress.php',39],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',105],['lib/phpexcel/PHPExcel/Style','Color.php',72],['lib/zend/Zend/Validate/File','Hash.php',60],['backup/util/settings/root','root_backup_setting.class.php',34],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/zend/Zend/Gdata/Photos/Extension','QuotaCurrent.php',50],['lib/zend/Zend/Service/Nirvanix/Namespace','Base.php',76],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['lib/zend/Zend/Service/Technorati','DailyCountsResult.php',60],['lib/zend/Zend/Rest','Server.php',102],['lib/zend/Zend/Gdata/Photos','UserFeed.php',106],['lib/tcpdf/include/barcodes','pdf417.php',523],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/zend/Zend/Gdata/YouTube/Extension','VideoId.php',44],['lib/google/src/Google/Service','Blogger.php',50],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['lib/zend/Zend/Gdata/App/Extension','Published.php',43],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',129],['lib/zend/Zend/Gdata/Photos','AlbumEntry.php',193],['lib/zend/Zend/Gdata/Docs','DocumentListFeed.php',56],['lib/zend/Zend/Gdata/App/Extension','Icon.php',43],['lib/portfolio','plugin.php',445],['lib/zend/Zend/Gdata/Extension','OpenSearchItemsPerPage.php',44],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['lib/zend/Zend/Service/Yahoo','WebResult.php',83],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['lib/google/src/Google/Service','AdExchangeBuyer.php',46],['lib/dtl','file_xml_database_exporter.php',36],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/zend/Zend/Gdata/YouTube/Extension','Token.php',44],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',87],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',47],['lib/xmldb','xmldb_field.php',84],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',126],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceStatusRequest.php',65],['lib/google/src/Google/Service','Manager.php',57],['lib/zend/Zend/Service/Amazon','Offer.php',79],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['lib/zend/Zend/Gdata/App','FeedEntryParent.php',129],['lib/zend/Zend/Service/Technorati','KeyInfoResult.php',61],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['webservice/rest','lib.php',47],['lib/zend/Zend/Service/StrikeIron','Decorator.php',47],['lib/google/src/Google/Http','Batch.php',38],['lib/google/src/Google/Service','Reports.php',47],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['lib/zend/Zend/Gdata/Media/Extension','MediaKeywords.php',43],['repository/url','lib.php',46],['lib','xmlize.php',31],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/filebrowser','file_info_context_system.php',37],['lib/zend/Zend/Service/Amazon','Abstract.php',74],['lib/zend/Zend/Server','Definition.php',43],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/zend/Zend/Amf/Util','BinaryStream.php',53],['lib/portfolio','exporter.php',113],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/zend/Zend/Gdata/YouTube','SubscriptionFeed.php',55],['lib/alfresco/Service','SpacesStore.php',28],['repository/recent','lib.php',39],['lib/zend/Zend/Service/DeveloperGarden/IpLocation','IpAddress.php',59],['lib/zend/Zend/Validate','Regex.php',62],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',135],['lib/phpexcel/PHPExcel','ReferenceHelper.php',65],['lib','webdavlib.php',84],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['auth/cas/CAS/CAS','AuthenticationException.php',53],['lib/zend/Zend/Gdata/Gapps','NicknameQuery.php',54],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',36],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['lib/horde/framework/Horde','Domhtml.php',53],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/google/src/Google/Service','Customsearch.php',38],['lib/zend/Zend/Gdata/App','MediaFileSource.php',54],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/lessphp/Tree','Comment.php',17],['availability/tests/fixtures','mock_info.php',40],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['backup/util/ui','base_ui.class.php',84],['lib/phpexcel/PHPExcel','DocumentSecurity.php',73],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['backup/cc/cc_lib','cc_converter_lti.php',29],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',44],['lib/zend/Zend/Service/WindowsAzure/Credentials','CredentialsAbstract.php',77],['lib/zend/Zend/Soap','AutoDiscover.php',94],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['lib/phpexcel/PHPExcel','IOFactory.php',77],['lib/zend/Zend/Gdata/App/Extension','Email.php',43],['lib/zend/Zend/Gdata/Media/Extension','MediaHash.php',45],['lib/zend/Zend/Gdata/App/Extension','Element.php',42],['lib/google/src/Google/Service','Gmail.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['repository/dropbox','lib.php',49],['lib/minify/lib/Minify','Source.php',43],['backup/util/dbops','backup_dbops.class.php',37],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/google/src/Google/Service','Spectrum.php',38],['files','renderer.php',1080],['lib/zend/Zend/Validate/Barcode','Ean2.php',47],['course','lib.php',2932],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/zend/Zend/Service/Simpy','Watchlist.php',89],['lib/phpexcel/PHPExcel','Style.php',101],['lib/zend/Zend/Gdata/YouTube/Extension','CountHint.php',44],['lib/minify/lib/Minify/Cache','Memcache.php',22],['auth/db','auth.php',36],['lib/zend/Zend/Gdata/Gapps','UserQuery.php',54],['admin/roles/classes','assign_user_selector_base.php',40],['lib/zend/Zend/Gdata/Exif/Extension','Model.php',49],['lib/zend/Zend/Gdata/YouTube','PlaylistListFeed.php',55],['lib/zend/Zend/Gdata/Docs','DocumentListEntry.php',42],['mod/quiz/tests','repaginate_test.php',39],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['lib/zend/Zend/Service/Twitter','Search.php',70],['lib/zend/Zend/Server/Method','Parameter.php',59],['lib/phpunit/classes','basic_testcase.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',50],['lib/zend/Zend/Service/DeveloperGarden/Response/LocalSearch','LocalSearchResponse.php',50],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['mod/wiki/parser/markups','html.php',18],['lib/google/src/Google/Service','Mirror.php',49],['lib/classes/event','base.php',114],['lib/alfresco/Service','Repository.php',36],['lib/zend/Zend/Service/Technorati','CosmosResult.php',84],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',42],['lib/zend/Zend/Service/Yahoo','PageDataResult.php',47],['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',99],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateRequest.php',60],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',775],['lib/tcpdf','tcpdf_parser.php',92],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/zend/Zend/Gdata','MimeBodyString.php',49],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',55],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',92],['lib/google/src/Google/Http','MediaFileUpload.php',73],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',54],['lib','listlib.php',82],['lib','listlib.php',485],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/zend/Zend/Gdata/Health','ProfileFeed.php',49],['lib/google/src/Google/Service','Genomics.php',60],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/zend/Zend/Server/Reflection','Method.php',51],['lib/tests','medialib_test.php',631],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['lib/zend/Zend/Soap/Client','DotNet.php',43],['admin/roles/classes','allow_role_page.php',37],['backup/util/dbops','restore_dbops.class.php',1755],['lib/zend/Zend/Service/Yahoo','NewsResult.php',97],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['webservice/rest','locallib.php',40],['lib/simplepie/library/SimplePie','Sanitize.php',75],['lib','uploadlib.php',40],['lib/zend/Zend/Gdata','Health.php',109],['lib','questionlib.php',1269],['lib','questionlib.php',1513],['lib/dml','oci_native_moodle_recordset.php',34],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveParticipantRequest.php',53],['lib/zend/Zend/XmlRpc/Value','String.php',38],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',45],['lib/ddl','database_manager.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceTemplateRequest.php',60],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib/dtl','database_exporter.php',55],['mod/workshop/form/accumulative','lib.php',99],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib/zend/Zend/Validate','Float.php',53],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',59],['cache/classes','interfaces.php',473],['lib/zend/Zend/Gdata/App/Extension','Edited.php',43],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',103],['lib/lessphp/Tree','Element.php',19],['lib','moodlelib.php',9143],['lib','moodlelib.php',9354],['repository/picasa','lib.php',41],['webservice/soap','lib.php',42],['lib/zend/Zend/Gdata/Calendar','EventEntry.php',71],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',98],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',56],['lib/dml','moodle_temptables.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaContent.php',116],['lib/zend/Zend/Gdata/Gapps','EmailListEntry.php',80],['admin/roles/classes','allow_assign_page.php',31],['lib/zend/Zend/Gdata','Books.php',80],['lib/zend/Zend/Amf/Value','MessageHeader.php',64],['lib/zend/Zend/Validate','GreaterThan.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistId.php',44],['calendar/classes','rrule_manager.php',182],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',45],['lib/zend/Zend/Service/ReCaptcha','Response.php',53],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',106],['lib/zend/Zend/Amf/Value/Messaging','RemotingMessage.php',58],['lib/tcpdf','tcpdf.php',1822],['lib/zend/Zend/Gdata/YouTube/Extension','Username.php',44],['lib/zend/Zend/Gdata/Photos/Extension','Version.php',51],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/zend/Zend/Service/WindowsAzure/Storage','Batch.php',77],['lib/mustache/src/Mustache','Engine.php',61],['lib/xmldb','xmldb_structure.php',40],['lib/zend/Zend/Gdata/Photos','TagEntry.php',61],['webservice/amf','locallib.php',41],['webservice/amf','locallib.php',60],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['question/type/numerical/tests','form_test.php',40],['lib/google/src/Google/Service','IdentityToolkit.php',38],['comment','locallib.php',39],['lib/zend/Zend/Gdata/Extension','Comments.php',50],['lib/google/src/Google/Service','Resource.php',60],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/zend/Zend/Gdata/YouTube/Extension','Recorded.php',44],['lib/zend/Zend/Amf/Request','Http.php',46],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['question/engine/upgrade','behaviourconverters.php',78],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantDetail.php',62],['repository/s3','lib.php',39],['lib/minify/lib/MrClay','Cli.php',74],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/zend/Zend/Gdata/App','HttpException.php',51],['lib/zend/Zend/Soap/Client','Common.php',40],['lib/google/src/Google/Service','Dfareporting.php',45],['lib/lessphp/Output','Mapped.php',39],['lib/classes/output','notification.php',66],['lib/google/src/Google/Service','PlusDomains.php',72],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/editor/tinymce','adminlib.php',36],['lib/zend/Zend/Service/Amazon/Ec2','Exception.php',41],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',52],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',846],['lib/xmldb','xmldb_key.php',43],['user/filters','checkbox.php',51],['lib/phpexcel/PHPExcel/Reader','SYLK.php',75],['question/type/numerical','questiontype.php',507],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/zend/Zend/Gdata/App/Extension','Control.php',50],['lib/minify/lib','FirePHP.php',189],['lib/lessphp/Tree/Mixin','Definition.php',18],['lib/zend/Zend/Service/Yahoo','LocalResultSet.php',61],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['admin/tool/langimport/classes','controller.php',48],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['lib/horde/framework/Horde/Stream','String.php',27],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',454],['lib/horde/framework/Horde/Stream','Temp.php',25],['lib/alfresco/Service','VersionHistory.php',34],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceSchedule.php',81],['mod/quiz/classes','repaginate.php',49],['lib/zend/Zend/Validate','Isbn.php',65],['lib/zend/Zend/Service/Amazon','Image.php',55],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['lib/classes/lock','db_record_lock_factory.php',61],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Cell.php',76],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['lib/horde/framework/Horde/Text','Flowed.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/zend/Zend/Gdata/Gapps/Extension','Login.php',111],['mod/workshop/form/rubric','lib.php',105],['cohort','locallib.php',37],['cohort','locallib.php',101],['lib/zend/Zend/XmlRpc/Value','DateTime.php',53],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',52],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/zend/Zend/Amf/Parse','Serializer.php',40],['lib/google/src/Google/Service','GroupsMigration.php',38],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['lib/zend/Zend/Gdata/Gapps','ServiceException.php',61],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/zend/Zend/XmlRpc','Fault.php',100],['lib/zend/Zend/Gdata','Photos.php',124],['question/type/calculated','datasetdefinitions_form.php',53],['lib/phpexcel/PHPExcel/Reader','Excel5.php',424],['question/type/shortanswer','question.php',43],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/zend/Zend/Service','LiveDocx.php',67],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/google/src/Google/Auth','AppIdentity.php',38],['lib/zend/Zend/Gdata/Exif/Extension','FocalLength.php',49],['lib/zend/Zend/Gdata/App/Extension','Id.php',43],['lib/zend/Zend/Gdata/Books/Extension','PreviewLink.php',42],['mod/chat','locallib.php',179],['mod/chat','locallib.php',227],['lib/google/src/Google/Service','Licensing.php',38],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['lib/zend/Zend/Server/Method','Definition.php',64],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetParticipantStatusRequest.php',53],['question/classes/bank','column_base.php',44],['lib/zend/Zend/XmlRpc/Server','Fault.php',67],['lib/zend/Zend/Amf/Value/Messaging','AcknowledgeMessage.php',40],['grade/report/singleview/classes/local/ui','range.php',38],['lib/zend/Zend/Gdata/Books/Extension','Viewability.php',45],['mod/book','locallib.php',405],['lib/zend/Zend/XmlRpc/Value','Array.php',39],['lib/zend/Zend/Service/Technorati','Result.php',63],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateRequest.php',46],['lib/zend/Zend/Gdata/Exif/Extension','Exposure.php',49],['lib/zend/Zend/Gdata/Exif','Feed.php',58],['question/type/randomsamatch/tests','helper.php',121],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/zend/Zend/Gdata/Spreadsheets','CellEntry.php',49],['lib/zend/Zend/Gdata/Photos/Extension','PhotoId.php',49],['lib/zend/Zend/Http/Response','Stream.php',120],['lib','modinfolib.php',429],['lib','modinfolib.php',1680],['lib','modinfolib.php',2516],['lib/dtl','database_importer.php',61],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['lib/zend/Zend/Gdata/Exif/Extension','Iso.php',49],['lib/zend/Zend/Gdata/YouTube','VideoQuery.php',48],['lib/lessphp/Tree','Variable.php',20],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['lib/google/src/Google/Signer','P12.php',33],['lib/lessphp/Tree','DetachedRuleset.php',15],['lib/zend/Zend/Gdata/YouTube','SubscriptionEntry.php',138],['lib/zend/Zend/Http/Client/Adapter','Test.php',81],['','mdeploy.php',120],['lib/ddl','sqlite_sql_generator.php',73],['lib/google/src/Google/Service','Drive.php',70],['mod/quiz/classes','admin_review_setting.php',82],['lib','pdflib.php',161],['lib/zend/Zend/Gdata/YouTube/Extension','Duration.php',45],['mod/quiz/report','attemptsreport_options.php',95],['lib/zend/Zend/Validate/File','Md5.php',60],['backup/util/helper','restore_questions_parser_processor.class.php',42],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/filebrowser','file_info_context_coursecat.php',39],['badges','renderer.php',972],['badges','renderer.php',1013],['badges','renderer.php',1077],['badges','renderer.php',1110],['badges','renderer.php',1136],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','MediaRating.php',54],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['mnet/xmlrpc','serverlib.php',674],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/simplepie/library/SimplePie','gzdecode.php',186],['lib/jabber/XMPP','Roster.php',48],['lib/classes/dml','recordset_walk.php',64],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',129],['lib/google/src/Google/Service','Books.php',57],['mod/assign/feedback/offline','importgradeslib.php',60],['lib/zend/Zend/Gdata','App.php',165],['lib/pear/Net','GeoIP.php',323],['lib/zend/Zend/Gdata/Photos/Extension','Name.php',50],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['lib/zend/Zend/Gdata/Docs','Query.php',75],['lib/zend/Zend/Gdata/YouTube/Extension','Occupation.php',44],['lib/zend/Zend/Gdata/Exif/Extension','Time.php',49],['cache/tests/fixtures','lib.php',325],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['lib/google/src/Google/Cache','Memcache.php',42],['lib/dml','sqlsrv_native_moodle_database.php',47],['backup/util/structure','backup_optigroup_element.class.php',51],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/simplepie/library/SimplePie','Caption.php',98],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['lib/classes','collator.php',58],['lib/zend/Zend/Service/Delicious','PostList.php',56],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/zend/Zend/Service/Amazon/Ec2','Abstract.php',91],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['mod/workshop/form/numerrors','lib.php',102],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateRequest.php',46],['report/log/classes','table_log.php',52],['lib/zend/Zend/Gdata/YouTube','CommentEntry.php',48],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/zend/Zend/Gdata/YouTube/Extension','Status.php',44],['lib/adodb','adodb-exceptions.inc.php',28],['backup/util/helper','backup_array_iterator.class.php',39],['lib/zend/Zend/Rest','Client.php',54],['lib/zend/Zend/Gdata/YouTube/Extension','Company.php',44],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateParticipantRequest.php',53],['question/engine','lib.php',770],['question/engine','lib.php',1000],['question/engine','lib.php',1048],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/google/src/Google/Service','Bigquery.php',59],['backup/moodle2','restore_course_task.class.php',41],['lib/zend/Zend/Gdata/Media/Extension','MediaRestriction.php',54],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/phpexcel/PHPExcel/Writer','CSV.php',86],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['cache','disabledlib.php',44],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['webservice/xmlrpc','locallib.php',85],['lib/google/src/Google/Service','Freebase.php',38],['mod/lti/service/profile/classes/local/service','profile.php',41],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['backup/util/settings','backup_setting.class.php',43],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/alfresco/Service','ContentData.php',38],['enrol/ldap','lib.php',36],['lib/zend/Zend/Validate/File','MimeType.php',112],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',47],['lib/zend/Zend/Gdata/Gapps','NicknameEntry.php',79],['lib/minify/lib/Minify','HTML.php',49],['lib/zend/Zend/Gdata/Extension','OriginalEvent.php',56],['lib/zend/Zend/Gdata/YouTube','InboxFeed.php',55],['lib/google/src/Google/Service','Groupssettings.php',40],['availability/classes','info.php',55],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['lib/tests','navigationlib_test.php',472],['lib/tests','navigationlib_test.php',530],['lib/tests','navigationlib_test.php',557],['lib/zend/Zend/Service/DeveloperGarden/Request/IpLocation','LocateIPRequest.php',58],['mod/quiz/report/statistics/classes','calculated.php',43],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['cache/stores/memcached','lib.php',107],['lib/zend/Zend/Validate','Between.php',89],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',183],['user/selector','lib.php',85],['user/selector','lib.php',674],['lib/google/src/Google/Service','YouTube.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/zend/Zend/Gdata','Exif.php',51],['backup/util/helper','backup_helper.class.php',380],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',154],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',71],['lib/zend/Zend/Gdata','YouTube.php',192],['lib/zend/Zend/Gdata/Calendar/Extension','Link.php',48],['blocks','edit_form.php',47],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign','locallib.php',149],['mod/assign','locallib.php',7411],['grade/report/user','lib.php',188],['lib/zend/Zend/Validate/Barcode','Code93ext.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','ChangeQuotaPool.php',47],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',294],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['lib/zend/Zend/Gdata','Media.php',51],['lib/zend/Zend/Gdata/Gapps/Extension','Quota.php',59],['lib/zend/Zend/Amf/Value','ByteArray.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/behat/form_field','behat_form_field.php',59],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['backup/moodle2','restore_subplugin.class.php',45],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetFeed.php',54],['backup/util/structure','base_processor.class.php',49],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',45],['lib/zend/Zend/Validate','Ip.php',56],['lib/zend/Zend/Gdata/Extension','OpenSearchTotalResults.php',44],['badges/criteria','award_criteria_activity.php',45],['lib/zend/Zend/Service/Technorati','DailyCountsResultSet.php',67],['lib/zend/Zend/XmlRpc/Value','Collection.php',40],['lib/google/src/Google/Service','Coordinate.php',47],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['lib/classes/output','mustache_pix_helper.php',43],['lib/zend/Zend/Amf/Value','MessageBody.php',81],['user/classes/output/myprofile','node.php',82],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['lib/zend/Zend','Registry.php',186],['lib/lessphp/Exception','Chunk.php',19],['lib/dtl','database_mover.php',33],['lib/zend/Zend/Http','CookieJar.php',106],['lib/zend/Zend/Gdata/Extension','Transparency.php',44],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',64],['lib/phpexcel/PHPExcel/RichText','TextElement.php',43],['lib/simplepie/library/SimplePie','Enclosure.php',219],['lib/google/src/Google/Service','Webmasters.php',46],['lib/lessphp/Tree','Value.php',14],['lib/simplepie/library','SimplePie.php',611],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/zend/Zend/Gdata/App','CaptchaRequiredException.php',64],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['mod/folder','renderer.php',139],['lib/google/src/Google/Service','Webfonts.php',38],['lib/zend/Zend/Gdata/DublinCore/Extension','Description.php',44],['admin/roles/classes','admins_potential_selector.php',30],['lib/zend/Zend/Soap/Client','Local.php',52],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/lessphp/Tree','Negative.php',14],['mod/quiz','override_form.php',58],['lib/classes/session','file.php',40],['lib/google/src/Google/Auth','OAuth2.php',55],['admin/roles/classes','check_users_selector.php',38],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/alfresco/Service','Store.php',31],['lib/google/src/Google/Service','Audit.php',39],['lib/zend/Zend/Gdata','Gbase.php',95],['mod/wiki','pagelib.php',94],['mod/wiki','pagelib.php',381],['mod/wiki','pagelib.php',986],['mod/wiki','pagelib.php',1195],['mod/wiki','pagelib.php',2201],['mod/wiki','pagelib.php',2429],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['calendar','lib.php',1968],['calendar','lib.php',2709],['lib/zend/Zend/Gdata/Photos','AlbumFeed.php',133],['lib/phpmailer','class.phpmailer.php',572],['lib/google/src/Google/Service','Datastore.php',46],['lib/google/src/Google/Service','YouTubeAnalytics.php',45],['lib/lessphp/Tree','Keyword.php',17],['lib/zend/Zend/Service/Amazon','Sqs.php',70],['backup/util/plan','backup_structure_step.class.php',38],['availability/condition/profile/classes','condition.php',73],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/simplepie/library/SimplePie','Author.php',81],['report/loglive/classes','table_log.php',50],['lib','completionlib.php',243],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/zend/Zend/Gdata/Exif/Extension','Make.php',49],['lib/dml','moodle_database.php',139],['lib/lessphp/Tree','Media.php',18],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes/update','info.php',48],['backup/moodle2','backup_subplugin.class.php',44],['backup/util/ui','base_moodleform.class.php',68],['lib/zend/Zend/Gdata/DublinCore/Extension','Creator.php',44],['lib/alfresco/Service','Association.php',28],['lib/zend/Zend/Gdata/Geo/Extension','GeoRssWhere.php',62],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/zend/Zend/Service','Twitter.php',125],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['admin/tool/log/classes/log','store.php',30],['lib/phpexcel/PHPExcel','Comment.php',101],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CommitConferenceRequest.php',46],['filter','local_settings_form.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['badges/classes','assertion.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateParticipantRequest.php',67],['lib/phpexcel/PHPExcel','RichText.php',45],['lib/zend/Zend/Gdata/App','Base.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/filestorage','file_storage.php',57],['lib/adodb/drivers','adodb-postgres64.inc.php',125],['lib/adodb/drivers','adodb-postgres64.inc.php',904],['lib/phpexcel/PHPExcel/Chart','Title.php',53],['lib/zend/Zend/Mime','Part.php',51],['lib/phpexcel/PHPExcel','Worksheet.php',335],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',78],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/zend/Zend/Gdata/DublinCore/Extension','Language.php',44],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',77],['lib/alfresco/Service/WebService','AlfrescoWebService.php',30],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['lib/google/src/Google/Service','ShoppingContent.php',47],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Spreadsheets','ListQuery.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['mod/workshop/allocation/scheduled','lib.php',48],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib/zend/Zend/Gdata/Spreadsheets','ListEntry.php',62],['repository/merlot','lib.php',37],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/lessphp/Visitor','extendFinder.php',15],['lib/zend/Zend/Gdata/YouTube/Extension','MediaGroup.php',112],['mod/quiz/report/grading','gradingsettings_form.php',44],['lib/zend/Zend/Service/Simpy','Note.php',104],['lib/zend/Zend/Gdata/Photos/Extension','Rotation.php',51],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',89],['lib/editor/tinymce/classes','plugin.php',49],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/zend/Zend/XmlRpc/Value','Integer.php',40],['lib/zend/Zend/Validate/File','Upload.php',74],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',201],['admin/roles/classes','capability_table_with_risks.php',46],['lib/zend/Zend/Gdata/Extension','EntryLink.php',52],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib','outputrequirementslib.php',166],['lib/google/src/Google/Service','Appsactivity.php',49],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/zend/Zend/Loader','Autoloader.php',446],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/zend/Zend/Gdata','Docs.php',87],['lib/alfresco/Service/Logger','Logger.php',27],['lib/zend/Zend/Gdata/App/Extension','Logo.php',43],['lib/dml','pgsql_native_moodle_recordset.php',44],['backup/cc/cc_lib','cc_version11.php',57],['lib','weblib.php',315],['lib','weblib.php',3025],['lib','weblib.php',3325],['lib','weblib.php',3360],['lib','weblib.php',3435],['backup/cc/cc_lib','xmlbase.php',52],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['mod/lesson','locallib.php',2007],['mod/lesson','locallib.php',2602],['lib/zend/Zend/Service/LiveDocx','MailMerge.php',61],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',101],['lib/zend/Zend/Server/Reflection','ReturnValue.php',47],['lib/minify/lib/Minify','Build.php',77],['lib/horde/framework/Horde','Variables.php',60],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/phpexcel/PHPExcel','NamedRange.php',73],['lib/zend/Zend/Gdata/Extension','OpenSearchStartIndex.php',44],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['lib/zend/Zend/Service/Amazon','OfferSet.php',79],['grade/export/txt','grade_export_txt.php',27],['admin/roles/classes','allow_override_page.php',31],['lib/lessphp/Tree','Assignment.php',15],['lib/zend/Zend/Gdata/Books/Extension','ThumbnailLink.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','Uploaded.php',44],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',44],['lib/tcpdf/include/barcodes','qrcode.php',631],['lib/zend/Zend/Gdata/Photos/Extension','Weight.php',51],['enrol','locallib.php',125],['enrol','locallib.php',1240],['enrol','locallib.php',1363],['enrol','locallib.php',1414],['enrol','locallib.php',1447],['lib/lessphp/Visitor','toCSS.php',13],['question/classes/statistics/questions','calculator.php',66],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['backup/util/helper','restore_prechecks_helper.class.php',213],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',605],['grade/edit/tree','lib.php',638],['grade/edit/tree','lib.php',804],['lib/zend/Zend/Gdata','Geo.php',56],['lib/zend/Zend/Gdata/Books','CollectionFeed.php',41],['lib/classes','string_manager_standard.php',53],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',163],['admin/tool/installaddon/classes','validator.php',223],['admin/tool/generator/classes','backend.php',84],['lib/zend/Zend/Service/WindowsAzure/Credentials','SharedAccessSignature.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Custom.php',49],['availability/condition/completion/classes','condition.php',48],['question/classes/statistics/questions','calculated.php',181],['lib/lessphp/Tree','Javascript.php',20],['mod/quiz','locallib.php',1898],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',89],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',62],['lib/zend/Zend/Gdata/DublinCore/Extension','Date.php',45],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['lib/zend/Zend/Loader','PluginLoader.php',95],['lib/zend/Zend/Gdata/YouTube/Extension','Description.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/zend/Zend/Gdata/App/Extension','Generator.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Rights.php',44],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['repository/skydrive','lib.php',42],['lib/google/src/Google/Service','SQLAdmin.php',48],['lib/zend/Zend/Gdata/YouTube/Extension','NoEmbed.php',44],['lib/zend/Zend/Gdata/Exif/Extension','ImageUniqueId.php',49],['lib/simplepie/library/SimplePie','Item.php',82],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',214],['lib/zend/Zend/Validate/File','IsImage.php',53],['lib/zend/Zend/Date','Exception.php',39],['lib/zend/Zend/Amf/Adobe','Introspector.php',65],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/zend/Zend/Service','ReCaptcha.php',117],['lib/zend/Zend/Gdata/Health','ProfileEntry.php',61],['lib/zend/Zend/Server/Reflection','Prototype.php',45],['admin/roles/classes','allow_switch_page.php',33],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',140],['lib/google/src/Google/Service','Fitness.php',57],['filter/emoticon/tests','filter_test.php',68],['backup/util/helper','convert_helper.class.php',378],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['repository/webdav','lib.php',38],['repository/dropbox','locallib.php',46],['lib/lessphp/Exception','Parser.php',30],['lib/filestorage','tgz_packer.php',726],['lib/filestorage','tgz_packer.php',808],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['lib/classes/output','mustache_javascript_helper.php',40],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','FirstName.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','Queue.php',83],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/zend/Zend/Gdata/Media/Extension','MediaDescription.php',53],['lib/google/src/Google/Service','TagManager.php',66],['lib/zend/Zend/Server','Abstract.php',89],['cache/classes','config.php',80],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',579],['lib','outputcomponents.php',655],['lib','outputcomponents.php',773],['lib','outputcomponents.php',915],['lib','outputcomponents.php',999],['lib','outputcomponents.php',2178],['lib','outputcomponents.php',2217],['lib','outputcomponents.php',2290],['lib','outputcomponents.php',2371],['lib','outputcomponents.php',2574],['lib','outputcomponents.php',2622],['lib','outputcomponents.php',2682],['lib','outputcomponents.php',2855],['lib','outputcomponents.php',3025],['lib','outputcomponents.php',3129],['lib','outputcomponents.php',3196],['lib','outputcomponents.php',3324],['lib','outputcomponents.php',3608],['lib','outputcomponents.php',3637],['lib','outputcomponents.php',3663],['lib','outputcomponents.php',3685],['lib','outputcomponents.php',3714],['lib','outputcomponents.php',3746],['lib/zend/Zend/Validate/Barcode','Code25.php',53],['lib/zend/Zend/Gdata/YouTube','CommentFeed.php',53],['lib/dtl','string_xml_database_importer.php',34],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/simplepie/library/SimplePie','Cache.php',69],['backup/util/ui','renderer.php',813],['grade/export/xls','grade_export_xls.php',24],['lib/google/src/Google/Service','Directory.php',110],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',47],['lib/phpexcel/PHPExcel/Style','Alignment.php',97],['mod/quiz/report/statistics','statistics_table.php',45],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/zend/Zend/Gdata/DublinCore/Extension','Title.php',44],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib/zend/Zend/Validate/Barcode','Code93.php',67],['lib/lessphp','Functions.php',15],['lib/adodb/drivers','adodb-postgres7.inc.php',78],['lib/adodb/drivers','adodb-postgres7.inc.php',273],['lib/adodb/drivers','adodb-postgres7.inc.php',304],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetRunningConferenceRequest.php',46],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceRequest.php',74],['lib/zend/Zend/Validate','EmailAddress.php',118],['mod/workshop','locallib.php',178],['mod/workshop','locallib.php',2801],['mod/workshop','locallib.php',3236],['mod/workshop','locallib.php',3472],['mod/workshop','locallib.php',3714],['mod/workshop','locallib.php',3800],['mod/workshop','locallib.php',3885],['mod/workshop','locallib.php',3904],['lib/zend/Zend/XmlRpc/Value','Struct.php',39],['lib/zend/Zend/Gdata/Books/Extension','Embeddability.php',45],['lib/horde/framework/Horde/Mime','Mdn.php',35],['cache/stores/static','lib.php',127],['lib','blocklib.php',54],['lib','blocklib.php',152],['lib/zend/Zend/Gdata/Books/Extension','Review.php',46],['lib','componentlib.class.php',597],['lib','componentlib.class.php',821],['lib/zend/Zend/Validate/Barcode','Code39.php',66],['lib/filebrowser','file_info_context_module.php',47],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',42],['question/engine','states.php',61],['lib/jabber/XMPP','XMLStream.php',171],['lib/jabber/XMPP','XMPP.php',101],['lib/classes/lock','lock_factory.php',39],['lib/tests','collator_test.php',310],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['course/format','lib.php',78],['lib/ddl','sql_generator.php',175],['lib/zend/Zend/XmlRpc/Generator','GeneratorAbstract.php',35],['mod/quiz','accessmanager.php',45],['lib/zend/Zend/Amf/Value','TraitsInfo.php',53],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['lib/zend/Zend/Service/Nirvanix','Response.php',43],['lib','boxlib.php',293],['repository/flickr_public','image.php',34],['lib/google/src/Google/Service','AppState.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/filestorage','zip_archive.php',66],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/zend/Zend/Server/Method','Prototype.php',49],['lib/zend/Zend/Service/Technorati','Author.php',90],['mod/workshop/form/comments','lib.php',99],['lib/phpexcel/PHPExcel/RichText','Run.php',43],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',89],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',69],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceRequest.php',46],['lib/zend/Zend/Gdata/Photos','UserEntry.php',131],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['lib/zend/Zend/Gdata/Spreadsheets','ListFeed.php',54],['lib/phpexcel/PHPExcel','DocumentProperties.php',131],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',62],['lib/lessphp/Tree','Paren.php',14],['lib/zend/Zend/Gdata/Photos/Extension','Thumbnail.php',50],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['lib/filebrowser','file_info_context_user.php',39],['lib/google/src/Google/Service','CivicInfo.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Private.php',44],['lib/zend/Zend/Gdata/YouTube/Extension','Music.php',44],['backup/moodle2','restore_block_task.class.php',45],['lib/zend/Zend','Gdata.php',99],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/phpunit/classes','hint_resultprinter.php',37],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['admin/roles/classes','capability_table_base.php',51],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['lib/google/src/Google/Service','Container.php',44],['lib/zend/Zend/Service/Simpy','TagSet.php',47],['lib/phpexcel/PHPExcel/Chart','Legend.php',82],['question/type/calculated/tests','helper.php',205],['lib/phpexcel/PHPExcel/Reader','CSV.php',103],['availability/classes','result.php',46],['lib/zend/Zend/XmlRpc/Value','Double.php',40],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',462],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1700],['lib/horde/framework/Horde/Mime','Related.php',32],['report/log/classes','renderable.php',93],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/phpexcel/PHPExcel/Style','Font.php',108],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['course/tests/fixtures','course_capability_assignment.php',60],['lib/zend/Zend/Service/Amazon','ResultSet.php',68],['lib/zend/Zend/Validate','Callback.php',69],['lib/zend/Zend/Gdata/Books','CollectionEntry.php',41],['lib/zend/Zend/Gdata/DublinCore/Extension','Publisher.php',44],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetEntry.php',56],['badges/lib','bakerlib.php',52],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['lib/portfolio','caller.php',67],['lib/zend/Zend/Validate/File','Sha1.php',60],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/zend/Zend/Gdata/Media','Feed.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','LastName.php',44],['mod/data','locallib.php',64],['mod/data','locallib.php',431],['lib/zend/Zend/Gdata/App/Extension','Content.php',44],['lib/classes/update','checker_exception.php',37],['backup/cc/cc_lib','cc_manifest.php',45],['lib','odslib.class.php',42],['lib','odslib.class.php',121],['lib','odslib.class.php',419],['lib','odslib.class.php',824],['lib/zend/Zend/Gdata/Books/Extension','AnnotationLink.php',42],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',46],['backup/util/helper','restore_structure_parser_processor.class.php',41],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/alfresco/Service','Session.php',39],['grade/report/singleview/classes/local/ui','empty_element.php',38],['enrol/database','settingslib.php',34],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',125],['lib/google/src/Google/Service','AndroidPublisher.php',51],['lib/zend/Zend/Service','StrikeIron.php',43],['lib/zend/Zend/Gdata/Books/Extension','InfoLink.php',41],['lib/lessphp/SourceMap','Generator.php',82],['filter/urltolink/tests','filter_test.php',209],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/zend/Zend/Service/Amazon','Item.php',112],['repository','lib.php',116],['repository','lib.php',533],['admin/roles/classes','define_role_table_basic.php',31],['lib/phpexcel/PHPExcel','WorksheetIterator.php',54],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotosRemaining.php',50],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',505],['mod/quiz','attemptlib.php',2058],['mod/quiz','attemptlib.php',2113],['lib/zend/Zend/Server/Reflection','Node.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaTitle.php',49],['lib/zend/Zend','Date.php',123],['lib/zend/Zend','Mime.php',290],['lib','accesslib.php',5301],['lib','accesslib.php',5846],['lib','accesslib.php',6116],['lib','accesslib.php',6357],['lib','accesslib.php',6544],['lib','accesslib.php',6776],['lib','accesslib.php',6998],['lib','accesslib.php',7240],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1180],['lib/zend/Zend/Validate','Ccnum.php',62],['lib/zend/Zend/Gdata/Extension','EventStatus.php',44],['lib/google/src/Google/Verifier','Pem.php',29],['lib/zend/Zend/Service/Technorati','BlogInfoResult.php',74],['admin/tool/log/classes','setting_managestores.php',30],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['backup/util/ui','restore_moodleform.class.php',34],['grade/report/singleview/classes/local/ui','element.php',47],['mod/quiz/report','attemptsreport_table.php',76],['lib/lessphp/Tree','Attribute.php',16],['lib/phpexcel/PHPExcel/Style','Supervisor.php',52],['lib/zend/Zend/Gdata/Media/Extension','MediaCategory.php',50],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Checksum.php',51],['lib/lessphp/Tree','Expression.php',16],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['course/format','renderer.php',44],['lib/zend/Zend/XmlRpc/Value','Boolean.php',40],['blocks/rss_client','editfeed.php',36],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['question/type/numerical','question.php',321],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['lib/typo3','class.t3lib_cs.php',509],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/zend/Zend/Gdata/Health','ProfileListEntry.php',49],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['cache/stores/memcache','lib.php',120],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['lib/zend/Zend/Gdata/Calendar/Extension','WebContent.php',47],['lib/zend/Zend/Gdata/Photos/Extension','Id.php',50],['lib/google/src/Google/Service','Games.php',60],['lib/zend/Zend/Validate/File','Size.php',92],['lib/classes/lock','file_lock_factory.php',57],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',64],['lib','filelib.php',2700],['lib','filelib.php',3560],['lib/classes/session','database.php',52],['lib/zend/Zend/Gdata/YouTube/Extension','Movies.php',44],['grade','lib.php',103],['grade','lib.php',785],['availability/condition/grouping/classes','condition.php',46],['lib/zend/Zend/Service/Technorati','SearchResult.php',84],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/zend/Zend/XmlRpc','Server.php',186],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/htmlpurifier','HTMLPurifier.php',104],['lib/zend/Zend/Gdata/Media/Extension','MediaPlayer.php',59],['lib/phpexcel/PHPExcel','Cell.php',122],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',248],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['backup/util/helper','restore_log_rule.class.php',62],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',108],['lib/zend/Zend/Server/Reflection','Class.php',66],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['repository/flickr','lib.php',51],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/google/src/Google/Service','MapsEngine.php',66],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['lib/filestorage','tgz_extractor.php',119],['lib/zend/Zend/Soap','Client.php',142],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',45],['cache/classes','factory.php',149],['lib/zend/Zend/Gdata/Media/Extension','MediaCredit.php',54],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['mod/lti/classes/local/ltiservice','resource_base.php',62],['lib/zend/Zend/Http','Response.php',132],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceListRequest.php',63],['backup/util/ui','backup_moodleform.class.php',41],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['comment','lib.php',100],['lib/phpexcel','PHPExcel.php',354],['grade/export/ods','grade_export_ods.php',24],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/zend/Zend/Gdata/YouTube/Extension','Location.php',44],['lib/lessphp/Tree','Dimension.php',15],['lib/phpexcel/PHPExcel/Worksheet','Row.php',54],['lib/phpexcel/PHPExcel/Writer','HTML.php',135],['lib/zend/Zend/Service/Technorati','TagsResultSet.php',41],['backup/moodle2','backup_theme_plugin.class.php',61],['lib/zend/Zend/Gdata','Extension.php',43],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['mod/forum/classes','subscriber_selector_base.php',53],['lib/zend/Zend','Auth.php',45],['lib/phpexcel/PHPExcel/Style','Borders.php',121],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceRequest.php',67],['lib/zend/Zend/Gdata/Calendar','ListFeed.php',54],['lib/zend/Zend/Gdata/Extension','Visibility.php',44],['webservice/xmlrpc','lib.php',42],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',76],['lib/zend/Zend/Gdata/App','MediaEntry.php',57],['lib/horde/framework/Horde/Mime','Part.php',261],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['question/classes/engine/variants','least_used_strategy.php',51],['lib/horde/framework/Horde/Support','Array.php',21],['lib/zend/Zend/Gdata/YouTube/Extension','Statistics.php',93],['lib/zend/Zend/Gdata/Photos/Extension','BytesUsed.php',50],['lib','tablelib.php',127],['lib','tablelib.php',1400],['lib','tablelib.php',1723],['lib/zend/Zend/Gdata/App/Extension','Uri.php',43],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/zend/Zend/Gdata/Media/Extension','MediaCopyright.php',53],['lib/zend/Zend/Gdata/DublinCore/Extension','Identifier.php',44],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Gbase','Feed.php',49],['availability/condition/date/classes','condition.php',52],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['admin/tool/generator/classes','course_backend.php',116],['lib/google/src/Google/Service','Prediction.php',51],['cache/stores/session','lib.php',131],['cache/classes','dummystore.php',62],['lib/zend/Zend/XmlRpc/Server','System.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',50],['backup/util/settings/course','course_backup_setting.class.php',25],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['mod/lesson','override_form.php',58],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',47],['lib/google/src/Google/Service','Compute.php',78],['badges/criteria','award_criteria.php',127],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',45],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['lib/zend/Zend/Validate','PostCode.php',65],['lib/dml','oci_native_moodle_temptables.php',40],['lib/zend/Zend/Gdata/Photos/Extension','CommentingEnabled.php',51],['lib/simplepie/library/SimplePie','Category.php',81],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',45],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['user/classes/output/myprofile','category.php',68],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['mod/wiki/parser','parser.php',98],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['repository/googledocs','lib.php',65],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/zend/Zend/Validate/File','Extension.php',71],['mod/imscp','locallib.php',289],['lib/classes/session','memcache.php',50],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/zend/Zend/Service','Simpy.php',53],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientQuery.php',54],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoEntry.php',55],['lib/zend/Zend/Gdata/Photos','CommentEntry.php',85],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',92],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/phpexcel/PHPExcel/Style','Border.php',75],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateParticipantRequest.php',53],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['lib/zend/Zend/Gdata/Exif/Extension','Distance.php',49],['lib/phpexcel/PHPExcel/Writer','PDF.php',46],['lib/zend/Zend/Gdata/Photos/Extension','Size.php',50],['lib/google/src/Google/Service','CloudMonitoring.php',42],['backup/util/xml/output','memory_xml_output.class.php',37],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/zend/Zend/Service','Delicious.php',112],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib','outputrenderers.php',117],['lib','outputrenderers.php',282],['lib','outputrenderers.php',405],['lib','outputrenderers.php',4280],['lib','outputrenderers.php',4533],['lib/zend/Zend/Service/Amazon','ListmaniaList.php',44],['lib/zend/Zend/Service','Flickr.php',54],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['lib/google/src/Google/Logger','File.php',49],['backup','backup.class.php',146],['lib/zend/Zend/Gdata/App/Extension','Updated.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoFeed.php',55],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',137],['lib/zend/Zend/Gdata/Geo','Feed.php',51],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',107],['backup/util/loggers','file_logger.class.php',35],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',57],['lib/zend/Zend/Gdata/Extension','Reminder.php',48],['course/format/topics','renderer.php',38],['mod/lesson/classes','file_info.php',45],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',62],['lib/minify/lib/HTTP','Encoder.php',75],['lib/zend/Zend/Gdata/App/Extension','Name.php',43],['lib/google/src/Google/Service','Calendar.php',50],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['lib/dml','database_column_info.php',137],['lib/zend/Zend/Gdata/YouTube/Extension','Gender.php',44],['lib/zend/Zend/Service','Yahoo.php',49],['lib/zend/Zend/Service/Amazon','SimilarProduct.php',44],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/horde/framework/Horde','Stream.php',50],['lib/google/src/Google/Service','Analytics.php',76],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['lib/xmldb','xmldb_file.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',97],['lib/zend/Zend/Service/Amazon/Ec2','Response.php',78],['lib/zend/Zend/Soap/Wsdl/Strategy','Composite.php',60],['lib/google/src/Google/Service','Tasks.php',44],['lib/zend/Zend/XmlRpc','Response.php',68],['lib/horde/framework/Horde/Exception','NotFound.php',15],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['lib/zend/Zend/Gdata/Books','VolumeEntry.php',131],['question','previewlib.php',122],['mod/wiki','renderer.php',537],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',62],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',393],['mod/assign','renderable.php',517],['mod/assign','renderable.php',576],['mod/assign','renderable.php',613],['mod/assign','renderable.php',653],['mod/assign','renderable.php',706],['mod/assign','renderable.php',760],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Invalidate.php',46],['lib/zend/Zend/Service/Yahoo','ImageResult.php',97],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',183],['mod/quiz/classes/question/bank','custom_view.php',44],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['lib/zend/Zend/Amf/Adobe','Auth.php',56],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/zend/Zend/Amf/Parse','Deserializer.php',45],['lib/zend/Zend/Service/Delicious','SimplePost.php',56],['lib/zend/Zend/Service/Technorati','ResultSet.php',112],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1211],['cache/classes','loaders.php',1606],['lib/zend/Zend/Gdata/Gbase','Entry.php',62],['lib/zend/Zend/Validate','Identical.php',64],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['cache/stores/mongodb','lib.php',116],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/zend/Zend/Gdata/App/Extension','Draft.php',44],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',54],['lib/zend/Zend/Service/Yahoo','InlinkDataResult.php',47],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/lessphp/Tree','Directive.php',20],['lib/zend/Zend/Service/Yahoo','VideoResult.php',118],['question/type/calculated','edit_calculated_form.php',51],['lib/classes','string_manager_install.php',43],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/google/src/Google/Logger','Psr.php',37],['grade/report/history/classes/output','user_button.php',40],['lib','externallib.php',129],['lib','externallib.php',426],['lib','externallib.php',457],['lib','externallib.php',488],['lib','externallib.php',517],['lib','externallib.php',649],['lib','externallib.php',684],['lib','externallib.php',782],['backup/util/ui','base_ui_stage.class.php',67],['lib/zend/Zend/Validate','CreditCard.php',136],['lib/zend/Zend/Gdata/Spreadsheets','CellQuery.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['mod/quiz/accessrule','accessrulebase.php',52],['lib/mustache/src/Mustache','Context.php',20],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','CallStatus.php',46],['lib/zend/Zend/Gdata/Spreadsheets','CellFeed.php',78],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['lib/lessphp/Tree','Color.php',15],['lib/zend/Zend/Service/StrikeIron','Base.php',56],['lib/zend/Zend/Gdata/Exif/Extension','FStop.php',49],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/zend/Zend/Service/Simpy','Tag.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['cache/classes','helper.php',90],['lib/zend/Zend/Soap','Wsdl.php',73],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['lib/zend/Zend/Validate/Barcode','Code25interleaved.php',53],['webservice/soap','locallib.php',162],['lib/lessphp/Tree','Quoted.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['lib/zend/Zend/Gdata/YouTube','ActivityEntry.php',88],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',517],['lib/zend/Zend/Service','Audioscrobbler.php',65],['lib/zend/Zend/Service/Flickr','ResultSet.php',82],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['lib/zend/Zend/XmlRpc/Request','Stdin.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Validate.php',63],['mod/glossary','locallib.php',481],['lib/google/src/Google/Logger','Abstract.php',121],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/zend/Zend/Http/Client/Adapter','Curl.php',92],['lib/google/src/Google/Service','Oauth2.php',50],['lib/phpmailer','moodle_phpmailer.php',47],['lib/zend/Zend/Validate/Barcode','Intelligentmail.php',47],['repository/skydrive','microsoftliveapi.php',50],['mod/workshop/allocation/manual','lib.php',51],['lib/zend/Zend/Validate/File','Exists.php',62],['lib/xhprof','xhprof_moodle.php',788],['question/classes/bank/search','category_condition.php',60],['lib/markdown','Markdown.php',96],['grade/report/grader','lib.php',104],['lib/zend/Zend/Gdata/YouTube/Extension','Control.php',48],['lib/zend/Zend/Validate','StringLength.php',79],['question/behaviour','behaviourbase.php',50],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib/zend/Zend/Gdata/Photos/Extension','Nickname.php',50],['lib/zend/Zend/Gdata/Exif/Extension','Tags.php',169],['lib/zend/Zend/Uri','Http.php',108],['lib/zend/Zend/Gdata/YouTube/Extension','Hometown.php',44],['cache/stores/file','lib.php',117],['lib/zend/Zend/Service','Amazon.php',75],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/zend/Zend/Gdata/Media/Extension','MediaThumbnail.php',64],['lib/zend/Zend/Service/Yahoo','Image.php',56],['lib/zend/Zend/Gdata','Feed.php',87],['lib/google/src/Google/Service','Storage.php',54],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['admin/tool/uploadcourse/classes','course.php',111],['lib/zend/Zend/Gdata/Extension','Where.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/zend/Zend/Service/Amazon','S3.php',102],['lib/horde/framework/Horde/Stream','Existing.php',28],['backup/util/output','output_controller.class.php',44],['backup/cc/cc_lib','cc_version1.php',57],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/zend/Zend/Service/Simpy','Link.php',104],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['lib/zend/Zend/Gdata','Calendar.php',77],['lib/zend/Zend/Validate','Date.php',71],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/xmldb','xmldb_table.php',49],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['backup/cc','cc112moodle.php',59],['lib/zend/Zend/XmlRpc/Client','ServerIntrospection.php',43],['lib/zend/Zend/Gdata/Photos','PhotoFeed.php',147],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',407],['lib','adminlib.php',792],['lib','adminlib.php',1139],['lib','adminlib.php',1213],['lib','adminlib.php',1356],['lib','adminlib.php',1553],['lib','adminlib.php',1925],['lib','adminlib.php',2037],['lib','adminlib.php',2103],['lib','adminlib.php',2204],['lib','adminlib.php',2246],['lib','adminlib.php',2284],['lib','adminlib.php',2372],['lib','adminlib.php',2406],['lib','adminlib.php',2563],['lib','adminlib.php',2648],['lib','adminlib.php',2877],['lib','adminlib.php',3033],['lib','adminlib.php',3175],['lib','adminlib.php',3266],['lib','adminlib.php',3430],['lib','adminlib.php',3510],['lib','adminlib.php',3621],['lib','adminlib.php',3772],['lib','adminlib.php',4001],['lib','adminlib.php',4068],['lib','adminlib.php',4286],['lib','adminlib.php',4315],['lib','adminlib.php',4344],['lib','adminlib.php',4368],['lib','adminlib.php',4398],['lib','adminlib.php',4434],['lib','adminlib.php',4469],['lib','adminlib.php',4501],['lib','adminlib.php',4591],['lib','adminlib.php',4624],['lib','adminlib.php',4680],['lib','adminlib.php',4704],['lib','adminlib.php',4730],['lib','adminlib.php',4753],['lib','adminlib.php',4770],['lib','adminlib.php',4815],['lib','adminlib.php',4878],['lib','adminlib.php',4913],['lib','adminlib.php',4956],['lib','adminlib.php',5039],['lib','adminlib.php',5169],['lib','adminlib.php',5211],['lib','adminlib.php',5256],['lib','adminlib.php',5313],['lib','adminlib.php',5329],['lib','adminlib.php',5385],['lib','adminlib.php',5610],['lib','adminlib.php',5664],['lib','adminlib.php',5718],['lib','adminlib.php',5735],['lib','adminlib.php',5783],['lib','adminlib.php',5825],['lib','adminlib.php',5876],['lib','adminlib.php',5932],['lib','adminlib.php',6161],['lib','adminlib.php',6341],['lib','adminlib.php',6435],['lib','adminlib.php',6582],['lib','adminlib.php',7206],['lib','adminlib.php',7658],['lib','adminlib.php',7841],['lib','adminlib.php',8128],['lib','adminlib.php',8275],['lib','adminlib.php',8435],['lib','adminlib.php',8582],['lib','adminlib.php',8746],['lib','adminlib.php',8939],['lib','adminlib.php',8993],['lib','adminlib.php',9055],['lib','adminlib.php',9100],['mod/workshop/eval/best','lib.php',44],['lib/zend/Zend/Gdata/Calendar','EventQuery.php',91],['lib/zend/Zend/Service/Technorati','TagResult.php',94],['lib/google/src/Google/Cache','Null.php',26],['enrol/flatfile','adminlib.php',35],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',52],['mod/quiz/report/statistics','statistics_question_table.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','AddConferenceTemplateParticipantRequest.php',53],['mod/data','lib.php',66],['mod/data','lib.php',2164],['mod/data','lib.php',2438],['mod/data','lib.php',2459],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/classes/session','memcached.php',51],['lib/google/src/Google/IO','Abstract.php',37],['availability/classes','info_section.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Books.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/filestorage','stored_file.php',63],['grade/report/history/classes/output','tablelog.php',72],['lib/classes','plugin_manager.php',71],['lib/google/src/Google','Model.php',32],['lib/zend/Zend/Gdata/YouTube/Extension','Relationship.php',44],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/filebrowser','virtual_root_file.php',45],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['availability/condition/grade/classes','condition.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',188],['admin/roles/classes','check_capability_table.php',40],['lib/zend/Zend/Gdata/Media','Entry.php',60],['lib/zend/Zend/Gdata','MimeFile.php',43],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/cc/cc_lib','cc_resources.php',102],['lib/zend/Zend/Loader/Autoloader','Resource.php',62],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/simplepie/library/SimplePie','IRI.php',252],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntity.php',66],['lib/zend/Zend/Service/DeveloperGarden/Request/LocalSearch','LocalSearchRequest.php',60],['mod/quiz/report/overview','overview_table.php',41],['lib/zend/Zend/Gdata/Photos/Extension','Client.php',51],['backup/cc/cc_lib','cc_converters.php',75],['lib/google/src/Google/Service','AdSense.php',68],['lib/zend/Zend/Gdata','Entry.php',48],['lib','filterlib.php',74],['lib','filterlib.php',382],['lib/lessphp/Tree','Alpha.php',13],['lib/zend/Zend/Gdata','DublinCore.php',51],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/lessphp/Tree','Selector.php',31],['lib/zend/Zend/Service','Nirvanix.php',47],['lib/dtl','file_xml_database_importer.php',34],['mod/workshop','mod_form.php',44],['lib/zend/Zend/Service/Technorati','CosmosResultSet.php',73],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['lib/zend/Zend/Gdata/YouTube/Extension','Age.php',44],['repository/s3','S3.php',176],['repository/s3','S3.php',1994],['repository/s3','S3.php',2346],['lib/lessphp/Tree','Ruleset.php',45],['lib/zend/Zend/Service/Simpy','NoteSet.php',47],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['lib/google/src/Google/Service','Pubsub.php',44],['lib/alfresco/Service','Node.php',51],['lib/zend/Zend/Service','Technorati.php',79],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['admin/tool/monitor/classes','subscription.php',43],['lib/zend/Zend/Gdata/App/Extension','Person.php',61],['backup/moodle2','backup_course_task.class.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['lib/zend/Zend/Gdata/YouTube','ContactEntry.php',61],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['mod/assignment/backup/moodle1','lib.php',223],['lib/zend/Zend/Gdata/Health/Extension','Ccr.php',43],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['mod/quiz','mod_form.php',48],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/zend/Zend/Gdata/Calendar','EventFeed.php',55],['lib/zend/Zend/Gdata/Spreadsheets','DocumentQuery.php',57],['availability/tests/fixtures','mock_condition.php',52],['lib/lessphp','Visitor.php',14],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/minify/lib/Minify/Cache','File.php',9],['lib/zend/Zend/Gdata/Exif','Entry.php',64],['grade/tests','reportlib_test.php',36],['mod/workshop/allocation','lib.php',103],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',57],['lib/zend/Zend/Gdata/Photos/Extension','User.php',50],['admin/tool/uploadcourse/classes','tracker.php',72],['lib/zend/Zend/Service/Technorati','GetInfoResult.php',52],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',61],['lib/zend/Zend/Gdata/YouTube/Extension','Hobbies.php',44],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/zend/Zend/Gdata/Photos/Extension','Width.php',50],['admin/roles/classes','view_role_definition_table.php',28],['lib/phpunit/classes','arraydataset.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/zend/Zend','Exception.php',34],['backup/util/xml/parser/tests','parser_test.php',797],['lib/zend/Zend/Validate/File','ImageSize.php',113],['lib/zend/Zend/Validate','Alnum.php',65],['lib/zend/Zend/Service/Flickr','Image.php',62],['lib/phpexcel/PHPExcel/Calculation','Function.php',71],['lib/horde/framework/Horde/Support','Inflector.php',115],['lib/horde/framework/Horde/Exception','Pear.php',22],['question/classes/bank','random_question_loader.php',61],['lib/phpexcel/PHPExcel/Reader','HTML.php',104],['lib/mustache/src/Mustache/Loader','InlineLoader.php',57],['lib/zend/Zend/Gdata/Photos/Extension','QuotaLimit.php',51],['admin/tool/uploadcourse/classes','processor.php',122],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetFeed.php',40],['lib/lessphp/Tree','Rule.php',24],['lib/zend/Zend/Service/Amazon','EditorialReview.php',44],['lib/zend/Zend/Service/ReCaptcha','MailHide.php',86],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['lib/classes/progress','display_if_slow.php',60],['availability/condition/group/classes','condition.php',43],['lib/zend/Zend/Gdata/Photos/Extension','Location.php',50],['backup/moodle2','restore_settingslib.php',125],['lib/filebrowser','file_info.php',43],['repository/equella','lib.php',42],['lib/zend/Zend/Http','Client.php',242],['lib/alfresco/Service','ChildAssociation.php',30],['lib/zend/Zend/Gdata/DublinCore/Extension','Subject.php',44],['lib/zend/Zend/Gdata/App/Extension','Category.php',46],['badges/lib','awardlib.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/mustache/src/Mustache','Template.php',29],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',49],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['admin/roles/classes','define_role_table_advanced.php',46],['backup/moodle2','restore_section_task.class.php',42],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib/google/src/Google','Client.php',71],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['backup/moodle2','restore_plugin.class.php',43],['lib/simplepie/library/SimplePie','Registry.php',99],['backup/cc','cc2moodle.php',105],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',56],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['lib/zend/Zend/Validate/File','Count.php',92],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/editor/atto','adminlib.php',109],['lib/google/src/Google/Service','Admin.php',40],['lib/dml','moodle_transaction.php',40],['backup/util/plan','restore_structure_step.class.php',46],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1513],['question/engine','questionattempt.php',1599],['question/engine','questionattempt.php',1684],['lib/zend/Zend/Service/Technorati','Weblog.php',152],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['lib/google/src/Google/Cache','File.php',39],['lib/google/src/Google/Http','Request.php',55],['backup/moodle2','backup_block_task.class.php',43],['lib/simplepie/library/SimplePie','Source.php',61],['lib/google/src/Google/Service','Translate.php',40],['availability/classes','capability_checker.php',49],['lib','navigationlib.php',145],['lib','navigationlib.php',1012],['lib','navigationlib.php',2814],['lib','navigationlib.php',3075],['lib','navigationlib.php',3409],['lib','navigationlib.php',4775],['lib','navigationlib.php',4956],['lib/zend/Zend/Gdata/YouTube/Extension','MediaCredit.php',64],['lib/dml','pdo_moodle_database.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','ReleaseDate.php',44],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','NewParticipantRequest.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','RowCount.php',49],['lib/zend/Zend/Validate/File','IsCompressed.php',53],['lib/zend/Zend/Gdata/Photos/Extension','MaxPhotosPerAlbum.php',51],['lib/zend/Zend/Gdata/Extension','When.php',52],['question/classes/bank/search','hidden_condition.php',42],['report/loglive/classes','renderable.php',73],['mod/lti/classes/local/ltiservice','response.php',58],['lib/zend/Zend/Gdata/Extension','Recurrence.php',43],['lib/zend/Zend/Gdata/Books/Extension','BooksLink.php',41],['backup/util/loggers','database_logger.class.php',40],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',250],['lib/phpexcel/PHPExcel','HashTable.php',52],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/classes/update','deployer.php',42],['lib/zend/Zend/Gdata/YouTube','VideoFeed.php',53],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetQuotaInformation.php',40],['lib/minify/lib','CSSmin.php',43],['lib/zend/Zend/Validate/File','Crc32.php',60],['mod/feedback/item','feedback_item_class.php',20],['question/engine/upgrade','upgradelib.php',280],['question/engine/upgrade','upgradelib.php',381],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetEntry.php',43],['lib/google/src/Google/Service','Dns.php',50],['lib/zend/Zend/Gdata/Gapps','Query.php',57],['lib/zend/Zend/Gdata/YouTube/Extension','School.php',44],['lib/mustache/src/Mustache','HelperCollection.php',19],['mod/assign','gradingtable.php',68],['backup/util/xml/output','file_xml_output.class.php',37],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/zend/Zend/Service','Akismet.php',77],['lib','googleapi.php',52],['lib','googleapi.php',243],['lib/zend/Zend/Service/Yahoo','ResultSet.php',84],['lib/classes/message/inbound','processing_failed_exception.php',36],['lib','portfoliolib.php',101],['lib/lessphp/Tree','Import.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',53],['lib/tests/fixtures','test_renderer_factory.php',41],['mod/lesson','editpage_form.php',41],['grade/report','lib.php',156],['lib/zend/Zend/XmlRpc/Request','Http.php',53],['lib/filebrowser','file_info_stored.php',51],['lib/phpexcel/PHPExcel/Style','Protection.php',57],['lib/google/src/Google','Config.php',30],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/zend/Zend/Validate','LessThan.php',58],['grade/export','lib.php',60],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistTitle.php',44],['availability/classes','tree.php',118],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['question/classes/statistics/responses','analysis_for_subpart.php',50],['lib/zend/Zend/Validate','InArray.php',65],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['lib/zend/Zend/Gdata/Photos/Extension','Height.php',50],['lib/zend/Zend/Gdata/Gapps','Error.php',76],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['lib/phpexcel/PHPExcel','Chart.php',150],['lib/google/src/Google/Service','Replicapool.php',48],['lib/zend/Zend/Gdata/Media/Extension','MediaRating.php',49],['lib/zend/Zend/Gdata/YouTube','VideoEntry.php',175],['admin/tool/installaddon/classes','pluginfo_client.php',68],['admin/tool/installaddon/classes','pluginfo_client.php',206],['lib/google/src/Google/Service','Resourceviews.php',54],['admin/tool/log/store/legacy/classes/log','store.php',33],['backup/moodle2','backup_section_task.class.php',40],['lib/phpexcel/PHPExcel/Worksheet','CellIterator.php',68],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['repository/youtube','lib.php',40],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/testing/generator','component_generator_base.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Format.php',44],['lib','badgeslib.php',133],['admin/tool/installaddon/classes','installer.php',488],['admin/tool/installaddon/classes','installer.php',745],['lib/zend/Zend/XmlRpc','Client.php',122],['lib/mustache/src/Mustache','LambdaHelper.php',24],['admin/roles/classes','permissions_table.php',38],['lib/jabber/XMPP','XMLObj.php',76],['lib','coursecatlib.php',197],['lib','coursecatlib.php',2668],['question/type','edit_question_form.php',96],['lib/zend/Zend/Gdata','MediaMimeStream.php',80],['mod/quiz/report/responses','last_responses_table.php',39],['lib/zend/Zend/Gdata/Photos/Extension','Timestamp.php',51],['lib','setuplib.php',106],['lib','setuplib.php',158],['lib','setuplib.php',174],['lib','setuplib.php',194],['lib','setuplib.php',224],['lib','setuplib.php',246],['lib','setuplib.php',262],['lib','setuplib.php',284],['lib','setuplib.php',303],['lib','setuplib.php',321],['lib/google/src/Google/Cache','Apc.php',35],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/lessphp/Tree','Unit.php',16],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','TearDownCall.php',46],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',261],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['lib/zend/Zend/Service/Amazon','CustomerReview.php',69],['lib/zend/Zend/Gdata/YouTube/Extension','QueryString.php',44],['lib/zend/Zend/Gdata/Gapps/Extension','Name.php',65],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/lessphp/Tree','RulesetCall.php',14],['lib/zend/Zend/Gdata/Extension','Rating.php',49],['repository/alfresco','lib.php',42],['lib/zend/Zend/Service/Technorati','SearchResultSet.php',49],['lib/zend/Zend/Gdata/Photos','UserQuery.php',71],['enrol','renderer.php',426],['enrol','renderer.php',728],['badges/criteria','award_criteria_course.php',47],['lib/zend/Zend/Gdata/Extension','RecurrenceException.php',56],['lib/phpexcel/PHPExcel/Style','Fill.php',89],['lib/zend/Zend/Service/Technorati','TagsResult.php',60],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/google/src/Google/Service','Exception.php',12],['lib/zend/Zend/Gdata','Spreadsheets.php',115],['lib/xmldb','xmldb_index.php',56],['question/classes/statistics/responses','analyser.php',69],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['lib/zend/Zend/Gdata/Photos/Extension','Position.php',50],['lib/google/src/Google/Auth','Simple.php',32],['lib/zend/Zend/Gdata/Geo/Extension','GmlPoint.php',62],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/zend/Zend/Rest','Route.php',71],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateParticipantRequest.php',60],['question','category_class.php',58],['lib/classes/progress','display.php',48],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['lib/zend/Zend/Gdata/App/Extension','Rights.php',43],['lib/adodb','adodb-active-record.inc.php',113],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['lib/zend/Zend/Validate','NotEmpty.php',77],['question/type/calculated','datasetitems_form.php',72],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['lib/dml','pdo_moodle_recordset.php',41],['backup/cc/cc_lib','cc_converter_folder.php',28],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib/zend/Zend/Gdata/Calendar','ListEntry.php',85],['admin/tool/monitor/classes','rule.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/zend/Zend/Gdata/Geo','Entry.php',55],['lib/zend/Zend/Gdata/YouTube/Extension','Link.php',48],['lib','flickrlib.php',53],['lib/zend/Zend/Gdata/YouTube/Extension','AboutMe.php',44],['lib/zend/Zend/Service/DeveloperGarden','Credential.php',54],['grade/report/overview','lib.php',76],['lib/simplepie/library/SimplePie','File.php',68],['backup/moodle2','backup_plugin.class.php',44],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',46],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['rating','lib.php',114],['rating','lib.php',1070],['lib','dtllib.php',66],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['question/engine','datalib.php',68],['question/engine','datalib.php',1330],['question/engine','datalib.php',1631],['question/engine','datalib.php',1739],['question/engine','datalib.php',1869],['question/engine','datalib.php',1940],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',405]], 1047],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'reset_scheduled_tasks_for_component': ['reset_scheduled_tasks_for_component', 'Update the database to contain a list of scheduled task for a component. The list of scheduled tasks is taken from @load_scheduled_tasks_for_component. Will throw exceptions for any errors. ', [['lib/classes/task','manager.php',79]], 12],
'normalize_component': ['normalize_component', 'Normalize the component name using the "frankenstyle" rules. ', [['lib/classes','component.php',968],['lib','deprecatedlib.php',528]], 85],
'admin_apply_default_settings': ['admin_apply_default_settings', 'This function applies default settings. ', [['lib','adminlib.php',6786]], 7],
'upgrade_init_javascript': ['upgrade_init_javascript', 'Sets up JS code required for all upgrade scripts. ', [['lib','upgradelib.php',1432]], 2],
'execute': ['execute', 'Exceptionally override the execute method, so, based in the activity_included setting, we are able to skip the execution of one task completely ', [['backup/moodle2','backup_activity_task.class.php',205],['backup/converter/moodle1','backuplib.php',10],['filter/tex','latex.php',60],['backup/util/plan','base_plan.class.php',158],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['mod/lti/service/profile/classes/local/resource','profile.php',76],['webservice','lib.php',1772],['lib/classes/task','context_cleanup_task.php',41],['lib/adodb','adodb.inc.php',967],['enrol/imsenterprise/classes/task','cron_task.php',43],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/classes/task','calendar_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['lib/classes/task','registration_cron_task.php',40],['lib/classes/task','portfolio_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/google/src/Google/Http','Batch.php',56],['backup/converter/imscc11','lib.php',85],['lib/classes/task','file_temp_cleanup_task.php',40],['filter/tex','texdebug.php',287],['admin/tool/monitor/classes','notification_task.php',39],['lib/classes/task','stats_cron_task.php',40],['lib/classes/task','backup_cleanup_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['backup/util/ui','backup_ui.class.php',122],['lib/dml','pgsql_native_moodle_database.php',665],['lib/classes/task','messaging_cleanup_task.php',40],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',68],['lib/classes/task','session_cleanup_task.php',40],['lib/classes/task','completion_cron_task.php',40],['lib/dml','oci_native_moodle_database.php',1009],['backup/util/plan','base_task.class.php',162],['lib/adodb/drivers','adodb-pdo.inc.php',464],['backup/util/plan','backup_plan.class.php',112],['backup/util/ui','restore_ui.class.php',206],['backup/converter/imscc11','backuplib.php',42],['backup/moodle2','restore_activity_task.class.php',183],['','mdeploy.php',743],['lib/dml','sqlsrv_native_moodle_database.php',745],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['lib/google/src/Google/Http','REST.php',28],['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['lib/classes/task','plagiarism_cron_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','backup_structure_step.class.php',50],['mod/forum/classes/task','cron_task.php',39],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','file_trash_cleanup_task.php',40],['backup/util/plan','restore_execution_step.class.php',25],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['admin/tool/installaddon/classes','validator.php',114],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','automated_backup_task.php',40],['backup/converter/moodle1','lib.php',142],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/classes/task','create_contexts_task.php',40],['backup/util/plan','restore_plan.class.php',159],['backup/converter/imscc1','lib.php',84],['lib/dml','mssql_native_moodle_database.php',662],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/classes/task','cache_cleanup_task.php',40],['lib/classes/task','badges_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['backup/util/interfaces','executable.class.php',32],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['lib/adodb/drivers','adodb-oci8po.inc.php',52],['lib/classes/task','question_cron_task.php',40],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','NoRetry.php',37],['lib/dml','mysqli_native_moodle_database.php',955],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['backup/util/plan/tests/fixtures','plan_fixtures.php',47],['backup/util/plan/tests/fixtures','plan_fixtures.php',55],['lib/classes/task','events_cron_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['lib/adodb/drivers','adodb-oci8.inc.php',786],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','tag_cron_task.php',40],['lib/classes/task','blog_cron_task.php',40],['lib/classes/task','send_failed_login_notifications_task.php',43],['lib/classes/task','grade_cron_task.php',40],['lib/dml/tests','dml_test.php',5422],['admin/tool/uploadcourse/classes','processor.php',174],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['lib/google/src/Google','Client.php',545],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','legacy_plugin_cron_task.php',42],['lib/dml','pdo_moodle_database.php',226],['lib/classes/task','check_for_updates_task.php',40],['backup/util/helper','restore_decode_processor.class.php',73],['backup/moodle2','backup_section_task.class.php',97],['webservice/amf/testclient','AMFTester.mxml',282],['lib/classes/task','delete_incomplete_users_task.php',40],['mod/assign','adminlib.php',342],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/monitor/classes/task','clean_events.php',41]], 733],
'remove_dir': ['remove_dir', 'Delete directory or only its content ', [['lib','moodlelib.php',8763]], 41],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers-debug.js',27],['lib/yuilib/3.17.2/timers','timers.js',27]], 454],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'create_instances': ['create_instances', 'Create all context instances at the given level and above. ', [['lib','accesslib.php',5955],['backup/cc','cc2moodle.php',609]], 11],
'purge_all': ['purge_all', 'Purge all of the cache stores of all of their data. ', [['cache/classes','helper.php',464]], 11],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'get_plugin_list': ['get_plugin_list', 'Get list of plugins of given type. ', [['lib/classes','component.php',781],['lib','deprecatedlib.php',467],['admin/tool/monitor/classes','eventlist.php',176]], 184],
'upgrade_plugin_savepoint': ['upgrade_plugin_savepoint', 'Plugins upgrade savepoint, marks end of blocks upgrade blocks It stores plugin version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',321]], 89],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'update_definitions': ['update_definitions', 'Updates the definition in the configuration from those found in the cache files. ', [['cache','disabledlib.php',449],['cache','locallib.php',494],['cache/classes','helper.php',582]], 7],
'install_from_xmldb_file': ['install_from_xmldb_file', 'This function will load one entire XMLDB file and call install_from_xmldb_structure. ', [['lib/ddl','database_manager.php',355]], 7],
'check_database_tables_row_format': ['check_database_tables_row_format', 'This function verifies if the database has tables using innoDB Antelope row format. ', [['lib','upgradelib.php',2253]], 0],
'make_writable_directory': ['make_writable_directory', 'Create a directory and make sure it is writable. ', [['lib','setuplib.php',1442]], 17],
'get_columns': ['get_columns', 'Returns detailed information about columns in table. This information is cached internally. ', [['lib/dml','pgsql_native_moodle_database.php',385],['lib/dml','oci_native_moodle_database.php',464],['lib/dml','sqlsrv_native_moodle_database.php',462],['lib/dml','sqlite3_pdo_moodle_database.php',195],['lib/dml','mssql_native_moodle_database.php',392],['lib','csvlib.class.php',190],['lib/dml','mysqli_native_moodle_database.php',572],['lib/dml/tests','dml_test.php',5417]], 108],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'upgrade_plugin_mnet_functions': ['upgrade_plugin_mnet_functions', 'upgrades the mnet rpc definitions for the given component. this method doesn\'t return status, an exception will be thrown in the case of an error ', [['lib','upgradelib.php',1671]], 9],
'upgrade_finished_handler': ['upgrade_finished_handler', 'Internal function - executed if upgrade interrupted. ', [['lib','upgradelib.php',1309]], 0],
'make_cache_directory': ['make_cache_directory', 'Create a directory under cachedir and make sure it is writable. ', [['lib','setuplib.php',1605]], 13],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'make_localcache_directory': ['make_localcache_directory', 'Create a directory under localcachedir and make sure it is writable. The files in this directory MUST NOT change, use revisions or content hashes to work around this limitation - this means you can only add new files here. ', [['lib','setuplib.php',1625]], 17],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'purge_all_caches': ['purge_all_caches', 'Invalidates browser caches and cached data in temp. ', [['lib','moodlelib.php',1588]], 13],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1141]], 419],
'is_readable': ['is_readable', '', [], 207],
'is_array': ['is_array', '', [], 1820],
'rename': ['rename', '', [], 47],
'scandir': ['scandir', '', [], 13],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'class_exists': ['class_exists', '', [], 273],
'in_array': ['in_array', '', [], 1173],
'connection_aborted': ['connection_aborted', '', [], 10],
'time': ['time', '', [], 1768],
'array_pop': ['array_pop', '', [], 438],
'implode': ['implode', '', [], 1259],
'preg_quote': ['preg_quote', '', [], 207],
'array_key_exists': ['array_key_exists', '', [], 1539],
'array_search': ['array_search', '', [], 188],
'strtolower': ['strtolower', '', [], 922],
'gettype': ['gettype', '', [], 288],
'str_replace': ['str_replace', '', [], 1667],
'is_null': ['is_null', '', [], 1992],
'sha1': ['sha1', '', [], 188],
'file_exists': ['file_exists', '', [], 873],
'get_class': ['get_class', '', [], 332],
'is_string': ['is_string', '', [], 680],
'strtotime': ['strtotime', '', [], 255],
'ignore_user_abort': ['ignore_user_abort', '', [], 25],
'define': ['define', '', [], 2170],
'max': ['max', '', [], 1096],
'is_dir': ['is_dir', '', [], 221],
'is_file': ['is_file', '', [], 108],
'strpos': ['strpos', '', [], 1623],
'defined': ['defined', '', [], 4098],
'preg_match': ['preg_match', '', [], 1317],
'is_bool': ['is_bool', '', [], 177],
'is_writable': ['is_writable', '', [], 76],
'function_exists': ['function_exists', '', [], 443],
'serialize': ['serialize', '', [], 266],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'file': ['file', 'File based session handler. ', [['lib/classes/session','file.php',29]], 8],
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 87],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'manager': ['manager', 'Defines MAnager class for myprofile navigation tree. ', [['user/classes/output/myprofile','manager.php',28],['lib/classes/log','manager.php',29],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message','manager.php',31],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/task','manager.php',28],['lib/classes/event','manager.php',30]], 346],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'upgrade_exception': ['upgrade_exception', 'Exception indicating unknown error during upgrade. ', [['lib','upgradelib.php',36]], 4],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 131],
'downgrade_exception': ['downgrade_exception', 'Exception indicating downgrade error during upgrade. ', [['lib','upgradelib.php',52]], 7],
'plugin_misplaced_exception': ['plugin_misplaced_exception', 'Misplaced plugin exception. ', [['lib','upgradelib.php',100]], 3],
'plugin_defective_exception': ['plugin_defective_exception', '', [['lib','upgradelib.php',93]], 16],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 512],
'upgrade_requires_exception': ['upgrade_requires_exception', '', [['lib','upgradelib.php',75]], 3],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',68]], 478],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5824]], 210],
'core_shutdown_manager': ['core_shutdown_manager', 'Shutdown management class. ', [['lib/classes','shutdown_manager.php',27]], 12],
'zend_server_reflection': ['zend_server_reflection', 'Reflection for determining method signatures to use with server classes ', [['lib/zend/Zend/Server','Reflection.php',31]], 9]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 378],
'UPGRADE_LOG_ERROR': ['UPGRADE_LOG_ERROR', '', [['lib','upgradelib.php',34]], 2],
'MEMORY_EXTRA': ['MEMORY_EXTRA', '', [['lib','setuplib.php',50]], 37],
'PARAM_COMPONENT': ['PARAM_COMPONENT', '', [['lib','moodlelib.php',310]], 94],
'UPGRADE_LOG_NOTICE': ['UPGRADE_LOG_NOTICE', '', [['lib','upgradelib.php',32]], 1],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 165],
'UPGRADE_LOG_NORMAL': ['UPGRADE_LOG_NORMAL', '', [['lib','upgradelib.php',30]], 12],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'CLI_SCRIPT': ['CLI_SCRIPT', '', [['auth/ldap/cli','sync_users.php',49],['admin/tool/behat/cli','init.php',36],['auth/db/cli','sync_users.php',45],['admin/cli','mysql_collation.php',25],['admin/cli','cron.php',31],['admin/tool/behat/cli','util_single_run.php',90],['repository/boxnet/cli','migrationv1.php',25],['admin/cli','install.php',32],['enrol/self/cli','sync.php',31],['enrol/flatfile/cli','sync.php',30],['enrol/meta/cli','sync.php',31],['admin/cli','fix_deleted_users.php',26],['','mdeploy.php',65],['admin/cli','check_database_schema.php',26],['admin/tool/dbtransfer/cli','migrate.php',30],['enrol/paypal/cli','sync.php',30],['admin/tool/behat/cli','util.php',34],['admin/tool/replace/cli','replace.php',25],['','install.php',46],['mod/chat','chatd.php',25],['admin/tool/generator/cli','maketestsite.php',25],['enrol/database/cli','sync.php',34],['enrol/manual/cli','sync.php',30],['admin','cron.php',47],['admin/cli','mysql_engine.php',27],['admin/tool/generator/cli','maketestcourse.php',25],['admin/cli','upgrade.php',38],['admin/cli','reset_password.php',27],['admin/cli','maintenance.php',26],['admin/cli','install_database.php',31],['lib/editor/tinymce/cli','update_lang_files.php',25],['theme/base/cli','svgtool.php',26],['admin/cli','automated_backups.php',29],['admin/cli','mysql_compressed_rows.php',26],['admin/cli','backup.php',26],['admin/tool/behat/cli','run.php',30],['admin/tool/task/cli','schedule_task.php',25],['enrol/ldap/cli','sync.php',43],['lib/filestorage/tests/fixtures','zip_info.php',25],['auth/cas/cli','sync_users.php',45],['lib','setup.php',289],['admin/cli','alternative_component_cache.php',30],['enrol/category/cli','sync.php',33],['lib/phpunit','bootstrap.php',73],['lib/tests/behat','behat_hooks.php',115],['admin/cli','fix_course_sequence.php',26],['admin/cli','purge_caches.php',24],['admin/tool/generator/cli','maketestplan.php',25],['lib/filestorage/tests/fixtures','zip_create_test_file.php',25],['enrol/cohort/cli','sync.php',31],['admin/tool/uploadcourse/cli','uploadcourse.php',25]], 109]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
