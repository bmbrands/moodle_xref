<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/upgradelib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='upgradelib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="upgradelib.php.html">upgradelib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="upgradelib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="upgradelib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Various upgrade/install related functions and classes.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    core</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas (http://dougiamas.com)</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/** UPGRADE_LOG_NORMAL = 0 */</span>
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>', 0);
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/** UPGRADE_LOG_NOTICE = 1 */</span>
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('UPGRADE_LOG_NOTICE')" href="../_constants/UPGRADE_LOG_NOTICE.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NOTICE')">UPGRADE_LOG_NOTICE</a>', 1);
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">/** UPGRADE_LOG_ERROR = 2 */</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('UPGRADE_LOG_ERROR')" href="../_constants/UPGRADE_LOG_ERROR.html" onMouseOver="constPopup(event,'UPGRADE_LOG_ERROR')">UPGRADE_LOG_ERROR</a>',  2);
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * Exception indicating unknown error during upgrade.</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @package    core</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> */</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l45"><span class="linenum">  45</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it263" onMouseOver="hilite(263)" onMouseOut="lolite()" onClick="logVariable('debuginfo')" href="../_variables/debuginfo.html">$debuginfo</a>=NULL) {
<a name="l46"><span class="linenum">  46</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = (object)array('plugin'=&gt;<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'version'=&gt;<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l48"><span class="linenum">  48</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('upgradeerror', 'admin', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>, <a class="var it263" onMouseOver="hilite(263)" onMouseOut="lolite()" onClick="logVariable('debuginfo')" href="../_variables/debuginfo.html">$debuginfo</a>);
<a name="l49"><span class="linenum">  49</span></a>      }
<a name="l50"><span class="linenum">  50</span></a>  }
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * Exception indicating downgrade error during upgrade.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> *</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @package    core</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> */</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l61"><span class="linenum">  61</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it443" onMouseOver="hilite(443)" onMouseOut="lolite()" onClick="logVariable('oldversion')" href="../_variables/oldversion.html">$oldversion</a>, <a class="var it5088" onMouseOver="hilite(5088)" onMouseOut="lolite()" onClick="logVariable('newversion')" href="../_variables/newversion.html">$newversion</a>) {
<a name="l62"><span class="linenum">  62</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) ? 'moodle' : <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = (object)array('plugin'=&gt;<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'oldversion'=&gt;<a class="var it443" onMouseOver="hilite(443)" onMouseOut="lolite()" onClick="logVariable('oldversion')" href="../_variables/oldversion.html">$oldversion</a>, 'newversion'=&gt;<a class="var it5088" onMouseOver="hilite(5088)" onMouseOut="lolite()" onClick="logVariable('newversion')" href="../_variables/newversion.html">$newversion</a>);
<a name="l65"><span class="linenum">  65</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('cannotdowngrade', 'debug', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l66"><span class="linenum">  66</span></a>      }
<a name="l67"><span class="linenum">  67</span></a>  }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">/**</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * @package    core</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> */</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l76"><span class="linenum">  76</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it25460" onMouseOver="hilite(25460)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>, <a class="var it25461" onMouseOver="hilite(25461)" onMouseOut="lolite()" onClick="logVariable('currentmoodle')" href="../_variables/currentmoodle.html">$currentmoodle</a>, <a class="var it25462" onMouseOver="hilite(25462)" onMouseOut="lolite()" onClick="logVariable('requiremoodle')" href="../_variables/requiremoodle.html">$requiremoodle</a>) {
<a name="l77"><span class="linenum">  77</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('pluginname')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/pluginname.html">pluginname</a>     = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('pluginversion')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/pluginversion.html">pluginversion</a>  = <a class="var it25460" onMouseOver="hilite(25460)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>;
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('currentmoodle')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/currentmoodle.html">currentmoodle</a>  = <a class="var it25461" onMouseOver="hilite(25461)" onMouseOut="lolite()" onClick="logVariable('currentmoodle')" href="../_variables/currentmoodle.html">$currentmoodle</a>;
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('requiremoodle')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/requiremoodle.html">requiremoodle</a>  = <a class="var it25462" onMouseOver="hilite(25462)" onMouseOut="lolite()" onClick="logVariable('requiremoodle')" href="../_variables/requiremoodle.html">$requiremoodle</a>;
<a name="l83"><span class="linenum">  83</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('pluginrequirementsnotmet', 'error', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l84"><span class="linenum">  84</span></a>      }
<a name="l85"><span class="linenum">  85</span></a>  }
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">/**</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * @package    core</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> */</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l94"><span class="linenum">  94</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it1294" onMouseOver="hilite(1294)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>) {
<a name="l95"><span class="linenum">  95</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l96"><span class="linenum">  96</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('detectedbrokenplugin', 'error', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it1294" onMouseOver="hilite(1294)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>);
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">/**</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment"> * Misplaced plugin exception.</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> *</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * Note: this should be used only from the upgrade/admin code.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> *</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> * @package    core</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> * @subpackage upgrade</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda {@link http://skodak.org}</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment"> */</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l111"><span class="linenum"> 111</span></a>      <span class="comment">/**</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * Constructor.</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * @param string $component the component from version.php</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * @param string $expected expected directory, null means calculate</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     * @param string $current plugin directory path</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     */</span>
<a name="l117"><span class="linenum"> 117</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>, <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>) {
<a name="l118"><span class="linenum"> 118</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l119"><span class="linenum"> 119</span></a>          if (empty(<a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>)) {
<a name="l120"><span class="linenum"> 120</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l121"><span class="linenum"> 121</span></a>              <a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l122"><span class="linenum"> 122</span></a>              if (isset(<a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l123"><span class="linenum"> 123</span></a>                  <a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a> = <a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] . '/' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l124"><span class="linenum"> 124</span></a>              }
<a name="l125"><span class="linenum"> 125</span></a>          }
<a name="l126"><span class="linenum"> 126</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>, '<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>') !== 0) {
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>, '<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>', <a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>);
<a name="l128"><span class="linenum"> 128</span></a>          }
<a name="l129"><span class="linenum"> 129</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>, '<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>') !== 0) {
<a name="l130"><span class="linenum"> 130</span></a>              <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>, '<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>', <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>);
<a name="l131"><span class="linenum"> 131</span></a>          }
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('component')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('expected')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/expected.html">expected</a>  = <a class="var it947" onMouseOver="hilite(947)" onMouseOut="lolite()" onClick="logVariable('expected')" href="../_variables/expected.html">$expected</a>;
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('current')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/current.html">current</a>   = <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>;
<a name="l136"><span class="linenum"> 136</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('detectedmisplacedplugin', 'core_plugin', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/index.php&quot;, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l137"><span class="linenum"> 137</span></a>      }
<a name="l138"><span class="linenum"> 138</span></a>  }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">/**</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment"> * Sets maximum expected time needed for upgrade task.</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment"> * Please always make sure that upgrade will not run longer!</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment"> *</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment"> * The script may be automatically aborted if upgrade times out.</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"> *</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> * @param int $max_execution_time in seconds (can not be less than 60 s)</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment"> */</span>
<a name="l149"><span class="linenum"> 149</span></a>  function <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>(<a class="var it24944" onMouseOver="hilite(24944)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a>=300) {
<a name="l150"><span class="linenum"> 150</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      if (!isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>) or <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a> &lt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()) {
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it18344" onMouseOver="hilite(18344)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(null, 'upgraderunning');
<a name="l154"><span class="linenum"> 154</span></a>      } else {
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it18344" onMouseOver="hilite(18344)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>;
<a name="l156"><span class="linenum"> 156</span></a>      }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>      if (!<a class="var it18344" onMouseOver="hilite(18344)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a>) {
<a name="l159"><span class="linenum"> 159</span></a>          if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">            // never stop CLI upgrades</span>
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it18344" onMouseOver="hilite(18344)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> = 0;
<a name="l162"><span class="linenum"> 162</span></a>          } else {
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">            // web upgrade not running or aborted</span>
<a name="l164"><span class="linenum"> 164</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('upgradetimedout', 'admin', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/&quot;);
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>      if (<a class="var it24944" onMouseOver="hilite(24944)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a> &lt; 60) {
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">        // protection against 0 here</span>
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it24944" onMouseOver="hilite(24944)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a> = 60;
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>      <a class="var it25463" onMouseOver="hilite(25463)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() + <a class="var it24944" onMouseOver="hilite(24944)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a>;
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>      if (<a class="var it25463" onMouseOver="hilite(25463)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a> &lt; <a class="var it18344" onMouseOver="hilite(18344)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> + 10 and <a class="var it25463" onMouseOver="hilite(25463)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a> &gt; <a class="var it18344" onMouseOver="hilite(18344)" onMouseOut="lolite()" onClick="logVariable('upgraderunning')" href="../_variables/upgraderunning.html">$upgraderunning</a> - 10) {
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // no need to store new end, it is nearly the same ;-)</span>
<a name="l177"><span class="linenum"> 177</span></a>          return;
<a name="l178"><span class="linenum"> 178</span></a>      }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>      if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">        // there is no point in timing out of CLI scripts, admins can stop them if necessary</span>
<a name="l182"><span class="linenum"> 182</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l183"><span class="linenum"> 183</span></a>      } else {
<a name="l184"><span class="linenum"> 184</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(<a class="var it24944" onMouseOver="hilite(24944)" onMouseOut="lolite()" onClick="logVariable('max_execution_time')" href="../_variables/max_execution_time.html">$max_execution_time</a>);
<a name="l185"><span class="linenum"> 185</span></a>      }
<a name="l186"><span class="linenum"> 186</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('upgraderunning', <a class="var it25463" onMouseOver="hilite(25463)" onMouseOut="lolite()" onClick="logVariable('expected_end')" href="../_variables/expected_end.html">$expected_end</a>); <span class="comment">// keep upgrade locked until this time</span>
<a name="l187"><span class="linenum"> 187</span></a>  }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">/**</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment"> * Upgrade savepoint, marks end of each upgrade block.</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment"> * It stores new main version, resets upgrade timeout</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment"> *</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment"> * Please do not make large upgrade blocks with lots of operations,</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment"> * for example when adding tables keep only one table operation per block.</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment"> *</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> * @return void</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment"> */</span>
<a name="l203"><span class="linenum"> 203</span></a>  function <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l204"><span class="linenum"> 204</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">    //sanity check to avoid confusion with upgrade_mod_savepoint usage.</span>
<a name="l207"><span class="linenum"> 207</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_bool')" href="../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>)) {
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it2692" onMouseOver="hilite(2692)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a> = 'Parameter type mismatch. Are you mixing up <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>() and <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>()?';
<a name="l209"><span class="linenum"> 209</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(<a class="var it2692" onMouseOver="hilite(2692)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a>);
<a name="l210"><span class="linenum"> 210</span></a>      }
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      if (!<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l213"><span class="linenum"> 213</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(null, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l214"><span class="linenum"> 214</span></a>      }
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>      if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &gt;= <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">        // something really wrong is going on in main upgrade script</span>
<a name="l218"><span class="linenum"> 218</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(null, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l219"><span class="linenum"> 219</span></a>      }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l222"><span class="linenum"> 222</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, null, 'Upgrade savepoint reached');
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">    // reset upgrade timeout to default</span>
<a name="l225"><span class="linenum"> 225</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">    // this is a safe place to stop upgrades if user aborts page loading</span>
<a name="l228"><span class="linenum"> 228</span></a>      if (<a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l229"><span class="linenum"> 229</span></a>          die;
<a name="l230"><span class="linenum"> 230</span></a>      }
<a name="l231"><span class="linenum"> 231</span></a>  }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">/**</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> * Module upgrade savepoint, marks end of module upgrade blocks</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> * It stores module version, resets upgrade timeout</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> *</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment"> * @param string $modname name of module</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment"> * @return void</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment"> */</span>
<a name="l245"><span class="linenum"> 245</span></a>  function <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l246"><span class="linenum"> 246</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>      <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'mod_'.<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>;
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      if (!<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l251"><span class="linenum"> 251</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l252"><span class="linenum"> 252</span></a>      }
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>      <a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'name'=&gt;'version'));
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>      if (!<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('modules', array('name'=&gt;<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>))) {
<a name="l257"><span class="linenum"> 257</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('modulenotexist', 'debug', '', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>);
<a name="l258"><span class="linenum"> 258</span></a>      }
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>      if (<a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> &gt;= <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">        // something really wrong is going on in upgrade script</span>
<a name="l262"><span class="linenum"> 262</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l263"><span class="linenum"> 263</span></a>      }
<a name="l264"><span class="linenum"> 264</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Upgrade savepoint reached');
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">    // reset upgrade timeout to default</span>
<a name="l269"><span class="linenum"> 269</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">    // this is a safe place to stop upgrades if user aborts page loading</span>
<a name="l272"><span class="linenum"> 272</span></a>      if (<a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l273"><span class="linenum"> 273</span></a>          die;
<a name="l274"><span class="linenum"> 274</span></a>      }
<a name="l275"><span class="linenum"> 275</span></a>  }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment"> * Blocks upgrade savepoint, marks end of blocks upgrade blocks</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> * It stores block version, resets upgrade timeout</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> *</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment"> * @param string $blockname name of block</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * @return void</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> */</span>
<a name="l289"><span class="linenum"> 289</span></a>  function <a class="function" onClick="logFunction('upgrade_block_savepoint')" href="../_functions/upgrade_block_savepoint.html" onMouseOver="funcPopup(event,'upgrade_block_savepoint')">upgrade_block_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l290"><span class="linenum"> 290</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>      <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      if (!<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l295"><span class="linenum"> 295</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l296"><span class="linenum"> 296</span></a>      }
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>      <a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'name'=&gt;'version'));
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>      if (!<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('block', array('name'=&gt;<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>))) {
<a name="l301"><span class="linenum"> 301</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('blocknotexist', 'debug', '', <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>      if (<a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> &gt;= <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">        // something really wrong is going on in upgrade script</span>
<a name="l306"><span class="linenum"> 306</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l307"><span class="linenum"> 307</span></a>      }
<a name="l308"><span class="linenum"> 308</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Upgrade savepoint reached');
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">    // reset upgrade timeout to default</span>
<a name="l313"><span class="linenum"> 313</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">    // this is a safe place to stop upgrades if user aborts page loading</span>
<a name="l316"><span class="linenum"> 316</span></a>      if (<a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l317"><span class="linenum"> 317</span></a>          die;
<a name="l318"><span class="linenum"> 318</span></a>      }
<a name="l319"><span class="linenum"> 319</span></a>  }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">/**</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> * Plugins upgrade savepoint, marks end of blocks upgrade blocks</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> * It stores plugin version, resets upgrade timeout</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment"> * and abort upgrade if user cancels page loading.</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment"> *</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment"> * @category upgrade</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment"> * @param bool $result false if upgrade step failed, true if completed</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment"> * @param string or float $version main version</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> * @param string $type name of plugin</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * @param string $dir location of plugin</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> * @param bool $allowabort allow user to abort script execution here</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @return void</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> */</span>
<a name="l334"><span class="linenum"> 334</span></a>  function <a class="function" onClick="logFunction('upgrade_plugin_savepoint')" href="../_functions/upgrade_plugin_savepoint.html" onMouseOver="funcPopup(event,'upgrade_plugin_savepoint')">upgrade_plugin_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a>=true) {
<a name="l335"><span class="linenum"> 335</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>      <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'_'.<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>      if (!<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l340"><span class="linenum"> 340</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_exception')" href="../_classes/upgrade_exception.html" onMouseOver="classPopup(event,'upgrade_exception')">upgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l341"><span class="linenum"> 341</span></a>      }
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      <a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'name'=&gt;'version'));
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      if (<a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a> &gt;= <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>) {
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">        // Something really wrong is going on in the upgrade script</span>
<a name="l347"><span class="linenum"> 347</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it18154" onMouseOver="hilite(18154)" onMouseOut="lolite()" onClick="logVariable('dbversion')" href="../_variables/dbversion.html">$dbversion</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>);
<a name="l348"><span class="linenum"> 348</span></a>      }
<a name="l349"><span class="linenum"> 349</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('version', <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l350"><span class="linenum"> 350</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Upgrade savepoint reached');
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">    // Reset upgrade timeout to default</span>
<a name="l353"><span class="linenum"> 353</span></a>      <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">    // This is a safe place to stop upgrades if user aborts page loading</span>
<a name="l356"><span class="linenum"> 356</span></a>      if (<a class="var it25464" onMouseOver="hilite(25464)" onMouseOut="lolite()" onClick="logVariable('allowabort')" href="../_variables/allowabort.html">$allowabort</a> and <a class="phpfunction" onClick="logFunction('connection_aborted')" href="../_functions/connection_aborted.html" onMouseOver="phpfuncPopup(event,'connection_aborted')">connection_aborted</a>()) {
<a name="l357"><span class="linenum"> 357</span></a>          die;
<a name="l358"><span class="linenum"> 358</span></a>      }
<a name="l359"><span class="linenum"> 359</span></a>  }
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">/**</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment"> * Detect if there are leftovers in PHP source files.</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment"> *</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment"> * During main version upgrades administrators MUST move away</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment"> * old PHP source files and start from scratch (or better</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment"> * use git).</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> *</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment"> * @return bool true means borked upgrade, false means previous PHP files were properly removed</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment"> */</span>
<a name="l370"><span class="linenum"> 370</span></a>  function <a class="function" onClick="logFunction('upgrade_stale_php_files_present')" href="../_functions/upgrade_stale_php_files_present.html" onMouseOver="funcPopup(event,'upgrade_stale_php_files_present')">upgrade_stale_php_files_present</a>() {
<a name="l371"><span class="linenum"> 371</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>      <a class="var it25465" onMouseOver="hilite(25465)" onMouseOut="lolite()" onClick="logVariable('someexamplesofremovedfiles')" href="../_variables/someexamplesofremovedfiles.html">$someexamplesofremovedfiles</a> = array(
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">        // Removed in 3.1.</span>
<a name="l375"><span class="linenum"> 375</span></a>          '/lib/classes/log/sql_internal_reader.php',
<a name="l376"><span class="linenum"> 376</span></a>          '/lib/zend/',
<a name="l377"><span class="linenum"> 377</span></a>          '/mod/forum/pix/icon.gif',
<a name="l378"><span class="linenum"> 378</span></a>          '/tag/templates/tagname.mustache',
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">        // Removed in 3.0.</span>
<a name="l380"><span class="linenum"> 380</span></a>          '/mod/lti/grade.php',
<a name="l381"><span class="linenum"> 381</span></a>          '/tag/coursetagslib.php',
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">        // Removed in 2.9.</span>
<a name="l383"><span class="linenum"> 383</span></a>          '/lib/timezone.txt',
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">        // Removed in 2.8.</span>
<a name="l385"><span class="linenum"> 385</span></a>          '/course/delete_category_form.php',
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">        // Removed in 2.7.</span>
<a name="l387"><span class="linenum"> 387</span></a>          '/admin/tool/qeupgradehelper/version.php',
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">        // Removed in 2.6.</span>
<a name="l389"><span class="linenum"> 389</span></a>          '/admin/block.php',
<a name="l390"><span class="linenum"> 390</span></a>          '/admin/oacleanup.php',
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">        // Removed in 2.5.</span>
<a name="l392"><span class="linenum"> 392</span></a>          '/backup/lib.php',
<a name="l393"><span class="linenum"> 393</span></a>          '/backup/bb/README.txt',
<a name="l394"><span class="linenum"> 394</span></a>          '/lib/excel/test.php',
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">        // Removed in 2.4.</span>
<a name="l396"><span class="linenum"> 396</span></a>          '/admin/tool/unittest/simpletestlib.php',
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">        // Removed in 2.3.</span>
<a name="l398"><span class="linenum"> 398</span></a>          '/lib/minify/builder/',
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">        // Removed in 2.2.</span>
<a name="l400"><span class="linenum"> 400</span></a>          '/lib/yui/3.4.1pr1/',
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">        // Removed in 2.2.</span>
<a name="l402"><span class="linenum"> 402</span></a>          '/search/cron_php5.php',
<a name="l403"><span class="linenum"> 403</span></a>          '/course/report/log/indexlive.php',
<a name="l404"><span class="linenum"> 404</span></a>          '/admin/report/backups/index.php',
<a name="l405"><span class="linenum"> 405</span></a>          '/admin/generator.php',
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">        // Removed in 2.1.</span>
<a name="l407"><span class="linenum"> 407</span></a>          '/lib/yui/2.8.0r4/',
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">        // Removed in 2.0.</span>
<a name="l409"><span class="linenum"> 409</span></a>          '/blocks/admin/block_admin.php',
<a name="l410"><span class="linenum"> 410</span></a>          '/blocks/admin_tree/block_admin_tree.php',
<a name="l411"><span class="linenum"> 411</span></a>      );
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>      foreach (<a class="var it25465" onMouseOver="hilite(25465)" onMouseOut="lolite()" onClick="logVariable('someexamplesofremovedfiles')" href="../_variables/someexamplesofremovedfiles.html">$someexamplesofremovedfiles</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l414"><span class="linenum"> 414</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l415"><span class="linenum"> 415</span></a>              return true;
<a name="l416"><span class="linenum"> 416</span></a>          }
<a name="l417"><span class="linenum"> 417</span></a>      }
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>      return false;
<a name="l420"><span class="linenum"> 420</span></a>  }
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">/**</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment"> * Upgrade plugins</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment"> * @param string $type The type of plugins that should be updated (e.g. 'enrol', 'qtype')</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment"> * return void</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment"> */</span>
<a name="l427"><span class="linenum"> 427</span></a>  function <a class="function" onClick="logFunction('upgrade_plugins')" href="../_functions/upgrade_plugins.html" onMouseOver="funcPopup(event,'upgrade_plugins')">upgrade_plugins</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l428"><span class="linenum"> 428</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">/// special cases</span>
<a name="l431"><span class="linenum"> 431</span></a>      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'mod') {
<a name="l432"><span class="linenum"> 432</span></a>          return <a class="function" onClick="logFunction('upgrade_plugins_modules')" href="../_functions/upgrade_plugins_modules.html" onMouseOver="funcPopup(event,'upgrade_plugins_modules')">upgrade_plugins_modules</a>(<a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l433"><span class="linenum"> 433</span></a>      } else if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'block') {
<a name="l434"><span class="linenum"> 434</span></a>          return <a class="function" onClick="logFunction('upgrade_plugins_blocks')" href="../_functions/upgrade_plugins_blocks.html" onMouseOver="funcPopup(event,'upgrade_plugins_blocks')">upgrade_plugins_blocks</a>(<a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l435"><span class="linenum"> 435</span></a>      }
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>      <a class="var it8462" onMouseOver="hilite(8462)" onMouseOut="lolite()" onClick="logVariable('plugs')" href="../_variables/plugs.html">$plugs</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l438"><span class="linenum"> 438</span></a>  
<a name="l439"><span class="linenum"> 439</span></a>      foreach (<a class="var it8462" onMouseOver="hilite(8462)" onMouseOut="lolite()" onClick="logVariable('plugs')" href="../_variables/plugs.html">$plugs</a> as <a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>=&gt;<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>) {
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">        // Reset time so that it works when installing a large number of plugins</span>
<a name="l441"><span class="linenum"> 441</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(600);
<a name="l442"><span class="linenum"> 442</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'_'.<a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>); <span class="comment">// standardised plugin name</span>
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">        // check plugin dir is valid name</span>
<a name="l445"><span class="linenum"> 445</span></a>          if (empty(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l446"><span class="linenum"> 446</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'_'.<a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, 'Invalid plugin directory name.');
<a name="l447"><span class="linenum"> 447</span></a>          }
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'<a class="filename" href="../version.php.html">/version.php</a>')) {
<a name="l450"><span class="linenum"> 450</span></a>              continue;
<a name="l451"><span class="linenum"> 451</span></a>          }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l455"><span class="linenum"> 455</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>; <span class="comment">// Prevent some notices when plugin placed in wrong directory.</span>
<a name="l456"><span class="linenum"> 456</span></a>          <span class="keyword">require</span> <a class="filename" href="../version.php.html" onMouseOver="reqPopup(event, 'version.php', '../version.php')">($fullplug.'/version.php')</a>;  <span class="comment">// defines $plugin with version etc</span>
<a name="l457"><span class="linenum"> 457</span></a>          unset(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l460"><span class="linenum"> 460</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a> number in version.php.');
<a name="l461"><span class="linenum"> 461</span></a>          }
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l464"><span class="linenum"> 464</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a> declaration in version.php.');
<a name="l465"><span class="linenum"> 465</span></a>          }
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>          if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a> !== <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l468"><span class="linenum"> 468</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, null, <a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>);
<a name="l469"><span class="linenum"> 469</span></a>          }
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('name')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/name.html">name</a>     = <a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>;
<a name="l472"><span class="linenum"> 472</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>          if (!empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>)) {
<a name="l475"><span class="linenum"> 475</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l476"><span class="linenum"> 476</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>);
<a name="l477"><span class="linenum"> 477</span></a>              } else if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &lt; 2010000000) {
<a name="l478"><span class="linenum"> 478</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Plugin is not compatible with Moodle 2.x or later.');
<a name="l479"><span class="linenum"> 479</span></a>              }
<a name="l480"><span class="linenum"> 480</span></a>          }
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">        // try to recover from interrupted install.php if needed</span>
<a name="l483"><span class="linenum"> 483</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.php')) {
<a name="l484"><span class="linenum"> 484</span></a>              if (<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, 'installrunning')) {
<a name="l485"><span class="linenum"> 485</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullplug.'/db/install.php')</a>;
<a name="l486"><span class="linenum"> 486</span></a>                  <a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a> = 'xmldb_'.<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>.'_install_recovery';
<a name="l487"><span class="linenum"> 487</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>)) {
<a name="l488"><span class="linenum"> 488</span></a>                      <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l489"><span class="linenum"> 489</span></a>                      <a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>();
<a name="l490"><span class="linenum"> 490</span></a>                      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l491"><span class="linenum"> 491</span></a>                      <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l492"><span class="linenum"> 492</span></a>                      <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l493"><span class="linenum"> 493</span></a>                      <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l494"><span class="linenum"> 494</span></a>                      <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l495"><span class="linenum"> 495</span></a>                      \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l496"><span class="linenum"> 496</span></a>                      <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l497"><span class="linenum"> 497</span></a>                      \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l498"><span class="linenum"> 498</span></a>                      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'message') {
<a name="l499"><span class="linenum"> 499</span></a>                          <a class="function" onClick="logFunction('message_update_processors')" href="../_functions/message_update_processors.html" onMouseOver="funcPopup(event,'message_update_processors')">message_update_processors</a>(<a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>);
<a name="l500"><span class="linenum"> 500</span></a>                      }
<a name="l501"><span class="linenum"> 501</span></a>                      <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l502"><span class="linenum"> 502</span></a>                      <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l503"><span class="linenum"> 503</span></a>                      <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l504"><span class="linenum"> 504</span></a>                  }
<a name="l505"><span class="linenum"> 505</span></a>              }
<a name="l506"><span class="linenum"> 506</span></a>          }
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>          <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l509"><span class="linenum"> 509</span></a>          if (empty(<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>)) { // new installation
<a name="l510"><span class="linenum"> 510</span></a>              <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">        /// Install tables if defined</span>
<a name="l513"><span class="linenum"> 513</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.xml')) {
<a name="l514"><span class="linenum"> 514</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.xml');
<a name="l515"><span class="linenum"> 515</span></a>              }
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">        /// store version</span>
<a name="l518"><span class="linenum"> 518</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_savepoint')" href="../_functions/upgrade_plugin_savepoint.html" onMouseOver="funcPopup(event,'upgrade_plugin_savepoint')">upgrade_plugin_savepoint</a>(true, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, false);
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">        /// execute post install file</span>
<a name="l521"><span class="linenum"> 521</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/install.php')) {
<a name="l522"><span class="linenum"> 522</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullplug.'/db/install.php')</a>;
<a name="l523"><span class="linenum"> 523</span></a>                  <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('installrunning', 1, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l524"><span class="linenum"> 524</span></a>                  <a class="var it25470" onMouseOver="hilite(25470)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a> = 'xmldb_'.<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>.'_install';
<a name="l525"><span class="linenum"> 525</span></a>                  <a class="var it25470" onMouseOver="hilite(25470)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a>();
<a name="l526"><span class="linenum"> 526</span></a>                  <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l527"><span class="linenum"> 527</span></a>              }
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">        /// Install various components</span>
<a name="l530"><span class="linenum"> 530</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l531"><span class="linenum"> 531</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l532"><span class="linenum"> 532</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l533"><span class="linenum"> 533</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l534"><span class="linenum"> 534</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l535"><span class="linenum"> 535</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l536"><span class="linenum"> 536</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l537"><span class="linenum"> 537</span></a>              if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'message') {
<a name="l538"><span class="linenum"> 538</span></a>                  <a class="function" onClick="logFunction('message_update_processors')" href="../_functions/message_update_processors.html" onMouseOver="funcPopup(event,'message_update_processors')">message_update_processors</a>(<a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>);
<a name="l539"><span class="linenum"> 539</span></a>              }
<a name="l540"><span class="linenum"> 540</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l541"><span class="linenum"> 541</span></a>              <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l542"><span class="linenum"> 542</span></a>              <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>          } else if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) { // upgrade
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">        /// Run the upgrade function for the plugin.</span>
<a name="l546"><span class="linenum"> 546</span></a>              <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>              if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it8464" onMouseOver="hilite(8464)" onMouseOut="lolite()" onClick="logVariable('fullplug')" href="../_variables/fullplug.html">$fullplug</a>.'/db/upgrade.php')) {
<a name="l549"><span class="linenum"> 549</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/upgrade.php.html" onMouseOver="reqPopup(event, 'upgrade.php', '../lib/db/upgrade.php')">($fullplug.'/db/upgrade.php')</a>;  <span class="comment">// defines upgrading function</span>
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>                  <a class="var it25471" onMouseOver="hilite(25471)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a> = 'xmldb_'.<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('fullname')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>.'_upgrade';
<a name="l552"><span class="linenum"> 552</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it25471" onMouseOver="hilite(25471)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a>(<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>);
<a name="l553"><span class="linenum"> 553</span></a>              } else {
<a name="l554"><span class="linenum"> 554</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l555"><span class="linenum"> 555</span></a>              }
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>              <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l558"><span class="linenum"> 558</span></a>              if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">                // store version if not already there</span>
<a name="l560"><span class="linenum"> 560</span></a>                  <a class="function" onClick="logFunction('upgrade_plugin_savepoint')" href="../_functions/upgrade_plugin_savepoint.html" onMouseOver="funcPopup(event,'upgrade_plugin_savepoint')">upgrade_plugin_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>, false);
<a name="l561"><span class="linenum"> 561</span></a>              }
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">        /// Upgrade various components</span>
<a name="l564"><span class="linenum"> 564</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l565"><span class="linenum"> 565</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l566"><span class="linenum"> 566</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l567"><span class="linenum"> 567</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l568"><span class="linenum"> 568</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l569"><span class="linenum"> 569</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l570"><span class="linenum"> 570</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l571"><span class="linenum"> 571</span></a>              if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === 'message') {
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">                // Ugly hack!</span>
<a name="l573"><span class="linenum"> 573</span></a>                  <a class="function" onClick="logFunction('message_update_processors')" href="../_functions/message_update_processors.html" onMouseOver="funcPopup(event,'message_update_processors')">message_update_processors</a>(<a class="var it8463" onMouseOver="hilite(8463)" onMouseOut="lolite()" onClick="logVariable('plug')" href="../_variables/plug.html">$plug</a>);
<a name="l574"><span class="linenum"> 574</span></a>              }
<a name="l575"><span class="linenum"> 575</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l576"><span class="linenum"> 576</span></a>              <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l577"><span class="linenum"> 577</span></a>              <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>          } else if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &gt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l580"><span class="linenum"> 580</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l581"><span class="linenum"> 581</span></a>          }
<a name="l582"><span class="linenum"> 582</span></a>      }
<a name="l583"><span class="linenum"> 583</span></a>  }
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">/**</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment"> * Find and check all modules and load them up or upgrade them if necessary</span>
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment"> *</span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment"> * @global object</span>
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment"> * @global object</span>
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment"> */</span>
<a name="l591"><span class="linenum"> 591</span></a>  function <a class="function" onClick="logFunction('upgrade_plugins_modules')" href="../_functions/upgrade_plugins_modules.html" onMouseOver="funcPopup(event,'upgrade_plugins_modules')">upgrade_plugins_modules</a>(<a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l592"><span class="linenum"> 592</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l593"><span class="linenum"> 593</span></a>  
<a name="l594"><span class="linenum"> 594</span></a>      <a class="var it2588" onMouseOver="hilite(2588)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('mod');
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>      foreach (<a class="var it2588" onMouseOver="hilite(2588)" onMouseOut="lolite()" onClick="logVariable('mods')" href="../_variables/mods.html">$mods</a> as <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>=&gt;<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>) {
<a name="l597"><span class="linenum"> 597</span></a>  
<a name="l598"><span class="linenum"> 598</span></a>          if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a> === 'NEWMODULE') {   // Someone has unzipped the template, ignore it
<a name="l599"><span class="linenum"> 599</span></a>              continue;
<a name="l600"><span class="linenum"> 600</span></a>          }
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>('mod_'.<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>);
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">        // check module dir is valid name</span>
<a name="l605"><span class="linenum"> 605</span></a>          if (empty(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l606"><span class="linenum"> 606</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('mod_'.<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, 'Invalid plugin directory name.');
<a name="l607"><span class="linenum"> 607</span></a>          }
<a name="l608"><span class="linenum"> 608</span></a>  
<a name="l609"><span class="linenum"> 609</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'<a class="filename" href="../version.php.html">/version.php</a>')) {
<a name="l610"><span class="linenum"> 610</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing version.php');
<a name="l611"><span class="linenum"> 611</span></a>          }
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = new stdClass();
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l616"><span class="linenum"> 616</span></a>          <span class="keyword">require</span> <a class="filename" href="../version.php.html" onMouseOver="reqPopup(event, 'version.php', '../version.php')">($fullmod .'/version.php')</a>;  <span class="comment">// Defines $plugin with version etc.</span>
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">        // Check if the legacy $module syntax is still used.</span>
<a name="l619"><span class="linenum"> 619</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>) <a class="function" onClick="logFunction('or')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>((array)<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>) &gt; 0)) {
<a name="l620"><span class="linenum"> 620</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Unsupported <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> syntax detected in version.php');
<a name="l621"><span class="linenum"> 621</span></a>          }
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">        // Prepare the record for the {modules} table.</span>
<a name="l624"><span class="linenum"> 624</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l625"><span class="linenum"> 625</span></a>          unset(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('version')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l626"><span class="linenum"> 626</span></a>          unset(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('component')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/component.html">component</a>);
<a name="l627"><span class="linenum"> 627</span></a>          unset(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('dependencies')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/dependencies.html">dependencies</a>);
<a name="l628"><span class="linenum"> 628</span></a>          unset(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('release')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/release.html">release</a>);
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l631"><span class="linenum"> 631</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a> number in version.php.');
<a name="l632"><span class="linenum"> 632</span></a>          }
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l635"><span class="linenum"> 635</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a> declaration in version.php.');
<a name="l636"><span class="linenum"> 636</span></a>          }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>          if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a> !== <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l639"><span class="linenum"> 639</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, null, <a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>);
<a name="l640"><span class="linenum"> 640</span></a>          }
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>          if (!empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>)) {
<a name="l643"><span class="linenum"> 643</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l644"><span class="linenum"> 644</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>);
<a name="l645"><span class="linenum"> 645</span></a>              } else if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &lt; 2010000000) {
<a name="l646"><span class="linenum"> 646</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Plugin is not compatible with Moodle 2.x or later.');
<a name="l647"><span class="linenum"> 647</span></a>              }
<a name="l648"><span class="linenum"> 648</span></a>          }
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>          if (empty(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>)) {
<a name="l651"><span class="linenum"> 651</span></a>              <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a> = 0;
<a name="l652"><span class="linenum"> 652</span></a>          }
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">        // all modules must have en lang pack</span>
<a name="l655"><span class="linenum"> 655</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(&quot;<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>/lang/en/<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>.php&quot;)) {
<a name="l656"><span class="linenum"> 656</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing mandatory en language pack.');
<a name="l657"><span class="linenum"> 657</span></a>          }
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>;   <span class="comment">// The name MUST match the directory</span>
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l662"><span class="linenum"> 662</span></a>  
<a name="l663"><span class="linenum"> 663</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/db/install.php')) {
<a name="l664"><span class="linenum"> 664</span></a>              if (<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, 'installrunning')) {
<a name="l665"><span class="linenum"> 665</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullmod.'/db/install.php')</a>;
<a name="l666"><span class="linenum"> 666</span></a>                  <a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a> = 'xmldb_'.<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'_install_recovery';
<a name="l667"><span class="linenum"> 667</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>)) {
<a name="l668"><span class="linenum"> 668</span></a>                      <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l669"><span class="linenum"> 669</span></a>                      <a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>();
<a name="l670"><span class="linenum"> 670</span></a>                      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">                    // Install various components too</span>
<a name="l672"><span class="linenum"> 672</span></a>                      <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l673"><span class="linenum"> 673</span></a>                      <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l674"><span class="linenum"> 674</span></a>                      <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l675"><span class="linenum"> 675</span></a>                      <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l676"><span class="linenum"> 676</span></a>                      \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l677"><span class="linenum"> 677</span></a>                      <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l678"><span class="linenum"> 678</span></a>                      \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l679"><span class="linenum"> 679</span></a>                      <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l680"><span class="linenum"> 680</span></a>                      <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l681"><span class="linenum"> 681</span></a>                      <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l682"><span class="linenum"> 682</span></a>                  }
<a name="l683"><span class="linenum"> 683</span></a>              }
<a name="l684"><span class="linenum"> 684</span></a>          }
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>          if (empty(<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>)) {
<a name="l687"><span class="linenum"> 687</span></a>              <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">        /// Execute install.xml (XMLDB) - must be present in all modules</span>
<a name="l690"><span class="linenum"> 690</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/db/install.xml');
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">        /// Add record into modules table - may be needed in install.php already</span>
<a name="l693"><span class="linenum"> 693</span></a>              <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('modules', <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l694"><span class="linenum"> 694</span></a>              <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>(true, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, false);
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">        /// Post installation hook - optional</span>
<a name="l697"><span class="linenum"> 697</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>/db/install.php&quot;)) {
<a name="l698"><span class="linenum"> 698</span></a>                  require_once(&quot;<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>/db/install.php&quot;);
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">                // Set installation running flag, we need to recover after exception or error</span>
<a name="l700"><span class="linenum"> 700</span></a>                  <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('installrunning', 1, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l701"><span class="linenum"> 701</span></a>                  <a class="var it25470" onMouseOver="hilite(25470)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a> = 'xmldb_'.<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'_install';
<a name="l702"><span class="linenum"> 702</span></a>                  <a class="var it25470" onMouseOver="hilite(25470)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a>();
<a name="l703"><span class="linenum"> 703</span></a>                  <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l704"><span class="linenum"> 704</span></a>              }
<a name="l705"><span class="linenum"> 705</span></a>  
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">        /// Install various components</span>
<a name="l707"><span class="linenum"> 707</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l708"><span class="linenum"> 708</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l709"><span class="linenum"> 709</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l710"><span class="linenum"> 710</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l711"><span class="linenum"> 711</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l712"><span class="linenum"> 712</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l713"><span class="linenum"> 713</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l714"><span class="linenum"> 714</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l715"><span class="linenum"> 715</span></a>              <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>              <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>          } else if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">        /// If versions say that we need to upgrade but no upgrade files are available, notify and continue</span>
<a name="l721"><span class="linenum"> 721</span></a>              <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>              if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it25472" onMouseOver="hilite(25472)" onMouseOut="lolite()" onClick="logVariable('fullmod')" href="../_variables/fullmod.html">$fullmod</a>.'/db/upgrade.php')) {
<a name="l724"><span class="linenum"> 724</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/upgrade.php.html" onMouseOver="reqPopup(event, 'upgrade.php', '../lib/db/upgrade.php')">($fullmod.'/db/upgrade.php')</a>;  <span class="comment">// defines new upgrading function</span>
<a name="l725"><span class="linenum"> 725</span></a>                  <a class="var it25471" onMouseOver="hilite(25471)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a> = 'xmldb_'.<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'_upgrade';
<a name="l726"><span class="linenum"> 726</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it25471" onMouseOver="hilite(25471)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a>(<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l727"><span class="linenum"> 727</span></a>              } else {
<a name="l728"><span class="linenum"> 728</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l729"><span class="linenum"> 729</span></a>              }
<a name="l730"><span class="linenum"> 730</span></a>  
<a name="l731"><span class="linenum"> 731</span></a>              <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l732"><span class="linenum"> 732</span></a>              <a class="var it25473" onMouseOver="hilite(25473)" onMouseOut="lolite()" onClick="logVariable('currmodule')" href="../_variables/currmodule.html">$currmodule</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('modules', array('name'=&gt;<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l733"><span class="linenum"> 733</span></a>              if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">                // store version if not already there</span>
<a name="l735"><span class="linenum"> 735</span></a>                  <a class="function" onClick="logFunction('upgrade_mod_savepoint')" href="../_functions/upgrade_mod_savepoint.html" onMouseOver="funcPopup(event,'upgrade_mod_savepoint')">upgrade_mod_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>, false);
<a name="l736"><span class="linenum"> 736</span></a>              }
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">            // update cron flag if needed</span>
<a name="l739"><span class="linenum"> 739</span></a>              if (<a class="var it25473" onMouseOver="hilite(25473)" onMouseOut="lolite()" onClick="logVariable('currmodule')" href="../_variables/currmodule.html">$currmodule</a>-&gt;<a onClick="logVariable('cron')" class="var it44356" onMouseOver="hilite(44356)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a> != <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>) {
<a name="l740"><span class="linenum"> 740</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('modules', 'cron', <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('cron')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>, array('name' =&gt; <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('name')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l741"><span class="linenum"> 741</span></a>              }
<a name="l742"><span class="linenum"> 742</span></a>  
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">            // Upgrade various components</span>
<a name="l744"><span class="linenum"> 744</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l745"><span class="linenum"> 745</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l746"><span class="linenum"> 746</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l747"><span class="linenum"> 747</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l748"><span class="linenum"> 748</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l749"><span class="linenum"> 749</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l750"><span class="linenum"> 750</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l751"><span class="linenum"> 751</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l752"><span class="linenum"> 752</span></a>              <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>              <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>          } else if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &gt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l757"><span class="linenum"> 757</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l758"><span class="linenum"> 758</span></a>          }
<a name="l759"><span class="linenum"> 759</span></a>      }
<a name="l760"><span class="linenum"> 760</span></a>  }
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">/**</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment"> * This function finds all available blocks and install them</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment"> * into blocks table or do all the upgrade process if newer.</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment"> *</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment"> * @global object</span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment"> * @global object</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment"> */</span>
<a name="l770"><span class="linenum"> 770</span></a>  function <a class="function" onClick="logFunction('upgrade_plugins_blocks')" href="../_functions/upgrade_plugins_blocks.html" onMouseOver="funcPopup(event,'upgrade_plugins_blocks')">upgrade_plugins_blocks</a>(<a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>, <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l771"><span class="linenum"> 771</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l772"><span class="linenum"> 772</span></a>  
<a name="l773"><span class="linenum"> 773</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blocks/moodleblock.class.php.html">/blocks/moodleblock.class.php</a>');
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>      <a class="var it25474" onMouseOver="hilite(25474)" onMouseOut="lolite()" onClick="logVariable('blocktitles')" href="../_variables/blocktitles.html">$blocktitles</a>   = array(); <span class="comment">// we do not want duplicate titles</span>
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">    //Is this a first install</span>
<a name="l778"><span class="linenum"> 778</span></a>      <a class="var it25475" onMouseOver="hilite(25475)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a> = null;
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>      <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('block');
<a name="l781"><span class="linenum"> 781</span></a>  
<a name="l782"><span class="linenum"> 782</span></a>      foreach (<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>=&gt;<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>) {
<a name="l783"><span class="linenum"> 783</span></a>  
<a name="l784"><span class="linenum"> 784</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it25475" onMouseOver="hilite(25475)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a>)) {
<a name="l785"><span class="linenum"> 785</span></a>              <a class="var it25475" onMouseOver="hilite(25475)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a> = (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('block_instances') == 0);
<a name="l786"><span class="linenum"> 786</span></a>          }
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>          if (<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> === 'NEWBLOCK') {   // Someone has unzipped the template, ignore it
<a name="l789"><span class="linenum"> 789</span></a>              continue;
<a name="l790"><span class="linenum"> 790</span></a>          }
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>('block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>);
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">        // check block dir is valid name</span>
<a name="l795"><span class="linenum"> 795</span></a>          if (empty(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l796"><span class="linenum"> 796</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'Invalid plugin directory name.');
<a name="l797"><span class="linenum"> 797</span></a>          }
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'<a class="filename" href="../version.php.html">/version.php</a>')) {
<a name="l800"><span class="linenum"> 800</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('block/'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'Missing version.php file.');
<a name="l801"><span class="linenum"> 801</span></a>          }
<a name="l802"><span class="linenum"> 802</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l803"><span class="linenum"> 803</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l804"><span class="linenum"> 804</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('cron')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>    = 0;
<a name="l805"><span class="linenum"> 805</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>; <span class="comment">// Prevent some notices when module placed in wrong directory.</span>
<a name="l806"><span class="linenum"> 806</span></a>          <span class="keyword">include</span> <a class="filename" href="../version.php.html" onMouseOver="reqPopup(event, 'version.php', '../version.php')">($fullblock.'/version.php')</a>;
<a name="l807"><span class="linenum"> 807</span></a>          unset(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l808"><span class="linenum"> 808</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l809"><span class="linenum"> 809</span></a>          unset(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('version')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l810"><span class="linenum"> 810</span></a>          unset(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('component')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/component.html">component</a>);
<a name="l811"><span class="linenum"> 811</span></a>          unset(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('dependencies')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/dependencies.html">dependencies</a>);
<a name="l812"><span class="linenum"> 812</span></a>          unset(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('release')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/release.html">release</a>);
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l815"><span class="linenum"> 815</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing block version number in version.php.');
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>  
<a name="l818"><span class="linenum"> 818</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l819"><span class="linenum"> 819</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Missing <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a> declaration in version.php.');
<a name="l820"><span class="linenum"> 820</span></a>          }
<a name="l821"><span class="linenum"> 821</span></a>  
<a name="l822"><span class="linenum"> 822</span></a>          if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a> !== <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l823"><span class="linenum"> 823</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_misplaced_exception')" href="../_classes/plugin_misplaced_exception.html" onMouseOver="classPopup(event,'plugin_misplaced_exception')">plugin_misplaced_exception</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('component')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, null, <a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>);
<a name="l824"><span class="linenum"> 824</span></a>          }
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>          if (!empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>)) {
<a name="l827"><span class="linenum"> 827</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l828"><span class="linenum"> 828</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('upgrade_requires_exception')" href="../_classes/upgrade_requires_exception.html" onMouseOver="classPopup(event,'upgrade_requires_exception')">upgrade_requires_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>);
<a name="l829"><span class="linenum"> 829</span></a>              } else if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('requires')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a> &lt; 2010000000) {
<a name="l830"><span class="linenum"> 830</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Plugin is not compatible with Moodle 2.x or later.');
<a name="l831"><span class="linenum"> 831</span></a>              }
<a name="l832"><span class="linenum"> 832</span></a>          }
<a name="l833"><span class="linenum"> 833</span></a>  
<a name="l834"><span class="linenum"> 834</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'.php')) {
<a name="l835"><span class="linenum"> 835</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>('block/'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'Missing main block <span class="keyword">class </span><a class="class" onClick="logClass('file')" href="../_classes/file.html" onMouseOver="classPopup(event,'file')">file</a>.');
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>          include_once(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'.php');
<a name="l838"><span class="linenum"> 838</span></a>  
<a name="l839"><span class="linenum"> 839</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l840"><span class="linenum"> 840</span></a>  
<a name="l841"><span class="linenum"> 841</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l842"><span class="linenum"> 842</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Can not load main class.');
<a name="l843"><span class="linenum"> 843</span></a>          }
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>          <a class="var it11093" onMouseOver="hilite(11093)" onMouseOut="lolite()" onClick="logVariable('blockobj')" href="../_variables/blockobj.html">$blockobj</a>    = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>;   <span class="comment">// This is what we'll be testing</span>
<a name="l846"><span class="linenum"> 846</span></a>          <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>  = <a class="var it11093" onMouseOver="hilite(11093)" onMouseOut="lolite()" onClick="logVariable('blockobj')" href="../_variables/blockobj.html">$blockobj</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">        // OK, it's as we all hoped. For further tests, the object will do them itself.</span>
<a name="l849"><span class="linenum"> 849</span></a>          if (!<a class="var it11093" onMouseOver="hilite(11093)" onMouseOut="lolite()" onClick="logVariable('blockobj')" href="../_variables/blockobj.html">$blockobj</a>-&gt;<a class="function" onClick="logFunction('_self_test')" href="../_functions/_self_test.html" onMouseOver="funcPopup(event,'_self_test')">_self_test</a>()) {
<a name="l850"><span class="linenum"> 850</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'Self test failed.');
<a name="l851"><span class="linenum"> 851</span></a>          }
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>     = <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;   <span class="comment">// The name MUST match the directory</span>
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>          <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.php')) {
<a name="l858"><span class="linenum"> 858</span></a>              if (<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, 'installrunning')) {
<a name="l859"><span class="linenum"> 859</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullblock.'/db/install.php')</a>;
<a name="l860"><span class="linenum"> 860</span></a>                  <a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a> = 'xmldb_block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'_install_recovery';
<a name="l861"><span class="linenum"> 861</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>)) {
<a name="l862"><span class="linenum"> 862</span></a>                      <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l863"><span class="linenum"> 863</span></a>                      <a class="var it25468" onMouseOver="hilite(25468)" onMouseOut="lolite()" onClick="logVariable('recover_install_function')" href="../_variables/recover_install_function.html">$recover_install_function</a>();
<a name="l864"><span class="linenum"> 864</span></a>                      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">                    // Install various components</span>
<a name="l866"><span class="linenum"> 866</span></a>                      <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l867"><span class="linenum"> 867</span></a>                      <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l868"><span class="linenum"> 868</span></a>                      <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l869"><span class="linenum"> 869</span></a>                      <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l870"><span class="linenum"> 870</span></a>                      \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l871"><span class="linenum"> 871</span></a>                      <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l872"><span class="linenum"> 872</span></a>                      \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l873"><span class="linenum"> 873</span></a>                      <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l874"><span class="linenum"> 874</span></a>                      <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l875"><span class="linenum"> 875</span></a>                      <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l876"><span class="linenum"> 876</span></a>                  }
<a name="l877"><span class="linenum"> 877</span></a>              }
<a name="l878"><span class="linenum"> 878</span></a>          }
<a name="l879"><span class="linenum"> 879</span></a>  
<a name="l880"><span class="linenum"> 880</span></a>          if (empty(<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>)) { // block not installed yet, so install it
<a name="l881"><span class="linenum"> 881</span></a>              <a class="var it25476" onMouseOver="hilite(25476)" onMouseOut="lolite()" onClick="logVariable('conflictblock')" href="../_variables/conflictblock.html">$conflictblock</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>, <a class="var it25474" onMouseOver="hilite(25474)" onMouseOut="lolite()" onClick="logVariable('blocktitles')" href="../_variables/blocktitles.html">$blocktitles</a>);
<a name="l882"><span class="linenum"> 882</span></a>              if (<a class="var it25476" onMouseOver="hilite(25476)" onMouseOut="lolite()" onClick="logVariable('conflictblock')" href="../_variables/conflictblock.html">$conflictblock</a> !== false) {
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">                // Duplicate block titles are not allowed, they confuse people</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">                // AND PHP's associative arrays ;)</span>
<a name="l885"><span class="linenum"> 885</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('plugin_defective_exception')" href="../_classes/plugin_defective_exception.html" onMouseOver="classPopup(event,'plugin_defective_exception')">plugin_defective_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blocknameconflict', 'error', (object)array('name'=&gt;<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, 'conflict'=&gt;<a class="var it25476" onMouseOver="hilite(25476)" onMouseOut="lolite()" onClick="logVariable('conflictblock')" href="../_variables/conflictblock.html">$conflictblock</a>)));
<a name="l886"><span class="linenum"> 886</span></a>              }
<a name="l887"><span class="linenum"> 887</span></a>              <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.xml')) {
<a name="l890"><span class="linenum"> 890</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.xml');
<a name="l891"><span class="linenum"> 891</span></a>              }
<a name="l892"><span class="linenum"> 892</span></a>              <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('id')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block', <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>);
<a name="l893"><span class="linenum"> 893</span></a>              <a class="function" onClick="logFunction('upgrade_block_savepoint')" href="../_functions/upgrade_block_savepoint.html" onMouseOver="funcPopup(event,'upgrade_block_savepoint')">upgrade_block_savepoint</a>(true, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, false);
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/install.php')) {
<a name="l896"><span class="linenum"> 896</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/install.php.html" onMouseOver="reqPopup(event, 'install.php', '../lib/db/install.php')">($fullblock.'/db/install.php')</a>;
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">                // Set installation running flag, we need to recover after exception or error</span>
<a name="l898"><span class="linenum"> 898</span></a>                  <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('installrunning', 1, 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l899"><span class="linenum"> 899</span></a>                  <a class="var it25470" onMouseOver="hilite(25470)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a> = 'xmldb_block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'_install';
<a name="l900"><span class="linenum"> 900</span></a>                  <a class="var it25470" onMouseOver="hilite(25470)" onMouseOut="lolite()" onClick="logVariable('post_install_function')" href="../_variables/post_install_function.html">$post_install_function</a>();
<a name="l901"><span class="linenum"> 901</span></a>                  <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('installrunning', 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l902"><span class="linenum"> 902</span></a>              }
<a name="l903"><span class="linenum"> 903</span></a>  
<a name="l904"><span class="linenum"> 904</span></a>              <a class="var it25474" onMouseOver="hilite(25474)" onMouseOut="lolite()" onClick="logVariable('blocktitles')" href="../_variables/blocktitles.html">$blocktitles</a>[<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>;
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">            // Install various components</span>
<a name="l907"><span class="linenum"> 907</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l908"><span class="linenum"> 908</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l909"><span class="linenum"> 909</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l910"><span class="linenum"> 910</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l911"><span class="linenum"> 911</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l912"><span class="linenum"> 912</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l913"><span class="linenum"> 913</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l914"><span class="linenum"> 914</span></a>              <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l915"><span class="linenum"> 915</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l916"><span class="linenum"> 916</span></a>  
<a name="l917"><span class="linenum"> 917</span></a>              <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>          } else if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l920"><span class="linenum"> 920</span></a>              <a class="var it25466" onMouseOver="hilite(25466)" onMouseOut="lolite()" onClick="logVariable('startcallback')" href="../_variables/startcallback.html">$startcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>              if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it21541" onMouseOver="hilite(21541)" onMouseOut="lolite()" onClick="logVariable('fullblock')" href="../_variables/fullblock.html">$fullblock</a>.'/db/upgrade.php')) {
<a name="l923"><span class="linenum"> 923</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../lib/db/upgrade.php.html" onMouseOver="reqPopup(event, 'upgrade.php', '../lib/db/upgrade.php')">($fullblock.'/db/upgrade.php')</a>;  <span class="comment">// defines new upgrading function</span>
<a name="l924"><span class="linenum"> 924</span></a>                  <a class="var it25471" onMouseOver="hilite(25471)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a> = 'xmldb_block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'_upgrade';
<a name="l925"><span class="linenum"> 925</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it25471" onMouseOver="hilite(25471)" onMouseOut="lolite()" onClick="logVariable('newupgrade_function')" href="../_variables/newupgrade_function.html">$newupgrade_function</a>(<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>);
<a name="l926"><span class="linenum"> 926</span></a>              } else {
<a name="l927"><span class="linenum"> 927</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = true;
<a name="l928"><span class="linenum"> 928</span></a>              }
<a name="l929"><span class="linenum"> 929</span></a>  
<a name="l930"><span class="linenum"> 930</span></a>              <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config_plugins', 'value', array('name'=&gt;'version', 'plugin'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)); <span class="comment">// No caching!</span>
<a name="l931"><span class="linenum"> 931</span></a>              <a class="var it25477" onMouseOver="hilite(25477)" onMouseOut="lolite()" onClick="logVariable('currblock')" href="../_variables/currblock.html">$currblock</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('block', array('name'=&gt;<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l932"><span class="linenum"> 932</span></a>              if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &lt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">                // store version if not already there</span>
<a name="l934"><span class="linenum"> 934</span></a>                  <a class="function" onClick="logFunction('upgrade_block_savepoint')" href="../_functions/upgrade_block_savepoint.html" onMouseOver="funcPopup(event,'upgrade_block_savepoint')">upgrade_block_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>, <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, false);
<a name="l935"><span class="linenum"> 935</span></a>              }
<a name="l936"><span class="linenum"> 936</span></a>  
<a name="l937"><span class="linenum"> 937</span></a>              if (<a class="var it25477" onMouseOver="hilite(25477)" onMouseOut="lolite()" onClick="logVariable('currblock')" href="../_variables/currblock.html">$currblock</a>-&gt;<a onClick="logVariable('cron')" class="var it44357" onMouseOver="hilite(44357)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a> != <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('cron')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>) {
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">                // update cron flag if needed</span>
<a name="l939"><span class="linenum"> 939</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('block', 'cron', <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('cron')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/cron.html">cron</a>, array('id' =&gt; <a class="var it25477" onMouseOver="hilite(25477)" onMouseOut="lolite()" onClick="logVariable('currblock')" href="../_variables/currblock.html">$currblock</a>-&gt;<a onClick="logVariable('id')" class="var it44357" onMouseOver="hilite(44357)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l940"><span class="linenum"> 940</span></a>              }
<a name="l941"><span class="linenum"> 941</span></a>  
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">            // Upgrade various components</span>
<a name="l943"><span class="linenum"> 943</span></a>              <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l944"><span class="linenum"> 944</span></a>              <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l945"><span class="linenum"> 945</span></a>              <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l946"><span class="linenum"> 946</span></a>              <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l947"><span class="linenum"> 947</span></a>              \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l948"><span class="linenum"> 948</span></a>              <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l949"><span class="linenum"> 949</span></a>              \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l950"><span class="linenum"> 950</span></a>              <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l951"><span class="linenum"> 951</span></a>              <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>              <a class="var it25467" onMouseOver="hilite(25467)" onMouseOut="lolite()" onClick="logVariable('endcallback')" href="../_variables/endcallback.html">$endcallback</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>          } else if (<a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a> &gt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l956"><span class="linenum"> 956</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('downgrade_exception')" href="../_classes/downgrade_exception.html" onMouseOver="classPopup(event,'downgrade_exception')">downgrade_exception</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it25469" onMouseOver="hilite(25469)" onMouseOut="lolite()" onClick="logVariable('installedversion')" href="../_variables/installedversion.html">$installedversion</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l957"><span class="linenum"> 957</span></a>          }
<a name="l958"><span class="linenum"> 958</span></a>      }
<a name="l959"><span class="linenum"> 959</span></a>  
<a name="l960"><span class="linenum"> 960</span></a>  
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">    // Finally, if we are in the first_install of BLOCKS setup frontpage and admin page blocks</span>
<a name="l962"><span class="linenum"> 962</span></a>      if (<a class="var it25475" onMouseOver="hilite(25475)" onMouseOut="lolite()" onClick="logVariable('first_install')" href="../_variables/first_install.html">$first_install</a>) {
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment">        //Iterate over each course - there should be only site course here now</span>
<a name="l964"><span class="linenum"> 964</span></a>          if (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course')) {
<a name="l965"><span class="linenum"> 965</span></a>              foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l966"><span class="linenum"> 966</span></a>                  <a class="function" onClick="logFunction('blocks_add_default_course_blocks')" href="../_functions/blocks_add_default_course_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_course_blocks')">blocks_add_default_course_blocks</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l967"><span class="linenum"> 967</span></a>              }
<a name="l968"><span class="linenum"> 968</span></a>          }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>          <a class="function" onClick="logFunction('blocks_add_default_system_blocks')" href="../_functions/blocks_add_default_system_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_system_blocks')">blocks_add_default_system_blocks</a>();
<a name="l971"><span class="linenum"> 971</span></a>      }
<a name="l972"><span class="linenum"> 972</span></a>  }
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment">/**</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * Log_display description function used during install and upgrade.</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> *</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> * @param string $component name of component (moodle, mod_assignment, etc.)</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment"> * @return void</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment"> */</span>
<a name="l981"><span class="linenum"> 981</span></a>  function <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l982"><span class="linenum"> 982</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l983"><span class="linenum"> 983</span></a>  
<a name="l984"><span class="linenum"> 984</span></a>      <a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>).'/db/log.php';
<a name="l985"><span class="linenum"> 985</span></a>  
<a name="l986"><span class="linenum"> 986</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>)) {
<a name="l987"><span class="linenum"> 987</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('log_display', array('component'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l988"><span class="linenum"> 988</span></a>          return;
<a name="l989"><span class="linenum"> 989</span></a>      }
<a name="l990"><span class="linenum"> 990</span></a>  
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">    // load new info</span>
<a name="l992"><span class="linenum"> 992</span></a>      <a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = array();
<a name="l993"><span class="linenum"> 993</span></a>      include(<a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>);
<a name="l994"><span class="linenum"> 994</span></a>      <a class="var it25478" onMouseOver="hilite(25478)" onMouseOut="lolite()" onClick="logVariable('newlogs')" href="../_variables/newlogs.html">$newlogs</a> = array();
<a name="l995"><span class="linenum"> 995</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l996"><span class="linenum"> 996</span></a>          <a class="var it25478" onMouseOver="hilite(25478)" onMouseOut="lolite()" onClick="logVariable('newlogs')" href="../_variables/newlogs.html">$newlogs</a>[<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>['module'].'-'.<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>['action']] = <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>; <span class="comment">// kind of unique name</span>
<a name="l997"><span class="linenum"> 997</span></a>      }
<a name="l998"><span class="linenum"> 998</span></a>      unset(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>);
<a name="l999"><span class="linenum"> 999</span></a>      <a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> = <a class="var it25478" onMouseOver="hilite(25478)" onMouseOut="lolite()" onClick="logVariable('newlogs')" href="../_variables/newlogs.html">$newlogs</a>;
<a name="l1000"><span class="linenum">1000</span></a>  
<a name="l1001"><span class="linenum">1001</span></a>      <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = array('module', 'action', 'mtable', 'field');
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">    // update all log fist</span>
<a name="l1003"><span class="linenum">1003</span></a>      <a class="var it25479" onMouseOver="hilite(25479)" onMouseOut="lolite()" onClick="logVariable('dblogs')" href="../_variables/dblogs.html">$dblogs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('log_display', array('component'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l1004"><span class="linenum">1004</span></a>      foreach (<a class="var it25479" onMouseOver="hilite(25479)" onMouseOut="lolite()" onClick="logVariable('dblogs')" href="../_variables/dblogs.html">$dblogs</a> as <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>) {
<a name="l1005"><span class="linenum">1005</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('module')" class="var it44358" onMouseOver="hilite(44358)" onMouseOut="lolite()" href="../_variables/module.html">module</a>.'-'.<a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('action')" class="var it44358" onMouseOver="hilite(44358)" onMouseOut="lolite()" href="../_variables/action.html">action</a>;
<a name="l1006"><span class="linenum">1006</span></a>  
<a name="l1007"><span class="linenum">1007</span></a>          if (empty(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>])) {
<a name="l1008"><span class="linenum">1008</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('log_display', array('id'=&gt;<a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('id')" class="var it44358" onMouseOver="hilite(44358)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1009"><span class="linenum">1009</span></a>              continue;
<a name="l1010"><span class="linenum">1010</span></a>          }
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a> = <a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>];
<a name="l1013"><span class="linenum">1013</span></a>          unset(<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>]);
<a name="l1014"><span class="linenum">1014</span></a>  
<a name="l1015"><span class="linenum">1015</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l1016"><span class="linenum">1016</span></a>          foreach (<a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> as <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>) {
<a name="l1017"><span class="linenum">1017</span></a>              if (<a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> != <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>[<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>]) {
<a name="l1018"><span class="linenum">1018</span></a>                  <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>[<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>];
<a name="l1019"><span class="linenum">1019</span></a>                  <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1020"><span class="linenum">1020</span></a>              }
<a name="l1021"><span class="linenum">1021</span></a>          }
<a name="l1022"><span class="linenum">1022</span></a>          if (<a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l1023"><span class="linenum">1023</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('log_display', <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>);
<a name="l1024"><span class="linenum">1024</span></a>          }
<a name="l1025"><span class="linenum">1025</span></a>      }
<a name="l1026"><span class="linenum">1026</span></a>      foreach (<a class="var it1115" onMouseOver="hilite(1115)" onMouseOut="lolite()" onClick="logVariable('logs')" href="../_variables/logs.html">$logs</a> as <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>) {
<a name="l1027"><span class="linenum">1027</span></a>          <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a> = (object)<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>;
<a name="l1028"><span class="linenum">1028</span></a>          <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>-&gt;<a onClick="logVariable('component')" class="var it44358" onMouseOver="hilite(44358)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1029"><span class="linenum">1029</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('log_display', <a class="var it25480" onMouseOver="hilite(25480)" onMouseOut="lolite()" onClick="logVariable('dblog')" href="../_variables/dblog.html">$dblog</a>);
<a name="l1030"><span class="linenum">1030</span></a>      }
<a name="l1031"><span class="linenum">1031</span></a>  }
<a name="l1032"><span class="linenum">1032</span></a>  
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">/**</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment"> * Web service discovery function used during install and upgrade.</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment"> * @param string $component name of component (moodle, mod_assignment, etc.)</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment"> * @return void</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment"> */</span>
<a name="l1038"><span class="linenum">1038</span></a>  function <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l1039"><span class="linenum">1039</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1040"><span class="linenum">1040</span></a>  
<a name="l1041"><span class="linenum">1041</span></a>      <a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>).'/db/services.php';
<a name="l1042"><span class="linenum">1042</span></a>  
<a name="l1043"><span class="linenum">1043</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>)) {
<a name="l1044"><span class="linenum">1044</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../lib/externallib.php.html">/lib/externallib.php</a>');
<a name="l1045"><span class="linenum">1045</span></a>          <a class="function" onClick="logFunction('external_delete_descriptions')" href="../_functions/external_delete_descriptions.html" onMouseOver="funcPopup(event,'external_delete_descriptions')">external_delete_descriptions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1046"><span class="linenum">1046</span></a>          return;
<a name="l1047"><span class="linenum">1047</span></a>      }
<a name="l1048"><span class="linenum">1048</span></a>  
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment">    // load new info</span>
<a name="l1050"><span class="linenum">1050</span></a>      <a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> = array();
<a name="l1051"><span class="linenum">1051</span></a>      <a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a> = array();
<a name="l1052"><span class="linenum">1052</span></a>      include(<a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('defpath')" href="../_variables/defpath.html">$defpath</a>);
<a name="l1053"><span class="linenum">1053</span></a>  
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">    // update all function fist</span>
<a name="l1055"><span class="linenum">1055</span></a>      <a class="var it25481" onMouseOver="hilite(25481)" onMouseOut="lolite()" onClick="logVariable('dbfunctions')" href="../_variables/dbfunctions.html">$dbfunctions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('external_functions', array('component'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l1056"><span class="linenum">1056</span></a>      foreach (<a class="var it25481" onMouseOver="hilite(25481)" onMouseOut="lolite()" onClick="logVariable('dbfunctions')" href="../_variables/dbfunctions.html">$dbfunctions</a> as <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>) {
<a name="l1057"><span class="linenum">1057</span></a>          if (empty(<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>[<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/name.html">name</a>])) {
<a name="l1058"><span class="linenum">1058</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_functions', array('id'=&gt;<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('id')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">            // do not delete functions from external_services_functions, beacuse</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">            // we want to notify admins when functions used in custom services disappear</span>
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">            //TODO: this looks wrong, we have to delete it eventually (skodak)</span>
<a name="l1063"><span class="linenum">1063</span></a>              continue;
<a name="l1064"><span class="linenum">1064</span></a>          }
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>          <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>[<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/name.html">name</a>];
<a name="l1067"><span class="linenum">1067</span></a>          unset(<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>[<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/name.html">name</a>]);
<a name="l1068"><span class="linenum">1068</span></a>          <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'] = empty(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath']) ? null : <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'];
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l1071"><span class="linenum">1071</span></a>          if (<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classname')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a> != <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classname']) {
<a name="l1072"><span class="linenum">1072</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classname')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classname'];
<a name="l1073"><span class="linenum">1073</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1074"><span class="linenum">1074</span></a>          }
<a name="l1075"><span class="linenum">1075</span></a>          if (<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('methodname')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/methodname.html">methodname</a> != <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['methodname']) {
<a name="l1076"><span class="linenum">1076</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('methodname')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/methodname.html">methodname</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['methodname'];
<a name="l1077"><span class="linenum">1077</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1078"><span class="linenum">1078</span></a>          }
<a name="l1079"><span class="linenum">1079</span></a>          if (<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classpath')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/classpath.html">classpath</a> != <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath']) {
<a name="l1080"><span class="linenum">1080</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classpath')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/classpath.html">classpath</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'];
<a name="l1081"><span class="linenum">1081</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1082"><span class="linenum">1082</span></a>          }
<a name="l1083"><span class="linenum">1083</span></a>          <a class="var it25483" onMouseOver="hilite(25483)" onMouseOut="lolite()" onClick="logVariable('functioncapabilities')" href="../_variables/functioncapabilities.html">$functioncapabilities</a> = <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('capabilities', <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)?<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['capabilities']:'';
<a name="l1084"><span class="linenum">1084</span></a>          if (<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('capabilities')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/capabilities.html">capabilities</a> != <a class="var it25483" onMouseOver="hilite(25483)" onMouseOut="lolite()" onClick="logVariable('functioncapabilities')" href="../_variables/functioncapabilities.html">$functioncapabilities</a>) {
<a name="l1085"><span class="linenum">1085</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('capabilities')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/capabilities.html">capabilities</a> = <a class="var it25483" onMouseOver="hilite(25483)" onMouseOut="lolite()" onClick="logVariable('functioncapabilities')" href="../_variables/functioncapabilities.html">$functioncapabilities</a>;
<a name="l1086"><span class="linenum">1086</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1087"><span class="linenum">1087</span></a>          }
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>          if (isset(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services']) and <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services'])) {
<a name="l1090"><span class="linenum">1090</span></a>              <a class="phpfunction" onClick="logFunction('sort')" href="../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services']);
<a name="l1091"><span class="linenum">1091</span></a>              <a class="var it25484" onMouseOver="hilite(25484)" onMouseOut="lolite()" onClick="logVariable('functionservices')" href="../_variables/functionservices.html">$functionservices</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services']);
<a name="l1092"><span class="linenum">1092</span></a>          } else {
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">            // Force null values in the DB.</span>
<a name="l1094"><span class="linenum">1094</span></a>              <a class="var it25484" onMouseOver="hilite(25484)" onMouseOut="lolite()" onClick="logVariable('functionservices')" href="../_variables/functionservices.html">$functionservices</a> = null;
<a name="l1095"><span class="linenum">1095</span></a>          }
<a name="l1096"><span class="linenum">1096</span></a>  
<a name="l1097"><span class="linenum">1097</span></a>          if (<a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('services')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/services.html">services</a> != <a class="var it25484" onMouseOver="hilite(25484)" onMouseOut="lolite()" onClick="logVariable('functionservices')" href="../_variables/functionservices.html">$functionservices</a>) {
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">            // Now, we need to check if services were removed, in that case we need to remove the function from them.</span>
<a name="l1099"><span class="linenum">1099</span></a>              <a class="var it25485" onMouseOver="hilite(25485)" onMouseOut="lolite()" onClick="logVariable('servicesremoved')" href="../_variables/servicesremoved.html">$servicesremoved</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('services')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/services.html">services</a>), <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it25484" onMouseOver="hilite(25484)" onMouseOut="lolite()" onClick="logVariable('functionservices')" href="../_variables/functionservices.html">$functionservices</a>));
<a name="l1100"><span class="linenum">1100</span></a>              foreach (<a class="var it25485" onMouseOver="hilite(25485)" onMouseOut="lolite()" onClick="logVariable('servicesremoved')" href="../_variables/servicesremoved.html">$servicesremoved</a> as <a class="var it25486" onMouseOver="hilite(25486)" onMouseOut="lolite()" onClick="logVariable('removedshortname')" href="../_variables/removedshortname.html">$removedshortname</a>) {
<a name="l1101"><span class="linenum">1101</span></a>                  if (<a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('externalserviceid')" href="../_variables/externalserviceid.html">$externalserviceid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('external_services', 'id', array(&quot;shortname&quot; =&gt; <a class="var it25486" onMouseOver="hilite(25486)" onMouseOut="lolite()" onClick="logVariable('removedshortname')" href="../_variables/removedshortname.html">$removedshortname</a>))) {
<a name="l1102"><span class="linenum">1102</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_functions', array('functionname' =&gt; <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/name.html">name</a>,
<a name="l1103"><span class="linenum">1103</span></a>                                                                                  'externalserviceid' =&gt; <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('externalserviceid')" href="../_variables/externalserviceid.html">$externalserviceid</a>));
<a name="l1104"><span class="linenum">1104</span></a>                  }
<a name="l1105"><span class="linenum">1105</span></a>              }
<a name="l1106"><span class="linenum">1106</span></a>  
<a name="l1107"><span class="linenum">1107</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('services')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/services.html">services</a> = <a class="var it25484" onMouseOver="hilite(25484)" onMouseOut="lolite()" onClick="logVariable('functionservices')" href="../_variables/functionservices.html">$functionservices</a>;
<a name="l1108"><span class="linenum">1108</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1109"><span class="linenum">1109</span></a>          }
<a name="l1110"><span class="linenum">1110</span></a>          if (<a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l1111"><span class="linenum">1111</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('external_functions', <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>);
<a name="l1112"><span class="linenum">1112</span></a>          }
<a name="l1113"><span class="linenum">1113</span></a>      }
<a name="l1114"><span class="linenum">1114</span></a>      foreach (<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> as <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a> =&gt; <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1115"><span class="linenum">1115</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a> = new stdClass();
<a name="l1116"><span class="linenum">1116</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('name')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/name.html">name</a>       = <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>;
<a name="l1117"><span class="linenum">1117</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classname')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>  = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classname'];
<a name="l1118"><span class="linenum">1118</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('methodname')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/methodname.html">methodname</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['methodname'];
<a name="l1119"><span class="linenum">1119</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('classpath')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/classpath.html">classpath</a>  = empty(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath']) ? null : <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['classpath'];
<a name="l1120"><span class="linenum">1120</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('component')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/component.html">component</a>  = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1121"><span class="linenum">1121</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('capabilities')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/capabilities.html">capabilities</a> = <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('capabilities', <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)?<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['capabilities']:'';
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>          if (isset(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services']) and <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services'])) {
<a name="l1124"><span class="linenum">1124</span></a>              <a class="phpfunction" onClick="logFunction('sort')" href="../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services']);
<a name="l1125"><span class="linenum">1125</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('services')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/services.html">services</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>['services']);
<a name="l1126"><span class="linenum">1126</span></a>          } else {
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">            // Force null values in the DB.</span>
<a name="l1128"><span class="linenum">1128</span></a>              <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('services')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/services.html">services</a> = null;
<a name="l1129"><span class="linenum">1129</span></a>          }
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>          <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>-&gt;<a onClick="logVariable('id')" class="var it44359" onMouseOver="hilite(44359)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_functions', <a class="var it25482" onMouseOver="hilite(25482)" onMouseOut="lolite()" onClick="logVariable('dbfunction')" href="../_variables/dbfunction.html">$dbfunction</a>);
<a name="l1132"><span class="linenum">1132</span></a>      }
<a name="l1133"><span class="linenum">1133</span></a>      unset(<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>);
<a name="l1134"><span class="linenum">1134</span></a>  
<a name="l1135"><span class="linenum">1135</span></a>  <span class="comment">    // now deal with services</span>
<a name="l1136"><span class="linenum">1136</span></a>      <a class="var it25487" onMouseOver="hilite(25487)" onMouseOut="lolite()" onClick="logVariable('dbservices')" href="../_variables/dbservices.html">$dbservices</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('external_services', array('component'=&gt;<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l1137"><span class="linenum">1137</span></a>      foreach (<a class="var it25487" onMouseOver="hilite(25487)" onMouseOut="lolite()" onClick="logVariable('dbservices')" href="../_variables/dbservices.html">$dbservices</a> as <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>) {
<a name="l1138"><span class="linenum">1138</span></a>          if (empty(<a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a>[<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/name.html">name</a>])) {
<a name="l1139"><span class="linenum">1139</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_tokens', array('externalserviceid'=&gt;<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1140"><span class="linenum">1140</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_functions', array('externalserviceid'=&gt;<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1141"><span class="linenum">1141</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_users', array('externalserviceid'=&gt;<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1142"><span class="linenum">1142</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services', array('id'=&gt;<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1143"><span class="linenum">1143</span></a>              continue;
<a name="l1144"><span class="linenum">1144</span></a>          }
<a name="l1145"><span class="linenum">1145</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> = <a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a>[<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/name.html">name</a>];
<a name="l1146"><span class="linenum">1146</span></a>          unset(<a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a>[<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/name.html">name</a>]);
<a name="l1147"><span class="linenum">1147</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled'] = empty(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled']) ? 0 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled'];
<a name="l1148"><span class="linenum">1148</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'] = empty(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability']) ? null : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'];
<a name="l1149"><span class="linenum">1149</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'] = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers']) ? 1 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'];
<a name="l1150"><span class="linenum">1150</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'] = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles']) ? 0 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'];
<a name="l1151"><span class="linenum">1151</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'] = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles']) ? 0 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'];
<a name="l1152"><span class="linenum">1152</span></a>          <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'] = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) ? null : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'];
<a name="l1153"><span class="linenum">1153</span></a>  
<a name="l1154"><span class="linenum">1154</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = false;
<a name="l1155"><span class="linenum">1155</span></a>          if (<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('requiredcapability')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/requiredcapability.html">requiredcapability</a> != <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability']) {
<a name="l1156"><span class="linenum">1156</span></a>              <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('requiredcapability')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/requiredcapability.html">requiredcapability</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'];
<a name="l1157"><span class="linenum">1157</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1158"><span class="linenum">1158</span></a>          }
<a name="l1159"><span class="linenum">1159</span></a>          if (<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('restrictedusers')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/restrictedusers.html">restrictedusers</a> != <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers']) {
<a name="l1160"><span class="linenum">1160</span></a>              <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('restrictedusers')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/restrictedusers.html">restrictedusers</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'];
<a name="l1161"><span class="linenum">1161</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1162"><span class="linenum">1162</span></a>          }
<a name="l1163"><span class="linenum">1163</span></a>          if (<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('downloadfiles')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/downloadfiles.html">downloadfiles</a> != <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles']) {
<a name="l1164"><span class="linenum">1164</span></a>              <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('downloadfiles')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/downloadfiles.html">downloadfiles</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'];
<a name="l1165"><span class="linenum">1165</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1166"><span class="linenum">1166</span></a>          }
<a name="l1167"><span class="linenum">1167</span></a>          if (<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('uploadfiles')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/uploadfiles.html">uploadfiles</a> != <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles']) {
<a name="l1168"><span class="linenum">1168</span></a>              <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('uploadfiles')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/uploadfiles.html">uploadfiles</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'];
<a name="l1169"><span class="linenum">1169</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1170"><span class="linenum">1170</span></a>          }
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">        //if shortname is not a PARAM_ALPHANUMEXT, fail (tested here for service update and creation)</span>
<a name="l1172"><span class="linenum">1172</span></a>          if (isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) and
<a name="l1173"><span class="linenum">1173</span></a>                  (<a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'], <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>) != <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'])) {
<a name="l1174"><span class="linenum">1174</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installserviceshortnameerror', 'webservice', '', <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']);
<a name="l1175"><span class="linenum">1175</span></a>          }
<a name="l1176"><span class="linenum">1176</span></a>          if (<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('shortname')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> != <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) {
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment">            //check that shortname is unique</span>
<a name="l1178"><span class="linenum">1178</span></a>              if (isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'])) { //we currently accepts multiple shortname == null
<a name="l1179"><span class="linenum">1179</span></a>                  <a class="var it25489" onMouseOver="hilite(25489)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('external_services',
<a name="l1180"><span class="linenum">1180</span></a>                          array('shortname' =&gt; <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']));
<a name="l1181"><span class="linenum">1181</span></a>                  if (!empty(<a class="var it25489" onMouseOver="hilite(25489)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a>)) {
<a name="l1182"><span class="linenum">1182</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installexistingserviceshortnameerror', 'webservice', '', <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']);
<a name="l1183"><span class="linenum">1183</span></a>                  }
<a name="l1184"><span class="linenum">1184</span></a>              }
<a name="l1185"><span class="linenum">1185</span></a>              <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('shortname')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'];
<a name="l1186"><span class="linenum">1186</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a> = true;
<a name="l1187"><span class="linenum">1187</span></a>          }
<a name="l1188"><span class="linenum">1188</span></a>          if (<a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../_variables/update.html">$update</a>) {
<a name="l1189"><span class="linenum">1189</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('external_services', <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>);
<a name="l1190"><span class="linenum">1190</span></a>          }
<a name="l1191"><span class="linenum">1191</span></a>  
<a name="l1192"><span class="linenum">1192</span></a>          <a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('external_services_functions', array('externalserviceid'=&gt;<a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1193"><span class="linenum">1193</span></a>          foreach (<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> as <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1194"><span class="linenum">1194</span></a>              <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('functionname')" class="var it44241" onMouseOver="hilite(44241)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions']);
<a name="l1195"><span class="linenum">1195</span></a>              if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> === false) {
<a name="l1196"><span class="linenum">1196</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('external_services_functions', array('id'=&gt;<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('id')" class="var it44241" onMouseOver="hilite(44241)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1197"><span class="linenum">1197</span></a>              } else {
<a name="l1198"><span class="linenum">1198</span></a>                  unset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions'][<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l1199"><span class="linenum">1199</span></a>              }
<a name="l1200"><span class="linenum">1200</span></a>          }
<a name="l1201"><span class="linenum">1201</span></a>          foreach (<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions'] as <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>) {
<a name="l1202"><span class="linenum">1202</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a> = new stdClass();
<a name="l1203"><span class="linenum">1203</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('externalserviceid')" class="var it44361" onMouseOver="hilite(44361)" onMouseOut="lolite()" href="../_variables/externalserviceid.html">externalserviceid</a> = <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1204"><span class="linenum">1204</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('functionname')" class="var it44361" onMouseOver="hilite(44361)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>      = <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>;
<a name="l1205"><span class="linenum">1205</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services_functions', <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>);
<a name="l1206"><span class="linenum">1206</span></a>          }
<a name="l1207"><span class="linenum">1207</span></a>          unset(<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a>);
<a name="l1208"><span class="linenum">1208</span></a>      }
<a name="l1209"><span class="linenum">1209</span></a>      foreach (<a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> =&gt; <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>) {
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment">        //check that shortname is unique</span>
<a name="l1211"><span class="linenum">1211</span></a>          if (isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'])) { //we currently accepts multiple shortname == null
<a name="l1212"><span class="linenum">1212</span></a>              <a class="var it25489" onMouseOver="hilite(25489)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('external_services',
<a name="l1213"><span class="linenum">1213</span></a>                      array('shortname' =&gt; <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']));
<a name="l1214"><span class="linenum">1214</span></a>              if (!empty(<a class="var it25489" onMouseOver="hilite(25489)" onMouseOut="lolite()" onClick="logVariable('existingservice')" href="../_variables/existingservice.html">$existingservice</a>)) {
<a name="l1215"><span class="linenum">1215</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installserviceshortnameerror', 'webservice');
<a name="l1216"><span class="linenum">1216</span></a>              }
<a name="l1217"><span class="linenum">1217</span></a>          }
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a> = new stdClass();
<a name="l1220"><span class="linenum">1220</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('name')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/name.html">name</a>               = <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l1221"><span class="linenum">1221</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('enabled')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>            = empty(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled']) ? 0 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['enabled'];
<a name="l1222"><span class="linenum">1222</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('requiredcapability')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/requiredcapability.html">requiredcapability</a> = empty(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability']) ? null : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['requiredcapability'];
<a name="l1223"><span class="linenum">1223</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('restrictedusers')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/restrictedusers.html">restrictedusers</a>    = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers']) ? 1 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['restrictedusers'];
<a name="l1224"><span class="linenum">1224</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('downloadfiles')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/downloadfiles.html">downloadfiles</a>      = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles']) ? 0 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['downloadfiles'];
<a name="l1225"><span class="linenum">1225</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('uploadfiles')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/uploadfiles.html">uploadfiles</a>        = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles']) ? 0 : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['uploadfiles'];
<a name="l1226"><span class="linenum">1226</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('shortname')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>          = !isset(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname']) ? null : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['shortname'];
<a name="l1227"><span class="linenum">1227</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('component')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/component.html">component</a>          = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1228"><span class="linenum">1228</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>        = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1229"><span class="linenum">1229</span></a>          <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services', <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>);
<a name="l1230"><span class="linenum">1230</span></a>          foreach (<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['functions'] as <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>) {
<a name="l1231"><span class="linenum">1231</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a> = new stdClass();
<a name="l1232"><span class="linenum">1232</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('externalserviceid')" class="var it44361" onMouseOver="hilite(44361)" onMouseOut="lolite()" href="../_variables/externalserviceid.html">externalserviceid</a> = <a class="var it25488" onMouseOver="hilite(25488)" onMouseOut="lolite()" onClick="logVariable('dbservice')" href="../_variables/dbservice.html">$dbservice</a>-&gt;<a onClick="logVariable('id')" class="var it44360" onMouseOver="hilite(44360)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1233"><span class="linenum">1233</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('functionname')" class="var it44361" onMouseOver="hilite(44361)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>      = <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('fname')" href="../_variables/fname.html">$fname</a>;
<a name="l1234"><span class="linenum">1234</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services_functions', <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>);
<a name="l1235"><span class="linenum">1235</span></a>          }
<a name="l1236"><span class="linenum">1236</span></a>      }
<a name="l1237"><span class="linenum">1237</span></a>  }
<a name="l1238"><span class="linenum">1238</span></a>  
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment">/**</span>
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment"> * Allow plugins and subsystems to add external functions to other plugins or built-in services.</span>
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment"> * This function is executed just after all the plugins have been updated.</span>
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment"> */</span>
<a name="l1243"><span class="linenum">1243</span></a>  function <a class="function" onClick="logFunction('external_update_services')" href="../_functions/external_update_services.html" onMouseOver="funcPopup(event,'external_update_services')">external_update_services</a>() {
<a name="l1244"><span class="linenum">1244</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1245"><span class="linenum">1245</span></a>  
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">    // Look for external functions that want to be added in existing services.</span>
<a name="l1247"><span class="linenum">1247</span></a>      <a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('external_functions', 'services IS NOT NULL');
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>      <a class="var it25491" onMouseOver="hilite(25491)" onMouseOut="lolite()" onClick="logVariable('servicescache')" href="../_variables/servicescache.html">$servicescache</a> = array();
<a name="l1250"><span class="linenum">1250</span></a>      foreach (<a class="var it302" onMouseOver="hilite(302)" onMouseOut="lolite()" onClick="logVariable('functions')" href="../_variables/functions.html">$functions</a> as <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">        // Prevent edge cases.</span>
<a name="l1252"><span class="linenum">1252</span></a>          if (empty(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('services')" class="var it44241" onMouseOver="hilite(44241)" onMouseOut="lolite()" href="../_variables/services.html">services</a>)) {
<a name="l1253"><span class="linenum">1253</span></a>              continue;
<a name="l1254"><span class="linenum">1254</span></a>          }
<a name="l1255"><span class="linenum">1255</span></a>          <a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('services')" class="var it44241" onMouseOver="hilite(44241)" onMouseOut="lolite()" href="../_variables/services.html">services</a>);
<a name="l1256"><span class="linenum">1256</span></a>  
<a name="l1257"><span class="linenum">1257</span></a>          foreach (<a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('services')" href="../_variables/services.html">$services</a> as <a class="var it5789" onMouseOver="hilite(5789)" onMouseOut="lolite()" onClick="logVariable('serviceshortname')" href="../_variables/serviceshortname.html">$serviceshortname</a>) {
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment">            // Get the service id by shortname.</span>
<a name="l1259"><span class="linenum">1259</span></a>              if (!empty(<a class="var it25491" onMouseOver="hilite(25491)" onMouseOut="lolite()" onClick="logVariable('servicescache')" href="../_variables/servicescache.html">$servicescache</a>[<a class="var it5789" onMouseOver="hilite(5789)" onMouseOut="lolite()" onClick="logVariable('serviceshortname')" href="../_variables/serviceshortname.html">$serviceshortname</a>])) {
<a name="l1260"><span class="linenum">1260</span></a>                  <a class="var it5556" onMouseOver="hilite(5556)" onMouseOut="lolite()" onClick="logVariable('serviceid')" href="../_variables/serviceid.html">$serviceid</a> = <a class="var it25491" onMouseOver="hilite(25491)" onMouseOut="lolite()" onClick="logVariable('servicescache')" href="../_variables/servicescache.html">$servicescache</a>[<a class="var it5789" onMouseOver="hilite(5789)" onMouseOut="lolite()" onClick="logVariable('serviceshortname')" href="../_variables/serviceshortname.html">$serviceshortname</a>];
<a name="l1261"><span class="linenum">1261</span></a>              } else if (<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('external_services', array('shortname' =&gt; <a class="var it5789" onMouseOver="hilite(5789)" onMouseOut="lolite()" onClick="logVariable('serviceshortname')" href="../_variables/serviceshortname.html">$serviceshortname</a>))) {
<a name="l1262"><span class="linenum">1262</span></a>  <span class="comment">                // If the component is empty, it means that is not a built-in service.</span>
<a name="l1263"><span class="linenum">1263</span></a>  <span class="comment">                // We don't allow functions to inject themselves in services created by an user in Moodle.</span>
<a name="l1264"><span class="linenum">1264</span></a>                  if (empty(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>-&gt;<a onClick="logVariable('component')" class="var it43730" onMouseOver="hilite(43730)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l1265"><span class="linenum">1265</span></a>                      continue;
<a name="l1266"><span class="linenum">1266</span></a>                  }
<a name="l1267"><span class="linenum">1267</span></a>                  <a class="var it5556" onMouseOver="hilite(5556)" onMouseOut="lolite()" onClick="logVariable('serviceid')" href="../_variables/serviceid.html">$serviceid</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>-&gt;<a onClick="logVariable('id')" class="var it43730" onMouseOver="hilite(43730)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1268"><span class="linenum">1268</span></a>                  <a class="var it25491" onMouseOver="hilite(25491)" onMouseOut="lolite()" onClick="logVariable('servicescache')" href="../_variables/servicescache.html">$servicescache</a>[<a class="var it5789" onMouseOver="hilite(5789)" onMouseOut="lolite()" onClick="logVariable('serviceshortname')" href="../_variables/serviceshortname.html">$serviceshortname</a>] = <a class="var it5556" onMouseOver="hilite(5556)" onMouseOut="lolite()" onClick="logVariable('serviceid')" href="../_variables/serviceid.html">$serviceid</a>;
<a name="l1269"><span class="linenum">1269</span></a>              } else {
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment">                // Service not found.</span>
<a name="l1271"><span class="linenum">1271</span></a>                  continue;
<a name="l1272"><span class="linenum">1272</span></a>              }
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">            // Finally add the function to the service.</span>
<a name="l1274"><span class="linenum">1274</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a> = new stdClass();
<a name="l1275"><span class="linenum">1275</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('externalserviceid')" class="var it44361" onMouseOver="hilite(44361)" onMouseOut="lolite()" href="../_variables/externalserviceid.html">externalserviceid</a> = <a class="var it5556" onMouseOver="hilite(5556)" onMouseOut="lolite()" onClick="logVariable('serviceid')" href="../_variables/serviceid.html">$serviceid</a>;
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>-&gt;<a onClick="logVariable('functionname')" class="var it44361" onMouseOver="hilite(44361)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>      = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;<a onClick="logVariable('name')" class="var it44241" onMouseOver="hilite(44241)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l1277"><span class="linenum">1277</span></a>  
<a name="l1278"><span class="linenum">1278</span></a>              if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('external_services_functions', (array)<a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>)) {
<a name="l1279"><span class="linenum">1279</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('external_services_functions', <a class="var it25490" onMouseOver="hilite(25490)" onMouseOut="lolite()" onClick="logVariable('newf')" href="../_variables/newf.html">$newf</a>);
<a name="l1280"><span class="linenum">1280</span></a>              }
<a name="l1281"><span class="linenum">1281</span></a>          }
<a name="l1282"><span class="linenum">1282</span></a>      }
<a name="l1283"><span class="linenum">1283</span></a>  }
<a name="l1284"><span class="linenum">1284</span></a>  
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">/**</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment"> * upgrade logging functions</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment"> */</span>
<a name="l1288"><span class="linenum">1288</span></a>  function <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = null) {
<a name="l1289"><span class="linenum">1289</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1290"><span class="linenum">1290</span></a>  
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">    // rollback everything, we need to log all upgrade problems</span>
<a name="l1292"><span class="linenum">1292</span></a>      <a class="function" onClick="logFunction('abort_all_db_transactions')" href="../_functions/abort_all_db_transactions.html" onMouseOver="funcPopup(event,'abort_all_db_transactions')">abort_all_db_transactions</a>();
<a name="l1293"><span class="linenum">1293</span></a>  
<a name="l1294"><span class="linenum">1294</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('get_exception_info')" href="../_functions/get_exception_info.html" onMouseOver="funcPopup(event,'get_exception_info')">get_exception_info</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1295"><span class="linenum">1295</span></a>  
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">    // First log upgrade error</span>
<a name="l1297"><span class="linenum">1297</span></a>      <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_ERROR')" href="../_constants/UPGRADE_LOG_ERROR.html" onMouseOver="constPopup(event,'UPGRADE_LOG_ERROR')">UPGRADE_LOG_ERROR</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Exception: ' . <a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>), <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('message')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/message.html">message</a>, <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('backtrace')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../_variables/backtrace.html">backtrace</a>);
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment">    // Always turn on debugging - admins need to know what is going on</span>
<a name="l1300"><span class="linenum">1300</span></a>      <a class="function" onClick="logFunction('set_debugging')" href="../_functions/set_debugging.html" onMouseOver="funcPopup(event,'set_debugging')">set_debugging</a>(<a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>, true);
<a name="l1301"><span class="linenum">1301</span></a>  
<a name="l1302"><span class="linenum">1302</span></a>      <a class="function" onClick="logFunction('default_exception_handler')" href="../_functions/default_exception_handler.html" onMouseOver="funcPopup(event,'default_exception_handler')">default_exception_handler</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>, true, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1303"><span class="linenum">1303</span></a>  }
<a name="l1304"><span class="linenum">1304</span></a>  
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">/**</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment"> * Adds log entry into upgrade_log table</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment"> *</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment"> * @param int $type UPGRADE_LOG_NORMAL, UPGRADE_LOG_NOTICE or UPGRADE_LOG_ERROR</span>
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment"> * @param string $plugin frankenstyle component name</span>
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment"> * @param string $info short description text of log entry</span>
<a name="l1311"><span class="linenum">1311</span></a>  <span class="comment"> * @param string $details long problem description</span>
<a name="l1312"><span class="linenum">1312</span></a>  <span class="comment"> * @param string $backtrace string used for errors only</span>
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment"> * @return void</span>
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment"> */</span>
<a name="l1315"><span class="linenum">1315</span></a>  function <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>, <a class="var it1294" onMouseOver="hilite(1294)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>=null, <a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>=null) {
<a name="l1316"><span class="linenum">1316</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1317"><span class="linenum">1317</span></a>  
<a name="l1318"><span class="linenum">1318</span></a>      if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>)) {
<a name="l1319"><span class="linenum">1319</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = 'core';
<a name="l1320"><span class="linenum">1320</span></a>      }
<a name="l1321"><span class="linenum">1321</span></a>  
<a name="l1322"><span class="linenum">1322</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a>, <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>) = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1323"><span class="linenum">1323</span></a>      <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>) ? <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> : <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> . '_' . <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>;
<a name="l1324"><span class="linenum">1324</span></a>  
<a name="l1325"><span class="linenum">1325</span></a>      <a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a> = <a class="function" onClick="logFunction('format_backtrace')" href="../_functions/format_backtrace.html" onMouseOver="funcPopup(event,'format_backtrace')">format_backtrace</a>(<a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>, true);
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>      <a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = null;
<a name="l1328"><span class="linenum">1328</span></a>      <a class="var it25492" onMouseOver="hilite(25492)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a>  = null;
<a name="l1329"><span class="linenum">1329</span></a>  
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment">    //first try to find out current version number</span>
<a name="l1331"><span class="linenum">1331</span></a>      if (<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> === 'core') {
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">        //main</span>
<a name="l1333"><span class="linenum">1333</span></a>          <a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>;
<a name="l1334"><span class="linenum">1334</span></a>  
<a name="l1335"><span class="linenum">1335</span></a>          <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> = null;
<a name="l1336"><span class="linenum">1336</span></a>          include(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/version.php&quot;);
<a name="l1337"><span class="linenum">1337</span></a>          <a class="var it25492" onMouseOver="hilite(25492)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a> = <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>;
<a name="l1338"><span class="linenum">1338</span></a>  
<a name="l1339"><span class="linenum">1339</span></a>      } else {
<a name="l1340"><span class="linenum">1340</span></a>          <a class="var it25460" onMouseOver="hilite(25460)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'version');
<a name="l1341"><span class="linenum">1341</span></a>          if (!empty(<a class="var it25460" onMouseOver="hilite(25460)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>)) {
<a name="l1342"><span class="linenum">1342</span></a>              <a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = <a class="var it25460" onMouseOver="hilite(25460)" onMouseOut="lolite()" onClick="logVariable('pluginversion')" href="../_variables/pluginversion.html">$pluginversion</a>;
<a name="l1343"><span class="linenum">1343</span></a>          }
<a name="l1344"><span class="linenum">1344</span></a>          <a class="var it2798" onMouseOver="hilite(2798)" onMouseOut="lolite()" onClick="logVariable('cd')" href="../_variables/cd.html">$cd</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1345"><span class="linenum">1345</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it2798" onMouseOver="hilite(2798)" onMouseOut="lolite()" onClick="logVariable('cd')" href="../_variables/cd.html">$cd</a>/version.php&quot;)) {
<a name="l1346"><span class="linenum">1346</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = new stdClass();
<a name="l1347"><span class="linenum">1347</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = null;
<a name="l1348"><span class="linenum">1348</span></a>              <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l1349"><span class="linenum">1349</span></a>              include(&quot;<a class="var it2798" onMouseOver="hilite(2798)" onMouseOut="lolite()" onClick="logVariable('cd')" href="../_variables/cd.html">$cd</a>/version.php&quot;);
<a name="l1350"><span class="linenum">1350</span></a>              <a class="var it25492" onMouseOver="hilite(25492)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>-&gt;<a onClick="logVariable('version')" class="var it42911" onMouseOver="hilite(42911)" onMouseOut="lolite()" href="../_variables/version.html">version</a>;
<a name="l1351"><span class="linenum">1351</span></a>          }
<a name="l1352"><span class="linenum">1352</span></a>      }
<a name="l1353"><span class="linenum">1353</span></a>  
<a name="l1354"><span class="linenum">1354</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a> = new stdClass();
<a name="l1355"><span class="linenum">1355</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('type')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/type.html">type</a>          = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1356"><span class="linenum">1356</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('plugin')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>        = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l1357"><span class="linenum">1357</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('version')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/version.html">version</a>       = <a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a>;
<a name="l1358"><span class="linenum">1358</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('targetversion')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/targetversion.html">targetversion</a> = <a class="var it25492" onMouseOver="hilite(25492)" onMouseOut="lolite()" onClick="logVariable('targetversion')" href="../_variables/targetversion.html">$targetversion</a>;
<a name="l1359"><span class="linenum">1359</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/info.html">info</a>          = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>;
<a name="l1360"><span class="linenum">1360</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('details')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/details.html">details</a>       = <a class="var it1294" onMouseOver="hilite(1294)" onMouseOut="lolite()" onClick="logVariable('details')" href="../_variables/details.html">$details</a>;
<a name="l1361"><span class="linenum">1361</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('backtrace')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/backtrace.html">backtrace</a>     = <a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>;
<a name="l1362"><span class="linenum">1362</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>        = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1363"><span class="linenum">1363</span></a>      <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1364"><span class="linenum">1364</span></a>      try {
<a name="l1365"><span class="linenum">1365</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('upgrade_log', <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>);
<a name="l1366"><span class="linenum">1366</span></a>      } catch (Exception <a class="var it2583" onMouseOver="hilite(2583)" onMouseOut="lolite()" onClick="logVariable('ignored')" href="../_variables/ignored.html">$ignored</a>) {
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">        // possible during install or 2.0 upgrade</span>
<a name="l1368"><span class="linenum">1368</span></a>      }
<a name="l1369"><span class="linenum">1369</span></a>  }
<a name="l1370"><span class="linenum">1370</span></a>  
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">/**</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment"> * Marks start of upgrade, blocks any other access to site.</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment"> * The upgrade is finished at the end of script or after timeout.</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment"> *</span>
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment"> * @global object</span>
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment"> * @global object</span>
<a name="l1377"><span class="linenum">1377</span></a>  <span class="comment"> * @global object</span>
<a name="l1378"><span class="linenum">1378</span></a>  <span class="comment"> */</span>
<a name="l1379"><span class="linenum">1379</span></a>  function <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>(<a class="var it25493" onMouseOver="hilite(25493)" onMouseOut="lolite()" onClick="logVariable('preinstall')" href="../_variables/preinstall.html">$preinstall</a>=false) {
<a name="l1380"><span class="linenum">1380</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>      static <a class="var it25494" onMouseOver="hilite(25494)" onMouseOut="lolite()" onClick="logVariable('started')" href="../_variables/started.html">$started</a> = false;
<a name="l1383"><span class="linenum">1383</span></a>  
<a name="l1384"><span class="linenum">1384</span></a>      if (<a class="var it25493" onMouseOver="hilite(25493)" onMouseOut="lolite()" onClick="logVariable('preinstall')" href="../_variables/preinstall.html">$preinstall</a>) {
<a name="l1385"><span class="linenum">1385</span></a>          <a class="phpfunction" onClick="logFunction('ignore_user_abort')" href="../_functions/ignore_user_abort.html" onMouseOver="phpfuncPopup(event,'ignore_user_abort')">ignore_user_abort</a>(true);
<a name="l1386"><span class="linenum">1386</span></a>          <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(true);
<a name="l1387"><span class="linenum">1387</span></a>  
<a name="l1388"><span class="linenum">1388</span></a>      } else if (<a class="var it25494" onMouseOver="hilite(25494)" onMouseOut="lolite()" onClick="logVariable('started')" href="../_variables/started.html">$started</a>) {
<a name="l1389"><span class="linenum">1389</span></a>          <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>(120);
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>      } else {
<a name="l1392"><span class="linenum">1392</span></a>          if (!<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a> and !<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('headerprinted')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/headerprinted.html">headerprinted</a>) {
<a name="l1393"><span class="linenum">1393</span></a>              <a class="var it25495" onMouseOver="hilite(25495)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>  = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('upgradingversion', 'admin');
<a name="l1394"><span class="linenum">1394</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('maintenance');
<a name="l1395"><span class="linenum">1395</span></a>              <a class="function" onClick="logFunction('upgrade_init_javascript')" href="../_functions/upgrade_init_javascript.html" onMouseOver="funcPopup(event,'upgrade_init_javascript')">upgrade_init_javascript</a>();
<a name="l1396"><span class="linenum">1396</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it25495" onMouseOver="hilite(25495)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>.' - Moodle '.<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a>);
<a name="l1397"><span class="linenum">1397</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it25495" onMouseOver="hilite(25495)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>);
<a name="l1398"><span class="linenum">1398</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it25495" onMouseOver="hilite(25495)" onMouseOut="lolite()" onClick="logVariable('strupgrade')" href="../_variables/strupgrade.html">$strupgrade</a>);
<a name="l1399"><span class="linenum">1399</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l1400"><span class="linenum">1400</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1401"><span class="linenum">1401</span></a>          }
<a name="l1402"><span class="linenum">1402</span></a>  
<a name="l1403"><span class="linenum">1403</span></a>          <a class="phpfunction" onClick="logFunction('ignore_user_abort')" href="../_functions/ignore_user_abort.html" onMouseOver="phpfuncPopup(event,'ignore_user_abort')">ignore_user_abort</a>(true);
<a name="l1404"><span class="linenum">1404</span></a>          <a class="class" onClick="logClass('core_shutdown_manager')" href="../_classes/core_shutdown_manager.html" onMouseOver="classPopup(event,'core_shutdown_manager')">core_shutdown_manager</a>::<a class="function" onClick="logFunction('register_function')" href="../_functions/register_function.html" onMouseOver="funcPopup(event,'register_function')">register_function</a>('upgrade_finished_handler');
<a name="l1405"><span class="linenum">1405</span></a>          <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(true);
<a name="l1406"><span class="linenum">1406</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('upgraderunning', <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()+300);
<a name="l1407"><span class="linenum">1407</span></a>          <a class="var it25494" onMouseOver="hilite(25494)" onMouseOut="lolite()" onClick="logVariable('started')" href="../_variables/started.html">$started</a> = true;
<a name="l1408"><span class="linenum">1408</span></a>      }
<a name="l1409"><span class="linenum">1409</span></a>  }
<a name="l1410"><span class="linenum">1410</span></a>  
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">/**</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment"> * Internal function - executed if upgrade interrupted.</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> */</span>
<a name="l1414"><span class="linenum">1414</span></a>  function <a class="function" onClick="logFunction('upgrade_finished_handler')" href="../_functions/upgrade_finished_handler.html" onMouseOver="funcPopup(event,'upgrade_finished_handler')">upgrade_finished_handler</a>() {
<a name="l1415"><span class="linenum">1415</span></a>      <a class="function" onClick="logFunction('upgrade_finished')" href="../_functions/upgrade_finished.html" onMouseOver="funcPopup(event,'upgrade_finished')">upgrade_finished</a>();
<a name="l1416"><span class="linenum">1416</span></a>  }
<a name="l1417"><span class="linenum">1417</span></a>  
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment">/**</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment"> * Indicates upgrade is finished.</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment"> *</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment"> * This function may be called repeatedly.</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment"> *</span>
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment"> * @global object</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment"> * @global object</span>
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment"> */</span>
<a name="l1426"><span class="linenum">1426</span></a>  function <a class="function" onClick="logFunction('upgrade_finished')" href="../_functions/upgrade_finished.html" onMouseOver="funcPopup(event,'upgrade_finished')">upgrade_finished</a>(<a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('continueurl')" href="../_variables/continueurl.html">$continueurl</a>=null) {
<a name="l1427"><span class="linenum">1427</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>)) {
<a name="l1430"><span class="linenum">1430</span></a>          <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('upgraderunning');
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">        // We have to forcefully purge the caches using the writer here.</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">        // This has to be done after we unset the config var. If someone hits the site while this is set they will</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment">        // cause the config values to propogate to the caches.</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">        // Caches are purged after the last step in an upgrade but there is several code routines that exceute between</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment">        // then and now that leaving a window for things to fall out of sync.</span>
<a name="l1436"><span class="linenum">1436</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1437"><span class="linenum">1437</span></a>          <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(false);
<a name="l1438"><span class="linenum">1438</span></a>          <a class="phpfunction" onClick="logFunction('ignore_user_abort')" href="../_functions/ignore_user_abort.html" onMouseOver="phpfuncPopup(event,'ignore_user_abort')">ignore_user_abort</a>(false);
<a name="l1439"><span class="linenum">1439</span></a>          if (<a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('continueurl')" href="../_variables/continueurl.html">$continueurl</a>) {
<a name="l1440"><span class="linenum">1440</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('continue_button')" href="../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(<a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('continueurl')" href="../_variables/continueurl.html">$continueurl</a>);
<a name="l1441"><span class="linenum">1441</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1442"><span class="linenum">1442</span></a>              die;
<a name="l1443"><span class="linenum">1443</span></a>          }
<a name="l1444"><span class="linenum">1444</span></a>      }
<a name="l1445"><span class="linenum">1445</span></a>  }
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment">/**</span>
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment"> * @global object</span>
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment"> * @global object</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment"> */</span>
<a name="l1451"><span class="linenum">1451</span></a>  function <a class="function" onClick="logFunction('upgrade_setup_debug')" href="../_functions/upgrade_setup_debug.html" onMouseOver="funcPopup(event,'upgrade_setup_debug')">upgrade_setup_debug</a>(<a class="var it25496" onMouseOver="hilite(25496)" onMouseOut="lolite()" onClick="logVariable('starting')" href="../_variables/starting.html">$starting</a>) {
<a name="l1452"><span class="linenum">1452</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1453"><span class="linenum">1453</span></a>  
<a name="l1454"><span class="linenum">1454</span></a>      static <a class="var it25497" onMouseOver="hilite(25497)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a> = null;
<a name="l1455"><span class="linenum">1455</span></a>  
<a name="l1456"><span class="linenum">1456</span></a>      if (<a class="var it25496" onMouseOver="hilite(25496)" onMouseOut="lolite()" onClick="logVariable('starting')" href="../_variables/starting.html">$starting</a>) {
<a name="l1457"><span class="linenum">1457</span></a>          if (<a class="var it25497" onMouseOver="hilite(25497)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a> === null) {
<a name="l1458"><span class="linenum">1458</span></a>              <a class="var it25497" onMouseOver="hilite(25497)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_debug')" href="../_functions/get_debug.html" onMouseOver="funcPopup(event,'get_debug')">get_debug</a>();
<a name="l1459"><span class="linenum">1459</span></a>          }
<a name="l1460"><span class="linenum">1460</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgradeshowsql')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/upgradeshowsql.html">upgradeshowsql</a>)) {
<a name="l1461"><span class="linenum">1461</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_debug')" href="../_functions/set_debug.html" onMouseOver="funcPopup(event,'set_debug')">set_debug</a>(true);
<a name="l1462"><span class="linenum">1462</span></a>          }
<a name="l1463"><span class="linenum">1463</span></a>      } else {
<a name="l1464"><span class="linenum">1464</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_debug')" href="../_functions/set_debug.html" onMouseOver="funcPopup(event,'set_debug')">set_debug</a>(<a class="var it25497" onMouseOver="hilite(25497)" onMouseOut="lolite()" onClick="logVariable('originaldebug')" href="../_variables/originaldebug.html">$originaldebug</a>);
<a name="l1465"><span class="linenum">1465</span></a>      }
<a name="l1466"><span class="linenum">1466</span></a>  }
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>  function <a class="function" onClick="logFunction('print_upgrade_separator')" href="../_functions/print_upgrade_separator.html" onMouseOver="funcPopup(event,'print_upgrade_separator')">print_upgrade_separator</a>() {
<a name="l1469"><span class="linenum">1469</span></a>      if (!<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l1470"><span class="linenum">1470</span></a>          echo '&lt;hr /&gt;';
<a name="l1471"><span class="linenum">1471</span></a>      }
<a name="l1472"><span class="linenum">1472</span></a>  }
<a name="l1473"><span class="linenum">1473</span></a>  
<a name="l1474"><span class="linenum">1474</span></a>  <span class="comment">/**</span>
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment"> * Default start upgrade callback</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment"> * @param string $plugin</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment"> * @param bool $installation true if installation, false means upgrade</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment"> */</span>
<a name="l1479"><span class="linenum">1479</span></a>  function <a class="function" onClick="logFunction('print_upgrade_part_start')" href="../_functions/print_upgrade_part_start.html" onMouseOver="funcPopup(event,'print_upgrade_part_start')">print_upgrade_part_start</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it25499" onMouseOver="hilite(25499)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1480"><span class="linenum">1480</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1481"><span class="linenum">1481</span></a>      if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1482"><span class="linenum">1482</span></a>          <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>(<a class="var it25499" onMouseOver="hilite(25499)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>); <span class="comment">// does not store upgrade running flag yet</span>
<a name="l1483"><span class="linenum">1483</span></a>          if (<a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1484"><span class="linenum">1484</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coresystem'));
<a name="l1485"><span class="linenum">1485</span></a>          }
<a name="l1486"><span class="linenum">1486</span></a>      } else {
<a name="l1487"><span class="linenum">1487</span></a>          <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>();
<a name="l1488"><span class="linenum">1488</span></a>          if (<a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1489"><span class="linenum">1489</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1490"><span class="linenum">1490</span></a>          }
<a name="l1491"><span class="linenum">1491</span></a>      }
<a name="l1492"><span class="linenum">1492</span></a>      if (<a class="var it25499" onMouseOver="hilite(25499)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>) {
<a name="l1493"><span class="linenum">1493</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1494"><span class="linenum">1494</span></a>  <span class="comment">            // no need to log - log table not yet there ;-)</span>
<a name="l1495"><span class="linenum">1495</span></a>          } else {
<a name="l1496"><span class="linenum">1496</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Starting plugin installation');
<a name="l1497"><span class="linenum">1497</span></a>          }
<a name="l1498"><span class="linenum">1498</span></a>      } else {
<a name="l1499"><span class="linenum">1499</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1500"><span class="linenum">1500</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Starting core upgrade');
<a name="l1501"><span class="linenum">1501</span></a>          } else {
<a name="l1502"><span class="linenum">1502</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Starting plugin upgrade');
<a name="l1503"><span class="linenum">1503</span></a>          }
<a name="l1504"><span class="linenum">1504</span></a>      }
<a name="l1505"><span class="linenum">1505</span></a>  }
<a name="l1506"><span class="linenum">1506</span></a>  
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">/**</span>
<a name="l1508"><span class="linenum">1508</span></a>  <span class="comment"> * Default end upgrade callback</span>
<a name="l1509"><span class="linenum">1509</span></a>  <span class="comment"> * @param string $plugin</span>
<a name="l1510"><span class="linenum">1510</span></a>  <span class="comment"> * @param bool $installation true if installation, false means upgrade</span>
<a name="l1511"><span class="linenum">1511</span></a>  <span class="comment"> */</span>
<a name="l1512"><span class="linenum">1512</span></a>  function <a class="function" onClick="logFunction('print_upgrade_part_end')" href="../_functions/print_upgrade_part_end.html" onMouseOver="funcPopup(event,'print_upgrade_part_end')">print_upgrade_part_end</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it25499" onMouseOver="hilite(25499)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1513"><span class="linenum">1513</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1514"><span class="linenum">1514</span></a>      <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>();
<a name="l1515"><span class="linenum">1515</span></a>      if (<a class="var it25499" onMouseOver="hilite(25499)" onMouseOut="lolite()" onClick="logVariable('installation')" href="../_variables/installation.html">$installation</a>) {
<a name="l1516"><span class="linenum">1516</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1517"><span class="linenum">1517</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Core installed');
<a name="l1518"><span class="linenum">1518</span></a>          } else {
<a name="l1519"><span class="linenum">1519</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Plugin installed');
<a name="l1520"><span class="linenum">1520</span></a>          }
<a name="l1521"><span class="linenum">1521</span></a>      } else {
<a name="l1522"><span class="linenum">1522</span></a>          if (empty(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) or <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> == 'moodle') {
<a name="l1523"><span class="linenum">1523</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Core upgraded');
<a name="l1524"><span class="linenum">1524</span></a>          } else {
<a name="l1525"><span class="linenum">1525</span></a>              <a class="function" onClick="logFunction('upgrade_log')" href="../_functions/upgrade_log.html" onMouseOver="funcPopup(event,'upgrade_log')">upgrade_log</a>(<a class="constant" onClick="logConstant('UPGRADE_LOG_NORMAL')" href="../_constants/UPGRADE_LOG_NORMAL.html" onMouseOver="constPopup(event,'UPGRADE_LOG_NORMAL')">UPGRADE_LOG_NORMAL</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'Plugin upgraded');
<a name="l1526"><span class="linenum">1526</span></a>          }
<a name="l1527"><span class="linenum">1527</span></a>      }
<a name="l1528"><span class="linenum">1528</span></a>      if (<a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1529"><span class="linenum">1529</span></a>          <a class="var it2407" onMouseOver="hilite(2407)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../_variables/notification.html">$notification</a> = new \core\output\<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('success'), \core\output\<a class="class" onClick="logClass('notification')" href="../_classes/notification.html" onMouseOver="classPopup(event,'notification')">notification</a>::NOTIFY_SUCCESS);
<a name="l1530"><span class="linenum">1530</span></a>          <a class="var it2407" onMouseOver="hilite(2407)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../_variables/notification.html">$notification</a>-&gt;<a class="function" onClick="logFunction('set_show_closebutton')" href="../_functions/set_show_closebutton.html" onMouseOver="funcPopup(event,'set_show_closebutton')">set_show_closebutton</a>(false);
<a name="l1531"><span class="linenum">1531</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render')" href="../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it2407" onMouseOver="hilite(2407)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../_variables/notification.html">$notification</a>);
<a name="l1532"><span class="linenum">1532</span></a>          <a class="function" onClick="logFunction('print_upgrade_separator')" href="../_functions/print_upgrade_separator.html" onMouseOver="funcPopup(event,'print_upgrade_separator')">print_upgrade_separator</a>();
<a name="l1533"><span class="linenum">1533</span></a>      }
<a name="l1534"><span class="linenum">1534</span></a>  }
<a name="l1535"><span class="linenum">1535</span></a>  
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment">/**</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment"> * Sets up JS code required for all upgrade scripts.</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment"> * @global object</span>
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment"> */</span>
<a name="l1540"><span class="linenum">1540</span></a>  function <a class="function" onClick="logFunction('upgrade_init_javascript')" href="../_functions/upgrade_init_javascript.html" onMouseOver="funcPopup(event,'upgrade_init_javascript')">upgrade_init_javascript</a>() {
<a name="l1541"><span class="linenum">1541</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment">    // scroll to the end of each upgrade page so that ppl see either error or continue button,</span>
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment">    // no need to scroll continuously any more, it is enough to jump to end once the footer is printed ;-)</span>
<a name="l1544"><span class="linenum">1544</span></a>      <a class="var it4932" onMouseOver="hilite(4932)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a> = &quot;window.scrollTo(0, 5000000);&quot;;
<a name="l1545"><span class="linenum">1545</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_code')" href="../_functions/js_init_code.html" onMouseOver="funcPopup(event,'js_init_code')">js_init_code</a>(<a class="var it4932" onMouseOver="hilite(4932)" onMouseOut="lolite()" onClick="logVariable('js')" href="../_variables/js.html">$js</a>);
<a name="l1546"><span class="linenum">1546</span></a>  }
<a name="l1547"><span class="linenum">1547</span></a>  
<a name="l1548"><span class="linenum">1548</span></a>  <span class="comment">/**</span>
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment"> * Try to upgrade the given language pack (or current language)</span>
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment"> *</span>
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment"> * @param string $lang the code of the language to update, defaults to the current language</span>
<a name="l1552"><span class="linenum">1552</span></a>  <span class="comment"> */</span>
<a name="l1553"><span class="linenum">1553</span></a>  function <a class="function" onClick="logFunction('upgrade_language_pack')" href="../_functions/upgrade_language_pack.html" onMouseOver="funcPopup(event,'upgrade_language_pack')">upgrade_language_pack</a>(<a class="var it372" onMouseOver="hilite(372)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a> = null) {
<a name="l1554"><span class="linenum">1554</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1555"><span class="linenum">1555</span></a>  
<a name="l1556"><span class="linenum">1556</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('skiplangupgrade')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/skiplangupgrade.html">skiplangupgrade</a>)) {
<a name="l1557"><span class="linenum">1557</span></a>          return;
<a name="l1558"><span class="linenum">1558</span></a>      }
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/tool/langimport/lib.php&quot;)) {
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment">        // weird, somebody uninstalled the import utility</span>
<a name="l1562"><span class="linenum">1562</span></a>          return;
<a name="l1563"><span class="linenum">1563</span></a>      }
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>      if (!<a class="var it372" onMouseOver="hilite(372)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a>) {
<a name="l1566"><span class="linenum">1566</span></a>          <a class="var it372" onMouseOver="hilite(372)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a> = <a class="function" onClick="logFunction('current_language')" href="../_functions/current_language.html" onMouseOver="funcPopup(event,'current_language')">current_language</a>();
<a name="l1567"><span class="linenum">1567</span></a>      }
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>      if (!<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('translation_exists')" href="../_functions/translation_exists.html" onMouseOver="funcPopup(event,'translation_exists')">translation_exists</a>(<a class="var it372" onMouseOver="hilite(372)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a>)) {
<a name="l1570"><span class="linenum">1570</span></a>          return;
<a name="l1571"><span class="linenum">1571</span></a>      }
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>      <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l1574"><span class="linenum">1574</span></a>  
<a name="l1575"><span class="linenum">1575</span></a>      if (<a class="var it372" onMouseOver="hilite(372)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a> === 'en') {
<a name="l1576"><span class="linenum">1576</span></a>          return;  <span class="comment">// Nothing to do</span>
<a name="l1577"><span class="linenum">1577</span></a>      }
<a name="l1578"><span class="linenum">1578</span></a>  
<a name="l1579"><span class="linenum">1579</span></a>      <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>(false);
<a name="l1580"><span class="linenum">1580</span></a>  
<a name="l1581"><span class="linenum">1581</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/tool/langimport/lib.php&quot;);
<a name="l1582"><span class="linenum">1582</span></a>      <a class="function" onClick="logFunction('tool_langimport_preupgrade_update')" href="../_functions/tool_langimport_preupgrade_update.html" onMouseOver="funcPopup(event,'tool_langimport_preupgrade_update')">tool_langimport_preupgrade_update</a>(<a class="var it372" onMouseOver="hilite(372)" onMouseOut="lolite()" onClick="logVariable('lang')" href="../_variables/lang.html">$lang</a>);
<a name="l1583"><span class="linenum">1583</span></a>  
<a name="l1584"><span class="linenum">1584</span></a>      <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l1585"><span class="linenum">1585</span></a>  
<a name="l1586"><span class="linenum">1586</span></a>      <a class="function" onClick="logFunction('print_upgrade_separator')" href="../_functions/print_upgrade_separator.html" onMouseOver="funcPopup(event,'print_upgrade_separator')">print_upgrade_separator</a>();
<a name="l1587"><span class="linenum">1587</span></a>  }
<a name="l1588"><span class="linenum">1588</span></a>  
<a name="l1589"><span class="linenum">1589</span></a>  <span class="comment">/**</span>
<a name="l1590"><span class="linenum">1590</span></a>  <span class="comment"> * Install core moodle tables and initialize</span>
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment"> * @param float $version target version</span>
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment"> * @param bool $verbose</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment"> * @return void, may throw exception</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment"> */</span>
<a name="l1595"><span class="linenum">1595</span></a>  function <a class="function" onClick="logFunction('install_core')" href="../_functions/install_core.html" onMouseOver="funcPopup(event,'install_core')">install_core</a>(<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1596"><span class="linenum">1596</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1597"><span class="linenum">1597</span></a>  
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">    // We can not call purge_all_caches() yet, make sure the temp and cache dirs exist and are empty.</span>
<a name="l1599"><span class="linenum">1599</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('cachedir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/cachedir.html">cachedir</a>.'', true);
<a name="l1600"><span class="linenum">1600</span></a>      <a class="function" onClick="logFunction('make_cache_directory')" href="../_functions/make_cache_directory.html" onMouseOver="funcPopup(event,'make_cache_directory')">make_cache_directory</a>('', true);
<a name="l1601"><span class="linenum">1601</span></a>  
<a name="l1602"><span class="linenum">1602</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('localcachedir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/localcachedir.html">localcachedir</a>.'', true);
<a name="l1603"><span class="linenum">1603</span></a>      <a class="function" onClick="logFunction('make_localcache_directory')" href="../_functions/make_localcache_directory.html" onMouseOver="funcPopup(event,'make_localcache_directory')">make_localcache_directory</a>('', true);
<a name="l1604"><span class="linenum">1604</span></a>  
<a name="l1605"><span class="linenum">1605</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/tempdir.html">tempdir</a>.'', true);
<a name="l1606"><span class="linenum">1606</span></a>      <a class="function" onClick="logFunction('make_temp_directory')" href="../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>('', true);
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>      <a class="function" onClick="logFunction('remove_dir')" href="../_functions/remove_dir.html" onMouseOver="funcPopup(event,'remove_dir')">remove_dir</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dataroot.html">dataroot</a>.'/muc', true);
<a name="l1609"><span class="linenum">1609</span></a>      <a class="function" onClick="logFunction('make_writable_directory')" href="../_functions/make_writable_directory.html" onMouseOver="funcPopup(event,'make_writable_directory')">make_writable_directory</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dataroot.html">dataroot</a>.'/muc', true);
<a name="l1610"><span class="linenum">1610</span></a>  
<a name="l1611"><span class="linenum">1611</span></a>      try {
<a name="l1612"><span class="linenum">1612</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(600);
<a name="l1613"><span class="linenum">1613</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_start')" href="../_functions/print_upgrade_part_start.html" onMouseOver="funcPopup(event,'print_upgrade_part_start')">print_upgrade_part_start</a>('moodle', true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>); <span class="comment">// does not store upgrade running flag</span>
<a name="l1614"><span class="linenum">1614</span></a>  
<a name="l1615"><span class="linenum">1615</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('install_from_xmldb_file')" href="../_functions/install_from_xmldb_file.html" onMouseOver="funcPopup(event,'install_from_xmldb_file')">install_from_xmldb_file</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/db/install.xml&quot;);
<a name="l1616"><span class="linenum">1616</span></a>          <a class="function" onClick="logFunction('upgrade_started')" href="../_functions/upgrade_started.html" onMouseOver="funcPopup(event,'upgrade_started')">upgrade_started</a>();     <span class="comment">// we want the flag to be stored in config table ;-)</span>
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">        // set all core default records and default settings</span>
<a name="l1619"><span class="linenum">1619</span></a>          require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/db/install.php&quot;);
<a name="l1620"><span class="linenum">1620</span></a>          <a class="function" onClick="logFunction('xmldb_main_install')" href="../_functions/xmldb_main_install.html" onMouseOver="funcPopup(event,'xmldb_main_install')">xmldb_main_install</a>(); <span class="comment">// installs the capabilities too</span>
<a name="l1621"><span class="linenum">1621</span></a>  
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">        // store version</span>
<a name="l1623"><span class="linenum">1623</span></a>          <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>(true, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, false);
<a name="l1624"><span class="linenum">1624</span></a>  
<a name="l1625"><span class="linenum">1625</span></a>  <span class="comment">        // Continue with the installation</span>
<a name="l1626"><span class="linenum">1626</span></a>          <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>('moodle');
<a name="l1627"><span class="linenum">1627</span></a>          <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>('moodle');
<a name="l1628"><span class="linenum">1628</span></a>          <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>('moodle');
<a name="l1629"><span class="linenum">1629</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>('moodle');
<a name="l1630"><span class="linenum">1630</span></a>          <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>('moodle');
<a name="l1631"><span class="linenum">1631</span></a>          \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>('moodle');
<a name="l1632"><span class="linenum">1632</span></a>          <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>('moodle');
<a name="l1633"><span class="linenum">1633</span></a>  
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">        // Write default settings unconditionally</span>
<a name="l1635"><span class="linenum">1635</span></a>          <a class="function" onClick="logFunction('admin_apply_default_settings')" href="../_functions/admin_apply_default_settings.html" onMouseOver="funcPopup(event,'admin_apply_default_settings')">admin_apply_default_settings</a>(NULL, true);
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_end')" href="../_functions/print_upgrade_part_end.html" onMouseOver="funcPopup(event,'print_upgrade_part_end')">print_upgrade_part_end</a>(null, true, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1638"><span class="linenum">1638</span></a>  
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">        // Purge all caches. They're disabled but this ensures that we don't have any persistent data just in case something</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">        // during installation didn't use APIs.</span>
<a name="l1641"><span class="linenum">1641</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>();
<a name="l1642"><span class="linenum">1642</span></a>      } catch (exception <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1643"><span class="linenum">1643</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1644"><span class="linenum">1644</span></a>      } catch (Throwable <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment">        // Engine errors in PHP7 throw exceptions of type Throwable (this &quot;catch&quot; will be ignored in PHP5).</span>
<a name="l1646"><span class="linenum">1646</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1647"><span class="linenum">1647</span></a>      }
<a name="l1648"><span class="linenum">1648</span></a>  }
<a name="l1649"><span class="linenum">1649</span></a>  
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment">/**</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment"> * Upgrade moodle core</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment"> * @param float $version target version</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment"> * @param bool $verbose</span>
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment"> * @return void, may throw exception</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment"> */</span>
<a name="l1656"><span class="linenum">1656</span></a>  function <a class="function" onClick="logFunction('upgrade_core')" href="../_functions/upgrade_core.html" onMouseOver="funcPopup(event,'upgrade_core')">upgrade_core</a>(<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1657"><span class="linenum">1657</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>;
<a name="l1658"><span class="linenum">1658</span></a>  
<a name="l1659"><span class="linenum">1659</span></a>      <a class="function" onClick="logFunction('raise_memory_limit')" href="../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l1660"><span class="linenum">1660</span></a>  
<a name="l1661"><span class="linenum">1661</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/db/upgrade.php');    <span class="comment">// Defines upgrades</span>
<a name="l1662"><span class="linenum">1662</span></a>  
<a name="l1663"><span class="linenum">1663</span></a>      try {
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment">        // Reset caches before any output.</span>
<a name="l1665"><span class="linenum">1665</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1666"><span class="linenum">1666</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1667"><span class="linenum">1667</span></a>  
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment">        // Upgrade current language pack if we can</span>
<a name="l1669"><span class="linenum">1669</span></a>          <a class="function" onClick="logFunction('upgrade_language_pack')" href="../_functions/upgrade_language_pack.html" onMouseOver="funcPopup(event,'upgrade_language_pack')">upgrade_language_pack</a>();
<a name="l1670"><span class="linenum">1670</span></a>  
<a name="l1671"><span class="linenum">1671</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_start')" href="../_functions/print_upgrade_part_start.html" onMouseOver="funcPopup(event,'print_upgrade_part_start')">print_upgrade_part_start</a>('moodle', false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1672"><span class="linenum">1672</span></a>  
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">        // Pre-upgrade scripts for local hack workarounds.</span>
<a name="l1674"><span class="linenum">1674</span></a>          <a class="var it25500" onMouseOver="hilite(25500)" onMouseOut="lolite()" onClick="logVariable('preupgradefile')" href="../_variables/preupgradefile.html">$preupgradefile</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/local/preupgrade.php&quot;;
<a name="l1675"><span class="linenum">1675</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it25500" onMouseOver="hilite(25500)" onMouseOut="lolite()" onClick="logVariable('preupgradefile')" href="../_variables/preupgradefile.html">$preupgradefile</a>)) {
<a name="l1676"><span class="linenum">1676</span></a>              <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l1677"><span class="linenum">1677</span></a>              <a class="function" onClick="logFunction('require')" href="../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(<a class="var it25500" onMouseOver="hilite(25500)" onMouseOut="lolite()" onClick="logVariable('preupgradefile')" href="../_variables/preupgradefile.html">$preupgradefile</a>);
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">            // Reset upgrade timeout to default.</span>
<a name="l1679"><span class="linenum">1679</span></a>              <a class="function" onClick="logFunction('upgrade_set_timeout')" href="../_functions/upgrade_set_timeout.html" onMouseOver="funcPopup(event,'upgrade_set_timeout')">upgrade_set_timeout</a>();
<a name="l1680"><span class="linenum">1680</span></a>          }
<a name="l1681"><span class="linenum">1681</span></a>  
<a name="l1682"><span class="linenum">1682</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('xmldb_main_upgrade')" href="../_functions/xmldb_main_upgrade.html" onMouseOver="funcPopup(event,'xmldb_main_upgrade')">xmldb_main_upgrade</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>);
<a name="l1683"><span class="linenum">1683</span></a>          if (<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> &gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l1684"><span class="linenum">1684</span></a>  <span class="comment">            // store version if not already there</span>
<a name="l1685"><span class="linenum">1685</span></a>              <a class="function" onClick="logFunction('upgrade_main_savepoint')" href="../_functions/upgrade_main_savepoint.html" onMouseOver="funcPopup(event,'upgrade_main_savepoint')">upgrade_main_savepoint</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, false);
<a name="l1686"><span class="linenum">1686</span></a>          }
<a name="l1687"><span class="linenum">1687</span></a>  
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment">        // In case structure of 'course' table has been changed and we forgot to update $SITE, re-read it from db.</span>
<a name="l1689"><span class="linenum">1689</span></a>          <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1690"><span class="linenum">1690</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1691"><span class="linenum">1691</span></a>  
<a name="l1692"><span class="linenum">1692</span></a>  <span class="comment">        // perform all other component upgrade routines</span>
<a name="l1693"><span class="linenum">1693</span></a>          <a class="function" onClick="logFunction('update_capabilities')" href="../_functions/update_capabilities.html" onMouseOver="funcPopup(event,'update_capabilities')">update_capabilities</a>('moodle');
<a name="l1694"><span class="linenum">1694</span></a>          <a class="function" onClick="logFunction('log_update_descriptions')" href="../_functions/log_update_descriptions.html" onMouseOver="funcPopup(event,'log_update_descriptions')">log_update_descriptions</a>('moodle');
<a name="l1695"><span class="linenum">1695</span></a>          <a class="function" onClick="logFunction('external_update_descriptions')" href="../_functions/external_update_descriptions.html" onMouseOver="funcPopup(event,'external_update_descriptions')">external_update_descriptions</a>('moodle');
<a name="l1696"><span class="linenum">1696</span></a>          <a class="function" onClick="logFunction('events_update_definition')" href="../_functions/events_update_definition.html" onMouseOver="funcPopup(event,'events_update_definition')">events_update_definition</a>('moodle');
<a name="l1697"><span class="linenum">1697</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>('moodle');
<a name="l1698"><span class="linenum">1698</span></a>          <a class="function" onClick="logFunction('message_update_providers')" href="../_functions/message_update_providers.html" onMouseOver="funcPopup(event,'message_update_providers')">message_update_providers</a>('moodle');
<a name="l1699"><span class="linenum">1699</span></a>          \core\message\inbound\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('update_handlers_for_component')" href="../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>('moodle');
<a name="l1700"><span class="linenum">1700</span></a>          <a class="class" onClick="logClass('core_tag_area')" href="../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('reset_definitions_for_component')" href="../_functions/reset_definitions_for_component.html" onMouseOver="funcPopup(event,'reset_definitions_for_component')">reset_definitions_for_component</a>('moodle');
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment">        // Update core definitions.</span>
<a name="l1702"><span class="linenum">1702</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('update_definitions')" href="../_functions/update_definitions.html" onMouseOver="funcPopup(event,'update_definitions')">update_definitions</a>(true);
<a name="l1703"><span class="linenum">1703</span></a>  
<a name="l1704"><span class="linenum">1704</span></a>  <span class="comment">        // Purge caches again, just to be sure we arn't holding onto old stuff now.</span>
<a name="l1705"><span class="linenum">1705</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1706"><span class="linenum">1706</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1707"><span class="linenum">1707</span></a>  
<a name="l1708"><span class="linenum">1708</span></a>  <span class="comment">        // Clean up contexts - more and more stuff depends on existence of paths and contexts</span>
<a name="l1709"><span class="linenum">1709</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('cleanup_instances')" href="../_functions/cleanup_instances.html" onMouseOver="funcPopup(event,'cleanup_instances')">cleanup_instances</a>();
<a name="l1710"><span class="linenum">1710</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('create_instances')" href="../_functions/create_instances.html" onMouseOver="funcPopup(event,'create_instances')">create_instances</a>(null, false);
<a name="l1711"><span class="linenum">1711</span></a>          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('build_all_paths')" href="../_functions/build_all_paths.html" onMouseOver="funcPopup(event,'build_all_paths')">build_all_paths</a>(false);
<a name="l1712"><span class="linenum">1712</span></a>          <a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1713"><span class="linenum">1713</span></a>          <a class="var it832" onMouseOver="hilite(832)" onMouseOut="lolite()" onClick="logVariable('syscontext')" href="../_variables/syscontext.html">$syscontext</a>-&gt;<a class="function" onClick="logFunction('mark_dirty')" href="../_functions/mark_dirty.html" onMouseOver="funcPopup(event,'mark_dirty')">mark_dirty</a>();
<a name="l1714"><span class="linenum">1714</span></a>  
<a name="l1715"><span class="linenum">1715</span></a>          <a class="function" onClick="logFunction('print_upgrade_part_end')" href="../_functions/print_upgrade_part_end.html" onMouseOver="funcPopup(event,'print_upgrade_part_end')">print_upgrade_part_end</a>('moodle', false, <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1716"><span class="linenum">1716</span></a>      } catch (Exception <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1717"><span class="linenum">1717</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1718"><span class="linenum">1718</span></a>      } catch (Throwable <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment">        // Engine errors in PHP7 throw exceptions of type Throwable (this &quot;catch&quot; will be ignored in PHP5).</span>
<a name="l1720"><span class="linenum">1720</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1721"><span class="linenum">1721</span></a>      }
<a name="l1722"><span class="linenum">1722</span></a>  }
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>  <span class="comment">/**</span>
<a name="l1725"><span class="linenum">1725</span></a>  <span class="comment"> * Upgrade/install other parts of moodle</span>
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment"> * @param bool $verbose</span>
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment"> * @return void, may throw exception</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment"> */</span>
<a name="l1729"><span class="linenum">1729</span></a>  function <a class="function" onClick="logFunction('upgrade_noncore')" href="../_functions/upgrade_noncore.html" onMouseOver="funcPopup(event,'upgrade_noncore')">upgrade_noncore</a>(<a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>) {
<a name="l1730"><span class="linenum">1730</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1731"><span class="linenum">1731</span></a>  
<a name="l1732"><span class="linenum">1732</span></a>      <a class="function" onClick="logFunction('raise_memory_limit')" href="../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l1733"><span class="linenum">1733</span></a>  
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment">    // upgrade all plugins types</span>
<a name="l1735"><span class="linenum">1735</span></a>      try {
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">        // Reset caches before any output.</span>
<a name="l1737"><span class="linenum">1737</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1738"><span class="linenum">1738</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>          <a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l1741"><span class="linenum">1741</span></a>          foreach (<a class="var it4803" onMouseOver="hilite(4803)" onMouseOut="lolite()" onClick="logVariable('plugintypes')" href="../_variables/plugintypes.html">$plugintypes</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=&gt;<a class="var it3200" onMouseOver="hilite(3200)" onMouseOut="lolite()" onClick="logVariable('location')" href="../_variables/location.html">$location</a>) {
<a name="l1742"><span class="linenum">1742</span></a>              <a class="function" onClick="logFunction('upgrade_plugins')" href="../_functions/upgrade_plugins.html" onMouseOver="funcPopup(event,'upgrade_plugins')">upgrade_plugins</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, 'print_upgrade_part_start', 'print_upgrade_part_end', <a class="var it3005" onMouseOver="hilite(3005)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../_variables/verbose.html">$verbose</a>);
<a name="l1743"><span class="linenum">1743</span></a>          }
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment">        // Upgrade services.</span>
<a name="l1745"><span class="linenum">1745</span></a>  <span class="comment">        // This function gives plugins and subsystems a chance to add functions to existing built-in services.</span>
<a name="l1746"><span class="linenum">1746</span></a>          <a class="function" onClick="logFunction('external_update_services')" href="../_functions/external_update_services.html" onMouseOver="funcPopup(event,'external_update_services')">external_update_services</a>();
<a name="l1747"><span class="linenum">1747</span></a>  
<a name="l1748"><span class="linenum">1748</span></a>  <span class="comment">        // Update cache definitions. Involves scanning each plugin for any changes.</span>
<a name="l1749"><span class="linenum">1749</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('update_definitions')" href="../_functions/update_definitions.html" onMouseOver="funcPopup(event,'update_definitions')">update_definitions</a>();
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment">        // Mark the site as upgraded.</span>
<a name="l1751"><span class="linenum">1751</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('allversionshash', <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_all_versions_hash')" href="../_functions/get_all_versions_hash.html" onMouseOver="funcPopup(event,'get_all_versions_hash')">get_all_versions_hash</a>());
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment">        // Purge caches again, just to be sure we arn't holding onto old stuff now.</span>
<a name="l1754"><span class="linenum">1754</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l1755"><span class="linenum">1755</span></a>          <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l1756"><span class="linenum">1756</span></a>  
<a name="l1757"><span class="linenum">1757</span></a>      } catch (Exception <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1758"><span class="linenum">1758</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1759"><span class="linenum">1759</span></a>      } catch (Throwable <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1760"><span class="linenum">1760</span></a>  <span class="comment">        // Engine errors in PHP7 throw exceptions of type Throwable (this &quot;catch&quot; will be ignored in PHP5).</span>
<a name="l1761"><span class="linenum">1761</span></a>          <a class="function" onClick="logFunction('upgrade_handle_exception')" href="../_functions/upgrade_handle_exception.html" onMouseOver="funcPopup(event,'upgrade_handle_exception')">upgrade_handle_exception</a>(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>);
<a name="l1762"><span class="linenum">1762</span></a>      }
<a name="l1763"><span class="linenum">1763</span></a>  }
<a name="l1764"><span class="linenum">1764</span></a>  
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">/**</span>
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment"> * Checks if the main tables have been installed yet or not.</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment"> *</span>
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment"> * Note: we can not use caches here because they might be stale,</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment"> *       use with care!</span>
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment"> *</span>
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment"> * @return bool</span>
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment"> */</span>
<a name="l1773"><span class="linenum">1773</span></a>  function <a class="function" onClick="logFunction('core_tables_exist')" href="../_functions/core_tables_exist.html" onMouseOver="funcPopup(event,'core_tables_exist')">core_tables_exist</a>() {
<a name="l1774"><span class="linenum">1774</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>      if (!<a class="var it1093" onMouseOver="hilite(1093)" onMouseOut="lolite()" onClick="logVariable('tables')" href="../_variables/tables.html">$tables</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_tables')" href="../_functions/get_tables.html" onMouseOver="funcPopup(event,'get_tables')">get_tables</a>(false) ) {    // No tables yet at all.
<a name="l1777"><span class="linenum">1777</span></a>          return false;
<a name="l1778"><span class="linenum">1778</span></a>  
<a name="l1779"><span class="linenum">1779</span></a>      } else {                                 // Check for missing main tables
<a name="l1780"><span class="linenum">1780</span></a>          <a class="var it25501" onMouseOver="hilite(25501)" onMouseOut="lolite()" onClick="logVariable('mtables')" href="../_variables/mtables.html">$mtables</a> = array('config', 'course', 'groupings'); <span class="comment">// some tables used in 1.9 and 2.0, preferable something from the start and end of install.xml</span>
<a name="l1781"><span class="linenum">1781</span></a>          foreach (<a class="var it25501" onMouseOver="hilite(25501)" onMouseOut="lolite()" onClick="logVariable('mtables')" href="../_variables/mtables.html">$mtables</a> as <a class="var it2544" onMouseOver="hilite(2544)" onMouseOut="lolite()" onClick="logVariable('mtable')" href="../_variables/mtable.html">$mtable</a>) {
<a name="l1782"><span class="linenum">1782</span></a>              if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2544" onMouseOver="hilite(2544)" onMouseOut="lolite()" onClick="logVariable('mtable')" href="../_variables/mtable.html">$mtable</a>, <a class="var it1093" onMouseOver="hilite(1093)" onMouseOut="lolite()" onClick="logVariable('tables')" href="../_variables/tables.html">$tables</a>)) {
<a name="l1783"><span class="linenum">1783</span></a>                  return false;
<a name="l1784"><span class="linenum">1784</span></a>              }
<a name="l1785"><span class="linenum">1785</span></a>          }
<a name="l1786"><span class="linenum">1786</span></a>          return true;
<a name="l1787"><span class="linenum">1787</span></a>      }
<a name="l1788"><span class="linenum">1788</span></a>  }
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment">/**</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment"> * upgrades the mnet rpc definitions for the given component.</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment"> * this method doesn't return status, an exception will be thrown in the case of an error</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment"> *</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment"> * @param string $component the plugin to upgrade, eg auth_mnet</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment"> */</span>
<a name="l1796"><span class="linenum">1796</span></a>  function <a class="function" onClick="logFunction('upgrade_plugin_mnet_functions')" href="../_functions/upgrade_plugin_mnet_functions.html" onMouseOver="funcPopup(event,'upgrade_plugin_mnet_functions')">upgrade_plugin_mnet_functions</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>) {
<a name="l1797"><span class="linenum">1797</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1798"><span class="linenum">1798</span></a>  
<a name="l1799"><span class="linenum">1799</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>) = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1800"><span class="linenum">1800</span></a>      <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_directory')" href="../_functions/get_plugin_directory.html" onMouseOver="funcPopup(event,'get_plugin_directory')">get_plugin_directory</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>);
<a name="l1801"><span class="linenum">1801</span></a>  
<a name="l1802"><span class="linenum">1802</span></a>      <a class="var it768" onMouseOver="hilite(768)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> = array();
<a name="l1803"><span class="linenum">1803</span></a>      <a class="var it769" onMouseOver="hilite(769)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a> = array();
<a name="l1804"><span class="linenum">1804</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/db/mnet.php')) {
<a name="l1805"><span class="linenum">1805</span></a>          require_once(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/db/mnet.php'); <span class="comment">// $publishes comes from this file</span>
<a name="l1806"><span class="linenum">1806</span></a>      }
<a name="l1807"><span class="linenum">1807</span></a>      if (empty(<a class="var it768" onMouseOver="hilite(768)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a>)) {
<a name="l1808"><span class="linenum">1808</span></a>          <a class="var it768" onMouseOver="hilite(768)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> = array(); <span class="comment">// still need this to be able to disable stuff later</span>
<a name="l1809"><span class="linenum">1809</span></a>      }
<a name="l1810"><span class="linenum">1810</span></a>      if (empty(<a class="var it769" onMouseOver="hilite(769)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a>)) {
<a name="l1811"><span class="linenum">1811</span></a>          <a class="var it769" onMouseOver="hilite(769)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a> = array(); <span class="comment">// still need this to be able to disable stuff later</span>
<a name="l1812"><span class="linenum">1812</span></a>      }
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>      static <a class="var it25502" onMouseOver="hilite(25502)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a> = array();
<a name="l1815"><span class="linenum">1815</span></a>  
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment">    // rekey an array based on the rpc method for easy lookups later</span>
<a name="l1817"><span class="linenum">1817</span></a>      <a class="var it25503" onMouseOver="hilite(25503)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a> = array();
<a name="l1818"><span class="linenum">1818</span></a>      <a class="var it25504" onMouseOver="hilite(25504)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a> = array();
<a name="l1819"><span class="linenum">1819</span></a>      foreach(<a class="var it768" onMouseOver="hilite(768)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> as <a class="var it19256" onMouseOver="hilite(19256)" onMouseOut="lolite()" onClick="logVariable('servicename')" href="../_variables/servicename.html">$servicename</a> =&gt; <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>) {
<a name="l1820"><span class="linenum">1820</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['methods'])) {
<a name="l1821"><span class="linenum">1821</span></a>              foreach(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['methods'] as <a class="var it559" onMouseOver="hilite(559)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../_variables/methodname.html">$methodname</a>) {
<a name="l1822"><span class="linenum">1822</span></a>                  <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename'] = <a class="var it19256" onMouseOver="hilite(19256)" onMouseOut="lolite()" onClick="logVariable('servicename')" href="../_variables/servicename.html">$servicename</a>;
<a name="l1823"><span class="linenum">1823</span></a>                  <a class="var it25503" onMouseOver="hilite(25503)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>[<a class="var it559" onMouseOver="hilite(559)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../_variables/methodname.html">$methodname</a>][] = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>;
<a name="l1824"><span class="linenum">1824</span></a>              }
<a name="l1825"><span class="linenum">1825</span></a>          }
<a name="l1826"><span class="linenum">1826</span></a>      }
<a name="l1827"><span class="linenum">1827</span></a>  
<a name="l1828"><span class="linenum">1828</span></a>  <span class="comment">    // Disable functions that don't exist (any more) in the source</span>
<a name="l1829"><span class="linenum">1829</span></a>  <span class="comment">    // Should these be deleted? What about their permissions records?</span>
<a name="l1830"><span class="linenum">1830</span></a>      foreach (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('mnet_rpc', array('pluginname'=&gt;<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'plugintype'=&gt;<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>), 'functionname ASC ') as <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>) {
<a name="l1831"><span class="linenum">1831</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it25503" onMouseOver="hilite(25503)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>) &amp;&amp; <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1832"><span class="linenum">1832</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_rpc', 'enabled', 0, array('id' =&gt; <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1833"><span class="linenum">1833</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it25503" onMouseOver="hilite(25503)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>) &amp;&amp; !<a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1834"><span class="linenum">1834</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_rpc', 'enabled', 1, array('id' =&gt; <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1835"><span class="linenum">1835</span></a>          }
<a name="l1836"><span class="linenum">1836</span></a>      }
<a name="l1837"><span class="linenum">1837</span></a>  
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment">    // reflect all the services we're publishing and save them</span>
<a name="l1839"><span class="linenum">1839</span></a>      static <a class="var it25506" onMouseOver="hilite(25506)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a> = array(); <span class="comment">// to store reflection information in</span>
<a name="l1840"><span class="linenum">1840</span></a>      foreach (<a class="var it768" onMouseOver="hilite(768)" onMouseOut="lolite()" onClick="logVariable('publishes')" href="../_variables/publishes.html">$publishes</a> as <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l1841"><span class="linenum">1841</span></a>          <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['filename'];
<a name="l1842"><span class="linenum">1842</span></a>          <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['classname'];
<a name="l1843"><span class="linenum">1843</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['methods'] as <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>) {
<a name="l1844"><span class="linenum">1844</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a> = new stdClass();
<a name="l1845"><span class="linenum">1845</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('plugintype')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/plugintype.html">plugintype</a>  = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1846"><span class="linenum">1846</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('pluginname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/pluginname.html">pluginname</a>  = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l1847"><span class="linenum">1847</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('enabled')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>     = 1;
<a name="l1848"><span class="linenum">1848</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>   = <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a>;
<a name="l1849"><span class="linenum">1849</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>    = <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>;
<a name="l1850"><span class="linenum">1850</span></a>  
<a name="l1851"><span class="linenum">1851</span></a>              if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>)) {
<a name="l1852"><span class="linenum">1852</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a> = <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>;
<a name="l1853"><span class="linenum">1853</span></a>  
<a name="l1854"><span class="linenum">1854</span></a>              } else if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>)) { // wants to override file or class
<a name="l1855"><span class="linenum">1855</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a> = <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>['method'];
<a name="l1856"><span class="linenum">1856</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>     = <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>['classname'];
<a name="l1857"><span class="linenum">1857</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>      = <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>['filename'];
<a name="l1858"><span class="linenum">1858</span></a>              }
<a name="l1859"><span class="linenum">1859</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('xmlrpcpath')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/xmlrpcpath.html">xmlrpcpath</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'/'.<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>.'/'.<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>.'/'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>;
<a name="l1860"><span class="linenum">1860</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('static')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/static.html">static</a> = false;
<a name="l1861"><span class="linenum">1861</span></a>  
<a name="l1862"><span class="linenum">1862</span></a>              require_once(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/' . <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>);
<a name="l1863"><span class="linenum">1863</span></a>              <a class="var it25508" onMouseOver="hilite(25508)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a> = null; <span class="comment">// slightly different ways to get this depending on whether it's a class method or a function</span>
<a name="l1864"><span class="linenum">1864</span></a>              if (!empty(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>)) {
<a name="l1865"><span class="linenum">1865</span></a>                  if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>)) {
<a name="l1866"><span class="linenum">1866</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installnosuchmethod', 'mnet', '', (object)array('method' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'class' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>));
<a name="l1867"><span class="linenum">1867</span></a>                  }
<a name="l1868"><span class="linenum">1868</span></a>                  <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a> . '|' . <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>;
<a name="l1869"><span class="linenum">1869</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it25506" onMouseOver="hilite(25506)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a>)) { // look to see if we've already got a reflection object
<a name="l1870"><span class="linenum">1870</span></a>                      try {
<a name="l1871"><span class="linenum">1871</span></a>                          <a class="var it25506" onMouseOver="hilite(25506)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = new ReflectionClass(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>);
<a name="l1872"><span class="linenum">1872</span></a>                      } catch (ReflectionException <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) { // catch these and rethrow them to something more helpful
<a name="l1873"><span class="linenum">1873</span></a>                          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installreflectionclasserror', 'mnet', '', (object)array('method' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'class' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>, 'error' =&gt; <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>()));
<a name="l1874"><span class="linenum">1874</span></a>                      }
<a name="l1875"><span class="linenum">1875</span></a>                  }
<a name="l1876"><span class="linenum">1876</span></a>                  <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> =&amp; <a class="var it25506" onMouseOver="hilite(25506)" onMouseOut="lolite()" onClick="logVariable('cachedclasses')" href="../_variables/cachedclasses.html">$cachedclasses</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l1877"><span class="linenum">1877</span></a>                  if (!<a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;hasMethod(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>)) {
<a name="l1878"><span class="linenum">1878</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installnosuchmethod', 'mnet', '', (object)array('method' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'class' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('classname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/classname.html">classname</a>));
<a name="l1879"><span class="linenum">1879</span></a>                  }
<a name="l1880"><span class="linenum">1880</span></a>                  <a class="var it25508" onMouseOver="hilite(25508)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a> = <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a class="function" onClick="logFunction('getMethod')" href="../_functions/getmethod.html" onMouseOver="funcPopup(event,'getmethod')">getMethod</a>(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>);
<a name="l1881"><span class="linenum">1881</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('static')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/static.html">static</a> = (int)<a class="var it25508" onMouseOver="hilite(25508)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a>-&gt;isStatic();
<a name="l1882"><span class="linenum">1882</span></a>              } else {
<a name="l1883"><span class="linenum">1883</span></a>                  if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>)) {
<a name="l1884"><span class="linenum">1884</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installnosuchfunction', 'mnet', '', (object)array('method' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, 'file' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>));
<a name="l1885"><span class="linenum">1885</span></a>                  }
<a name="l1886"><span class="linenum">1886</span></a>                  try {
<a name="l1887"><span class="linenum">1887</span></a>                      <a class="var it25508" onMouseOver="hilite(25508)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a> = new ReflectionFunction(<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>);
<a name="l1888"><span class="linenum">1888</span></a>                  } catch (ReflectionException <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) { // catch these and rethrow them to something more helpful
<a name="l1889"><span class="linenum">1889</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('installreflectionfunctionerror', 'mnet', '', (object)array('method' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, '' =&gt; <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('filename')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>, 'error' =&gt; <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>()));
<a name="l1890"><span class="linenum">1890</span></a>                  }
<a name="l1891"><span class="linenum">1891</span></a>              }
<a name="l1892"><span class="linenum">1892</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('profile')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/profile.html">profile</a> =  <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="function" onClick="logFunction('admin_mnet_method_profile')" href="../_functions/admin_mnet_method_profile.html" onMouseOver="funcPopup(event,'admin_mnet_method_profile')">admin_mnet_method_profile</a>(<a class="var it25508" onMouseOver="hilite(25508)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a>));
<a name="l1893"><span class="linenum">1893</span></a>              <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('help')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/help.html">help</a> = <a class="function" onClick="logFunction('admin_mnet_method_get_help')" href="../_functions/admin_mnet_method_get_help.html" onMouseOver="funcPopup(event,'admin_mnet_method_get_help')">admin_mnet_method_get_help</a>(<a class="var it25508" onMouseOver="hilite(25508)" onMouseOut="lolite()" onClick="logVariable('functionreflect')" href="../_variables/functionreflect.html">$functionreflect</a>);
<a name="l1894"><span class="linenum">1894</span></a>  
<a name="l1895"><span class="linenum">1895</span></a>              if (<a class="var it25509" onMouseOver="hilite(25509)" onMouseOut="lolite()" onClick="logVariable('record_exists')" href="../_variables/record_exists.html">$record_exists</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('mnet_rpc', array('xmlrpcpath'=&gt;<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('xmlrpcpath')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/xmlrpcpath.html">xmlrpcpath</a>))) {
<a name="l1896"><span class="linenum">1896</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/id.html">id</a>      = <a class="var it25509" onMouseOver="hilite(25509)" onMouseOut="lolite()" onClick="logVariable('record_exists')" href="../_variables/record_exists.html">$record_exists</a>-&gt;<a onClick="logVariable('id')" class="var it44364" onMouseOver="hilite(44364)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1897"><span class="linenum">1897</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('enabled')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a> = <a class="var it25509" onMouseOver="hilite(25509)" onMouseOut="lolite()" onClick="logVariable('record_exists')" href="../_variables/record_exists.html">$record_exists</a>-&gt;<a onClick="logVariable('enabled')" class="var it44364" onMouseOver="hilite(44364)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>;
<a name="l1898"><span class="linenum">1898</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('mnet_rpc', <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>);
<a name="l1899"><span class="linenum">1899</span></a>              } else {
<a name="l1900"><span class="linenum">1900</span></a>                  <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_rpc', <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>, true);
<a name="l1901"><span class="linenum">1901</span></a>              }
<a name="l1902"><span class="linenum">1902</span></a>  
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment">            // TODO this API versioning must be reworked, here the recently processed method</span>
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment">            // sets the service API which may not be correct</span>
<a name="l1905"><span class="linenum">1905</span></a>              foreach (<a class="var it25503" onMouseOver="hilite(25503)" onMouseOut="lolite()" onClick="logVariable('publishmethodservices')" href="../_variables/publishmethodservices.html">$publishmethodservices</a>[<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('functionname')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>] as <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>) {
<a name="l1906"><span class="linenum">1906</span></a>                  if (<a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('mnet_service', array('name'=&gt;<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename']))) {
<a name="l1907"><span class="linenum">1907</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('apiversion')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/apiversion.html">apiversion</a> = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['apiversion'];
<a name="l1908"><span class="linenum">1908</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('mnet_service', <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>);
<a name="l1909"><span class="linenum">1909</span></a>                  } else {
<a name="l1910"><span class="linenum">1910</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = new stdClass();
<a name="l1911"><span class="linenum">1911</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('name')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/name.html">name</a>        = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename'];
<a name="l1912"><span class="linenum">1912</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('description')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = empty(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['description']) ? '' : <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['description'];
<a name="l1913"><span class="linenum">1913</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('apiversion')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/apiversion.html">apiversion</a>  = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['apiversion'];
<a name="l1914"><span class="linenum">1914</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('offer')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/offer.html">offer</a>       = 1;
<a name="l1915"><span class="linenum">1915</span></a>                      <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/id.html">id</a>          = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_service', <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>);
<a name="l1916"><span class="linenum">1916</span></a>                  }
<a name="l1917"><span class="linenum">1917</span></a>                  <a class="var it25502" onMouseOver="hilite(25502)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>[<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>['servicename']] = <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>;
<a name="l1918"><span class="linenum">1918</span></a>                  if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('mnet_service2rpc', array('rpcid'=&gt;<a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'serviceid'=&gt;<a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1919"><span class="linenum">1919</span></a>                      <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a> = new stdClass();
<a name="l1920"><span class="linenum">1920</span></a>                      <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('rpcid')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../_variables/rpcid.html">rpcid</a> = <a class="var it3471" onMouseOver="hilite(3471)" onMouseOut="lolite()" onClick="logVariable('dataobject')" href="../_variables/dataobject.html">$dataobject</a>-&gt;<a onClick="logVariable('id')" class="var it44363" onMouseOver="hilite(44363)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1921"><span class="linenum">1921</span></a>                      <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('serviceid')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../_variables/serviceid.html">serviceid</a> = <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1922"><span class="linenum">1922</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_service2rpc', <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>, true);
<a name="l1923"><span class="linenum">1923</span></a>                  }
<a name="l1924"><span class="linenum">1924</span></a>              }
<a name="l1925"><span class="linenum">1925</span></a>          }
<a name="l1926"><span class="linenum">1926</span></a>      }
<a name="l1927"><span class="linenum">1927</span></a>  <span class="comment">    // finished with methods we publish, now do subscribable methods</span>
<a name="l1928"><span class="linenum">1928</span></a>      foreach(<a class="var it769" onMouseOver="hilite(769)" onMouseOut="lolite()" onClick="logVariable('subscribes')" href="../_variables/subscribes.html">$subscribes</a> as <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> =&gt; <a class="var it6183" onMouseOver="hilite(6183)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../_variables/methods.html">$methods</a>) {
<a name="l1929"><span class="linenum">1929</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>, <a class="var it25502" onMouseOver="hilite(25502)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>)) {
<a name="l1930"><span class="linenum">1930</span></a>              if (!<a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('mnet_service', array('name' =&gt;  <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>))) {
<a name="l1931"><span class="linenum">1931</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;TODO: skipping unknown service <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a> - somebody needs to fix MDL-21993&quot;);
<a name="l1932"><span class="linenum">1932</span></a>                  continue;
<a name="l1933"><span class="linenum">1933</span></a>              }
<a name="l1934"><span class="linenum">1934</span></a>              <a class="var it25502" onMouseOver="hilite(25502)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>[<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>] = <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>;
<a name="l1935"><span class="linenum">1935</span></a>          } else {
<a name="l1936"><span class="linenum">1936</span></a>              <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a> = <a class="var it25502" onMouseOver="hilite(25502)" onMouseOut="lolite()" onClick="logVariable('servicecache')" href="../_variables/servicecache.html">$servicecache</a>[<a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>];
<a name="l1937"><span class="linenum">1937</span></a>          }
<a name="l1938"><span class="linenum">1938</span></a>          foreach (<a class="var it6183" onMouseOver="hilite(6183)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../_variables/methods.html">$methods</a> as <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a> =&gt; <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('xmlrpcpath')" href="../_variables/xmlrpcpath.html">$xmlrpcpath</a>) {
<a name="l1939"><span class="linenum">1939</span></a>              if (!<a class="var it25513" onMouseOver="hilite(25513)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('mnet_remote_rpc', 'id', array('xmlrpcpath'=&gt;<a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('xmlrpcpath')" href="../_variables/xmlrpcpath.html">$xmlrpcpath</a>))) {
<a name="l1940"><span class="linenum">1940</span></a>                  <a class="var it25514" onMouseOver="hilite(25514)" onMouseOut="lolite()" onClick="logVariable('remoterpc')" href="../_variables/remoterpc.html">$remoterpc</a> = (object)array(
<a name="l1941"><span class="linenum">1941</span></a>                      'functionname' =&gt; <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>,
<a name="l1942"><span class="linenum">1942</span></a>                      'xmlrpcpath' =&gt; <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('xmlrpcpath')" href="../_variables/xmlrpcpath.html">$xmlrpcpath</a>,
<a name="l1943"><span class="linenum">1943</span></a>                      'plugintype' =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>,
<a name="l1944"><span class="linenum">1944</span></a>                      'pluginname' =&gt; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>,
<a name="l1945"><span class="linenum">1945</span></a>                      'enabled'    =&gt; 1,
<a name="l1946"><span class="linenum">1946</span></a>                  );
<a name="l1947"><span class="linenum">1947</span></a>                  <a class="var it25513" onMouseOver="hilite(25513)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a> = <a class="var it25514" onMouseOver="hilite(25514)" onMouseOut="lolite()" onClick="logVariable('remoterpc')" href="../_variables/remoterpc.html">$remoterpc</a>-&gt;<a onClick="logVariable('id')" class="var it44366" onMouseOver="hilite(44366)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_remote_rpc', <a class="var it25514" onMouseOver="hilite(25514)" onMouseOut="lolite()" onClick="logVariable('remoterpc')" href="../_variables/remoterpc.html">$remoterpc</a>, true);
<a name="l1948"><span class="linenum">1948</span></a>              }
<a name="l1949"><span class="linenum">1949</span></a>              if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('mnet_remote_service2rpc', array('rpcid'=&gt;<a class="var it25513" onMouseOver="hilite(25513)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a>, 'serviceid'=&gt;<a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1950"><span class="linenum">1950</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a> = new stdClass();
<a name="l1951"><span class="linenum">1951</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('rpcid')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../_variables/rpcid.html">rpcid</a> = <a class="var it25513" onMouseOver="hilite(25513)" onMouseOut="lolite()" onClick="logVariable('rpcid')" href="../_variables/rpcid.html">$rpcid</a>;
<a name="l1952"><span class="linenum">1952</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('serviceid')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../_variables/serviceid.html">serviceid</a> = <a class="var it25510" onMouseOver="hilite(25510)" onMouseOut="lolite()" onClick="logVariable('serviceobj')" href="../_variables/serviceobj.html">$serviceobj</a>-&gt;<a onClick="logVariable('id')" class="var it44365" onMouseOver="hilite(44365)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1953"><span class="linenum">1953</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('mnet_remote_service2rpc', <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../_variables/obj.html">$obj</a>, true);
<a name="l1954"><span class="linenum">1954</span></a>              }
<a name="l1955"><span class="linenum">1955</span></a>              <a class="var it25504" onMouseOver="hilite(25504)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a>[<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>][] = <a class="var it898" onMouseOver="hilite(898)" onMouseOut="lolite()" onClick="logVariable('service')" href="../_variables/service.html">$service</a>;
<a name="l1956"><span class="linenum">1956</span></a>          }
<a name="l1957"><span class="linenum">1957</span></a>      }
<a name="l1958"><span class="linenum">1958</span></a>  
<a name="l1959"><span class="linenum">1959</span></a>      foreach (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('mnet_remote_rpc', array('pluginname'=&gt;<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'plugintype'=&gt;<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>), 'functionname ASC ') as <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>) {
<a name="l1960"><span class="linenum">1960</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it25504" onMouseOver="hilite(25504)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a>) &amp;&amp; <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1961"><span class="linenum">1961</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_remote_rpc', 'enabled', 0, array('id' =&gt; <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1962"><span class="linenum">1962</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('functionname')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/functionname.html">functionname</a>, <a class="var it25504" onMouseOver="hilite(25504)" onMouseOut="lolite()" onClick="logVariable('subscribemethodservices')" href="../_variables/subscribemethodservices.html">$subscribemethodservices</a>) &amp;&amp; !<a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('enabled')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/enabled.html">enabled</a>) {
<a name="l1963"><span class="linenum">1963</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('mnet_remote_rpc', 'enabled', 1, array('id' =&gt; <a class="var it25505" onMouseOver="hilite(25505)" onMouseOut="lolite()" onClick="logVariable('rpc')" href="../_variables/rpc.html">$rpc</a>-&gt;<a onClick="logVariable('id')" class="var it44362" onMouseOver="hilite(44362)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1964"><span class="linenum">1964</span></a>          }
<a name="l1965"><span class="linenum">1965</span></a>      }
<a name="l1966"><span class="linenum">1966</span></a>  
<a name="l1967"><span class="linenum">1967</span></a>      return true;
<a name="l1968"><span class="linenum">1968</span></a>  }
<a name="l1969"><span class="linenum">1969</span></a>  
<a name="l1970"><span class="linenum">1970</span></a>  <span class="comment">/**</span>
<a name="l1971"><span class="linenum">1971</span></a>  <span class="comment"> * Given some sort of reflection function/method object, return a profile array, ready to be serialized and stored</span>
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment"> *</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment"> * @param ReflectionFunctionAbstract $function reflection function/method object from which to extract information</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment"> *</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment"> * @return array associative array with function/method information</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"> */</span>
<a name="l1977"><span class="linenum">1977</span></a>  function <a class="function" onClick="logFunction('admin_mnet_method_profile')" href="../_functions/admin_mnet_method_profile.html" onMouseOver="funcPopup(event,'admin_mnet_method_profile')">admin_mnet_method_profile</a>(ReflectionFunctionAbstract <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1978"><span class="linenum">1978</span></a>      <a class="var it25515" onMouseOver="hilite(25515)" onMouseOut="lolite()" onClick="logVariable('commentlines')" href="../_variables/commentlines.html">$commentlines</a> = <a class="function" onClick="logFunction('admin_mnet_method_get_docblock')" href="../_functions/admin_mnet_method_get_docblock.html" onMouseOver="funcPopup(event,'admin_mnet_method_get_docblock')">admin_mnet_method_get_docblock</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>);
<a name="l1979"><span class="linenum">1979</span></a>      <a class="var it25516" onMouseOver="hilite(25516)" onMouseOut="lolite()" onClick="logVariable('getkey')" href="../_variables/getkey.html">$getkey</a> = function(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) use (<a class="var it25515" onMouseOver="hilite(25515)" onMouseOut="lolite()" onClick="logVariable('commentlines')" href="../_variables/commentlines.html">$commentlines</a>) {
<a name="l1980"><span class="linenum">1980</span></a>          return <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="phpfunction" onClick="logFunction('array_filter')" href="../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="var it25515" onMouseOver="hilite(25515)" onMouseOut="lolite()" onClick="logVariable('commentlines')" href="../_variables/commentlines.html">$commentlines</a>, function(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>) use (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l1981"><span class="linenum">1981</span></a>              return <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>[0] == <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l1982"><span class="linenum">1982</span></a>          }));
<a name="l1983"><span class="linenum">1983</span></a>      };
<a name="l1984"><span class="linenum">1984</span></a>      <a class="var it25517" onMouseOver="hilite(25517)" onMouseOut="lolite()" onClick="logVariable('returnline')" href="../_variables/returnline.html">$returnline</a> = <a class="var it25516" onMouseOver="hilite(25516)" onMouseOut="lolite()" onClick="logVariable('getkey')" href="../_variables/getkey.html">$getkey</a>('@return');
<a name="l1985"><span class="linenum">1985</span></a>      return array (
<a name="l1986"><span class="linenum">1986</span></a>          'parameters' =&gt; <a class="phpfunction" onClick="logFunction('array_map')" href="../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>(function(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>) {
<a name="l1987"><span class="linenum">1987</span></a>              return array(
<a name="l1988"><span class="linenum">1988</span></a>                  'name' =&gt; <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>[2], &quot; \t\n\r\0\x0B$&quot;),
<a name="l1989"><span class="linenum">1989</span></a>                  'type' =&gt; <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>[1],
<a name="l1990"><span class="linenum">1990</span></a>                  'description' =&gt; <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>[3]
<a name="l1991"><span class="linenum">1991</span></a>              );
<a name="l1992"><span class="linenum">1992</span></a>          }, <a class="var it25516" onMouseOver="hilite(25516)" onMouseOut="lolite()" onClick="logVariable('getkey')" href="../_variables/getkey.html">$getkey</a>('@param')),
<a name="l1993"><span class="linenum">1993</span></a>  
<a name="l1994"><span class="linenum">1994</span></a>          'return' =&gt; array(
<a name="l1995"><span class="linenum">1995</span></a>              'type' =&gt; !empty(<a class="var it25517" onMouseOver="hilite(25517)" onMouseOut="lolite()" onClick="logVariable('returnline')" href="../_variables/returnline.html">$returnline</a>[0][1]) ? <a class="var it25517" onMouseOver="hilite(25517)" onMouseOut="lolite()" onClick="logVariable('returnline')" href="../_variables/returnline.html">$returnline</a>[0][1] : 'void',
<a name="l1996"><span class="linenum">1996</span></a>              'description' =&gt; !empty(<a class="var it25517" onMouseOver="hilite(25517)" onMouseOut="lolite()" onClick="logVariable('returnline')" href="../_variables/returnline.html">$returnline</a>[0][2]) ? <a class="var it25517" onMouseOver="hilite(25517)" onMouseOut="lolite()" onClick="logVariable('returnline')" href="../_variables/returnline.html">$returnline</a>[0][2] : ''
<a name="l1997"><span class="linenum">1997</span></a>          )
<a name="l1998"><span class="linenum">1998</span></a>      );
<a name="l1999"><span class="linenum">1999</span></a>  }
<a name="l2000"><span class="linenum">2000</span></a>  
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">/**</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment"> * Given some sort of reflection function/method object, return an array of docblock lines, where each line is an array of</span>
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment"> * keywords/descriptions</span>
<a name="l2004"><span class="linenum">2004</span></a>  <span class="comment"> *</span>
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment"> * @param ReflectionFunctionAbstract $function reflection function/method object from which to extract information</span>
<a name="l2006"><span class="linenum">2006</span></a>  <span class="comment"> *</span>
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment"> * @return array docblock converted in to an array</span>
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment"> */</span>
<a name="l2009"><span class="linenum">2009</span></a>  function <a class="function" onClick="logFunction('admin_mnet_method_get_docblock')" href="../_functions/admin_mnet_method_get_docblock.html" onMouseOver="funcPopup(event,'admin_mnet_method_get_docblock')">admin_mnet_method_get_docblock</a>(ReflectionFunctionAbstract <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l2010"><span class="linenum">2010</span></a>      return <a class="phpfunction" onClick="logFunction('array_map')" href="../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>(function(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>) {
<a name="l2011"><span class="linenum">2011</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>, &quot; \t\n\r\0\x0B*/&quot;);
<a name="l2012"><span class="linenum">2012</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '@param') === 0) {
<a name="l2013"><span class="linenum">2013</span></a>              return <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/\s+/', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, 4);
<a name="l2014"><span class="linenum">2014</span></a>          }
<a name="l2015"><span class="linenum">2015</span></a>  
<a name="l2016"><span class="linenum">2016</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '@return') === 0) {
<a name="l2017"><span class="linenum">2017</span></a>              return <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/\s+/', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, 3);
<a name="l2018"><span class="linenum">2018</span></a>          }
<a name="l2019"><span class="linenum">2019</span></a>  
<a name="l2020"><span class="linenum">2020</span></a>          return array(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l2021"><span class="linenum">2021</span></a>      }, <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;\n&quot;, <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>-&gt;getDocComment()));
<a name="l2022"><span class="linenum">2022</span></a>  }
<a name="l2023"><span class="linenum">2023</span></a>  
<a name="l2024"><span class="linenum">2024</span></a>  <span class="comment">/**</span>
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment"> * Given some sort of reflection function/method object, return just the help text</span>
<a name="l2026"><span class="linenum">2026</span></a>  <span class="comment"> *</span>
<a name="l2027"><span class="linenum">2027</span></a>  <span class="comment"> * @param ReflectionFunctionAbstract $function reflection function/method object from which to extract information</span>
<a name="l2028"><span class="linenum">2028</span></a>  <span class="comment"> *</span>
<a name="l2029"><span class="linenum">2029</span></a>  <span class="comment"> * @return string docblock help text</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment"> */</span>
<a name="l2031"><span class="linenum">2031</span></a>  function <a class="function" onClick="logFunction('admin_mnet_method_get_help')" href="../_functions/admin_mnet_method_get_help.html" onMouseOver="funcPopup(event,'admin_mnet_method_get_help')">admin_mnet_method_get_help</a>(ReflectionFunctionAbstract <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l2032"><span class="linenum">2032</span></a>      <a class="var it25518" onMouseOver="hilite(25518)" onMouseOut="lolite()" onClick="logVariable('helplines')" href="../_variables/helplines.html">$helplines</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>(function(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>) {
<a name="l2033"><span class="linenum">2033</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' ', <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>);
<a name="l2034"><span class="linenum">2034</span></a>      }, <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="phpfunction" onClick="logFunction('array_filter')" href="../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="function" onClick="logFunction('admin_mnet_method_get_docblock')" href="../_functions/admin_mnet_method_get_docblock.html" onMouseOver="funcPopup(event,'admin_mnet_method_get_docblock')">admin_mnet_method_get_docblock</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>), function(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>) {
<a name="l2035"><span class="linenum">2035</span></a>          return <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>[0], '@') !== 0 &amp;&amp; !empty(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>[0]);
<a name="l2036"><span class="linenum">2036</span></a>      })));
<a name="l2037"><span class="linenum">2037</span></a>  
<a name="l2038"><span class="linenum">2038</span></a>      return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n&quot;, <a class="var it25518" onMouseOver="hilite(25518)" onMouseOut="lolite()" onClick="logVariable('helplines')" href="../_variables/helplines.html">$helplines</a>);
<a name="l2039"><span class="linenum">2039</span></a>  }
<a name="l2040"><span class="linenum">2040</span></a>  
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment">/**</span>
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment"> * Detect draft file areas with missing root directory records and add them.</span>
<a name="l2043"><span class="linenum">2043</span></a>  <span class="comment"> */</span>
<a name="l2044"><span class="linenum">2044</span></a>  function <a class="function" onClick="logFunction('upgrade_fix_missing_root_folders_draft')" href="../_functions/upgrade_fix_missing_root_folders_draft.html" onMouseOver="funcPopup(event,'upgrade_fix_missing_root_folders_draft')">upgrade_fix_missing_root_folders_draft</a>() {
<a name="l2045"><span class="linenum">2045</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2046"><span class="linenum">2046</span></a>  
<a name="l2047"><span class="linenum">2047</span></a>      <a class="var it4224" onMouseOver="hilite(4224)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('start_delegated_transaction')" href="../_functions/start_delegated_transaction.html" onMouseOver="funcPopup(event,'start_delegated_transaction')">start_delegated_transaction</a>();
<a name="l2048"><span class="linenum">2048</span></a>  
<a name="l2049"><span class="linenum">2049</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT contextid, itemid, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(timecreated) AS timecreated, <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(timemodified) AS timemodified
<a name="l2050"><span class="linenum">2050</span></a>                FROM {files}
<a name="l2051"><span class="linenum">2051</span></a>               <a class="function" onClick="logFunction('WHERE')" href="../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> (component = 'user' AND filearea = 'draft')
<a name="l2052"><span class="linenum">2052</span></a>            GROUP BY contextid, itemid
<a name="l2053"><span class="linenum">2053</span></a>              HAVING <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(CASE WHEN filename = '.' AND filepath = '/' THEN 1 ELSE 0 END) = 0&quot;;
<a name="l2054"><span class="linenum">2054</span></a>  
<a name="l2055"><span class="linenum">2055</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l2056"><span class="linenum">2056</span></a>      <a class="var it722" onMouseOver="hilite(722)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a> = array('component' =&gt; 'user',
<a name="l2057"><span class="linenum">2057</span></a>          'filearea' =&gt; 'draft',
<a name="l2058"><span class="linenum">2058</span></a>          'filepath' =&gt; '/',
<a name="l2059"><span class="linenum">2059</span></a>          'filename' =&gt; '.',
<a name="l2060"><span class="linenum">2060</span></a>          'userid' =&gt; 0, // Don't rely on any particular user for these system records.
<a name="l2061"><span class="linenum">2061</span></a>          'filesize' =&gt; 0,
<a name="l2062"><span class="linenum">2062</span></a>          'contenthash' =&gt; <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(''));
<a name="l2063"><span class="linenum">2063</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>) {
<a name="l2064"><span class="linenum">2064</span></a>          <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('pathnamehash')" class="var it43412" onMouseOver="hilite(43412)" onMouseOut="lolite()" href="../_variables/pathnamehash.html">pathnamehash</a> = <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(&quot;/<a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('contextid')" class="var it43412" onMouseOver="hilite(43412)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>/user/draft/<a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('itemid')" class="var it43412" onMouseOver="hilite(43412)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a>/.&quot;);
<a name="l2065"><span class="linenum">2065</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('files', (array)<a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> + <a class="var it722" onMouseOver="hilite(722)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>);
<a name="l2066"><span class="linenum">2066</span></a>      }
<a name="l2067"><span class="linenum">2067</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2068"><span class="linenum">2068</span></a>      <a class="var it4224" onMouseOver="hilite(4224)" onMouseOut="lolite()" onClick="logVariable('transaction')" href="../_variables/transaction.html">$transaction</a>-&gt;<a class="function" onClick="logFunction('allow_commit')" href="../_functions/allow_commit.html" onMouseOver="funcPopup(event,'allow_commit')">allow_commit</a>();
<a name="l2069"><span class="linenum">2069</span></a>  }
<a name="l2070"><span class="linenum">2070</span></a>  
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">/**</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment"> * This function verifies that the database is not using an unsupported storage engine.</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment"> *</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment"> * @param environment_results $result object to update, if relevant</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment"> * @return environment_results|null updated results object, or null if the storage engine is supported</span>
<a name="l2076"><span class="linenum">2076</span></a>  <span class="comment"> */</span>
<a name="l2077"><span class="linenum">2077</span></a>  function <a class="function" onClick="logFunction('check_database_storage_engine')" href="../_functions/check_database_storage_engine.html" onMouseOver="funcPopup(event,'check_database_storage_engine')">check_database_storage_engine</a>(environment_results <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l2078"><span class="linenum">2078</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2079"><span class="linenum">2079</span></a>  
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment">    // Check if MySQL is the DB family (this will also be the same for MariaDB).</span>
<a name="l2081"><span class="linenum">2081</span></a>      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_dbfamily')" href="../_functions/get_dbfamily.html" onMouseOver="funcPopup(event,'get_dbfamily')">get_dbfamily</a>() == 'mysql') {
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment">        // Get the database engine we will either be using to install the tables, or what we are currently using.</span>
<a name="l2083"><span class="linenum">2083</span></a>          <a class="var it1944" onMouseOver="hilite(1944)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../_variables/engine.html">$engine</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_dbengine')" href="../_functions/get_dbengine.html" onMouseOver="funcPopup(event,'get_dbengine')">get_dbengine</a>();
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment">        // Check if MyISAM is the storage engine that will be used, if so, do not proceed and display an error.</span>
<a name="l2085"><span class="linenum">2085</span></a>          if (<a class="var it1944" onMouseOver="hilite(1944)" onMouseOut="lolite()" onClick="logVariable('engine')" href="../_variables/engine.html">$engine</a> == 'MyISAM') {
<a name="l2086"><span class="linenum">2086</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('unsupported_db_storage_engine');
<a name="l2087"><span class="linenum">2087</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2088"><span class="linenum">2088</span></a>              return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2089"><span class="linenum">2089</span></a>          }
<a name="l2090"><span class="linenum">2090</span></a>      }
<a name="l2091"><span class="linenum">2091</span></a>  
<a name="l2092"><span class="linenum">2092</span></a>      return null;
<a name="l2093"><span class="linenum">2093</span></a>  }
<a name="l2094"><span class="linenum">2094</span></a>  
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment">/**</span>
<a name="l2096"><span class="linenum">2096</span></a>  <span class="comment"> * Method used to check the usage of slasharguments config and display a warning message.</span>
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment"> *</span>
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment"> * @param environment_results $result object to update, if relevant.</span>
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment"> * @return environment_results|null updated results or null if slasharguments is disabled.</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment"> */</span>
<a name="l2101"><span class="linenum">2101</span></a>  function <a class="function" onClick="logFunction('check_slasharguments')" href="../_functions/check_slasharguments.html" onMouseOver="funcPopup(event,'check_slasharguments')">check_slasharguments</a>(environment_results <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>){
<a name="l2102"><span class="linenum">2102</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2103"><span class="linenum">2103</span></a>  
<a name="l2104"><span class="linenum">2104</span></a>      if (!<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>() &amp;&amp; empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('slasharguments')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/slasharguments.html">slasharguments</a>)) {
<a name="l2105"><span class="linenum">2105</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('slasharguments');
<a name="l2106"><span class="linenum">2106</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2107"><span class="linenum">2107</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2108"><span class="linenum">2108</span></a>      }
<a name="l2109"><span class="linenum">2109</span></a>  
<a name="l2110"><span class="linenum">2110</span></a>      return null;
<a name="l2111"><span class="linenum">2111</span></a>  }
<a name="l2112"><span class="linenum">2112</span></a>  
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment">/**</span>
<a name="l2114"><span class="linenum">2114</span></a>  <span class="comment"> * This function verifies if the database has tables using innoDB Antelope row format.</span>
<a name="l2115"><span class="linenum">2115</span></a>  <span class="comment"> *</span>
<a name="l2116"><span class="linenum">2116</span></a>  <span class="comment"> * @param environment_results $result</span>
<a name="l2117"><span class="linenum">2117</span></a>  <span class="comment"> * @return environment_results|null updated results object, or null if no Antelope table has been found.</span>
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment"> */</span>
<a name="l2119"><span class="linenum">2119</span></a>  function <a class="function" onClick="logFunction('check_database_tables_row_format')" href="../_functions/check_database_tables_row_format.html" onMouseOver="funcPopup(event,'check_database_tables_row_format')">check_database_tables_row_format</a>(environment_results <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l2120"><span class="linenum">2120</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2121"><span class="linenum">2121</span></a>  
<a name="l2122"><span class="linenum">2122</span></a>      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_dbfamily')" href="../_functions/get_dbfamily.html" onMouseOver="funcPopup(event,'get_dbfamily')">get_dbfamily</a>() == 'mysql') {
<a name="l2123"><span class="linenum">2123</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../_variables/generator.html">$generator</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;generator;
<a name="l2124"><span class="linenum">2124</span></a>  
<a name="l2125"><span class="linenum">2125</span></a>          foreach (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_tables')" href="../_functions/get_tables.html" onMouseOver="funcPopup(event,'get_tables')">get_tables</a>(false) as <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>) {
<a name="l2126"><span class="linenum">2126</span></a>              <a class="var it734" onMouseOver="hilite(734)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../_variables/columns.html">$columns</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, false);
<a name="l2127"><span class="linenum">2127</span></a>              <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../_variables/generator.html">$generator</a>-&gt;<a class="function" onClick="logFunction('guess_antelope_row_size')" href="../_functions/guess_antelope_row_size.html" onMouseOver="funcPopup(event,'guess_antelope_row_size')">guess_antelope_row_size</a>(<a class="var it734" onMouseOver="hilite(734)" onMouseOut="lolite()" onClick="logVariable('columns')" href="../_variables/columns.html">$columns</a>);
<a name="l2128"><span class="linenum">2128</span></a>              <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row_format')" href="../_functions/get_row_format.html" onMouseOver="funcPopup(event,'get_row_format')">get_row_format</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l2129"><span class="linenum">2129</span></a>  
<a name="l2130"><span class="linenum">2130</span></a>              if (<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../_variables/size.html">$size</a> &lt;= <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../_variables/generator.html">$generator</a>::ANTELOPE_MAX_ROW_SIZE) {
<a name="l2131"><span class="linenum">2131</span></a>                  continue;
<a name="l2132"><span class="linenum">2132</span></a>              }
<a name="l2133"><span class="linenum">2133</span></a>  
<a name="l2134"><span class="linenum">2134</span></a>              if (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> === 'Compact' or <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> === 'Redundant') {
<a name="l2135"><span class="linenum">2135</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('unsupported_db_table_row_format');
<a name="l2136"><span class="linenum">2136</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2137"><span class="linenum">2137</span></a>                  return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2138"><span class="linenum">2138</span></a>              }
<a name="l2139"><span class="linenum">2139</span></a>          }
<a name="l2140"><span class="linenum">2140</span></a>      }
<a name="l2141"><span class="linenum">2141</span></a>  
<a name="l2142"><span class="linenum">2142</span></a>      return null;
<a name="l2143"><span class="linenum">2143</span></a>  }
<a name="l2144"><span class="linenum">2144</span></a>  
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">/**</span>
<a name="l2146"><span class="linenum">2146</span></a>  <span class="comment"> * Upgrade the minmaxgrade setting.</span>
<a name="l2147"><span class="linenum">2147</span></a>  <span class="comment"> *</span>
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment"> * This step should only be run for sites running 2.8 or later. Sites using 2.7 will be fine</span>
<a name="l2149"><span class="linenum">2149</span></a>  <span class="comment"> * using the new default system setting $CFG-&gt;grade_minmaxtouse.</span>
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment"> *</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment"> * @return void</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment"> */</span>
<a name="l2153"><span class="linenum">2153</span></a>  function <a class="function" onClick="logFunction('upgrade_minmaxgrade')" href="../_functions/upgrade_minmaxgrade.html" onMouseOver="funcPopup(event,'upgrade_minmaxgrade')">upgrade_minmaxgrade</a>() {
<a name="l2154"><span class="linenum">2154</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2155"><span class="linenum">2155</span></a>  
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment">    // 2 is a copy of GRADE_MIN_MAX_FROM_GRADE_GRADE.</span>
<a name="l2157"><span class="linenum">2157</span></a>      <a class="var it25519" onMouseOver="hilite(25519)" onMouseOut="lolite()" onClick="logVariable('settingvalue')" href="../_variables/settingvalue.html">$settingvalue</a> = 2;
<a name="l2158"><span class="linenum">2158</span></a>  
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">    // Set the course setting when:</span>
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment">    // - The system setting does not exist yet.</span>
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">    // - The system seeting is not set to what we'd set the course setting.</span>
<a name="l2162"><span class="linenum">2162</span></a>      <a class="var it25520" onMouseOver="hilite(25520)" onMouseOut="lolite()" onClick="logVariable('setcoursesetting')" href="../_variables/setcoursesetting.html">$setcoursesetting</a> = !isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a>) || <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a> != <a class="var it25519" onMouseOver="hilite(25519)" onMouseOut="lolite()" onClick="logVariable('settingvalue')" href="../_variables/settingvalue.html">$settingvalue</a>;
<a name="l2163"><span class="linenum">2163</span></a>  
<a name="l2164"><span class="linenum">2164</span></a>  <span class="comment">    // Identify the courses that have inconsistencies grade_item vs grade_grade.</span>
<a name="l2165"><span class="linenum">2165</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT DISTINCT(gi.courseid)
<a name="l2166"><span class="linenum">2166</span></a>                FROM {grade_grades} gg
<a name="l2167"><span class="linenum">2167</span></a>                JOIN {grade_items} gi
<a name="l2168"><span class="linenum">2168</span></a>                  ON gg.itemid = gi.id
<a name="l2169"><span class="linenum">2169</span></a>               WHERE gi.itemtype NOT IN (?, ?)
<a name="l2170"><span class="linenum">2170</span></a>                 AND (gg.rawgrademax != gi.grademax OR gg.rawgrademin != gi.grademin)&quot;;
<a name="l2171"><span class="linenum">2171</span></a>  
<a name="l2172"><span class="linenum">2172</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('course', 'category'));
<a name="l2173"><span class="linenum">2173</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">        // Flag the course to show a notice in the gradebook.</span>
<a name="l2175"><span class="linenum">2175</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('show_min_max_grades_changed_' . <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('courseid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, 1);
<a name="l2176"><span class="linenum">2176</span></a>  
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment">        // Set the appropriate course setting so that grades displayed are not changed.</span>
<a name="l2178"><span class="linenum">2178</span></a>          <a class="var it22072" onMouseOver="hilite(22072)" onMouseOut="lolite()" onClick="logVariable('configname')" href="../_variables/configname.html">$configname</a> = 'minmaxtouse';
<a name="l2179"><span class="linenum">2179</span></a>          if (<a class="var it25520" onMouseOver="hilite(25520)" onMouseOut="lolite()" onClick="logVariable('setcoursesetting')" href="../_variables/setcoursesetting.html">$setcoursesetting</a> &amp;&amp;
<a name="l2180"><span class="linenum">2180</span></a>                  !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_settings', array('courseid' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('courseid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, 'name' =&gt; <a class="var it22072" onMouseOver="hilite(22072)" onMouseOut="lolite()" onClick="logVariable('configname')" href="../_variables/configname.html">$configname</a>))) {
<a name="l2181"><span class="linenum">2181</span></a>  <span class="comment">            // Do not set the setting when the course already defines it.</span>
<a name="l2182"><span class="linenum">2182</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = new stdClass();
<a name="l2183"><span class="linenum">2183</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('courseid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>;
<a name="l2184"><span class="linenum">2184</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>     = <a class="var it22072" onMouseOver="hilite(22072)" onMouseOut="lolite()" onClick="logVariable('configname')" href="../_variables/configname.html">$configname</a>;
<a name="l2185"><span class="linenum">2185</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('value')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/value.html">value</a>    = <a class="var it25519" onMouseOver="hilite(25519)" onMouseOut="lolite()" onClick="logVariable('settingvalue')" href="../_variables/settingvalue.html">$settingvalue</a>;
<a name="l2186"><span class="linenum">2186</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_settings', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2187"><span class="linenum">2187</span></a>          }
<a name="l2188"><span class="linenum">2188</span></a>  
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment">        // Mark the grades to be regraded.</span>
<a name="l2190"><span class="linenum">2190</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('grade_items', 'needsupdate', 1, array('courseid' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('courseid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l2191"><span class="linenum">2191</span></a>      }
<a name="l2192"><span class="linenum">2192</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2193"><span class="linenum">2193</span></a>  }
<a name="l2194"><span class="linenum">2194</span></a>  
<a name="l2195"><span class="linenum">2195</span></a>  
<a name="l2196"><span class="linenum">2196</span></a>  <span class="comment">/**</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment"> * Assert the upgrade key is provided, if it is defined.</span>
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment"> *</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment"> * The upgrade key can be defined in the main config.php as $CFG-&gt;upgradekey. If</span>
<a name="l2200"><span class="linenum">2200</span></a>  <span class="comment"> * it is defined there, then its value must be provided every time the site is</span>
<a name="l2201"><span class="linenum">2201</span></a>  <span class="comment"> * being upgraded, regardless the administrator is logged in or not.</span>
<a name="l2202"><span class="linenum">2202</span></a>  <span class="comment"> *</span>
<a name="l2203"><span class="linenum">2203</span></a>  <span class="comment"> * This is supposed to be used at certain places in /admin/index.php only.</span>
<a name="l2204"><span class="linenum">2204</span></a>  <span class="comment"> *</span>
<a name="l2205"><span class="linenum">2205</span></a>  <span class="comment"> * @param string|null $upgradekeyhash the SHA-1 of the value provided by the user</span>
<a name="l2206"><span class="linenum">2206</span></a>  <span class="comment"> */</span>
<a name="l2207"><span class="linenum">2207</span></a>  function <a class="function" onClick="logFunction('check_upgrade_key')" href="../_functions/check_upgrade_key.html" onMouseOver="funcPopup(event,'check_upgrade_key')">check_upgrade_key</a>(<a class="var it10361" onMouseOver="hilite(10361)" onMouseOut="lolite()" onClick="logVariable('upgradekeyhash')" href="../_variables/upgradekeyhash.html">$upgradekeyhash</a>) {
<a name="l2208"><span class="linenum">2208</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l2209"><span class="linenum">2209</span></a>  
<a name="l2210"><span class="linenum">2210</span></a>      if (isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('config_php_settings')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/config_php_settings.html">config_php_settings</a>['upgradekey'])) {
<a name="l2211"><span class="linenum">2211</span></a>          if (<a class="var it10361" onMouseOver="hilite(10361)" onMouseOut="lolite()" onClick="logVariable('upgradekeyhash')" href="../_variables/upgradekeyhash.html">$upgradekeyhash</a> === null or <a class="var it10361" onMouseOver="hilite(10361)" onMouseOut="lolite()" onClick="logVariable('upgradekeyhash')" href="../_variables/upgradekeyhash.html">$upgradekeyhash</a> !== <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('config_php_settings')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/config_php_settings.html">config_php_settings</a>['upgradekey'])) {
<a name="l2212"><span class="linenum">2212</span></a>              if (!<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('headerprinted')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/headerprinted.html">headerprinted</a>) {
<a name="l2213"><span class="linenum">2213</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l2214"><span class="linenum">2214</span></a>                  echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgradekey_form_page')" href="../_functions/upgradekey_form_page.html" onMouseOver="funcPopup(event,'upgradekey_form_page')">upgradekey_form_page</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('cache' =&gt; 0)));
<a name="l2215"><span class="linenum">2215</span></a>                  die();
<a name="l2216"><span class="linenum">2216</span></a>              } else {
<a name="l2217"><span class="linenum">2217</span></a>  <span class="comment">                // This should not happen.</span>
<a name="l2218"><span class="linenum">2218</span></a>                  die('Upgrade locked');
<a name="l2219"><span class="linenum">2219</span></a>              }
<a name="l2220"><span class="linenum">2220</span></a>          }
<a name="l2221"><span class="linenum">2221</span></a>      }
<a name="l2222"><span class="linenum">2222</span></a>  }
<a name="l2223"><span class="linenum">2223</span></a>  
<a name="l2224"><span class="linenum">2224</span></a>  <span class="comment">/**</span>
<a name="l2225"><span class="linenum">2225</span></a>  <span class="comment"> * Helper procedure/macro for installing remote plugins at admin/index.php</span>
<a name="l2226"><span class="linenum">2226</span></a>  <span class="comment"> *</span>
<a name="l2227"><span class="linenum">2227</span></a>  <span class="comment"> * Does not return, always redirects or exits.</span>
<a name="l2228"><span class="linenum">2228</span></a>  <span class="comment"> *</span>
<a name="l2229"><span class="linenum">2229</span></a>  <span class="comment"> * @param array $installable list of \core\update\remote_info</span>
<a name="l2230"><span class="linenum">2230</span></a>  <span class="comment"> * @param bool $confirmed false: display the validation screen, true: proceed installation</span>
<a name="l2231"><span class="linenum">2231</span></a>  <span class="comment"> * @param string $heading validation screen heading</span>
<a name="l2232"><span class="linenum">2232</span></a>  <span class="comment"> * @param moodle_url|string|null $continue URL to proceed with installation at the validation screen</span>
<a name="l2233"><span class="linenum">2233</span></a>  <span class="comment"> * @param moodle_url|string|null $return URL to go back on cancelling at the validation screen</span>
<a name="l2234"><span class="linenum">2234</span></a>  <span class="comment"> */</span>
<a name="l2235"><span class="linenum">2235</span></a>  function <a class="function" onClick="logFunction('upgrade_install_plugins')" href="../_functions/upgrade_install_plugins.html" onMouseOver="funcPopup(event,'upgrade_install_plugins')">upgrade_install_plugins</a>(array <a class="var it8493" onMouseOver="hilite(8493)" onMouseOut="lolite()" onClick="logVariable('installable')" href="../_variables/installable.html">$installable</a>, <a class="var it373" onMouseOver="hilite(373)" onMouseOut="lolite()" onClick="logVariable('confirmed')" href="../_variables/confirmed.html">$confirmed</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>='', <a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('continue')" href="../_variables/continue.html">$continue</a>=null, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=null) {
<a name="l2236"><span class="linenum">2236</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l2237"><span class="linenum">2237</span></a>  
<a name="l2238"><span class="linenum">2238</span></a>      if (empty(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>)) {
<a name="l2239"><span class="linenum">2239</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>;
<a name="l2240"><span class="linenum">2240</span></a>      }
<a name="l2241"><span class="linenum">2241</span></a>  
<a name="l2242"><span class="linenum">2242</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('disableupdateautodeploy')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/disableupdateautodeploy.html">disableupdateautodeploy</a>)) {
<a name="l2243"><span class="linenum">2243</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l2244"><span class="linenum">2244</span></a>      }
<a name="l2245"><span class="linenum">2245</span></a>  
<a name="l2246"><span class="linenum">2246</span></a>      if (empty(<a class="var it8493" onMouseOver="hilite(8493)" onMouseOut="lolite()" onClick="logVariable('installable')" href="../_variables/installable.html">$installable</a>)) {
<a name="l2247"><span class="linenum">2247</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l2248"><span class="linenum">2248</span></a>      }
<a name="l2249"><span class="linenum">2249</span></a>  
<a name="l2250"><span class="linenum">2250</span></a>      <a class="var it10382" onMouseOver="hilite(10382)" onMouseOut="lolite()" onClick="logVariable('pluginman')" href="../_variables/pluginman.html">$pluginman</a> = <a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l2251"><span class="linenum">2251</span></a>  
<a name="l2252"><span class="linenum">2252</span></a>      if (<a class="var it373" onMouseOver="hilite(373)" onMouseOut="lolite()" onClick="logVariable('confirmed')" href="../_variables/confirmed.html">$confirmed</a>) {
<a name="l2253"><span class="linenum">2253</span></a>  <span class="comment">        // Installation confirmed at the validation results page.</span>
<a name="l2254"><span class="linenum">2254</span></a>          if (!<a class="var it10382" onMouseOver="hilite(10382)" onMouseOut="lolite()" onClick="logVariable('pluginman')" href="../_variables/pluginman.html">$pluginman</a>-&gt;<a class="function" onClick="logFunction('install_plugins')" href="../_functions/install_plugins.html" onMouseOver="funcPopup(event,'install_plugins')">install_plugins</a>(<a class="var it8493" onMouseOver="hilite(8493)" onMouseOut="lolite()" onClick="logVariable('installable')" href="../_variables/installable.html">$installable</a>, true, true)) {
<a name="l2255"><span class="linenum">2255</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('install_plugins_failed', 'core_plugin', <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l2256"><span class="linenum">2256</span></a>          }
<a name="l2257"><span class="linenum">2257</span></a>  
<a name="l2258"><span class="linenum">2258</span></a>  <span class="comment">        // Always redirect to admin/index.php to perform the database upgrade.</span>
<a name="l2259"><span class="linenum">2259</span></a>  <span class="comment">        // Do not throw away the existing $PAGE-&gt;url parameters such as</span>
<a name="l2260"><span class="linenum">2260</span></a>  <span class="comment">        // confirmupgrade or confirmrelease if $PAGE-&gt;url is a superset of the</span>
<a name="l2261"><span class="linenum">2261</span></a>  <span class="comment">        // URL we must go to.</span>
<a name="l2262"><span class="linenum">2262</span></a>          <a class="var it25521" onMouseOver="hilite(25521)" onMouseOut="lolite()" onClick="logVariable('mustgoto')" href="../_variables/mustgoto.html">$mustgoto</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('cache' =&gt; 0, 'confirmplugincheck' =&gt; 0));
<a name="l2263"><span class="linenum">2263</span></a>          if (<a class="var it25521" onMouseOver="hilite(25521)" onMouseOut="lolite()" onClick="logVariable('mustgoto')" href="../_variables/mustgoto.html">$mustgoto</a>-&gt;<a class="function" onClick="logFunction('compare')" href="../_functions/compare.html" onMouseOver="funcPopup(event,'compare')">compare</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, <a class="constant" onClick="logConstant('URL_MATCH_PARAMS')" href="../_constants/URL_MATCH_PARAMS.html" onMouseOver="constPopup(event,'URL_MATCH_PARAMS')">URL_MATCH_PARAMS</a>)) {
<a name="l2264"><span class="linenum">2264</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l2265"><span class="linenum">2265</span></a>          } else {
<a name="l2266"><span class="linenum">2266</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it25521" onMouseOver="hilite(25521)" onMouseOut="lolite()" onClick="logVariable('mustgoto')" href="../_variables/mustgoto.html">$mustgoto</a>);
<a name="l2267"><span class="linenum">2267</span></a>          }
<a name="l2268"><span class="linenum">2268</span></a>  
<a name="l2269"><span class="linenum">2269</span></a>      } else {
<a name="l2270"><span class="linenum">2270</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l2271"><span class="linenum">2271</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l2272"><span class="linenum">2272</span></a>          if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>) {
<a name="l2273"><span class="linenum">2273</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>, 3);
<a name="l2274"><span class="linenum">2274</span></a>          }
<a name="l2275"><span class="linenum">2275</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('pre', array('class' =&gt; 'plugin-install-console'));
<a name="l2276"><span class="linenum">2276</span></a>          <a class="var it13871" onMouseOver="hilite(13871)" onMouseOut="lolite()" onClick="logVariable('validated')" href="../_variables/validated.html">$validated</a> = <a class="var it10382" onMouseOver="hilite(10382)" onMouseOut="lolite()" onClick="logVariable('pluginman')" href="../_variables/pluginman.html">$pluginman</a>-&gt;<a class="function" onClick="logFunction('install_plugins')" href="../_functions/install_plugins.html" onMouseOver="funcPopup(event,'install_plugins')">install_plugins</a>(<a class="var it8493" onMouseOver="hilite(8493)" onMouseOut="lolite()" onClick="logVariable('installable')" href="../_variables/installable.html">$installable</a>, false, false);
<a name="l2277"><span class="linenum">2277</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('pre');
<a name="l2278"><span class="linenum">2278</span></a>          if (<a class="var it13871" onMouseOver="hilite(13871)" onMouseOut="lolite()" onClick="logVariable('validated')" href="../_variables/validated.html">$validated</a>) {
<a name="l2279"><span class="linenum">2279</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('plugins_management_confirm_buttons')" href="../_functions/plugins_management_confirm_buttons.html" onMouseOver="funcPopup(event,'plugins_management_confirm_buttons')">plugins_management_confirm_buttons</a>(<a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('continue')" href="../_variables/continue.html">$continue</a>, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l2280"><span class="linenum">2280</span></a>          } else {
<a name="l2281"><span class="linenum">2281</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('plugins_management_confirm_buttons')" href="../_functions/plugins_management_confirm_buttons.html" onMouseOver="funcPopup(event,'plugins_management_confirm_buttons')">plugins_management_confirm_buttons</a>(null, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l2282"><span class="linenum">2282</span></a>          }
<a name="l2283"><span class="linenum">2283</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l2284"><span class="linenum">2284</span></a>          die();
<a name="l2285"><span class="linenum">2285</span></a>      }
<a name="l2286"><span class="linenum">2286</span></a>  }
<a name="l2287"><span class="linenum">2287</span></a>  <span class="comment">/**</span>
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment"> * Method used to check the installed unoconv version.</span>
<a name="l2289"><span class="linenum">2289</span></a>  <span class="comment"> *</span>
<a name="l2290"><span class="linenum">2290</span></a>  <span class="comment"> * @param environment_results $result object to update, if relevant.</span>
<a name="l2291"><span class="linenum">2291</span></a>  <span class="comment"> * @return environment_results|null updated results or null if unoconv path is not executable.</span>
<a name="l2292"><span class="linenum">2292</span></a>  <span class="comment"> */</span>
<a name="l2293"><span class="linenum">2293</span></a>  function <a class="function" onClick="logFunction('check_unoconv_version')" href="../_functions/check_unoconv_version.html" onMouseOver="funcPopup(event,'check_unoconv_version')">check_unoconv_version</a>(environment_results <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l2294"><span class="linenum">2294</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2295"><span class="linenum">2295</span></a>  
<a name="l2296"><span class="linenum">2296</span></a>      if (!<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>() &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtounoconv')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pathtounoconv.html">pathtounoconv</a>) &amp;&amp; <a class="function" onClick="logFunction('file_is_executable')" href="../_functions/file_is_executable.html" onMouseOver="funcPopup(event,'file_is_executable')">file_is_executable</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtounoconv')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pathtounoconv.html">pathtounoconv</a>))) {
<a name="l2297"><span class="linenum">2297</span></a>          <a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = 0;
<a name="l2298"><span class="linenum">2298</span></a>          <a class="var it25523" onMouseOver="hilite(25523)" onMouseOut="lolite()" onClick="logVariable('supportedversion')" href="../_variables/supportedversion.html">$supportedversion</a> = 0.7;
<a name="l2299"><span class="linenum">2299</span></a>          <a class="var it25524" onMouseOver="hilite(25524)" onMouseOut="lolite()" onClick="logVariable('unoconvbin')" href="../_variables/unoconvbin.html">$unoconvbin</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtounoconv')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pathtounoconv.html">pathtounoconv</a>);
<a name="l2300"><span class="linenum">2300</span></a>          <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../_variables/command.html">$command</a> = &quot;<a class="var it25524" onMouseOver="hilite(25524)" onMouseOut="lolite()" onClick="logVariable('unoconvbin')" href="../_variables/unoconvbin.html">$unoconvbin</a> --version&quot;;
<a name="l2301"><span class="linenum">2301</span></a>          <a class="phpfunction" onClick="logFunction('exec')" href="../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>(<a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../_variables/command.html">$command</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l2302"><span class="linenum">2302</span></a>  
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">        // If the command execution returned some output, then get the unoconv version.</span>
<a name="l2304"><span class="linenum">2304</span></a>          if (<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l2305"><span class="linenum">2305</span></a>              foreach (<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> as <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../_variables/response.html">$response</a>) {
<a name="l2306"><span class="linenum">2306</span></a>                  if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/unoconv (\\d+\\.\\d+)/', <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../_variables/response.html">$response</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>)) {
<a name="l2307"><span class="linenum">2307</span></a>                      <a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> = (float)<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>[1];
<a name="l2308"><span class="linenum">2308</span></a>                  }
<a name="l2309"><span class="linenum">2309</span></a>              }
<a name="l2310"><span class="linenum">2310</span></a>          }
<a name="l2311"><span class="linenum">2311</span></a>  
<a name="l2312"><span class="linenum">2312</span></a>          if (<a class="var it6067" onMouseOver="hilite(6067)" onMouseOut="lolite()" onClick="logVariable('currentversion')" href="../_variables/currentversion.html">$currentversion</a> &lt; <a class="var it25523" onMouseOver="hilite(25523)" onMouseOut="lolite()" onClick="logVariable('supportedversion')" href="../_variables/supportedversion.html">$supportedversion</a>) {
<a name="l2313"><span class="linenum">2313</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setInfo')" href="../_functions/setinfo.html" onMouseOver="funcPopup(event,'setinfo')">setInfo</a>('unoconv version not supported');
<a name="l2314"><span class="linenum">2314</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('setStatus')" href="../_functions/setstatus.html" onMouseOver="funcPopup(event,'setstatus')">setStatus</a>(false);
<a name="l2315"><span class="linenum">2315</span></a>              return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2316"><span class="linenum">2316</span></a>          }
<a name="l2317"><span class="linenum">2317</span></a>      }
<a name="l2318"><span class="linenum">2318</span></a>      return null;
<a name="l2319"><span class="linenum">2319</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'upgradekey_form_page': ['upgradekey_form_page', 'Render a simple page for providing the upgrade key. ', [['admin','renderer.php',1937]], 1],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'cleanup_instances': ['cleanup_instances', 'Remove stale contexts that belonged to deleted instances. Ideally all code should cleanup contexts properly, unfortunately accidents happen... ', [['lib','accesslib.php',5975]], 5],
'upgrade_main_savepoint': ['upgrade_main_savepoint', 'Upgrade savepoint, marks end of each upgrade block. It stores new main version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',189]], 97],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'xmldb_main_upgrade': ['xmldb_main_upgrade', 'Main upgrade tasks to be executed on Moodle version bump ', [['lib/db','upgrade.php',45]], 1],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1080]], 229],
'default_exception_handler': ['default_exception_handler', 'Default exception handler. ', [['lib','setuplib.php',355]], 1],
'compare': ['compare', '', [['lib/lessphp/Tree','Dimension.php',122],['lib','weblib.php',625],['lib','navigationlib.php',5157],['lib/lessphp/Tree','Color.php',186],['lib/lessphp/Tree','Anonymous.php',32],['lib/lessphp/Tree','Keyword.php',37],['lib/lessphp/Tree','Unit.php',56],['lib/lessphp/Tree','Quoted.php',66],['lib/horde/framework/Horde/Array/Sort','Helper.php',26]], 46],
'events_update_definition': ['events_update_definition', 'Updates all of the event definitions within the database. ', [['lib','deprecatedlib.php',4035]], 22],
'guess_antelope_row_size': ['guess_antelope_row_size', 'Calculate proximate row size when using InnoDB tables in Antelope row format. ', [['lib/ddl','mysql_sql_generator.php',127]], 8],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'upgrade_plugins': ['upgrade_plugins', 'Upgrade plugins ', [['lib','upgradelib.php',422]], 1],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'mark_dirty': ['mark_dirty', 'Mark a context as dirty (with timestamp) so as to force reloading of the context. ', [['lib','accesslib.php',5843]], 40],
'get_row_format': ['get_row_format', 'Get the row format from the database schema. ', [['lib/dml','mysqli_native_moodle_database.php',285]], 5],
'end_tag': ['end_tag', 'Outputs a closing tag ', [['lib','outputcomponents.php',1096],['backup/util/xml/parser','progressive_parser.class.php',261],['backup/util/xml','xml_writer.class.php',177]], 867],
'upgrade_set_timeout': ['upgrade_set_timeout', 'Sets maximum expected time needed for upgrade task. Please always make sure that upgrade will not run longer! ', [['lib','upgradelib.php',140]], 8],
'check_database_storage_engine': ['check_database_storage_engine', 'This function verifies that the database is not using an unsupported storage engine. ', [['lib','upgradelib.php',2071]], 0],
'continue_button': ['continue_button', 'Displays a continue button ', [['backup/util/ui','renderer.php',501],['lib','outputrenderers.php',2990]], 96],
'upgrade_core': ['upgrade_core', 'Upgrade moodle core ', [['lib','upgradelib.php',1650]], 2],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'upgrade_mod_savepoint': ['upgrade_mod_savepoint', 'Module upgrade savepoint, marks end of module upgrade blocks It stores module version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',233]], 67],
'set_debug': ['set_debug', 'Enable/disable very detailed debugging. ', [['lib/dml','moodle_database.php',1117],['lib/dml/tests','dml_test.php',5540]], 13],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 556],
'reset_caches': ['reset_caches', 'This implementation does not use any caches. ', [['lib/classes','string_manager_install.php',245],['lib/classes','plugin_manager.php',115],['lib/classes/update','checker.php',74],['backup/moodle2','restore_stepslib.php',1538],['tag/classes','index_builder.php',367],['repository','lib.php',2636],['lib/dml','moodle_database.php',1052],['lib/classes','filetypes.php',419],['lib','accesslib.php',5149],['lib','accesslib.php',6045],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','string_manager_standard.php',599],['lib/classes','string_manager.php',127],['lib','filterlib.php',97],['lib/classes','text.php',108],['lib/classes','user.php',486]], 111],
'upgrade_setup_debug': ['upgrade_setup_debug', '', [['lib','upgradelib.php',1451]], 3],
'purge_all_caches': ['purge_all_caches', 'Invalidates browser caches and cached data in temp. ', [['lib','moodlelib.php',1593]], 13],
'upgrade_stale_php_files_present': ['upgrade_stale_php_files_present', 'Detect if there are leftovers in PHP source files. ', [['lib','upgradelib.php',361]], 2],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'unset_config': ['unset_config', 'Removes a key from global configuration. ', [['lib','moodlelib.php',1504]], 77],
'where': ['where', '', [['question/engine','datalib.php',1883],['question/engine','datalib.php',1965],['mod/glossary/classes','entry_query_builder.php',448],['question/classes/bank/search','hidden_condition.php',53],['question/classes/bank/search','category_condition.php',96]], 64],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'external_delete_descriptions': ['external_delete_descriptions', 'Delete all pre-built services (+ related tokens) and external functions information defined in the specified component. ', [['lib','externallib.php',748]], 2],
'upgrade_log': ['upgrade_log', 'Adds log entry into upgrade_log table ', [['lib','upgradelib.php',1305]], 12],
'upgrade_noncore': ['upgrade_noncore', 'Upgrade/install other parts of moodle ', [['lib','upgradelib.php',1724]], 3],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'upgrade_fix_missing_root_folders_draft': ['upgrade_fix_missing_root_folders_draft', 'Detect draft file areas with missing root directory records and add them. ', [['lib','upgradelib.php',2041]], 2],
'render': ['render', 'Renders this element ', [['lib/classes/output','inplace_editable.php',238],['lib/adodb','adodb-pager.inc.php',241],['lib/phpexcel/PHPExcel','Chart.php',656],['lib','formslib.php',948],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',170],['lib','outputrenderers.php',302],['question/behaviour','behaviourbase.php',97],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['filter/tex','latex.php',88],['lib','portfoliolib.php',241],['mod/quiz/classes/question/bank','custom_view.php',133],['lib/mustache/src/Mustache','Engine.php',204],['question/engine/tests','helpers.php',797],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib/mustache/src/Mustache','Template.php',57],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',790],['question/engine','questionattempt.php',814],['lib/mustache/src/Mustache','LambdaHelper.php',39]], 942],
'print_upgrade_part_end': ['print_upgrade_part_end', 'Default end upgrade callback ', [['lib','upgradelib.php',1507]], 2],
'upgrade_plugins_blocks': ['upgrade_plugins_blocks', 'This function finds all available blocks and install them into blocks table or do all the upgrade process if newer. ', [['lib','upgradelib.php',763]], 1],
'get_columns': ['get_columns', 'Returns detailed information about columns in table. This information is cached internally. ', [['lib/dml','oci_native_moodle_database.php',464],['lib','csvlib.class.php',190],['lib/dml','sqlite3_pdo_moodle_database.php',195],['lib/dml','pgsql_native_moodle_database.php',353],['lib/dml','mssql_native_moodle_database.php',432],['lib/dml','mysqli_native_moodle_database.php',572],['lib/dml','sqlsrv_native_moodle_database.php',503],['lib/dml/tests','dml_test.php',5538]], 107],
'create_instances': ['create_instances', '', [['backup/cc','cc2moodle.php',609],['lib','accesslib.php',6006]], 9],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'check_upgrade_key': ['check_upgrade_key', 'Assert the upgrade key is provided, if it is defined. ', [['lib','upgradelib.php',2196]], 2],
'upgrade_plugin_mnet_functions': ['upgrade_plugin_mnet_functions', 'upgrades the mnet rpc definitions for the given component. this method doesn\'t return status, an exception will be thrown in the case of an error ', [['lib','upgradelib.php',1790]], 9],
'get_debug': ['get_debug', 'Returns debug status ', [['lib/dml','moodle_database.php',1126],['lib/dml/tests','dml_test.php',5541]], 6],
'upgrade_handle_exception': ['upgrade_handle_exception', 'upgrade logging functions ', [['lib','upgradelib.php',1285]], 6],
'print_upgrade_separator': ['print_upgrade_separator', '', [['lib','upgradelib.php',1468]], 2],
'upgrade_finished_handler': ['upgrade_finished_handler', 'Internal function - executed if upgrade interrupted. ', [['lib','upgradelib.php',1411]], 0],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'update_capabilities': ['update_capabilities', 'Updates the capabilities table with the component capability definitions. If no parameters are given, the function updates the core moodle capabilities. ', [['lib','accesslib.php',2689]], 13],
'get_exception_info': ['get_exception_info', 'Returns detailed information about specified exception. ', [['lib','setuplib.php',498],['lib/tests','setuplib_test.php',449]], 22],
'normalize_component': ['normalize_component', 'Normalize the component name using the "frankenstyle" names. ', [['lib','deprecatedlib.php',211],['lib/classes','component.php',1016]], 89],
'get_dbengine': ['get_dbengine', 'Returns the current MySQL db engine. ', [['lib/dml','mysqli_native_moodle_database.php',144]], 7],
'upgrade_language_pack': ['upgrade_language_pack', 'Try to upgrade the given language pack (or current language) ', [['lib','upgradelib.php',1548]], 1],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'check_slasharguments': ['check_slasharguments', 'Method used to check the usage of slasharguments config and display a warning message. ', [['lib','upgradelib.php',2095]], 0],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'message_update_processors': ['message_update_processors', 'This function populates default message preferences for all existing providers when the new message processor is added. ', [['lib','messagelib.php',290]], 3],
'get_tables': ['get_tables', 'Return tables in database WITHOUT current prefix ', [['lib/dml','oci_native_moodle_database.php',384],['lib/dml','sqlite3_pdo_moodle_database.php',137],['lib/dml','pgsql_native_moodle_database.php',272],['lib/dml','mssql_native_moodle_database.php',349],['lib/dml','mysqli_native_moodle_database.php',512],['lib/dml','sqlsrv_native_moodle_database.php',407],['lib/dml/tests','dml_test.php',5536]], 36],
'translation_exists': ['translation_exists', 'Checks if the translation exists for the language ', [['lib/classes','string_manager_install.php',198],['lib/classes','string_manager_standard.php',492],['lib/classes','string_manager.php',93]], 10],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'upgrade_finished': ['upgrade_finished', 'Indicates upgrade is finished. ', [['lib','upgradelib.php',1418]], 4],
'make_cache_directory': ['make_cache_directory', 'Create a directory under cachedir and make sure it is writable. ', [['lib','setuplib.php',1669]], 16],
'current_language': ['current_language', 'Returns the code for the current language ', [['lib','moodlelib.php',6589]], 44],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'blocks_add_default_course_blocks': ['blocks_add_default_course_blocks', 'Add the default blocks to a course. ', [['lib','blocklib.php',2234]], 2],
'print_upgrade_part_start': ['print_upgrade_part_start', 'Default start upgrade callback ', [['lib','upgradelib.php',1474]], 2],
'getmethod': ['getmethod', '', [['lib/google/src/Google/Service','Appengine.php',1321],['lib/google/src/Google/Service','ShoppingContent.php',3136],['lib/google/src/Google/Service','ShoppingContent.php',3320],['lib/google/src/Google/Service','ShoppingContent.php',3494],['lib/google/src/Google/Service','ShoppingContent.php',3669],['lib/google/src/Google/Service','ShoppingContent.php',4233],['lib/google/src/Google/Service','ShoppingContent.php',4398],['lib/google/src/Google/Service','ShoppingContent.php',5651],['lib/google/src/Google/Service','ShoppingContent.php',6318],['lib/google/src/Google/Service','ShoppingContent.php',8486],['lib/google/src/Google/Service','ShoppingContent.php',8668],['lib/google/src/Google/Service','Storage.php',2343],['lib/google/src/Google/Service','Logging.php',252],['lib/google/src/Google/Service','SiteVerification.php',311],['lib/google/src/Google/Service','Calendar.php',2409],['lib/google/src/Google/Service','Calendar.php',3388]], 6],
'admin_apply_default_settings': ['admin_apply_default_settings', 'This function applies default settings. ', [['lib','adminlib.php',7292]], 7],
'plugins_management_confirm_buttons': ['plugins_management_confirm_buttons', 'Display the continue / cancel widgets for the plugins management pages. ', [['admin','renderer.php',1101]], 3],
'upgrade_block_savepoint': ['upgrade_block_savepoint', 'Blocks upgrade savepoint, marks end of blocks upgrade blocks It stores block version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',277]], 8],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'during_initial_install': ['during_initial_install', 'Indicates whether we are in the middle of the initial Moodle install. ', [['lib','setuplib.php',1191]], 51],
'message_update_providers': ['message_update_providers', 'Updates the message_providers table with the current set of message providers ', [['lib','messagelib.php',233]], 11],
'make_writable_directory': ['make_writable_directory', 'Create a directory and make sure it is writable. ', [['lib','setuplib.php',1506]], 21],
'check_database_tables_row_format': ['check_database_tables_row_format', 'This function verifies if the database has tables using innoDB Antelope row format. ', [['lib','upgradelib.php',2113]], 0],
'remove_dir': ['remove_dir', 'Delete directory or only its content ', [['lib','moodlelib.php',9041]], 47],
'upgrade_install_plugins': ['upgrade_install_plugins', 'Helper procedure/macro for installing remote plugins at admin/index.php ', [['lib','upgradelib.php',2224]], 16],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 90],
'build_all_paths': ['build_all_paths', 'Rebuild paths and depths in all context levels. ', [['lib','accesslib.php',6028]], 8],
'abort_all_db_transactions': ['abort_all_db_transactions', 'Unconditionally abort all database transactions, this function should be called from exception handlers only. ', [['lib','setuplib.php',430]], 3],
'js_init_code': ['js_init_code', 'Add short static javascript code fragment to page footer. This is intended primarily for loading of js modules and initialising page layout. Ideally the JS code fragment should be stored in plugin renderer so that themes may override it. ', [['lib','outputrequirementslib.php',1090]], 7],
'set_show_closebutton': ['set_show_closebutton', 'Set whether this notification should include a button to disiss itself. ', [['lib/classes/output','notification.php',136]], 2],
'_self_test': ['_self_test', 'Tests if this block has been implemented correctly. Also, $errors isn\'t used right now ', [['blocks','moodleblock.class.php',297]], 1],
'set_cacheable': ['set_cacheable', 'Sets whether the browser should cache this page or not. ', [['lib','pagelib.php',1349]], 26],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'admin_mnet_method_profile': ['admin_mnet_method_profile', 'Given some sort of reflection function/method object, return a profile array, ready to be serialized and stored ', [['lib','upgradelib.php',1970]], 1],
'tool_langimport_preupgrade_update': ['tool_langimport_preupgrade_update', 'Called during upgrade, we need up-to-date lang pack because it may be used during upgrade... ', [['admin/tool/langimport','lib.php',28]], 1],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'install_from_xmldb_file': ['install_from_xmldb_file', 'This function will load one entire XMLDB file and call install_from_xmldb_structure. ', [['lib/ddl','database_manager.php',361]], 7],
'upgrade_plugin_savepoint': ['upgrade_plugin_savepoint', 'Plugins upgrade savepoint, marks end of blocks upgrade blocks It stores plugin version, resets upgrade timeout and abort upgrade if user cancels page loading. ', [['lib','upgradelib.php',321]], 23],
'log_update_descriptions': ['log_update_descriptions', 'Log_display description function used during install and upgrade. ', [['lib','upgradelib.php',975]], 13],
'install_plugins': ['install_plugins', 'Perform the installation of plugins. ', [['lib/classes','plugin_manager.php',1224]], 2],
'get_title': ['get_title', 'Return criteria title for display in reports ', [['completion/criteria','completion_criteria_course.php',120],['question/classes/bank','question_type_column.php',30],['lib/simplepie/library','SimplePie.php',1969],['completion/criteria','completion_criteria_date.php',106],['lib/simplepie/library/SimplePie','Source.php',104],['question/classes/bank','question_text_row.php',39],['question/classes/bank','modifier_name_column.php',31],['question/classes/bank','checkbox_column.php',36],['lib','outputcomponents.php',2764],['question/classes/bank','action_column_base.php',28],['lib/simplepie/library/SimplePie','Enclosure.php',860],['lib','navigationlib.php',582],['completion/criteria','completion_criteria_role.php',118],['lib/simplepie/library/SimplePie','Item.php',260],['question/classes/bank','question_name_column.php',32],['blocks','moodleblock.class.php',155],['blocks/rss_client/classes/output','channel_image.php',122],['blocks/rss_client/classes/output','item.php',194],['completion/criteria','completion_criteria_self.php',109],['completion/criteria','completion_criteria_grade.php',131],['completion/criteria','completion_criteria_unenrol.php',92],['lib','authlib.php',531],['enrol','locallib.php',1404],['lib/classes','chart_base.php',141],['blocks/rss_client/classes/output','feed.php',125],['badges/criteria','award_criteria.php',162],['completion/criteria','completion_criteria_activity.php',166],['question/classes/bank','creator_name_column.php',32],['enrol/manual','locallib.php',167],['enrol/manual','locallib.php',314],['completion/criteria','completion_criteria_duration.php',153]], 73],
'upgrade_init_javascript': ['upgrade_init_javascript', 'Sets up JS code required for all upgrade scripts. ', [['lib','upgradelib.php',1536]], 2],
'setstatus': ['setstatus', '', [['lib/google/src/Google/Service','AdSense.php',2589],['lib/google/src/Google/Service','Replicapool.php',1059],['lib/google/src/Google/Service','Tasks.php',695],['lib/google/src/Google/Service','AndroidPublisher.php',3063],['lib/google/src/Google/Service','Reseller.php',953],['lib/google/src/Google/Service','Computeaccounts.php',1262],['lib/google/src/Google/Service','YouTubeAnalytics.php',731],['lib/google/src/Google/Service','Dns.php',556],['lib/google/src/Google/Service','Urlshortener.php',364],['lib/google/src/Google/Service','AdExchangeBuyer.php',2033],['lib/google/src/Google/Service','AdExchangeBuyer.php',5089],['lib/google/src/Google/Service','AdExchangeBuyer.php',5312],['lib/google/src/Google/Service','Analytics.php',5698],['lib/google/src/Google/Service','Analytics.php',5801],['lib/google/src/Google/Service','Analytics.php',9129],['lib/google/src/Google/Service','Analytics.php',9341],['lib/google/src/Google/Service','DoubleClickBidManager.php',844],['lib/google/src/Google/Service','DeploymentManager.php',1498],['lib/google/src/Google/Service','Blogger.php',1806],['lib/google/src/Google/Service','Blogger.php',2161],['lib/google/src/Google/Service','Blogger.php',2431],['lib/google/src/Google/Service','Blogger.php',2796],['lib/google/src/Google/Service','CloudUserAccounts.php',1701],['lib/google/src/Google/Service','Replicapoolupdater.php',559],['lib/google/src/Google/Service','Replicapoolupdater.php',820],['lib/google/src/Google/Service','Replicapoolupdater.php',1178],['lib/google/src/Google/Service','Bigquery.php',1643],['lib/google/src/Google/Service','Bigquery.php',2343],['lib/google/src/Google/Service','ShoppingContent.php',2210],['lib/google/src/Google/Service','ShoppingContent.php',5074],['lib/google/src/Google/Service','ShoppingContent.php',5934],['lib/google/src/Google/Service','ShoppingContent.php',6594],['lib/google/src/Google/Service','ShoppingContent.php',7104],['lib/google/src/Google/Service','Clouddebugger.php',587],['lib/google/src/Google/Service','Clouddebugger.php',786],['lib/google/src/Google/Service','Clouddebugger.php',1319],['lib/google/src/Google/Service','Container.php',611],['lib/google/src/Google/Service','Container.php',836],['lib','environmentlib.php',1286],['lib/google/src/Google/Service','Games.php',5810],['lib/google/src/Google/Service','Games.php',6299],['lib/google/src/Google/Service','Games.php',6437],['lib/google/src/Google/Service','Games.php',6494],['lib/google/src/Google/Service','Games.php',6970],['lib/google/src/Google/Service','Games.php',7246],['lib/google/src/Google/Service','Logging.php',328],['lib/google/src/Google/Service','Autoscaler.php',973],['lib/google/src/Google/Service','Autoscaler.php',1294],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',122],['lib/google/src/Google/Service','Drive.php',3829],['lib/google/src/Google/Service','Proximitybeacon.php',766],['lib/google/src/Google/Service','Directory.php',3902],['lib/google/src/Google/Service','Directory.php',4906],['lib/google/src/Google/Service','Directory.php',6673],['lib/google/src/Google/Service','AdSenseHost.php',1258],['lib/google/src/Google/Service','AdSenseHost.php',1628],['lib/google/src/Google/Service','AdSenseHost.php',1855],['lib/google/src/Google/Service','Playmoviespartner.php',1066],['lib/google/src/Google/Service','Playmoviespartner.php',1402],['lib/google/src/Google/Service','Calendar.php',2942],['lib/google/src/Google/Service','Storagetransfer.php',1227],['lib/google/src/Google/Service','Storagetransfer.php',1312],['lib/google/src/Google/Service','Resourceviews.php',788],['lib/google/src/Google/Service','SQLAdmin.php',1726],['lib/google/src/Google/Service','SQLAdmin.php',2958],['lib/google/src/Google/Service','Compute.php',8561],['lib/google/src/Google/Service','Compute.php',9847],['lib/google/src/Google/Service','Compute.php',11515],['lib/google/src/Google/Service','Compute.php',11758],['lib/google/src/Google/Service','Compute.php',13179],['lib/google/src/Google/Service','Compute.php',14232],['lib/google/src/Google/Service','Compute.php',14905],['lib/google/src/Google/Service','Compute.php',15464],['lib/google/src/Google/Service','Compute.php',16814],['lib/google/src/Google/Service','Compute.php',17532],['lib/google/src/Google/Service','Compute.php',17846],['lib/google/src/Google/Service','YouTube.php',5442],['lib/google/src/Google/Service','YouTube.php',5631],['lib/google/src/Google/Service','YouTube.php',8710],['lib/google/src/Google/Service','YouTube.php',9235],['lib/google/src/Google/Service','YouTube.php',9342],['lib/google/src/Google/Service','YouTube.php',9725],['lib/google/src/Google/Service','YouTube.php',9807],['lib/google/src/Google/Service','YouTube.php',11314],['lib/google/src/Google/Service','Dfareporting.php',10132],['lib/google/src/Google/Service','Dfareporting.php',13563],['lib/google/src/Google/Service','Dfareporting.php',14418],['lib/google/src/Google/Service','Dfareporting.php',16325],['lib/google/src/Google/Service','Dfareporting.php',17428],['lib/google/src/Google/Service','Manager.php',586]], 64],
'get_all_versions_hash': ['get_all_versions_hash', 'Returns hash of all versions including core and all plugins. ', [['lib/classes','component.php',1117]], 5],
'make_localcache_directory': ['make_localcache_directory', 'Create a directory under localcachedir and make sure it is writable. The files in this directory MUST NOT change, use revisions or content hashes to work around this limitation - this means you can only add new files here. ', [['lib','setuplib.php',1689]], 17],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'external_update_services': ['external_update_services', 'Allow plugins and subsystems to add external functions to other plugins or built-in services. This function is executed just after all the plugins have been updated. ', [['lib','upgradelib.php',1239]], 1],
'core_tables_exist': ['core_tables_exist', 'Checks if the main tables have been installed yet or not. ', [['lib','upgradelib.php',1765]], 1],
'purge_all': ['purge_all', 'Purge all of the cache stores of all of their data. ', [['cache/classes','helper.php',464]], 11],
'check_unoconv_version': ['check_unoconv_version', 'Method used to check the installed unoconv version. ', [['lib','upgradelib.php',2287]], 0],
'get_dbfamily': ['get_dbfamily', 'Returns database family type - describes SQL dialect Note: can be used before connect() ', [['lib/dml','oci_native_moodle_database.php',67],['lib/dml','sqlite3_pdo_moodle_database.php',50],['lib/dml','pgsql_native_moodle_database.php',60],['lib/dml','mssql_native_moodle_database.php',61],['lib/dml','mysqli_native_moodle_database.php',117],['lib/dml','sqlsrv_native_moodle_database.php',81],['lib/dml/tests','dml_test.php',5527]], 54],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'get_plugin_types': ['get_plugin_types', 'Lists all plugin types. ', [['lib','deprecatedlib.php',116],['lib/classes','plugin_manager.php',140],['lib/classes','component.php',786]], 60],
'format_backtrace': ['format_backtrace', 'Formats a backtrace ready for output. ', [['lib','setuplib.php',729]], 20],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'xmldb_main_install': ['xmldb_main_install', 'Main post-install tasks to be executed after the BD schema is available ', [['lib/db','install.php',31]], 1],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'set_debugging': ['set_debugging', 'Alter debugging level for the current request, the change is not saved in database. ', [['lib','weblib.php',2994]], 36],
'update_definitions': ['update_definitions', 'Updates the definition in the configuration from those found in the cache files. ', [['cache','disabledlib.php',449],['cache','locallib.php',494],['cache/classes','helper.php',582]], 7],
'start_delegated_transaction': ['start_delegated_transaction', 'On DBs that support it, switch to transaction mode and begin a transaction you\'ll need to ensure you call allow_commit() on the returned object or your changes *will* be lost. ', [['lib/dml','moodle_database.php',2393]], 145],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'reset_definitions_for_component': ['reset_definitions_for_component', 'Update the database to contain a list of tagged areas for a component. The list of tagged areas is read from [plugindir]/db/tag.php ', [['tag/classes','area.php',257]], 11],
'allow_commit': ['allow_commit', 'Commit delegated transaction. The real database commit SQL is executed only after committing all delegated transactions. ', [['lib/dml','moodle_transaction.php',78]], 135],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'raise_memory_limit': ['raise_memory_limit', 'Function to raise the memory limit to a new value. Will respect the memory limit if it is higher, thus allowing settings in php.ini, apache conf or command line switches to override it. ', [['lib','setuplib.php',1206]], 59],
'setinfo': ['setinfo', 'Set the auxiliary info ', [['lib','environmentlib.php',1334],['lib/google/src/Google/Service','Genomics.php',1586],['lib/google/src/Google/Service','Genomics.php',2543],['lib/google/src/Google/Service','Genomics.php',2668],['lib/google/src/Google/Service','Genomics.php',2761],['lib/google/src/Google/Service','Genomics.php',3741],['lib/google/src/Google/Service','Genomics.php',3844],['lib/google/src/Google/Service','Genomics.php',3946]], 10],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1642]], 50],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib','deprecatedlib.php',226],['lib/classes','component.php',1051]], 51],
'blocks_add_default_system_blocks': ['blocks_add_default_system_blocks', 'Add the default system-context blocks. E.g. the admin tree. ', [['lib','blocklib.php',2267]], 1],
'get_plugin_directory': ['get_plugin_directory', 'Returns the exact absolute path to plugin directory. ', [['lib','deprecatedlib.php',191],['lib/classes','component.php',938]], 22],
'start_tag': ['start_tag', 'Outputs an opening tag with attributes ', [['lib','outputcomponents.php',1085],['backup/util/xml/parser','progressive_parser.class.php',215]], 701],
'upgrade_plugins_modules': ['upgrade_plugins_modules', 'Find and check all modules and load them up or upgrade them if necessary ', [['lib','upgradelib.php',585]], 1],
'update_handlers_for_component': ['update_handlers_for_component', 'Update the database to create, update, and remove handlers. ', [['lib/classes/message/inbound','manager.php',62]], 11],
'upgrade_started': ['upgrade_started', 'Marks start of upgrade, blocks any other access to site. The upgrade is finished at the end of script or after timeout. ', [['lib','upgradelib.php',1371]], 5],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers.js',27],['lib/yuilib/3.17.2/timers','timers-debug.js',27]], 615],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'admin_mnet_method_get_docblock': ['admin_mnet_method_get_docblock', 'Given some sort of reflection function/method object, return an array of docblock lines, where each line is an array of keywords/descriptions ', [['lib','upgradelib.php',2001]], 2],
'external_update_descriptions': ['external_update_descriptions', 'Web service discovery function used during install and upgrade. ', [['lib','upgradelib.php',1033]], 11],
'register_function': ['register_function', 'Register custom shutdown function. ', [['lib/classes','shutdown_manager.php',53]], 11],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'admin_mnet_method_get_help': ['admin_mnet_method_get_help', 'Given some sort of reflection function/method object, return just the help text ', [['lib','upgradelib.php',2024]], 1],
'file_is_executable': ['file_is_executable', 'Tells whether the filename is executable. ', [['lib','filelib.php',2488]], 6],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'upgrade_minmaxgrade': ['upgrade_minmaxgrade', 'Upgrade the minmaxgrade setting. ', [['lib','upgradelib.php',2145]], 5],
'install_core': ['install_core', 'Install core moodle tables and initialize ', [['lib','upgradelib.php',1589]], 2],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'reset_scheduled_tasks_for_component': ['reset_scheduled_tasks_for_component', 'Update the database to contain a list of scheduled task for a component. The list of scheduled tasks is taken from @load_scheduled_tasks_for_component. Will throw exceptions for any errors. ', [['lib/classes/task','manager.php',79]], 13],
'exec': ['exec', '', [], 346],
'array_filter': ['array_filter', '', [], 70],
'is_object': ['is_object', '', [], 544],
'in_array': ['in_array', '', [], 1234],
'max': ['max', '', [], 1266],
'sort': ['sort', '', [], 241],
'explode': ['explode', '', [], 1572],
'is_string': ['is_string', '', [], 536],
'get_class': ['get_class', '', [], 305],
'implode': ['implode', '', [], 1281],
'strpos': ['strpos', '', [], 1604],
'preg_split': ['preg_split', '', [], 146],
'is_array': ['is_array', '', [], 1608],
'define': ['define', '', [], 2373],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'time': ['time', '', [], 1959],
'trim': ['trim', '', [], 1948],
'array_values': ['array_values', '', [], 342],
'array_search': ['array_search', '', [], 170],
'is_null': ['is_null', '', [], 2003],
'array_map': ['array_map', '', [], 169],
'ignore_user_abort': ['ignore_user_abort', '', [], 25],
'str_replace': ['str_replace', '', [], 1648],
'header': ['header', '', [], 1355],
'preg_match': ['preg_match', '', [], 1286],
'serialize': ['serialize', '', [], 282],
'connection_aborted': ['connection_aborted', '', [], 9],
'array_key_exists': ['array_key_exists', '', [], 1445],
'sha1': ['sha1', '', [], 186],
'defined': ['defined', '', [], 4731],
'class_exists': ['class_exists', '', [], 279],
'escapeshellarg': ['escapeshellarg', '', [], 38],
'array_diff': ['array_diff', '', [], 102],
'is_bool': ['is_bool', '', [], 153],
'function_exists': ['function_exists', '', [], 419],
'is_readable': ['is_readable', '', [], 196]};
CLASS_DATA={
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'notification': ['notification', 'Data structure representing a notification. ', [['lib/classes/output','notification.php',27],['lib/classes','notification.php',29]], 106],
'upgrade_requires_exception': ['upgrade_requires_exception', '', [['lib','upgradelib.php',75]], 3],
'upgrade_exception': ['upgrade_exception', 'Exception indicating unknown error during upgrade. ', [['lib','upgradelib.php',36]], 4],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'core_plugin_manager': ['core_plugin_manager', 'Singleton class providing general plugins management functionality. ', [['lib/classes','plugin_manager.php',31]], 211],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 92],
'core_tag_area': ['core_tag_area', 'Class to manage tag areas ', [['tag/classes','area.php',27]], 48],
'downgrade_exception': ['downgrade_exception', 'Exception indicating downgrade error during upgrade. ', [['lib','upgradelib.php',52]], 7],
'file': ['file', 'File based session handler. ', [['lib/classes/session','file.php',29]], 9],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'plugin_defective_exception': ['plugin_defective_exception', '', [['lib','upgradelib.php',93]], 20],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'plugin_misplaced_exception': ['plugin_misplaced_exception', 'Misplaced plugin exception. ', [['lib','upgradelib.php',100]], 3],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 139],
'core_shutdown_manager': ['core_shutdown_manager', 'Shutdown management class. ', [['lib/classes','shutdown_manager.php',27]], 12],
'manager': ['manager', 'Search subsystem manager. ', [['search/classes','manager.php',31],['user/classes/output/myprofile','manager.php',28],['lib/classes/antivirus','manager.php',29],['lib/classes/event','manager.php',30],['lib/classes/task','manager.php',28],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/message','manager.php',31]], 585]};
CONST_DATA={
'PARAM_COMPONENT': ['PARAM_COMPONENT', '', [['lib','moodlelib.php',310]], 113],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'URL_MATCH_PARAMS': ['URL_MATCH_PARAMS', '', [['lib','weblib.php',75]], 9],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 200],
'UPGRADE_LOG_NORMAL': ['UPGRADE_LOG_NORMAL', '', [['lib','upgradelib.php',30]], 12],
'UPGRADE_LOG_NOTICE': ['UPGRADE_LOG_NOTICE', '', [['lib','upgradelib.php',32]], 1],
'CLI_SCRIPT': ['CLI_SCRIPT', '', [['enrol/ldap/cli','sync.php',43],['lib/filestorage/tests/fixtures','zip_create_test_file.php',25],['admin/cli','fix_course_sequence.php',26],['admin/tool/behat/cli','run.php',30],['admin/cli','upgrade.php',38],['admin/cli','install.php',32],['admin/tool/uploadcourse/cli','uploadcourse.php',25],['admin/cli','fix_orphaned_question_categories.php',29],['admin/tool/generator/cli','maketestsite.php',25],['admin/cli','purge_caches.php',24],['admin/cli','install_database.php',31],['admin/tool/behat/cli','util.php',34],['admin/tool/task/cli','schedule_task.php',25],['admin/tool/replace/cli','replace.php',25],['auth/db/cli','sync_users.php',45],['admin/cli','automated_backups.php',29],['enrol/manual/cli','sync.php',30],['lib/editor/tinymce/cli','update_lang_files.php',25],['auth/ldap/cli','sync_users.php',47],['admin/cli','fix_deleted_users.php',26],['admin/cli','maintenance.php',26],['lib/tests/behat','behat_hooks.php',133],['admin/cli','reset_password.php',27],['admin/tool/dbtransfer/cli','migrate.php',30],['enrol/category/cli','sync.php',33],['admin/cli','mysql_compressed_rows.php',26],['enrol/paypal/cli','sync.php',30],['admin/cli','cron.php',31],['enrol/database/cli','sync.php',34],['admin/cli','mysql_collation.php',25],['auth/cas/cli','sync_users.php',43],['enrol/cohort/cli','sync.php',31],['admin/tool/generator/cli','maketestcourse.php',25],['admin/cli','backup.php',26],['search/cli','indexer.php',25],['admin/cli','check_database_schema.php',26],['admin/tool/behat/cli','util_single_run.php',90],['enrol/self/cli','sync.php',31],['','install.php',46],['theme/base/cli','svgtool.php',26],['admin','cron.php',47],['admin/tool/behat/cli','init.php',36],['enrol/meta/cli','sync.php',31],['admin/cli','alternative_component_cache.php',30],['admin/tool/generator/cli','maketestplan.php',25],['lib/phpunit','bootstrap.php',73],['lib','setup.php',289],['mod/chat','chatd.php',25],['lib/filestorage/tests/fixtures','zip_info.php',25],['enrol/flatfile/cli','sync.php',45],['admin/cli','mysql_engine.php',27]], 114],
'UPGRADE_LOG_ERROR': ['UPGRADE_LOG_ERROR', '', [['lib','upgradelib.php',34]], 2],
'MEMORY_EXTRA': ['MEMORY_EXTRA', '', [['lib','setuplib.php',50]], 40]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
