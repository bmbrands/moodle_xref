<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/pagelib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='pagelib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="pagelib.php.html">pagelib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="pagelib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="pagelib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains the moodle_page class. There is normally a single instance</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * of this class in the $PAGE global variable. This class is a central repository</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * of information about the page we are building up to send back to the user.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package core</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @category page</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> */</span>
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/**</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * $PAGE is a central store of information about the current page we are</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * generating in response to the user's request.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * It does not do very much itself</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * except keep track of information, however, it serves as the access point to</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * some more significant components like $PAGE-&gt;theme, $PAGE-&gt;requires,</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * $PAGE-&gt;blocks, etc.</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * @package core</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * @category page</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> *</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * The following properties are alphabetical. Please keep it that way so that its</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * easy to maintain.</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> *</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * @property-read string $activityname The type of activity we are in, for example 'forum' or 'quiz'.</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> *      Will be null if this page is not within a module.</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * @property-read stdClass $activityrecord The row from the activities own database table (for example</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> *      the forum or quiz table) that this page belongs to. Will be null</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> *      if this page is not within a module.</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @property-read array $alternativeversions Mime type =&gt; object with -&gt;url and -&gt;title.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @property-read block_manager $blocks The blocks manager object for this page.</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @property-read array $blockmanipulations</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @property-read string $bodyclasses A string to use within the class attribute on the body tag.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @property-read string $bodyid A string to use as the id of the body tag.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @property-read string $button The HTML to go where the Turn editing on button normally goes.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * @property-read bool $cacheable Defaults to true. Set to false to stop the page being cached at all.</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * @property-read array $categories An array of all the categories the page course belongs to,</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> *      starting with the immediately containing category, and working out to</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> *      the top-level category. This may be the empty array if we are in the</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> *      front page course.</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> * @property-read mixed $category The category that the page course belongs to.</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> * @property-read cm_info $cm The course_module that this page belongs to. Will be null</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> *      if this page is not within a module. This is a full cm object, as loaded</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> *      by get_coursemodule_from_id or get_coursemodule_from_instance,</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> *      so the extra modname and name fields are present.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * @property-read context $context The main context to which this page belongs.</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * @property-read stdClass $course The current course that we are inside - a row from the</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *      course table. (Also available as $COURSE global.) If we are not inside</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> *      an actual course, this will be the site course.</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @property-read string $devicetypeinuse The name of the device type in use</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> * @property-read string $docspath The path to the Moodle docs for this page.</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> * @property-read string $focuscontrol The id of the HTML element to be focused when the page has loaded.</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment"> * @property-read bool $headerprinted True if the page header has already been printed.</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment"> * @property-read string $heading The main heading that should be displayed at the top of the &lt;body&gt;.</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment"> * @property-read string $headingmenu The menu (or actions) to display in the heading</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment"> * @property-read array $layout_options An arrays with options for the layout file.</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment"> * @property-read array $legacythemeinuse True if the legacy browser theme is in use.</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> * @property-read navbar $navbar The navbar object used to display the navbar</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * @property-read global_navigation $navigation The navigation structure for this page.</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * @property-read xhtml_container_stack $opencontainers Tracks XHTML tags on this page that have been opened but not closed.</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> *      mainly for internal use by the rendering code.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * @property-read string $pagelayout The general type of page this is. For example 'normal', 'popup', 'home'.</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> *      Allows the theme to display things differently, if it wishes to.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> * @property-read string $pagetype The page type string, should be used as the id for the body tag in the theme.</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * @property-read int $periodicrefreshdelay The periodic refresh delay to use with meta refresh</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> * @property-read page_requirements_manager $requires Tracks the JavaScript, CSS files, etc. required by this page.</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> * @property-read string $requestip The IP address of the current request, null if unknown.</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment"> * @property-read string $requestorigin The type of request 'web', 'ws', 'cli', 'restore', etc.</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> * @property-read settings_navigation $settingsnav The settings navigation</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment"> * @property-read int $state One of the STATE_... constants</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment"> * @property-read string $subpage The subpage identifier, if any.</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> * @property-read theme_config $theme The theme for this page.</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment"> * @property-read string $title The title that should go in the &lt;head&gt; section of the HTML of this page.</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> * @property-read moodle_url $url The moodle url object for this page.</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment"> */</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a> {
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">    /** The state of the page before it has printed the header **/</span>
<a name="l102"><span class="linenum"> 102</span></a>      const STATE_BEFORE_HEADER = 0;
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">    /** The state the page is in temporarily while the header is being printed **/</span>
<a name="l105"><span class="linenum"> 105</span></a>      const STATE_PRINTING_HEADER = 1;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">    /** The state the page is in while content is presumably being printed **/</span>
<a name="l108"><span class="linenum"> 108</span></a>      const STATE_IN_BODY = 2;
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>      <span class="comment">/**</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * The state the page is when the footer has been printed and its function is</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * complete.</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     */</span>
<a name="l114"><span class="linenum"> 114</span></a>      const STATE_DONE = 3;
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <span class="comment">/**</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * @var int The current state of the page. The state a page is within</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     * determines what actions are possible for it.</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     */</span>
<a name="l120"><span class="linenum"> 120</span></a>      protected <a class="var it26094" onMouseOver="hilite(26094)" onMouseOut="lolite()" onClick="logVariable('_state')" href="../_variables/_state.html">$_state</a> = self::STATE_BEFORE_HEADER;
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @var stdClass The course currently associated with this page.</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * If not has been provided the front page course is used.</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     */</span>
<a name="l126"><span class="linenum"> 126</span></a>      protected <a class="var it3907" onMouseOver="hilite(3907)" onMouseOut="lolite()" onClick="logVariable('_course')" href="../_variables/_course.html">$_course</a> = null;
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      <span class="comment">/**</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @var cm_info If this page belongs to a module, this is the cm_info module</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * description object.</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     */</span>
<a name="l132"><span class="linenum"> 132</span></a>      protected <a class="var it3906" onMouseOver="hilite(3906)" onMouseOut="lolite()" onClick="logVariable('_cm')" href="../_variables/_cm.html">$_cm</a> = null;
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * @var stdClass If $_cm is not null, then this will hold the corresponding</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     * row from the modname table. For example, if $_cm-&gt;modname is 'quiz', this</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * will be a row from the quiz table.</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     */</span>
<a name="l139"><span class="linenum"> 139</span></a>      protected <a class="var it26095" onMouseOver="hilite(26095)" onMouseOut="lolite()" onClick="logVariable('_module')" href="../_variables/_module.html">$_module</a> = null;
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>      <span class="comment">/**</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     * @var context The context that this page belongs to.</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     */</span>
<a name="l144"><span class="linenum"> 144</span></a>      protected <a class="var it26096" onMouseOver="hilite(26096)" onMouseOut="lolite()" onClick="logVariable('_context')" href="../_variables/_context.html">$_context</a> = null;
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      <span class="comment">/**</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * @var array This holds any categories that $_course belongs to, starting with the</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * particular category it belongs to, and working out through any parent</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * categories to the top level. These are loaded progressively, if needed.</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * There are three states. $_categories = null initially when nothing is</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     * loaded; $_categories = array($id =&gt; $cat, $parentid =&gt; null) when we have</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * loaded $_course-&gt;category, but not any parents; and a complete array once</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * everything is loaded.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     */</span>
<a name="l155"><span class="linenum"> 155</span></a>      protected <a class="var it26097" onMouseOver="hilite(26097)" onMouseOut="lolite()" onClick="logVariable('_categories')" href="../_variables/_categories.html">$_categories</a> = null;
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>      <span class="comment">/**</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     * @var array An array of CSS classes that should be added to the body tag in HTML.</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     */</span>
<a name="l160"><span class="linenum"> 160</span></a>      protected <a class="var it26098" onMouseOver="hilite(26098)" onMouseOut="lolite()" onClick="logVariable('_bodyclasses')" href="../_variables/_bodyclasses.html">$_bodyclasses</a> = array();
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>      <span class="comment">/**</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * @var string The title for the page. Used within the title tag in the HTML head.</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     */</span>
<a name="l165"><span class="linenum"> 165</span></a>      protected <a class="var it26099" onMouseOver="hilite(26099)" onMouseOut="lolite()" onClick="logVariable('_title')" href="../_variables/_title.html">$_title</a> = '';
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>      <span class="comment">/**</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * @var string The string to use as the heading of the page. Shown near the top of the</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * page within most themes.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     */</span>
<a name="l171"><span class="linenum"> 171</span></a>      protected <a class="var it26100" onMouseOver="hilite(26100)" onMouseOut="lolite()" onClick="logVariable('_heading')" href="../_variables/_heading.html">$_heading</a> = '';
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>      <span class="comment">/**</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     * @var string The pagetype is used to describe the page and defaults to a representation</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     * of the physical path to the page e.g. my-index, mod-quiz-attempt</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     */</span>
<a name="l177"><span class="linenum"> 177</span></a>      protected <a class="var it26101" onMouseOver="hilite(26101)" onMouseOut="lolite()" onClick="logVariable('_pagetype')" href="../_variables/_pagetype.html">$_pagetype</a> = null;
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>      <span class="comment">/**</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * @var string The pagelayout to use when displaying this page. The</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * pagelayout needs to have been defined by the theme in use, or one of its</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * parents. By default base is used however standard is the more common layout.</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * Note that this gets automatically set by core during operations like</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * require_login.</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     */</span>
<a name="l186"><span class="linenum"> 186</span></a>      protected <a class="var it26102" onMouseOver="hilite(26102)" onMouseOut="lolite()" onClick="logVariable('_pagelayout')" href="../_variables/_pagelayout.html">$_pagelayout</a> = 'base';
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>      <span class="comment">/**</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     * @var array List of theme layout options, these are ignored by core.</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * To be used in individual theme layout files only.</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     */</span>
<a name="l192"><span class="linenum"> 192</span></a>      protected <a class="var it26103" onMouseOver="hilite(26103)" onMouseOut="lolite()" onClick="logVariable('_layout_options')" href="../_variables/_layout_options.html">$_layout_options</a> = null;
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      <span class="comment">/**</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     * @var string An optional arbitrary parameter that can be set on pages where the context</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">     * and pagetype is not enough to identify the page.</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     */</span>
<a name="l198"><span class="linenum"> 198</span></a>      protected <a class="var it26104" onMouseOver="hilite(26104)" onMouseOut="lolite()" onClick="logVariable('_subpage')" href="../_variables/_subpage.html">$_subpage</a> = '';
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>      <span class="comment">/**</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     * @var string Set a different path to use for the 'Moodle docs for this page' link.</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * By default, it uses the path of the file for instance mod/quiz/attempt.</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     */</span>
<a name="l204"><span class="linenum"> 204</span></a>      protected <a class="var it26105" onMouseOver="hilite(26105)" onMouseOut="lolite()" onClick="logVariable('_docspath')" href="../_variables/_docspath.html">$_docspath</a> = null;
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>      <span class="comment">/**</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     * @var string A legacy class that will be added to the body tag</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     */</span>
<a name="l209"><span class="linenum"> 209</span></a>      protected <a class="var it26106" onMouseOver="hilite(26106)" onMouseOut="lolite()" onClick="logVariable('_legacyclass')" href="../_variables/_legacyclass.html">$_legacyclass</a> = null;
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>      <span class="comment">/**</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @var moodle_url The URL for this page. This is mandatory and must be set</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * before output is started.</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     */</span>
<a name="l215"><span class="linenum"> 215</span></a>      protected <a class="var it1894" onMouseOver="hilite(1894)" onMouseOut="lolite()" onClick="logVariable('_url')" href="../_variables/_url.html">$_url</a> = null;
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <span class="comment">/**</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * @var array An array of links to alternative versions of this page.</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * Primarily used for RSS versions of the current page.</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     */</span>
<a name="l221"><span class="linenum"> 221</span></a>      protected <a class="var it26107" onMouseOver="hilite(26107)" onMouseOut="lolite()" onClick="logVariable('_alternateversions')" href="../_variables/_alternateversions.html">$_alternateversions</a> = array();
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>      <span class="comment">/**</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     * @var block_manager The blocks manager for this page. It is responsible for</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     * the blocks and there content on this page.</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     */</span>
<a name="l227"><span class="linenum"> 227</span></a>      protected <a class="var it26108" onMouseOver="hilite(26108)" onMouseOut="lolite()" onClick="logVariable('_blocks')" href="../_variables/_blocks.html">$_blocks</a> = null;
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>      <span class="comment">/**</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @var page_requirements_manager Page requirements manager. It is responsible</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     * for all JavaScript and CSS resources required by this page.</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">     */</span>
<a name="l233"><span class="linenum"> 233</span></a>      protected <a class="var it26109" onMouseOver="hilite(26109)" onMouseOut="lolite()" onClick="logVariable('_requires')" href="../_variables/_requires.html">$_requires</a> = null;
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>      <span class="comment">/**</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     * @var string The capability required by the user in order to edit blocks</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     * and block settings on this page.</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     */</span>
<a name="l239"><span class="linenum"> 239</span></a>      protected <a class="var it26110" onMouseOver="hilite(26110)" onMouseOut="lolite()" onClick="logVariable('_blockseditingcap')" href="../_variables/_blockseditingcap.html">$_blockseditingcap</a> = 'moodle/site:manageblocks';
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>      <span class="comment">/**</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * @var bool An internal flag to record when block actions have been processed.</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     * Remember block actions occur on the current URL and it is important that</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * even they are never executed more than once.</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     */</span>
<a name="l246"><span class="linenum"> 246</span></a>      protected <a class="var it26111" onMouseOver="hilite(26111)" onMouseOut="lolite()" onClick="logVariable('_block_actions_done')" href="../_variables/_block_actions_done.html">$_block_actions_done</a> = false;
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>      <span class="comment">/**</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     * @var array An array of any other capabilities the current user must have</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">     * in order to editing the page and/or its content (not just blocks).</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     */</span>
<a name="l252"><span class="linenum"> 252</span></a>      protected <a class="var it26112" onMouseOver="hilite(26112)" onMouseOut="lolite()" onClick="logVariable('_othereditingcaps')" href="../_variables/_othereditingcaps.html">$_othereditingcaps</a> = array();
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>      <span class="comment">/**</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * @var bool Sets whether this page should be cached by the browser or not.</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     * If it is set to true (default) the page is served with caching headers.</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     */</span>
<a name="l258"><span class="linenum"> 258</span></a>      protected <a class="var it26113" onMouseOver="hilite(26113)" onMouseOut="lolite()" onClick="logVariable('_cacheable')" href="../_variables/_cacheable.html">$_cacheable</a> = true;
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>      <span class="comment">/**</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * @var string Can be set to the ID of an element on the page, if done that</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     * element receives focus when the page loads.</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">     */</span>
<a name="l264"><span class="linenum"> 264</span></a>      protected <a class="var it26114" onMouseOver="hilite(26114)" onMouseOut="lolite()" onClick="logVariable('_focuscontrol')" href="../_variables/_focuscontrol.html">$_focuscontrol</a> = '';
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <span class="comment">/**</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * @var string HTML to go where the turn on editing button is located. This</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * is nearly a legacy item and not used very often any more.</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     */</span>
<a name="l270"><span class="linenum"> 270</span></a>      protected <a class="var it26115" onMouseOver="hilite(26115)" onMouseOut="lolite()" onClick="logVariable('_button')" href="../_variables/_button.html">$_button</a> = '';
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>      <span class="comment">/**</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @var theme_config The theme to use with this page. This has to be properly</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * initialised via {@link moodle_page::initialise_theme_and_output()} which</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * happens magically before any operation that requires it.</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     */</span>
<a name="l277"><span class="linenum"> 277</span></a>      protected <a class="var it26116" onMouseOver="hilite(26116)" onMouseOut="lolite()" onClick="logVariable('_theme')" href="../_variables/_theme.html">$_theme</a> = null;
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>      <span class="comment">/**</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @var global_navigation Contains the global navigation structure.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     */</span>
<a name="l282"><span class="linenum"> 282</span></a>      protected <a class="var it26117" onMouseOver="hilite(26117)" onMouseOut="lolite()" onClick="logVariable('_navigation')" href="../_variables/_navigation.html">$_navigation</a> = null;
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>      <span class="comment">/**</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * @var settings_navigation Contains the settings navigation structure.</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     */</span>
<a name="l287"><span class="linenum"> 287</span></a>      protected <a class="var it26118" onMouseOver="hilite(26118)" onMouseOut="lolite()" onClick="logVariable('_settingsnav')" href="../_variables/_settingsnav.html">$_settingsnav</a> = null;
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>      <span class="comment">/**</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     * @var navbar Contains the navbar structure.</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     */</span>
<a name="l292"><span class="linenum"> 292</span></a>      protected <a class="var it26119" onMouseOver="hilite(26119)" onMouseOut="lolite()" onClick="logVariable('_navbar')" href="../_variables/_navbar.html">$_navbar</a> = null;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      <span class="comment">/**</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     * @var string The menu (or actions) to display in the heading.</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     */</span>
<a name="l297"><span class="linenum"> 297</span></a>      protected <a class="var it26120" onMouseOver="hilite(26120)" onMouseOut="lolite()" onClick="logVariable('_headingmenu')" href="../_variables/_headingmenu.html">$_headingmenu</a> = null;
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>      <span class="comment">/**</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     * @var array stack trace. Then the theme is initialised, we save the stack</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     * trace, for use in error messages.</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     */</span>
<a name="l303"><span class="linenum"> 303</span></a>      protected <a class="var it26121" onMouseOver="hilite(26121)" onMouseOut="lolite()" onClick="logVariable('_wherethemewasinitialised')" href="../_variables/_wherethemewasinitialised.html">$_wherethemewasinitialised</a> = null;
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>      <span class="comment">/**</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * @var xhtml_container_stack Tracks XHTML tags on this page that have been</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     * opened but not closed.</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     */</span>
<a name="l309"><span class="linenum"> 309</span></a>      protected <a class="var it26122" onMouseOver="hilite(26122)" onMouseOut="lolite()" onClick="logVariable('_opencontainers')" href="../_variables/_opencontainers.html">$_opencontainers</a>;
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>      <span class="comment">/**</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     * @var int Sets the page to refresh after a given delay (in seconds) using</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     * meta refresh in {@link standard_head_html()} in outputlib.php</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     * If set to null(default) the page is not refreshed</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     */</span>
<a name="l316"><span class="linenum"> 316</span></a>      protected <a class="var it26123" onMouseOver="hilite(26123)" onMouseOut="lolite()" onClick="logVariable('_periodicrefreshdelay')" href="../_variables/_periodicrefreshdelay.html">$_periodicrefreshdelay</a> = null;
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>      <span class="comment">/**</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     * @var array Associative array of browser shortnames (as used by check_browser_version)</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * and their minimum required versions</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     */</span>
<a name="l322"><span class="linenum"> 322</span></a>      protected <a class="var it26124" onMouseOver="hilite(26124)" onMouseOut="lolite()" onClick="logVariable('_legacybrowsers')" href="../_variables/_legacybrowsers.html">$_legacybrowsers</a> = array('MSIE' =&gt; 6.0);
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>      <span class="comment">/**</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     * @var string Is set to the name of the device type in use.</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     * This will we worked out when it is first used.</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">     */</span>
<a name="l328"><span class="linenum"> 328</span></a>      protected <a class="var it26125" onMouseOver="hilite(26125)" onMouseOut="lolite()" onClick="logVariable('_devicetypeinuse')" href="../_variables/_devicetypeinuse.html">$_devicetypeinuse</a> = null;
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>      <span class="comment">/**</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     * @var bool Used to determine if HTTPS should be required for login.</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     */</span>
<a name="l333"><span class="linenum"> 333</span></a>      protected <a class="var it26126" onMouseOver="hilite(26126)" onMouseOut="lolite()" onClick="logVariable('_https_login_required')" href="../_variables/_https_login_required.html">$_https_login_required</a> = false;
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>      <span class="comment">/**</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     * @var bool Determines if popup notifications allowed on this page.</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     * Code such as the quiz module disables popup notifications in situations</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     * such as upgrading or completing a quiz.</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     */</span>
<a name="l340"><span class="linenum"> 340</span></a>      protected <a class="var it26127" onMouseOver="hilite(26127)" onMouseOut="lolite()" onClick="logVariable('_popup_notification_allowed')" href="../_variables/_popup_notification_allowed.html">$_popup_notification_allowed</a> = true;
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">    // Magic getter methods =============================================================</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">    // Due to the __get magic below, you normally do not call these as $PAGE-&gt;magic_get_x</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">    // methods, but instead use the $PAGE-&gt;x syntax.</span>
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>      <span class="comment">/**</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;state syntax. {@link moodle_page::__get()}.</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     * @return integer one of the STATE_XXX constants. You should not normally need</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     * to use this in your code. It is intended for internal use by this class</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     * and its friends like print_header, to check that everything is working as</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">     * expected. Also accessible as $PAGE-&gt;state.</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     */</span>
<a name="l353"><span class="linenum"> 353</span></a>      protected function <a class="function" onClick="logFunction('magic_get_state')" href="../_functions/magic_get_state.html" onMouseOver="funcPopup(event,'magic_get_state')">magic_get_state</a>() {
<a name="l354"><span class="linenum"> 354</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a>;
<a name="l355"><span class="linenum"> 355</span></a>      }
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>      <span class="comment">/**</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;headerprinted syntax. {@link moodle_page::__get()}.</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     * @return bool has the header already been printed?</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     */</span>
<a name="l361"><span class="linenum"> 361</span></a>      protected function <a class="function" onClick="logFunction('magic_get_headerprinted')" href="../_functions/magic_get_headerprinted.html" onMouseOver="funcPopup(event,'magic_get_headerprinted')">magic_get_headerprinted</a>() {
<a name="l362"><span class="linenum"> 362</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> &gt;= self::STATE_IN_BODY;
<a name="l363"><span class="linenum"> 363</span></a>      }
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>      <span class="comment">/**</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;course syntax. {@link moodle_page::__get()}.</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     * @return stdClass the current course that we are inside - a row from the</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     * course table. (Also available as $COURSE global.) If we are not inside</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     * an actual course, this will be the site course.</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     */</span>
<a name="l371"><span class="linenum"> 371</span></a>      protected function <a class="function" onClick="logFunction('magic_get_course')" href="../_functions/magic_get_course.html" onMouseOver="funcPopup(event,'magic_get_course')">magic_get_course</a>() {
<a name="l372"><span class="linenum"> 372</span></a>          global <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l373"><span class="linenum"> 373</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>)) {
<a name="l374"><span class="linenum"> 374</span></a>              return <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l375"><span class="linenum"> 375</span></a>          }
<a name="l376"><span class="linenum"> 376</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>;
<a name="l377"><span class="linenum"> 377</span></a>      }
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>      <span class="comment">/**</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;cm syntax. {@link moodle_page::__get()}.</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @return cm_info the course_module that this page belongs to. Will be null</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     * if this page is not within a module. This is a full cm object, as loaded</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * by get_coursemodule_from_id or get_coursemodule_from_instance,</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * so the extra modname and name fields are present.</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     */</span>
<a name="l386"><span class="linenum"> 386</span></a>      protected function <a class="function" onClick="logFunction('magic_get_cm')" href="../_functions/magic_get_cm.html" onMouseOver="funcPopup(event,'magic_get_cm')">magic_get_cm</a>() {
<a name="l387"><span class="linenum"> 387</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>;
<a name="l388"><span class="linenum"> 388</span></a>      }
<a name="l389"><span class="linenum"> 389</span></a>  
<a name="l390"><span class="linenum"> 390</span></a>      <span class="comment">/**</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;activityrecord syntax. {@link moodle_page::__get()}.</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">     * @return stdClass the row from the activities own database table (for example</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">     * the forum or quiz table) that this page belongs to. Will be null</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">     * if this page is not within a module.</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">     */</span>
<a name="l396"><span class="linenum"> 396</span></a>      protected function <a class="function" onClick="logFunction('magic_get_activityrecord')" href="../_functions/magic_get_activityrecord.html" onMouseOver="funcPopup(event,'magic_get_activityrecord')">magic_get_activityrecord</a>() {
<a name="l397"><span class="linenum"> 397</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_module')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_module.html">_module</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>)) {
<a name="l398"><span class="linenum"> 398</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_activity_record')" href="../_functions/load_activity_record.html" onMouseOver="funcPopup(event,'load_activity_record')">load_activity_record</a>();
<a name="l399"><span class="linenum"> 399</span></a>          }
<a name="l400"><span class="linenum"> 400</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_module')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_module.html">_module</a>;
<a name="l401"><span class="linenum"> 401</span></a>      }
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>      <span class="comment">/**</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;activityname syntax. {@link moodle_page::__get()}.</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     * @return string the The type of activity we are in, for example 'forum' or 'quiz'.</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * Will be null if this page is not within a module.</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     */</span>
<a name="l408"><span class="linenum"> 408</span></a>      protected function <a class="function" onClick="logFunction('magic_get_activityname')" href="../_functions/magic_get_activityname.html" onMouseOver="funcPopup(event,'magic_get_activityname')">magic_get_activityname</a>() {
<a name="l409"><span class="linenum"> 409</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>)) {
<a name="l410"><span class="linenum"> 410</span></a>              return null;
<a name="l411"><span class="linenum"> 411</span></a>          }
<a name="l412"><span class="linenum"> 412</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>-&gt;modname;
<a name="l413"><span class="linenum"> 413</span></a>      }
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>      <span class="comment">/**</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;category syntax. {@link moodle_page::__get()}.</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     * @return stdClass the category that the page course belongs to. If there isn't one</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">     * (that is, if this is the front page course) returns null.</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     */</span>
<a name="l420"><span class="linenum"> 420</span></a>      protected function <a class="function" onClick="logFunction('magic_get_category')" href="../_functions/magic_get_category.html" onMouseOver="funcPopup(event,'magic_get_category')">magic_get_category</a>() {
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_category_loaded')" href="../_functions/ensure_category_loaded.html" onMouseOver="funcPopup(event,'ensure_category_loaded')">ensure_category_loaded</a>();
<a name="l422"><span class="linenum"> 422</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>)) {
<a name="l423"><span class="linenum"> 423</span></a>              return <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>);
<a name="l424"><span class="linenum"> 424</span></a>          } else {
<a name="l425"><span class="linenum"> 425</span></a>              return null;
<a name="l426"><span class="linenum"> 426</span></a>          }
<a name="l427"><span class="linenum"> 427</span></a>      }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>      <span class="comment">/**</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;categories syntax. {@link moodle_page::__get()}.</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     * @return array an array of all the categories the page course belongs to,</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * starting with the immediately containing category, and working out to</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     * the top-level category. This may be the empty array if we are in the</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     * front page course.</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     */</span>
<a name="l436"><span class="linenum"> 436</span></a>      protected function <a class="function" onClick="logFunction('magic_get_categories')" href="../_functions/magic_get_categories.html" onMouseOver="funcPopup(event,'magic_get_categories')">magic_get_categories</a>() {
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_categories_loaded')" href="../_functions/ensure_categories_loaded.html" onMouseOver="funcPopup(event,'ensure_categories_loaded')">ensure_categories_loaded</a>();
<a name="l438"><span class="linenum"> 438</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>;
<a name="l439"><span class="linenum"> 439</span></a>      }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>      <span class="comment">/**</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;context syntax. {@link moodle_page::__get()}.</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">     * @return context the main context to which this page belongs.</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     */</span>
<a name="l445"><span class="linenum"> 445</span></a>      protected function <a class="function" onClick="logFunction('magic_get_context')" href="../_functions/magic_get_context.html" onMouseOver="funcPopup(event,'magic_get_context')">magic_get_context</a>() {
<a name="l446"><span class="linenum"> 446</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l447"><span class="linenum"> 447</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>)) {
<a name="l448"><span class="linenum"> 448</span></a>              if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a> or <a class="constant" onClick="logConstant('NO_MOODLE_COOKIES')" href="../_constants/NO_MOODLE_COOKIES.html" onMouseOver="constPopup(event,'NO_MOODLE_COOKIES')">NO_MOODLE_COOKIES</a>) {
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">                // Cli scripts work in system context, do not annoy devs with debug info.</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">                // Very few scripts do not use cookies, we can safely use system as default context there.</span>
<a name="l451"><span class="linenum"> 451</span></a>              } else if (<a class="constant" onClick="logConstant('AJAX_SCRIPT')" href="../_constants/AJAX_SCRIPT.html" onMouseOver="constPopup(event,'AJAX_SCRIPT')">AJAX_SCRIPT</a> &amp;&amp; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdeveloper')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdeveloper.html">debugdeveloper</a>) {
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">                // Throw exception inside AJAX script in developer mode, otherwise the debugging message may be missed.</span>
<a name="l453"><span class="linenum"> 453</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a> was not set. You may have forgotten '
<a name="l454"><span class="linenum"> 454</span></a>                      .'to call <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>() or <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>()');
<a name="l455"><span class="linenum"> 455</span></a>              } else {
<a name="l456"><span class="linenum"> 456</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Coding problem: <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a> was not set. You may have forgotten '
<a name="l457"><span class="linenum"> 457</span></a>                      .'to call <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>() or <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(). The page may not display '
<a name="l458"><span class="linenum"> 458</span></a>                      .'correctly as a result');
<a name="l459"><span class="linenum"> 459</span></a>              }
<a name="l460"><span class="linenum"> 460</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l461"><span class="linenum"> 461</span></a>          }
<a name="l462"><span class="linenum"> 462</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>;
<a name="l463"><span class="linenum"> 463</span></a>      }
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>      <span class="comment">/**</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;pagetype syntax. {@link moodle_page::__get()}.</span>
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">     * @return string e.g. 'my-index' or 'mod-quiz-attempt'.</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">     */</span>
<a name="l469"><span class="linenum"> 469</span></a>      protected function <a class="function" onClick="logFunction('magic_get_pagetype')" href="../_functions/magic_get_pagetype.html" onMouseOver="funcPopup(event,'magic_get_pagetype')">magic_get_pagetype</a>() {
<a name="l470"><span class="linenum"> 470</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l471"><span class="linenum"> 471</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagetype.html">_pagetype</a>) || isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pagepath')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pagepath.html">pagepath</a>)) {
<a name="l472"><span class="linenum"> 472</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise_default_pagetype')" href="../_functions/initialise_default_pagetype.html" onMouseOver="funcPopup(event,'initialise_default_pagetype')">initialise_default_pagetype</a>();
<a name="l473"><span class="linenum"> 473</span></a>          }
<a name="l474"><span class="linenum"> 474</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagetype.html">_pagetype</a>;
<a name="l475"><span class="linenum"> 475</span></a>      }
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>      <span class="comment">/**</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;pagetype syntax. {@link moodle_page::__get()}.</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @return string The id to use on the body tag, uses {@link magic_get_pagetype()}.</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     */</span>
<a name="l481"><span class="linenum"> 481</span></a>      protected function <a class="function" onClick="logFunction('magic_get_bodyid')" href="../_functions/magic_get_bodyid.html" onMouseOver="funcPopup(event,'magic_get_bodyid')">magic_get_bodyid</a>() {
<a name="l482"><span class="linenum"> 482</span></a>          return 'page-'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a>;
<a name="l483"><span class="linenum"> 483</span></a>      }
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>      <span class="comment">/**</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;pagelayout syntax. {@link moodle_page::__get()}.</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">     * @return string the general type of page this is. For example 'standard', 'popup', 'home'.</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">     *      Allows the theme to display things differently, if it wishes to.</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     */</span>
<a name="l490"><span class="linenum"> 490</span></a>      protected function <a class="function" onClick="logFunction('magic_get_pagelayout')" href="../_functions/magic_get_pagelayout.html" onMouseOver="funcPopup(event,'magic_get_pagelayout')">magic_get_pagelayout</a>() {
<a name="l491"><span class="linenum"> 491</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagelayout.html">_pagelayout</a>;
<a name="l492"><span class="linenum"> 492</span></a>      }
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>      <span class="comment">/**</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;layout_options syntax. {@link moodle_page::__get()}.</span>
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">     * @return array returns arrays with options for layout file</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     */</span>
<a name="l498"><span class="linenum"> 498</span></a>      protected function <a class="function" onClick="logFunction('magic_get_layout_options')" href="../_functions/magic_get_layout_options.html" onMouseOver="funcPopup(event,'magic_get_layout_options')">magic_get_layout_options</a>() {
<a name="l499"><span class="linenum"> 499</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_layout_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_layout_options.html">_layout_options</a>)) {
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_layout_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_layout_options.html">_layout_options</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>-&gt;<a class="function" onClick="logFunction('pagelayout_options')" href="../_functions/pagelayout_options.html" onMouseOver="funcPopup(event,'pagelayout_options')">pagelayout_options</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagelayout.html">pagelayout</a>);
<a name="l501"><span class="linenum"> 501</span></a>          }
<a name="l502"><span class="linenum"> 502</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_layout_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_layout_options.html">_layout_options</a>;
<a name="l503"><span class="linenum"> 503</span></a>      }
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>      <span class="comment">/**</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;subpage syntax. {@link moodle_page::__get()}.</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     * @return string The subpage identifier, if any.</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     */</span>
<a name="l509"><span class="linenum"> 509</span></a>      protected function <a class="function" onClick="logFunction('magic_get_subpage')" href="../_functions/magic_get_subpage.html" onMouseOver="funcPopup(event,'magic_get_subpage')">magic_get_subpage</a>() {
<a name="l510"><span class="linenum"> 510</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_subpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_subpage.html">_subpage</a>;
<a name="l511"><span class="linenum"> 511</span></a>      }
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>      <span class="comment">/**</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;bodyclasses syntax. {@link moodle_page::__get()}.</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     * @return string the class names to put on the body element in the HTML.</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     */</span>
<a name="l517"><span class="linenum"> 517</span></a>      protected function <a class="function" onClick="logFunction('magic_get_bodyclasses')" href="../_functions/magic_get_bodyclasses.html" onMouseOver="funcPopup(event,'magic_get_bodyclasses')">magic_get_bodyclasses</a>() {
<a name="l518"><span class="linenum"> 518</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' ', <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_bodyclasses')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_bodyclasses.html">_bodyclasses</a>));
<a name="l519"><span class="linenum"> 519</span></a>      }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>      <span class="comment">/**</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;title syntax. {@link moodle_page::__get()}.</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     * @return string the title that should go in the &lt;head&gt; section of the HTML of this page.</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">     */</span>
<a name="l525"><span class="linenum"> 525</span></a>      protected function <a class="function" onClick="logFunction('magic_get_title')" href="../_functions/magic_get_title.html" onMouseOver="funcPopup(event,'magic_get_title')">magic_get_title</a>() {
<a name="l526"><span class="linenum"> 526</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_title')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_title.html">_title</a>;
<a name="l527"><span class="linenum"> 527</span></a>      }
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>      <span class="comment">/**</span>
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;heading syntax. {@link moodle_page::__get()}.</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">     * @return string the main heading that should be displayed at the top of the &lt;body&gt;.</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">     */</span>
<a name="l533"><span class="linenum"> 533</span></a>      protected function <a class="function" onClick="logFunction('magic_get_heading')" href="../_functions/magic_get_heading.html" onMouseOver="funcPopup(event,'magic_get_heading')">magic_get_heading</a>() {
<a name="l534"><span class="linenum"> 534</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_heading')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_heading.html">_heading</a>;
<a name="l535"><span class="linenum"> 535</span></a>      }
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>      <span class="comment">/**</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;heading syntax. {@link moodle_page::__get()}.</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">     * @return string The menu (or actions) to display in the heading</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">     */</span>
<a name="l541"><span class="linenum"> 541</span></a>      protected function <a class="function" onClick="logFunction('magic_get_headingmenu')" href="../_functions/magic_get_headingmenu.html" onMouseOver="funcPopup(event,'magic_get_headingmenu')">magic_get_headingmenu</a>() {
<a name="l542"><span class="linenum"> 542</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_headingmenu')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_headingmenu.html">_headingmenu</a>;
<a name="l543"><span class="linenum"> 543</span></a>      }
<a name="l544"><span class="linenum"> 544</span></a>  
<a name="l545"><span class="linenum"> 545</span></a>      <span class="comment">/**</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;docspath syntax. {@link moodle_page::__get()}.</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     * @return string the path to the Moodle docs for this page.</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">     */</span>
<a name="l549"><span class="linenum"> 549</span></a>      protected function <a class="function" onClick="logFunction('magic_get_docspath')" href="../_functions/magic_get_docspath.html" onMouseOver="funcPopup(event,'magic_get_docspath')">magic_get_docspath</a>() {
<a name="l550"><span class="linenum"> 550</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_docspath')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_docspath.html">_docspath</a>)) {
<a name="l551"><span class="linenum"> 551</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_docspath')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_docspath.html">_docspath</a>;
<a name="l552"><span class="linenum"> 552</span></a>          } else {
<a name="l553"><span class="linenum"> 553</span></a>              return <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('-', '/', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a>);
<a name="l554"><span class="linenum"> 554</span></a>          }
<a name="l555"><span class="linenum"> 555</span></a>      }
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>      <span class="comment">/**</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;url syntax. {@link moodle_page::__get()}.</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">     * @return moodle_url the clean URL required to load the current page. (You</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">     * should normally use this in preference to $ME or $FULLME.)</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">     */</span>
<a name="l562"><span class="linenum"> 562</span></a>      protected function <a class="function" onClick="logFunction('magic_get_url')" href="../_functions/magic_get_url.html" onMouseOver="funcPopup(event,'magic_get_url')">magic_get_url</a>() {
<a name="l563"><span class="linenum"> 563</span></a>          global <a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>;
<a name="l564"><span class="linenum"> 564</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>)) {
<a name="l565"><span class="linenum"> 565</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('This page did not call <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(...). Using '.<a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>), <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l566"><span class="linenum"> 566</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>);
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">            // Make sure the guessed URL cannot lead to dangerous redirects.</span>
<a name="l568"><span class="linenum"> 568</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>-&gt;<a class="function" onClick="logFunction('remove_params')" href="../_functions/remove_params.html" onMouseOver="funcPopup(event,'remove_params')">remove_params</a>('sesskey');
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>); <span class="comment">// Return a clone for safety.</span>
<a name="l571"><span class="linenum"> 571</span></a>      }
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>      <span class="comment">/**</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     * The list of alternate versions of this page.</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * @return array mime type =&gt; object with -&gt;url and -&gt;title.</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     */</span>
<a name="l577"><span class="linenum"> 577</span></a>      protected function <a class="function" onClick="logFunction('magic_get_alternateversions')" href="../_functions/magic_get_alternateversions.html" onMouseOver="funcPopup(event,'magic_get_alternateversions')">magic_get_alternateversions</a>() {
<a name="l578"><span class="linenum"> 578</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_alternateversions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_alternateversions.html">_alternateversions</a>;
<a name="l579"><span class="linenum"> 579</span></a>      }
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>      <span class="comment">/**</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;blocks syntax. {@link moodle_page::__get()}.</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @return block_manager the blocks manager object for this page.</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     */</span>
<a name="l585"><span class="linenum"> 585</span></a>      protected function <a class="function" onClick="logFunction('magic_get_blocks')" href="../_functions/magic_get_blocks.html" onMouseOver="funcPopup(event,'magic_get_blocks')">magic_get_blocks</a>() {
<a name="l586"><span class="linenum"> 586</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l587"><span class="linenum"> 587</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_blocks.html">_blocks</a>)) {
<a name="l588"><span class="linenum"> 588</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('blockmanagerclass')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/blockmanagerclass.html">blockmanagerclass</a>)) {
<a name="l589"><span class="linenum"> 589</span></a>                  if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('blockmanagerclassfile')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/blockmanagerclassfile.html">blockmanagerclassfile</a>)) {
<a name="l590"><span class="linenum"> 590</span></a>                      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('blockmanagerclassfile')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/blockmanagerclassfile.html">blockmanagerclassfile</a>);
<a name="l591"><span class="linenum"> 591</span></a>                  }
<a name="l592"><span class="linenum"> 592</span></a>                  <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('blockmanagerclass')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/blockmanagerclass.html">blockmanagerclass</a>;
<a name="l593"><span class="linenum"> 593</span></a>              } else {
<a name="l594"><span class="linenum"> 594</span></a>                  <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_manager';
<a name="l595"><span class="linenum"> 595</span></a>              }
<a name="l596"><span class="linenum"> 596</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_blocks.html">_blocks</a> = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l597"><span class="linenum"> 597</span></a>          }
<a name="l598"><span class="linenum"> 598</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_blocks.html">_blocks</a>;
<a name="l599"><span class="linenum"> 599</span></a>      }
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>      <span class="comment">/**</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;requires syntax. {@link moodle_page::__get()}.</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * @return page_requirements_manager tracks the JavaScript, CSS files, etc. required by this page.</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     */</span>
<a name="l605"><span class="linenum"> 605</span></a>      protected function <a class="function" onClick="logFunction('magic_get_requires')" href="../_functions/magic_get_requires.html" onMouseOver="funcPopup(event,'magic_get_requires')">magic_get_requires</a>() {
<a name="l606"><span class="linenum"> 606</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_requires.html">_requires</a>)) {
<a name="l607"><span class="linenum"> 607</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_requires.html">_requires</a> = <span class="keyword">new </span><a class="class" onClick="logClass('page_requirements_manager')" href="../_classes/page_requirements_manager.html" onMouseOver="classPopup(event,'page_requirements_manager')">page_requirements_manager</a>();
<a name="l608"><span class="linenum"> 608</span></a>          }
<a name="l609"><span class="linenum"> 609</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_requires.html">_requires</a>;
<a name="l610"><span class="linenum"> 610</span></a>      }
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>      <span class="comment">/**</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;cacheable syntax. {@link moodle_page::__get()}.</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @return bool can this page be cached by the user's browser.</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     */</span>
<a name="l616"><span class="linenum"> 616</span></a>      protected function <a class="function" onClick="logFunction('magic_get_cacheable')" href="../_functions/magic_get_cacheable.html" onMouseOver="funcPopup(event,'magic_get_cacheable')">magic_get_cacheable</a>() {
<a name="l617"><span class="linenum"> 617</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cacheable')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cacheable.html">_cacheable</a>;
<a name="l618"><span class="linenum"> 618</span></a>      }
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>      <span class="comment">/**</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;focuscontrol syntax. {@link moodle_page::__get()}.</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">     * @return string the id of the HTML element to be focused when the page has loaded.</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">     */</span>
<a name="l624"><span class="linenum"> 624</span></a>      protected function <a class="function" onClick="logFunction('magic_get_focuscontrol')" href="../_functions/magic_get_focuscontrol.html" onMouseOver="funcPopup(event,'magic_get_focuscontrol')">magic_get_focuscontrol</a>() {
<a name="l625"><span class="linenum"> 625</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_focuscontrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_focuscontrol.html">_focuscontrol</a>;
<a name="l626"><span class="linenum"> 626</span></a>      }
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>      <span class="comment">/**</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;button syntax. {@link moodle_page::__get()}.</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * @return string the HTML to go where the Turn editing on button normally goes.</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     */</span>
<a name="l632"><span class="linenum"> 632</span></a>      protected function <a class="function" onClick="logFunction('magic_get_button')" href="../_functions/magic_get_button.html" onMouseOver="funcPopup(event,'magic_get_button')">magic_get_button</a>() {
<a name="l633"><span class="linenum"> 633</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_button')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_button.html">_button</a>;
<a name="l634"><span class="linenum"> 634</span></a>      }
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>      <span class="comment">/**</span>
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;theme syntax. {@link moodle_page::__get()}.</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">     * @return theme_config the initialised theme for this page.</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">     */</span>
<a name="l640"><span class="linenum"> 640</span></a>      protected function <a class="function" onClick="logFunction('magic_get_theme')" href="../_functions/magic_get_theme.html" onMouseOver="funcPopup(event,'magic_get_theme')">magic_get_theme</a>() {
<a name="l641"><span class="linenum"> 641</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>)) {
<a name="l642"><span class="linenum"> 642</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l643"><span class="linenum"> 643</span></a>          }
<a name="l644"><span class="linenum"> 644</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>;
<a name="l645"><span class="linenum"> 645</span></a>      }
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>      <span class="comment">/**</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     * Returns an array of minipulations or false if there are none to make.</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     *</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @since Moodle 2.5.1 2.6</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @return bool|array</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     */</span>
<a name="l653"><span class="linenum"> 653</span></a>      protected function <a class="function" onClick="logFunction('magic_get_blockmanipulations')" href="../_functions/magic_get_blockmanipulations.html" onMouseOver="funcPopup(event,'magic_get_blockmanipulations')">magic_get_blockmanipulations</a>() {
<a name="l654"><span class="linenum"> 654</span></a>          if (!<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l655"><span class="linenum"> 655</span></a>              return false;
<a name="l656"><span class="linenum"> 656</span></a>          }
<a name="l657"><span class="linenum"> 657</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>)) {
<a name="l658"><span class="linenum"> 658</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l659"><span class="linenum"> 659</span></a>          }
<a name="l660"><span class="linenum"> 660</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>-&gt;blockrtlmanipulations;
<a name="l661"><span class="linenum"> 661</span></a>      }
<a name="l662"><span class="linenum"> 662</span></a>  
<a name="l663"><span class="linenum"> 663</span></a>      <span class="comment">/**</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment">     * Please do not call this method directly, use the -&gt;devicetypeinuse syntax. {@link moodle_page::__get()}.</span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment">     * @return string The device type being used.</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">     */</span>
<a name="l667"><span class="linenum"> 667</span></a>      protected function <a class="function" onClick="logFunction('magic_get_devicetypeinuse')" href="../_functions/magic_get_devicetypeinuse.html" onMouseOver="funcPopup(event,'magic_get_devicetypeinuse')">magic_get_devicetypeinuse</a>() {
<a name="l668"><span class="linenum"> 668</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_devicetypeinuse.html">_devicetypeinuse</a>)) {
<a name="l669"><span class="linenum"> 669</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_devicetypeinuse.html">_devicetypeinuse</a> = <a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::<a class="function" onClick="logFunction('get_user_device_type')" href="../_functions/get_user_device_type.html" onMouseOver="funcPopup(event,'get_user_device_type')">get_user_device_type</a>();
<a name="l670"><span class="linenum"> 670</span></a>          }
<a name="l671"><span class="linenum"> 671</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_devicetypeinuse.html">_devicetypeinuse</a>;
<a name="l672"><span class="linenum"> 672</span></a>      }
<a name="l673"><span class="linenum"> 673</span></a>  
<a name="l674"><span class="linenum"> 674</span></a>      <span class="comment">/**</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     * Please do not call this method directly use the -&gt;periodicrefreshdelay syntax</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     * {@link moodle_page::__get()}</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">     * @return int The periodic refresh delay to use with meta refresh</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">     */</span>
<a name="l679"><span class="linenum"> 679</span></a>      protected function <a class="function" onClick="logFunction('magic_get_periodicrefreshdelay')" href="../_functions/magic_get_periodicrefreshdelay.html" onMouseOver="funcPopup(event,'magic_get_periodicrefreshdelay')">magic_get_periodicrefreshdelay</a>() {
<a name="l680"><span class="linenum"> 680</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_periodicrefreshdelay')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_periodicrefreshdelay.html">_periodicrefreshdelay</a>;
<a name="l681"><span class="linenum"> 681</span></a>      }
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>      <span class="comment">/**</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">     * Please do not call this method directly use the -&gt;opencontainers syntax. {@link moodle_page::__get()}</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">     * @return xhtml_container_stack tracks XHTML tags on this page that have been opened but not closed.</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment">     *      mainly for internal use by the rendering code.</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">     */</span>
<a name="l688"><span class="linenum"> 688</span></a>      protected function <a class="function" onClick="logFunction('magic_get_opencontainers')" href="../_functions/magic_get_opencontainers.html" onMouseOver="funcPopup(event,'magic_get_opencontainers')">magic_get_opencontainers</a>() {
<a name="l689"><span class="linenum"> 689</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_opencontainers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_opencontainers.html">_opencontainers</a>)) {
<a name="l690"><span class="linenum"> 690</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_opencontainers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_opencontainers.html">_opencontainers</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xhtml_container_stack')" href="../_classes/xhtml_container_stack.html" onMouseOver="classPopup(event,'xhtml_container_stack')">xhtml_container_stack</a>();
<a name="l691"><span class="linenum"> 691</span></a>          }
<a name="l692"><span class="linenum"> 692</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_opencontainers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_opencontainers.html">_opencontainers</a>;
<a name="l693"><span class="linenum"> 693</span></a>      }
<a name="l694"><span class="linenum"> 694</span></a>  
<a name="l695"><span class="linenum"> 695</span></a>      <span class="comment">/**</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">     * Return the navigation object</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">     * @return global_navigation</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">     */</span>
<a name="l699"><span class="linenum"> 699</span></a>      protected function <a class="function" onClick="logFunction('magic_get_navigation')" href="../_functions/magic_get_navigation.html" onMouseOver="funcPopup(event,'magic_get_navigation')">magic_get_navigation</a>() {
<a name="l700"><span class="linenum"> 700</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navigation')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navigation.html">_navigation</a> === null) {
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navigation')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navigation.html">_navigation</a> = <span class="keyword">new </span><a class="class" onClick="logClass('global_navigation')" href="../_classes/global_navigation.html" onMouseOver="classPopup(event,'global_navigation')">global_navigation</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l702"><span class="linenum"> 702</span></a>          }
<a name="l703"><span class="linenum"> 703</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navigation')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navigation.html">_navigation</a>;
<a name="l704"><span class="linenum"> 704</span></a>      }
<a name="l705"><span class="linenum"> 705</span></a>  
<a name="l706"><span class="linenum"> 706</span></a>      <span class="comment">/**</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">     * Return a navbar object</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">     * @return navbar</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">     */</span>
<a name="l710"><span class="linenum"> 710</span></a>      protected function <a class="function" onClick="logFunction('magic_get_navbar')" href="../_functions/magic_get_navbar.html" onMouseOver="funcPopup(event,'magic_get_navbar')">magic_get_navbar</a>() {
<a name="l711"><span class="linenum"> 711</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navbar')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navbar.html">_navbar</a> === null) {
<a name="l712"><span class="linenum"> 712</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navbar')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navbar.html">_navbar</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navbar')" href="../_classes/navbar.html" onMouseOver="classPopup(event,'navbar')">navbar</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l713"><span class="linenum"> 713</span></a>          }
<a name="l714"><span class="linenum"> 714</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navbar')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navbar.html">_navbar</a>;
<a name="l715"><span class="linenum"> 715</span></a>      }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>      <span class="comment">/**</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     * Returns the settings navigation object</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">     * @return settings_navigation</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">     */</span>
<a name="l721"><span class="linenum"> 721</span></a>      protected function <a class="function" onClick="logFunction('magic_get_settingsnav')" href="../_functions/magic_get_settingsnav.html" onMouseOver="funcPopup(event,'magic_get_settingsnav')">magic_get_settingsnav</a>() {
<a name="l722"><span class="linenum"> 722</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_settingsnav')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_settingsnav.html">_settingsnav</a> === null) {
<a name="l723"><span class="linenum"> 723</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_settingsnav')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_settingsnav.html">_settingsnav</a> = <span class="keyword">new </span><a class="class" onClick="logClass('settings_navigation')" href="../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l724"><span class="linenum"> 724</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_settingsnav')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_settingsnav.html">_settingsnav</a>-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>();
<a name="l725"><span class="linenum"> 725</span></a>          }
<a name="l726"><span class="linenum"> 726</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_settingsnav')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_settingsnav.html">_settingsnav</a>;
<a name="l727"><span class="linenum"> 727</span></a>      }
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>      <span class="comment">/**</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">     * Returns request IP address.</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">     *</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">     * @return string IP address or null if unknown</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">     */</span>
<a name="l734"><span class="linenum"> 734</span></a>      protected function <a class="function" onClick="logFunction('magic_get_requestip')" href="../_functions/magic_get_requestip.html" onMouseOver="funcPopup(event,'magic_get_requestip')">magic_get_requestip</a>() {
<a name="l735"><span class="linenum"> 735</span></a>          return <a class="function" onClick="logFunction('getremoteaddr')" href="../_functions/getremoteaddr.html" onMouseOver="funcPopup(event,'getremoteaddr')">getremoteaddr</a>(null);
<a name="l736"><span class="linenum"> 736</span></a>      }
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>      <span class="comment">/**</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     * Returns the origin of current request.</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     *</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * Note: constants are not required because we need to use these values in logging and reports.</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     *</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">     * @return string 'web', 'ws', 'cli', 'restore', etc.</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">     */</span>
<a name="l745"><span class="linenum"> 745</span></a>      protected function <a class="function" onClick="logFunction('magic_get_requestorigin')" href="../_functions/magic_get_requestorigin.html" onMouseOver="funcPopup(event,'magic_get_requestorigin')">magic_get_requestorigin</a>() {
<a name="l746"><span class="linenum"> 746</span></a>          if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>('restore_controller', false) &amp;&amp; <a class="class" onClick="logClass('restore_controller')" href="../_classes/restore_controller.html" onMouseOver="classPopup(event,'restore_controller')">restore_controller</a>::<a class="function" onClick="logFunction('is_executing')" href="../_functions/is_executing.html" onMouseOver="funcPopup(event,'is_executing')">is_executing</a>()) {
<a name="l747"><span class="linenum"> 747</span></a>              return 'restore';
<a name="l748"><span class="linenum"> 748</span></a>          }
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>          if (<a class="constant" onClick="logConstant('WS_SERVER')" href="../_constants/WS_SERVER.html" onMouseOver="constPopup(event,'WS_SERVER')">WS_SERVER</a>) {
<a name="l751"><span class="linenum"> 751</span></a>              return 'ws';
<a name="l752"><span class="linenum"> 752</span></a>          }
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>          if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l755"><span class="linenum"> 755</span></a>              return 'cli';
<a name="l756"><span class="linenum"> 756</span></a>          }
<a name="l757"><span class="linenum"> 757</span></a>  
<a name="l758"><span class="linenum"> 758</span></a>          return 'web';
<a name="l759"><span class="linenum"> 759</span></a>      }
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>      <span class="comment">/**</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     * PHP overloading magic to make the $PAGE-&gt;course syntax work by redirecting</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">     * it to the corresponding $PAGE-&gt;magic_get_course() method if there is one, and</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     * throwing an exception if not.</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     *</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     * @param string $name property name</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     * @return mixed</span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">     */</span>
<a name="l770"><span class="linenum"> 770</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it26131" onMouseOver="hilite(26131)" onMouseOut="lolite()" onClick="logVariable('getmethod')" href="../_variables/getmethod.html">$getmethod</a> = 'magic_get_' . <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l772"><span class="linenum"> 772</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it26131" onMouseOver="hilite(26131)" onMouseOut="lolite()" onClick="logVariable('getmethod')" href="../_variables/getmethod.html">$getmethod</a>)) {
<a name="l773"><span class="linenum"> 773</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it26131" onMouseOver="hilite(26131)" onMouseOut="lolite()" onClick="logVariable('getmethod')" href="../_variables/getmethod.html">$getmethod</a>();
<a name="l774"><span class="linenum"> 774</span></a>          } else {
<a name="l775"><span class="linenum"> 775</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unknown property ' . <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> . ' of <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>.');
<a name="l776"><span class="linenum"> 776</span></a>          }
<a name="l777"><span class="linenum"> 777</span></a>      }
<a name="l778"><span class="linenum"> 778</span></a>  
<a name="l779"><span class="linenum"> 779</span></a>      <span class="comment">/**</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * PHP overloading magic to catch obvious coding errors.</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     *</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">     * This method has been created to catch obvious coding errors where the</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">     * developer has tried to set a page property using $PAGE-&gt;key = $value.</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment">     * In the moodle_page class all properties must be set using the appropriate</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">     * $PAGE-&gt;set_something($value) method.</span>
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">     *</span>
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment">     * @param string $name property name</span>
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment">     * @param mixed $value Value</span>
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment">     * @return void Throws exception if field not defined in page class</span>
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment">     */</span>
<a name="l792"><span class="linenum"> 792</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l793"><span class="linenum"> 793</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, 'set_' . <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>)) {
<a name="l794"><span class="linenum"> 794</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid attempt to modify page object', &quot;Use \<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('set_')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/set_.html">set_</a><a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>() instead.&quot;);
<a name="l795"><span class="linenum"> 795</span></a>          } else {
<a name="l796"><span class="linenum"> 796</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid attempt to modify page object', &quot;Unknown property <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>&quot;);
<a name="l797"><span class="linenum"> 797</span></a>          }
<a name="l798"><span class="linenum"> 798</span></a>      }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">    // Other information getting methods ==========================================.</span>
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>      <span class="comment">/**</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">     * Returns instance of page renderer</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">     *</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment">     * @param string $component name such as 'core', 'mod_forum' or 'qtype_multichoice'.</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     * @param string $subtype optional subtype such as 'news' resulting to 'mod_forum_news'</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     * @param string $target one of rendering target constants</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">     * @return renderer_base</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">     */</span>
<a name="l810"><span class="linenum"> 810</span></a>      public function <a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a> = null, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a> = null) {
<a name="l811"><span class="linenum"> 811</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagelayout.html">pagelayout</a> === 'maintenance') {
<a name="l812"><span class="linenum"> 812</span></a>  <span class="comment">            // If the page is using the maintenance layout then we're going to force target to maintenance.</span>
<a name="l813"><span class="linenum"> 813</span></a>  <span class="comment">            // This leads to a special core renderer that is designed to block access to API's that are likely unavailable for this</span>
<a name="l814"><span class="linenum"> 814</span></a>  <span class="comment">            // page layout.</span>
<a name="l815"><span class="linenum"> 815</span></a>              <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a> = <a class="constant" onClick="logConstant('RENDERER_TARGET_MAINTENANCE')" href="../_constants/RENDERER_TARGET_MAINTENANCE.html" onMouseOver="constPopup(event,'RENDERER_TARGET_MAINTENANCE')">RENDERER_TARGET_MAINTENANCE</a>;
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('magic_get_theme')" href="../_functions/magic_get_theme.html" onMouseOver="funcPopup(event,'magic_get_theme')">magic_get_theme</a>()-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../_variables/subtype.html">$subtype</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a>);
<a name="l818"><span class="linenum"> 818</span></a>      }
<a name="l819"><span class="linenum"> 819</span></a>  
<a name="l820"><span class="linenum"> 820</span></a>      <span class="comment">/**</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">     * Checks to see if there are any items on the navbar object</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment">     *</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">     * @return bool true if there are, false if not</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">     */</span>
<a name="l825"><span class="linenum"> 825</span></a>      public function <a class="function" onClick="logFunction('has_navbar')" href="../_functions/has_navbar.html" onMouseOver="funcPopup(event,'has_navbar')">has_navbar</a>() {
<a name="l826"><span class="linenum"> 826</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navbar')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navbar.html">_navbar</a> === null) {
<a name="l827"><span class="linenum"> 827</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navbar')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navbar.html">_navbar</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navbar')" href="../_classes/navbar.html" onMouseOver="classPopup(event,'navbar')">navbar</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l828"><span class="linenum"> 828</span></a>          }
<a name="l829"><span class="linenum"> 829</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_navbar')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_navbar.html">_navbar</a>-&gt;<a class="function" onClick="logFunction('has_items')" href="../_functions/has_items.html" onMouseOver="funcPopup(event,'has_items')">has_items</a>();
<a name="l830"><span class="linenum"> 830</span></a>      }
<a name="l831"><span class="linenum"> 831</span></a>  
<a name="l832"><span class="linenum"> 832</span></a>      <span class="comment">/**</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment">     * Switches from the regular requirements manager to the fragment requirements manager to</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     * capture all necessary JavaScript to display a chunk of HTML such as an mform. This is for use</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     * by the get_fragment() web service and not for use elsewhere.</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     */</span>
<a name="l837"><span class="linenum"> 837</span></a>      public function <a class="function" onClick="logFunction('start_collecting_javascript_requirements')" href="../_functions/start_collecting_javascript_requirements.html" onMouseOver="funcPopup(event,'start_collecting_javascript_requirements')">start_collecting_javascript_requirements</a>() {
<a name="l838"><span class="linenum"> 838</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l839"><span class="linenum"> 839</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/outputfragmentrequirementslib.php');
<a name="l840"><span class="linenum"> 840</span></a>  
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment">        // Check that the requirements manager has not already been switched.</span>
<a name="l842"><span class="linenum"> 842</span></a>          if (<a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_requires.html">_requires</a>) == 'fragment_requirements_manager') {
<a name="l843"><span class="linenum"> 843</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('JavaScript collection has already been started.');
<a name="l844"><span class="linenum"> 844</span></a>          }
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">        // The header needs to have been called to flush out the generic JavaScript for the page. This allows only</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">        // JavaScript for the fragment to be collected. _wherethemewasinitialised is set when header() is called.</span>
<a name="l847"><span class="linenum"> 847</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_wherethemewasinitialised')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_wherethemewasinitialised.html">_wherethemewasinitialised</a>)) {
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">            // Change the current requirements manager over to the fragment manager to capture JS.</span>
<a name="l849"><span class="linenum"> 849</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_requires.html">_requires</a> = <span class="keyword">new </span><a class="class" onClick="logClass('fragment_requirements_manager')" href="../_classes/fragment_requirements_manager.html" onMouseOver="classPopup(event,'fragment_requirements_manager')">fragment_requirements_manager</a>();
<a name="l850"><span class="linenum"> 850</span></a>          } else {
<a name="l851"><span class="linenum"> 851</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>() needs to be called before collecting JavaScript requirements.');
<a name="l852"><span class="linenum"> 852</span></a>          }
<a name="l853"><span class="linenum"> 853</span></a>      }
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>      <span class="comment">/**</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     * Should the current user see this page in editing mode.</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     * That is, are they allowed to edit this page, and are they currently in</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * editing mode.</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * @return bool</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     */</span>
<a name="l861"><span class="linenum"> 861</span></a>      public function <a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() {
<a name="l862"><span class="linenum"> 862</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l863"><span class="linenum"> 863</span></a>          return !empty(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>();
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>      <span class="comment">/**</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     * Does the user have permission to edit blocks on this page.</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     * @return bool</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">     */</span>
<a name="l870"><span class="linenum"> 870</span></a>      public function <a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() {
<a name="l871"><span class="linenum"> 871</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_blockseditingcap')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_blockseditingcap.html">_blockseditingcap</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>);
<a name="l872"><span class="linenum"> 872</span></a>      }
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>      <span class="comment">/**</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">     * Does the user have permission to see this page in editing mode.</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">     * @return bool</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment">     */</span>
<a name="l878"><span class="linenum"> 878</span></a>      public function <a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>() {
<a name="l879"><span class="linenum"> 879</span></a>          return <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('all_editing_caps')" href="../_functions/all_editing_caps.html" onMouseOver="funcPopup(event,'all_editing_caps')">all_editing_caps</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>);
<a name="l880"><span class="linenum"> 880</span></a>      }
<a name="l881"><span class="linenum"> 881</span></a>  
<a name="l882"><span class="linenum"> 882</span></a>      <span class="comment">/**</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     * Get a description of this page. Normally displayed in the footer in developer debug mode.</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     * @return string</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     */</span>
<a name="l886"><span class="linenum"> 886</span></a>      public function <a class="function" onClick="logFunction('debug_summary')" href="../_functions/debug_summary.html" onMouseOver="funcPopup(event,'debug_summary')">debug_summary</a>() {
<a name="l887"><span class="linenum"> 887</span></a>          <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> = '';
<a name="l888"><span class="linenum"> 888</span></a>          <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> .= 'General type: ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagelayout.html">pagelayout</a> . '. ';
<a name="l889"><span class="linenum"> 889</span></a>          if (!<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l890"><span class="linenum"> 890</span></a>              <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> .= 'Context ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>() . ' (context id ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>-&gt;id . '). ';
<a name="l891"><span class="linenum"> 891</span></a>          }
<a name="l892"><span class="linenum"> 892</span></a>          <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> .= 'Page type ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> .  '. ';
<a name="l893"><span class="linenum"> 893</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('subpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a>) {
<a name="l894"><span class="linenum"> 894</span></a>              <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> .= 'Sub-page ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('subpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> .  '. ';
<a name="l895"><span class="linenum"> 895</span></a>          }
<a name="l896"><span class="linenum"> 896</span></a>          return <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a>;
<a name="l897"><span class="linenum"> 897</span></a>      }
<a name="l898"><span class="linenum"> 898</span></a>  
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">    // Setter methods =============================================================.</span>
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>      <span class="comment">/**</span>
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">     * Set the state.</span>
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">     *</span>
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment">     * The state must be one of that STATE_... constants, and the state is only allowed to advance one step at a time.</span>
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">     *</span>
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">     * @param int $state The new state.</span>
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">     */</span>
<a name="l909"><span class="linenum"> 909</span></a>      public function <a class="function" onClick="logFunction('set_state')" href="../_functions/set_state.html" onMouseOver="funcPopup(event,'set_state')">set_state</a>(<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>) {
<a name="l910"><span class="linenum"> 910</span></a>          if (<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> + 1 || <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a> &gt; self::STATE_DONE) {
<a name="l911"><span class="linenum"> 911</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid state passed to <a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>::set_state. We are in state ' .
<a name="l912"><span class="linenum"> 912</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> . ' and state ' . <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a> . ' was requested.');
<a name="l913"><span class="linenum"> 913</span></a>          }
<a name="l914"><span class="linenum"> 914</span></a>  
<a name="l915"><span class="linenum"> 915</span></a>          if (<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a> == self::STATE_PRINTING_HEADER) {
<a name="l916"><span class="linenum"> 916</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('starting_output')" href="../_functions/starting_output.html" onMouseOver="funcPopup(event,'starting_output')">starting_output</a>();
<a name="l917"><span class="linenum"> 917</span></a>          }
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>;
<a name="l920"><span class="linenum"> 920</span></a>      }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>      <span class="comment">/**</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment">     * Set the current course. This sets both $PAGE-&gt;course and $COURSE. It also</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">     * sets the right theme and locale.</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">     *</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">     * Normally you don't need to call this function yourself, require_login will</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     * call it for you if you pass a $course to it. You can use this function</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     * on pages that do need to call require_login().</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">     *</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">     * Sets $PAGE-&gt;context to the course context, if it is not already set.</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">     *</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">     * @param stdClass $course the course to set as the global course.</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment">     */</span>
<a name="l935"><span class="linenum"> 935</span></a>      public function <a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l936"><span class="linenum"> 936</span></a>          global <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>          if (empty(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l939"><span class="linenum"> 939</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> passed to <a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>::set_course does not look like a proper course object.');
<a name="l940"><span class="linenum"> 940</span></a>          }
<a name="l941"><span class="linenum"> 941</span></a>  
<a name="l942"><span class="linenum"> 942</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_theme_not_set')" href="../_functions/ensure_theme_not_set.html" onMouseOver="funcPopup(event,'ensure_theme_not_set')">ensure_theme_not_set</a>();
<a name="l943"><span class="linenum"> 943</span></a>  
<a name="l944"><span class="linenum"> 944</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id != <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l945"><span class="linenum"> 945</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a> = null;
<a name="l946"><span class="linenum"> 946</span></a>          }
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a> === <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>) {
<a name="l951"><span class="linenum"> 951</span></a>              <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>;
<a name="l952"><span class="linenum"> 952</span></a>              <a class="function" onClick="logFunction('moodle_setlocale')" href="../_functions/moodle_setlocale.html" onMouseOver="funcPopup(event,'moodle_setlocale')">moodle_setlocale</a>();
<a name="l953"><span class="linenum"> 953</span></a>          }
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>) {
<a name="l956"><span class="linenum"> 956</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id));
<a name="l957"><span class="linenum"> 957</span></a>          }
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment">        // Notify course format that this page is set for the course.</span>
<a name="l960"><span class="linenum"> 960</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id != <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l961"><span class="linenum"> 961</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it3119" onMouseOver="hilite(3119)" onMouseOut="lolite()" onClick="logVariable('courseformat')" href="../_variables/courseformat.html">$courseformat</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>);
<a name="l963"><span class="linenum"> 963</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('format-'. <a class="var it3119" onMouseOver="hilite(3119)" onMouseOut="lolite()" onClick="logVariable('courseformat')" href="../_variables/courseformat.html">$courseformat</a>-&gt;<a class="function" onClick="logFunction('get_format')" href="../_functions/get_format.html" onMouseOver="funcPopup(event,'get_format')">get_format</a>());
<a name="l964"><span class="linenum"> 964</span></a>              <a class="var it3119" onMouseOver="hilite(3119)" onMouseOut="lolite()" onClick="logVariable('courseformat')" href="../_variables/courseformat.html">$courseformat</a>-&gt;<a class="function" onClick="logFunction('page_set_course')" href="../_functions/page_set_course.html" onMouseOver="funcPopup(event,'page_set_course')">page_set_course</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l965"><span class="linenum"> 965</span></a>          } else {
<a name="l966"><span class="linenum"> 966</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('format-site');
<a name="l967"><span class="linenum"> 967</span></a>          }
<a name="l968"><span class="linenum"> 968</span></a>      }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>      <span class="comment">/**</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment">     * Set the main context to which this page belongs.</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">     *</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment">     * @param context $context a context object. You normally get this with context_xxxx::instance().</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment">     */</span>
<a name="l975"><span class="linenum"> 975</span></a>      public function <a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l976"><span class="linenum"> 976</span></a>          if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> === null) {
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">            // Extremely ugly hack which sets context to some value in order to prevent warnings,</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">            // use only for core error handling!!!!</span>
<a name="l979"><span class="linenum"> 979</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>) {
<a name="l980"><span class="linenum"> 980</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l981"><span class="linenum"> 981</span></a>              }
<a name="l982"><span class="linenum"> 982</span></a>              return;
<a name="l983"><span class="linenum"> 983</span></a>          }
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">        // Ideally we should set context only once.</span>
<a name="l985"><span class="linenum"> 985</span></a>          if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>) &amp;&amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a> !== <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>-&gt;id) {
<a name="l986"><span class="linenum"> 986</span></a>              <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>-&gt;contextlevel;
<a name="l987"><span class="linenum"> 987</span></a>              if (<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> or <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">                // Hmm - not ideal, but it might produce too many warnings due to the design of require_login.</span>
<a name="l989"><span class="linenum"> 989</span></a>              } else if (<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a> and (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context')" href="../_functions/get_parent_context.html" onMouseOver="funcPopup(event,'get_parent_context')">get_parent_context</a>()) and
<a name="l990"><span class="linenum"> 990</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>-&gt;id == <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">                // Hmm - most probably somebody did require_login() and after that set the block context.</span>
<a name="l992"><span class="linenum"> 992</span></a>              } else {
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">                // We do not want devs to do weird switching of context levels on the fly because we might have used</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">                // the context already such as in text filter in page title.</span>
<a name="l995"><span class="linenum"> 995</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Coding problem: unsupported modification of PAGE-&gt;context from {<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>} to {<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a>}&quot;);
<a name="l996"><span class="linenum"> 996</span></a>              }
<a name="l997"><span class="linenum"> 997</span></a>          }
<a name="l998"><span class="linenum"> 998</span></a>  
<a name="l999"><span class="linenum"> 999</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l1000"><span class="linenum">1000</span></a>      }
<a name="l1001"><span class="linenum">1001</span></a>  
<a name="l1002"><span class="linenum">1002</span></a>      <span class="comment">/**</span>
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">     * The course module that this page belongs to (if it does belong to one).</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">     *</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">     * @param stdClass|cm_info $cm a record from course_modules table or cm_info from get_fast_modinfo().</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">     * @param stdClass $module</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">     * @return void</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">     */</span>
<a name="l1011"><span class="linenum">1011</span></a>      public function <a class="function" onClick="logFunction('set_cm')" href="../_functions/set_cm.html" onMouseOver="funcPopup(event,'set_cm')">set_cm</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = null, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = null) {
<a name="l1012"><span class="linenum">1012</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1013"><span class="linenum">1013</span></a>  
<a name="l1014"><span class="linenum">1014</span></a>          if (!isset(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) || !isset(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>)) {
<a name="l1015"><span class="linenum">1015</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>. It has to be instance of cm_info or record from the course_modules table.');
<a name="l1016"><span class="linenum">1016</span></a>          }
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a> || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id != <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>) {
<a name="l1019"><span class="linenum">1019</span></a>              if (!<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1020"><span class="linenum">1020</span></a>                  <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1021"><span class="linenum">1021</span></a>              }
<a name="l1022"><span class="linenum">1022</span></a>              if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>) {
<a name="l1023"><span class="linenum">1023</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('The course you passed to <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('set_cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/set_cm.html">set_cm</a> does not correspond to the <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>.');
<a name="l1024"><span class="linenum">1024</span></a>              }
<a name="l1025"><span class="linenum">1025</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1026"><span class="linenum">1026</span></a>          }
<a name="l1027"><span class="linenum">1027</span></a>  
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">        // Make sure we have a $cm from get_fast_modinfo as this contains activity access details.</span>
<a name="l1029"><span class="linenum">1029</span></a>          if (!(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> instanceof cm_info)) {
<a name="l1030"><span class="linenum">1030</span></a>              <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>);
<a name="l1031"><span class="linenum">1031</span></a>              <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1032"><span class="linenum">1032</span></a>          }
<a name="l1033"><span class="linenum">1033</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>;
<a name="l1034"><span class="linenum">1034</span></a>  
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">        // Unfortunately the context setting is a mess.</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment">        // Let's try to work around some common block problems and show some debug messages.</span>
<a name="l1037"><span class="linenum">1037</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>) or <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>-&gt;contextlevel != <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>) {
<a name="l1038"><span class="linenum">1038</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1039"><span class="linenum">1039</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>          if (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>) {
<a name="l1043"><span class="linenum">1043</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_activity_record')" href="../_functions/set_activity_record.html" onMouseOver="funcPopup(event,'set_activity_record')">set_activity_record</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l1044"><span class="linenum">1044</span></a>          }
<a name="l1045"><span class="linenum">1045</span></a>  
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment">        // Notify course format that this page is set for the course module.</span>
<a name="l1047"><span class="linenum">1047</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id != <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1048"><span class="linenum">1048</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l1049"><span class="linenum">1049</span></a>              <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>)-&gt;<a class="function" onClick="logFunction('page_set_cm')" href="../_functions/page_set_cm.html" onMouseOver="funcPopup(event,'page_set_cm')">page_set_cm</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1050"><span class="linenum">1050</span></a>          }
<a name="l1051"><span class="linenum">1051</span></a>      }
<a name="l1052"><span class="linenum">1052</span></a>  
<a name="l1053"><span class="linenum">1053</span></a>      <span class="comment">/**</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     * Sets the activity record. This could be a row from the main table for a</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     * module. For instance if the current module (cm) is a forum this should be a row</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     * from the forum table.</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     *</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     * @param stdClass $module A row from the main database table for the module that this page belongs to.</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">     */</span>
<a name="l1061"><span class="linenum">1061</span></a>      public function <a class="function" onClick="logFunction('set_activity_record')" href="../_functions/set_activity_record.html" onMouseOver="funcPopup(event,'set_activity_record')">set_activity_record</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>) {
<a name="l1062"><span class="linenum">1062</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>)) {
<a name="l1063"><span class="linenum">1063</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('You cannot call <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('set_activity_record')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/set_activity_record.html">set_activity_record</a> until after <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/cm.html">cm</a> has been set.');
<a name="l1064"><span class="linenum">1064</span></a>          }
<a name="l1065"><span class="linenum">1065</span></a>          if (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>-&gt;instance || <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('course')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/course.html">course</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id) {
<a name="l1066"><span class="linenum">1066</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('The activity record does not seem to correspond to the cm that has been set.');
<a name="l1067"><span class="linenum">1067</span></a>          }
<a name="l1068"><span class="linenum">1068</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_module')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_module.html">_module</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>;
<a name="l1069"><span class="linenum">1069</span></a>      }
<a name="l1070"><span class="linenum">1070</span></a>  
<a name="l1071"><span class="linenum">1071</span></a>      <span class="comment">/**</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment">     * Sets the pagetype to use for this page.</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">     *</span>
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">     * Normally you do not need to set this manually, it is automatically created</span>
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment">     * from the script name. However, on some pages this is overridden.</span>
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment">     * For example the page type for course/view.php includes the course format,</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment">     * for example 'course-view-weeks'. This gets used as the id attribute on</span>
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment">     * &lt;body&gt; and also for determining which blocks are displayed.</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">     *</span>
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment">     * @param string $pagetype e.g. 'my-index' or 'mod-quiz-attempt'.</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment">     */</span>
<a name="l1082"><span class="linenum">1082</span></a>      public function <a class="function" onClick="logFunction('set_pagetype')" href="../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>) {
<a name="l1083"><span class="linenum">1083</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagetype.html">_pagetype</a> = <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>;
<a name="l1084"><span class="linenum">1084</span></a>      }
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>      <span class="comment">/**</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">     * Sets the layout to use for this page.</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment">     *</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment">     * The page layout determines how the page will be displayed, things such as</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment">     * block regions, content areas, etc are controlled by the layout.</span>
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">     * The theme in use for the page will determine that the layout contains.</span>
<a name="l1092"><span class="linenum">1092</span></a>  <span class="comment">     *</span>
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">     * This properly defaults to 'base', so you only need to call this function if</span>
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment">     * you want something different. The exact range of supported layouts is specified</span>
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment">     * in the standard theme.</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">     *</span>
<a name="l1097"><span class="linenum">1097</span></a>  <span class="comment">     * For an idea of the common page layouts see</span>
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">     * {@link http://docs.moodle.org/dev/Themes_2.0#The_different_layouts_as_of_August_17th.2C_2010}</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">     * But please keep in mind that it may be (and normally is) out of date.</span>
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">     * The only place to find an accurate up-to-date list of the page layouts</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">     * available for your version of Moodle is {@link theme/base/config.php}</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">     *</span>
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">     * @param string $pagelayout the page layout this is. For example 'popup', 'home'.</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment">     */</span>
<a name="l1105"><span class="linenum">1105</span></a>      public function <a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>(<a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('pagelayout')" href="../_variables/pagelayout.html">$pagelayout</a>) {
<a name="l1106"><span class="linenum">1106</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>          if (!empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('forcepagelayout')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/forcepagelayout.html">forcepagelayout</a>)) {
<a name="l1109"><span class="linenum">1109</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagelayout.html">_pagelayout</a> = <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('forcepagelayout')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/forcepagelayout.html">forcepagelayout</a>;
<a name="l1110"><span class="linenum">1110</span></a>          } else {
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">            // Uncomment this to debug theme pagelayout issues like missing blocks.</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">            // if (!empty($this-&gt;_wherethemewasinitialised) &amp;&amp; $pagelayout != $this-&gt;_pagelayout)</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">            //     debugging('Page layout has already been set and cannot be changed.', DEBUG_DEVELOPER);</span>
<a name="l1114"><span class="linenum">1114</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagelayout.html">_pagelayout</a> = <a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('pagelayout')" href="../_variables/pagelayout.html">$pagelayout</a>;
<a name="l1115"><span class="linenum">1115</span></a>          }
<a name="l1116"><span class="linenum">1116</span></a>      }
<a name="l1117"><span class="linenum">1117</span></a>  
<a name="l1118"><span class="linenum">1118</span></a>      <span class="comment">/**</span>
<a name="l1119"><span class="linenum">1119</span></a>  <span class="comment">     * If context-&gt;id and pagetype are not enough to uniquely identify this page,</span>
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">     * then you can set a subpage id as well. For example, the tags page sets</span>
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment">     *</span>
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">     * @param string $subpage an arbitrary identifier that, along with context-&gt;id</span>
<a name="l1123"><span class="linenum">1123</span></a>  <span class="comment">     *      and pagetype, uniquely identifies this page.</span>
<a name="l1124"><span class="linenum">1124</span></a>  <span class="comment">     */</span>
<a name="l1125"><span class="linenum">1125</span></a>      public function <a class="function" onClick="logFunction('set_subpage')" href="../_functions/set_subpage.html" onMouseOver="funcPopup(event,'set_subpage')">set_subpage</a>(<a class="var it3738" onMouseOver="hilite(3738)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a>) {
<a name="l1126"><span class="linenum">1126</span></a>          if (empty(<a class="var it3738" onMouseOver="hilite(3738)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a>)) {
<a name="l1127"><span class="linenum">1127</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_subpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_subpage.html">_subpage</a> = '';
<a name="l1128"><span class="linenum">1128</span></a>          } else {
<a name="l1129"><span class="linenum">1129</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_subpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_subpage.html">_subpage</a> = <a class="var it3738" onMouseOver="hilite(3738)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a>;
<a name="l1130"><span class="linenum">1130</span></a>          }
<a name="l1131"><span class="linenum">1131</span></a>      }
<a name="l1132"><span class="linenum">1132</span></a>  
<a name="l1133"><span class="linenum">1133</span></a>      <span class="comment">/**</span>
<a name="l1134"><span class="linenum">1134</span></a>  <span class="comment">     * Adds a CSS class to the body tag of the page.</span>
<a name="l1135"><span class="linenum">1135</span></a>  <span class="comment">     *</span>
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment">     * @param string $class add this class name ot the class attribute on the body tag.</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment">     */</span>
<a name="l1139"><span class="linenum">1139</span></a>      public function <a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>) {
<a name="l1140"><span class="linenum">1140</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> &gt; self::STATE_BEFORE_HEADER) {
<a name="l1141"><span class="linenum">1141</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Cannot call <a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>::add_body_class after output has been started.');
<a name="l1142"><span class="linenum">1142</span></a>          }
<a name="l1143"><span class="linenum">1143</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_bodyclasses')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_bodyclasses.html">_bodyclasses</a>[<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>] = 1;
<a name="l1144"><span class="linenum">1144</span></a>      }
<a name="l1145"><span class="linenum">1145</span></a>  
<a name="l1146"><span class="linenum">1146</span></a>      <span class="comment">/**</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     * Adds an array of body classes to the body tag of this page.</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     *</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment">     * @param array $classes this utility method calls add_body_class for each array element.</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment">     */</span>
<a name="l1151"><span class="linenum">1151</span></a>      public function <a class="function" onClick="logFunction('add_body_classes')" href="../_functions/add_body_classes.html" onMouseOver="funcPopup(event,'add_body_classes')">add_body_classes</a>(<a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a>) {
<a name="l1152"><span class="linenum">1152</span></a>          foreach (<a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a> as <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>) {
<a name="l1153"><span class="linenum">1153</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>);
<a name="l1154"><span class="linenum">1154</span></a>          }
<a name="l1155"><span class="linenum">1155</span></a>      }
<a name="l1156"><span class="linenum">1156</span></a>  
<a name="l1157"><span class="linenum">1157</span></a>      <span class="comment">/**</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">     * Sets the title for the page.</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">     * This is normally used within the title tag in the head of the page.</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">     *</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment">     * @param string $title the title that should go in the &lt;head&gt; section of the HTML of this page.</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment">     */</span>
<a name="l1163"><span class="linenum">1163</span></a>      public function <a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>) {
<a name="l1164"><span class="linenum">1164</span></a>          <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>);
<a name="l1165"><span class="linenum">1165</span></a>          <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>);
<a name="l1166"><span class="linenum">1166</span></a>          <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&quot;', '&amp;quot;', <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>);
<a name="l1167"><span class="linenum">1167</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_title')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_title.html">_title</a> = <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>;
<a name="l1168"><span class="linenum">1168</span></a>      }
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>      <span class="comment">/**</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">     * Sets the heading to use for the page.</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">     * This is normally used as the main heading at the top of the content.</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">     *</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">     * @param string $heading the main heading that should be displayed at the top of the &lt;body&gt;.</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">     */</span>
<a name="l1176"><span class="linenum">1176</span></a>      public function <a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>) {
<a name="l1177"><span class="linenum">1177</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_heading')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_heading.html">_heading</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>);
<a name="l1178"><span class="linenum">1178</span></a>      }
<a name="l1179"><span class="linenum">1179</span></a>  
<a name="l1180"><span class="linenum">1180</span></a>      <span class="comment">/**</span>
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">     * Sets some HTML to use next to the heading {@link moodle_page::set_heading()}</span>
<a name="l1182"><span class="linenum">1182</span></a>  <span class="comment">     *</span>
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment">     * @param string $menu The menu/content to show in the heading</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment">     */</span>
<a name="l1185"><span class="linenum">1185</span></a>      public function <a class="function" onClick="logFunction('set_headingmenu')" href="../_functions/set_headingmenu.html" onMouseOver="funcPopup(event,'set_headingmenu')">set_headingmenu</a>(<a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>) {
<a name="l1186"><span class="linenum">1186</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_headingmenu')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_headingmenu.html">_headingmenu</a> = <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>;
<a name="l1187"><span class="linenum">1187</span></a>      }
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>      <span class="comment">/**</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">     * Set the course category this page belongs to manually.</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">     *</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">     * This automatically sets $PAGE-&gt;course to be the site course. You cannot</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment">     * use this method if you have already set $PAGE-&gt;course - in that case,</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment">     * the category must be the one that the course belongs to. This also</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment">     * automatically sets the page context to the category context.</span>
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment">     *</span>
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment">     * @param int $categoryid The id of the category to set.</span>
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment">     */</span>
<a name="l1200"><span class="linenum">1200</span></a>      public function <a class="function" onClick="logFunction('set_category_by_id')" href="../_functions/set_category_by_id.html" onMouseOver="funcPopup(event,'set_category_by_id')">set_category_by_id</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l1201"><span class="linenum">1201</span></a>          global <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1202"><span class="linenum">1202</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>)) {
<a name="l1203"><span class="linenum">1203</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Course has already been set. You cannot change the category now.');
<a name="l1204"><span class="linenum">1204</span></a>          }
<a name="l1205"><span class="linenum">1205</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>)) {
<a name="l1206"><span class="linenum">1206</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Course category has already been set. You cannot to change it now.');
<a name="l1207"><span class="linenum">1207</span></a>          }
<a name="l1208"><span class="linenum">1208</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_theme_not_set')" href="../_functions/ensure_theme_not_set.html" onMouseOver="funcPopup(event,'ensure_theme_not_set')">ensure_theme_not_set</a>();
<a name="l1209"><span class="linenum">1209</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1210"><span class="linenum">1210</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_category')" href="../_functions/load_category.html" onMouseOver="funcPopup(event,'load_category')">load_category</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>);
<a name="l1211"><span class="linenum">1211</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>));
<a name="l1212"><span class="linenum">1212</span></a>      }
<a name="l1213"><span class="linenum">1213</span></a>  
<a name="l1214"><span class="linenum">1214</span></a>      <span class="comment">/**</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">     * Set a different path to use for the 'Moodle docs for this page' link.</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment">     *</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">     * By default, it uses the pagetype, which is normally the same as the</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">     * script name. So, for example, for mod/quiz/attempt.php, pagetype is</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">     * mod-quiz-attempt, and so docspath is mod/quiz/attempt.</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment">     *</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment">     * @param string $path the path to use at the end of the moodle docs URL.</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment">     */</span>
<a name="l1223"><span class="linenum">1223</span></a>      public function <a class="function" onClick="logFunction('set_docs_path')" href="../_functions/set_docs_path.html" onMouseOver="funcPopup(event,'set_docs_path')">set_docs_path</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l1224"><span class="linenum">1224</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_docspath')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_docspath.html">_docspath</a> = <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>;
<a name="l1225"><span class="linenum">1225</span></a>      }
<a name="l1226"><span class="linenum">1226</span></a>  
<a name="l1227"><span class="linenum">1227</span></a>      <span class="comment">/**</span>
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment">     * You should call this method from every page to set the URL that should be used to return to this page.</span>
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment">     *</span>
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment">     * Used, for example, by the blocks editing UI to know where to return the</span>
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment">     * user after an action.</span>
<a name="l1232"><span class="linenum">1232</span></a>  <span class="comment">     * For example, course/view.php does:</span>
<a name="l1233"><span class="linenum">1233</span></a>  <span class="comment">     *      $id = optional_param('id', 0, PARAM_INT);</span>
<a name="l1234"><span class="linenum">1234</span></a>  <span class="comment">     *      $PAGE-&gt;set_url('/course/view.php', array('id' =&gt; $id));</span>
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment">     *</span>
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">     * @param moodle_url|string $url URL relative to $CFG-&gt;wwwroot or {@link moodle_url} instance</span>
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment">     * @param array $params parameters to add to the URL</span>
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment">     */</span>
<a name="l1240"><span class="linenum">1240</span></a>      public function <a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, array <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = null) {
<a name="l1241"><span class="linenum">1241</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, 'http') !== 0) {
<a name="l1244"><span class="linenum">1244</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, '/') === 0) {
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment">                // We have to use httpswwwroot here, because of loginhttps pages.</span>
<a name="l1246"><span class="linenum">1246</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a> . <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l1247"><span class="linenum">1247</span></a>              } else {
<a name="l1248"><span class="linenum">1248</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid parameter <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, has to be full url or in shortened form starting with /.');
<a name="l1249"><span class="linenum">1249</span></a>              }
<a name="l1250"><span class="linenum">1250</span></a>          }
<a name="l1251"><span class="linenum">1251</span></a>  
<a name="l1252"><span class="linenum">1252</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1253"><span class="linenum">1253</span></a>  
<a name="l1254"><span class="linenum">1254</span></a>          <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../_variables/fullurl.html">$fullurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>();
<a name="l1255"><span class="linenum">1255</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../_variables/fullurl.html">$fullurl</a>, &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/&quot;) !== 0) {
<a name="l1256"><span class="linenum">1256</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Most probably incorrect <a class="function" onClick="logFunction('set_page')" href="../_functions/set_page.html" onMouseOver="funcPopup(event,'set_page')">set_page</a>() url argument, it does not match the httpswwwroot!');
<a name="l1257"><span class="linenum">1257</span></a>          }
<a name="l1258"><span class="linenum">1258</span></a>          <a class="var it15319" onMouseOver="hilite(15319)" onMouseOut="lolite()" onClick="logVariable('shorturl')" href="../_variables/shorturl.html">$shorturl</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/&quot;, '', <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../_variables/fullurl.html">$fullurl</a>);
<a name="l1259"><span class="linenum">1259</span></a>  
<a name="l1260"><span class="linenum">1260</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagetype.html">_pagetype</a>)) {
<a name="l1261"><span class="linenum">1261</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise_default_pagetype')" href="../_functions/initialise_default_pagetype.html" onMouseOver="funcPopup(event,'initialise_default_pagetype')">initialise_default_pagetype</a>(<a class="var it15319" onMouseOver="hilite(15319)" onMouseOut="lolite()" onClick="logVariable('shorturl')" href="../_variables/shorturl.html">$shorturl</a>);
<a name="l1262"><span class="linenum">1262</span></a>          }
<a name="l1263"><span class="linenum">1263</span></a>      }
<a name="l1264"><span class="linenum">1264</span></a>  
<a name="l1265"><span class="linenum">1265</span></a>      <span class="comment">/**</span>
<a name="l1266"><span class="linenum">1266</span></a>  <span class="comment">     * Make sure page URL does not contain the given URL parameter.</span>
<a name="l1267"><span class="linenum">1267</span></a>  <span class="comment">     *</span>
<a name="l1268"><span class="linenum">1268</span></a>  <span class="comment">     * This should not be necessary if the script has called set_url properly.</span>
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">     * However, in some situations like the block editing actions; when the URL</span>
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment">     * has been guessed, it will contain dangerous block-related actions.</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment">     * Therefore, the blocks code calls this function to clean up such parameters</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">     * before doing any redirect.</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">     *</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">     * @param string $param the name of the parameter to make sure is not in the</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">     * page URL.</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">     */</span>
<a name="l1277"><span class="linenum">1277</span></a>      public function <a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>) {
<a name="l1278"><span class="linenum">1278</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>-&gt;<a class="function" onClick="logFunction('remove_params')" href="../_functions/remove_params.html" onMouseOver="funcPopup(event,'remove_params')">remove_params</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>);
<a name="l1279"><span class="linenum">1279</span></a>      }
<a name="l1280"><span class="linenum">1280</span></a>  
<a name="l1281"><span class="linenum">1281</span></a>      <span class="comment">/**</span>
<a name="l1282"><span class="linenum">1282</span></a>  <span class="comment">     * Sets an alternative version of this page.</span>
<a name="l1283"><span class="linenum">1283</span></a>  <span class="comment">     *</span>
<a name="l1284"><span class="linenum">1284</span></a>  <span class="comment">     * There can be alternate versions of some pages (for example an RSS feed version).</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">     * Call this method for each alternative version available.</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">     * For each alternative version a link will be included in the &lt;head&gt; tag.</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment">     *</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">     * @param string $title The title to give the alternate version.</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">     * @param string|moodle_url $url The URL of the alternate version.</span>
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">     * @param string $mimetype The mime-type of the alternate version.</span>
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment">     */</span>
<a name="l1293"><span class="linenum">1293</span></a>      public function <a class="function" onClick="logFunction('add_alternate_version')" href="../_functions/add_alternate_version.html" onMouseOver="funcPopup(event,'add_alternate_version')">add_alternate_version</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>) {
<a name="l1294"><span class="linenum">1294</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> &gt; self::STATE_BEFORE_HEADER) {
<a name="l1295"><span class="linenum">1295</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Cannot call <a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>::add_alternate_version after output has been started.');
<a name="l1296"><span class="linenum">1296</span></a>          }
<a name="l1297"><span class="linenum">1297</span></a>          <a class="var it2582" onMouseOver="hilite(2582)" onMouseOut="lolite()" onClick="logVariable('alt')" href="../_variables/alt.html">$alt</a> = new stdClass;
<a name="l1298"><span class="linenum">1298</span></a>          <a class="var it2582" onMouseOver="hilite(2582)" onMouseOut="lolite()" onClick="logVariable('alt')" href="../_variables/alt.html">$alt</a>-&gt;<a onClick="logVariable('title')" class="var it44332" onMouseOver="hilite(44332)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>;
<a name="l1299"><span class="linenum">1299</span></a>          <a class="var it2582" onMouseOver="hilite(2582)" onMouseOut="lolite()" onClick="logVariable('alt')" href="../_variables/alt.html">$alt</a>-&gt;<a onClick="logVariable('url')" class="var it44332" onMouseOver="hilite(44332)" onMouseOut="lolite()" href="../_variables/url.html">url</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l1300"><span class="linenum">1300</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_alternateversions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_alternateversions.html">_alternateversions</a>[<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../_variables/mimetype.html">$mimetype</a>] = <a class="var it2582" onMouseOver="hilite(2582)" onMouseOut="lolite()" onClick="logVariable('alt')" href="../_variables/alt.html">$alt</a>;
<a name="l1301"><span class="linenum">1301</span></a>      }
<a name="l1302"><span class="linenum">1302</span></a>  
<a name="l1303"><span class="linenum">1303</span></a>      <span class="comment">/**</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">     * Specify a form control should be focused when the page has loaded.</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">     *</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment">     * @param string $controlid the id of the HTML element to be focused.</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">     */</span>
<a name="l1308"><span class="linenum">1308</span></a>      public function <a class="function" onClick="logFunction('set_focuscontrol')" href="../_functions/set_focuscontrol.html" onMouseOver="funcPopup(event,'set_focuscontrol')">set_focuscontrol</a>(<a class="var it26135" onMouseOver="hilite(26135)" onMouseOut="lolite()" onClick="logVariable('controlid')" href="../_variables/controlid.html">$controlid</a>) {
<a name="l1309"><span class="linenum">1309</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_focuscontrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_focuscontrol.html">_focuscontrol</a> = <a class="var it26135" onMouseOver="hilite(26135)" onMouseOut="lolite()" onClick="logVariable('controlid')" href="../_variables/controlid.html">$controlid</a>;
<a name="l1310"><span class="linenum">1310</span></a>      }
<a name="l1311"><span class="linenum">1311</span></a>  
<a name="l1312"><span class="linenum">1312</span></a>      <span class="comment">/**</span>
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment">     * Specify a fragment of HTML that goes where the 'Turn editing on' button normally goes.</span>
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">     *</span>
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment">     * @param string $html the HTML to display there.</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment">     */</span>
<a name="l1317"><span class="linenum">1317</span></a>      public function <a class="function" onClick="logFunction('set_button')" href="../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../_variables/html.html">$html</a>) {
<a name="l1318"><span class="linenum">1318</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_button')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_button.html">_button</a> = <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../_variables/html.html">$html</a>;
<a name="l1319"><span class="linenum">1319</span></a>      }
<a name="l1320"><span class="linenum">1320</span></a>  
<a name="l1321"><span class="linenum">1321</span></a>      <span class="comment">/**</span>
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment">     * Set the capability that allows users to edit blocks on this page.</span>
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">     *</span>
<a name="l1324"><span class="linenum">1324</span></a>  <span class="comment">     * Normally the default of 'moodle/site:manageblocks' is used, but a few</span>
<a name="l1325"><span class="linenum">1325</span></a>  <span class="comment">     * pages like the My Moodle page need to use a different capability</span>
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">     * like 'moodle/my:manageblocks'.</span>
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">     *</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment">     * @param string $capability a capability.</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment">     */</span>
<a name="l1330"><span class="linenum">1330</span></a>      public function <a class="function" onClick="logFunction('set_blocks_editing_capability')" href="../_functions/set_blocks_editing_capability.html" onMouseOver="funcPopup(event,'set_blocks_editing_capability')">set_blocks_editing_capability</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>) {
<a name="l1331"><span class="linenum">1331</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_blockseditingcap')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_blockseditingcap.html">_blockseditingcap</a> = <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>;
<a name="l1332"><span class="linenum">1332</span></a>      }
<a name="l1333"><span class="linenum">1333</span></a>  
<a name="l1334"><span class="linenum">1334</span></a>      <span class="comment">/**</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment">     * Some pages let you turn editing on for reasons other than editing blocks.</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">     * If that is the case, you can pass other capabilities that let the user</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">     * edit this page here.</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">     *</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment">     * @param string|array $capability either a capability, or an array of capabilities.</span>
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">     */</span>
<a name="l1341"><span class="linenum">1341</span></a>      public function <a class="function" onClick="logFunction('set_other_editing_capability')" href="../_functions/set_other_editing_capability.html" onMouseOver="funcPopup(event,'set_other_editing_capability')">set_other_editing_capability</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>) {
<a name="l1342"><span class="linenum">1342</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>)) {
<a name="l1343"><span class="linenum">1343</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_othereditingcaps')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_othereditingcaps.html">_othereditingcaps</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_othereditingcaps')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_othereditingcaps.html">_othereditingcaps</a> + <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>);
<a name="l1344"><span class="linenum">1344</span></a>          } else {
<a name="l1345"><span class="linenum">1345</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_othereditingcaps')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_othereditingcaps.html">_othereditingcaps</a>[] = <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>;
<a name="l1346"><span class="linenum">1346</span></a>          }
<a name="l1347"><span class="linenum">1347</span></a>      }
<a name="l1348"><span class="linenum">1348</span></a>  
<a name="l1349"><span class="linenum">1349</span></a>      <span class="comment">/**</span>
<a name="l1350"><span class="linenum">1350</span></a>  <span class="comment">     * Sets whether the browser should cache this page or not.</span>
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">     *</span>
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment">     * @param bool $cacheable can this page be cached by the user's browser.</span>
<a name="l1353"><span class="linenum">1353</span></a>  <span class="comment">     */</span>
<a name="l1354"><span class="linenum">1354</span></a>      public function <a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(<a class="var it3652" onMouseOver="hilite(3652)" onMouseOut="lolite()" onClick="logVariable('cacheable')" href="../_variables/cacheable.html">$cacheable</a>) {
<a name="l1355"><span class="linenum">1355</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cacheable')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cacheable.html">_cacheable</a> = <a class="var it3652" onMouseOver="hilite(3652)" onMouseOut="lolite()" onClick="logVariable('cacheable')" href="../_variables/cacheable.html">$cacheable</a>;
<a name="l1356"><span class="linenum">1356</span></a>      }
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>      <span class="comment">/**</span>
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment">     * Sets the page to periodically refresh</span>
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">     *</span>
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">     * This function must be called before $OUTPUT-&gt;header has been called or</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">     * a coding exception will be thrown.</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">     *</span>
<a name="l1364"><span class="linenum">1364</span></a>  <span class="comment">     * @param int $delay Sets the delay before refreshing the page, if set to null refresh is cancelled.</span>
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">     */</span>
<a name="l1367"><span class="linenum">1367</span></a>      public function <a class="function" onClick="logFunction('set_periodic_refresh_delay')" href="../_functions/set_periodic_refresh_delay.html" onMouseOver="funcPopup(event,'set_periodic_refresh_delay')">set_periodic_refresh_delay</a>(<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> = null) {
<a name="l1368"><span class="linenum">1368</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_state')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_state.html">_state</a> &gt; self::STATE_BEFORE_HEADER) {
<a name="l1369"><span class="linenum">1369</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('You cannot set a periodic refresh delay after the header has been printed');
<a name="l1370"><span class="linenum">1370</span></a>          }
<a name="l1371"><span class="linenum">1371</span></a>          if (<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> === null) {
<a name="l1372"><span class="linenum">1372</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_periodicrefreshdelay')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_periodicrefreshdelay.html">_periodicrefreshdelay</a> = null;
<a name="l1373"><span class="linenum">1373</span></a>          } else if (is_int(<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>)) {
<a name="l1374"><span class="linenum">1374</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_periodicrefreshdelay')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_periodicrefreshdelay.html">_periodicrefreshdelay</a> = <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>;
<a name="l1375"><span class="linenum">1375</span></a>          }
<a name="l1376"><span class="linenum">1376</span></a>      }
<a name="l1377"><span class="linenum">1377</span></a>  
<a name="l1378"><span class="linenum">1378</span></a>      <span class="comment">/**</span>
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">     * Force this page to use a particular theme.</span>
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment">     *</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment">     * Please use this cautiously.</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment">     * It is only intended to be used by the themes selector admin page.</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment">     *</span>
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment">     * @param string $themename the name of the theme to use.</span>
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">     */</span>
<a name="l1386"><span class="linenum">1386</span></a>      public function <a class="function" onClick="logFunction('force_theme')" href="../_functions/force_theme.html" onMouseOver="funcPopup(event,'force_theme')">force_theme</a>(<a class="var it8617" onMouseOver="hilite(8617)" onMouseOut="lolite()" onClick="logVariable('themename')" href="../_variables/themename.html">$themename</a>) {
<a name="l1387"><span class="linenum">1387</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_theme_not_set')" href="../_functions/ensure_theme_not_set.html" onMouseOver="funcPopup(event,'ensure_theme_not_set')">ensure_theme_not_set</a>();
<a name="l1388"><span class="linenum">1388</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a> = <a class="class" onClick="logClass('theme_config')" href="../_classes/theme_config.html" onMouseOver="classPopup(event,'theme_config')">theme_config</a>::<a class="function" onClick="logFunction('load')" href="../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it8617" onMouseOver="hilite(8617)" onMouseOut="lolite()" onClick="logVariable('themename')" href="../_variables/themename.html">$themename</a>);
<a name="l1389"><span class="linenum">1389</span></a>      }
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>      <span class="comment">/**</span>
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment">     * Reload theme settings.</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment">     *</span>
<a name="l1394"><span class="linenum">1394</span></a>  <span class="comment">     * This is used when we need to reset settings</span>
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment">     * because they are now double cached in theme.</span>
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment">     */</span>
<a name="l1397"><span class="linenum">1397</span></a>      public function <a class="function" onClick="logFunction('reload_theme')" href="../_functions/reload_theme.html" onMouseOver="funcPopup(event,'reload_theme')">reload_theme</a>() {
<a name="l1398"><span class="linenum">1398</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>)) {
<a name="l1399"><span class="linenum">1399</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a> = <a class="class" onClick="logClass('theme_config')" href="../_classes/theme_config.html" onMouseOver="classPopup(event,'theme_config')">theme_config</a>::<a class="function" onClick="logFunction('load')" href="../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>-&gt;name);
<a name="l1400"><span class="linenum">1400</span></a>          }
<a name="l1401"><span class="linenum">1401</span></a>      }
<a name="l1402"><span class="linenum">1402</span></a>  
<a name="l1403"><span class="linenum">1403</span></a>      <span class="comment">/**</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment">     * This function indicates that current page requires the https when $CFG-&gt;loginhttps enabled.</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">     *</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">     * By using this function properly, we can ensure 100% https-ized pages</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment">     * at our entire discretion (login, forgot_password, change_password)</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">     *</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">     * @return void</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">     */</span>
<a name="l1412"><span class="linenum">1412</span></a>      public function <a class="function" onClick="logFunction('https_required')" href="../_functions/https_required.html" onMouseOver="funcPopup(event,'https_required')">https_required</a>() {
<a name="l1413"><span class="linenum">1413</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1414"><span class="linenum">1414</span></a>  
<a name="l1415"><span class="linenum">1415</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>)) {
<a name="l1416"><span class="linenum">1416</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="function" onClick="logFunction('https_required')" href="../_functions/https_required.html" onMouseOver="funcPopup(event,'https_required')">https_required</a>() must be used before setting page url!');
<a name="l1417"><span class="linenum">1417</span></a>          }
<a name="l1418"><span class="linenum">1418</span></a>  
<a name="l1419"><span class="linenum">1419</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_theme_not_set')" href="../_functions/ensure_theme_not_set.html" onMouseOver="funcPopup(event,'ensure_theme_not_set')">ensure_theme_not_set</a>();
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_https_login_required')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_https_login_required.html">_https_login_required</a> = true;
<a name="l1422"><span class="linenum">1422</span></a>  
<a name="l1423"><span class="linenum">1423</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('loginhttps')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/loginhttps.html">loginhttps</a>)) {
<a name="l1424"><span class="linenum">1424</span></a>              <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('http:', 'https:', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>);
<a name="l1425"><span class="linenum">1425</span></a>          } else {
<a name="l1426"><span class="linenum">1426</span></a>              <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>;
<a name="l1427"><span class="linenum">1427</span></a>          }
<a name="l1428"><span class="linenum">1428</span></a>      }
<a name="l1429"><span class="linenum">1429</span></a>  
<a name="l1430"><span class="linenum">1430</span></a>      <span class="comment">/**</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">     * Makes sure that page previously marked with https_required() is really using https://, if not it redirects to https://</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">     *</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment">     * @return void (may redirect to https://self)</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment">     */</span>
<a name="l1436"><span class="linenum">1436</span></a>      public function <a class="function" onClick="logFunction('verify_https_required')" href="../_functions/verify_https_required.html" onMouseOver="funcPopup(event,'verify_https_required')">verify_https_required</a>() {
<a name="l1437"><span class="linenum">1437</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>;
<a name="l1438"><span class="linenum">1438</span></a>  
<a name="l1439"><span class="linenum">1439</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>)) {
<a name="l1440"><span class="linenum">1440</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="function" onClick="logFunction('verify_https_required')" href="../_functions/verify_https_required.html" onMouseOver="funcPopup(event,'verify_https_required')">verify_https_required</a>() must be called after setting page url!');
<a name="l1441"><span class="linenum">1441</span></a>          }
<a name="l1442"><span class="linenum">1442</span></a>  
<a name="l1443"><span class="linenum">1443</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_https_login_required')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_https_login_required.html">_https_login_required</a>) {
<a name="l1444"><span class="linenum">1444</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('<a class="function" onClick="logFunction('verify_https_required')" href="../_functions/verify_https_required.html" onMouseOver="funcPopup(event,'verify_https_required')">verify_https_required</a>() must be called only after <a class="function" onClick="logFunction('https_required')" href="../_functions/https_required.html" onMouseOver="funcPopup(event,'https_required')">https_required</a>()!');
<a name="l1445"><span class="linenum">1445</span></a>          }
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('loginhttps')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/loginhttps.html">loginhttps</a>)) {
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment">            // Https not required, so stop checking.</span>
<a name="l1449"><span class="linenum">1449</span></a>              return;
<a name="l1450"><span class="linenum">1450</span></a>          }
<a name="l1451"><span class="linenum">1451</span></a>  
<a name="l1452"><span class="linenum">1452</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>, 'https://')) {
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">            // Detect if incorrect PAGE-&gt;set_url() used, it is recommended to use root-relative paths there.</span>
<a name="l1454"><span class="linenum">1454</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid page url. It must start with https:// for pages that set <a class="function" onClick="logFunction('https_required')" href="../_functions/https_required.html" onMouseOver="funcPopup(event,'https_required')">https_required</a>()!');
<a name="l1455"><span class="linenum">1455</span></a>          }
<a name="l1456"><span class="linenum">1456</span></a>  
<a name="l1457"><span class="linenum">1457</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('sslproxy')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/sslproxy.html">sslproxy</a>)) {
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">            // It does not make much sense to use sslproxy and loginhttps at the same time.</span>
<a name="l1459"><span class="linenum">1459</span></a>              return;
<a name="l1460"><span class="linenum">1460</span></a>          }
<a name="l1461"><span class="linenum">1461</span></a>  
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment">        // Now the real test and redirect!</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment">        // NOTE: do NOT use this test for detection of https on current page because this code is not compatible with SSL proxies,</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment">        //       instead use is_https().</span>
<a name="l1465"><span class="linenum">1465</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>, 'https:') !== 0) {
<a name="l1466"><span class="linenum">1466</span></a>  <span class="comment">            // This may lead to infinite redirect on an incorrectly configured site.</span>
<a name="l1467"><span class="linenum">1467</span></a>  <span class="comment">            // In that case set $CFG-&gt;loginhttps=0; within /config.php.</span>
<a name="l1468"><span class="linenum">1468</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>);
<a name="l1469"><span class="linenum">1469</span></a>          }
<a name="l1470"><span class="linenum">1470</span></a>      }
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">    // Initialisation methods =====================================================</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">    // These set various things up in a default way.</span>
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>      <span class="comment">/**</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment">     * This method is called when the page first moves out of the STATE_BEFORE_HEADER</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment">     * state. This is our last change to initialise things.</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment">     */</span>
<a name="l1479"><span class="linenum">1479</span></a>      protected function <a class="function" onClick="logFunction('starting_output')" href="../_functions/starting_output.html" onMouseOver="funcPopup(event,'starting_output')">starting_output</a>() {
<a name="l1480"><span class="linenum">1480</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1481"><span class="linenum">1481</span></a>  
<a name="l1482"><span class="linenum">1482</span></a>          if (!<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1483"><span class="linenum">1483</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('load_blocks')" href="../_functions/load_blocks.html" onMouseOver="funcPopup(event,'load_blocks')">load_blocks</a>();
<a name="l1484"><span class="linenum">1484</span></a>              if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_block_actions_done')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_block_actions_done.html">_block_actions_done</a>)) {
<a name="l1485"><span class="linenum">1485</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_block_actions_done')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_block_actions_done.html">_block_actions_done</a> = true;
<a name="l1486"><span class="linenum">1486</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('process_url_actions')" href="../_functions/process_url_actions.html" onMouseOver="funcPopup(event,'process_url_actions')">process_url_actions</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>)) {
<a name="l1487"><span class="linenum">1487</span></a>                      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false));
<a name="l1488"><span class="linenum">1488</span></a>                  }
<a name="l1489"><span class="linenum">1489</span></a>              }
<a name="l1490"><span class="linenum">1490</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('create_all_block_instances')" href="../_functions/create_all_block_instances.html" onMouseOver="funcPopup(event,'create_all_block_instances')">create_all_block_instances</a>();
<a name="l1491"><span class="linenum">1491</span></a>          }
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>  <span class="comment">        // If maintenance mode is on, change the page header.</span>
<a name="l1494"><span class="linenum">1494</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maintenance_enabled')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/maintenance_enabled.html">maintenance_enabled</a>)) {
<a name="l1495"><span class="linenum">1495</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_button')" href="../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>('&lt;a href=&quot;' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a> .
<a name="l1496"><span class="linenum">1496</span></a>                      '/settings.php?section=maintenancemode&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('maintenancemode', 'admin') .
<a name="l1497"><span class="linenum">1497</span></a>                      '&lt;/a&gt; ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('button')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/button.html">button</a>);
<a name="l1498"><span class="linenum">1498</span></a>  
<a name="l1499"><span class="linenum">1499</span></a>              <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/title.html">title</a>;
<a name="l1500"><span class="linenum">1500</span></a>              if (<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>) {
<a name="l1501"><span class="linenum">1501</span></a>                  <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> .= ' - ';
<a name="l1502"><span class="linenum">1502</span></a>              }
<a name="l1503"><span class="linenum">1503</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> . <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('maintenancemode', 'admin'));
<a name="l1504"><span class="linenum">1504</span></a>          } else {
<a name="l1505"><span class="linenum">1505</span></a>  <span class="comment">            // Show the messaging popup if there are messages.</span>
<a name="l1506"><span class="linenum">1506</span></a>              <a class="function" onClick="logFunction('message_popup_window')" href="../_functions/message_popup_window.html" onMouseOver="funcPopup(event,'message_popup_window')">message_popup_window</a>();
<a name="l1507"><span class="linenum">1507</span></a>          }
<a name="l1508"><span class="linenum">1508</span></a>  
<a name="l1509"><span class="linenum">1509</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise_standard_body_classes')" href="../_functions/initialise_standard_body_classes.html" onMouseOver="funcPopup(event,'initialise_standard_body_classes')">initialise_standard_body_classes</a>();
<a name="l1510"><span class="linenum">1510</span></a>      }
<a name="l1511"><span class="linenum">1511</span></a>  
<a name="l1512"><span class="linenum">1512</span></a>      <span class="comment">/**</span>
<a name="l1513"><span class="linenum">1513</span></a>  <span class="comment">     * Method for use by Moodle core to set up the theme. Do not</span>
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment">     * use this in your own code.</span>
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment">     *</span>
<a name="l1516"><span class="linenum">1516</span></a>  <span class="comment">     * Make sure the right theme for this page is loaded. Tell our</span>
<a name="l1517"><span class="linenum">1517</span></a>  <span class="comment">     * blocks_manager about the theme block regions, and then, if</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">     * we are $PAGE, set up the global $OUTPUT.</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">     *</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">     * @return void</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     */</span>
<a name="l1522"><span class="linenum">1522</span></a>      public function <a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>() {
<a name="l1523"><span class="linenum">1523</span></a>          global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1524"><span class="linenum">1524</span></a>  
<a name="l1525"><span class="linenum">1525</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_wherethemewasinitialised')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_wherethemewasinitialised.html">_wherethemewasinitialised</a>)) {
<a name="l1526"><span class="linenum">1526</span></a>              return;
<a name="l1527"><span class="linenum">1527</span></a>          }
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>          if (!<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment">            // Detect PAGE-&gt;context mess.</span>
<a name="l1531"><span class="linenum">1531</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('magic_get_context')" href="../_functions/magic_get_context.html" onMouseOver="funcPopup(event,'magic_get_context')">magic_get_context</a>();
<a name="l1532"><span class="linenum">1532</span></a>          }
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a> &amp;&amp; !<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1535"><span class="linenum">1535</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1536"><span class="linenum">1536</span></a>          }
<a name="l1537"><span class="linenum">1537</span></a>  
<a name="l1538"><span class="linenum">1538</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>)) {
<a name="l1539"><span class="linenum">1539</span></a>              <a class="var it8617" onMouseOver="hilite(8617)" onMouseOut="lolite()" onClick="logVariable('themename')" href="../_variables/themename.html">$themename</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resolve_theme')" href="../_functions/resolve_theme.html" onMouseOver="funcPopup(event,'resolve_theme')">resolve_theme</a>();
<a name="l1540"><span class="linenum">1540</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a> = <a class="class" onClick="logClass('theme_config')" href="../_classes/theme_config.html" onMouseOver="classPopup(event,'theme_config')">theme_config</a>::<a class="function" onClick="logFunction('load')" href="../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it8617" onMouseOver="hilite(8617)" onMouseOut="lolite()" onClick="logVariable('themename')" href="../_variables/themename.html">$themename</a>);
<a name="l1541"><span class="linenum">1541</span></a>          }
<a name="l1542"><span class="linenum">1542</span></a>  
<a name="l1543"><span class="linenum">1543</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>-&gt;<a class="function" onClick="logFunction('setup_blocks')" href="../_functions/setup_blocks.html" onMouseOver="funcPopup(event,'setup_blocks')">setup_blocks</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagelayout.html">pagelayout</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>);
<a name="l1544"><span class="linenum">1544</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>-&gt;enable_dock &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowblockstodock')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowblockstodock.html">allowblockstodock</a>)) {
<a name="l1545"><span class="linenum">1545</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array('addtodock', 'undockitem', 'dockblock', 'undockblock', 'undockall', 'hidedockpanel', 'hidepanel'), 'block');
<a name="l1546"><span class="linenum">1546</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('thisdirectionvertical', 'langconfig');
<a name="l1547"><span class="linenum">1547</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('requires')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-core-dock-loader', 'M.core.dock.loader.initLoader');
<a name="l1548"><span class="linenum">1548</span></a>          }
<a name="l1549"><span class="linenum">1549</span></a>  
<a name="l1550"><span class="linenum">1550</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a> === <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>) {
<a name="l1551"><span class="linenum">1551</span></a>              <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a> = null;
<a name="l1552"><span class="linenum">1552</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagelayout.html">pagelayout</a> === 'maintenance') {
<a name="l1553"><span class="linenum">1553</span></a>  <span class="comment">                // If the page is using the maintenance layout then we're going to force target to maintenance.</span>
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">                // This leads to a special core renderer that is designed to block access to API's that are likely unavailable for this</span>
<a name="l1555"><span class="linenum">1555</span></a>  <span class="comment">                // page layout.</span>
<a name="l1556"><span class="linenum">1556</span></a>                  <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a> = <a class="constant" onClick="logConstant('RENDERER_TARGET_MAINTENANCE')" href="../_constants/RENDERER_TARGET_MAINTENANCE.html" onMouseOver="constPopup(event,'RENDERER_TARGET_MAINTENANCE')">RENDERER_TARGET_MAINTENANCE</a>;
<a name="l1557"><span class="linenum">1557</span></a>              }
<a name="l1558"><span class="linenum">1558</span></a>              <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', null, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a>);
<a name="l1559"><span class="linenum">1559</span></a>          }
<a name="l1560"><span class="linenum">1560</span></a>  
<a name="l1561"><span class="linenum">1561</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_wherethemewasinitialised')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_wherethemewasinitialised.html">_wherethemewasinitialised</a> = <a class="phpfunction" onClick="logFunction('debug_backtrace')" href="../_functions/debug_backtrace.html" onMouseOver="phpfuncPopup(event,'debug_backtrace')">debug_backtrace</a>();
<a name="l1562"><span class="linenum">1562</span></a>      }
<a name="l1563"><span class="linenum">1563</span></a>  
<a name="l1564"><span class="linenum">1564</span></a>      <span class="comment">/**</span>
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment">     * Reset the theme and output for a new context. This only makes sense from</span>
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment">     * external::validate_context(). Do not cheat.</span>
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment">     *</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment">     * @return string the name of the theme that should be used on this page.</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">     */</span>
<a name="l1570"><span class="linenum">1570</span></a>      public function <a class="function" onClick="logFunction('reset_theme_and_output')" href="../_functions/reset_theme_and_output.html" onMouseOver="funcPopup(event,'reset_theme_and_output')">reset_theme_and_output</a>() {
<a name="l1571"><span class="linenum">1571</span></a>          global <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1574"><span class="linenum">1574</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a> = null;
<a name="l1575"><span class="linenum">1575</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_wherethemewasinitialised')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_wherethemewasinitialised.html">_wherethemewasinitialised</a> = null;
<a name="l1576"><span class="linenum">1576</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a> = null;
<a name="l1577"><span class="linenum">1577</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a> = null;
<a name="l1578"><span class="linenum">1578</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_module')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_module.html">_module</a> = null;
<a name="l1579"><span class="linenum">1579</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a> = null;
<a name="l1580"><span class="linenum">1580</span></a>      }
<a name="l1581"><span class="linenum">1581</span></a>  
<a name="l1582"><span class="linenum">1582</span></a>      <span class="comment">/**</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">     * Work out the theme this page should use.</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     *</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     * This depends on numerous $CFG settings, and the properties of this page.</span>
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">     *</span>
<a name="l1587"><span class="linenum">1587</span></a>  <span class="comment">     * @return string the name of the theme that should be used on this page.</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment">     */</span>
<a name="l1589"><span class="linenum">1589</span></a>      protected function <a class="function" onClick="logFunction('resolve_theme')" href="../_functions/resolve_theme.html" onMouseOver="funcPopup(event,'resolve_theme')">resolve_theme</a>() {
<a name="l1590"><span class="linenum">1590</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l1591"><span class="linenum">1591</span></a>  
<a name="l1592"><span class="linenum">1592</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('themeorder')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/themeorder.html">themeorder</a>)) {
<a name="l1593"><span class="linenum">1593</span></a>              <a class="var it26136" onMouseOver="hilite(26136)" onMouseOut="lolite()" onClick="logVariable('themeorder')" href="../_variables/themeorder.html">$themeorder</a> = array('course', 'category', 'session', 'user', 'site');
<a name="l1594"><span class="linenum">1594</span></a>          } else {
<a name="l1595"><span class="linenum">1595</span></a>              <a class="var it26136" onMouseOver="hilite(26136)" onMouseOut="lolite()" onClick="logVariable('themeorder')" href="../_variables/themeorder.html">$themeorder</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('themeorder')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/themeorder.html">themeorder</a>;
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment">            // Just in case, make sure we always use the site theme if nothing else matched.</span>
<a name="l1597"><span class="linenum">1597</span></a>              <a class="var it26136" onMouseOver="hilite(26136)" onMouseOut="lolite()" onClick="logVariable('themeorder')" href="../_variables/themeorder.html">$themeorder</a>[] = 'site';
<a name="l1598"><span class="linenum">1598</span></a>          }
<a name="l1599"><span class="linenum">1599</span></a>  
<a name="l1600"><span class="linenum">1600</span></a>          <a class="var it26137" onMouseOver="hilite(26137)" onMouseOut="lolite()" onClick="logVariable('mnetpeertheme')" href="../_variables/mnetpeertheme.html">$mnetpeertheme</a> = '';
<a name="l1601"><span class="linenum">1601</span></a>          if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() and isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('mnet_localhost_id')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/mnet_localhost_id.html">mnet_localhost_id</a>) and <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('mnethostid')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/mnethostid.html">mnethostid</a> != <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('mnet_localhost_id')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/mnet_localhost_id.html">mnet_localhost_id</a>) {
<a name="l1602"><span class="linenum">1602</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../mnet/peer.php.html">/mnet/peer.php</a>');
<a name="l1603"><span class="linenum">1603</span></a>              <a class="var it26138" onMouseOver="hilite(26138)" onMouseOut="lolite()" onClick="logVariable('mnetpeer')" href="../_variables/mnetpeer.html">$mnetpeer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mnet_peer')" href="../_classes/mnet_peer.html" onMouseOver="classPopup(event,'mnet_peer')">mnet_peer</a>();
<a name="l1604"><span class="linenum">1604</span></a>              <a class="var it26138" onMouseOver="hilite(26138)" onMouseOut="lolite()" onClick="logVariable('mnetpeer')" href="../_variables/mnetpeer.html">$mnetpeer</a>-&gt;<a class="function" onClick="logFunction('set_id')" href="../_functions/set_id.html" onMouseOver="funcPopup(event,'set_id')">set_id</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('mnethostid')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/mnethostid.html">mnethostid</a>);
<a name="l1605"><span class="linenum">1605</span></a>              if (<a class="var it26138" onMouseOver="hilite(26138)" onMouseOut="lolite()" onClick="logVariable('mnetpeer')" href="../_variables/mnetpeer.html">$mnetpeer</a>-&gt;<a onClick="logVariable('force_theme')" class="var it44344" onMouseOver="hilite(44344)" onMouseOut="lolite()" href="../_variables/force_theme.html">force_theme</a> == 1 &amp;&amp; <a class="var it26138" onMouseOver="hilite(26138)" onMouseOut="lolite()" onClick="logVariable('mnetpeer')" href="../_variables/mnetpeer.html">$mnetpeer</a>-&gt;<a onClick="logVariable('theme')" class="var it44344" onMouseOver="hilite(44344)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a> != '') {
<a name="l1606"><span class="linenum">1606</span></a>                  <a class="var it26137" onMouseOver="hilite(26137)" onMouseOut="lolite()" onClick="logVariable('mnetpeertheme')" href="../_variables/mnetpeertheme.html">$mnetpeertheme</a> = <a class="var it26138" onMouseOver="hilite(26138)" onMouseOut="lolite()" onClick="logVariable('mnetpeer')" href="../_variables/mnetpeer.html">$mnetpeer</a>-&gt;<a onClick="logVariable('theme')" class="var it44344" onMouseOver="hilite(44344)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>;
<a name="l1607"><span class="linenum">1607</span></a>              }
<a name="l1608"><span class="linenum">1608</span></a>          }
<a name="l1609"><span class="linenum">1609</span></a>  
<a name="l1610"><span class="linenum">1610</span></a>          <a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a> = <a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::<a class="function" onClick="logFunction('get_device_type_theme')" href="../_functions/get_device_type_theme.html" onMouseOver="funcPopup(event,'get_device_type_theme')">get_device_type_theme</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/devicetypeinuse.html">devicetypeinuse</a>);
<a name="l1611"><span class="linenum">1611</span></a>  
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">        // The user is using another device than default, and we have a theme for that, we should use it.</span>
<a name="l1613"><span class="linenum">1613</span></a>          <a class="var it26141" onMouseOver="hilite(26141)" onMouseOut="lolite()" onClick="logVariable('hascustomdevicetheme')" href="../_variables/hascustomdevicetheme.html">$hascustomdevicetheme</a> = <a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::DEVICETYPE_DEFAULT != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/devicetypeinuse.html">devicetypeinuse</a> &amp;&amp; !empty(<a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a>);
<a name="l1614"><span class="linenum">1614</span></a>  
<a name="l1615"><span class="linenum">1615</span></a>          foreach (<a class="var it26136" onMouseOver="hilite(26136)" onMouseOut="lolite()" onClick="logVariable('themeorder')" href="../_variables/themeorder.html">$themeorder</a> as <a class="var it26142" onMouseOver="hilite(26142)" onMouseOut="lolite()" onClick="logVariable('themetype')" href="../_variables/themetype.html">$themetype</a>) {
<a name="l1616"><span class="linenum">1616</span></a>  
<a name="l1617"><span class="linenum">1617</span></a>              switch (<a class="var it26142" onMouseOver="hilite(26142)" onMouseOut="lolite()" onClick="logVariable('themetype')" href="../_variables/themetype.html">$themetype</a>) {
<a name="l1618"><span class="linenum">1618</span></a>                  case 'course':
<a name="l1619"><span class="linenum">1619</span></a>                      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcoursethemes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowcoursethemes.html">allowcoursethemes</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;theme) &amp;&amp; !<a class="var it26141" onMouseOver="hilite(26141)" onMouseOut="lolite()" onClick="logVariable('hascustomdevicetheme')" href="../_variables/hascustomdevicetheme.html">$hascustomdevicetheme</a>) {
<a name="l1620"><span class="linenum">1620</span></a>                          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;theme;
<a name="l1621"><span class="linenum">1621</span></a>                      }
<a name="l1622"><span class="linenum">1622</span></a>                  break;
<a name="l1623"><span class="linenum">1623</span></a>  
<a name="l1624"><span class="linenum">1624</span></a>                  case 'category':
<a name="l1625"><span class="linenum">1625</span></a>                      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcategorythemes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowcategorythemes.html">allowcategorythemes</a>) &amp;&amp; !<a class="var it26141" onMouseOver="hilite(26141)" onMouseOut="lolite()" onClick="logVariable('hascustomdevicetheme')" href="../_variables/hascustomdevicetheme.html">$hascustomdevicetheme</a>) {
<a name="l1626"><span class="linenum">1626</span></a>                          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/categories.html">categories</a>;
<a name="l1627"><span class="linenum">1627</span></a>                          foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1628"><span class="linenum">1628</span></a>                              if (!empty(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('theme')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>)) {
<a name="l1629"><span class="linenum">1629</span></a>                                  return <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('theme')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>;
<a name="l1630"><span class="linenum">1630</span></a>                              }
<a name="l1631"><span class="linenum">1631</span></a>                          }
<a name="l1632"><span class="linenum">1632</span></a>                      }
<a name="l1633"><span class="linenum">1633</span></a>                  break;
<a name="l1634"><span class="linenum">1634</span></a>  
<a name="l1635"><span class="linenum">1635</span></a>                  case 'session':
<a name="l1636"><span class="linenum">1636</span></a>                      if (!empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('theme')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>)) {
<a name="l1637"><span class="linenum">1637</span></a>                          return <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('theme')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>;
<a name="l1638"><span class="linenum">1638</span></a>                      }
<a name="l1639"><span class="linenum">1639</span></a>                  break;
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>                  case 'user':
<a name="l1642"><span class="linenum">1642</span></a>                      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowuserthemes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowuserthemes.html">allowuserthemes</a>) &amp;&amp; !empty(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('theme')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>) &amp;&amp; !<a class="var it26141" onMouseOver="hilite(26141)" onMouseOut="lolite()" onClick="logVariable('hascustomdevicetheme')" href="../_variables/hascustomdevicetheme.html">$hascustomdevicetheme</a>) {
<a name="l1643"><span class="linenum">1643</span></a>                          if (<a class="var it26137" onMouseOver="hilite(26137)" onMouseOut="lolite()" onClick="logVariable('mnetpeertheme')" href="../_variables/mnetpeertheme.html">$mnetpeertheme</a>) {
<a name="l1644"><span class="linenum">1644</span></a>                              return <a class="var it26137" onMouseOver="hilite(26137)" onMouseOut="lolite()" onClick="logVariable('mnetpeertheme')" href="../_variables/mnetpeertheme.html">$mnetpeertheme</a>;
<a name="l1645"><span class="linenum">1645</span></a>                          } else {
<a name="l1646"><span class="linenum">1646</span></a>                              return <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('theme')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/theme.html">theme</a>;
<a name="l1647"><span class="linenum">1647</span></a>                          }
<a name="l1648"><span class="linenum">1648</span></a>                      }
<a name="l1649"><span class="linenum">1649</span></a>                  break;
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>                  case 'site':
<a name="l1652"><span class="linenum">1652</span></a>                      if (<a class="var it26137" onMouseOver="hilite(26137)" onMouseOut="lolite()" onClick="logVariable('mnetpeertheme')" href="../_variables/mnetpeertheme.html">$mnetpeertheme</a>) {
<a name="l1653"><span class="linenum">1653</span></a>                          return <a class="var it26137" onMouseOver="hilite(26137)" onMouseOut="lolite()" onClick="logVariable('mnetpeertheme')" href="../_variables/mnetpeertheme.html">$mnetpeertheme</a>;
<a name="l1654"><span class="linenum">1654</span></a>                      }
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">                    // First try for the device the user is using.</span>
<a name="l1656"><span class="linenum">1656</span></a>                      if (!empty(<a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a>)) {
<a name="l1657"><span class="linenum">1657</span></a>                          return <a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a>;
<a name="l1658"><span class="linenum">1658</span></a>                      }
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment">                    // Next try for the default device (as a fallback).</span>
<a name="l1660"><span class="linenum">1660</span></a>                      <a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a> = <a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::<a class="function" onClick="logFunction('get_device_type_theme')" href="../_functions/get_device_type_theme.html" onMouseOver="funcPopup(event,'get_device_type_theme')">get_device_type_theme</a>(<a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::DEVICETYPE_DEFAULT);
<a name="l1661"><span class="linenum">1661</span></a>                      if (!empty(<a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a>)) {
<a name="l1662"><span class="linenum">1662</span></a>                          return <a class="var it26139" onMouseOver="hilite(26139)" onMouseOut="lolite()" onClick="logVariable('devicetheme')" href="../_variables/devicetheme.html">$devicetheme</a>;
<a name="l1663"><span class="linenum">1663</span></a>                      }
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment">                    // The default device theme isn't set up - use the overall default theme.</span>
<a name="l1665"><span class="linenum">1665</span></a>                      return <a class="class" onClick="logClass('theme_config')" href="../_classes/theme_config.html" onMouseOver="classPopup(event,'theme_config')">theme_config</a>::DEFAULT_THEME;
<a name="l1666"><span class="linenum">1666</span></a>              }
<a name="l1667"><span class="linenum">1667</span></a>          }
<a name="l1668"><span class="linenum">1668</span></a>  
<a name="l1669"><span class="linenum">1669</span></a>  <span class="comment">        // We should most certainly have resolved a theme by now. Something has gone wrong.</span>
<a name="l1670"><span class="linenum">1670</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Error resolving the theme to use for this page.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1671"><span class="linenum">1671</span></a>          return <a class="class" onClick="logClass('theme_config')" href="../_classes/theme_config.html" onMouseOver="classPopup(event,'theme_config')">theme_config</a>::DEFAULT_THEME;
<a name="l1672"><span class="linenum">1672</span></a>      }
<a name="l1673"><span class="linenum">1673</span></a>  
<a name="l1674"><span class="linenum">1674</span></a>  
<a name="l1675"><span class="linenum">1675</span></a>      <span class="comment">/**</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">     * Sets -&gt;pagetype from the script name. For example, if the script that was</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment">     * run is mod/quiz/view.php, -&gt;pagetype will be set to 'mod-quiz-view'.</span>
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">     *</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment">     * @param string $script the path to the script that should be used to</span>
<a name="l1680"><span class="linenum">1680</span></a>  <span class="comment">     * initialise -&gt;pagetype. If not passed the $SCRIPT global will be used.</span>
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment">     * If legacy code has set $CFG-&gt;pagepath that will be used instead, and a</span>
<a name="l1682"><span class="linenum">1682</span></a>  <span class="comment">     * developer warning issued.</span>
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment">     */</span>
<a name="l1684"><span class="linenum">1684</span></a>      protected function <a class="function" onClick="logFunction('initialise_default_pagetype')" href="../_functions/initialise_default_pagetype.html" onMouseOver="funcPopup(event,'initialise_default_pagetype')">initialise_default_pagetype</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = null) {
<a name="l1685"><span class="linenum">1685</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it12939" onMouseOver="hilite(12939)" onMouseOut="lolite()" onClick="logVariable('SCRIPT')" href="../_variables/SCRIPT.html">$SCRIPT</a>;
<a name="l1686"><span class="linenum">1686</span></a>  
<a name="l1687"><span class="linenum">1687</span></a>          if (isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pagepath')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pagepath.html">pagepath</a>)) {
<a name="l1688"><span class="linenum">1688</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Some code appears to have set <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pagepath')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pagepath.html">pagepath</a>. That was a horrible deprecated thing. ' .
<a name="l1689"><span class="linenum">1689</span></a>                      'Don\'t do it! Try calling <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagetype')" href="../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>() instead.');
<a name="l1690"><span class="linenum">1690</span></a>              <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pagepath')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pagepath.html">pagepath</a>;
<a name="l1691"><span class="linenum">1691</span></a>              unset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pagepath')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/pagepath.html">pagepath</a>);
<a name="l1692"><span class="linenum">1692</span></a>          }
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>)) {
<a name="l1695"><span class="linenum">1695</span></a>              <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = <a class="phpfunction" onClick="logFunction('ltrim')" href="../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it12939" onMouseOver="hilite(12939)" onMouseOut="lolite()" onClick="logVariable('SCRIPT')" href="../_variables/SCRIPT.html">$SCRIPT</a>, '/');
<a name="l1696"><span class="linenum">1696</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a> = <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>);
<a name="l1697"><span class="linenum">1697</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>, 0, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a>) == <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>) {
<a name="l1698"><span class="linenum">1698</span></a>                  <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a> = 'admin' . <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a>);
<a name="l1699"><span class="linenum">1699</span></a>              }
<a name="l1700"><span class="linenum">1700</span></a>          }
<a name="l1701"><span class="linenum">1701</span></a>  
<a name="l1702"><span class="linenum">1702</span></a>          <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('.php', '', <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('script')" href="../_variables/script.html">$script</a>);
<a name="l1703"><span class="linenum">1703</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, -1) == '/') {
<a name="l1704"><span class="linenum">1704</span></a>              <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> .= 'index';
<a name="l1705"><span class="linenum">1705</span></a>          }
<a name="l1706"><span class="linenum">1706</span></a>  
<a name="l1707"><span class="linenum">1707</span></a>          if (empty(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) || <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> == 'index') {
<a name="l1708"><span class="linenum">1708</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagetype.html">_pagetype</a> = 'site-index';
<a name="l1709"><span class="linenum">1709</span></a>          } else {
<a name="l1710"><span class="linenum">1710</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagetype.html">_pagetype</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('/', '-', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>);
<a name="l1711"><span class="linenum">1711</span></a>          }
<a name="l1712"><span class="linenum">1712</span></a>      }
<a name="l1713"><span class="linenum">1713</span></a>  
<a name="l1714"><span class="linenum">1714</span></a>      <span class="comment">/**</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment">     * Initialises the CSS classes that will be added to body tag of the page.</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment">     *</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment">     * The function is responsible for adding all of the critical CSS classes</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment">     * that describe the current page, and its state.</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment">     * This includes classes that describe the following for example:</span>
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment">     *    - Current language</span>
<a name="l1721"><span class="linenum">1721</span></a>  <span class="comment">     *    - Language direction</span>
<a name="l1722"><span class="linenum">1722</span></a>  <span class="comment">     *    - YUI CSS initialisation</span>
<a name="l1723"><span class="linenum">1723</span></a>  <span class="comment">     *    - Pagelayout</span>
<a name="l1724"><span class="linenum">1724</span></a>  <span class="comment">     * These are commonly used in CSS to target specific types of pages.</span>
<a name="l1725"><span class="linenum">1725</span></a>  <span class="comment">     */</span>
<a name="l1726"><span class="linenum">1726</span></a>      protected function <a class="function" onClick="logFunction('initialise_standard_body_classes')" href="../_functions/initialise_standard_body_classes.html" onMouseOver="funcPopup(event,'initialise_standard_body_classes')">initialise_standard_body_classes</a>() {
<a name="l1727"><span class="linenum">1727</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l1728"><span class="linenum">1728</span></a>  
<a name="l1729"><span class="linenum">1729</span></a>          <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagetype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a>;
<a name="l1730"><span class="linenum">1730</span></a>          if (<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> == 'site-index') {
<a name="l1731"><span class="linenum">1731</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_legacyclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_legacyclass.html">_legacyclass</a> = 'course';
<a name="l1732"><span class="linenum">1732</span></a>          } else if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, 0, 6) == 'admin-') {
<a name="l1733"><span class="linenum">1733</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_legacyclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_legacyclass.html">_legacyclass</a> = 'admin';
<a name="l1734"><span class="linenum">1734</span></a>          }
<a name="l1735"><span class="linenum">1735</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_legacyclass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_legacyclass.html">_legacyclass</a>);
<a name="l1736"><span class="linenum">1736</span></a>  
<a name="l1737"><span class="linenum">1737</span></a>          <a class="var it26143" onMouseOver="hilite(26143)" onMouseOut="lolite()" onClick="logVariable('pathbits')" href="../_variables/pathbits.html">$pathbits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>));
<a name="l1738"><span class="linenum">1738</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it26143" onMouseOver="hilite(26143)" onMouseOut="lolite()" onClick="logVariable('pathbits')" href="../_variables/pathbits.html">$pathbits</a>); <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l1739"><span class="linenum">1739</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('path-' . <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>('-', <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it26143" onMouseOver="hilite(26143)" onMouseOut="lolite()" onClick="logVariable('pathbits')" href="../_variables/pathbits.html">$pathbits</a>, 0, <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>)));
<a name="l1740"><span class="linenum">1740</span></a>          }
<a name="l1741"><span class="linenum">1741</span></a>  
<a name="l1742"><span class="linenum">1742</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_classes')" href="../_functions/add_body_classes.html" onMouseOver="funcPopup(event,'add_body_classes')">add_body_classes</a>(<a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::<a class="function" onClick="logFunction('get_browser_version_classes')" href="../_functions/get_browser_version_classes.html" onMouseOver="funcPopup(event,'get_browser_version_classes')">get_browser_version_classes</a>());
<a name="l1743"><span class="linenum">1743</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('dir-' . <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thisdirection', 'langconfig'));
<a name="l1744"><span class="linenum">1744</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('lang-' . <a class="function" onClick="logFunction('current_language')" href="../_functions/current_language.html" onMouseOver="funcPopup(event,'current_language')">current_language</a>());
<a name="l1745"><span class="linenum">1745</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('yui-skin-sam'); <span class="comment">// Make YUI happy, if it is used.</span>
<a name="l1746"><span class="linenum">1746</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('yui3-skin-sam'); <span class="comment">// Make YUI3 happy, if it is used.</span>
<a name="l1747"><span class="linenum">1747</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('url_to_class_name')" href="../_functions/url_to_class_name.html" onMouseOver="funcPopup(event,'url_to_class_name')">url_to_class_name</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>));
<a name="l1748"><span class="linenum">1748</span></a>  
<a name="l1749"><span class="linenum">1749</span></a>  <span class="comment">        // Extra class describing current page layout.</span>
<a name="l1750"><span class="linenum">1750</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('pagelayout-' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_pagelayout')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_pagelayout.html">_pagelayout</a>);
<a name="l1751"><span class="linenum">1751</span></a>  
<a name="l1752"><span class="linenum">1752</span></a>          if (!<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1753"><span class="linenum">1753</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('course-' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;id);
<a name="l1754"><span class="linenum">1754</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('context-' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_context.html">_context</a>-&gt;id);
<a name="l1755"><span class="linenum">1755</span></a>          }
<a name="l1756"><span class="linenum">1756</span></a>  
<a name="l1757"><span class="linenum">1757</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>)) {
<a name="l1758"><span class="linenum">1758</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('cmid-' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>-&gt;id);
<a name="l1759"><span class="linenum">1759</span></a>          }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcategorythemes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowcategorythemes.html">allowcategorythemes</a>)) {
<a name="l1762"><span class="linenum">1762</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_category_loaded')" href="../_functions/ensure_category_loaded.html" onMouseOver="funcPopup(event,'ensure_category_loaded')">ensure_category_loaded</a>();
<a name="l1763"><span class="linenum">1763</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a> as <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l1764"><span class="linenum">1764</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('category-' . <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>);
<a name="l1765"><span class="linenum">1765</span></a>              }
<a name="l1766"><span class="linenum">1766</span></a>          } else {
<a name="l1767"><span class="linenum">1767</span></a>              <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a> = 0;
<a name="l1768"><span class="linenum">1768</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>)) {
<a name="l1769"><span class="linenum">1769</span></a>                  <a class="var it26144" onMouseOver="hilite(26144)" onMouseOut="lolite()" onClick="logVariable('catids')" href="../_variables/catids.html">$catids</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>);
<a name="l1770"><span class="linenum">1770</span></a>                  <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it26144" onMouseOver="hilite(26144)" onMouseOut="lolite()" onClick="logVariable('catids')" href="../_variables/catids.html">$catids</a>);
<a name="l1771"><span class="linenum">1771</span></a>              } else if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;category)) {
<a name="l1772"><span class="linenum">1772</span></a>                  <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;category;
<a name="l1773"><span class="linenum">1773</span></a>              }
<a name="l1774"><span class="linenum">1774</span></a>              if (<a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>) {
<a name="l1775"><span class="linenum">1775</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('category-' . <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>);
<a name="l1776"><span class="linenum">1776</span></a>              }
<a name="l1777"><span class="linenum">1777</span></a>          }
<a name="l1778"><span class="linenum">1778</span></a>  
<a name="l1779"><span class="linenum">1779</span></a>          if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l1780"><span class="linenum">1780</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('notloggedin');
<a name="l1781"><span class="linenum">1781</span></a>          }
<a name="l1782"><span class="linenum">1782</span></a>  
<a name="l1783"><span class="linenum">1783</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>()) {
<a name="l1784"><span class="linenum">1784</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('editing');
<a name="l1785"><span class="linenum">1785</span></a>              if (<a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_moveid', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l1786"><span class="linenum">1786</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('blocks-moving');
<a name="l1787"><span class="linenum">1787</span></a>              }
<a name="l1788"><span class="linenum">1788</span></a>          }
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('blocksdrag')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/blocksdrag.html">blocksdrag</a>)) {
<a name="l1791"><span class="linenum">1791</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('drag');
<a name="l1792"><span class="linenum">1792</span></a>          }
<a name="l1793"><span class="linenum">1793</span></a>  
<a name="l1794"><span class="linenum">1794</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_devicetypeinuse.html">_devicetypeinuse</a> != 'default') {
<a name="l1795"><span class="linenum">1795</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_devicetypeinuse')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_devicetypeinuse.html">_devicetypeinuse</a> . 'theme');
<a name="l1796"><span class="linenum">1796</span></a>          }
<a name="l1797"><span class="linenum">1797</span></a>  
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment">        // Add class for behat site to apply behat related fixes.</span>
<a name="l1799"><span class="linenum">1799</span></a>          if (<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('BEHAT_SITE_RUNNING')" href="../_constants/BEHAT_SITE_RUNNING.html" onMouseOver="constPopup(event,'BEHAT_SITE_RUNNING')">BEHAT_SITE_RUNNING</a>')) {
<a name="l1800"><span class="linenum">1800</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_body_class')" href="../_functions/add_body_class.html" onMouseOver="funcPopup(event,'add_body_class')">add_body_class</a>('behat-site');
<a name="l1801"><span class="linenum">1801</span></a>          }
<a name="l1802"><span class="linenum">1802</span></a>      }
<a name="l1803"><span class="linenum">1803</span></a>  
<a name="l1804"><span class="linenum">1804</span></a>      <span class="comment">/**</span>
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment">     * Loads the activity record for the current CM object associated with this</span>
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment">     * page.</span>
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment">     *</span>
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">     * This will load {@link moodle_page::$_module} with a row from the related</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment">     * module table in the database.</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment">     * For instance if {@link moodle_page::$_cm} is a forum then a row from the</span>
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment">     * forum table will be loaded.</span>
<a name="l1812"><span class="linenum">1812</span></a>  <span class="comment">     */</span>
<a name="l1813"><span class="linenum">1813</span></a>      protected function <a class="function" onClick="logFunction('load_activity_record')" href="../_functions/load_activity_record.html" onMouseOver="funcPopup(event,'load_activity_record')">load_activity_record</a>() {
<a name="l1814"><span class="linenum">1814</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1815"><span class="linenum">1815</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>)) {
<a name="l1816"><span class="linenum">1816</span></a>              return;
<a name="l1817"><span class="linenum">1817</span></a>          }
<a name="l1818"><span class="linenum">1818</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_module')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_module.html">_module</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>-&gt;modname, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_cm.html">_cm</a>-&gt;instance));
<a name="l1819"><span class="linenum">1819</span></a>      }
<a name="l1820"><span class="linenum">1820</span></a>  
<a name="l1821"><span class="linenum">1821</span></a>      <span class="comment">/**</span>
<a name="l1822"><span class="linenum">1822</span></a>  <span class="comment">     * This function ensures that the category of the current course has been</span>
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment">     * loaded, and if not, the function loads it now.</span>
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment">     *</span>
<a name="l1825"><span class="linenum">1825</span></a>  <span class="comment">     * @return void</span>
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment">     */</span>
<a name="l1828"><span class="linenum">1828</span></a>      protected function <a class="function" onClick="logFunction('ensure_category_loaded')" href="../_functions/ensure_category_loaded.html" onMouseOver="funcPopup(event,'ensure_category_loaded')">ensure_category_loaded</a>() {
<a name="l1829"><span class="linenum">1829</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>)) {
<a name="l1830"><span class="linenum">1830</span></a>              return; <span class="comment">// Already done.</span>
<a name="l1831"><span class="linenum">1831</span></a>          }
<a name="l1832"><span class="linenum">1832</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>)) {
<a name="l1833"><span class="linenum">1833</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Attempt to get the course category for this page before the course was set.');
<a name="l1834"><span class="linenum">1834</span></a>          }
<a name="l1835"><span class="linenum">1835</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;category == 0) {
<a name="l1836"><span class="linenum">1836</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a> = array();
<a name="l1837"><span class="linenum">1837</span></a>          } else {
<a name="l1838"><span class="linenum">1838</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_category')" href="../_functions/load_category.html" onMouseOver="funcPopup(event,'load_category')">load_category</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_course.html">_course</a>-&gt;category);
<a name="l1839"><span class="linenum">1839</span></a>          }
<a name="l1840"><span class="linenum">1840</span></a>      }
<a name="l1841"><span class="linenum">1841</span></a>  
<a name="l1842"><span class="linenum">1842</span></a>      <span class="comment">/**</span>
<a name="l1843"><span class="linenum">1843</span></a>  <span class="comment">     * Loads the requested category into the pages categories array.</span>
<a name="l1844"><span class="linenum">1844</span></a>  <span class="comment">     *</span>
<a name="l1845"><span class="linenum">1845</span></a>  <span class="comment">     * @param int $categoryid</span>
<a name="l1846"><span class="linenum">1846</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l1847"><span class="linenum">1847</span></a>  <span class="comment">     */</span>
<a name="l1848"><span class="linenum">1848</span></a>      protected function <a class="function" onClick="logFunction('load_category')" href="../_functions/load_category.html" onMouseOver="funcPopup(event,'load_category')">load_category</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l1849"><span class="linenum">1849</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1850"><span class="linenum">1850</span></a>          <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>));
<a name="l1851"><span class="linenum">1851</span></a>          if (!<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1852"><span class="linenum">1852</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('unknowncategory');
<a name="l1853"><span class="linenum">1853</span></a>          }
<a name="l1854"><span class="linenum">1854</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>[<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l1855"><span class="linenum">1855</span></a>          <a class="var it26146" onMouseOver="hilite(26146)" onMouseOut="lolite()" onClick="logVariable('parentcategoryids')" href="../_variables/parentcategoryids.html">$parentcategoryids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('path')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, '/'));
<a name="l1856"><span class="linenum">1856</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it26146" onMouseOver="hilite(26146)" onMouseOut="lolite()" onClick="logVariable('parentcategoryids')" href="../_variables/parentcategoryids.html">$parentcategoryids</a>);
<a name="l1857"><span class="linenum">1857</span></a>          foreach (<a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it26146" onMouseOver="hilite(26146)" onMouseOut="lolite()" onClick="logVariable('parentcategoryids')" href="../_variables/parentcategoryids.html">$parentcategoryids</a>) as <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>) {
<a name="l1858"><span class="linenum">1858</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>[<a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>] = null;
<a name="l1859"><span class="linenum">1859</span></a>          }
<a name="l1860"><span class="linenum">1860</span></a>      }
<a name="l1861"><span class="linenum">1861</span></a>  
<a name="l1862"><span class="linenum">1862</span></a>      <span class="comment">/**</span>
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">     * Ensures that the category the current course is within, as well as all of</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment">     * its parent categories, have been loaded.</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment">     *</span>
<a name="l1866"><span class="linenum">1866</span></a>  <span class="comment">     * @return void</span>
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment">     */</span>
<a name="l1868"><span class="linenum">1868</span></a>      protected function <a class="function" onClick="logFunction('ensure_categories_loaded')" href="../_functions/ensure_categories_loaded.html" onMouseOver="funcPopup(event,'ensure_categories_loaded')">ensure_categories_loaded</a>() {
<a name="l1869"><span class="linenum">1869</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1870"><span class="linenum">1870</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_category_loaded')" href="../_functions/ensure_category_loaded.html" onMouseOver="funcPopup(event,'ensure_category_loaded')">ensure_category_loaded</a>();
<a name="l1871"><span class="linenum">1871</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="phpfunction" onClick="logFunction('end')" href="../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>))) {
<a name="l1872"><span class="linenum">1872</span></a>              return; <span class="comment">// Already done.</span>
<a name="l1873"><span class="linenum">1873</span></a>          }
<a name="l1874"><span class="linenum">1874</span></a>          <a class="var it26147" onMouseOver="hilite(26147)" onMouseOut="lolite()" onClick="logVariable('idstoload')" href="../_variables/idstoload.html">$idstoload</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>);
<a name="l1875"><span class="linenum">1875</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it26147" onMouseOver="hilite(26147)" onMouseOut="lolite()" onClick="logVariable('idstoload')" href="../_variables/idstoload.html">$idstoload</a>);
<a name="l1876"><span class="linenum">1876</span></a>          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>('course_categories', 'id', <a class="var it26147" onMouseOver="hilite(26147)" onMouseOut="lolite()" onClick="logVariable('idstoload')" href="../_variables/idstoload.html">$idstoload</a>);
<a name="l1877"><span class="linenum">1877</span></a>          foreach (<a class="var it26147" onMouseOver="hilite(26147)" onMouseOut="lolite()" onClick="logVariable('idstoload')" href="../_variables/idstoload.html">$idstoload</a> as <a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>) {
<a name="l1878"><span class="linenum">1878</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_categories')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_categories.html">_categories</a>[<a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>] = <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it2604" onMouseOver="hilite(2604)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>];
<a name="l1879"><span class="linenum">1879</span></a>          }
<a name="l1880"><span class="linenum">1880</span></a>      }
<a name="l1881"><span class="linenum">1881</span></a>  
<a name="l1882"><span class="linenum">1882</span></a>      <span class="comment">/**</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment">     * Ensure the theme has not been loaded yet. If it has an exception is thrown.</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">     *</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment">     */</span>
<a name="l1887"><span class="linenum">1887</span></a>      protected function <a class="function" onClick="logFunction('ensure_theme_not_set')" href="../_functions/ensure_theme_not_set.html" onMouseOver="funcPopup(event,'ensure_theme_not_set')">ensure_theme_not_set</a>() {
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">        // This is explicitly allowed for webservices though which may process many course contexts in a single request.</span>
<a name="l1889"><span class="linenum">1889</span></a>          if (<a class="constant" onClick="logConstant('WS_SERVER')" href="../_constants/WS_SERVER.html" onMouseOver="constPopup(event,'WS_SERVER')">WS_SERVER</a>) {
<a name="l1890"><span class="linenum">1890</span></a>              return;
<a name="l1891"><span class="linenum">1891</span></a>          }
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_theme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_theme.html">_theme</a>)) {
<a name="l1894"><span class="linenum">1894</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('The theme has already been set up for this page ready for output. ' .
<a name="l1895"><span class="linenum">1895</span></a>                      'Therefore, you can no longer change the theme, or anything that might affect what ' .
<a name="l1896"><span class="linenum">1896</span></a>                      'the current theme is, for example, the course.',
<a name="l1897"><span class="linenum">1897</span></a>                      'Stack trace when the theme was set up: ' . <a class="function" onClick="logFunction('format_backtrace')" href="../_functions/format_backtrace.html" onMouseOver="funcPopup(event,'format_backtrace')">format_backtrace</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_wherethemewasinitialised')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_wherethemewasinitialised.html">_wherethemewasinitialised</a>));
<a name="l1898"><span class="linenum">1898</span></a>          }
<a name="l1899"><span class="linenum">1899</span></a>      }
<a name="l1900"><span class="linenum">1900</span></a>  
<a name="l1901"><span class="linenum">1901</span></a>      <span class="comment">/**</span>
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment">     * Converts the provided URL into a CSS class that be used within the page.</span>
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment">     * This is primarily used to add the wwwroot to the body tag as a CSS class.</span>
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment">     *</span>
<a name="l1905"><span class="linenum">1905</span></a>  <span class="comment">     * @param string $url</span>
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment">     * @return string</span>
<a name="l1907"><span class="linenum">1907</span></a>  <span class="comment">     */</span>
<a name="l1908"><span class="linenum">1908</span></a>      protected function <a class="function" onClick="logFunction('url_to_class_name')" href="../_functions/url_to_class_name.html" onMouseOver="funcPopup(event,'url_to_class_name')">url_to_class_name</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l1909"><span class="linenum">1909</span></a>          <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('parse_url')" href="../_functions/parse_url.html" onMouseOver="phpfuncPopup(event,'parse_url')">parse_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l1910"><span class="linenum">1910</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('.', '-', <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>['host']);
<a name="l1911"><span class="linenum">1911</span></a>          if (!empty(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>['port'])) {
<a name="l1912"><span class="linenum">1912</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= '--' . <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>['port'];
<a name="l1913"><span class="linenum">1913</span></a>          }
<a name="l1914"><span class="linenum">1914</span></a>          if (!empty(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>['path'])) {
<a name="l1915"><span class="linenum">1915</span></a>              <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>['path'], '/');
<a name="l1916"><span class="linenum">1916</span></a>              if (<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l1917"><span class="linenum">1917</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= '--' . <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('/', '-', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>);
<a name="l1918"><span class="linenum">1918</span></a>              }
<a name="l1919"><span class="linenum">1919</span></a>          }
<a name="l1920"><span class="linenum">1920</span></a>          return <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>;
<a name="l1921"><span class="linenum">1921</span></a>      }
<a name="l1922"><span class="linenum">1922</span></a>  
<a name="l1923"><span class="linenum">1923</span></a>      <span class="comment">/**</span>
<a name="l1924"><span class="linenum">1924</span></a>  <span class="comment">     * Combines all of the required editing caps for the page and returns them</span>
<a name="l1925"><span class="linenum">1925</span></a>  <span class="comment">     * as an array.</span>
<a name="l1926"><span class="linenum">1926</span></a>  <span class="comment">     *</span>
<a name="l1927"><span class="linenum">1927</span></a>  <span class="comment">     * @return array</span>
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment">     */</span>
<a name="l1929"><span class="linenum">1929</span></a>      protected function <a class="function" onClick="logFunction('all_editing_caps')" href="../_functions/all_editing_caps.html" onMouseOver="funcPopup(event,'all_editing_caps')">all_editing_caps</a>() {
<a name="l1930"><span class="linenum">1930</span></a>          <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_othereditingcaps')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_othereditingcaps.html">_othereditingcaps</a>;
<a name="l1931"><span class="linenum">1931</span></a>          <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_blockseditingcap')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_blockseditingcap.html">_blockseditingcap</a>;
<a name="l1932"><span class="linenum">1932</span></a>          return <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>;
<a name="l1933"><span class="linenum">1933</span></a>      }
<a name="l1934"><span class="linenum">1934</span></a>  
<a name="l1935"><span class="linenum">1935</span></a>      <span class="comment">/**</span>
<a name="l1936"><span class="linenum">1936</span></a>  <span class="comment">     * Returns true if the page URL has beem set.</span>
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment">     *</span>
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment">     * @return bool</span>
<a name="l1939"><span class="linenum">1939</span></a>  <span class="comment">     */</span>
<a name="l1940"><span class="linenum">1940</span></a>      public function <a class="function" onClick="logFunction('has_set_url')" href="../_functions/has_set_url.html" onMouseOver="funcPopup(event,'has_set_url')">has_set_url</a>() {
<a name="l1941"><span class="linenum">1941</span></a>          return (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_url')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_url.html">_url</a>!==null);
<a name="l1942"><span class="linenum">1942</span></a>      }
<a name="l1943"><span class="linenum">1943</span></a>  
<a name="l1944"><span class="linenum">1944</span></a>      <span class="comment">/**</span>
<a name="l1945"><span class="linenum">1945</span></a>  <span class="comment">     * Gets set when the block actions for the page have been processed.</span>
<a name="l1946"><span class="linenum">1946</span></a>  <span class="comment">     *</span>
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment">     * @param bool $setting</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment">     */</span>
<a name="l1949"><span class="linenum">1949</span></a>      public function <a class="function" onClick="logFunction('set_block_actions_done')" href="../_functions/set_block_actions_done.html" onMouseOver="funcPopup(event,'set_block_actions_done')">set_block_actions_done</a>(<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> = true) {
<a name="l1950"><span class="linenum">1950</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_block_actions_done')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_block_actions_done.html">_block_actions_done</a> = <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>;
<a name="l1951"><span class="linenum">1951</span></a>      }
<a name="l1952"><span class="linenum">1952</span></a>  
<a name="l1953"><span class="linenum">1953</span></a>      <span class="comment">/**</span>
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment">     * Are popup notifications allowed on this page?</span>
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment">     * Popup notifications may be disallowed in situations such as while upgrading or completing a quiz</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment">     *</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment">     * @return bool true if popup notifications may be displayed</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment">     */</span>
<a name="l1959"><span class="linenum">1959</span></a>      public function <a class="function" onClick="logFunction('get_popup_notification_allowed')" href="../_functions/get_popup_notification_allowed.html" onMouseOver="funcPopup(event,'get_popup_notification_allowed')">get_popup_notification_allowed</a>() {
<a name="l1960"><span class="linenum">1960</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_popup_notification_allowed')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_popup_notification_allowed.html">_popup_notification_allowed</a>;
<a name="l1961"><span class="linenum">1961</span></a>      }
<a name="l1962"><span class="linenum">1962</span></a>  
<a name="l1963"><span class="linenum">1963</span></a>      <span class="comment">/**</span>
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">     * Allow or disallow popup notifications on this page. Popups are allowed by default.</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment">     *</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment">     * @param bool $allowed true if notifications are allowed. False if not allowed. They are allowed by default.</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">     */</span>
<a name="l1968"><span class="linenum">1968</span></a>      public function <a class="function" onClick="logFunction('set_popup_notification_allowed')" href="../_functions/set_popup_notification_allowed.html" onMouseOver="funcPopup(event,'set_popup_notification_allowed')">set_popup_notification_allowed</a>(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>) {
<a name="l1969"><span class="linenum">1969</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_popup_notification_allowed')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_popup_notification_allowed.html">_popup_notification_allowed</a> = <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>;
<a name="l1970"><span class="linenum">1970</span></a>      }
<a name="l1971"><span class="linenum">1971</span></a>  
<a name="l1972"><span class="linenum">1972</span></a>      <span class="comment">/**</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment">     * Returns the block region having made any required theme manipulations.</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment">     *</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment">     * @since Moodle 2.5.1 2.6</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment">     * @param string $region</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment">     * @return string</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">     */</span>
<a name="l1979"><span class="linenum">1979</span></a>      public function <a class="function" onClick="logFunction('apply_theme_region_manipulations')" href="../_functions/apply_theme_region_manipulations.html" onMouseOver="funcPopup(event,'apply_theme_region_manipulations')">apply_theme_region_manipulations</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l1980"><span class="linenum">1980</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockmanipulations')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockmanipulations.html">blockmanipulations</a> &amp;&amp; isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockmanipulations')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockmanipulations.html">blockmanipulations</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>])) {
<a name="l1981"><span class="linenum">1981</span></a>              <a class="var it26149" onMouseOver="hilite(26149)" onMouseOut="lolite()" onClick="logVariable('regionwas')" href="../_variables/regionwas.html">$regionwas</a> = <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>;
<a name="l1982"><span class="linenum">1982</span></a>              <a class="var it26150" onMouseOver="hilite(26150)" onMouseOut="lolite()" onClick="logVariable('regionnow')" href="../_variables/regionnow.html">$regionnow</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockmanipulations')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockmanipulations.html">blockmanipulations</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l1983"><span class="linenum">1983</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it26149" onMouseOver="hilite(26149)" onMouseOut="lolite()" onClick="logVariable('regionwas')" href="../_variables/regionwas.html">$regionwas</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it26150" onMouseOver="hilite(26150)" onMouseOut="lolite()" onClick="logVariable('regionnow')" href="../_variables/regionnow.html">$regionnow</a>)) {
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment">                // Both the before and after regions are known so we can swap them over.</span>
<a name="l1985"><span class="linenum">1985</span></a>                  return <a class="var it26150" onMouseOver="hilite(26150)" onMouseOut="lolite()" onClick="logVariable('regionnow')" href="../_variables/regionnow.html">$regionnow</a>;
<a name="l1986"><span class="linenum">1986</span></a>              }
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment">            // We didn't know about both, we won't swap them over.</span>
<a name="l1988"><span class="linenum">1988</span></a>              return <a class="var it26149" onMouseOver="hilite(26149)" onMouseOut="lolite()" onClick="logVariable('regionwas')" href="../_variables/regionwas.html">$regionwas</a>;
<a name="l1989"><span class="linenum">1989</span></a>          }
<a name="l1990"><span class="linenum">1990</span></a>          return <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>;
<a name="l1991"><span class="linenum">1991</span></a>      }
<a name="l1992"><span class="linenum">1992</span></a>  
<a name="l1993"><span class="linenum">1993</span></a>      <span class="comment">/**</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment">     * Add a report node and a specific report to the navigation.</span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment">     *</span>
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment">     * @param int $userid The user ID that we are looking to add this report node to.</span>
<a name="l1997"><span class="linenum">1997</span></a>  <span class="comment">     * @param array $nodeinfo Name and url of the final node that we are creating.</span>
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment">     */</span>
<a name="l1999"><span class="linenum">1999</span></a>      public function <a class="function" onClick="logFunction('add_report_nodes')" href="../_functions/add_report_nodes.html" onMouseOver="funcPopup(event,'add_report_nodes')">add_report_nodes</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it26151" onMouseOver="hilite(26151)" onMouseOut="lolite()" onClick="logVariable('nodeinfo')" href="../_variables/nodeinfo.html">$nodeinfo</a>) {
<a name="l2000"><span class="linenum">2000</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">        // Try to find the specific user node.</span>
<a name="l2002"><span class="linenum">2002</span></a>          <a class="var it16032" onMouseOver="hilite(16032)" onMouseOut="lolite()" onClick="logVariable('newusernode')" href="../_variables/newusernode.html">$newusernode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('navigation')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/navigation.html">navigation</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>('user' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, null);
<a name="l2003"><span class="linenum">2003</span></a>          <a class="var it9841" onMouseOver="hilite(9841)" onMouseOut="lolite()" onClick="logVariable('reportnode')" href="../_variables/reportnode.html">$reportnode</a> = null;
<a name="l2004"><span class="linenum">2004</span></a>          <a class="var it26152" onMouseOver="hilite(26152)" onMouseOut="lolite()" onClick="logVariable('navigationnodeerror')" href="../_variables/navigationnodeerror.html">$navigationnodeerror</a> =
<a name="l2005"><span class="linenum">2005</span></a>                  'Could not find the navigation node requested. Please check that the node you are looking for exists.';
<a name="l2006"><span class="linenum">2006</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment">            // Check that we have a valid node.</span>
<a name="l2008"><span class="linenum">2008</span></a>              if (empty(<a class="var it16032" onMouseOver="hilite(16032)" onMouseOut="lolite()" onClick="logVariable('newusernode')" href="../_variables/newusernode.html">$newusernode</a>)) {
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment">                // Throw an error if we ever reach here.</span>
<a name="l2010"><span class="linenum">2010</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(<a class="var it26152" onMouseOver="hilite(26152)" onMouseOut="lolite()" onClick="logVariable('navigationnodeerror')" href="../_variables/navigationnodeerror.html">$navigationnodeerror</a>);
<a name="l2011"><span class="linenum">2011</span></a>              }
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment">            // Add 'Reports' to the user node.</span>
<a name="l2013"><span class="linenum">2013</span></a>              <a class="var it9841" onMouseOver="hilite(9841)" onMouseOut="lolite()" onClick="logVariable('reportnode')" href="../_variables/reportnode.html">$reportnode</a> = <a class="var it16032" onMouseOver="hilite(16032)" onMouseOut="lolite()" onClick="logVariable('newusernode')" href="../_variables/newusernode.html">$newusernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('reports'));
<a name="l2014"><span class="linenum">2014</span></a>          } else {
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment">            // We are looking at our own profile.</span>
<a name="l2016"><span class="linenum">2016</span></a>              <a class="var it26153" onMouseOver="hilite(26153)" onMouseOut="lolite()" onClick="logVariable('myprofilenode')" href="../_variables/myprofilenode.html">$myprofilenode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('settingsnav')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/settingsnav.html">settingsnav</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>('myprofile', null);
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">            // Check that we do end up with a valid node.</span>
<a name="l2018"><span class="linenum">2018</span></a>              if (empty(<a class="var it26153" onMouseOver="hilite(26153)" onMouseOut="lolite()" onClick="logVariable('myprofilenode')" href="../_variables/myprofilenode.html">$myprofilenode</a>)) {
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">                // Throw an error if we ever reach here.</span>
<a name="l2020"><span class="linenum">2020</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(<a class="var it26152" onMouseOver="hilite(26152)" onMouseOut="lolite()" onClick="logVariable('navigationnodeerror')" href="../_variables/navigationnodeerror.html">$navigationnodeerror</a>);
<a name="l2021"><span class="linenum">2021</span></a>              }
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment">            // Add 'Reports' to our node.</span>
<a name="l2023"><span class="linenum">2023</span></a>              <a class="var it9841" onMouseOver="hilite(9841)" onMouseOut="lolite()" onClick="logVariable('reportnode')" href="../_variables/reportnode.html">$reportnode</a> = <a class="var it26153" onMouseOver="hilite(26153)" onMouseOut="lolite()" onClick="logVariable('myprofilenode')" href="../_variables/myprofilenode.html">$myprofilenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('reports'));
<a name="l2024"><span class="linenum">2024</span></a>          }
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment">        // Finally add the report to the navigation tree.</span>
<a name="l2026"><span class="linenum">2026</span></a>          <a class="var it9841" onMouseOver="hilite(9841)" onMouseOut="lolite()" onClick="logVariable('reportnode')" href="../_variables/reportnode.html">$reportnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it26151" onMouseOver="hilite(26151)" onMouseOut="lolite()" onClick="logVariable('nodeinfo')" href="../_variables/nodeinfo.html">$nodeinfo</a>['name'], <a class="var it26151" onMouseOver="hilite(26151)" onMouseOut="lolite()" onClick="logVariable('nodeinfo')" href="../_variables/nodeinfo.html">$nodeinfo</a>['url'], <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_COURSE);
<a name="l2027"><span class="linenum">2027</span></a>      }
<a name="l2028"><span class="linenum">2028</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'has_navbar': ['has_navbar', 'Checks to see if there are any items on the navbar object ', [['lib','pagelib.php',820]], 4],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'magic_get_cacheable': ['magic_get_cacheable', 'Please do not call this method directly, use the ->cacheable syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',612]], 0],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'initialise_default_pagetype': ['initialise_default_pagetype', '', [['lib/tests','moodle_page_test.php',674],['lib','pagelib.php',1675]], 6],
'magic_get_cm': ['magic_get_cm', 'Please do not call this method directly, use the ->cm syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',379]], 0],
'process_url_actions': ['process_url_actions', 'Process any block actions that were specified in the URL. ', [['lib','blocklib.php',1155]], 1],
'ensure_categories_loaded': ['ensure_categories_loaded', 'Ensures that the category the current course is within, as well as all of its parent categories, have been loaded. ', [['lib','pagelib.php',1862]], 1],
'pagelayout_options': ['pagelayout_options', 'Returns auxiliary page layout options specified in layout configuration array. ', [['lib','outputlib.php',1898]], 1],
'moodle_setlocale': ['moodle_setlocale', 'Sets the system locale ', [['lib','moodlelib.php',7627]], 3],
'magic_get_url': ['magic_get_url', 'Please do not call this method directly, use the ->url syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',557]], 0],
'user_is_editing': ['user_is_editing', 'Should the current user see this page in editing mode. That is, are they allowed to edit this page, and are they currently in editing mode. ', [['lib','pagelib.php',855]], 52],
'add_body_class': ['add_body_class', 'Adds a CSS class to the body tag of the page. ', [['lib','pagelib.php',1133]], 34],
'set_page': ['set_page', 'Method to set the current page ', [['mod/wiki','pagelib.php',201]], 20],
'string_for_js': ['string_for_js', 'Make a language string available to JavaScript. ', [['lib','outputrequirementslib.php',1120]], 64],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',1977]], 289],
'set_blocks_editing_capability': ['set_blocks_editing_capability', 'Set the capability that allows users to edit blocks on this page. ', [['lib','pagelib.php',1321]], 14],
'magic_get_bodyid': ['magic_get_bodyid', 'Please do not call this method directly, use the ->pagetype syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',477]], 0],
'set_docs_path': ['set_docs_path', 'Set a different path to use for the \'Moodle docs for this page\' link. ', [['lib','pagelib.php',1214]], 6],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'set_course': ['set_course', 'Set the current course. This sets both $PAGE->course and $COURSE. It also sets the right theme and locale. ', [['lib','pagelib.php',922],['mod/assign','locallib.php',283]], 55],
'yui_module': ['yui_module', 'Creates a JavaScript function call that requires one or more modules to be loaded. ', [['lib','outputrequirementslib.php',1023]], 81],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'__get': ['__get', '', [['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/minify/lib','JSMinPlus.php',1686],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121],['user/classes/output/myprofile','category.php',185],['lib/adodb','adodb-active-record.inc.php',295],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Socket','Client.php',91],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/simplepie/library/SimplePie','IRI.php',168],['lib/horde/framework/Horde','Variables.php',150],['mod/lesson','locallib.php',2028],['lib','modinfolib.php',124],['lib','modinfolib.php',1138],['lib','modinfolib.php',2577],['lib','adminlib.php',1071],['lib/dml','database_column_info.php',87],['lib/classes/message/inbound','handler.php',79],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib','navigationlib.php',5107],['lib/classes/plugininfo','block.php',44],['lib/classes/message','message.php',187],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/horde/framework/Horde/Support','Array.php',116],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['admin/tool/monitor/classes','subscription.php',54],['lib','pagelib.php',761],['user/classes/output/myprofile','tree.php',144],['lib/horde/framework/Horde','Stream.php',74],['lib/adodb','adodb-active-recordx.inc.php',341],['lib','accesslib.php',5286],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/minify/lib/MrClay/Cli','Arg.php',170],['tag/classes/output','tagindex.php',123],['calendar/tests','rrule_manager_tests.php',523],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['lib/classes/plugininfo','mod.php',43],['course','lib.php',3089],['lib/classes/plugininfo','base.php',177],['lib/classes/event','base.php',909],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib','coursecatlib.php',131],['lib','coursecatlib.php',2943],['tag/classes','tag.php',89],['lib/google/src/Google','Model.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['calendar','lib.php',2077],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['mod/quiz','renderer.php',1349],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['user/classes/output/myprofile','node.php',106],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib/pear/Net/GeoIP','Location.php',158]], 20],
'https_required': ['https_required', 'This function indicates that current page requires the https when $CFG->loginhttps enabled. ', [['lib','pagelib.php',1403]], 15],
'magic_get_course': ['magic_get_course', 'Please do not call this method directly, use the ->course syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',365]], 0],
'ensure_theme_not_set': ['ensure_theme_not_set', 'Ensure the theme has not been loaded yet. If it has an exception is thrown. ', [['lib','pagelib.php',1882]], 4],
'current_language': ['current_language', 'Returns the code for the current language ', [['lib','moodlelib.php',6589]], 44],
'set_periodic_refresh_delay': ['set_periodic_refresh_delay', 'Sets the page to periodically refresh ', [['lib','pagelib.php',1358]], 0],
'magic_get_focuscontrol': ['magic_get_focuscontrol', 'Please do not call this method directly, use the ->focuscontrol syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',620]], 0],
'has_set_url': ['has_set_url', 'Returns true if the page URL has beem set. ', [['lib','pagelib.php',1935]], 3],
'magic_get_category': ['magic_get_category', 'Please do not call this method directly, use the ->category syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',415]], 0],
'set_button': ['set_button', 'Specify a fragment of HTML that goes where the \'Turn editing on\' button normally goes. ', [['lib','pagelib.php',1312]], 29],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'initialise_theme_and_output': ['initialise_theme_and_output', 'Method for use by Moodle core to set up the theme. Do not use this in your own code. ', [['lib','pagelib.php',1512]], 9],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'verify_https_required': ['verify_https_required', 'Makes sure that page previously marked with https_required() is really using https://, if not it redirects to https:// ', [['lib','pagelib.php',1430]], 9],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'remove_params': ['remove_params', 'Remove all params if no arguments passed. Remove selected params if arguments are passed. ', [['lib','weblib.php',421]], 34],
'ensure_category_loaded': ['ensure_category_loaded', 'This function ensures that the category of the current course has been loaded, and if not, the function loads it now. ', [['lib','pagelib.php',1821]], 3],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'magic_get_bodyclasses': ['magic_get_bodyclasses', 'Please do not call this method directly, use the ->bodyclasses syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',513]], 0],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'magic_get_navigation': ['magic_get_navigation', 'Return the navigation object ', [['lib','pagelib.php',695]], 0],
'getremoteaddr': ['getremoteaddr', 'Returns most reliable client address ', [['lib','moodlelib.php',8569]], 61],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'magic_get_docspath': ['magic_get_docspath', 'Please do not call this method directly, use the ->docspath syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',545]], 0],
'initialise_standard_body_classes': ['initialise_standard_body_classes', 'Initialises the CSS classes that will be added to body tag of the page. ', [['lib','pagelib.php',1714]], 1],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'magic_get_alternateversions': ['magic_get_alternateversions', 'The list of alternate versions of this page. ', [['lib','pagelib.php',573]], 0],
'set_popup_notification_allowed': ['set_popup_notification_allowed', 'Allow or disallow popup notifications on this page. Popups are allowed by default. ', [['lib','pagelib.php',1963]], 18],
'magic_get_activityname': ['magic_get_activityname', 'Please do not call this method directly, use the ->activityname syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',403]], 0],
'start_collecting_javascript_requirements': ['start_collecting_javascript_requirements', 'Switches from the regular requirements manager to the fragment requirements manager to capture all necessary JavaScript to display a chunk of HTML such as an mform. This is for use by the get_fragment() web service and not for use elsewhere. ', [['lib','pagelib.php',832]], 1],
'get_user_device_type': ['get_user_device_type', 'Gets the device type the user is currently using. ', [['lib/classes','useragent.php',271],['lib','deprecatedlib.php',2023]], 3],
'debug_summary': ['debug_summary', 'Get a description of this page. Normally displayed in the footer in developer debug mode. ', [['lib','pagelib.php',882]], 1],
'find': ['find', '', [['lib/adodb','adodb-active-record.inc.php',917],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17964],['lib','outputcomponents.php',3070],['lib','navigationlib.php',369],['lib','navigationlib.php',860],['lib','navigationlib.php',2726],['lib/behat','behat_base.php',92],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/tabfocus','editor_plugin_src.js',24],['lib/mustache/src/Mustache','Context.php',82],['lib/adodb','adodb-active-recordx.inc.php',1032],['lib/lessphp/Tree','Ruleset.php',317],['lib/lessphp/Tree','Directive.php',85],['lib/lessphp/Tree','Media.php',79],['lib/simplepie/library/SimplePie','Locator.php',94]], 715],
'magic_get_settingsnav': ['magic_get_settingsnav', 'Returns the settings navigation object ', [['lib','pagelib.php',717]], 0],
'set_block_actions_done': ['set_block_actions_done', 'Gets set when the block actions for the page have been processed. ', [['lib','pagelib.php',1944]], 2],
'page_set_course': ['page_set_course', 'Allows course format to execute code on moodle_page::set_course() ', [['course/format','lib.php',830],['course/format/singleactivity','lib.php',363]], 1],
'get_format': ['get_format', 'Returns the format name used by this course ', [['course/format','lib.php',213],['backup/util/ui','base_ui.class.php',287],['question/format/xml','format.php',1028],['backup/controller','backup_controller.class.php',271],['mod/workshop','locallib.php',4044],['backup/controller','restore_controller.class.php',273]], 47],
'magic_get_opencontainers': ['magic_get_opencontainers', 'Please do not call this method directly use the ->opencontainers syntax. {@link moodle_page::__get()} ', [['lib','pagelib.php',683]], 0],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 99],
'set_state': ['set_state', 'Set the state. ', [['lib','pagelib.php',901],['question/engine','questionattemptstep.php',145],['question/engine','questionattemptstep.php',556],['question/engine','questionattemptstep.php',584],['question/engine','questionattemptstep.php',670],['cache/classes','factory.php',504]], 75],
'set_category_by_id': ['set_category_by_id', 'Set the course category this page belongs to manually. ', [['lib','pagelib.php',1189]], 7],
'message_popup_window': ['message_popup_window', 'If new messages are waiting for the current user, then insert JavaScript to pop up the messaging window into the page ', [['lib','moodlelib.php',8737]], 1],
'add_alternate_version': ['add_alternate_version', 'Sets an alternative version of this page. ', [['lib','pagelib.php',1281]], 2],
'format_backtrace': ['format_backtrace', 'Formats a backtrace ready for output. ', [['lib','setuplib.php',729]], 20],
'ensure_param_not_in_url': ['ensure_param_not_in_url', 'Make sure page URL does not contain the given URL parameter. ', [['lib','pagelib.php',1265]], 10],
'reload_theme': ['reload_theme', 'Reload theme settings. ', [['lib','pagelib.php',1391]], 1],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'resolve_theme': ['resolve_theme', 'Work out the theme this page should use. ', [['lib','pagelib.php',1582]], 1],
'add_body_classes': ['add_body_classes', 'Adds an array of body classes to the body tag of this page. ', [['lib','pagelib.php',1146]], 2],
'setup_blocks': ['setup_blocks', 'Inform a block_manager about the block regions this theme wants on this page layout. ', [['lib','outputlib.php',1912]], 1],
'set_subpage': ['set_subpage', 'If context->id and pagetype are not enough to uniquely identify this page, then you can set a subpage id as well. For example, the tags page sets ', [['lib','pagelib.php',1118]], 13],
'is_known_region': ['is_known_region', 'Find out if a region exists on a page ', [['lib','blocklib.php',267]], 7],
'force_theme': ['force_theme', 'Force this page to use a particular theme. ', [['lib','pagelib.php',1378]], 2],
'magic_get_periodicrefreshdelay': ['magic_get_periodicrefreshdelay', 'Please do not call this method directly use the ->periodicrefreshdelay syntax {@link moodle_page::__get()} ', [['lib','pagelib.php',674]], 0],
'set_focuscontrol': ['set_focuscontrol', 'Specify a form control should be focused when the page has loaded. ', [['lib','pagelib.php',1303]], 2],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'reset_theme_and_output': ['reset_theme_and_output', 'Reset the theme and output for a new context. This only makes sense from external::validate_context(). Do not cheat. ', [['lib','pagelib.php',1564]], 1],
'out_omit_querystring': ['out_omit_querystring', 'Returns url without parameters, everything before \'?\'. ', [['lib','weblib.php',605]], 27],
'load_blocks': ['load_blocks', 'Load blocks using the system context, rather than the user\'s context. ', [['my','lib.php',193],['lib','blocklib.php',536]], 15],
'set_other_editing_capability': ['set_other_editing_capability', 'Some pages let you turn editing on for reasons other than editing blocks. If that is the case, you can pass other capabilities that let the user edit this page here. ', [['lib','pagelib.php',1334]], 13],
'user_can_edit_blocks': ['user_can_edit_blocks', 'Does the user have permission to edit blocks on this page. ', [['lib','pagelib.php',866]], 12],
'magic_get_state': ['magic_get_state', 'Please do not call this method directly, use the ->state syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',346]], 0],
'magic_get_pagetype': ['magic_get_pagetype', 'Please do not call this method directly, use the ->pagetype syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',465]], 0],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'magic_get_theme': ['magic_get_theme', 'Please do not call this method directly, use the ->theme syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',636]], 1],
'strings_for_js': ['strings_for_js', 'Make an array of language strings available for JS. ', [['lib','outputrequirementslib.php',1183],['enrol','locallib.php',1311]], 73],
'user_allowed_editing': ['user_allowed_editing', 'Does the user have permission to see this page in editing mode. ', [['lib','pagelib.php',874]], 21],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'magic_get_pagelayout': ['magic_get_pagelayout', 'Please do not call this method directly, use the ->pagelayout syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',485]], 0],
'set_id': ['set_id', 'Setter for $id. ', [['lib/classes/task','adhoc_task.php',43],['lib/classes/message/inbound','handler.php',100],['blocks/rss_client/classes/output','item.php',140],['mnet','peer.php',253]], 26],
'all_editing_caps': ['all_editing_caps', '', [['lib/tests','moodle_page_test.php',680],['lib','pagelib.php',1923]], 6],
'get_context_name': ['get_context_name', 'Returns human readable context identifier. ', [['lib','accesslib.php',5639],['lib','accesslib.php',6189],['lib','accesslib.php',6431],['lib','accesslib.php',6618],['lib','accesslib.php',6850],['lib','accesslib.php',7072],['lib','accesslib.php',7314]], 73],
'magic_get_layout_options': ['magic_get_layout_options', 'Please do not call this method directly, use the ->layout_options syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',494]], 0],
'set_activity_record': ['set_activity_record', 'Sets the activity record. This could be a row from the main table for a module. For instance if the current module (cm) is a forum this should be a row from the forum table. ', [['lib','pagelib.php',1053]], 13],
'right_to_left': ['right_to_left', 'Returns true if the user is using a right-to-left language. ', [['lib','weblib.php',3109],['lib','javascript-static.js',1156]], 63],
'initialise': ['initialise', 'Initialises the cache. ', [['cache/stores/static','lib.php',192],['cache/classes','dummystore.php',105],['lib','navigationlib.php',1067],['lib','navigationlib.php',2840],['lib','navigationlib.php',3476],['lib','navigationlib.php',4900],['mnet/xmlrpc','xmlparser.php',34],['cache/stores/memcache','lib.php',198],['cache/stores/session','lib.php',196],['cache/stores/mongodb','lib.php',194],['cache/stores/file','lib.php',259],['cache/stores/memcached','lib.php',236],['lib/phpexcel/PHPExcel/Helper','HTML.php',576]], 34],
'magic_get_navbar': ['magic_get_navbar', 'Return a navbar object ', [['lib','pagelib.php',706]], 0],
'get_cm': ['get_cm', 'Returns the current course module ', [['mod/feedback/classes','complete_form.php',245],['search/classes','base_mod.php',51],['mod/feedback/classes','structure.php',72],['mod/quiz','attemptlib.php',215],['mod/quiz','attemptlib.php',742],['lib','modinfolib.php',222],['comment','lib.php',1010]], 137],
'get_popup_notification_allowed': ['get_popup_notification_allowed', 'Are popup notifications allowed on this page? Popup notifications may be disallowed in situations such as while upgrading or completing a quiz ', [['lib','pagelib.php',1953]], 1],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'get_parent_context': ['get_parent_context', 'Returns parent context ', [['lib','accesslib.php',5746]], 31],
'page_set_cm': ['page_set_cm', 'Allows course format to execute code on moodle_page::set_cm() ', [['course/format','lib.php',838],['course/format/singleactivity','lib.php',437]], 2],
'set_headingmenu': ['set_headingmenu', 'Sets some HTML to use next to the heading {@link moodle_page::set_heading()} ', [['lib','pagelib.php',1180]], 1],
'starting_output': ['starting_output', 'This method is called when the page first moves out of the STATE_BEFORE_HEADER state. This is our last change to initialise things. ', [['lib','pagelib.php',1475]], 1],
'during_initial_install': ['during_initial_install', 'Indicates whether we are in the middle of the initial Moodle install. ', [['lib','setuplib.php',1191]], 51],
'create_all_block_instances': ['create_all_block_instances', 'Create all the block instances for all the blocks that were loaded by load_blocks. This is used, for example, to ensure that all blocks get a chance to initialise themselves via the {@link block_base::specialize()} method, before any output is done. ', [['lib','blocklib.php',943]], 1],
'add_report_nodes': ['add_report_nodes', 'Add a report node and a specific report to the navigation. ', [['lib','pagelib.php',1993]], 4],
'has_items': ['has_items', '', [['backup/cc/cc_lib','cc_organization.php',81],['lib','navigationlib.php',3107],['backup/cc/cc_lib','cc_interfaces.php',50]], 4],
'get_records_list': ['get_records_list', 'Get a number of records as an array of objects where one field match one list of values. ', [['lib/dml','moodle_database.php',1310]], 34],
'is_executing': ['is_executing', 'Checks whether restore is currently executing. Certain parts of code that is called during restore, but not directly part of the restore system, may need to behave differently during restore (e.g. do not bother resetting a cache because we know it will be reset at end of operation). ', [['backup/controller','restore_controller.class.php',343]], 5],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'set_url': ['set_url', 'Convenience method handling moodle_urls. ', [['competency/classes','evidence.php',151],['lib','outputcomponents.php',2828],['backup/cc/cc_lib','cc_weblink.php',50],['lib','pagelib.php',1227],['blocks/rss_client/classes/output','channel_image.php',89],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',245],['mod/wiki','pagelib.php',333],['mod/wiki','pagelib.php',425],['mod/wiki','pagelib.php',696],['mod/wiki','pagelib.php',721],['mod/wiki','pagelib.php',835],['mod/wiki','pagelib.php',879],['mod/wiki','pagelib.php',1008],['mod/wiki','pagelib.php',1112],['mod/wiki','pagelib.php',1219],['mod/wiki','pagelib.php',1462],['mod/wiki','pagelib.php',1864],['mod/wiki','pagelib.php',1932],['mod/wiki','pagelib.php',2104],['mod/wiki','pagelib.php',2165],['mod/wiki','pagelib.php',2221],['mod/wiki','pagelib.php',2286],['mod/wiki','pagelib.php',2334],['mod/wiki','pagelib.php',2382],['mod/wiki','pagelib.php',2486]], 596],
'magic_get_requires': ['magic_get_requires', 'Please do not call this method directly, use the ->requires syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',601]], 0],
'set_cacheable': ['set_cacheable', 'Sets whether the browser should cache this page or not. ', [['lib','pagelib.php',1349]], 26],
'magic_get_categories': ['magic_get_categories', 'Please do not call this method directly, use the ->categories syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',429]], 0],
'magic_get_subpage': ['magic_get_subpage', 'Please do not call this method directly, use the ->subpage syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',505]], 0],
'url_to_class_name': ['url_to_class_name', '', [['lib/tests','moodle_page_test.php',677],['lib','pagelib.php',1901]], 6],
'magic_get_title': ['magic_get_title', 'Please do not call this method directly, use the ->title syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',521]], 0],
'magic_get_requestorigin': ['magic_get_requestorigin', 'Returns the origin of current request. ', [['lib','pagelib.php',738]], 0],
'magic_get_context': ['magic_get_context', 'Please do not call this method directly, use the ->context syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',441]], 1],
'magic_get_headingmenu': ['magic_get_headingmenu', 'Please do not call this method directly, use the ->heading syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',537]], 0],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 1072],
'get_browser_version_classes': ['get_browser_version_classes', 'Gets an array of CSS classes to represent the user agent. ', [['lib/classes','useragent.php',903],['lib','deprecatedlib.php',2030]], 4],
'magic_get_headerprinted': ['magic_get_headerprinted', 'Please do not call this method directly, use the ->headerprinted syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',357]], 0],
'get_device_type_theme': ['get_device_type_theme', 'Returns the theme to use for the given device type. ', [['lib/classes','useragent.php',237]], 5],
'load_category': ['load_category', 'Loads a single category into the AJAX navigation. ', [['lib','navigationlib.php',2940],['lib','pagelib.php',1842]], 4],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'load_activity_record': ['load_activity_record', 'Loads the activity record for the current CM object associated with this page. ', [['lib','pagelib.php',1804]], 1],
'set_cm': ['set_cm', 'The course module that this page belongs to (if it does belong to one). ', [['lib','pagelib.php',1002]], 33],
'apply_theme_region_manipulations': ['apply_theme_region_manipulations', 'Returns the block region having made any required theme manipulations. ', [['lib','pagelib.php',1972]], 1],
'magic_get_button': ['magic_get_button', 'Please do not call this method directly, use the ->button syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',628]], 0],
'magic_get_devicetypeinuse': ['magic_get_devicetypeinuse', 'Please do not call this method directly, use the ->devicetypeinuse syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',663]], 0],
'set_pagetype': ['set_pagetype', 'Sets the pagetype to use for this page. ', [['lib','pagelib.php',1071]], 34],
'magic_get_activityrecord': ['magic_get_activityrecord', 'Please do not call this method directly, use the ->activityrecord syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',390]], 0],
'__set': ['__set', '', [['lib/minify/lib','JSMinPlus.php',1681],['lib/adodb','adodb-active-record.inc.php',114],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',74],['lib/simplepie/library/SimplePie','IRI.php',143],['lib/horde/framework/Horde','Variables.php',199],['mod/lesson','locallib.php',2012],['lib','modinfolib.php',168],['lib','modinfolib.php',1206],['lib','adminlib.php',1085],['lib/dml','database_column_info.php',76],['lib','navigationlib.php',5121],['lib/classes/message','message.php',202],['lib/horde/framework/Horde/Support','Array.php',123],['lib','pagelib.php',779],['mod/forum/classes/output','forum_post.php',230],['lib/horde/framework/Horde','Stream.php',84],['lib/simplepie/library/SimplePie','gzdecode.php',175],['lib/adodb','adodb-active-recordx.inc.php',122],['lib','accesslib.php',5277],['lib/mustache/src/Mustache','HelperCollection.php',43],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',121],['tag/classes/output','tagindex.php',113],['lib/portfolio/formats/leap2a','lib.php',277],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',94],['lib/horde/framework/Horde/Support','ObjectStub.php',50],['lib/classes/event','base.php',927],['lib','coursecatlib.php',121],['lib','coursecatlib.php',2979],['calendar','lib.php',2061],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',88],['lib/horde/framework/Horde/Stream','TempString.php',83],['lib/horde/framework/Horde/Support','Stub.php',31],['lib','webdavlib.php',98],['lib/pear/Net/GeoIP','Location.php',142]], 4],
'magic_get_blocks': ['magic_get_blocks', 'Please do not call this method directly, use the ->blocks syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',581]], 0],
'magic_get_heading': ['magic_get_heading', 'Please do not call this method directly, use the ->heading syntax. {@link moodle_page::__get()}. ', [['lib','pagelib.php',529]], 0],
'isloggedin': ['isloggedin', 'Determines if a user is currently logged in ', [['lib','accesslib.php',1910]], 184],
'magic_get_blockmanipulations': ['magic_get_blockmanipulations', 'Returns an array of minipulations or false if there are none to make. ', [['lib','pagelib.php',647]], 0],
'magic_get_requestip': ['magic_get_requestip', 'Returns request IP address. ', [['lib','pagelib.php',729]], 0],
'array_keys': ['array_keys', '', [], 1256],
'str_replace': ['str_replace', '', [], 1648],
'header': ['header', '', [], 1355],
'array_unique': ['array_unique', '', [], 171],
'reset': ['reset', '', [], 1213],
'array_slice': ['array_slice', '', [], 165],
'debug_backtrace': ['debug_backtrace', '', [], 30],
'defined': ['defined', '', [], 4731],
'class_exists': ['class_exists', '', [], 279],
'strip_tags': ['strip_tags', '', [], 150],
'array_reverse': ['array_reverse', '', [], 130],
'ltrim': ['ltrim', '', [], 92],
'substr': ['substr', '', [], 2823],
'array_shift': ['array_shift', '', [], 700],
'parse_url': ['parse_url', '', [], 55],
'end': ['end', '', [], 433],
'get_class': ['get_class', '', [], 305],
'is_string': ['is_string', '', [], 536],
'explode': ['explode', '', [], 1572],
'method_exists': ['method_exists', '', [], 265],
'strpos': ['strpos', '', [], 1604],
'array_pop': ['array_pop', '', [], 483],
'is_array': ['is_array', '', [], 1608],
'implode': ['implode', '', [], 1281],
'trim': ['trim', '', [], 1948],
'count': ['count', '', [], 4095],
'is_null': ['is_null', '', [], 2003]};
CLASS_DATA={
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'global_navigation': ['global_navigation', 'The global navigation class used for... the global navigation ', [['lib','navigationlib.php',963]], 8],
'core_useragent': ['core_useragent', 'The user agent class. ', [['lib/classes','useragent.php',25]], 159],
'mnet_peer': ['mnet_peer', '', [['mnet','peer.php',13]], 28],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'navbar': ['navbar', 'Navbar class ', [['lib','navigationlib.php',3052]], 3],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6585]], 194],
'moodle_page': ['moodle_page', '$PAGE is a central store of information about the current page we are generating in response to the user\'s request. ', [['lib','pagelib.php',30]], 61],
'theme_config': ['theme_config', 'This class represents the configuration variables of a Moodle theme. ', [['lib','outputlib.php',126]], 41],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'page_requirements_manager': ['page_requirements_manager', 'This class tracks all the things that are needed by the current page. ', [['lib','outputrequirementslib.php',30]], 3],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'xhtml_container_stack': ['xhtml_container_stack', 'This class keeps track of which HTML tags are currently open. ', [['lib','outputlib.php',2005]], 9],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 348],
'fragment_requirements_manager': ['fragment_requirements_manager', 'This requirements manager captures the appropriate html for creating a fragment to be inserted elsewhere. ', [['lib','outputfragmentrequirementslib.php',28]], 1],
'settings_navigation': ['settings_navigation', 'Class used to manage the settings option for the current page ', [['lib','navigationlib.php',3434]], 17],
'restore_controller': ['restore_controller', 'Class implementing the controller of any restore process ', [['backup/controller','restore_controller.class.php',25]], 32]};
CONST_DATA={
'AJAX_SCRIPT': ['AJAX_SCRIPT', '', [['mod/assign/feedback/editpdf','ajax.php',29],['admin/roles','ajax.php',26],['repository','draftfiles_ajax.php',27],['enrol','ajax.php',28],['lib/ajax','blocks.php',25],['comment','comment_ajax.php',24],['lib/ajax','service.php',30],['login','token.php',24],['badges','backpackconnect.php',27],['webservice','upload.php',37],['mod/chat','chat_ajax.php',17],['user/selector','search.php',25],['lib/editor/atto/plugins/equation','ajax.php',26],['lib','sessionkeepalive_ajax.php',25],['mod/forum','subscribe_ajax.php',25],['repository','repository_ajax.php',27],['admin/tool/installaddon','permcheck.php',27],['question','toggleflag.php',27],['mod/quiz','edit_rest.php',26],['mod/assign/feedback/editpdf','ajax_progress.php',26],['','help_ajax.php',27],['grade/report/history','users_ajax.php',26],['lib/ajax','getnavbranch.php',28],['badges','assertion.php',27],['mod/quiz','questionbank.ajax.php',26],['badges','ajax.php',27],['course/ajax','management.php',27],['mod/lti','ajax.php',29],['rating','rate_ajax.php',28],['enrol/manual','ajax.php',28],['availability/condition/date','ajax.php',25],['lib/ajax','getsiteadminbranch.php',28],['','install.php',47],['course','category.ajax.php',28],['course','dndupload.php',26],['message','ajax.php',25],['mod/feedback','ajax.php',26],['webservice','pluginfile.php',29],['course','rest.php',27],['lib','setup.php',351],['mod/glossary','showentry_ajax.php',2],['lib/editor/atto','autosave-ajax.php',25],['mod/quiz','autosave.ajax.php',25],['report/loglive','loglive_ajax.php',25],['message/output/airnotifier','rest.php',26],['blocks/course_overview','save.php',24]], 74],
'CLI_SCRIPT': ['CLI_SCRIPT', '', [['enrol/ldap/cli','sync.php',43],['lib/filestorage/tests/fixtures','zip_create_test_file.php',25],['admin/cli','fix_course_sequence.php',26],['admin/tool/behat/cli','run.php',30],['admin/cli','upgrade.php',38],['admin/cli','install.php',32],['admin/tool/uploadcourse/cli','uploadcourse.php',25],['admin/cli','fix_orphaned_question_categories.php',29],['admin/tool/generator/cli','maketestsite.php',25],['admin/cli','purge_caches.php',24],['admin/cli','install_database.php',31],['admin/tool/behat/cli','util.php',34],['admin/tool/task/cli','schedule_task.php',25],['admin/tool/replace/cli','replace.php',25],['auth/db/cli','sync_users.php',45],['admin/cli','automated_backups.php',29],['enrol/manual/cli','sync.php',30],['lib/editor/tinymce/cli','update_lang_files.php',25],['auth/ldap/cli','sync_users.php',47],['admin/cli','fix_deleted_users.php',26],['admin/cli','maintenance.php',26],['lib/tests/behat','behat_hooks.php',133],['admin/cli','reset_password.php',27],['admin/tool/dbtransfer/cli','migrate.php',30],['enrol/category/cli','sync.php',33],['admin/cli','mysql_compressed_rows.php',26],['enrol/paypal/cli','sync.php',30],['admin/cli','cron.php',31],['enrol/database/cli','sync.php',34],['admin/cli','mysql_collation.php',25],['auth/cas/cli','sync_users.php',43],['enrol/cohort/cli','sync.php',31],['admin/tool/generator/cli','maketestcourse.php',25],['admin/cli','backup.php',26],['search/cli','indexer.php',25],['admin/cli','check_database_schema.php',26],['admin/tool/behat/cli','util_single_run.php',90],['enrol/self/cli','sync.php',31],['','install.php',46],['theme/base/cli','svgtool.php',26],['admin','cron.php',47],['admin/tool/behat/cli','init.php',36],['enrol/meta/cli','sync.php',31],['admin/cli','alternative_component_cache.php',30],['admin/tool/generator/cli','maketestplan.php',25],['lib/phpunit','bootstrap.php',73],['lib','setup.php',289],['mod/chat','chatd.php',25],['lib/filestorage/tests/fixtures','zip_info.php',25],['enrol/flatfile/cli','sync.php',45],['admin/cli','mysql_engine.php',27]], 114],
'NO_MOODLE_COOKIES': ['NO_MOODLE_COOKIES', '', [['rss','file.php',34],['grade/export/xml','dump.php',18],['login','token.php',26],['','help.php',29],['grade/import/xml','fetch.php',18],['lib/ajax','service-nologin.php',30],['webservice','upload.php',42],['mod/data','js.php',26],['theme','font.php',124],['mod/data','css.php',26],['grade/export/txt','dump.php',18],['grade/export/xls','dump.php',18],['auth/ldap','ntlmsso_magic.php',7],['lib/editor/tinymce','all_strings.php',25],['lib/flowplayer','flowplayer-3.2.18.swf.php',26],['theme','image.php',127],['mod/lti','services.php',27],['mod/assign/feedback/editpdf','ajax_progress.php',28],['mod/chat/gui_header_js','chatinput.php',17],['','help_ajax.php',26],['user','grouppix.php',30],['mod/chat/gui_sockets','chatinput.php',17],['theme','javascript.php',83],['badges','assertion.php',28],['lib/editor/tinymce/plugins','loader.php',32],['filter/tex','pix.php',8],['mod/lti','service.php',27],['mod/chat/gui_header_js','jsupdated.php',33],['filter/algebra','pix.php',8],['grade/export/ods','dump.php',18],['theme','styles_debug.php',29],['mod/chat/gui_header_js','users.php',17],['lib/flowplayer','flowplayer.audio-3.2.11.swf.php',26],['lib','setuplib.php',863],['mnet/xmlrpc','server.php',16],['mod/chat/gui_header_js','jsupdate.php',17],['filter/tex','displaytex.php',28],['webservice','pluginfile.php',34],['theme','styles.php',112],['lib','setup.php',760],['lib','setup.php',764],['lib','setup.php',769],['lib','setup.php',772],['lib','setup.php',774],['lib/flowplayer','flowplayer.controls-3.2.16.swf.php',26],['lib/editor/tinymce/plugins/moodleemoticon','dialog.php',25]], 57],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'RENDERER_TARGET_MAINTENANCE': ['RENDERER_TARGET_MAINTENANCE', '', [['lib','outputfactories.php',35]], 9],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'CONTEXT_BLOCK': ['CONTEXT_BLOCK', '', [['lib','accesslib.php',156]], 96],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'BEHAT_SITE_RUNNING': ['BEHAT_SITE_RUNNING', '', [['lib','setup.php',131]], 26],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'WS_SERVER': ['WS_SERVER', '', [['webservice/soap','simpleserver.php',31],['webservice/xmlrpc','simpleserver.php',31],['webservice/rest','simpleserver.php',31],['webservice/soap','server.php',31],['webservice/xmlrpc','server.php',31],['webservice/rest','server.php',31],['lib','setup.php',310]], 15],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
