<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of exporter.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/portfolio';
filename='exporter.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/portfolio/</a> -> <a href="exporter.php.source.html">exporter.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="exporter.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>This file contains the class definition for the exporter object.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2008 Penny Leach <<a href="mailto:penny@catalyst.net.nz">penny@catalyst.net.nz</a>></td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>927 lines (37 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 1 class</h3>
<div class="inset">
<p><b>portfolio_exporter::</b> (30 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#set">set</a>()<br>
&nbsp;&nbsp;<a href="#set_forcequeue">set_forcequeue</a>()<br>
&nbsp;&nbsp;<a href="#process_stage">process_stage</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#caller">caller</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_config">process_stage_config</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_confirm">process_stage_confirm</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_queueorwait">process_stage_queueorwait</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_package">process_stage_package</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_cleanup">process_stage_cleanup</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_send">process_stage_send</a>()<br>
&nbsp;&nbsp;<a href="#log_transfer">log_transfer</a>()<br>
&nbsp;&nbsp;<a href="#update_log_url">update_log_url</a>()<br>
&nbsp;&nbsp;<a href="#process_stage_finished">process_stage_finished</a>()<br>
&nbsp;&nbsp;<a href="#print_header">print_header</a>()<br>
&nbsp;&nbsp;<a href="#cancel_request">cancel_request</a>()<br>
&nbsp;&nbsp;<a href="#save">save</a>()<br>
&nbsp;&nbsp;<a href="#rewaken_object">rewaken_object</a>()<br>
&nbsp;&nbsp;<a href="#new_file_record_base">new_file_record_base</a>()<br>
&nbsp;&nbsp;<a href="#verify_rewaken">verify_rewaken</a>()<br>
&nbsp;&nbsp;<a href="#copy_existing_file">copy_existing_file</a>()<br>
&nbsp;&nbsp;<a href="#write_new_file">write_new_file</a>()<br>
&nbsp;&nbsp;<a href="#zip_tempfiles">zip_tempfiles</a>()<br>
&nbsp;&nbsp;<a href="#get_tempfiles">get_tempfiles</a>()<br>
&nbsp;&nbsp;<a href="#get_base_filearea">get_base_filearea</a>()<br>
&nbsp;&nbsp;<a href="#print_expired_export">print_expired_export</a>()<br>
&nbsp;&nbsp;<a href="#print_cleaned_export">print_cleaned_export</a>()<br>
&nbsp;&nbsp;<a href="#print_finish_info">print_finish_info</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="portfolio_exporter"><b>portfolio_exporter</b></a>&nbsp;&nbsp;- <a href="../../_classes/portfolio_exporter.html"><small>X-Ref</small></a>
</p>
<b>The class that handles the various stages of the actual export<BR>
and the communication between the caller and the portfolio plugin.<BR>
</b><br>
This is stored in the database between page requests in serialized base64 encoded form<BR>
also contains helper methods for the plugin and caller to use (at the end of the file)<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'exporter.php.source.html#l113')" href="exporter.php.source.html#l113">__construct</a>(&amp;<a href="../../_variables/instance.html">$instance</a>, &amp;<a href="../../_variables/caller.html">$caller</a>, <a href="../../_variables/callercomponent.html">$callercomponent</a>)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Construct a new exporter for use<BR>
</b><BR><b>param:</b> portfolio_plugin_base $instance portfolio instance (passed by reference)<br>
<b>param:</b> portfolio_caller_base $caller portfolio caller (passed by reference)<br>
<b>param:</b> string $callercomponent the name of the callercomponent<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'exporter.php.source.html#l134')" href="exporter.php.source.html#l134">get</a>(<a href="../../_variables/field.html">$field</a>)&nbsp;&nbsp;
<a href="../../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generic getter for properties belonging to this instance<BR>
&lt;b&gt;outside&lt;/b&gt; the subclasses like name, visible etc.<BR>
</b><BR><b>param:</b> string $field property's name<br>
<b>return:</b> portfolio_format|mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set" onClick="logFunction('set', 'exporter.php.source.html#l154')" href="exporter.php.source.html#l154">set</a>(<a href="../../_variables/field.html">$field</a>, &amp;<a href="../../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../../_functions/set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generic setter for properties belonging to this instance<BR>
&lt;b&gt;outside&lt;/b&gt; the subclass like name, visible, etc.<BR>
</b><BR><b>param:</b> string $field property's name<br>
<b>param:</b> mixed $value property's value<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_forcequeue" onClick="logFunction('set_forcequeue', 'exporter.php.source.html#l178')" href="exporter.php.source.html#l178">set_forcequeue</a>()&nbsp;&nbsp;
<a href="../../_functions/set_forcequeue.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets this export to force queued.<BR>
Sometimes plugins need to set this randomly<BR>
if an external system changes its mind<BR>
about what's supported<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage" onClick="logFunction('process_stage', 'exporter.php.source.html#l188')" href="exporter.php.source.html#l188">process_stage</a>(<a href="../../_variables/stage.html">$stage</a>, <a href="../../_variables/alreadystolen.html">$alreadystolen</a>=false)&nbsp;&nbsp;
<a href="../../_functions/process_stage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the given stage calling whatever functions are necessary<BR>
</b><BR><b>param:</b> int $stage (see PORTFOLIO_STAGE_* constants)<br>
<b>param:</b> bool $alreadystolen used to avoid letting plugins steal control twice.<br>
<b>return:</b> bool whether or not to process the next stage. this is important as the function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'exporter.php.source.html#l251')" href="exporter.php.source.html#l251">instance</a>()&nbsp;&nbsp;
<a href="../../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Helper function to return the portfolio instance<BR>
</b><BR><b>return:</b> portfolio_plugin_base subclass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="caller" onClick="logFunction('caller', 'exporter.php.source.html#l260')" href="exporter.php.source.html#l260">caller</a>()&nbsp;&nbsp;
<a href="../../_functions/caller.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Helper function to return the caller object<BR>
</b><BR><b>return:</b> portfolio_caller_base subclass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_config" onClick="logFunction('process_stage_config', 'exporter.php.source.html#l269')" href="exporter.php.source.html#l269">process_stage_config</a>()&nbsp;&nbsp;
<a href="../../_functions/process_stage_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'config' stage of the export<BR>
</b><BR><b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_confirm" onClick="logFunction('process_stage_confirm', 'exporter.php.source.html#l360')" href="exporter.php.source.html#l360">process_stage_confirm</a>()&nbsp;&nbsp;
<a href="../../_functions/process_stage_confirm.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'confirm' stage of the export<BR>
</b><BR><b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_queueorwait" onClick="logFunction('process_stage_queueorwait', 'exporter.php.source.html#l431')" href="exporter.php.source.html#l431">process_stage_queueorwait</a>()&nbsp;&nbsp;
<a href="../../_functions/process_stage_queueorwait.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'queueornext' stage of the export<BR>
</b><BR><b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_package" onClick="logFunction('process_stage_package', 'exporter.php.source.html#l448')" href="exporter.php.source.html#l448">process_stage_package</a>()&nbsp;&nbsp;
<a href="../../_functions/process_stage_package.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'package' stage of the export<BR>
</b><BR><b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_cleanup" onClick="logFunction('process_stage_cleanup', 'exporter.php.source.html#l478')" href="exporter.php.source.html#l478">process_stage_cleanup</a>(<a href="../../_variables/pullok.html">$pullok</a>=false)&nbsp;&nbsp;
<a href="../../_functions/process_stage_cleanup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'cleanup' stage of the export<BR>
</b><BR><b>param:</b> bool $pullok normally cleanup is deferred for pull plugins until after the file is requested from portfolio/file.php<br>
<b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_send" onClick="logFunction('process_stage_send', 'exporter.php.source.html#l502')" href="exporter.php.source.html#l502">process_stage_send</a>()&nbsp;&nbsp;
<a href="../../_functions/process_stage_send.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'send' stage of the export<BR>
</b><BR><b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="log_transfer" onClick="logFunction('log_transfer', 'exporter.php.source.html#l524')" href="exporter.php.source.html#l524">log_transfer</a>()&nbsp;&nbsp;
<a href="../../_functions/log_transfer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Log the transfer<BR>
</b><BR>this should only be called after the file has been sent<BR>
either via push, or sent from a pull request.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_log_url" onClick="logFunction('update_log_url', 'exporter.php.source.html#l547')" href="exporter.php.source.html#l547">update_log_url</a>(<a href="../../_variables/url.html">$url</a>)&nbsp;&nbsp;
<a href="../../_functions/update_log_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>In some cases (mahara) we need to update this after the log has been done<BR>
because of MDL-20872<BR>
</b><BR><b>param:</b> string $url link to be recorded to portfolio log<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_stage_finished" onClick="logFunction('process_stage_finished', 'exporter.php.source.html#l558')" href="exporter.php.source.html#l558">process_stage_finished</a>(<a href="../../_variables/queued.html">$queued</a>=false)&nbsp;&nbsp;
<a href="../../_functions/process_stage_finished.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the 'finish' stage of the export<BR>
</b><BR><b>param:</b> bool $queued let the process to be queued<br>
<b>return:</b> bool whether or not to process the next stage. this is important as the control function is called recursively.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_header" onClick="logFunction('print_header', 'exporter.php.source.html#l584')" href="exporter.php.source.html#l584">print_header</a>(<a href="../../_variables/headingstr.html">$headingstr</a>, <a href="../../_variables/summary.html">$summary</a>=true)&nbsp;&nbsp;
<a href="../../_functions/print_header.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Local print header function to be reused across the export<BR>
</b><BR><b>param:</b> string $headingstr full language string<br>
<b>param:</b> bool $summary (optional) to print summary, default is set to true<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cancel_request" onClick="logFunction('cancel_request', 'exporter.php.source.html#l617')" href="exporter.php.source.html#l617">cancel_request</a>(<a href="../../_variables/logreturn.html">$logreturn</a>=false)&nbsp;&nbsp;
<a href="../../_functions/cancel_request.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Cancels a potfolio request and cleans up the tempdata<BR>
and redirects the user back to where they started<BR>
</b><BR><b>param:</b> bool $logreturn options to return to porfolio log or caller return page<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="save" onClick="logFunction('save', 'exporter.php.source.html#l638')" href="exporter.php.source.html#l638">save</a>()&nbsp;&nbsp;
<a href="../../_functions/save.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Writes out the contents of this object and all its data to the portfolio_tempdata table and sets the 'id' field.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="rewaken_object" onClick="logFunction('rewaken_object', 'exporter.php.source.html#l668')" href="exporter.php.source.html#l668">rewaken_object</a>(<a href="../../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../../_functions/rewaken_object.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rewakens the data from the database given the id.<BR>
Makes sure to load the required files with the class definitions<BR>
</b><BR><b>param:</b> int $id id of data<br>
<b>return:</b> portfolio_exporter<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="new_file_record_base" onClick="logFunction('new_file_record_base', 'exporter.php.source.html#l712')" href="exporter.php.source.html#l712">new_file_record_base</a>(<a href="../../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../../_functions/new_file_record_base.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Helper function to create the beginnings of a file_record object<BR>
to create a new file in the portfolio_temporary working directory.<BR>
Use write_new_file or copy_existing_file externally<BR>
</b><BR><b>param:</b> string $name filename of new record<br>
<b>return:</b> object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="verify_rewaken" onClick="logFunction('verify_rewaken', 'exporter.php.source.html#l729')" href="exporter.php.source.html#l729">verify_rewaken</a>(<a href="../../_variables/readonly.html">$readonly</a>=false)&nbsp;&nbsp;
<a href="../../_functions/verify_rewaken.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Verifies a rewoken object.<BR>
Checks to make sure it belongs to the same user and session as is currently in use.<BR>
</b><BR><b>param:</b> bool $readonly if we're reawakening this for a user to just display in the log view, don't verify the sessionkey<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="copy_existing_file" onClick="logFunction('copy_existing_file', 'exporter.php.source.html#l758')" href="exporter.php.source.html#l758">copy_existing_file</a>(<a href="../../_variables/oldfile.html">$oldfile</a>)&nbsp;&nbsp;
<a href="../../_functions/copy_existing_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Copies a file from somewhere else in moodle<BR>
to the portfolio temporary working directory<BR>
associated with this export<BR>
</b><BR><b>param:</b> stored_file $oldfile existing stored file object<br>
<b>return:</b> stored_file|bool new file object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="write_new_file" onClick="logFunction('write_new_file', 'exporter.php.source.html#l784')" href="exporter.php.source.html#l784">write_new_file</a>(<a href="../../_variables/content.html">$content</a>, <a href="../../_variables/name.html">$name</a>, <a href="../../_variables/manifest.html">$manifest</a>=true)&nbsp;&nbsp;
<a href="../../_functions/write_new_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Writes out some content to a file<BR>
in the portfolio temporary working directory<BR>
associated with this export.<BR>
</b><BR><b>param:</b> string $content content to write<br>
<b>param:</b> string $name filename to use<br>
<b>param:</b> bool $manifest whether this is the main file or an secondary file (eg attachment)<br>
<b>return:</b> stored_file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="zip_tempfiles" onClick="logFunction('zip_tempfiles', 'exporter.php.source.html#l803')" href="exporter.php.source.html#l803">zip_tempfiles</a>(<a href="../../_variables/filename.html">$filename</a>='portfolio-export.zip', <a href="../../_variables/filepath.html">$filepath</a>='/final/')&nbsp;&nbsp;
<a href="../../_functions/zip_tempfiles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Zips all files in the temporary directory<BR>
</b><BR><b>param:</b> string $filename name of resulting zipfile (optional, defaults to portfolio-export.zip)<br>
<b>param:</b> string $filepath subpath in the filearea (optional, defaults to final)<br>
<b>return:</b> stored_file|bool resulting stored_file object, or false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_tempfiles" onClick="logFunction('get_tempfiles', 'exporter.php.source.html#l821')" href="exporter.php.source.html#l821">get_tempfiles</a>(<a href="../../_variables/skipfile.html">$skipfile</a>='portfolio-export.zip')&nbsp;&nbsp;
<a href="../../_functions/get_tempfiles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an arary of files in the temporary working directory<BR>
for this export.<BR>
Always use this instead of the files api directly<BR>
</b><BR><b>param:</b> string $skipfile name of the file to be skipped<br>
<b>return:</b> array of stored_file objects keyed by name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_base_filearea" onClick="logFunction('get_base_filearea', 'exporter.php.source.html#l845')" href="exporter.php.source.html#l845">get_base_filearea</a>()&nbsp;&nbsp;
<a href="../../_functions/get_base_filearea.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the context, filearea, and itemid.<BR>
Parts of a filearea (not filepath) to be used by<BR>
plugins if they want to do things like zip up the contents of<BR>
the temp area to here, or something that can't be done just using<BR>
write_new_file, copy_existing_file or get_tempfiles<BR>
</b><BR><b>return:</b> array contextid, filearea, itemid are the keys.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_expired_export" onClick="logFunction('print_expired_export', 'exporter.php.source.html#l863')" href="exporter.php.source.html#l863">print_expired_export</a>()&nbsp;&nbsp;
<a href="../../_functions/print_expired_export.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Wrapper function to print a friendly error to users<BR>
This is generally caused by them hitting an expired transfer<BR>
through the usage of the backbutton<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_cleaned_export" onClick="logFunction('print_cleaned_export', 'exporter.php.source.html#l883')" href="exporter.php.source.html#l883">print_cleaned_export</a>(<a href="../../_variables/log.html">$log</a>, <a href="../../_variables/instance.html">$instance</a>=null)&nbsp;&nbsp;
<a href="../../_functions/print_cleaned_export.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Wrapper function to print a friendly error to users<BR>
</b><BR><b>param:</b> stdClass $log portfolio_log object<br>
<b>param:</b> portfolio_plugin_base $instance portfolio instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_finish_info" onClick="logFunction('print_finish_info', 'exporter.php.source.html#l907')" href="exporter.php.source.html#l907">print_finish_info</a>(<a href="../../_variables/returnurl.html">$returnurl</a>, <a href="../../_variables/continueurl.html">$continueurl</a>, <a href="../../_variables/extras.html">$extras</a>=null)&nbsp;&nbsp;
<a href="../../_functions/print_finish_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Wrapper function to print continue and/or return link<BR>
</b><BR><b>param:</b> string $returnurl link to previos page<br>
<b>param:</b> string $continueurl continue to next page<br>
<b>param:</b> array $extras (optional) other links to be display.<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
