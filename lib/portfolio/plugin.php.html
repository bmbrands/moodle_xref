<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of plugin.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/portfolio';
filename='plugin.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/portfolio/</a> -> <a href="plugin.php.source.html">plugin.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="plugin.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>This file contains the base classes for portfolio plugins to inherit from: portfolio_plugin_pull_base and portfolio_plugin_push_base which both in turn inherit from portfolio_plugin_base. {@link http://docs.moodle.org/dev/Writing_a_Portfolio_Plugin}</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2008 Penny Leach <<a href="mailto:penny@catalyst.net.nz">penny@catalyst.net.nz</a>>,</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>830 lines (29 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 44 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#supported_formats">supported_formats</a>()<br>
&nbsp;&nbsp;<a href="#file_mime_check">file_mime_check</a>()<br>
&nbsp;&nbsp;<a href="#get_name">get_name</a>()<br>
&nbsp;&nbsp;<a href="#plugin_sanity_check">plugin_sanity_check</a>()<br>
&nbsp;&nbsp;<a href="#instance_sanity_check">instance_sanity_check</a>()<br>
&nbsp;&nbsp;<a href="#has_admin_config">has_admin_config</a>()<br>
&nbsp;&nbsp;<a href="#has_user_config">has_user_config</a>()<br>
&nbsp;&nbsp;<a href="#has_export_config">has_export_config</a>()<br>
&nbsp;&nbsp;<a href="#export_config_validation">export_config_validation</a>()<br>
&nbsp;&nbsp;<a href="#user_config_validation">user_config_validation</a>()<br>
&nbsp;&nbsp;<a href="#set_export_config">set_export_config</a>()<br>
&nbsp;&nbsp;<a href="#get_export_config">get_export_config</a>()<br>
&nbsp;&nbsp;<a href="#get_export_summary">get_export_summary</a>()<br>
&nbsp;&nbsp;<a href="#get_extra_finish_options">get_extra_finish_options</a>()<br>
&nbsp;&nbsp;<a href="#get_static_continue_url">get_static_continue_url</a>()<br>
&nbsp;&nbsp;<a href="#resolve_static_continue_url">resolve_static_continue_url</a>()<br>
&nbsp;&nbsp;<a href="#user_config_form">user_config_form</a>()<br>
&nbsp;&nbsp;<a href="#admin_config_form">admin_config_form</a>()<br>
&nbsp;&nbsp;<a href="#admin_config_validation">admin_config_validation</a>()<br>
&nbsp;&nbsp;<a href="#export_config_form">export_config_form</a>()<br>
&nbsp;&nbsp;<a href="#allows_multiple_instances">allows_multiple_instances</a>()<br>
&nbsp;&nbsp;<a href="#steal_control">steal_control</a>()<br>
&nbsp;&nbsp;<a href="#post_control">post_control</a>()<br>
&nbsp;&nbsp;<a href="#create_instance">create_instance</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#init">init</a>()<br>
&nbsp;&nbsp;<a href="#get_allowed_config">get_allowed_config</a>()<br>
&nbsp;&nbsp;<a href="#get_allowed_user_config">get_allowed_user_config</a>()<br>
&nbsp;&nbsp;<a href="#get_allowed_export_config">get_allowed_export_config</a>()<br>
&nbsp;&nbsp;<a href="#set_config">set_config</a>()<br>
&nbsp;&nbsp;<a href="#get_config">get_config</a>()<br>
&nbsp;&nbsp;<a href="#get_user_config">get_user_config</a>()<br>
&nbsp;&nbsp;<a href="#set_user_config">set_user_config</a>()<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#set">set</a>()<br>
&nbsp;&nbsp;<a href="#save">save</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#cleanup">cleanup</a>()<br>
&nbsp;&nbsp;<a href="#allows_multiple_exports">allows_multiple_exports</a>()<br>
&nbsp;&nbsp;<a href="#heading_summary">heading_summary</a>()<br>
&nbsp;&nbsp;<a href="#is_push">is_push</a>()<br>
&nbsp;&nbsp;<a href="#is_push">is_push</a>()<br>
&nbsp;&nbsp;<a href="#get_base_file_url">get_base_file_url</a>()<br>
&nbsp;&nbsp;<a href="#send_file">send_file</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="supported_formats" onClick="logFunction('supported_formats', 'plugin.php.source.html#l77')" href="plugin.php.source.html#l77">supported_formats</a>()&nbsp;&nbsp;
<a href="../../_functions/supported_formats.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Array of formats this portfolio supports<BR>
the intersection of what this function returns<BR>
and what the caller supports will be used.<BR>
Use the constants PORTFOLIO_FORMAT_*<BR>
</b><BR><b>return:</b> array list of formats<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_mime_check" onClick="logFunction('file_mime_check', 'plugin.php.source.html#l89')" href="plugin.php.source.html#l89">file_mime_check</a>(<a href="../../_variables/mimetype.html">$mimetype</a>)&nbsp;&nbsp;
<a href="../../_functions/file_mime_check.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Override this if you are supporting the 'file' type (or a subformat)<BR>
but have restrictions on mimetypes<BR>
</b><BR><b>param:</b> string $mimetype file type or subformat<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_name" onClick="logFunction('get_name', 'plugin.php.source.html#l120')" href="plugin.php.source.html#l120">get_name</a>()&nbsp;&nbsp;
<a href="../../_functions/get_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the user-friendly name for this plugin.<BR>
Usually just get_string('pluginname', 'portfolio_something')<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="plugin_sanity_check" onClick="logFunction('plugin_sanity_check', 'plugin.php.source.html#l128')" href="plugin.php.source.html#l128">plugin_sanity_check</a>()&nbsp;&nbsp;
<a href="../../_functions/plugin_sanity_check.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check sanity of plugin.<BR>
If this function returns something non empty, ALL instances of your plugin<BR>
will be set to invisble and not be able to be set back until it's fixed<BR>
</b><BR><b>return:</b> string|int|bool - string = error string KEY (must be inside portfolio_$yourplugin) or 0/false if you're ok<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance_sanity_check" onClick="logFunction('instance_sanity_check', 'plugin.php.source.html#l139')" href="plugin.php.source.html#l139">instance_sanity_check</a>()&nbsp;&nbsp;
<a href="../../_functions/instance_sanity_check.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check sanity of instances.<BR>
If this function returns something non empty, the instance will be<BR>
set to invislbe and not be able to be set back until it's fixed.<BR>
</b><BR><b>return:</b> int|string|bool - string = error string KEY (must be inside portfolio_$yourplugin) or 0/false if you're ok<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_admin_config" onClick="logFunction('has_admin_config', 'plugin.php.source.html#l150')" href="plugin.php.source.html#l150">has_admin_config</a>()&nbsp;&nbsp;
<a href="../../_functions/has_admin_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin need any configuration by the administrator?<BR>
If you override this to return true,<BR>
you &lt;b&gt;must&lt;/b&gt; implement admin_config_form.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_user_config" onClick="logFunction('has_user_config', 'plugin.php.source.html#l162')" href="plugin.php.source.html#l162">has_user_config</a>()&nbsp;&nbsp;
<a href="../../_functions/has_user_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Can this plugin be configured by the user in their profile?<BR>
If you override this to return true,<BR>
you &lt;b&gt;must&lt;/b&gt; implement user_config_form<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_export_config" onClick="logFunction('has_export_config', 'plugin.php.source.html#l174')" href="plugin.php.source.html#l174">has_export_config</a>()&nbsp;&nbsp;
<a href="../../_functions/has_export_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin need configuration during export time?<BR>
If you override this to return true,<BR>
you &lt;b&gt;must&lt;/b&gt; implement export_config_form.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="export_config_validation" onClick="logFunction('export_config_validation', 'plugin.php.source.html#l186')" href="plugin.php.source.html#l186">export_config_validation</a>(array <a href="../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../_functions/export_config_validation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Just like the moodle form validation function.<BR>
This is passed in the data array from the form<BR>
and if a non empty array is returned, form processing will stop.<BR>
</b><BR><b>param:</b> array $data data from form.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="user_config_validation" onClick="logFunction('user_config_validation', 'plugin.php.source.html#l195')" href="plugin.php.source.html#l195">user_config_validation</a>(array <a href="../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../_functions/user_config_validation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Just like the moodle form validation function.<BR>
This is passed in the data array from the form<BR>
and if a non empty array is returned, form processing will stop.<BR>
</b><BR><b>param:</b> array $data data from form.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_export_config" onClick="logFunction('set_export_config', 'plugin.php.source.html#l204')" href="plugin.php.source.html#l204">set_export_config</a>(<a href="../../_variables/config.html">$config</a>)&nbsp;&nbsp;
<a href="../../_functions/set_export_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the export time config from the moodle form.<BR>
You can also use this to set export config that<BR>
isn't actually controlled by the user.<BR>
Eg: things that your subclasses want to keep in state<BR>
across the export.<BR>
Keys must be in get_allowed_export_config<BR>
This is deliberately not final (see boxnet plugin)<BR>
</b><BR><b>param:</b> array $config named array of config items to set.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_export_config" onClick="logFunction('get_export_config', 'plugin.php.source.html#l230')" href="plugin.php.source.html#l230">get_export_config</a>(<a href="../../_variables/key.html">$key</a>)&nbsp;&nbsp;
<a href="../../_functions/get_export_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets an export time config value.<BR>
Subclasses should not override this.<BR>
</b><BR><b>param:</b> string $key field to fetch<br>
<b>return:</b> null|string config value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_export_summary" onClick="logFunction('get_export_summary', 'plugin.php.source.html#l252')" href="plugin.php.source.html#l252">get_export_summary</a>()&nbsp;&nbsp;
<a href="../../_functions/get_export_summary.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>After the user submits their config,<BR>
they're given a confirm screen<BR>
summarising what they've chosen.<BR>
This function should return a table of nice strings =&gt; values<BR>
of what they've chosen<BR>
to be displayed in a table.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_extra_finish_options" onClick="logFunction('get_extra_finish_options', 'plugin.php.source.html#l287')" href="plugin.php.source.html#l287">get_extra_finish_options</a>()&nbsp;&nbsp;
<a href="../../_functions/get_extra_finish_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Once everything is done and the user<BR>
has the finish page displayed to them.<BR>
The base class takes care of printing them<BR>
&quot;return to where you are&quot; or &quot;continue to portfolio&quot; links.<BR>
This function allows for exta finish options from the plugin<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_static_continue_url" onClick="logFunction('get_static_continue_url', 'plugin.php.source.html#l306')" href="plugin.php.source.html#l306">get_static_continue_url</a>()&nbsp;&nbsp;
<a href="../../_functions/get_static_continue_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The url to save in the log as the continue url.<BR>
This is passed through resolve_static_continue_url()<BR>
at display time to the user.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resolve_static_continue_url" onClick="logFunction('resolve_static_continue_url', 'plugin.php.source.html#l317')" href="plugin.php.source.html#l317">resolve_static_continue_url</a>(<a href="../../_variables/url.html">$url</a>)&nbsp;&nbsp;
<a href="../../_functions/resolve_static_continue_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Override this function if you need to add something on to the url<BR>
for post-export continues (eg from the log page).<BR>
Mahara does this, for example, to start a jump session.<BR>
</b><BR><b>param:</b> string $url static continue url<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="user_config_form" onClick="logFunction('user_config_form', 'plugin.php.source.html#l329')" href="plugin.php.source.html#l329">user_config_form</a>(&amp;<a href="../../_variables/mform.html">$mform</a>)&nbsp;&nbsp;
<a href="../../_functions/user_config_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>mform to display to the user in their profile<BR>
if your plugin can't be configured by the user,<BR>
</b><BR><b>param:</b> moodleform $mform passed by reference, add elements to it<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="admin_config_form" onClick="logFunction('admin_config_form', 'plugin.php.source.html#l339')" href="plugin.php.source.html#l339">admin_config_form</a>(&amp;<a href="../../_variables/mform.html">$mform</a>)&nbsp;&nbsp;
<a href="../../_functions/admin_config_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>mform to display to the admin configuring the plugin.<BR>
If your plugin can't be configured by the admin,<BR>
</b><BR><b>param:</b> moodleform $mform passed by reference, add elements to it.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="admin_config_validation" onClick="logFunction('admin_config_validation', 'plugin.php.source.html#l352')" href="plugin.php.source.html#l352">admin_config_validation</a>(<a href="../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../_functions/admin_config_validation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Just like the moodle form validation function,<BR>
this is passed in the data array from the form<BR>
and if a non empty array is returned, form processing will stop.<BR>
</b><BR><b>param:</b> array $data data from form.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="export_config_form" onClick="logFunction('export_config_form', 'plugin.php.source.html#l361')" href="plugin.php.source.html#l361">export_config_form</a>(&amp;<a href="../../_variables/mform.html">$mform</a>)&nbsp;&nbsp;
<a href="../../_functions/export_config_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>mform to display to the user exporting data using this plugin.<BR>
If your plugin doesn't need user input at this time,<BR>
</b><BR><b>param:</b> moodleform $mform passed by reference, add elements to it.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allows_multiple_instances" onClick="logFunction('allows_multiple_instances', 'plugin.php.source.html#l371')" href="plugin.php.source.html#l371">allows_multiple_instances</a>()&nbsp;&nbsp;
<a href="../../_functions/allows_multiple_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Override this if your plugin doesn't allow multiple instances<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="steal_control" onClick="logFunction('steal_control', 'plugin.php.source.html#l380')" href="plugin.php.source.html#l380">steal_control</a>(<a href="../../_variables/stage.html">$stage</a>)&nbsp;&nbsp;
<a href="../../_functions/steal_control.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>If at any point the caller wants to steal control,<BR>
it can, by returning something that isn't false<BR>
in this function<BR>
The controller will redirect to whatever url<BR>
this function returns.<BR>
Afterwards, you can redirect back to portfolio/add.php?postcontrol=1<BR>
and post_control is called before the rest of the processing<BR>
for the stage is done,<BR>
</b><BR><b>param:</b> int $stage to steal control *before* (see constants PARAM_STAGE_*}<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="post_control" onClick="logFunction('post_control', 'plugin.php.source.html#l398')" href="plugin.php.source.html#l398">post_control</a>(<a href="../../_variables/stage.html">$stage</a>, <a href="../../_variables/params.html">$params</a>)&nbsp;&nbsp;
<a href="../../_functions/post_control.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>After a plugin has elected to steal control,<BR>
and control returns to portfolio/add.php|postcontrol=1,<BR>
this function is called, and passed the stage that was stolen control from<BR>
and the request (get and post but not cookie) parameters.<BR>
This is useful for external systems that need to redirect the user back<BR>
with some extra data in the url (like auth tokens etc)<BR>
for an example implementation, see boxnet portfolio plugin.<BR>
</b><BR><b>param:</b> int $stage the stage before control was stolen<br>
<b>param:</b> array $params a merge of $_GET and $_POST<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_instance" onClick="logFunction('create_instance', 'plugin.php.source.html#l412')" href="plugin.php.source.html#l412">create_instance</a>(<a href="../../_variables/plugin.html">$plugin</a>, <a href="../../_variables/name.html">$name</a>, <a href="../../_variables/config.html">$config</a>)&nbsp;&nbsp;
<a href="../../_functions/create_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function creates a new instance of a plugin<BR>
saves it in the database, saves the config<BR>
and returns it.<BR>
You shouldn't need to override it<BR>
unless you're doing something really funky<BR>
</b><BR><b>param:</b> string $plugin portfolio plugin to create<br>
<b>param:</b> string $name name of new instance<br>
<b>param:</b> array $config what the admin config form returned<br>
<b>return:</b> object subclass of portfolio_plugin_base<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'plugin.php.source.html#l445')" href="plugin.php.source.html#l445">__construct</a>(<a href="../../_variables/instanceid.html">$instanceid</a>, <a href="../../_variables/record.html">$record</a>=null)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Construct a plugin instance.<BR>
Subclasses should not need to override this unless they're doing something special<BR>
and should call parent::__construct afterwards.<BR>
</b><BR><b>param:</b> int $instanceid id of plugin instance to construct<br>
<b>param:</b> mixed $record stdclass object or named array - use this if you already have the record to avoid another query<br>
<b>return:</b> portfolio_plugin_base<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="init" onClick="logFunction('init', 'plugin.php.source.html#l476')" href="plugin.php.source.html#l476">init</a>()&nbsp;&nbsp;
<a href="../../_functions/init.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called after __construct - allows plugins to perform initialisation tasks<BR>
without having to override the constructor.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_allowed_config" onClick="logFunction('get_allowed_config', 'plugin.php.source.html#l482')" href="plugin.php.source.html#l482">get_allowed_config</a>()&nbsp;&nbsp;
<a href="../../_functions/get_allowed_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A list of fields that can be configured per instance.<BR>
This is used for the save handlers of the config form<BR>
and as checks in set_config and get_config.<BR>
</b><BR><b>return:</b> array array of strings (config item names)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_allowed_user_config" onClick="logFunction('get_allowed_user_config', 'plugin.php.source.html#l493')" href="plugin.php.source.html#l493">get_allowed_user_config</a>()&nbsp;&nbsp;
<a href="../../_functions/get_allowed_user_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A list of fields that can be configured by the user.<BR>
This is used for the save handlers in the config form<BR>
and as checks in set_user_config and get_user_config.<BR>
</b><BR><b>return:</b> array array of strings (config field names)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_allowed_export_config" onClick="logFunction('get_allowed_export_config', 'plugin.php.source.html#l504')" href="plugin.php.source.html#l504">get_allowed_export_config</a>()&nbsp;&nbsp;
<a href="../../_functions/get_allowed_export_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A list of fields that can be configured by the user.<BR>
This is used for the save handlers in the config form<BR>
and as checks in set_export_config and get_export_config.<BR>
</b><BR><b>return:</b> array array of strings (config field names)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_config" onClick="logFunction('set_config', 'plugin.php.source.html#l515')" href="plugin.php.source.html#l515">set_config</a>(<a href="../../_variables/config.html">$config</a>)&nbsp;&nbsp;
<a href="../../_functions/set_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves (or updates) the config stored in portfolio_instance_config.<BR>
You shouldn't need to override this unless you're doing something funky.<BR>
</b><BR><b>param:</b> array $config array of config items.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_config" onClick="logFunction('get_config', 'plugin.php.source.html#l546')" href="plugin.php.source.html#l546">get_config</a>(<a href="../../_variables/key.html">$key</a>)&nbsp;&nbsp;
<a href="../../_functions/get_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the value of a particular config item<BR>
</b><BR><b>param:</b> string $key key to fetch<br>
<b>return:</b> null|mixed the corresponding value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_config" onClick="logFunction('get_user_config', 'plugin.php.source.html#l563')" href="plugin.php.source.html#l563">get_user_config</a>(<a href="../../_variables/key.html">$key</a>, <a href="../../_variables/userid.html">$userid</a>=0)&nbsp;&nbsp;
<a href="../../_functions/get_user_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the value of a config item for a particular user.<BR>
</b><BR><b>param:</b> string $key key to fetch<br>
<b>param:</b> int $userid id of user (defaults to current)<br>
<b>return:</b> string the corresponding value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_user_config" onClick="logFunction('set_user_config', 'plugin.php.source.html#l597')" href="plugin.php.source.html#l597">set_user_config</a>(<a href="../../_variables/config.html">$config</a>, <a href="../../_variables/userid.html">$userid</a>=0)&nbsp;&nbsp;
<a href="../../_functions/set_user_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets config options for a given user.<BR>
</b><BR><b>param:</b> array $config array containing key/value pairs to set<br>
<b>param:</b> int $userid userid to set config for (defaults to current)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'plugin.php.source.html#l631')" href="plugin.php.source.html#l631">get</a>(<a href="../../_variables/field.html">$field</a>)&nbsp;&nbsp;
<a href="../../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generic getter for properties belonging to this instance<BR>
&lt;b&gt;outside&lt;/b&gt; the subclasses<BR>
like name, visible etc.<BR>
</b><BR><b>param:</b> string $field property name<br>
<b>return:</b> array|string|int|boolean value of the field<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set" onClick="logFunction('set', 'plugin.php.source.html#l647')" href="plugin.php.source.html#l647">set</a>(<a href="../../_variables/field.html">$field</a>, <a href="../../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../../_functions/set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generic setter for properties belonging to this instance<BR>
&lt;b&gt;outside&lt;/b&gt; the subclass<BR>
like name, visible, etc.<BR>
</b><BR><b>param:</b> string $field property's name<br>
<b>param:</b> string $value property's value<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="save" onClick="logFunction('save', 'plugin.php.source.html#l670')" href="plugin.php.source.html#l670">save</a>()&nbsp;&nbsp;
<a href="../../_functions/save.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves stuff that's been stored in the object to the database.<BR>
You shouldn't need to override this<BR>
unless you're doing something really funky.<BR>
and if so, call parent::save when you're done.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'plugin.php.source.html#l692')" href="plugin.php.source.html#l692">delete</a>()&nbsp;&nbsp;
<a href="../../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes everything from the database about this plugin instance.<BR>
You shouldn't need to override this unless you're storing stuff<BR>
in your own tables.&nbsp;&nbsp;and if so, call parent::delete when you're done.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cleanup" onClick="logFunction('cleanup', 'plugin.php.source.html#l709')" href="plugin.php.source.html#l709">cleanup</a>()&nbsp;&nbsp;
<a href="../../_functions/cleanup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Perform any required cleanup functions<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allows_multiple_exports" onClick="logFunction('allows_multiple_exports', 'plugin.php.source.html#l718')" href="plugin.php.source.html#l718">allows_multiple_exports</a>()&nbsp;&nbsp;
<a href="../../_functions/allows_multiple_exports.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Whether this plugin supports multiple exports in the same session<BR>
most plugins should handle this, but some that require a redirect for authentication<BR>
and then don't support dynamically constructed urls to return to (eg box.net)<BR>
need to override this to return false.<BR>
This means that moodle will prevent multiple exports of this *type* of plugin<BR>
occurring in the same session.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="heading_summary" onClick="logFunction('heading_summary', 'plugin.php.source.html#l732')" href="plugin.php.source.html#l732">heading_summary</a>()&nbsp;&nbsp;
<a href="../../_functions/heading_summary.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return a string to put at the header summarising this export<BR>
by default, just the plugin instance name<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_push" onClick="logFunction('is_push', 'plugin.php.source.html#l755')" href="plugin.php.source.html#l755">is_push</a>()&nbsp;&nbsp;
<a href="../../_functions/is_push.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the capability to push<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_push" onClick="logFunction('is_push', 'plugin.php.source.html#l782')" href="plugin.php.source.html#l782">is_push</a>()&nbsp;&nbsp;
<a href="../../_functions/is_push.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>return the enablelity to push<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_base_file_url" onClick="logFunction('get_base_file_url', 'plugin.php.source.html#l791')" href="plugin.php.source.html#l791">get_base_file_url</a>()&nbsp;&nbsp;
<a href="../../_functions/get_base_file_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The base part of the download file url to pull files from<BR>
your plugin might need to add &amp;foo=bar on the end<BR>
</b><BR><b>return:</b> string the url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_file" onClick="logFunction('send_file', 'plugin.php.source.html#l811')" href="plugin.php.source.html#l811">send_file</a>()&nbsp;&nbsp;
<a href="../../_functions/send_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called from portfolio/file.php.<BR>
This function sends the stored file out to the browser.<BR>
The default is to just use send_stored_file,<BR>
but other implementations might do something different,<BR>
for example, send back the file base64 encoded and encrypted<BR>
mahara does this but in the response to an xmlrpc request<BR>
rather than through file.php<BR>
</b><BR></td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
