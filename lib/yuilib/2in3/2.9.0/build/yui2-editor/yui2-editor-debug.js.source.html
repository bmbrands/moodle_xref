<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/yuilib/2in3/2.9.0/build/yui2-editor/yui2-editor-debug.js source</title>
    <link rel="stylesheet" href="../../../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../../../';
subdir='lib/yuilib/2in3/2.9.0/build/yui2-editor';
filename='yui2-editor-debug.js.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/yuilib/2in3/2.9.0/build/yui2-editor/</a> -> <a href="yui2-editor-debug.js.html">yui2-editor-debug.js</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="yui2-editor-debug.js.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="yui2-editor-debug.js.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  YUI.<a class="function" onClick="logFunction('add')" href="../../../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('yui2-simpleeditor', function(Y) { Y.use('yui2-editor'); }, '3.3.0' ,{&quot;requires&quot;: [&quot;yui2-yahoo&quot;, &quot;yui2-dom&quot;, &quot;yui2-skin-sam-simpleeditor&quot;, &quot;yui2-event&quot;, &quot;yui2-element&quot;], &quot;optional&quot;: [&quot;yui2-containercore&quot;, &quot;yui2-dragdrop&quot;, &quot;yui2-skin-sam-button&quot;, &quot;yui2-skin-sam-menu&quot;, &quot;yui2-menu&quot;, &quot;yui2-button&quot;, &quot;yui2-animation&quot;]});
<a name="l2"><span class="linenum">   2</span></a>  YUI.<a class="function" onClick="logFunction('add')" href="../../../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('yui2-editor', function(Y) {
<a name="l3"><span class="linenum">   3</span></a>      var YAHOO    = Y.YUI2;
<a name="l4"><span class="linenum">   4</span></a>      <span class="comment">/*</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">Copyright (c) 2011, Yahoo! Inc. All rights reserved.</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">Code licensed under the BSD License:</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">http://developer.yahoo.com/yui/license.html</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">version: 2.9.0</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">*/</span>
<a name="l10"><span class="linenum">  10</span></a>  (function() {
<a name="l11"><span class="linenum">  11</span></a>  var Dom = YAHOO.util.Dom,
<a name="l12"><span class="linenum">  12</span></a>      Event = YAHOO.util.Event,
<a name="l13"><span class="linenum">  13</span></a>      Lang = YAHOO.lang;
<a name="l14"><span class="linenum">  14</span></a>      <span class="comment">/**</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">     * @module editor    </span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">     * @description &lt;p&gt;Creates a rich custom Toolbar Button. Primarily used with the Rich Text Editor's Toolbar&lt;/p&gt;</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">     * @class ToolbarButtonAdvanced</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">     * @namespace YAHOO.widget</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment">     * @requires yahoo, dom, element, event, container_core, menu, button</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment">     * </span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment">     * Provides a toolbar button based on the button and menu widgets.</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment">     * @constructor</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment">     * @class ToolbarButtonAdvanced</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">     * @param {String/HTMLElement} el The element to turn into a button.</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">     * @param {Object} attrs Object liternal containing configuration parameters.</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">    */</span>
<a name="l27"><span class="linenum">  27</span></a>      if (YAHOO.widget.Button) {
<a name="l28"><span class="linenum">  28</span></a>          YAHOO.widget.ToolbarButtonAdvanced = YAHOO.widget.Button;
<a name="l29"><span class="linenum">  29</span></a>          <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">        * @property buttonType</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">        * @private</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">        * @description Tells if the Button is a Rich Button or a Simple Button</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">        */</span>
<a name="l34"><span class="linenum">  34</span></a>          YAHOO.widget.ToolbarButtonAdvanced.prototype.buttonType = 'rich';
<a name="l35"><span class="linenum">  35</span></a>          <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">        * @method checkValue</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">        * @param {String} value The value of the option that we want to mark as selected</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">        * @description Select an option by value</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">        */</span>
<a name="l40"><span class="linenum">  40</span></a>          YAHOO.widget.ToolbarButtonAdvanced.prototype.checkValue = function(value) {
<a name="l41"><span class="linenum">  41</span></a>              var _menuItems = this.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('getItems')" href="../../../../../../_functions/getitems.html" onMouseOver="funcPopup(event,'getitems')">getItems</a>();
<a name="l42"><span class="linenum">  42</span></a>              if (_menuItems.length === 0) {
<a name="l43"><span class="linenum">  43</span></a>                  this.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>()._onBeforeShow();
<a name="l44"><span class="linenum">  44</span></a>                  _menuItems = this.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('getItems')" href="../../../../../../_functions/getitems.html" onMouseOver="funcPopup(event,'getitems')">getItems</a>();
<a name="l45"><span class="linenum">  45</span></a>              }
<a name="l46"><span class="linenum">  46</span></a>              for (var i = 0; i &lt; _menuItems.length; i++) {
<a name="l47"><span class="linenum">  47</span></a>                  _menuItems[i].cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('checked', false);
<a name="l48"><span class="linenum">  48</span></a>                  if (_menuItems[i].value == value) {
<a name="l49"><span class="linenum">  49</span></a>                      _menuItems[i].cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('checked', true);
<a name="l50"><span class="linenum">  50</span></a>                  }
<a name="l51"><span class="linenum">  51</span></a>              }      
<a name="l52"><span class="linenum">  52</span></a>          };
<a name="l53"><span class="linenum">  53</span></a>      } else {
<a name="l54"><span class="linenum">  54</span></a>          YAHOO.widget.ToolbarButtonAdvanced = function() {};
<a name="l55"><span class="linenum">  55</span></a>      }
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>      <span class="comment">/**</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * @description &lt;p&gt;Creates a basic custom Toolbar Button. Primarily used with the Rich Text Editor's Toolbar&lt;/p&gt;&lt;p&gt;Provides a toolbar button based on the button and menu widgets, &amp;lt;select&amp;gt; elements are used in place of menu's.&lt;/p&gt;</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * @class ToolbarButton</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * @namespace YAHOO.widget</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * @requires yahoo, dom, element, event</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @extends YAHOO.util.Element</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * </span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * </span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * @constructor</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * @param {String/HTMLElement} el The element to turn into a button.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @param {Object} attrs Object liternal containing configuration parameters.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    */</span>
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      YAHOO.widget.ToolbarButton = function(el, attrs) {
<a name="l72"><span class="linenum">  72</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('ToolbarButton Initalizing', 'info', 'ToolbarButton');
<a name="l73"><span class="linenum">  73</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>(arguments.length + ' arguments passed to constructor', 'info', 'Toolbar');
<a name="l74"><span class="linenum">  74</span></a>          
<a name="l75"><span class="linenum">  75</span></a>          if (Lang.isObject(arguments[0]) &amp;&amp; !Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el).nodeType) {
<a name="l76"><span class="linenum">  76</span></a>              attrs = el;
<a name="l77"><span class="linenum">  77</span></a>          }
<a name="l78"><span class="linenum">  78</span></a>          var local_attrs = (attrs || {});
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>          var oConfig = {
<a name="l81"><span class="linenum">  81</span></a>              element: null,
<a name="l82"><span class="linenum">  82</span></a>              attributes: local_attrs
<a name="l83"><span class="linenum">  83</span></a>          };
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>          if (!oConfig.attributes.type) {
<a name="l86"><span class="linenum">  86</span></a>              oConfig.attributes.type = 'push';
<a name="l87"><span class="linenum">  87</span></a>          }
<a name="l88"><span class="linenum">  88</span></a>          
<a name="l89"><span class="linenum">  89</span></a>          oConfig.element = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l90"><span class="linenum">  90</span></a>          oConfig.element.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('unselectable', 'on');
<a name="l91"><span class="linenum">  91</span></a>          oConfig.element.className = 'yui-button yui-' + oConfig.attributes.type + '-button';
<a name="l92"><span class="linenum">  92</span></a>          oConfig.element.innerHTML = '&lt;span class=&quot;first-child&quot;&gt;&lt;a href=&quot;#&quot;&gt;LABEL&lt;/a&gt;&lt;/span&gt;';
<a name="l93"><span class="linenum">  93</span></a>          oConfig.element.firstChild.firstChild.tabIndex = '-1';
<a name="l94"><span class="linenum">  94</span></a>          oConfig.attributes.id = (oConfig.attributes.id || Dom.<a class="function" onClick="logFunction('generateId')" href="../../../../../../_functions/generateid.html" onMouseOver="funcPopup(event,'generateid')">generateId</a>());
<a name="l95"><span class="linenum">  95</span></a>          oConfig.element.id = oConfig.attributes.id;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>          YAHOO.widget.ToolbarButton.superclass.constructor.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, oConfig.element, oConfig.attributes);
<a name="l98"><span class="linenum">  98</span></a>      };
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>      YAHOO.<a class="function" onClick="logFunction('extend')" href="../../../../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(YAHOO.widget.ToolbarButton, YAHOO.util.Element, {
<a name="l101"><span class="linenum"> 101</span></a>          <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">        * @property buttonType</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">        * @private</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">        * @description Tells if the Button is a Rich Button or a Simple Button</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">        */</span>
<a name="l106"><span class="linenum"> 106</span></a>          buttonType: 'normal',
<a name="l107"><span class="linenum"> 107</span></a>          <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">        * @method _handleMouseOver</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">        * @private</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">        * @description Adds classes to the button elements on mouseover (hover)</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">        */</span>
<a name="l112"><span class="linenum"> 112</span></a>          _handleMouseOver: function() {
<a name="l113"><span class="linenum"> 113</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l114"><span class="linenum"> 114</span></a>                  this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('yui-button-hover');
<a name="l115"><span class="linenum"> 115</span></a>                  this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('yui-' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') + '-button-hover');
<a name="l116"><span class="linenum"> 116</span></a>              }
<a name="l117"><span class="linenum"> 117</span></a>          },
<a name="l118"><span class="linenum"> 118</span></a>          <span class="comment">/**</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">        * @method _handleMouseOut</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">        * @private</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">        * @description Removes classes from the button elements on mouseout (hover)</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">        */</span>
<a name="l123"><span class="linenum"> 123</span></a>          _handleMouseOut: function() {
<a name="l124"><span class="linenum"> 124</span></a>              this.removeClass('yui-button-hover');
<a name="l125"><span class="linenum"> 125</span></a>              this.removeClass('yui-' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') + '-button-hover');
<a name="l126"><span class="linenum"> 126</span></a>          },
<a name="l127"><span class="linenum"> 127</span></a>          <span class="comment">/**</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">        * @method checkValue</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">        * @param {String} value The value of the option that we want to mark as selected</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">        * @description Select an option by value</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">        */</span>
<a name="l132"><span class="linenum"> 132</span></a>          checkValue: function(value) {
<a name="l133"><span class="linenum"> 133</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') == 'menu') {
<a name="l134"><span class="linenum"> 134</span></a>                  var opts = this._button.options;
<a name="l135"><span class="linenum"> 135</span></a>                  if (opts) {
<a name="l136"><span class="linenum"> 136</span></a>                      for (var i = 0; i &lt; opts.length; i++) {
<a name="l137"><span class="linenum"> 137</span></a>                          if (opts[i].value == value) {
<a name="l138"><span class="linenum"> 138</span></a>                              opts.selectedIndex = i;
<a name="l139"><span class="linenum"> 139</span></a>                          }
<a name="l140"><span class="linenum"> 140</span></a>                      }
<a name="l141"><span class="linenum"> 141</span></a>                  }
<a name="l142"><span class="linenum"> 142</span></a>              }
<a name="l143"><span class="linenum"> 143</span></a>          },
<a name="l144"><span class="linenum"> 144</span></a>          <span class="comment">/** </span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">        * @method init</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">        * @description The ToolbarButton class's initialization method</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">        */</span>        
<a name="l148"><span class="linenum"> 148</span></a>          init: function(p_oElement, p_oAttributes) {
<a name="l149"><span class="linenum"> 149</span></a>              YAHOO.widget.ToolbarButton.superclass.init.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, p_oElement, p_oAttributes);
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('mouseover', this._handleMouseOver, this, true);
<a name="l152"><span class="linenum"> 152</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('mouseout', this._handleMouseOut, this, true);
<a name="l153"><span class="linenum"> 153</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', function(ev) {
<a name="l154"><span class="linenum"> 154</span></a>                  Event.stopEvent(ev);
<a name="l155"><span class="linenum"> 155</span></a>                  return false;
<a name="l156"><span class="linenum"> 156</span></a>              }, this, true);
<a name="l157"><span class="linenum"> 157</span></a>          },
<a name="l158"><span class="linenum"> 158</span></a>          <span class="comment">/**</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">        * @method initAttributes</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">        * @description Initializes all of the configuration attributes used to create </span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">        * the toolbar.</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">        * @param {Object} attr Object literal specifying a set of </span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">        * configuration attributes used to create the toolbar.</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">        */</span>        
<a name="l165"><span class="linenum"> 165</span></a>          initAttributes: function(attr) {
<a name="l166"><span class="linenum"> 166</span></a>              YAHOO.widget.ToolbarButton.superclass.initAttributes.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, attr);
<a name="l167"><span class="linenum"> 167</span></a>              <span class="comment">/**</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">            * @attribute value</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">            * @description The value of the button</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">            * @type String</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">            */</span>            
<a name="l172"><span class="linenum"> 172</span></a>              this.setAttributeConfig('value', {
<a name="l173"><span class="linenum"> 173</span></a>                  value: attr.value
<a name="l174"><span class="linenum"> 174</span></a>              });
<a name="l175"><span class="linenum"> 175</span></a>              <span class="comment">/**</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">            * @attribute menu</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">            * @description The menu attribute, see YAHOO.widget.Button</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">            * @type Object</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">            */</span>            
<a name="l180"><span class="linenum"> 180</span></a>              this.setAttributeConfig('menu', {
<a name="l181"><span class="linenum"> 181</span></a>                  value: attr.menu || false
<a name="l182"><span class="linenum"> 182</span></a>              });
<a name="l183"><span class="linenum"> 183</span></a>              <span class="comment">/**</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">            * @attribute type</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">            * @description The type of button to create: push, menu, color, select, spin</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">            * @type String</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">            */</span>            
<a name="l188"><span class="linenum"> 188</span></a>              this.setAttributeConfig('type', {
<a name="l189"><span class="linenum"> 189</span></a>                  value: attr.type,
<a name="l190"><span class="linenum"> 190</span></a>                  writeOnce: true,
<a name="l191"><span class="linenum"> 191</span></a>                  method: function(type) {
<a name="l192"><span class="linenum"> 192</span></a>                      var el, opt;
<a name="l193"><span class="linenum"> 193</span></a>                      if (!this._button) {
<a name="l194"><span class="linenum"> 194</span></a>                          this._button = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').getElementsByTagName('a')[0];
<a name="l195"><span class="linenum"> 195</span></a>                      }
<a name="l196"><span class="linenum"> 196</span></a>                      switch (type) {
<a name="l197"><span class="linenum"> 197</span></a>                          case 'select':
<a name="l198"><span class="linenum"> 198</span></a>                          case 'menu':
<a name="l199"><span class="linenum"> 199</span></a>                              el = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('select');
<a name="l200"><span class="linenum"> 200</span></a>                              el.id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id');
<a name="l201"><span class="linenum"> 201</span></a>                              var menu = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('menu');
<a name="l202"><span class="linenum"> 202</span></a>                              for (var i = 0; i &lt; menu.length; i++) {
<a name="l203"><span class="linenum"> 203</span></a>                                  opt = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('option');
<a name="l204"><span class="linenum"> 204</span></a>                                  opt.innerHTML = menu[i].text;
<a name="l205"><span class="linenum"> 205</span></a>                                  opt.value = menu[i].value;
<a name="l206"><span class="linenum"> 206</span></a>                                  if (menu[i].checked) {
<a name="l207"><span class="linenum"> 207</span></a>                                      opt.selected = true;
<a name="l208"><span class="linenum"> 208</span></a>                                  }
<a name="l209"><span class="linenum"> 209</span></a>                                  el.appendChild(opt);
<a name="l210"><span class="linenum"> 210</span></a>                              }
<a name="l211"><span class="linenum"> 211</span></a>                              this._button.parentNode.replaceChild(el, this._button);
<a name="l212"><span class="linenum"> 212</span></a>                              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(el, 'change', this._handleSelect, this, true);
<a name="l213"><span class="linenum"> 213</span></a>                              this._button = el;
<a name="l214"><span class="linenum"> 214</span></a>                              break;
<a name="l215"><span class="linenum"> 215</span></a>                      }
<a name="l216"><span class="linenum"> 216</span></a>                  }
<a name="l217"><span class="linenum"> 217</span></a>              });
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>              <span class="comment">/**</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">            * @attribute disabled</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">            * @description Set the button into a disabled state</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">            * @type String</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">            */</span>            
<a name="l224"><span class="linenum"> 224</span></a>              this.setAttributeConfig('disabled', {
<a name="l225"><span class="linenum"> 225</span></a>                  value: attr.disabled || false,
<a name="l226"><span class="linenum"> 226</span></a>                  method: function(disabled) {
<a name="l227"><span class="linenum"> 227</span></a>                      if (disabled) {
<a name="l228"><span class="linenum"> 228</span></a>                          this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('yui-button-disabled');
<a name="l229"><span class="linenum"> 229</span></a>                          this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('yui-' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') + '-button-disabled');
<a name="l230"><span class="linenum"> 230</span></a>                      } else {
<a name="l231"><span class="linenum"> 231</span></a>                          this.removeClass('yui-button-disabled');
<a name="l232"><span class="linenum"> 232</span></a>                          this.removeClass('yui-' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') + '-button-disabled');
<a name="l233"><span class="linenum"> 233</span></a>                      }
<a name="l234"><span class="linenum"> 234</span></a>                      if ((this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') == 'menu') || (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') == 'select')) {
<a name="l235"><span class="linenum"> 235</span></a>                          this._button.disabled = disabled;
<a name="l236"><span class="linenum"> 236</span></a>                      }
<a name="l237"><span class="linenum"> 237</span></a>                  }
<a name="l238"><span class="linenum"> 238</span></a>              });
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>              <span class="comment">/**</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">            * @attribute label</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">            * @description The text label for the button</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">            * @type String</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">            */</span>            
<a name="l245"><span class="linenum"> 245</span></a>              this.setAttributeConfig('label', {
<a name="l246"><span class="linenum"> 246</span></a>                  value: attr.label,
<a name="l247"><span class="linenum"> 247</span></a>                  method: function(label) {
<a name="l248"><span class="linenum"> 248</span></a>                      if (!this._button) {
<a name="l249"><span class="linenum"> 249</span></a>                          this._button = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').getElementsByTagName('a')[0];
<a name="l250"><span class="linenum"> 250</span></a>                      }
<a name="l251"><span class="linenum"> 251</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('type') == 'push') {
<a name="l252"><span class="linenum"> 252</span></a>                          this._button.innerHTML = label;
<a name="l253"><span class="linenum"> 253</span></a>                      }
<a name="l254"><span class="linenum"> 254</span></a>                  }
<a name="l255"><span class="linenum"> 255</span></a>              });
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>              <span class="comment">/**</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">            * @attribute title</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">            * @description The title of the button</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">            * @type String</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">            */</span>            
<a name="l262"><span class="linenum"> 262</span></a>              this.setAttributeConfig('title', {
<a name="l263"><span class="linenum"> 263</span></a>                  value: attr.title
<a name="l264"><span class="linenum"> 264</span></a>              });
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>              <span class="comment">/**</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">            * @config container</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">            * @description The container that the button is rendered to, handled by Toolbar</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">            * @type String</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">            */</span>            
<a name="l271"><span class="linenum"> 271</span></a>              this.setAttributeConfig('container', {
<a name="l272"><span class="linenum"> 272</span></a>                  value: null,
<a name="l273"><span class="linenum"> 273</span></a>                  writeOnce: true,
<a name="l274"><span class="linenum"> 274</span></a>                  method: function(cont) {
<a name="l275"><span class="linenum"> 275</span></a>                      this.<a class="function" onClick="logFunction('appendTo')" href="../../../../../../_functions/appendto.html" onMouseOver="funcPopup(event,'appendto')">appendTo</a>(cont);
<a name="l276"><span class="linenum"> 276</span></a>                  }
<a name="l277"><span class="linenum"> 277</span></a>              });
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>          },
<a name="l280"><span class="linenum"> 280</span></a>          <span class="comment">/** </span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">        * @private</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">        * @method _handleSelect</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">        * @description The event fired when a change event gets fired on a select element</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">        * @param {Event} ev The change event.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">        */</span>        
<a name="l286"><span class="linenum"> 286</span></a>          _handleSelect: function(ev) {
<a name="l287"><span class="linenum"> 287</span></a>              var tar = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l288"><span class="linenum"> 288</span></a>              var value = tar.options[tar.selectedIndex].value;
<a name="l289"><span class="linenum"> 289</span></a>              this.fireEvent('change', {type: 'change', value: value });
<a name="l290"><span class="linenum"> 290</span></a>          },
<a name="l291"><span class="linenum"> 291</span></a>          <span class="comment">/** </span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">        * @method getMenu</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">        * @description A stub function to mimic YAHOO.widget.Button's getMenu method</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">        */</span>        
<a name="l295"><span class="linenum"> 295</span></a>          getMenu: function() {
<a name="l296"><span class="linenum"> 296</span></a>              return this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('menu');
<a name="l297"><span class="linenum"> 297</span></a>          },
<a name="l298"><span class="linenum"> 298</span></a>          <span class="comment">/** </span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">        * @method destroy</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">        * @description Destroy the button</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">        */</span>        
<a name="l302"><span class="linenum"> 302</span></a>          destroy: function() {
<a name="l303"><span class="linenum"> 303</span></a>              Event.purgeElement(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), true);
<a name="l304"><span class="linenum"> 304</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">            //Brutal Object Destroy</span>
<a name="l306"><span class="linenum"> 306</span></a>              for (var i in this) {
<a name="l307"><span class="linenum"> 307</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(this, i)) {
<a name="l308"><span class="linenum"> 308</span></a>                      this[i] = null;
<a name="l309"><span class="linenum"> 309</span></a>                  }
<a name="l310"><span class="linenum"> 310</span></a>              }       
<a name="l311"><span class="linenum"> 311</span></a>          },
<a name="l312"><span class="linenum"> 312</span></a>          <span class="comment">/** </span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">        * @method fireEvent</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">        * @description Overridden fireEvent method to prevent DOM events from firing if the button is disabled.</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">        */</span>        
<a name="l316"><span class="linenum"> 316</span></a>          fireEvent: function(p_sType, p_aArgs) {
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">            //  Disabled buttons should not respond to DOM events</span>
<a name="l318"><span class="linenum"> 318</span></a>              if (this.DOM_EVENTS[p_sType] &amp;&amp; this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l319"><span class="linenum"> 319</span></a>                  Event.stopEvent(p_aArgs);
<a name="l320"><span class="linenum"> 320</span></a>                  return;
<a name="l321"><span class="linenum"> 321</span></a>              }
<a name="l322"><span class="linenum"> 322</span></a>          
<a name="l323"><span class="linenum"> 323</span></a>              YAHOO.widget.ToolbarButton.superclass.fireEvent.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, p_sType, p_aArgs);
<a name="l324"><span class="linenum"> 324</span></a>          },
<a name="l325"><span class="linenum"> 325</span></a>          <span class="comment">/**</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">        * @method toString</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">        * @description Returns a string representing the toolbar.</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">        * @return {String}</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">        */</span>        
<a name="l330"><span class="linenum"> 330</span></a>          toString: function() {
<a name="l331"><span class="linenum"> 331</span></a>              return 'ToolbarButton (' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + ')';
<a name="l332"><span class="linenum"> 332</span></a>          }
<a name="l333"><span class="linenum"> 333</span></a>          
<a name="l334"><span class="linenum"> 334</span></a>      });
<a name="l335"><span class="linenum"> 335</span></a>  })();
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">/**</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> * @module editor</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * @description &lt;p&gt;Creates a rich Toolbar widget based on Button. Primarily used with the Rich Text Editor&lt;/p&gt;</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> * @namespace YAHOO.widget</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment"> * @requires yahoo, dom, element, event, toolbarbutton</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment"> * @optional container_core, dragdrop</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment"> */</span>
<a name="l343"><span class="linenum"> 343</span></a>  (function() {
<a name="l344"><span class="linenum"> 344</span></a>  var Dom = YAHOO.util.Dom,
<a name="l345"><span class="linenum"> 345</span></a>      Event = YAHOO.util.Event,
<a name="l346"><span class="linenum"> 346</span></a>      Lang = YAHOO.lang;
<a name="l347"><span class="linenum"> 347</span></a>      
<a name="l348"><span class="linenum"> 348</span></a>      var getButton = function(id) {
<a name="l349"><span class="linenum"> 349</span></a>          var button = id;
<a name="l350"><span class="linenum"> 350</span></a>          if (Lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(id)) {
<a name="l351"><span class="linenum"> 351</span></a>              button = this.getButtonById(id);
<a name="l352"><span class="linenum"> 352</span></a>          }
<a name="l353"><span class="linenum"> 353</span></a>          if (Lang.<a class="function" onClick="logFunction('isNumber')" href="../../../../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(id)) {
<a name="l354"><span class="linenum"> 354</span></a>              button = this.getButtonByIndex(id);
<a name="l355"><span class="linenum"> 355</span></a>          }
<a name="l356"><span class="linenum"> 356</span></a>          if ((!(button instanceof YAHOO.widget.ToolbarButton)) &amp;&amp; (!(button instanceof YAHOO.widget.ToolbarButtonAdvanced))) {
<a name="l357"><span class="linenum"> 357</span></a>              button = this.getButtonByValue(id);
<a name="l358"><span class="linenum"> 358</span></a>          }
<a name="l359"><span class="linenum"> 359</span></a>          if ((button instanceof YAHOO.widget.ToolbarButton) || (button instanceof YAHOO.widget.ToolbarButtonAdvanced)) {
<a name="l360"><span class="linenum"> 360</span></a>              return button;
<a name="l361"><span class="linenum"> 361</span></a>          }
<a name="l362"><span class="linenum"> 362</span></a>          return false;
<a name="l363"><span class="linenum"> 363</span></a>      };
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>      <span class="comment">/**</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * Provides a rich toolbar widget based on the button and menu widgets</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     * @constructor</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     * @class Toolbar</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     * @extends YAHOO.util.Element</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     * @param {String/HTMLElement} el The element to turn into a toolbar.</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     * @param {Object} attrs Object liternal containing configuration parameters.</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">    */</span>
<a name="l373"><span class="linenum"> 373</span></a>      YAHOO.widget.Toolbar = function(el, attrs) {
<a name="l374"><span class="linenum"> 374</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Initalizing', 'info', 'Toolbar');
<a name="l375"><span class="linenum"> 375</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>(arguments.length + ' arguments passed to constructor', 'info', 'Toolbar');
<a name="l376"><span class="linenum"> 376</span></a>          
<a name="l377"><span class="linenum"> 377</span></a>          if (Lang.isObject(arguments[0]) &amp;&amp; !Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el).nodeType) {
<a name="l378"><span class="linenum"> 378</span></a>              attrs = el;
<a name="l379"><span class="linenum"> 379</span></a>          }
<a name="l380"><span class="linenum"> 380</span></a>          var local_attrs = {};
<a name="l381"><span class="linenum"> 381</span></a>          if (attrs) {
<a name="l382"><span class="linenum"> 382</span></a>              Lang.augmentObject(local_attrs, attrs); <span class="comment">//Break the config reference</span>
<a name="l383"><span class="linenum"> 383</span></a>          }
<a name="l384"><span class="linenum"> 384</span></a>          
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>          var oConfig = {
<a name="l387"><span class="linenum"> 387</span></a>              element: null,
<a name="l388"><span class="linenum"> 388</span></a>              attributes: local_attrs
<a name="l389"><span class="linenum"> 389</span></a>          };
<a name="l390"><span class="linenum"> 390</span></a>          
<a name="l391"><span class="linenum"> 391</span></a>          
<a name="l392"><span class="linenum"> 392</span></a>          if (Lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(el) &amp;&amp; Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el)) {
<a name="l393"><span class="linenum"> 393</span></a>              oConfig.element = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el);
<a name="l394"><span class="linenum"> 394</span></a>          } else if (Lang.isObject(el) &amp;&amp; Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el) &amp;&amp; Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el).nodeType) {  
<a name="l395"><span class="linenum"> 395</span></a>              oConfig.element = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(el);
<a name="l396"><span class="linenum"> 396</span></a>          }
<a name="l397"><span class="linenum"> 397</span></a>          
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>          if (!oConfig.element) {
<a name="l400"><span class="linenum"> 400</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('No element defined, creating toolbar container', 'warn', 'Toolbar');
<a name="l401"><span class="linenum"> 401</span></a>              oConfig.element = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l402"><span class="linenum"> 402</span></a>              oConfig.element.id = Dom.<a class="function" onClick="logFunction('generateId')" href="../../../../../../_functions/generateid.html" onMouseOver="funcPopup(event,'generateid')">generateId</a>();
<a name="l403"><span class="linenum"> 403</span></a>              
<a name="l404"><span class="linenum"> 404</span></a>              if (local_attrs.container &amp;&amp; Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(local_attrs.container)) {
<a name="l405"><span class="linenum"> 405</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Container found in config appending to it (' + Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(local_attrs.container).id + ')', 'info', 'Toolbar');
<a name="l406"><span class="linenum"> 406</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(local_attrs.container).appendChild(oConfig.element);
<a name="l407"><span class="linenum"> 407</span></a>              }
<a name="l408"><span class="linenum"> 408</span></a>          }
<a name="l409"><span class="linenum"> 409</span></a>          
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>          if (!oConfig.element.id) {
<a name="l412"><span class="linenum"> 412</span></a>              oConfig.element.id = ((Lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(el)) ? el : Dom.<a class="function" onClick="logFunction('generateId')" href="../../../../../../_functions/generateid.html" onMouseOver="funcPopup(event,'generateid')">generateId</a>());
<a name="l413"><span class="linenum"> 413</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('No element ID defined for toolbar container, creating..', 'warn', 'Toolbar');
<a name="l414"><span class="linenum"> 414</span></a>          }
<a name="l415"><span class="linenum"> 415</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Initing toolbar with id: ' + oConfig.element.id, 'info', 'Toolbar');
<a name="l416"><span class="linenum"> 416</span></a>          
<a name="l417"><span class="linenum"> 417</span></a>          var fs = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('fieldset');
<a name="l418"><span class="linenum"> 418</span></a>          var lg = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('legend');
<a name="l419"><span class="linenum"> 419</span></a>          lg.innerHTML = 'Toolbar';
<a name="l420"><span class="linenum"> 420</span></a>          fs.appendChild(lg);
<a name="l421"><span class="linenum"> 421</span></a>          
<a name="l422"><span class="linenum"> 422</span></a>          var cont = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l423"><span class="linenum"> 423</span></a>          oConfig.attributes.cont = cont;
<a name="l424"><span class="linenum"> 424</span></a>          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(cont, 'yui-toolbar-subcont');
<a name="l425"><span class="linenum"> 425</span></a>          fs.appendChild(cont);
<a name="l426"><span class="linenum"> 426</span></a>          oConfig.element.appendChild(fs);
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>          oConfig.element.tabIndex = -1;
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>          
<a name="l431"><span class="linenum"> 431</span></a>          oConfig.attributes.element = oConfig.element;
<a name="l432"><span class="linenum"> 432</span></a>          oConfig.attributes.id = oConfig.element.id;
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>          this._configuredButtons = [];
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>          YAHOO.widget.Toolbar.superclass.constructor.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, oConfig.element, oConfig.attributes);
<a name="l437"><span class="linenum"> 437</span></a>           
<a name="l438"><span class="linenum"> 438</span></a>      };
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>      YAHOO.<a class="function" onClick="logFunction('extend')" href="../../../../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(YAHOO.widget.Toolbar, YAHOO.util.Element, {
<a name="l441"><span class="linenum"> 441</span></a>          <span class="comment">/**</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">        * @protected</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">        * @property _configuredButtons</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">        * @type Array</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">        */</span>
<a name="l446"><span class="linenum"> 446</span></a>          _configuredButtons: null,
<a name="l447"><span class="linenum"> 447</span></a>          <span class="comment">/**</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">        * @method _addMenuClasses</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">        * @private</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">        * @description This method is called from Menu's renderEvent to add a few more classes to the menu items</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">        * @param {String} ev The event that fired.</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">        * @param {Array} na Array of event information.</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        * @param {Object} o Button config object. </span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">        */</span>
<a name="l455"><span class="linenum"> 455</span></a>          _addMenuClasses: function(ev, na, o) {
<a name="l456"><span class="linenum"> 456</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.element, 'yui-toolbar-' + o.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value') + '-menu');
<a name="l457"><span class="linenum"> 457</span></a>              if (Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(o._button.parentNode.parentNode, 'yui-toolbar-select')) {
<a name="l458"><span class="linenum"> 458</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.element, 'yui-toolbar-select-menu');
<a name="l459"><span class="linenum"> 459</span></a>              }
<a name="l460"><span class="linenum"> 460</span></a>              var items = this.<a class="function" onClick="logFunction('getItems')" href="../../../../../../_functions/getitems.html" onMouseOver="funcPopup(event,'getitems')">getItems</a>();
<a name="l461"><span class="linenum"> 461</span></a>              for (var i = 0; i &lt; items.length; i++) {
<a name="l462"><span class="linenum"> 462</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(items[i].element, 'yui-toolbar-' + o.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value') + '-' + ((items[i].value) ? items[i].value.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-').toLowerCase() : items[i]._oText.nodeValue.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-').toLowerCase()));
<a name="l463"><span class="linenum"> 463</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(items[i].element, 'yui-toolbar-' + o.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value') + '-' + ((items[i].value) ? items[i].value.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-') : items[i]._oText.nodeValue.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-')));
<a name="l464"><span class="linenum"> 464</span></a>              }
<a name="l465"><span class="linenum"> 465</span></a>          },
<a name="l466"><span class="linenum"> 466</span></a>          <span class="comment">/** </span>
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">        * @property buttonType</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">        * @description The default button to use</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">        * @type Object</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">        */</span>
<a name="l471"><span class="linenum"> 471</span></a>          buttonType: YAHOO.widget.ToolbarButton,
<a name="l472"><span class="linenum"> 472</span></a>          <span class="comment">/** </span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">        * @property dd</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">        * @description The DragDrop instance associated with the Toolbar</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">        * @type Object</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">        */</span>
<a name="l477"><span class="linenum"> 477</span></a>          dd: null,
<a name="l478"><span class="linenum"> 478</span></a>          <span class="comment">/** </span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">        * @property _colorData</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">        * @description Object reference containing colors hex and text values.</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">        * @type Object</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">        */</span>
<a name="l483"><span class="linenum"> 483</span></a>          _colorData: {
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">/* {{{ _colorData */</span>
<a name="l485"><span class="linenum"> 485</span></a>      '#111111': 'Obsidian',
<a name="l486"><span class="linenum"> 486</span></a>      '#2D2D2D': 'Dark Gray',
<a name="l487"><span class="linenum"> 487</span></a>      '#434343': 'Shale',
<a name="l488"><span class="linenum"> 488</span></a>      '#5B5B5B': 'Flint',
<a name="l489"><span class="linenum"> 489</span></a>      '#737373': 'Gray',
<a name="l490"><span class="linenum"> 490</span></a>      '#8B8B8B': 'Concrete',
<a name="l491"><span class="linenum"> 491</span></a>      '#A2A2A2': 'Gray',
<a name="l492"><span class="linenum"> 492</span></a>      '#B9B9B9': 'Titanium',
<a name="l493"><span class="linenum"> 493</span></a>      '#000000': 'Black',
<a name="l494"><span class="linenum"> 494</span></a>      '#D0D0D0': 'Light Gray',
<a name="l495"><span class="linenum"> 495</span></a>      '#E6E6E6': 'Silver',
<a name="l496"><span class="linenum"> 496</span></a>      '#FFFFFF': 'White',
<a name="l497"><span class="linenum"> 497</span></a>      '#BFBF00': 'Pumpkin',
<a name="l498"><span class="linenum"> 498</span></a>      '#FFFF00': 'Yellow',
<a name="l499"><span class="linenum"> 499</span></a>      '#FFFF40': 'Banana',
<a name="l500"><span class="linenum"> 500</span></a>      '#FFFF80': 'Pale Yellow',
<a name="l501"><span class="linenum"> 501</span></a>      '#FFFFBF': 'Butter',
<a name="l502"><span class="linenum"> 502</span></a>      '#525330': 'Raw Siena',
<a name="l503"><span class="linenum"> 503</span></a>      '#898A49': 'Mildew',
<a name="l504"><span class="linenum"> 504</span></a>      '#AEA945': 'Olive',
<a name="l505"><span class="linenum"> 505</span></a>      '#7F7F00': 'Paprika',
<a name="l506"><span class="linenum"> 506</span></a>      '#C3BE71': 'Earth',
<a name="l507"><span class="linenum"> 507</span></a>      '#E0DCAA': 'Khaki',
<a name="l508"><span class="linenum"> 508</span></a>      '#FCFAE1': 'Cream',
<a name="l509"><span class="linenum"> 509</span></a>      '#60BF00': 'Cactus',
<a name="l510"><span class="linenum"> 510</span></a>      '#80FF00': 'Chartreuse',
<a name="l511"><span class="linenum"> 511</span></a>      '#A0FF40': 'Green',
<a name="l512"><span class="linenum"> 512</span></a>      '#C0FF80': 'Pale Lime',
<a name="l513"><span class="linenum"> 513</span></a>      '#DFFFBF': 'Light Mint',
<a name="l514"><span class="linenum"> 514</span></a>      '#3B5738': 'Green',
<a name="l515"><span class="linenum"> 515</span></a>      '#668F5A': 'Lime Gray',
<a name="l516"><span class="linenum"> 516</span></a>      '#7F9757': 'Yellow',
<a name="l517"><span class="linenum"> 517</span></a>      '#407F00': 'Clover',
<a name="l518"><span class="linenum"> 518</span></a>      '#8A9B55': 'Pistachio',
<a name="l519"><span class="linenum"> 519</span></a>      '#B7C296': 'Light Jade',
<a name="l520"><span class="linenum"> 520</span></a>      '#E6EBD5': 'Breakwater',
<a name="l521"><span class="linenum"> 521</span></a>      '#00BF00': 'Spring Frost',
<a name="l522"><span class="linenum"> 522</span></a>      '#00FF80': 'Pastel Green',
<a name="l523"><span class="linenum"> 523</span></a>      '#40FFA0': 'Light Emerald',
<a name="l524"><span class="linenum"> 524</span></a>      '#80FFC0': 'Sea Foam',
<a name="l525"><span class="linenum"> 525</span></a>      '#BFFFDF': 'Sea Mist',
<a name="l526"><span class="linenum"> 526</span></a>      '#033D21': 'Dark Forrest',
<a name="l527"><span class="linenum"> 527</span></a>      '#438059': 'Moss',
<a name="l528"><span class="linenum"> 528</span></a>      '#7FA37C': 'Medium Green',
<a name="l529"><span class="linenum"> 529</span></a>      '#007F40': 'Pine',
<a name="l530"><span class="linenum"> 530</span></a>      '#8DAE94': 'Yellow Gray Green',
<a name="l531"><span class="linenum"> 531</span></a>      '#ACC6B5': 'Aqua Lung',
<a name="l532"><span class="linenum"> 532</span></a>      '#DDEBE2': 'Sea Vapor',
<a name="l533"><span class="linenum"> 533</span></a>      '#00BFBF': 'Fog',
<a name="l534"><span class="linenum"> 534</span></a>      '#00FFFF': 'Cyan',
<a name="l535"><span class="linenum"> 535</span></a>      '#40FFFF': 'Turquoise Blue',
<a name="l536"><span class="linenum"> 536</span></a>      '#80FFFF': 'Light Aqua',
<a name="l537"><span class="linenum"> 537</span></a>      '#BFFFFF': 'Pale Cyan',
<a name="l538"><span class="linenum"> 538</span></a>      '#033D3D': 'Dark Teal',
<a name="l539"><span class="linenum"> 539</span></a>      '#347D7E': 'Gray Turquoise',
<a name="l540"><span class="linenum"> 540</span></a>      '#609A9F': 'Green Blue',
<a name="l541"><span class="linenum"> 541</span></a>      '#007F7F': 'Seaweed',
<a name="l542"><span class="linenum"> 542</span></a>      '#96BDC4': 'Green Gray',
<a name="l543"><span class="linenum"> 543</span></a>      '#B5D1D7': 'Soapstone',
<a name="l544"><span class="linenum"> 544</span></a>      '#E2F1F4': 'Light Turquoise',
<a name="l545"><span class="linenum"> 545</span></a>      '#0060BF': 'Summer Sky',
<a name="l546"><span class="linenum"> 546</span></a>      '#0080FF': 'Sky Blue',
<a name="l547"><span class="linenum"> 547</span></a>      '#40A0FF': 'Electric Blue',
<a name="l548"><span class="linenum"> 548</span></a>      '#80C0FF': 'Light Azure',
<a name="l549"><span class="linenum"> 549</span></a>      '#BFDFFF': 'Ice Blue',
<a name="l550"><span class="linenum"> 550</span></a>      '#1B2C48': 'Navy',
<a name="l551"><span class="linenum"> 551</span></a>      '#385376': 'Biscay',
<a name="l552"><span class="linenum"> 552</span></a>      '#57708F': 'Dusty Blue',
<a name="l553"><span class="linenum"> 553</span></a>      '#00407F': 'Sea Blue',
<a name="l554"><span class="linenum"> 554</span></a>      '#7792AC': 'Sky Blue Gray',
<a name="l555"><span class="linenum"> 555</span></a>      '#A8BED1': 'Morning Sky',
<a name="l556"><span class="linenum"> 556</span></a>      '#DEEBF6': 'Vapor',
<a name="l557"><span class="linenum"> 557</span></a>      '#0000BF': 'Deep Blue',
<a name="l558"><span class="linenum"> 558</span></a>      '#0000FF': 'Blue',
<a name="l559"><span class="linenum"> 559</span></a>      '#4040FF': 'Cerulean Blue',
<a name="l560"><span class="linenum"> 560</span></a>      '#8080FF': 'Evening Blue',
<a name="l561"><span class="linenum"> 561</span></a>      '#BFBFFF': 'Light Blue',
<a name="l562"><span class="linenum"> 562</span></a>      '#212143': 'Deep Indigo',
<a name="l563"><span class="linenum"> 563</span></a>      '#373E68': 'Sea Blue',
<a name="l564"><span class="linenum"> 564</span></a>      '#444F75': 'Night Blue',
<a name="l565"><span class="linenum"> 565</span></a>      '#00007F': 'Indigo Blue',
<a name="l566"><span class="linenum"> 566</span></a>      '#585E82': 'Dockside',
<a name="l567"><span class="linenum"> 567</span></a>      '#8687A4': 'Blue Gray',
<a name="l568"><span class="linenum"> 568</span></a>      '#D2D1E1': 'Light Blue Gray',
<a name="l569"><span class="linenum"> 569</span></a>      '#6000BF': 'Neon Violet',
<a name="l570"><span class="linenum"> 570</span></a>      '#8000FF': 'Blue Violet',
<a name="l571"><span class="linenum"> 571</span></a>      '#A040FF': 'Violet Purple',
<a name="l572"><span class="linenum"> 572</span></a>      '#C080FF': 'Violet Dusk',
<a name="l573"><span class="linenum"> 573</span></a>      '#DFBFFF': 'Pale Lavender',
<a name="l574"><span class="linenum"> 574</span></a>      '#302449': 'Cool Shale',
<a name="l575"><span class="linenum"> 575</span></a>      '#54466F': 'Dark Indigo',
<a name="l576"><span class="linenum"> 576</span></a>      '#655A7F': 'Dark Violet',
<a name="l577"><span class="linenum"> 577</span></a>      '#40007F': 'Violet',
<a name="l578"><span class="linenum"> 578</span></a>      '#726284': 'Smoky Violet',
<a name="l579"><span class="linenum"> 579</span></a>      '#9E8FA9': 'Slate Gray',
<a name="l580"><span class="linenum"> 580</span></a>      '#DCD1DF': 'Violet White',
<a name="l581"><span class="linenum"> 581</span></a>      '#BF00BF': 'Royal Violet',
<a name="l582"><span class="linenum"> 582</span></a>      '#FF00FF': 'Fuchsia',
<a name="l583"><span class="linenum"> 583</span></a>      '#FF40FF': 'Magenta',
<a name="l584"><span class="linenum"> 584</span></a>      '#FF80FF': 'Orchid',
<a name="l585"><span class="linenum"> 585</span></a>      '#FFBFFF': 'Pale Magenta',
<a name="l586"><span class="linenum"> 586</span></a>      '#4A234A': 'Dark Purple',
<a name="l587"><span class="linenum"> 587</span></a>      '#794A72': 'Medium Purple',
<a name="l588"><span class="linenum"> 588</span></a>      '#936386': 'Cool Granite',
<a name="l589"><span class="linenum"> 589</span></a>      '#7F007F': 'Purple',
<a name="l590"><span class="linenum"> 590</span></a>      '#9D7292': 'Purple Moon',
<a name="l591"><span class="linenum"> 591</span></a>      '#C0A0B6': 'Pale Purple',
<a name="l592"><span class="linenum"> 592</span></a>      '#ECDAE5': 'Pink Cloud',
<a name="l593"><span class="linenum"> 593</span></a>      '#BF005F': 'Hot Pink',
<a name="l594"><span class="linenum"> 594</span></a>      '#FF007F': 'Deep Pink',
<a name="l595"><span class="linenum"> 595</span></a>      '#FF409F': 'Grape',
<a name="l596"><span class="linenum"> 596</span></a>      '#FF80BF': 'Electric Pink',
<a name="l597"><span class="linenum"> 597</span></a>      '#FFBFDF': 'Pink',
<a name="l598"><span class="linenum"> 598</span></a>      '#451528': 'Purple Red',
<a name="l599"><span class="linenum"> 599</span></a>      '#823857': 'Purple Dino',
<a name="l600"><span class="linenum"> 600</span></a>      '#A94A76': 'Purple Gray',
<a name="l601"><span class="linenum"> 601</span></a>      '#7F003F': 'Rose',
<a name="l602"><span class="linenum"> 602</span></a>      '#BC6F95': 'Antique Mauve',
<a name="l603"><span class="linenum"> 603</span></a>      '#D8A5BB': 'Cool Marble',
<a name="l604"><span class="linenum"> 604</span></a>      '#F7DDE9': 'Pink Granite',
<a name="l605"><span class="linenum"> 605</span></a>      '#C00000': 'Apple',
<a name="l606"><span class="linenum"> 606</span></a>      '#FF0000': 'Fire Truck',
<a name="l607"><span class="linenum"> 607</span></a>      '#FF4040': 'Pale Red',
<a name="l608"><span class="linenum"> 608</span></a>      '#FF8080': 'Salmon',
<a name="l609"><span class="linenum"> 609</span></a>      '#FFC0C0': 'Warm Pink',
<a name="l610"><span class="linenum"> 610</span></a>      '#441415': 'Sepia',
<a name="l611"><span class="linenum"> 611</span></a>      '#82393C': 'Rust',
<a name="l612"><span class="linenum"> 612</span></a>      '#AA4D4E': 'Brick',
<a name="l613"><span class="linenum"> 613</span></a>      '#800000': 'Brick Red',
<a name="l614"><span class="linenum"> 614</span></a>      '#BC6E6E': 'Mauve',
<a name="l615"><span class="linenum"> 615</span></a>      '#D8A3A4': 'Shrimp Pink',
<a name="l616"><span class="linenum"> 616</span></a>      '#F8DDDD': 'Shell Pink',
<a name="l617"><span class="linenum"> 617</span></a>      '#BF5F00': 'Dark Orange',
<a name="l618"><span class="linenum"> 618</span></a>      '#FF7F00': 'Orange',
<a name="l619"><span class="linenum"> 619</span></a>      '#FF9F40': 'Grapefruit',
<a name="l620"><span class="linenum"> 620</span></a>      '#FFBF80': 'Canteloupe',
<a name="l621"><span class="linenum"> 621</span></a>      '#FFDFBF': 'Wax',
<a name="l622"><span class="linenum"> 622</span></a>      '#482C1B': 'Dark Brick',
<a name="l623"><span class="linenum"> 623</span></a>      '#855A40': 'Dirt',
<a name="l624"><span class="linenum"> 624</span></a>      '#B27C51': 'Tan',
<a name="l625"><span class="linenum"> 625</span></a>      '#7F3F00': 'Nutmeg',
<a name="l626"><span class="linenum"> 626</span></a>      '#C49B71': 'Mustard',
<a name="l627"><span class="linenum"> 627</span></a>      '#E1C4A8': 'Pale Tan',
<a name="l628"><span class="linenum"> 628</span></a>      '#FDEEE0': 'Marble'
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">/* }}} */</span>
<a name="l630"><span class="linenum"> 630</span></a>          },
<a name="l631"><span class="linenum"> 631</span></a>          <span class="comment">/** </span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">        * @property _colorPicker</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">        * @description The HTML Element containing the colorPicker</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">        */</span>
<a name="l636"><span class="linenum"> 636</span></a>          _colorPicker: null,
<a name="l637"><span class="linenum"> 637</span></a>          <span class="comment">/** </span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">        * @property STR_COLLAPSE</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">        * @description String for Toolbar Collapse Button</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">        * @type String</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">        */</span>
<a name="l642"><span class="linenum"> 642</span></a>          STR_COLLAPSE: 'Collapse Toolbar',
<a name="l643"><span class="linenum"> 643</span></a>          <span class="comment">/** </span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">        * @property STR_EXPAND</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">        * @description String for Toolbar Collapse Button - Expand</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">        * @type String</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">        */</span>
<a name="l648"><span class="linenum"> 648</span></a>          STR_EXPAND: 'Expand Toolbar',
<a name="l649"><span class="linenum"> 649</span></a>          <span class="comment">/** </span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">        * @property STR_SPIN_LABEL</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">        * @description String for spinbutton dynamic label. Note the {VALUE} will be replaced with YAHOO.lang.substitute</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">        * @type String</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">        */</span>
<a name="l654"><span class="linenum"> 654</span></a>          STR_SPIN_LABEL: 'Spin Button with value {VALUE}. Use Control Shift Up Arrow and Control Shift Down arrow keys to increase or decrease the value.',
<a name="l655"><span class="linenum"> 655</span></a>          <span class="comment">/** </span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment">        * @property STR_SPIN_UP</span>
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        * @description String for spinbutton up</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">        * @type String</span>
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">        */</span>
<a name="l660"><span class="linenum"> 660</span></a>          STR_SPIN_UP: 'Click to increase the value of this input',
<a name="l661"><span class="linenum"> 661</span></a>          <span class="comment">/** </span>
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment">        * @property STR_SPIN_DOWN</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment">        * @description String for spinbutton down</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment">        * @type String</span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment">        */</span>
<a name="l666"><span class="linenum"> 666</span></a>          STR_SPIN_DOWN: 'Click to decrease the value of this input',
<a name="l667"><span class="linenum"> 667</span></a>          <span class="comment">/** </span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">        * @property _titlebar</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">        * @description Object reference to the titlebar</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">        */</span>
<a name="l672"><span class="linenum"> 672</span></a>          _titlebar: null,
<a name="l673"><span class="linenum"> 673</span></a>          <span class="comment">/** </span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">        * @property browser</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">        * @description Standard browser detection</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">        * @type Object</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">        */</span>
<a name="l678"><span class="linenum"> 678</span></a>          browser: YAHOO.env.ua,
<a name="l679"><span class="linenum"> 679</span></a>          <span class="comment">/**</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">        * @protected</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">        * @property _buttonList</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">        * @description Internal property list of current buttons in the toolbar</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">        * @type Array</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">        */</span>
<a name="l685"><span class="linenum"> 685</span></a>          _buttonList: null,
<a name="l686"><span class="linenum"> 686</span></a>          <span class="comment">/**</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">        * @protected</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">        * @property _buttonGroupList</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">        * @description Internal property list of current button groups in the toolbar</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">        * @type Array</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">        */</span>
<a name="l692"><span class="linenum"> 692</span></a>          _buttonGroupList: null,
<a name="l693"><span class="linenum"> 693</span></a>          <span class="comment">/**</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">        * @protected</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">        * @property _sep</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">        * @description Internal reference to the separator HTML Element for cloning</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">        */</span>
<a name="l699"><span class="linenum"> 699</span></a>          _sep: null,
<a name="l700"><span class="linenum"> 700</span></a>          <span class="comment">/**</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">        * @protected</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">        * @property _sepCount</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">        * @description Internal refernce for counting separators, so we can give them a useful class name for styling</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">        * @type Number</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">        */</span>
<a name="l706"><span class="linenum"> 706</span></a>          _sepCount: null,
<a name="l707"><span class="linenum"> 707</span></a>          <span class="comment">/**</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">        * @protected</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">        * @property draghandle</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">        */</span>
<a name="l712"><span class="linenum"> 712</span></a>          _dragHandle: null,
<a name="l713"><span class="linenum"> 713</span></a>          <span class="comment">/**</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">        * @protected</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">        * @property _toolbarConfigs</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">        * @type Object</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">        */</span>
<a name="l718"><span class="linenum"> 718</span></a>          _toolbarConfigs: {
<a name="l719"><span class="linenum"> 719</span></a>              renderer: true
<a name="l720"><span class="linenum"> 720</span></a>          },
<a name="l721"><span class="linenum"> 721</span></a>          <span class="comment">/**</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">        * @protected</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">        * @property CLASS_CONTAINER</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">        * @description Default CSS class to apply to the toolbar container element</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">        * @type String</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">        */</span>
<a name="l727"><span class="linenum"> 727</span></a>          CLASS_CONTAINER: 'yui-toolbar-container',
<a name="l728"><span class="linenum"> 728</span></a>          <span class="comment">/**</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">        * @protected</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">        * @property CLASS_DRAGHANDLE</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">        * @description Default CSS class to apply to the toolbar's drag handle element</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">        * @type String</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">        */</span>
<a name="l734"><span class="linenum"> 734</span></a>          CLASS_DRAGHANDLE: 'yui-toolbar-draghandle',
<a name="l735"><span class="linenum"> 735</span></a>          <span class="comment">/**</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">        * @protected</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        * @property CLASS_SEPARATOR</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">        * @description Default CSS class to apply to all separators in the toolbar</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">        * @type String</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">        */</span>
<a name="l741"><span class="linenum"> 741</span></a>          CLASS_SEPARATOR: 'yui-toolbar-separator',
<a name="l742"><span class="linenum"> 742</span></a>          <span class="comment">/**</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">        * @protected</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">        * @property CLASS_DISABLED</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">        * @description Default CSS class to apply when the toolbar is disabled</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        * @type String</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        */</span>
<a name="l748"><span class="linenum"> 748</span></a>          CLASS_DISABLED: 'yui-toolbar-disabled',
<a name="l749"><span class="linenum"> 749</span></a>          <span class="comment">/**</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">        * @protected</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">        * @property CLASS_PREFIX</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">        * @description Default prefix for dynamically created class names</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">        * @type String</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">        */</span>
<a name="l755"><span class="linenum"> 755</span></a>          CLASS_PREFIX: 'yui-toolbar',
<a name="l756"><span class="linenum"> 756</span></a>          <span class="comment">/** </span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">        * @method init</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">        * @description The Toolbar class's initialization method</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">        */</span>
<a name="l760"><span class="linenum"> 760</span></a>          init: function(p_oElement, p_oAttributes) {
<a name="l761"><span class="linenum"> 761</span></a>              YAHOO.widget.Toolbar.superclass.init.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, p_oElement, p_oAttributes);
<a name="l762"><span class="linenum"> 762</span></a>          },
<a name="l763"><span class="linenum"> 763</span></a>          <span class="comment">/**</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">        * @method initAttributes</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">        * @description Initializes all of the configuration attributes used to create </span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">        * the toolbar.</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">        * @param {Object} attr Object literal specifying a set of </span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">        * configuration attributes used to create the toolbar.</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">        */</span>
<a name="l770"><span class="linenum"> 770</span></a>          initAttributes: function(attr) {
<a name="l771"><span class="linenum"> 771</span></a>              YAHOO.widget.Toolbar.superclass.initAttributes.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, attr);
<a name="l772"><span class="linenum"> 772</span></a>              this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_CONTAINER);
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>              <span class="comment">/**</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">            * @attribute buttonType</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">            * @description The buttonType to use (advanced or basic)</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">            * @type String</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">            */</span>
<a name="l779"><span class="linenum"> 779</span></a>              this.setAttributeConfig('buttonType', {
<a name="l780"><span class="linenum"> 780</span></a>                  value: attr.buttonType || 'basic',
<a name="l781"><span class="linenum"> 781</span></a>                  writeOnce: true,
<a name="l782"><span class="linenum"> 782</span></a>                  validator: function(type) {
<a name="l783"><span class="linenum"> 783</span></a>                      switch (type) {
<a name="l784"><span class="linenum"> 784</span></a>                          case 'advanced':
<a name="l785"><span class="linenum"> 785</span></a>                          case 'basic':
<a name="l786"><span class="linenum"> 786</span></a>                              return true;
<a name="l787"><span class="linenum"> 787</span></a>                      }
<a name="l788"><span class="linenum"> 788</span></a>                      return false;
<a name="l789"><span class="linenum"> 789</span></a>                  },
<a name="l790"><span class="linenum"> 790</span></a>                  method: function(type) {
<a name="l791"><span class="linenum"> 791</span></a>                      if (type == 'advanced') {
<a name="l792"><span class="linenum"> 792</span></a>                          if (YAHOO.widget.Button) {
<a name="l793"><span class="linenum"> 793</span></a>                              this.buttonType = YAHOO.widget.ToolbarButtonAdvanced;
<a name="l794"><span class="linenum"> 794</span></a>                          } else {
<a name="l795"><span class="linenum"> 795</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Can not find YAHOO.widget.Button', 'error', 'Toolbar');
<a name="l796"><span class="linenum"> 796</span></a>                              this.buttonType = YAHOO.widget.ToolbarButton;
<a name="l797"><span class="linenum"> 797</span></a>                          }
<a name="l798"><span class="linenum"> 798</span></a>                      } else {
<a name="l799"><span class="linenum"> 799</span></a>                          this.buttonType = YAHOO.widget.ToolbarButton;
<a name="l800"><span class="linenum"> 800</span></a>                      }
<a name="l801"><span class="linenum"> 801</span></a>                  }
<a name="l802"><span class="linenum"> 802</span></a>              });
<a name="l803"><span class="linenum"> 803</span></a>  
<a name="l804"><span class="linenum"> 804</span></a>  
<a name="l805"><span class="linenum"> 805</span></a>              <span class="comment">/**</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">            * @attribute buttons</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">            * @description Object specifying the buttons to include in the toolbar</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">            * Example:</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">            * &lt;code&gt;&lt;pre&gt;</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment">            * {</span>
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment">            *   { id: 'b3', type: 'button', label: 'Underline', value: 'underline' },</span>
<a name="l812"><span class="linenum"> 812</span></a>  <span class="comment">            *   { type: 'separator' },</span>
<a name="l813"><span class="linenum"> 813</span></a>  <span class="comment">            *   { id: 'b4', type: 'menu', label: 'Align', value: 'align',</span>
<a name="l814"><span class="linenum"> 814</span></a>  <span class="comment">            *       menu: [</span>
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">            *           { text: &quot;Left&quot;, value: 'alignleft' },</span>
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment">            *           { text: &quot;Center&quot;, value: 'aligncenter' },</span>
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment">            *           { text: &quot;Right&quot;, value: 'alignright' }</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment">            *       ]</span>
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment">            *   }</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment">            * }</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">            * &lt;/pre&gt;&lt;/code&gt;</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment">            * @type Array</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">            */</span>
<a name="l824"><span class="linenum"> 824</span></a>              
<a name="l825"><span class="linenum"> 825</span></a>              this.setAttributeConfig('buttons', {
<a name="l826"><span class="linenum"> 826</span></a>                  value: [],
<a name="l827"><span class="linenum"> 827</span></a>                  writeOnce: true,
<a name="l828"><span class="linenum"> 828</span></a>                  method: function(data) {
<a name="l829"><span class="linenum"> 829</span></a>                      var i, button, buttons, len, b;
<a name="l830"><span class="linenum"> 830</span></a>                      for (i in data) {
<a name="l831"><span class="linenum"> 831</span></a>                          if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(data, i)) {
<a name="l832"><span class="linenum"> 832</span></a>                              if (data[i].type == 'separator') {
<a name="l833"><span class="linenum"> 833</span></a>                                  this.addSeparator();
<a name="l834"><span class="linenum"> 834</span></a>                              } else if (data[i].group !== undefined) {
<a name="l835"><span class="linenum"> 835</span></a>                                  buttons = this.addButtonGroup(data[i]);
<a name="l836"><span class="linenum"> 836</span></a>                                  if (buttons) {
<a name="l837"><span class="linenum"> 837</span></a>                                      len = buttons.length;
<a name="l838"><span class="linenum"> 838</span></a>                                      for(b = 0; b &lt; len; b++) {
<a name="l839"><span class="linenum"> 839</span></a>                                          if (buttons[b]) {
<a name="l840"><span class="linenum"> 840</span></a>                                              this._configuredButtons[this._configuredButtons.length] = buttons[b].id;
<a name="l841"><span class="linenum"> 841</span></a>                                          }
<a name="l842"><span class="linenum"> 842</span></a>                                      }
<a name="l843"><span class="linenum"> 843</span></a>                                  }
<a name="l844"><span class="linenum"> 844</span></a>                                  
<a name="l845"><span class="linenum"> 845</span></a>                              } else {
<a name="l846"><span class="linenum"> 846</span></a>                                  button = this.addButton(data[i]);
<a name="l847"><span class="linenum"> 847</span></a>                                  if (button) {
<a name="l848"><span class="linenum"> 848</span></a>                                      this._configuredButtons[this._configuredButtons.length] = button.id;
<a name="l849"><span class="linenum"> 849</span></a>                                  }
<a name="l850"><span class="linenum"> 850</span></a>                              }
<a name="l851"><span class="linenum"> 851</span></a>                          }
<a name="l852"><span class="linenum"> 852</span></a>                      }
<a name="l853"><span class="linenum"> 853</span></a>                  }
<a name="l854"><span class="linenum"> 854</span></a>              });
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>              <span class="comment">/**</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">            * @attribute disabled</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">            * @description Boolean indicating if the toolbar should be disabled. It will also disable the draggable attribute if it is on.</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">            * @default false</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">            */</span>
<a name="l862"><span class="linenum"> 862</span></a>              this.setAttributeConfig('disabled', {
<a name="l863"><span class="linenum"> 863</span></a>                  value: false,
<a name="l864"><span class="linenum"> 864</span></a>                  method: function(disabled) {
<a name="l865"><span class="linenum"> 865</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled') === disabled) {
<a name="l866"><span class="linenum"> 866</span></a>                          return false;
<a name="l867"><span class="linenum"> 867</span></a>                      }
<a name="l868"><span class="linenum"> 868</span></a>                      if (disabled) {
<a name="l869"><span class="linenum"> 869</span></a>                          this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_DISABLED);
<a name="l870"><span class="linenum"> 870</span></a>                          this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('draggable', false);
<a name="l871"><span class="linenum"> 871</span></a>                          this.disableAllButtons();
<a name="l872"><span class="linenum"> 872</span></a>                      } else {
<a name="l873"><span class="linenum"> 873</span></a>                          this.removeClass(this.CLASS_DISABLED);
<a name="l874"><span class="linenum"> 874</span></a>                          if (this._configs.draggable._initialConfig.value) {
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">                            //Draggable by default, set it back</span>
<a name="l876"><span class="linenum"> 876</span></a>                              this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('draggable', true);
<a name="l877"><span class="linenum"> 877</span></a>                          }
<a name="l878"><span class="linenum"> 878</span></a>                          this.resetAllButtons();
<a name="l879"><span class="linenum"> 879</span></a>                      }
<a name="l880"><span class="linenum"> 880</span></a>                  }
<a name="l881"><span class="linenum"> 881</span></a>              });
<a name="l882"><span class="linenum"> 882</span></a>  
<a name="l883"><span class="linenum"> 883</span></a>              <span class="comment">/**</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">            * @config cont</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">            * @description The container for the toolbar.</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">            */</span>
<a name="l888"><span class="linenum"> 888</span></a>              this.setAttributeConfig('cont', {
<a name="l889"><span class="linenum"> 889</span></a>                  value: attr.cont,
<a name="l890"><span class="linenum"> 890</span></a>                  readOnly: true
<a name="l891"><span class="linenum"> 891</span></a>              });
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>  
<a name="l894"><span class="linenum"> 894</span></a>              <span class="comment">/**</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">            * @attribute grouplabels</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">            * @description Boolean indicating if the toolbar should show the group label's text string.</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">            * @default true</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">            */</span>
<a name="l900"><span class="linenum"> 900</span></a>              this.setAttributeConfig('grouplabels', {
<a name="l901"><span class="linenum"> 901</span></a>                  value: ((attr.grouplabels === false) ? false : true),
<a name="l902"><span class="linenum"> 902</span></a>                  method: function(grouplabels) {
<a name="l903"><span class="linenum"> 903</span></a>                      if (grouplabels) {
<a name="l904"><span class="linenum"> 904</span></a>                          Dom.removeClass(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont'), (this.CLASS_PREFIX + '-nogrouplabels'));
<a name="l905"><span class="linenum"> 905</span></a>                      } else {
<a name="l906"><span class="linenum"> 906</span></a>                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont'), (this.CLASS_PREFIX + '-nogrouplabels'));
<a name="l907"><span class="linenum"> 907</span></a>                      }
<a name="l908"><span class="linenum"> 908</span></a>                  }
<a name="l909"><span class="linenum"> 909</span></a>              });
<a name="l910"><span class="linenum"> 910</span></a>              <span class="comment">/**</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">            * @attribute titlebar</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">            * @description Boolean indicating if the toolbar should have a titlebar. If</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">            * passed a string, it will use that as the titlebar text</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">            * @default false</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">            * @type Boolean or String</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">            */</span>
<a name="l917"><span class="linenum"> 917</span></a>              this.setAttributeConfig('titlebar', {
<a name="l918"><span class="linenum"> 918</span></a>                  value: false,
<a name="l919"><span class="linenum"> 919</span></a>                  method: function(titlebar) {
<a name="l920"><span class="linenum"> 920</span></a>                      if (titlebar) {
<a name="l921"><span class="linenum"> 921</span></a>                          if (this._titlebar &amp;&amp; this._titlebar.parentNode) {
<a name="l922"><span class="linenum"> 922</span></a>                              this._titlebar.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this._titlebar);
<a name="l923"><span class="linenum"> 923</span></a>                          }
<a name="l924"><span class="linenum"> 924</span></a>                          this._titlebar = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l925"><span class="linenum"> 925</span></a>                          this._titlebar.tabIndex = '-1';
<a name="l926"><span class="linenum"> 926</span></a>                          Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this._titlebar, 'focus', function() {
<a name="l927"><span class="linenum"> 927</span></a>                              this._handleFocus();
<a name="l928"><span class="linenum"> 928</span></a>                          }, this, true);
<a name="l929"><span class="linenum"> 929</span></a>                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._titlebar, this.CLASS_PREFIX + '-titlebar');
<a name="l930"><span class="linenum"> 930</span></a>                          if (Lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(titlebar)) {
<a name="l931"><span class="linenum"> 931</span></a>                              var h2 = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('h2');
<a name="l932"><span class="linenum"> 932</span></a>                              h2.tabIndex = '-1';
<a name="l933"><span class="linenum"> 933</span></a>                              h2.innerHTML = '&lt;a href=&quot;#&quot; tabIndex=&quot;0&quot;&gt;' + titlebar + '&lt;/a&gt;';
<a name="l934"><span class="linenum"> 934</span></a>                              this._titlebar.appendChild(h2);
<a name="l935"><span class="linenum"> 935</span></a>                              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(h2.firstChild, 'click', function(ev) {
<a name="l936"><span class="linenum"> 936</span></a>                                  Event.stopEvent(ev);
<a name="l937"><span class="linenum"> 937</span></a>                              });
<a name="l938"><span class="linenum"> 938</span></a>                              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>([h2, h2.firstChild], 'focus', function() {
<a name="l939"><span class="linenum"> 939</span></a>                                  this._handleFocus();
<a name="l940"><span class="linenum"> 940</span></a>                              }, this, true);
<a name="l941"><span class="linenum"> 941</span></a>                          }
<a name="l942"><span class="linenum"> 942</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild')) {
<a name="l943"><span class="linenum"> 943</span></a>                              this.<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(this._titlebar, this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild'));
<a name="l944"><span class="linenum"> 944</span></a>                          } else {
<a name="l945"><span class="linenum"> 945</span></a>                              this.appendChild(this._titlebar);
<a name="l946"><span class="linenum"> 946</span></a>                          }
<a name="l947"><span class="linenum"> 947</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('collapse')) {
<a name="l948"><span class="linenum"> 948</span></a>                              this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('collapse', true);
<a name="l949"><span class="linenum"> 949</span></a>                          }
<a name="l950"><span class="linenum"> 950</span></a>                      } else if (this._titlebar) {
<a name="l951"><span class="linenum"> 951</span></a>                          if (this._titlebar &amp;&amp; this._titlebar.parentNode) {
<a name="l952"><span class="linenum"> 952</span></a>                              this._titlebar.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this._titlebar);
<a name="l953"><span class="linenum"> 953</span></a>                          }
<a name="l954"><span class="linenum"> 954</span></a>                      }
<a name="l955"><span class="linenum"> 955</span></a>                  }
<a name="l956"><span class="linenum"> 956</span></a>              });
<a name="l957"><span class="linenum"> 957</span></a>  
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>              <span class="comment">/**</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">            * @attribute collapse</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">            * @description Boolean indicating if the the titlebar should have a collapse button.</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment">            * The collapse button will not remove the toolbar, it will minimize it to the titlebar</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment">            * @default false</span>
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment">            */</span>
<a name="l966"><span class="linenum"> 966</span></a>              this.setAttributeConfig('collapse', {
<a name="l967"><span class="linenum"> 967</span></a>                  value: false,
<a name="l968"><span class="linenum"> 968</span></a>                  method: function(collapse) {
<a name="l969"><span class="linenum"> 969</span></a>                      if (this._titlebar) {
<a name="l970"><span class="linenum"> 970</span></a>                          var collapseEl = null;
<a name="l971"><span class="linenum"> 971</span></a>                          var el = Dom.<a class="function" onClick="logFunction('getElementsByClassName')" href="../../../../../../_functions/getelementsbyclassname.html" onMouseOver="funcPopup(event,'getelementsbyclassname')">getElementsByClassName</a>('collapse', 'span', this._titlebar);
<a name="l972"><span class="linenum"> 972</span></a>                          if (collapse) {
<a name="l973"><span class="linenum"> 973</span></a>                              if (el.length &gt; 0) {
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment">                                //There is already a collapse button</span>
<a name="l975"><span class="linenum"> 975</span></a>                                  return true;
<a name="l976"><span class="linenum"> 976</span></a>                              }
<a name="l977"><span class="linenum"> 977</span></a>                              collapseEl = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('SPAN');
<a name="l978"><span class="linenum"> 978</span></a>                              collapseEl.innerHTML = 'X';
<a name="l979"><span class="linenum"> 979</span></a>                              collapseEl.title = this.STR_COLLAPSE;
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(collapseEl, 'collapse');
<a name="l982"><span class="linenum"> 982</span></a>                              this._titlebar.appendChild(collapseEl);
<a name="l983"><span class="linenum"> 983</span></a>                              Event.addListener(collapseEl, 'click', function() {
<a name="l984"><span class="linenum"> 984</span></a>                                  if (Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').parentNode, 'yui-toolbar-container-collapsed')) {
<a name="l985"><span class="linenum"> 985</span></a>                                      this.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false); <span class="comment">//Expand Toolbar</span>
<a name="l986"><span class="linenum"> 986</span></a>                                  } else {
<a name="l987"><span class="linenum"> 987</span></a>                                      this.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(); <span class="comment">//Collapse Toolbar</span>
<a name="l988"><span class="linenum"> 988</span></a>                                  }
<a name="l989"><span class="linenum"> 989</span></a>                              }, this, true);
<a name="l990"><span class="linenum"> 990</span></a>                          } else {
<a name="l991"><span class="linenum"> 991</span></a>                              collapseEl = Dom.<a class="function" onClick="logFunction('getElementsByClassName')" href="../../../../../../_functions/getelementsbyclassname.html" onMouseOver="funcPopup(event,'getelementsbyclassname')">getElementsByClassName</a>('collapse', 'span', this._titlebar);
<a name="l992"><span class="linenum"> 992</span></a>                              if (collapseEl[0]) {
<a name="l993"><span class="linenum"> 993</span></a>                                  if (Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').parentNode, 'yui-toolbar-container-collapsed')) {
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">                                    //We are closed, reopen the titlebar..</span>
<a name="l995"><span class="linenum"> 995</span></a>                                      this.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false); <span class="comment">//Expand Toolbar</span>
<a name="l996"><span class="linenum"> 996</span></a>                                  }
<a name="l997"><span class="linenum"> 997</span></a>                                  collapseEl[0].parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(collapseEl[0]);
<a name="l998"><span class="linenum"> 998</span></a>                              }
<a name="l999"><span class="linenum"> 999</span></a>                          }
<a name="l1000"><span class="linenum">1000</span></a>                      }
<a name="l1001"><span class="linenum">1001</span></a>                  }
<a name="l1002"><span class="linenum">1002</span></a>              });
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>              <span class="comment">/**</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">            * @attribute draggable</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">            * @description Boolean indicating if the toolbar should be draggable.  </span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">            * @default false</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment">            */</span>
<a name="l1010"><span class="linenum">1010</span></a>  
<a name="l1011"><span class="linenum">1011</span></a>              this.setAttributeConfig('draggable', {
<a name="l1012"><span class="linenum">1012</span></a>                  value: (attr.draggable || false),
<a name="l1013"><span class="linenum">1013</span></a>                  method: function(draggable) {
<a name="l1014"><span class="linenum">1014</span></a>                      if (draggable &amp;&amp; !this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('titlebar')) {
<a name="l1015"><span class="linenum">1015</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Dragging enabled', 'info', 'Toolbar');
<a name="l1016"><span class="linenum">1016</span></a>                          if (!this._dragHandle) {
<a name="l1017"><span class="linenum">1017</span></a>                              this._dragHandle = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('SPAN');
<a name="l1018"><span class="linenum">1018</span></a>                              this._dragHandle.innerHTML = '|';
<a name="l1019"><span class="linenum">1019</span></a>                              this._dragHandle.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('title', 'Click to drag the toolbar');
<a name="l1020"><span class="linenum">1020</span></a>                              this._dragHandle.id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_draghandle';
<a name="l1021"><span class="linenum">1021</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._dragHandle, this.CLASS_DRAGHANDLE);
<a name="l1022"><span class="linenum">1022</span></a>                              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').hasChildNodes()) {
<a name="l1023"><span class="linenum">1023</span></a>                                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(this._dragHandle, this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').firstChild);
<a name="l1024"><span class="linenum">1024</span></a>                              } else {
<a name="l1025"><span class="linenum">1025</span></a>                                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').appendChild(this._dragHandle);
<a name="l1026"><span class="linenum">1026</span></a>                              }
<a name="l1027"><span class="linenum">1027</span></a>                              this.dd = new YAHOO.util.DD(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'));
<a name="l1028"><span class="linenum">1028</span></a>                              this.dd.setHandleElId(this._dragHandle.id);
<a name="l1029"><span class="linenum">1029</span></a>                              
<a name="l1030"><span class="linenum">1030</span></a>                          }
<a name="l1031"><span class="linenum">1031</span></a>                      } else {
<a name="l1032"><span class="linenum">1032</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Dragging disabled', 'info', 'Toolbar');
<a name="l1033"><span class="linenum">1033</span></a>                          if (this._dragHandle) {
<a name="l1034"><span class="linenum">1034</span></a>                              this._dragHandle.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this._dragHandle);
<a name="l1035"><span class="linenum">1035</span></a>                              this._dragHandle = null;
<a name="l1036"><span class="linenum">1036</span></a>                              this.dd = null;
<a name="l1037"><span class="linenum">1037</span></a>                          }
<a name="l1038"><span class="linenum">1038</span></a>                      }
<a name="l1039"><span class="linenum">1039</span></a>                      if (this._titlebar) {
<a name="l1040"><span class="linenum">1040</span></a>                          if (draggable) {
<a name="l1041"><span class="linenum">1041</span></a>                              this.dd = new YAHOO.util.DD(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'));
<a name="l1042"><span class="linenum">1042</span></a>                              this.dd.setHandleElId(this._titlebar);
<a name="l1043"><span class="linenum">1043</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._titlebar, 'draggable');
<a name="l1044"><span class="linenum">1044</span></a>                          } else {
<a name="l1045"><span class="linenum">1045</span></a>                              Dom.removeClass(this._titlebar, 'draggable');
<a name="l1046"><span class="linenum">1046</span></a>                              if (this.dd) {
<a name="l1047"><span class="linenum">1047</span></a>                                  this.dd.unreg();
<a name="l1048"><span class="linenum">1048</span></a>                                  this.dd = null;
<a name="l1049"><span class="linenum">1049</span></a>                              }
<a name="l1050"><span class="linenum">1050</span></a>                          }
<a name="l1051"><span class="linenum">1051</span></a>                      }
<a name="l1052"><span class="linenum">1052</span></a>                  },
<a name="l1053"><span class="linenum">1053</span></a>                  validator: function(value) {
<a name="l1054"><span class="linenum">1054</span></a>                      var ret = true;
<a name="l1055"><span class="linenum">1055</span></a>                      if (!YAHOO.util.DD) {
<a name="l1056"><span class="linenum">1056</span></a>                          ret = false;
<a name="l1057"><span class="linenum">1057</span></a>                      }
<a name="l1058"><span class="linenum">1058</span></a>                      return ret;
<a name="l1059"><span class="linenum">1059</span></a>                  }
<a name="l1060"><span class="linenum">1060</span></a>              });
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>          },
<a name="l1063"><span class="linenum">1063</span></a>          <span class="comment">/**</span>
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment">        * @method addButtonGroup</span>
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">        * @description Add a new button group to the toolbar. (uses addButton)</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">        * @param {Object} oGroup Object literal reference to the Groups Config (contains an array of button configs as well as the group label)</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">        */</span>
<a name="l1068"><span class="linenum">1068</span></a>          addButtonGroup: function(oGroup) {
<a name="l1069"><span class="linenum">1069</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')) {
<a name="l1070"><span class="linenum">1070</span></a>                  this._queue[this._queue.length] = ['addButtonGroup', arguments];
<a name="l1071"><span class="linenum">1071</span></a>                  return false;
<a name="l1072"><span class="linenum">1072</span></a>              }
<a name="l1073"><span class="linenum">1073</span></a>              
<a name="l1074"><span class="linenum">1074</span></a>              if (!this.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(this.CLASS_PREFIX + '-grouped')) {
<a name="l1075"><span class="linenum">1075</span></a>                  this.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_PREFIX + '-grouped');
<a name="l1076"><span class="linenum">1076</span></a>              }
<a name="l1077"><span class="linenum">1077</span></a>              var div = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l1078"><span class="linenum">1078</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(div, this.CLASS_PREFIX + '-group');
<a name="l1079"><span class="linenum">1079</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(div, this.CLASS_PREFIX + '-group-' + oGroup.group);
<a name="l1080"><span class="linenum">1080</span></a>              if (oGroup.label) {
<a name="l1081"><span class="linenum">1081</span></a>                  var label = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('h3');
<a name="l1082"><span class="linenum">1082</span></a>                  label.innerHTML = oGroup.label;
<a name="l1083"><span class="linenum">1083</span></a>                  div.appendChild(label);
<a name="l1084"><span class="linenum">1084</span></a>              }
<a name="l1085"><span class="linenum">1085</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('grouplabels')) {
<a name="l1086"><span class="linenum">1086</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont'), this.CLASS_PREFIX, '-nogrouplabels');
<a name="l1087"><span class="linenum">1087</span></a>              }
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').appendChild(div);
<a name="l1090"><span class="linenum">1090</span></a>  
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">            //For accessibility, let's put all of the group buttons in an Unordered List</span>
<a name="l1092"><span class="linenum">1092</span></a>              var ul = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('ul');
<a name="l1093"><span class="linenum">1093</span></a>              div.appendChild(ul);
<a name="l1094"><span class="linenum">1094</span></a>  
<a name="l1095"><span class="linenum">1095</span></a>              if (!this._buttonGroupList) {
<a name="l1096"><span class="linenum">1096</span></a>                  this._buttonGroupList = {};
<a name="l1097"><span class="linenum">1097</span></a>              }
<a name="l1098"><span class="linenum">1098</span></a>              
<a name="l1099"><span class="linenum">1099</span></a>              this._buttonGroupList[oGroup.group] = ul;
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">            //An array of the button ids added to this group</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">            //This is used for destruction later...</span>
<a name="l1103"><span class="linenum">1103</span></a>              var addedButtons = [],
<a name="l1104"><span class="linenum">1104</span></a>                  button;
<a name="l1105"><span class="linenum">1105</span></a>              
<a name="l1106"><span class="linenum">1106</span></a>  
<a name="l1107"><span class="linenum">1107</span></a>              for (var i = 0; i &lt; oGroup.buttons.length; i++) {
<a name="l1108"><span class="linenum">1108</span></a>                  var li = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('li');
<a name="l1109"><span class="linenum">1109</span></a>                  li.className = this.CLASS_PREFIX + '-groupitem';
<a name="l1110"><span class="linenum">1110</span></a>                  ul.appendChild(li);
<a name="l1111"><span class="linenum">1111</span></a>                  if ((oGroup.buttons[i].type !== undefined) &amp;&amp; oGroup.buttons[i].type == 'separator') {
<a name="l1112"><span class="linenum">1112</span></a>                      this.addSeparator(li);
<a name="l1113"><span class="linenum">1113</span></a>                  } else {
<a name="l1114"><span class="linenum">1114</span></a>                      oGroup.buttons[i].container = li;
<a name="l1115"><span class="linenum">1115</span></a>                      button = this.addButton(oGroup.buttons[i]);
<a name="l1116"><span class="linenum">1116</span></a>                      if (button) {
<a name="l1117"><span class="linenum">1117</span></a>                          addedButtons[addedButtons.length]  = button.id;
<a name="l1118"><span class="linenum">1118</span></a>                      }
<a name="l1119"><span class="linenum">1119</span></a>                  }
<a name="l1120"><span class="linenum">1120</span></a>              }
<a name="l1121"><span class="linenum">1121</span></a>              return addedButtons;
<a name="l1122"><span class="linenum">1122</span></a>          },
<a name="l1123"><span class="linenum">1123</span></a>          <span class="comment">/**</span>
<a name="l1124"><span class="linenum">1124</span></a>  <span class="comment">        * @method addButtonToGroup</span>
<a name="l1125"><span class="linenum">1125</span></a>  <span class="comment">        * @description Add a new button to a toolbar group. Buttons supported:</span>
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">        *   push, split, menu, select, color, spin</span>
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">        * @param {Object} oButton Object literal reference to the Button's Config</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">        * @param {String} group The Group identifier passed into the initial config</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">        * @param {HTMLElement} after Optional HTML element to insert this button after in the DOM.</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment">        */</span>
<a name="l1131"><span class="linenum">1131</span></a>          addButtonToGroup: function(oButton, group, after) {
<a name="l1132"><span class="linenum">1132</span></a>              var groupCont = this._buttonGroupList[group],
<a name="l1133"><span class="linenum">1133</span></a>                  li = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('li');
<a name="l1134"><span class="linenum">1134</span></a>  
<a name="l1135"><span class="linenum">1135</span></a>              li.className = this.CLASS_PREFIX + '-groupitem';
<a name="l1136"><span class="linenum">1136</span></a>              oButton.container = li;
<a name="l1137"><span class="linenum">1137</span></a>              this.addButton(oButton, after);
<a name="l1138"><span class="linenum">1138</span></a>              groupCont.appendChild(li);
<a name="l1139"><span class="linenum">1139</span></a>          },
<a name="l1140"><span class="linenum">1140</span></a>          <span class="comment">/**</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">        * @method addButton</span>
<a name="l1142"><span class="linenum">1142</span></a>  <span class="comment">        * @description Add a new button to the toolbar. Buttons supported:</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">        *   push, split, menu, select, color, spin</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">        * @param {Object} oButton Object literal reference to the Button's Config</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment">        * @param {HTMLElement} after Optional HTML element to insert this button after in the DOM.</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">        */</span>
<a name="l1147"><span class="linenum">1147</span></a>          addButton: function(oButton, after) {
<a name="l1148"><span class="linenum">1148</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')) {
<a name="l1149"><span class="linenum">1149</span></a>                  this._queue[this._queue.length] = ['addButton', arguments];
<a name="l1150"><span class="linenum">1150</span></a>                  return false;
<a name="l1151"><span class="linenum">1151</span></a>              }
<a name="l1152"><span class="linenum">1152</span></a>              if (!this._buttonList) {
<a name="l1153"><span class="linenum">1153</span></a>                  this._buttonList = [];
<a name="l1154"><span class="linenum">1154</span></a>              }
<a name="l1155"><span class="linenum">1155</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Adding button of type: ' + oButton.type, 'info', 'Toolbar');
<a name="l1156"><span class="linenum">1156</span></a>              if (!oButton.container) {
<a name="l1157"><span class="linenum">1157</span></a>                  oButton.container = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont');
<a name="l1158"><span class="linenum">1158</span></a>              }
<a name="l1159"><span class="linenum">1159</span></a>  
<a name="l1160"><span class="linenum">1160</span></a>              if ((oButton.type == 'menu') || (oButton.type == 'split') || (oButton.type == 'select')) {
<a name="l1161"><span class="linenum">1161</span></a>                  if (Lang.<a class="function" onClick="logFunction('isArray')" href="../../../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(oButton.menu)) {
<a name="l1162"><span class="linenum">1162</span></a>                      for (var i in oButton.menu) {
<a name="l1163"><span class="linenum">1163</span></a>                          if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(oButton.menu, i)) {
<a name="l1164"><span class="linenum">1164</span></a>                              var funcObject = {
<a name="l1165"><span class="linenum">1165</span></a>                                  fn: function(ev, x, oMenu) {
<a name="l1166"><span class="linenum">1166</span></a>                                      if (!oButton.menucmd) {
<a name="l1167"><span class="linenum">1167</span></a>                                          oButton.menucmd = oButton.value;
<a name="l1168"><span class="linenum">1168</span></a>                                      }
<a name="l1169"><span class="linenum">1169</span></a>                                      oButton.value = ((oMenu.value) ? oMenu.value : oMenu._oText.nodeValue);
<a name="l1170"><span class="linenum">1170</span></a>                                  },
<a name="l1171"><span class="linenum">1171</span></a>                                  scope: this
<a name="l1172"><span class="linenum">1172</span></a>                              };
<a name="l1173"><span class="linenum">1173</span></a>                              oButton.menu[i].onclick = funcObject;
<a name="l1174"><span class="linenum">1174</span></a>                          }
<a name="l1175"><span class="linenum">1175</span></a>                      }
<a name="l1176"><span class="linenum">1176</span></a>                  }
<a name="l1177"><span class="linenum">1177</span></a>              }
<a name="l1178"><span class="linenum">1178</span></a>              var _oButton = {}, skip = false;
<a name="l1179"><span class="linenum">1179</span></a>              for (var o in oButton) {
<a name="l1180"><span class="linenum">1180</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(oButton, o)) {
<a name="l1181"><span class="linenum">1181</span></a>                      if (!this._toolbarConfigs[o]) {
<a name="l1182"><span class="linenum">1182</span></a>                          _oButton[o] = oButton[o];
<a name="l1183"><span class="linenum">1183</span></a>                      }
<a name="l1184"><span class="linenum">1184</span></a>                  }
<a name="l1185"><span class="linenum">1185</span></a>              }
<a name="l1186"><span class="linenum">1186</span></a>              if (oButton.type == 'select') {
<a name="l1187"><span class="linenum">1187</span></a>                  _oButton.type = 'menu';
<a name="l1188"><span class="linenum">1188</span></a>              }
<a name="l1189"><span class="linenum">1189</span></a>              if (oButton.type == 'spin') {
<a name="l1190"><span class="linenum">1190</span></a>                  _oButton.type = 'push';
<a name="l1191"><span class="linenum">1191</span></a>              }
<a name="l1192"><span class="linenum">1192</span></a>              if (_oButton.type == 'color') {
<a name="l1193"><span class="linenum">1193</span></a>                  if (YAHOO.widget.Overlay) {
<a name="l1194"><span class="linenum">1194</span></a>                      _oButton = this._makeColorButton(_oButton);
<a name="l1195"><span class="linenum">1195</span></a>                  } else {
<a name="l1196"><span class="linenum">1196</span></a>                      skip = true;
<a name="l1197"><span class="linenum">1197</span></a>                  }
<a name="l1198"><span class="linenum">1198</span></a>              }
<a name="l1199"><span class="linenum">1199</span></a>              if (_oButton.menu) {
<a name="l1200"><span class="linenum">1200</span></a>                  if ((YAHOO.widget.Overlay) &amp;&amp; (oButton.menu instanceof YAHOO.widget.Overlay)) {
<a name="l1201"><span class="linenum">1201</span></a>                      oButton.menu.showEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function() {
<a name="l1202"><span class="linenum">1202</span></a>                          this._button = _oButton;
<a name="l1203"><span class="linenum">1203</span></a>                      });
<a name="l1204"><span class="linenum">1204</span></a>                  } else {
<a name="l1205"><span class="linenum">1205</span></a>                      for (var m = 0; m &lt; _oButton.menu.length; m++) {
<a name="l1206"><span class="linenum">1206</span></a>                          if (!_oButton.menu[m].value) {
<a name="l1207"><span class="linenum">1207</span></a>                              _oButton.menu[m].value = _oButton.menu[m].text;
<a name="l1208"><span class="linenum">1208</span></a>                          }
<a name="l1209"><span class="linenum">1209</span></a>                      }
<a name="l1210"><span class="linenum">1210</span></a>                      if (this.browser.webkit) {
<a name="l1211"><span class="linenum">1211</span></a>                          _oButton.focusmenu = false;
<a name="l1212"><span class="linenum">1212</span></a>                      }
<a name="l1213"><span class="linenum">1213</span></a>                  }
<a name="l1214"><span class="linenum">1214</span></a>              }
<a name="l1215"><span class="linenum">1215</span></a>              if (skip) {
<a name="l1216"><span class="linenum">1216</span></a>                  oButton = false;
<a name="l1217"><span class="linenum">1217</span></a>              } else {
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">                //Add to .get('buttons') manually</span>
<a name="l1219"><span class="linenum">1219</span></a>                  this._configs.buttons.value[this._configs.buttons.value.length] = oButton;
<a name="l1220"><span class="linenum">1220</span></a>                  
<a name="l1221"><span class="linenum">1221</span></a>                  var tmp = new this.buttonType(_oButton);
<a name="l1222"><span class="linenum">1222</span></a>                  tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').tabIndex = '-1';
<a name="l1223"><span class="linenum">1223</span></a>                  tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('role', 'button');
<a name="l1224"><span class="linenum">1224</span></a>                  tmp._selected = true;
<a name="l1225"><span class="linenum">1225</span></a>                  
<a name="l1226"><span class="linenum">1226</span></a>                  if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">                    //Toolbar is disabled, disable the new button too!</span>
<a name="l1228"><span class="linenum">1228</span></a>                      tmp.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true);
<a name="l1229"><span class="linenum">1229</span></a>                  }
<a name="l1230"><span class="linenum">1230</span></a>                  if (!oButton.id) {
<a name="l1231"><span class="linenum">1231</span></a>                      oButton.id = tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id');
<a name="l1232"><span class="linenum">1232</span></a>                  }
<a name="l1233"><span class="linenum">1233</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Button created (' + oButton.type + ')', 'info', 'Toolbar');
<a name="l1234"><span class="linenum">1234</span></a>                  
<a name="l1235"><span class="linenum">1235</span></a>                  if (after) {
<a name="l1236"><span class="linenum">1236</span></a>                      var el = tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element');
<a name="l1237"><span class="linenum">1237</span></a>                      var nextSib = null;
<a name="l1238"><span class="linenum">1238</span></a>                      if (after.get) {
<a name="l1239"><span class="linenum">1239</span></a>                          nextSib = after.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').nextSibling;
<a name="l1240"><span class="linenum">1240</span></a>                      } else if (after.nextSibling) {
<a name="l1241"><span class="linenum">1241</span></a>                          nextSib = after.nextSibling;
<a name="l1242"><span class="linenum">1242</span></a>                      }
<a name="l1243"><span class="linenum">1243</span></a>                      if (nextSib) {
<a name="l1244"><span class="linenum">1244</span></a>                          nextSib.parentNode.<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(el, nextSib);
<a name="l1245"><span class="linenum">1245</span></a>                      }
<a name="l1246"><span class="linenum">1246</span></a>                  }
<a name="l1247"><span class="linenum">1247</span></a>                  tmp.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_PREFIX + '-' + tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value'));
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>                  var icon = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l1250"><span class="linenum">1250</span></a>                  icon.className = this.CLASS_PREFIX + '-icon';
<a name="l1251"><span class="linenum">1251</span></a>                  tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(icon, tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild'));
<a name="l1252"><span class="linenum">1252</span></a>                  if (tmp._button.tagName.toLowerCase() == 'button') {
<a name="l1253"><span class="linenum">1253</span></a>                      tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('unselectable', 'on');
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment">                    //Replace the Button HTML Element with an a href if it exists</span>
<a name="l1255"><span class="linenum">1255</span></a>                      var a = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('a');
<a name="l1256"><span class="linenum">1256</span></a>                      a.innerHTML = tmp._button.innerHTML;
<a name="l1257"><span class="linenum">1257</span></a>                      a.href = '#';
<a name="l1258"><span class="linenum">1258</span></a>                      a.tabIndex = '-1';
<a name="l1259"><span class="linenum">1259</span></a>                      Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(a, 'click', function(ev) {
<a name="l1260"><span class="linenum">1260</span></a>                          Event.stopEvent(ev);
<a name="l1261"><span class="linenum">1261</span></a>                      });
<a name="l1262"><span class="linenum">1262</span></a>                      tmp._button.parentNode.replaceChild(a, tmp._button);
<a name="l1263"><span class="linenum">1263</span></a>                      tmp._button = a;
<a name="l1264"><span class="linenum">1264</span></a>                  }
<a name="l1265"><span class="linenum">1265</span></a>  
<a name="l1266"><span class="linenum">1266</span></a>                  if (oButton.type == 'select') {
<a name="l1267"><span class="linenum">1267</span></a>                      if (tmp._button.tagName.toLowerCase() == 'select') {
<a name="l1268"><span class="linenum">1268</span></a>                          icon.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(icon);
<a name="l1269"><span class="linenum">1269</span></a>                          var iel = tmp._button,
<a name="l1270"><span class="linenum">1270</span></a>                              parEl = tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element');
<a name="l1271"><span class="linenum">1271</span></a>                          parEl.parentNode.replaceChild(iel, parEl);
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">                        //The 'element' value is currently the orphaned element</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">                        //In order for &quot;destroy&quot; to execute we need to get('element') to reference the correct node.</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">                        //I'm not sure if there is a direct approach to setting this value.</span>
<a name="l1275"><span class="linenum">1275</span></a>                          tmp._configs.element.value = iel;
<a name="l1276"><span class="linenum">1276</span></a>                      } else {
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">                        //Don't put a class on it if it's a real select element</span>
<a name="l1278"><span class="linenum">1278</span></a>                          tmp.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_PREFIX + '-select');
<a name="l1279"><span class="linenum">1279</span></a>                      }
<a name="l1280"><span class="linenum">1280</span></a>                  }
<a name="l1281"><span class="linenum">1281</span></a>                  if (oButton.type == 'spin') {
<a name="l1282"><span class="linenum">1282</span></a>                      if (!Lang.<a class="function" onClick="logFunction('isArray')" href="../../../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(oButton.range)) {
<a name="l1283"><span class="linenum">1283</span></a>                          oButton.range = [ 10, 100 ];
<a name="l1284"><span class="linenum">1284</span></a>                      }
<a name="l1285"><span class="linenum">1285</span></a>                      this._makeSpinButton(tmp, oButton);
<a name="l1286"><span class="linenum">1286</span></a>                  }
<a name="l1287"><span class="linenum">1287</span></a>                  tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('title', tmp.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label'));
<a name="l1288"><span class="linenum">1288</span></a>                  if (oButton.type != 'spin') {
<a name="l1289"><span class="linenum">1289</span></a>                      if ((YAHOO.widget.Overlay) &amp;&amp; (_oButton.menu instanceof YAHOO.widget.Overlay)) {
<a name="l1290"><span class="linenum">1290</span></a>                          var showPicker = function(ev) {
<a name="l1291"><span class="linenum">1291</span></a>                              var exec = true;
<a name="l1292"><span class="linenum">1292</span></a>                              if (ev.keyCode &amp;&amp; (ev.keyCode == 9)) {
<a name="l1293"><span class="linenum">1293</span></a>                                  exec = false;
<a name="l1294"><span class="linenum">1294</span></a>                              }
<a name="l1295"><span class="linenum">1295</span></a>                              if (exec) {
<a name="l1296"><span class="linenum">1296</span></a>                                  if (this._colorPicker) {
<a name="l1297"><span class="linenum">1297</span></a>                                      this._colorPicker._button = oButton.value;
<a name="l1298"><span class="linenum">1298</span></a>                                  }
<a name="l1299"><span class="linenum">1299</span></a>                                  var menuEL = tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().element;
<a name="l1300"><span class="linenum">1300</span></a>                                  if (Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(menuEL, 'visibility') == 'hidden') {
<a name="l1301"><span class="linenum">1301</span></a>                                      tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('show')" href="../../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l1302"><span class="linenum">1302</span></a>                                  } else {
<a name="l1303"><span class="linenum">1303</span></a>                                      tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('hide')" href="../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l1304"><span class="linenum">1304</span></a>                                  }
<a name="l1305"><span class="linenum">1305</span></a>                              }
<a name="l1306"><span class="linenum">1306</span></a>                              YAHOO.util.Event.stopEvent(ev);
<a name="l1307"><span class="linenum">1307</span></a>                          };
<a name="l1308"><span class="linenum">1308</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('mousedown', showPicker, oButton, this);
<a name="l1309"><span class="linenum">1309</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('keydown', showPicker, oButton, this);
<a name="l1310"><span class="linenum">1310</span></a>                          
<a name="l1311"><span class="linenum">1311</span></a>                      } else if ((oButton.type != 'menu') &amp;&amp; (oButton.type != 'select')) {
<a name="l1312"><span class="linenum">1312</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('keypress', this._buttonClick, oButton, this);
<a name="l1313"><span class="linenum">1313</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('mousedown', function(ev) {
<a name="l1314"><span class="linenum">1314</span></a>                              YAHOO.util.Event.stopEvent(ev);
<a name="l1315"><span class="linenum">1315</span></a>                              this._buttonClick(ev, oButton);
<a name="l1316"><span class="linenum">1316</span></a>                          }, oButton, this);
<a name="l1317"><span class="linenum">1317</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', function(ev) {
<a name="l1318"><span class="linenum">1318</span></a>                              YAHOO.util.Event.stopEvent(ev);
<a name="l1319"><span class="linenum">1319</span></a>                          });
<a name="l1320"><span class="linenum">1320</span></a>                      } else {
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">                        //Stop the mousedown event so we can trap the selection in the editor!</span>
<a name="l1322"><span class="linenum">1322</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('mousedown', function(ev) {
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">                            //YAHOO.util.Event.stopEvent(ev);</span>
<a name="l1324"><span class="linenum">1324</span></a>                          });
<a name="l1325"><span class="linenum">1325</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', function(ev) {
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">                            //YAHOO.util.Event.stopEvent(ev);</span>
<a name="l1327"><span class="linenum">1327</span></a>                          });
<a name="l1328"><span class="linenum">1328</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('change', function(ev) {
<a name="l1329"><span class="linenum">1329</span></a>                              if (!ev.target) {
<a name="l1330"><span class="linenum">1330</span></a>                                  if (!oButton.menucmd) {
<a name="l1331"><span class="linenum">1331</span></a>                                      oButton.menucmd = oButton.value;
<a name="l1332"><span class="linenum">1332</span></a>                                  }
<a name="l1333"><span class="linenum">1333</span></a>                                  oButton.value = ev.value;
<a name="l1334"><span class="linenum">1334</span></a>                                  this._buttonClick(ev, oButton);
<a name="l1335"><span class="linenum">1335</span></a>                              }
<a name="l1336"><span class="linenum">1336</span></a>                          }, this, true);
<a name="l1337"><span class="linenum">1337</span></a>  
<a name="l1338"><span class="linenum">1338</span></a>                          var self = this;
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment">                        //Hijack the mousedown event in the menu and make it fire a button click..</span>
<a name="l1340"><span class="linenum">1340</span></a>                          tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('appendTo', function() {
<a name="l1341"><span class="linenum">1341</span></a>                              var tmp = this;
<a name="l1342"><span class="linenum">1342</span></a>                              if (tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>() &amp;&amp; tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().mouseDownEvent) {
<a name="l1343"><span class="linenum">1343</span></a>                                  tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().mouseDownEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function(ev, args) {
<a name="l1344"><span class="linenum">1344</span></a>                                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('mouseDownEvent', 'warn', 'Toolbar');
<a name="l1345"><span class="linenum">1345</span></a>                                      var oMenu = args[1];
<a name="l1346"><span class="linenum">1346</span></a>                                      YAHOO.util.Event.stopEvent(args[0]);
<a name="l1347"><span class="linenum">1347</span></a>                                      tmp._onMenuClick(args[0], tmp);
<a name="l1348"><span class="linenum">1348</span></a>                                      if (!oButton.menucmd) {
<a name="l1349"><span class="linenum">1349</span></a>                                          oButton.menucmd = oButton.value;
<a name="l1350"><span class="linenum">1350</span></a>                                      }
<a name="l1351"><span class="linenum">1351</span></a>                                      oButton.value = ((oMenu.value) ? oMenu.value : oMenu._oText.nodeValue);
<a name="l1352"><span class="linenum">1352</span></a>                                      self._buttonClick.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, args[1], oButton);
<a name="l1353"><span class="linenum">1353</span></a>                                      tmp._hideMenu();
<a name="l1354"><span class="linenum">1354</span></a>                                      return false;
<a name="l1355"><span class="linenum">1355</span></a>                                  });
<a name="l1356"><span class="linenum">1356</span></a>                                  tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().clickEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function(ev, args) {
<a name="l1357"><span class="linenum">1357</span></a>                                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('clickEvent', 'warn', 'Toolbar');
<a name="l1358"><span class="linenum">1358</span></a>                                      YAHOO.util.Event.stopEvent(args[0]);
<a name="l1359"><span class="linenum">1359</span></a>                                  });
<a name="l1360"><span class="linenum">1360</span></a>                                  tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().mouseUpEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function(ev, args) {
<a name="l1361"><span class="linenum">1361</span></a>                                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('mouseUpEvent', 'warn', 'Toolbar');
<a name="l1362"><span class="linenum">1362</span></a>                                      YAHOO.util.Event.stopEvent(args[0]);
<a name="l1363"><span class="linenum">1363</span></a>                                  });
<a name="l1364"><span class="linenum">1364</span></a>                              }
<a name="l1365"><span class="linenum">1365</span></a>                          });
<a name="l1366"><span class="linenum">1366</span></a>                          
<a name="l1367"><span class="linenum">1367</span></a>                      }
<a name="l1368"><span class="linenum">1368</span></a>                  } else {
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">                    //Stop the mousedown event so we can trap the selection in the editor!</span>
<a name="l1370"><span class="linenum">1370</span></a>                      tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('mousedown', function(ev) {
<a name="l1371"><span class="linenum">1371</span></a>                          YAHOO.util.Event.stopEvent(ev);
<a name="l1372"><span class="linenum">1372</span></a>                      });
<a name="l1373"><span class="linenum">1373</span></a>                      tmp.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', function(ev) {
<a name="l1374"><span class="linenum">1374</span></a>                          YAHOO.util.Event.stopEvent(ev);
<a name="l1375"><span class="linenum">1375</span></a>                      });
<a name="l1376"><span class="linenum">1376</span></a>                  }
<a name="l1377"><span class="linenum">1377</span></a>                  if (this.browser.ie) {
<a name="l1378"><span class="linenum">1378</span></a>                      <span class="comment">/*</span>
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">                    //Add a couple of new events for IE</span>
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment">                    tmp.DOM_EVENTS.focusin = true;</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment">                    tmp.DOM_EVENTS.focusout = true;</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment">                    </span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment">                    //Stop them so we don't loose focus in the Editor</span>
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment">                    tmp.on('focusin', function(ev) {</span>
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">                        YAHOO.util.Event.stopEvent(ev);</span>
<a name="l1386"><span class="linenum">1386</span></a>  <span class="comment">                    }, oButton, this);</span>
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment">                    </span>
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">                    tmp.on('focusout', function(ev) {</span>
<a name="l1389"><span class="linenum">1389</span></a>  <span class="comment">                        YAHOO.util.Event.stopEvent(ev);</span>
<a name="l1390"><span class="linenum">1390</span></a>  <span class="comment">                    }, oButton, this);</span>
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment">                    tmp.on('click', function(ev) {</span>
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment">                        YAHOO.util.Event.stopEvent(ev);</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment">                    }, oButton, this);</span>
<a name="l1394"><span class="linenum">1394</span></a>  <span class="comment">                    */</span>
<a name="l1395"><span class="linenum">1395</span></a>                  }
<a name="l1396"><span class="linenum">1396</span></a>                  if (this.browser.webkit) {
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment">                    //This will keep the document from gaining focus and the editor from loosing it..</span>
<a name="l1398"><span class="linenum">1398</span></a>  <span class="comment">                    //Forcefully remove the focus calls in button!</span>
<a name="l1399"><span class="linenum">1399</span></a>                      tmp.hasFocus = function() {
<a name="l1400"><span class="linenum">1400</span></a>                          return true;
<a name="l1401"><span class="linenum">1401</span></a>                      };
<a name="l1402"><span class="linenum">1402</span></a>                  }
<a name="l1403"><span class="linenum">1403</span></a>                  this._buttonList[this._buttonList.length] = tmp;
<a name="l1404"><span class="linenum">1404</span></a>                  if ((oButton.type == 'menu') || (oButton.type == 'split') || (oButton.type == 'select')) {
<a name="l1405"><span class="linenum">1405</span></a>                      if (Lang.<a class="function" onClick="logFunction('isArray')" href="../../../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(oButton.menu)) {
<a name="l1406"><span class="linenum">1406</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Button type <a class="function" onClick="logFunction('is')" href="../../../../../../_functions/is.html" onMouseOver="funcPopup(event,'is')">is</a> (' + oButton.type + '), doing extra renderer work.', 'info', 'Toolbar');
<a name="l1407"><span class="linenum">1407</span></a>                          var menu = tmp.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>();
<a name="l1408"><span class="linenum">1408</span></a>                          if (menu &amp;&amp; menu.renderEvent) {
<a name="l1409"><span class="linenum">1409</span></a>                              menu.renderEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(this._addMenuClasses, tmp);
<a name="l1410"><span class="linenum">1410</span></a>                              if (oButton.renderer) {
<a name="l1411"><span class="linenum">1411</span></a>                                  menu.renderEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(oButton.renderer, tmp);
<a name="l1412"><span class="linenum">1412</span></a>                              }
<a name="l1413"><span class="linenum">1413</span></a>                          }
<a name="l1414"><span class="linenum">1414</span></a>                      }
<a name="l1415"><span class="linenum">1415</span></a>                  }
<a name="l1416"><span class="linenum">1416</span></a>              }
<a name="l1417"><span class="linenum">1417</span></a>              return oButton;
<a name="l1418"><span class="linenum">1418</span></a>          },
<a name="l1419"><span class="linenum">1419</span></a>          <span class="comment">/**</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment">        * @method addSeparator</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">        * @description Add a new button separator to the toolbar.</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment">        * @param {HTMLElement} cont Optional HTML element to insert this button into.</span>
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment">        * @param {HTMLElement} after Optional HTML element to insert this button after in the DOM.</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">        */</span>
<a name="l1425"><span class="linenum">1425</span></a>          addSeparator: function(cont, after) {
<a name="l1426"><span class="linenum">1426</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')) {
<a name="l1427"><span class="linenum">1427</span></a>                  this._queue[this._queue.length] = ['addSeparator', arguments];
<a name="l1428"><span class="linenum">1428</span></a>                  return false;
<a name="l1429"><span class="linenum">1429</span></a>              }
<a name="l1430"><span class="linenum">1430</span></a>              var sepCont = ((cont) ? cont : this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont'));
<a name="l1431"><span class="linenum">1431</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')) {
<a name="l1432"><span class="linenum">1432</span></a>                  this._queue[this._queue.length] = ['addSeparator', arguments];
<a name="l1433"><span class="linenum">1433</span></a>                  return false;
<a name="l1434"><span class="linenum">1434</span></a>              }
<a name="l1435"><span class="linenum">1435</span></a>              if (this._sepCount === null) {
<a name="l1436"><span class="linenum">1436</span></a>                  this._sepCount = 0;
<a name="l1437"><span class="linenum">1437</span></a>              }
<a name="l1438"><span class="linenum">1438</span></a>              if (!this._sep) {
<a name="l1439"><span class="linenum">1439</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Separator does not yet exist, creating', 'info', 'Toolbar');
<a name="l1440"><span class="linenum">1440</span></a>                  this._sep = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('SPAN');
<a name="l1441"><span class="linenum">1441</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._sep, this.CLASS_SEPARATOR);
<a name="l1442"><span class="linenum">1442</span></a>                  this._sep.innerHTML = '|';
<a name="l1443"><span class="linenum">1443</span></a>              }
<a name="l1444"><span class="linenum">1444</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Separator does exist, cloning', 'info', 'Toolbar');
<a name="l1445"><span class="linenum">1445</span></a>              var _sep = this._sep.<a class="function" onClick="logFunction('cloneNode')" href="../../../../../../_functions/clonenode.html" onMouseOver="funcPopup(event,'clonenode')">cloneNode</a>(true);
<a name="l1446"><span class="linenum">1446</span></a>              this._sepCount++;
<a name="l1447"><span class="linenum">1447</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_sep, this.CLASS_SEPARATOR + '-' + this._sepCount);
<a name="l1448"><span class="linenum">1448</span></a>              if (after) {
<a name="l1449"><span class="linenum">1449</span></a>                  var nextSib = null;
<a name="l1450"><span class="linenum">1450</span></a>                  if (after.get) {
<a name="l1451"><span class="linenum">1451</span></a>                      nextSib = after.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').nextSibling;
<a name="l1452"><span class="linenum">1452</span></a>                  } else if (after.nextSibling) {
<a name="l1453"><span class="linenum">1453</span></a>                      nextSib = after.nextSibling;
<a name="l1454"><span class="linenum">1454</span></a>                  } else {
<a name="l1455"><span class="linenum">1455</span></a>                      nextSib = after;
<a name="l1456"><span class="linenum">1456</span></a>                  }
<a name="l1457"><span class="linenum">1457</span></a>                  if (nextSib) {
<a name="l1458"><span class="linenum">1458</span></a>                      if (nextSib == after) {
<a name="l1459"><span class="linenum">1459</span></a>                          nextSib.parentNode.appendChild(_sep);
<a name="l1460"><span class="linenum">1460</span></a>                      } else {
<a name="l1461"><span class="linenum">1461</span></a>                          nextSib.parentNode.<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(_sep, nextSib);
<a name="l1462"><span class="linenum">1462</span></a>                      }
<a name="l1463"><span class="linenum">1463</span></a>                  }
<a name="l1464"><span class="linenum">1464</span></a>              } else {
<a name="l1465"><span class="linenum">1465</span></a>                  sepCont.appendChild(_sep);
<a name="l1466"><span class="linenum">1466</span></a>              }
<a name="l1467"><span class="linenum">1467</span></a>              return _sep;
<a name="l1468"><span class="linenum">1468</span></a>          },
<a name="l1469"><span class="linenum">1469</span></a>          <span class="comment">/**</span>
<a name="l1470"><span class="linenum">1470</span></a>  <span class="comment">        * @method _createColorPicker</span>
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment">        * @private</span>
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">        * @description Creates the core DOM reference to the color picker menu item.</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">        * @param {String} id the id of the toolbar to prefix this DOM container with.</span>
<a name="l1474"><span class="linenum">1474</span></a>  <span class="comment">        */</span>
<a name="l1475"><span class="linenum">1475</span></a>          _createColorPicker: function(id) {
<a name="l1476"><span class="linenum">1476</span></a>              if (Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_colors')) {
<a name="l1477"><span class="linenum">1477</span></a>                 Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_colors').parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_colors'));
<a name="l1478"><span class="linenum">1478</span></a>              }
<a name="l1479"><span class="linenum">1479</span></a>              var picker = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l1480"><span class="linenum">1480</span></a>              picker.className = 'yui-toolbar-colors';
<a name="l1481"><span class="linenum">1481</span></a>              picker.id = id + '_colors';
<a name="l1482"><span class="linenum">1482</span></a>              picker.style.display = 'none';
<a name="l1483"><span class="linenum">1483</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(window, 'load', function() {
<a name="l1484"><span class="linenum">1484</span></a>                  document.body.appendChild(picker);
<a name="l1485"><span class="linenum">1485</span></a>              }, this, true);
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>              this._colorPicker = picker;
<a name="l1488"><span class="linenum">1488</span></a>  
<a name="l1489"><span class="linenum">1489</span></a>              var html = '';
<a name="l1490"><span class="linenum">1490</span></a>              for (var i in this._colorData) {
<a name="l1491"><span class="linenum">1491</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(this._colorData, i)) {
<a name="l1492"><span class="linenum">1492</span></a>                      html += '&lt;a style=&quot;background-color: ' + i + '&quot; href=&quot;#&quot;&gt;' + i.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>('#', '') + '&lt;/a&gt;';
<a name="l1493"><span class="linenum">1493</span></a>                  }
<a name="l1494"><span class="linenum">1494</span></a>              }
<a name="l1495"><span class="linenum">1495</span></a>              html += '&lt;span&gt;&lt;em&gt;X&lt;/em&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/span&gt;';
<a name="l1496"><span class="linenum">1496</span></a>              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l1497"><span class="linenum">1497</span></a>                  picker.innerHTML = html;
<a name="l1498"><span class="linenum">1498</span></a>              }, 0);
<a name="l1499"><span class="linenum">1499</span></a>  
<a name="l1500"><span class="linenum">1500</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(picker, 'mouseover', function(ev) {
<a name="l1501"><span class="linenum">1501</span></a>                  var picker = this._colorPicker;
<a name="l1502"><span class="linenum">1502</span></a>                  var em = picker.getElementsByTagName('em')[0];
<a name="l1503"><span class="linenum">1503</span></a>                  var strong = picker.getElementsByTagName('strong')[0];
<a name="l1504"><span class="linenum">1504</span></a>                  var tar = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l1505"><span class="linenum">1505</span></a>                  if (tar.tagName.toLowerCase() == 'a') {
<a name="l1506"><span class="linenum">1506</span></a>                      em.style.backgroundColor = tar.style.backgroundColor;
<a name="l1507"><span class="linenum">1507</span></a>                      strong.innerHTML = this._colorData['#' + tar.innerHTML] + '&lt;br&gt;' + tar.innerHTML;
<a name="l1508"><span class="linenum">1508</span></a>                  }
<a name="l1509"><span class="linenum">1509</span></a>              }, this, true);
<a name="l1510"><span class="linenum">1510</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(picker, 'focus', function(ev) {
<a name="l1511"><span class="linenum">1511</span></a>                  Event.stopEvent(ev);
<a name="l1512"><span class="linenum">1512</span></a>              });
<a name="l1513"><span class="linenum">1513</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(picker, 'click', function(ev) {
<a name="l1514"><span class="linenum">1514</span></a>                  Event.stopEvent(ev);
<a name="l1515"><span class="linenum">1515</span></a>              });
<a name="l1516"><span class="linenum">1516</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(picker, 'mousedown', function(ev) {
<a name="l1517"><span class="linenum">1517</span></a>                  Event.stopEvent(ev);
<a name="l1518"><span class="linenum">1518</span></a>                  var tar = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l1519"><span class="linenum">1519</span></a>                  if (tar.tagName.toLowerCase() == 'a') {
<a name="l1520"><span class="linenum">1520</span></a>                      var retVal = this.fireEvent('colorPickerClicked', { type: 'colorPickerClicked', target: this, button: this._colorPicker._button, color: tar.innerHTML, colorName: this._colorData['#' + tar.innerHTML] } );
<a name="l1521"><span class="linenum">1521</span></a>                      if (retVal !== false) {
<a name="l1522"><span class="linenum">1522</span></a>                          var info = {
<a name="l1523"><span class="linenum">1523</span></a>                              color: tar.innerHTML,
<a name="l1524"><span class="linenum">1524</span></a>                              colorName: this._colorData['#' + tar.innerHTML],
<a name="l1525"><span class="linenum">1525</span></a>                              value: this._colorPicker._button 
<a name="l1526"><span class="linenum">1526</span></a>                          };
<a name="l1527"><span class="linenum">1527</span></a>                      
<a name="l1528"><span class="linenum">1528</span></a>                          this.fireEvent('buttonClick', { type: 'buttonClick', target: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), button: info });
<a name="l1529"><span class="linenum">1529</span></a>                      }
<a name="l1530"><span class="linenum">1530</span></a>                      this.getButtonByValue(this._colorPicker._button).<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('hide')" href="../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l1531"><span class="linenum">1531</span></a>                  }
<a name="l1532"><span class="linenum">1532</span></a>              }, this, true);
<a name="l1533"><span class="linenum">1533</span></a>          },
<a name="l1534"><span class="linenum">1534</span></a>          <span class="comment">/**</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">        * @method _resetColorPicker</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment">        * @private</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment">        * @description Clears the currently selected color or mouseover color in the color picker.</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment">        */</span>
<a name="l1539"><span class="linenum">1539</span></a>          _resetColorPicker: function() {
<a name="l1540"><span class="linenum">1540</span></a>              var em = this._colorPicker.getElementsByTagName('em')[0];
<a name="l1541"><span class="linenum">1541</span></a>              var strong = this._colorPicker.getElementsByTagName('strong')[0];
<a name="l1542"><span class="linenum">1542</span></a>              em.style.backgroundColor = 'transparent';
<a name="l1543"><span class="linenum">1543</span></a>              strong.innerHTML = '';
<a name="l1544"><span class="linenum">1544</span></a>          },
<a name="l1545"><span class="linenum">1545</span></a>          <span class="comment">/**</span>
<a name="l1546"><span class="linenum">1546</span></a>  <span class="comment">        * @method _makeColorButton</span>
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">        * @private</span>
<a name="l1548"><span class="linenum">1548</span></a>  <span class="comment">        * @description Called to turn a &quot;color&quot; button into a menu button with an Overlay for the menu.</span>
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment">        * @param {Object} _oButton &lt;a href=&quot;YAHOO.widget.ToolbarButton.html&quot;&gt;YAHOO.widget.ToolbarButton&lt;/a&gt; reference</span>
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment">        */</span>
<a name="l1551"><span class="linenum">1551</span></a>          _makeColorButton: function(_oButton) {
<a name="l1552"><span class="linenum">1552</span></a>              if (!this._colorPicker) {   
<a name="l1553"><span class="linenum">1553</span></a>                  this._createColorPicker(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'));
<a name="l1554"><span class="linenum">1554</span></a>              }
<a name="l1555"><span class="linenum">1555</span></a>              _oButton.type = 'color';
<a name="l1556"><span class="linenum">1556</span></a>              _oButton.menu = new YAHOO.widget.<a class="function" onClick="logFunction('Overlay')" href="../../../../../../_functions/overlay.html" onMouseOver="funcPopup(event,'overlay')">Overlay</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_' + _oButton.value + '_menu', { visible: false, position: 'absolute', iframe: true });
<a name="l1557"><span class="linenum">1557</span></a>              _oButton.menu.<a class="function" onClick="logFunction('setBody')" href="../../../../../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>('');
<a name="l1558"><span class="linenum">1558</span></a>              _oButton.menu.<a class="function" onClick="logFunction('render')" href="../../../../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont'));
<a name="l1559"><span class="linenum">1559</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_oButton.menu.element, 'yui-button-menu');
<a name="l1560"><span class="linenum">1560</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_oButton.menu.element, 'yui-color-button-menu');
<a name="l1561"><span class="linenum">1561</span></a>              _oButton.menu.beforeShowEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function() {
<a name="l1562"><span class="linenum">1562</span></a>                  _oButton.menu.cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('zindex', 5); <span class="comment">//Re Adjust the overlays zIndex.. not sure why.</span>
<a name="l1563"><span class="linenum">1563</span></a>                  _oButton.menu.cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('context', [this.getButtonById(_oButton.id).<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), 'tl', 'bl']); <span class="comment">//Re Adjust the overlay.. not sure why.</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment">                //Move the DOM reference of the color picker to the Overlay that we are about to show.</span>
<a name="l1565"><span class="linenum">1565</span></a>                  this._resetColorPicker();
<a name="l1566"><span class="linenum">1566</span></a>                  var _p = this._colorPicker;
<a name="l1567"><span class="linenum">1567</span></a>                  if (_p.parentNode) {
<a name="l1568"><span class="linenum">1568</span></a>                      _p.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(_p);
<a name="l1569"><span class="linenum">1569</span></a>                  }
<a name="l1570"><span class="linenum">1570</span></a>                  _oButton.menu.<a class="function" onClick="logFunction('setBody')" href="../../../../../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>('');
<a name="l1571"><span class="linenum">1571</span></a>                  _oButton.menu.appendToBody(_p);
<a name="l1572"><span class="linenum">1572</span></a>                  this._colorPicker.style.display = 'block';
<a name="l1573"><span class="linenum">1573</span></a>              }, this, true);
<a name="l1574"><span class="linenum">1574</span></a>              return _oButton;
<a name="l1575"><span class="linenum">1575</span></a>          },
<a name="l1576"><span class="linenum">1576</span></a>          <span class="comment">/**</span>
<a name="l1577"><span class="linenum">1577</span></a>  <span class="comment">        * @private</span>
<a name="l1578"><span class="linenum">1578</span></a>  <span class="comment">        * @method _makeSpinButton</span>
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment">        * @description Create a button similar to an OS Spin button.. It has an up/down arrow combo to scroll through a range of int values.</span>
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">        * @param {Object} _button &lt;a href=&quot;YAHOO.widget.ToolbarButton.html&quot;&gt;YAHOO.widget.ToolbarButton&lt;/a&gt; reference</span>
<a name="l1581"><span class="linenum">1581</span></a>  <span class="comment">        * @param {Object} oButton Object literal containing the buttons initial config</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">        */</span>
<a name="l1583"><span class="linenum">1583</span></a>          _makeSpinButton: function(_button, oButton) {
<a name="l1584"><span class="linenum">1584</span></a>              _button.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_PREFIX + '-spinbutton');
<a name="l1585"><span class="linenum">1585</span></a>              var self = this,
<a name="l1586"><span class="linenum">1586</span></a>                  _par = _button._button.parentNode.parentNode, //parentNode of Button Element for appending child
<a name="l1587"><span class="linenum">1587</span></a>                  range = oButton.range,
<a name="l1588"><span class="linenum">1588</span></a>                  _b1 = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('a'),
<a name="l1589"><span class="linenum">1589</span></a>                  _b2 = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('a');
<a name="l1590"><span class="linenum">1590</span></a>                  _b1.href = '#';
<a name="l1591"><span class="linenum">1591</span></a>                  _b2.href = '#';
<a name="l1592"><span class="linenum">1592</span></a>                  _b1.tabIndex = '-1';
<a name="l1593"><span class="linenum">1593</span></a>                  _b2.tabIndex = '-1';
<a name="l1594"><span class="linenum">1594</span></a>              
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment">            //Setup the up and down arrows</span>
<a name="l1596"><span class="linenum">1596</span></a>              _b1.className = 'up';
<a name="l1597"><span class="linenum">1597</span></a>              _b1.title = this.STR_SPIN_UP;
<a name="l1598"><span class="linenum">1598</span></a>              _b1.innerHTML = this.STR_SPIN_UP;
<a name="l1599"><span class="linenum">1599</span></a>              _b2.className = 'down';
<a name="l1600"><span class="linenum">1600</span></a>              _b2.title = this.STR_SPIN_DOWN;
<a name="l1601"><span class="linenum">1601</span></a>              _b2.innerHTML = this.STR_SPIN_DOWN;
<a name="l1602"><span class="linenum">1602</span></a>  
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">            //Append them to the container</span>
<a name="l1604"><span class="linenum">1604</span></a>              _par.appendChild(_b1);
<a name="l1605"><span class="linenum">1605</span></a>              _par.appendChild(_b2);
<a name="l1606"><span class="linenum">1606</span></a>              
<a name="l1607"><span class="linenum">1607</span></a>              var label = YAHOO.lang.<a class="function" onClick="logFunction('substitute')" href="../../../../../../_functions/substitute.html" onMouseOver="funcPopup(event,'substitute')">substitute</a>(this.STR_SPIN_LABEL, { VALUE: _button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label') });
<a name="l1608"><span class="linenum">1608</span></a>              _button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('title', label);
<a name="l1609"><span class="linenum">1609</span></a>  
<a name="l1610"><span class="linenum">1610</span></a>              var cleanVal = function(value) {
<a name="l1611"><span class="linenum">1611</span></a>                  value = ((value &lt; range[0]) ? range[0] : value);
<a name="l1612"><span class="linenum">1612</span></a>                  value = ((value &gt; range[1]) ? range[1] : value);
<a name="l1613"><span class="linenum">1613</span></a>                  return value;
<a name="l1614"><span class="linenum">1614</span></a>              };
<a name="l1615"><span class="linenum">1615</span></a>  
<a name="l1616"><span class="linenum">1616</span></a>              var br = this.browser;
<a name="l1617"><span class="linenum">1617</span></a>              var tbar = false;
<a name="l1618"><span class="linenum">1618</span></a>              var strLabel = this.STR_SPIN_LABEL;
<a name="l1619"><span class="linenum">1619</span></a>              if (this._titlebar &amp;&amp; this._titlebar.firstChild) {
<a name="l1620"><span class="linenum">1620</span></a>                  tbar = this._titlebar.firstChild;
<a name="l1621"><span class="linenum">1621</span></a>              }
<a name="l1622"><span class="linenum">1622</span></a>              
<a name="l1623"><span class="linenum">1623</span></a>              var _intUp = function(ev) {
<a name="l1624"><span class="linenum">1624</span></a>                  YAHOO.util.Event.stopEvent(ev);
<a name="l1625"><span class="linenum">1625</span></a>                  if (!_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled') &amp;&amp; (ev.keyCode != 9)) {
<a name="l1626"><span class="linenum">1626</span></a>                      var value = parseInt(_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label'), 10);
<a name="l1627"><span class="linenum">1627</span></a>                      value++;
<a name="l1628"><span class="linenum">1628</span></a>                      value = cleanVal(value);
<a name="l1629"><span class="linenum">1629</span></a>                      _button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', ''+value);
<a name="l1630"><span class="linenum">1630</span></a>                      var label = YAHOO.lang.<a class="function" onClick="logFunction('substitute')" href="../../../../../../_functions/substitute.html" onMouseOver="funcPopup(event,'substitute')">substitute</a>(strLabel, { VALUE: _button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label') });
<a name="l1631"><span class="linenum">1631</span></a>                      _button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('title', label);
<a name="l1632"><span class="linenum">1632</span></a>                      if (!br.webkit &amp;&amp; tbar) {
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment">                        //tbar.focus(); //We do this for accessibility, on the re-focus of the element, a screen reader will re-read the title that was just changed</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">                        //_button.focus();</span>
<a name="l1635"><span class="linenum">1635</span></a>                      }
<a name="l1636"><span class="linenum">1636</span></a>                      self._buttonClick(ev, oButton);
<a name="l1637"><span class="linenum">1637</span></a>                  }
<a name="l1638"><span class="linenum">1638</span></a>              };
<a name="l1639"><span class="linenum">1639</span></a>  
<a name="l1640"><span class="linenum">1640</span></a>              var _intDown = function(ev) {
<a name="l1641"><span class="linenum">1641</span></a>                  YAHOO.util.Event.stopEvent(ev);
<a name="l1642"><span class="linenum">1642</span></a>                  if (!_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled') &amp;&amp; (ev.keyCode != 9)) {
<a name="l1643"><span class="linenum">1643</span></a>                      var value = parseInt(_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label'), 10);
<a name="l1644"><span class="linenum">1644</span></a>                      value--;
<a name="l1645"><span class="linenum">1645</span></a>                      value = cleanVal(value);
<a name="l1646"><span class="linenum">1646</span></a>  
<a name="l1647"><span class="linenum">1647</span></a>                      _button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', ''+value);
<a name="l1648"><span class="linenum">1648</span></a>                      var label = YAHOO.lang.<a class="function" onClick="logFunction('substitute')" href="../../../../../../_functions/substitute.html" onMouseOver="funcPopup(event,'substitute')">substitute</a>(strLabel, { VALUE: _button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label') });
<a name="l1649"><span class="linenum">1649</span></a>                      _button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('title', label);
<a name="l1650"><span class="linenum">1650</span></a>                      if (!br.webkit &amp;&amp; tbar) {
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment">                        //tbar.focus(); //We do this for accessibility, on the re-focus of the element, a screen reader will re-read the title that was just changed</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment">                        //_button.focus();</span>
<a name="l1653"><span class="linenum">1653</span></a>                      }
<a name="l1654"><span class="linenum">1654</span></a>                      self._buttonClick(ev, oButton);
<a name="l1655"><span class="linenum">1655</span></a>                  }
<a name="l1656"><span class="linenum">1656</span></a>              };
<a name="l1657"><span class="linenum">1657</span></a>  
<a name="l1658"><span class="linenum">1658</span></a>              var _intKeyUp = function(ev) {
<a name="l1659"><span class="linenum">1659</span></a>                  if (ev.keyCode == 38) {
<a name="l1660"><span class="linenum">1660</span></a>                      _intUp(ev);
<a name="l1661"><span class="linenum">1661</span></a>                  } else if (ev.keyCode == 40) {
<a name="l1662"><span class="linenum">1662</span></a>                      _intDown(ev);
<a name="l1663"><span class="linenum">1663</span></a>                  } else if (ev.keyCode == 107 &amp;&amp; ev.shiftKey) {  //Plus Key
<a name="l1664"><span class="linenum">1664</span></a>                      _intUp(ev);
<a name="l1665"><span class="linenum">1665</span></a>                  } else if (ev.keyCode == 109 &amp;&amp; ev.shiftKey) {  //Minus Key
<a name="l1666"><span class="linenum">1666</span></a>                      _intDown(ev);
<a name="l1667"><span class="linenum">1667</span></a>                  }
<a name="l1668"><span class="linenum">1668</span></a>              };
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">            //Handle arrow keys..</span>
<a name="l1671"><span class="linenum">1671</span></a>              _button.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('keydown', _intKeyUp, this, true);
<a name="l1672"><span class="linenum">1672</span></a>  
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">            //Listen for the click on the up button and act on it</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">            //Listen for the click on the down button and act on it</span>
<a name="l1675"><span class="linenum">1675</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(_b1, 'mousedown',function(ev) {
<a name="l1676"><span class="linenum">1676</span></a>                  Event.stopEvent(ev);
<a name="l1677"><span class="linenum">1677</span></a>              }, this, true);
<a name="l1678"><span class="linenum">1678</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(_b2, 'mousedown', function(ev) {
<a name="l1679"><span class="linenum">1679</span></a>                  Event.stopEvent(ev);
<a name="l1680"><span class="linenum">1680</span></a>              }, this, true);
<a name="l1681"><span class="linenum">1681</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(_b1, 'click', _intUp, this, true);
<a name="l1682"><span class="linenum">1682</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(_b2, 'click', _intDown, this, true);
<a name="l1683"><span class="linenum">1683</span></a>          },
<a name="l1684"><span class="linenum">1684</span></a>          <span class="comment">/**</span>
<a name="l1685"><span class="linenum">1685</span></a>  <span class="comment">        * @protected</span>
<a name="l1686"><span class="linenum">1686</span></a>  <span class="comment">        * @method _buttonClick</span>
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment">        * @description Click handler for all buttons in the toolbar.</span>
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment">        * @param {String} ev The event that was passed in.</span>
<a name="l1689"><span class="linenum">1689</span></a>  <span class="comment">        * @param {Object} info Object literal of information about the button that was clicked.</span>
<a name="l1690"><span class="linenum">1690</span></a>  <span class="comment">        */</span>
<a name="l1691"><span class="linenum">1691</span></a>          _buttonClick: function(ev, info) {
<a name="l1692"><span class="linenum">1692</span></a>              var doEvent = true;
<a name="l1693"><span class="linenum">1693</span></a>              
<a name="l1694"><span class="linenum">1694</span></a>              if (ev &amp;&amp; ev.type == 'keypress') {
<a name="l1695"><span class="linenum">1695</span></a>                  if (ev.keyCode == 9) {
<a name="l1696"><span class="linenum">1696</span></a>                      doEvent = false;
<a name="l1697"><span class="linenum">1697</span></a>                  } else if ((ev.keyCode === 13) || (ev.keyCode === 0) || (ev.keyCode === 32)) {
<a name="l1698"><span class="linenum">1698</span></a>                  } else {
<a name="l1699"><span class="linenum">1699</span></a>                      doEvent = false;
<a name="l1700"><span class="linenum">1700</span></a>                  }
<a name="l1701"><span class="linenum">1701</span></a>              }
<a name="l1702"><span class="linenum">1702</span></a>  
<a name="l1703"><span class="linenum">1703</span></a>              if (doEvent) {
<a name="l1704"><span class="linenum">1704</span></a>                  var fireNextEvent = true,
<a name="l1705"><span class="linenum">1705</span></a>                      retValue = false;
<a name="l1706"><span class="linenum">1706</span></a>                      
<a name="l1707"><span class="linenum">1707</span></a>                  info.isSelected = this.isSelected(info.id);
<a name="l1708"><span class="linenum">1708</span></a>  
<a name="l1709"><span class="linenum">1709</span></a>                  if (info.value) {
<a name="l1710"><span class="linenum">1710</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('fireEvent::' + info.value + 'Click', 'info', 'Toolbar');
<a name="l1711"><span class="linenum">1711</span></a>                      retValue = this.fireEvent(info.value + 'Click', { type: info.value + 'Click', target: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), button: info });
<a name="l1712"><span class="linenum">1712</span></a>                      if (retValue === false) {
<a name="l1713"><span class="linenum">1713</span></a>                          fireNextEvent = false;
<a name="l1714"><span class="linenum">1714</span></a>                      }
<a name="l1715"><span class="linenum">1715</span></a>                  }
<a name="l1716"><span class="linenum">1716</span></a>                  
<a name="l1717"><span class="linenum">1717</span></a>                  if (info.menucmd &amp;&amp; fireNextEvent) {
<a name="l1718"><span class="linenum">1718</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('fireEvent::' + info.menucmd + 'Click', 'info', 'Toolbar');
<a name="l1719"><span class="linenum">1719</span></a>                      retValue = this.fireEvent(info.menucmd + 'Click', { type: info.menucmd + 'Click', target: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), button: info });
<a name="l1720"><span class="linenum">1720</span></a>                      if (retValue === false) {
<a name="l1721"><span class="linenum">1721</span></a>                          fireNextEvent = false;
<a name="l1722"><span class="linenum">1722</span></a>                      }
<a name="l1723"><span class="linenum">1723</span></a>                  }
<a name="l1724"><span class="linenum">1724</span></a>                  if (fireNextEvent) {
<a name="l1725"><span class="linenum">1725</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('fireEvent::buttonClick', 'info', 'Toolbar');
<a name="l1726"><span class="linenum">1726</span></a>                      this.fireEvent('buttonClick', { type: 'buttonClick', target: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), button: info });
<a name="l1727"><span class="linenum">1727</span></a>                  }
<a name="l1728"><span class="linenum">1728</span></a>  
<a name="l1729"><span class="linenum">1729</span></a>                  if (info.type == 'select') {
<a name="l1730"><span class="linenum">1730</span></a>                      var button = this.getButtonById(info.id);
<a name="l1731"><span class="linenum">1731</span></a>                      if (button.buttonType == 'rich') {
<a name="l1732"><span class="linenum">1732</span></a>                          var txt = info.value;
<a name="l1733"><span class="linenum">1733</span></a>                          for (var i = 0; i &lt; info.menu.length; i++) {
<a name="l1734"><span class="linenum">1734</span></a>                              if (info.menu[i].value == info.value) {
<a name="l1735"><span class="linenum">1735</span></a>                                  txt = info.menu[i].text;
<a name="l1736"><span class="linenum">1736</span></a>                                  break;
<a name="l1737"><span class="linenum">1737</span></a>                              }
<a name="l1738"><span class="linenum">1738</span></a>                          }
<a name="l1739"><span class="linenum">1739</span></a>                          button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', '&lt;span class=&quot;yui-toolbar-' + info.menucmd + '-' + (info.value).<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-').toLowerCase() + '&quot;&gt;' + txt + '&lt;/span&gt;');
<a name="l1740"><span class="linenum">1740</span></a>                          var _items = button.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('getItems')" href="../../../../../../_functions/getitems.html" onMouseOver="funcPopup(event,'getitems')">getItems</a>();
<a name="l1741"><span class="linenum">1741</span></a>                          for (var m = 0; m &lt; _items.length; m++) {
<a name="l1742"><span class="linenum">1742</span></a>                              if (_items[m].value.toLowerCase() == info.value.toLowerCase()) {
<a name="l1743"><span class="linenum">1743</span></a>                                  _items[m].cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('checked', true);
<a name="l1744"><span class="linenum">1744</span></a>                              } else {
<a name="l1745"><span class="linenum">1745</span></a>                                  _items[m].cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('checked', false);
<a name="l1746"><span class="linenum">1746</span></a>                              }
<a name="l1747"><span class="linenum">1747</span></a>                          }
<a name="l1748"><span class="linenum">1748</span></a>                      }
<a name="l1749"><span class="linenum">1749</span></a>                  }
<a name="l1750"><span class="linenum">1750</span></a>                  if (ev) {
<a name="l1751"><span class="linenum">1751</span></a>                      Event.stopEvent(ev);
<a name="l1752"><span class="linenum">1752</span></a>                  }
<a name="l1753"><span class="linenum">1753</span></a>              }
<a name="l1754"><span class="linenum">1754</span></a>          },
<a name="l1755"><span class="linenum">1755</span></a>          <span class="comment">/**</span>
<a name="l1756"><span class="linenum">1756</span></a>  <span class="comment">        * @private</span>
<a name="l1757"><span class="linenum">1757</span></a>  <span class="comment">        * @property _keyNav</span>
<a name="l1758"><span class="linenum">1758</span></a>  <span class="comment">        * @description Flag to determine if the arrow nav listeners have been attached</span>
<a name="l1759"><span class="linenum">1759</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l1760"><span class="linenum">1760</span></a>  <span class="comment">        */</span>
<a name="l1761"><span class="linenum">1761</span></a>          _keyNav: null,
<a name="l1762"><span class="linenum">1762</span></a>          <span class="comment">/**</span>
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment">        * @private</span>
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment">        * @property _navCounter</span>
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">        * @description Internal counter for walking the buttons in the toolbar with the arrow keys</span>
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment">        * @type Number</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment">        */</span>
<a name="l1768"><span class="linenum">1768</span></a>          _navCounter: null,
<a name="l1769"><span class="linenum">1769</span></a>          <span class="comment">/**</span>
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment">        * @private</span>
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment">        * @method _navigateButtons</span>
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment">        * @description Handles the navigation/focus of toolbar buttons with the Arrow Keys</span>
<a name="l1773"><span class="linenum">1773</span></a>  <span class="comment">        * @param {Event} ev The Key Event</span>
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment">        */</span>
<a name="l1775"><span class="linenum">1775</span></a>          _navigateButtons: function(ev) {
<a name="l1776"><span class="linenum">1776</span></a>              switch (ev.keyCode) {
<a name="l1777"><span class="linenum">1777</span></a>                  case 37:
<a name="l1778"><span class="linenum">1778</span></a>                  case 39:
<a name="l1779"><span class="linenum">1779</span></a>                      if (ev.keyCode == 37) {
<a name="l1780"><span class="linenum">1780</span></a>                          this._navCounter--;
<a name="l1781"><span class="linenum">1781</span></a>                      } else {
<a name="l1782"><span class="linenum">1782</span></a>                          this._navCounter++;
<a name="l1783"><span class="linenum">1783</span></a>                      }
<a name="l1784"><span class="linenum">1784</span></a>                      if (this._navCounter &gt; (this._buttonList.length - 1)) {
<a name="l1785"><span class="linenum">1785</span></a>                          this._navCounter = 0;
<a name="l1786"><span class="linenum">1786</span></a>                      }
<a name="l1787"><span class="linenum">1787</span></a>                      if (this._navCounter &lt; 0) {
<a name="l1788"><span class="linenum">1788</span></a>                          this._navCounter = (this._buttonList.length - 1);
<a name="l1789"><span class="linenum">1789</span></a>                      }
<a name="l1790"><span class="linenum">1790</span></a>                      if (this._buttonList[this._navCounter]) {
<a name="l1791"><span class="linenum">1791</span></a>                          var el = this._buttonList[this._navCounter].<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element');
<a name="l1792"><span class="linenum">1792</span></a>                          if (this.browser.ie) {
<a name="l1793"><span class="linenum">1793</span></a>                              el = this._buttonList[this._navCounter].<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').getElementsByTagName('a')[0];
<a name="l1794"><span class="linenum">1794</span></a>                          }
<a name="l1795"><span class="linenum">1795</span></a>                          if (this._buttonList[this._navCounter].<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l1796"><span class="linenum">1796</span></a>                              this._navigateButtons(ev);
<a name="l1797"><span class="linenum">1797</span></a>                          } else {
<a name="l1798"><span class="linenum">1798</span></a>                              el.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l1799"><span class="linenum">1799</span></a>                          }
<a name="l1800"><span class="linenum">1800</span></a>                      }
<a name="l1801"><span class="linenum">1801</span></a>                      break;
<a name="l1802"><span class="linenum">1802</span></a>              }
<a name="l1803"><span class="linenum">1803</span></a>          },
<a name="l1804"><span class="linenum">1804</span></a>          <span class="comment">/**</span>
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment">        * @private</span>
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment">        * @method _handleFocus</span>
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment">        * @description Sets up the listeners for the arrow key navigation</span>
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">        */</span>
<a name="l1809"><span class="linenum">1809</span></a>          _handleFocus: function() {
<a name="l1810"><span class="linenum">1810</span></a>              if (!this._keyNav) {
<a name="l1811"><span class="linenum">1811</span></a>                  var ev = 'keypress';
<a name="l1812"><span class="linenum">1812</span></a>                  if (this.browser.ie) {
<a name="l1813"><span class="linenum">1813</span></a>                      ev = 'keydown';
<a name="l1814"><span class="linenum">1814</span></a>                  }
<a name="l1815"><span class="linenum">1815</span></a>                  Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), ev, this._navigateButtons, this, true);
<a name="l1816"><span class="linenum">1816</span></a>                  this._keyNav = true;
<a name="l1817"><span class="linenum">1817</span></a>                  this._navCounter = -1;
<a name="l1818"><span class="linenum">1818</span></a>              }
<a name="l1819"><span class="linenum">1819</span></a>          },
<a name="l1820"><span class="linenum">1820</span></a>          <span class="comment">/**</span>
<a name="l1821"><span class="linenum">1821</span></a>  <span class="comment">        * @method getButtonById</span>
<a name="l1822"><span class="linenum">1822</span></a>  <span class="comment">        * @description Gets a button instance from the toolbar by is Dom id.</span>
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment">        * @param {String} id The Dom id to query for.</span>
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment">        * @return {&lt;a href=&quot;YAHOO.widget.ToolbarButton.html&quot;&gt;YAHOO.widget.ToolbarButton&lt;/a&gt;}</span>
<a name="l1825"><span class="linenum">1825</span></a>  <span class="comment">        */</span>
<a name="l1826"><span class="linenum">1826</span></a>          getButtonById: function(id) {
<a name="l1827"><span class="linenum">1827</span></a>              var len = this._buttonList.length;
<a name="l1828"><span class="linenum">1828</span></a>              for (var i = 0; i &lt; len; i++) {
<a name="l1829"><span class="linenum">1829</span></a>                  if (this._buttonList[i] &amp;&amp; this._buttonList[i].<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') == id) {
<a name="l1830"><span class="linenum">1830</span></a>                      return this._buttonList[i];
<a name="l1831"><span class="linenum">1831</span></a>                  }
<a name="l1832"><span class="linenum">1832</span></a>              }
<a name="l1833"><span class="linenum">1833</span></a>              return false;
<a name="l1834"><span class="linenum">1834</span></a>          },
<a name="l1835"><span class="linenum">1835</span></a>          <span class="comment">/**</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment">        * @method getButtonByValue</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment">        * @description Gets a button instance or a menuitem instance from the toolbar by it's value.</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment">        * @param {String} value The button value to query for.</span>
<a name="l1839"><span class="linenum">1839</span></a>  <span class="comment">        * @return {&lt;a href=&quot;YAHOO.widget.ToolbarButton.html&quot;&gt;YAHOO.widget.ToolbarButton&lt;/a&gt; or &lt;a href=&quot;YAHOO.widget.MenuItem.html&quot;&gt;YAHOO.widget.MenuItem&lt;/a&gt;}</span>
<a name="l1840"><span class="linenum">1840</span></a>  <span class="comment">        */</span>
<a name="l1841"><span class="linenum">1841</span></a>          getButtonByValue: function(value) {
<a name="l1842"><span class="linenum">1842</span></a>              var _buttons = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('buttons');
<a name="l1843"><span class="linenum">1843</span></a>              if (!_buttons) {
<a name="l1844"><span class="linenum">1844</span></a>                  return false;
<a name="l1845"><span class="linenum">1845</span></a>              }
<a name="l1846"><span class="linenum">1846</span></a>              var len = _buttons.length;
<a name="l1847"><span class="linenum">1847</span></a>              for (var i = 0; i &lt; len; i++) {
<a name="l1848"><span class="linenum">1848</span></a>                  if (_buttons[i].group !== undefined) {
<a name="l1849"><span class="linenum">1849</span></a>                      for (var m = 0; m &lt; _buttons[i].buttons.length; m++) {
<a name="l1850"><span class="linenum">1850</span></a>                          if ((_buttons[i].buttons[m].value == value) || (_buttons[i].buttons[m].menucmd == value)) {
<a name="l1851"><span class="linenum">1851</span></a>                              return this.getButtonById(_buttons[i].buttons[m].id);
<a name="l1852"><span class="linenum">1852</span></a>                          }
<a name="l1853"><span class="linenum">1853</span></a>                          if (_buttons[i].buttons[m].menu) { //Menu Button, loop through the values
<a name="l1854"><span class="linenum">1854</span></a>                              for (var s = 0; s &lt; _buttons[i].buttons[m].menu.length; s++) {
<a name="l1855"><span class="linenum">1855</span></a>                                  if (_buttons[i].buttons[m].menu[s].value == value) {
<a name="l1856"><span class="linenum">1856</span></a>                                      return this.getButtonById(_buttons[i].buttons[m].id);
<a name="l1857"><span class="linenum">1857</span></a>                                  }
<a name="l1858"><span class="linenum">1858</span></a>                              }
<a name="l1859"><span class="linenum">1859</span></a>                          }
<a name="l1860"><span class="linenum">1860</span></a>                      }
<a name="l1861"><span class="linenum">1861</span></a>                  } else {
<a name="l1862"><span class="linenum">1862</span></a>                      if ((_buttons[i].value == value) || (_buttons[i].menucmd == value)) {
<a name="l1863"><span class="linenum">1863</span></a>                          return this.getButtonById(_buttons[i].id);
<a name="l1864"><span class="linenum">1864</span></a>                      }
<a name="l1865"><span class="linenum">1865</span></a>                      if (_buttons[i].menu) { //Menu Button, loop through the values
<a name="l1866"><span class="linenum">1866</span></a>                          for (var j = 0; j &lt; _buttons[i].menu.length; j++) {
<a name="l1867"><span class="linenum">1867</span></a>                              if (_buttons[i].menu[j].value == value) {
<a name="l1868"><span class="linenum">1868</span></a>                                  return this.getButtonById(_buttons[i].id);
<a name="l1869"><span class="linenum">1869</span></a>                              }
<a name="l1870"><span class="linenum">1870</span></a>                          }
<a name="l1871"><span class="linenum">1871</span></a>                      }
<a name="l1872"><span class="linenum">1872</span></a>                  }
<a name="l1873"><span class="linenum">1873</span></a>              }
<a name="l1874"><span class="linenum">1874</span></a>              return false;
<a name="l1875"><span class="linenum">1875</span></a>          },
<a name="l1876"><span class="linenum">1876</span></a>          <span class="comment">/**</span>
<a name="l1877"><span class="linenum">1877</span></a>  <span class="comment">        * @method getButtonByIndex</span>
<a name="l1878"><span class="linenum">1878</span></a>  <span class="comment">        * @description Gets a button instance from the toolbar by is index in _buttonList.</span>
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment">        * @param {Number} index The index of the button in _buttonList.</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment">        * @return {&lt;a href=&quot;YAHOO.widget.ToolbarButton.html&quot;&gt;YAHOO.widget.ToolbarButton&lt;/a&gt;}</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">        */</span>
<a name="l1882"><span class="linenum">1882</span></a>          getButtonByIndex: function(index) {
<a name="l1883"><span class="linenum">1883</span></a>              if (this._buttonList[index]) {
<a name="l1884"><span class="linenum">1884</span></a>                  return this._buttonList[index];
<a name="l1885"><span class="linenum">1885</span></a>              } else {
<a name="l1886"><span class="linenum">1886</span></a>                  return false;
<a name="l1887"><span class="linenum">1887</span></a>              }
<a name="l1888"><span class="linenum">1888</span></a>          },
<a name="l1889"><span class="linenum">1889</span></a>          <span class="comment">/**</span>
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment">        * @method getButtons</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment">        * @description Returns an array of buttons in the current toolbar</span>
<a name="l1892"><span class="linenum">1892</span></a>  <span class="comment">        * @return {Array}</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment">        */</span>
<a name="l1894"><span class="linenum">1894</span></a>          getButtons: function() {
<a name="l1895"><span class="linenum">1895</span></a>              return this._buttonList;
<a name="l1896"><span class="linenum">1896</span></a>          },
<a name="l1897"><span class="linenum">1897</span></a>          <span class="comment">/**</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment">        * @method disableButton</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment">        * @description Disables a button in the toolbar.</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment">        * @param {String/Number} id Disable a button by it's id, index or value.</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment">        */</span>
<a name="l1903"><span class="linenum">1903</span></a>          disableButton: function(id) {
<a name="l1904"><span class="linenum">1904</span></a>              var button = getButton.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, id);
<a name="l1905"><span class="linenum">1905</span></a>              if (button) {
<a name="l1906"><span class="linenum">1906</span></a>                  button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true);
<a name="l1907"><span class="linenum">1907</span></a>              } else {
<a name="l1908"><span class="linenum">1908</span></a>                  return false;
<a name="l1909"><span class="linenum">1909</span></a>              }
<a name="l1910"><span class="linenum">1910</span></a>          },
<a name="l1911"><span class="linenum">1911</span></a>          <span class="comment">/**</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment">        * @method enableButton</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">        * @description Enables a button in the toolbar.</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">        * @param {String/Number} id Enable a button by it's id, index or value.</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment">        */</span>
<a name="l1917"><span class="linenum">1917</span></a>          enableButton: function(id) {
<a name="l1918"><span class="linenum">1918</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l1919"><span class="linenum">1919</span></a>                  return false;
<a name="l1920"><span class="linenum">1920</span></a>              }
<a name="l1921"><span class="linenum">1921</span></a>              var button = getButton.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, id);
<a name="l1922"><span class="linenum">1922</span></a>              if (button) {
<a name="l1923"><span class="linenum">1923</span></a>                  if (button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l1924"><span class="linenum">1924</span></a>                      button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', false);
<a name="l1925"><span class="linenum">1925</span></a>                  }
<a name="l1926"><span class="linenum">1926</span></a>              } else {
<a name="l1927"><span class="linenum">1927</span></a>                  return false;
<a name="l1928"><span class="linenum">1928</span></a>              }
<a name="l1929"><span class="linenum">1929</span></a>          },
<a name="l1930"><span class="linenum">1930</span></a>          <span class="comment">/**</span>
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment">        * @method isSelected</span>
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment">        * @description Tells if a button is selected or not.</span>
<a name="l1933"><span class="linenum">1933</span></a>  <span class="comment">        * @param {String/Number} id A button by it's id, index or value.</span>
<a name="l1934"><span class="linenum">1934</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment">        */</span>
<a name="l1936"><span class="linenum">1936</span></a>          isSelected: function(id) {
<a name="l1937"><span class="linenum">1937</span></a>              var button = getButton.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, id);
<a name="l1938"><span class="linenum">1938</span></a>              if (button) {
<a name="l1939"><span class="linenum">1939</span></a>                  return button._selected;
<a name="l1940"><span class="linenum">1940</span></a>              }
<a name="l1941"><span class="linenum">1941</span></a>              return false;
<a name="l1942"><span class="linenum">1942</span></a>          },
<a name="l1943"><span class="linenum">1943</span></a>          <span class="comment">/**</span>
<a name="l1944"><span class="linenum">1944</span></a>  <span class="comment">        * @method selectButton</span>
<a name="l1945"><span class="linenum">1945</span></a>  <span class="comment">        * @description Selects a button in the toolbar.</span>
<a name="l1946"><span class="linenum">1946</span></a>  <span class="comment">        * @param {String/Number} id Select a button by it's id, index or value.</span>
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment">        * @param {String} value If this is a Menu Button, check this item in the menu</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment">        */</span>
<a name="l1950"><span class="linenum">1950</span></a>          selectButton: function(id, value) {
<a name="l1951"><span class="linenum">1951</span></a>              var button = getButton.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, id);
<a name="l1952"><span class="linenum">1952</span></a>              if (button) {
<a name="l1953"><span class="linenum">1953</span></a>                  button.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('yui-button-selected');
<a name="l1954"><span class="linenum">1954</span></a>                  button.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('yui-button-' + button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value') + '-selected');
<a name="l1955"><span class="linenum">1955</span></a>                  button._selected = true;
<a name="l1956"><span class="linenum">1956</span></a>                  if (value) {
<a name="l1957"><span class="linenum">1957</span></a>                      if (button.buttonType == 'rich') {
<a name="l1958"><span class="linenum">1958</span></a>                          var _items = button.<a class="function" onClick="logFunction('getMenu')" href="../../../../../../_functions/getmenu.html" onMouseOver="funcPopup(event,'getmenu')">getMenu</a>().<a class="function" onClick="logFunction('getItems')" href="../../../../../../_functions/getitems.html" onMouseOver="funcPopup(event,'getitems')">getItems</a>();
<a name="l1959"><span class="linenum">1959</span></a>                          for (var m = 0; m &lt; _items.length; m++) {
<a name="l1960"><span class="linenum">1960</span></a>                              if (_items[m].value == value) {
<a name="l1961"><span class="linenum">1961</span></a>                                  _items[m].cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('checked', true);
<a name="l1962"><span class="linenum">1962</span></a>                                  button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', '&lt;span class=&quot;yui-toolbar-' + button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value') + '-' + (value).<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-').toLowerCase() + '&quot;&gt;' + _items[m]._oText.nodeValue + '&lt;/span&gt;');
<a name="l1963"><span class="linenum">1963</span></a>                              } else {
<a name="l1964"><span class="linenum">1964</span></a>                                  _items[m].cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('checked', false);
<a name="l1965"><span class="linenum">1965</span></a>                              }
<a name="l1966"><span class="linenum">1966</span></a>                          }
<a name="l1967"><span class="linenum">1967</span></a>                      }
<a name="l1968"><span class="linenum">1968</span></a>                  }
<a name="l1969"><span class="linenum">1969</span></a>              } else {
<a name="l1970"><span class="linenum">1970</span></a>                  return false;
<a name="l1971"><span class="linenum">1971</span></a>              }
<a name="l1972"><span class="linenum">1972</span></a>          },
<a name="l1973"><span class="linenum">1973</span></a>          <span class="comment">/**</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment">        * @method deselectButton</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment">        * @description Deselects a button in the toolbar.</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment">        * @param {String/Number} id Deselect a button by it's id, index or value.</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">        */</span>
<a name="l1979"><span class="linenum">1979</span></a>          deselectButton: function(id) {
<a name="l1980"><span class="linenum">1980</span></a>              var button = getButton.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, id);
<a name="l1981"><span class="linenum">1981</span></a>              if (button) {
<a name="l1982"><span class="linenum">1982</span></a>                  button.removeClass('yui-button-selected');
<a name="l1983"><span class="linenum">1983</span></a>                  button.removeClass('yui-button-' + button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value') + '-selected');
<a name="l1984"><span class="linenum">1984</span></a>                  button.removeClass('yui-button-hover');
<a name="l1985"><span class="linenum">1985</span></a>                  button._selected = false;
<a name="l1986"><span class="linenum">1986</span></a>              } else {
<a name="l1987"><span class="linenum">1987</span></a>                  return false;
<a name="l1988"><span class="linenum">1988</span></a>              }
<a name="l1989"><span class="linenum">1989</span></a>          },
<a name="l1990"><span class="linenum">1990</span></a>          <span class="comment">/**</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment">        * @method deselectAllButtons</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">        * @description Deselects all buttons in the toolbar.</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment">        */</span>
<a name="l1995"><span class="linenum">1995</span></a>          deselectAllButtons: function() {
<a name="l1996"><span class="linenum">1996</span></a>              var len = this._buttonList.length;
<a name="l1997"><span class="linenum">1997</span></a>              for (var i = 0; i &lt; len; i++) {
<a name="l1998"><span class="linenum">1998</span></a>                  this.deselectButton(this._buttonList[i]);
<a name="l1999"><span class="linenum">1999</span></a>              }
<a name="l2000"><span class="linenum">2000</span></a>          },
<a name="l2001"><span class="linenum">2001</span></a>          <span class="comment">/**</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment">        * @method disableAllButtons</span>
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment">        * @description Disables all buttons in the toolbar.</span>
<a name="l2004"><span class="linenum">2004</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment">        */</span>
<a name="l2006"><span class="linenum">2006</span></a>          disableAllButtons: function() {
<a name="l2007"><span class="linenum">2007</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l2008"><span class="linenum">2008</span></a>                  return false;
<a name="l2009"><span class="linenum">2009</span></a>              }
<a name="l2010"><span class="linenum">2010</span></a>              var len = this._buttonList.length;
<a name="l2011"><span class="linenum">2011</span></a>              for (var i = 0; i &lt; len; i++) {
<a name="l2012"><span class="linenum">2012</span></a>                  this.disableButton(this._buttonList[i]);
<a name="l2013"><span class="linenum">2013</span></a>              }
<a name="l2014"><span class="linenum">2014</span></a>          },
<a name="l2015"><span class="linenum">2015</span></a>          <span class="comment">/**</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">        * @method enableAllButtons</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">        * @description Enables all buttons in the toolbar.</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">        */</span>
<a name="l2020"><span class="linenum">2020</span></a>          enableAllButtons: function() {
<a name="l2021"><span class="linenum">2021</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l2022"><span class="linenum">2022</span></a>                  return false;
<a name="l2023"><span class="linenum">2023</span></a>              }
<a name="l2024"><span class="linenum">2024</span></a>              var len = this._buttonList.length;
<a name="l2025"><span class="linenum">2025</span></a>              for (var i = 0; i &lt; len; i++) {
<a name="l2026"><span class="linenum">2026</span></a>                  this.enableButton(this._buttonList[i]);
<a name="l2027"><span class="linenum">2027</span></a>              }
<a name="l2028"><span class="linenum">2028</span></a>          },
<a name="l2029"><span class="linenum">2029</span></a>          <span class="comment">/**</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">        * @method resetAllButtons</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment">        * @description Resets all buttons to their initial state.</span>
<a name="l2032"><span class="linenum">2032</span></a>  <span class="comment">        * @param {Object} _ex Except these buttons</span>
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment">        */</span>
<a name="l2035"><span class="linenum">2035</span></a>          resetAllButtons: function(_ex) {
<a name="l2036"><span class="linenum">2036</span></a>              if (!Lang.isObject(_ex)) {
<a name="l2037"><span class="linenum">2037</span></a>                  _ex = {};
<a name="l2038"><span class="linenum">2038</span></a>              }
<a name="l2039"><span class="linenum">2039</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled') || !this._buttonList) {
<a name="l2040"><span class="linenum">2040</span></a>                  return false;
<a name="l2041"><span class="linenum">2041</span></a>              }
<a name="l2042"><span class="linenum">2042</span></a>              var len = this._buttonList.length;
<a name="l2043"><span class="linenum">2043</span></a>              for (var i = 0; i &lt; len; i++) {
<a name="l2044"><span class="linenum">2044</span></a>                  var _button = this._buttonList[i];
<a name="l2045"><span class="linenum">2045</span></a>                  if (_button) {
<a name="l2046"><span class="linenum">2046</span></a>                      var disabled = _button._configs.disabled._initialConfig.value;
<a name="l2047"><span class="linenum">2047</span></a>                      if (_ex[_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')]) {
<a name="l2048"><span class="linenum">2048</span></a>                          this.enableButton(_button);
<a name="l2049"><span class="linenum">2049</span></a>                          this.selectButton(_button);
<a name="l2050"><span class="linenum">2050</span></a>                      } else {
<a name="l2051"><span class="linenum">2051</span></a>                          if (disabled) {
<a name="l2052"><span class="linenum">2052</span></a>                              this.disableButton(_button);
<a name="l2053"><span class="linenum">2053</span></a>                          } else {
<a name="l2054"><span class="linenum">2054</span></a>                              this.enableButton(_button);
<a name="l2055"><span class="linenum">2055</span></a>                          }
<a name="l2056"><span class="linenum">2056</span></a>                          this.deselectButton(_button);
<a name="l2057"><span class="linenum">2057</span></a>                      }
<a name="l2058"><span class="linenum">2058</span></a>                  }
<a name="l2059"><span class="linenum">2059</span></a>              }
<a name="l2060"><span class="linenum">2060</span></a>          },
<a name="l2061"><span class="linenum">2061</span></a>          <span class="comment">/**</span>
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment">        * @method destroyButton</span>
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment">        * @description Destroy a button in the toolbar.</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment">        * @param {String/Number} id Destroy a button by it's id or index.</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment">        */</span>
<a name="l2067"><span class="linenum">2067</span></a>          destroyButton: function(id) {
<a name="l2068"><span class="linenum">2068</span></a>              var button = getButton.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, id);
<a name="l2069"><span class="linenum">2069</span></a>              if (button) {
<a name="l2070"><span class="linenum">2070</span></a>                  var thisID = button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'),
<a name="l2071"><span class="linenum">2071</span></a>                      new_list = [], i = 0,
<a name="l2072"><span class="linenum">2072</span></a>                      len = this._buttonList.length;
<a name="l2073"><span class="linenum">2073</span></a>  
<a name="l2074"><span class="linenum">2074</span></a>                  button.<a class="function" onClick="logFunction('destroy')" href="../../../../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l2075"><span class="linenum">2075</span></a>                  
<a name="l2076"><span class="linenum">2076</span></a>                  for (i = 0; i &lt; len; i++) {
<a name="l2077"><span class="linenum">2077</span></a>                      if (this._buttonList[i].<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') != thisID) {
<a name="l2078"><span class="linenum">2078</span></a>                          new_list[new_list.length]= this._buttonList[i];
<a name="l2079"><span class="linenum">2079</span></a>                      }
<a name="l2080"><span class="linenum">2080</span></a>                  }
<a name="l2081"><span class="linenum">2081</span></a>  
<a name="l2082"><span class="linenum">2082</span></a>                  this._buttonList = new_list;
<a name="l2083"><span class="linenum">2083</span></a>              } else {
<a name="l2084"><span class="linenum">2084</span></a>                  return false;
<a name="l2085"><span class="linenum">2085</span></a>              }
<a name="l2086"><span class="linenum">2086</span></a>          },
<a name="l2087"><span class="linenum">2087</span></a>          <span class="comment">/**</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment">        * @method destroy</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment">        * @description Destroys the toolbar, all of it's elements and objects.</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment">        */</span>
<a name="l2092"><span class="linenum">2092</span></a>          destroy: function() {
<a name="l2093"><span class="linenum">2093</span></a>              var len = this._configuredButtons.length, j, i, b;
<a name="l2094"><span class="linenum">2094</span></a>              for(b = 0; b &lt; len; b++) {
<a name="l2095"><span class="linenum">2095</span></a>                  this.destroyButton(this._configuredButtons[b]);
<a name="l2096"><span class="linenum">2096</span></a>              }
<a name="l2097"><span class="linenum">2097</span></a>  
<a name="l2098"><span class="linenum">2098</span></a>              this._configuredButtons = null;
<a name="l2099"><span class="linenum">2099</span></a>          
<a name="l2100"><span class="linenum">2100</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').innerHTML = '';
<a name="l2101"><span class="linenum">2101</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').className = '';
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment">            //Brutal Object Destroy</span>
<a name="l2103"><span class="linenum">2103</span></a>              for (i in this) {
<a name="l2104"><span class="linenum">2104</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(this, i)) {
<a name="l2105"><span class="linenum">2105</span></a>                      this[i] = null;
<a name="l2106"><span class="linenum">2106</span></a>                  }
<a name="l2107"><span class="linenum">2107</span></a>              }
<a name="l2108"><span class="linenum">2108</span></a>              return true;
<a name="l2109"><span class="linenum">2109</span></a>          },
<a name="l2110"><span class="linenum">2110</span></a>          <span class="comment">/**</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment">        * @method collapse</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment">        * @description Programatically collapse the toolbar.</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment">        * @param {Boolean} collapse True to collapse, false to expand.</span>
<a name="l2114"><span class="linenum">2114</span></a>  <span class="comment">        */</span>
<a name="l2115"><span class="linenum">2115</span></a>          collapse: function(collapse) {
<a name="l2116"><span class="linenum">2116</span></a>              var el = Dom.<a class="function" onClick="logFunction('getElementsByClassName')" href="../../../../../../_functions/getelementsbyclassname.html" onMouseOver="funcPopup(event,'getelementsbyclassname')">getElementsByClassName</a>('collapse', 'span', this._titlebar);
<a name="l2117"><span class="linenum">2117</span></a>              if (collapse === false) {
<a name="l2118"><span class="linenum">2118</span></a>                  Dom.removeClass(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').parentNode, 'yui-toolbar-container-collapsed');
<a name="l2119"><span class="linenum">2119</span></a>                  if (el[0]) {
<a name="l2120"><span class="linenum">2120</span></a>                      Dom.removeClass(el[0], 'collapsed');
<a name="l2121"><span class="linenum">2121</span></a>                      el[0].title = this.STR_COLLAPSE;
<a name="l2122"><span class="linenum">2122</span></a>                  }
<a name="l2123"><span class="linenum">2123</span></a>                  this.fireEvent('toolbarExpanded', { type: 'toolbarExpanded', target: this });
<a name="l2124"><span class="linenum">2124</span></a>              } else {
<a name="l2125"><span class="linenum">2125</span></a>                  if (el[0]) {
<a name="l2126"><span class="linenum">2126</span></a>                      Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(el[0], 'collapsed');
<a name="l2127"><span class="linenum">2127</span></a>                      el[0].title = this.STR_EXPAND;
<a name="l2128"><span class="linenum">2128</span></a>                  }
<a name="l2129"><span class="linenum">2129</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont').parentNode, 'yui-toolbar-container-collapsed');
<a name="l2130"><span class="linenum">2130</span></a>                  this.fireEvent('toolbarCollapsed', { type: 'toolbarCollapsed', target: this });
<a name="l2131"><span class="linenum">2131</span></a>              }
<a name="l2132"><span class="linenum">2132</span></a>          },
<a name="l2133"><span class="linenum">2133</span></a>          <span class="comment">/**</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment">        * @method toString</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">        * @description Returns a string representing the toolbar.</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment">        * @return {String}</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment">        */</span>
<a name="l2138"><span class="linenum">2138</span></a>          toString: function() {
<a name="l2139"><span class="linenum">2139</span></a>              return 'Toolbar (#' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').id + ') with ' + this._buttonList.length + ' buttons.';
<a name="l2140"><span class="linenum">2140</span></a>          }
<a name="l2141"><span class="linenum">2141</span></a>      });
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment">/**</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment">* @event buttonClick</span>
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment">* @param {Object} o The object passed to this handler is the button config used to create the button.</span>
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">* @description Fires when any botton receives a click event. Passes back a single object representing the buttons config object. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l2146"><span class="linenum">2146</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l2147"><span class="linenum">2147</span></a>  <span class="comment">*/</span>
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment">/**</span>
<a name="l2149"><span class="linenum">2149</span></a>  <span class="comment">* @event valueClick</span>
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment">* @param {Object} o The object passed to this handler is the button config used to create the button.</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment">* @description This is a special dynamic event that is created and dispatched based on the value property</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment">* of the button config. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">* Example:</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">* &lt;code&gt;&lt;pre&gt;</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment">* buttons : [</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment">*   { type: 'button', value: 'test', value: 'testButton' }</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment">* ]&lt;/pre&gt;</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment">* &lt;/code&gt;</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">* With the valueClick event you could subscribe to this buttons click event with this:</span>
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment">* tbar.in('testButtonClick', function() { alert('test button clicked'); })</span>
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l2162"><span class="linenum">2162</span></a>  <span class="comment">*/</span>
<a name="l2163"><span class="linenum">2163</span></a>  <span class="comment">/**</span>
<a name="l2164"><span class="linenum">2164</span></a>  <span class="comment">* @event toolbarExpanded</span>
<a name="l2165"><span class="linenum">2165</span></a>  <span class="comment">* @description Fires when the toolbar is expanded via the collapse button. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">*/</span>
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">/**</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment">* @event toolbarCollapsed</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment">* @description Fires when the toolbar is collapsed via the collapse button. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">*/</span>
<a name="l2173"><span class="linenum">2173</span></a>  })();
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">/**</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment"> * @module editor</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment"> * @description &lt;p&gt;The Rich Text Editor is a UI control that replaces a standard HTML textarea; it allows for the rich formatting of text content, including common structural treatments like lists, formatting treatments like bold and italic text, and drag-and-drop inclusion and sizing of images. The Rich Text Editor's toolbar is extensible via a plugin architecture so that advanced implementations can achieve a high degree of customization.&lt;/p&gt;</span>
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment"> * @namespace YAHOO.widget</span>
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment"> * @requires yahoo, dom, element, event, toolbar</span>
<a name="l2179"><span class="linenum">2179</span></a>  <span class="comment"> * @optional animation, container_core, resize, dragdrop</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment"> */</span>
<a name="l2181"><span class="linenum">2181</span></a>  
<a name="l2182"><span class="linenum">2182</span></a>  (function() {
<a name="l2183"><span class="linenum">2183</span></a>  var Dom = YAHOO.util.Dom,
<a name="l2184"><span class="linenum">2184</span></a>      Event = YAHOO.util.Event,
<a name="l2185"><span class="linenum">2185</span></a>      Lang = YAHOO.lang,
<a name="l2186"><span class="linenum">2186</span></a>      Toolbar = YAHOO.widget.Toolbar;
<a name="l2187"><span class="linenum">2187</span></a>  
<a name="l2188"><span class="linenum">2188</span></a>      <span class="comment">/**</span>
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment">     * The Rich Text Editor is a UI control that replaces a standard HTML textarea; it allows for the rich formatting of text content, including common structural treatments like lists, formatting treatments like bold and italic text, and drag-and-drop inclusion and sizing of images. The Rich Text Editor's toolbar is extensible via a plugin architecture so that advanced implementations can achieve a high degree of customization.</span>
<a name="l2190"><span class="linenum">2190</span></a>  <span class="comment">     * @constructor</span>
<a name="l2191"><span class="linenum">2191</span></a>  <span class="comment">     * @class SimpleEditor</span>
<a name="l2192"><span class="linenum">2192</span></a>  <span class="comment">     * @extends YAHOO.util.Element</span>
<a name="l2193"><span class="linenum">2193</span></a>  <span class="comment">     * @param {String/HTMLElement} el The textarea element to turn into an editor.</span>
<a name="l2194"><span class="linenum">2194</span></a>  <span class="comment">     * @param {Object} attrs Object liternal containing configuration parameters.</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment">    */</span>
<a name="l2196"><span class="linenum">2196</span></a>      
<a name="l2197"><span class="linenum">2197</span></a>      YAHOO.widget.SimpleEditor = function(el, attrs) {
<a name="l2198"><span class="linenum">2198</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('SimpleEditor Initalizing', 'info', 'SimpleEditor');
<a name="l2199"><span class="linenum">2199</span></a>          
<a name="l2200"><span class="linenum">2200</span></a>          var o = {};
<a name="l2201"><span class="linenum">2201</span></a>          if (Lang.isObject(el) &amp;&amp; (!el.tagName) &amp;&amp; !attrs) {
<a name="l2202"><span class="linenum">2202</span></a>              Lang.augmentObject(o, el); <span class="comment">//Break the config reference</span>
<a name="l2203"><span class="linenum">2203</span></a>              el = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('textarea');
<a name="l2204"><span class="linenum">2204</span></a>              this.DOMReady = true;
<a name="l2205"><span class="linenum">2205</span></a>              if (o.container) {
<a name="l2206"><span class="linenum">2206</span></a>                  var c = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(o.container);
<a name="l2207"><span class="linenum">2207</span></a>                  c.appendChild(el);
<a name="l2208"><span class="linenum">2208</span></a>              } else {
<a name="l2209"><span class="linenum">2209</span></a>                  document.body.appendChild(el);
<a name="l2210"><span class="linenum">2210</span></a>              }
<a name="l2211"><span class="linenum">2211</span></a>          } else {
<a name="l2212"><span class="linenum">2212</span></a>              if (attrs) {
<a name="l2213"><span class="linenum">2213</span></a>                  Lang.augmentObject(o, attrs); <span class="comment">//Break the config reference</span>
<a name="l2214"><span class="linenum">2214</span></a>              }
<a name="l2215"><span class="linenum">2215</span></a>          }
<a name="l2216"><span class="linenum">2216</span></a>  
<a name="l2217"><span class="linenum">2217</span></a>          var oConfig = {
<a name="l2218"><span class="linenum">2218</span></a>              element: null,
<a name="l2219"><span class="linenum">2219</span></a>              attributes: o
<a name="l2220"><span class="linenum">2220</span></a>          }, id = null;
<a name="l2221"><span class="linenum">2221</span></a>  
<a name="l2222"><span class="linenum">2222</span></a>          if (Lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(el)) {
<a name="l2223"><span class="linenum">2223</span></a>              id = el;
<a name="l2224"><span class="linenum">2224</span></a>          } else {
<a name="l2225"><span class="linenum">2225</span></a>              if (oConfig.attributes.id) {
<a name="l2226"><span class="linenum">2226</span></a>                  id = oConfig.attributes.id;
<a name="l2227"><span class="linenum">2227</span></a>              } else {
<a name="l2228"><span class="linenum">2228</span></a>                  this.DOMReady = true;
<a name="l2229"><span class="linenum">2229</span></a>                  id = Dom.<a class="function" onClick="logFunction('generateId')" href="../../../../../../_functions/generateid.html" onMouseOver="funcPopup(event,'generateid')">generateId</a>(el);
<a name="l2230"><span class="linenum">2230</span></a>              }
<a name="l2231"><span class="linenum">2231</span></a>          }
<a name="l2232"><span class="linenum">2232</span></a>          oConfig.element = el;
<a name="l2233"><span class="linenum">2233</span></a>  
<a name="l2234"><span class="linenum">2234</span></a>          var element_cont = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l2235"><span class="linenum">2235</span></a>          oConfig.attributes.element_cont = new YAHOO.util.<a class="function" onClick="logFunction('Element')" href="../../../../../../_functions/element.html" onMouseOver="funcPopup(event,'element')">Element</a>(element_cont, {
<a name="l2236"><span class="linenum">2236</span></a>              id: id + '_container'
<a name="l2237"><span class="linenum">2237</span></a>          });
<a name="l2238"><span class="linenum">2238</span></a>          var div = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l2239"><span class="linenum">2239</span></a>          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(div, 'first-child');
<a name="l2240"><span class="linenum">2240</span></a>          oConfig.attributes.element_cont.appendChild(div);
<a name="l2241"><span class="linenum">2241</span></a>          
<a name="l2242"><span class="linenum">2242</span></a>          if (!oConfig.attributes.toolbar_cont) {
<a name="l2243"><span class="linenum">2243</span></a>              oConfig.attributes.toolbar_cont = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l2244"><span class="linenum">2244</span></a>              oConfig.attributes.toolbar_cont.id = id + '_toolbar';
<a name="l2245"><span class="linenum">2245</span></a>              div.appendChild(oConfig.attributes.toolbar_cont);
<a name="l2246"><span class="linenum">2246</span></a>          }
<a name="l2247"><span class="linenum">2247</span></a>          var editorWrapper = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l2248"><span class="linenum">2248</span></a>          div.appendChild(editorWrapper);
<a name="l2249"><span class="linenum">2249</span></a>          oConfig.attributes.editor_wrapper = editorWrapper;
<a name="l2250"><span class="linenum">2250</span></a>  
<a name="l2251"><span class="linenum">2251</span></a>          YAHOO.widget.SimpleEditor.superclass.constructor.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, oConfig.element, oConfig.attributes);
<a name="l2252"><span class="linenum">2252</span></a>      };
<a name="l2253"><span class="linenum">2253</span></a>  
<a name="l2254"><span class="linenum">2254</span></a>  
<a name="l2255"><span class="linenum">2255</span></a>      YAHOO.<a class="function" onClick="logFunction('extend')" href="../../../../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(YAHOO.widget.SimpleEditor, YAHOO.util.Element, {
<a name="l2256"><span class="linenum">2256</span></a>          <span class="comment">/**</span>
<a name="l2257"><span class="linenum">2257</span></a>  <span class="comment">        * @private</span>
<a name="l2258"><span class="linenum">2258</span></a>  <span class="comment">        * @property _resizeConfig</span>
<a name="l2259"><span class="linenum">2259</span></a>  <span class="comment">        * @description The default config for the Resize Utility</span>
<a name="l2260"><span class="linenum">2260</span></a>  <span class="comment">        */</span>
<a name="l2261"><span class="linenum">2261</span></a>          _resizeConfig: {
<a name="l2262"><span class="linenum">2262</span></a>              handles: ['br'],
<a name="l2263"><span class="linenum">2263</span></a>              autoRatio: true,
<a name="l2264"><span class="linenum">2264</span></a>              status: true,
<a name="l2265"><span class="linenum">2265</span></a>              proxy: true,
<a name="l2266"><span class="linenum">2266</span></a>              useShim: true,
<a name="l2267"><span class="linenum">2267</span></a>              setSize: false
<a name="l2268"><span class="linenum">2268</span></a>          },
<a name="l2269"><span class="linenum">2269</span></a>          <span class="comment">/**</span>
<a name="l2270"><span class="linenum">2270</span></a>  <span class="comment">        * @private</span>
<a name="l2271"><span class="linenum">2271</span></a>  <span class="comment">        * @method _setupResize</span>
<a name="l2272"><span class="linenum">2272</span></a>  <span class="comment">        * @description Creates the Resize instance and binds its events.</span>
<a name="l2273"><span class="linenum">2273</span></a>  <span class="comment">        */</span>
<a name="l2274"><span class="linenum">2274</span></a>          _setupResize: function() {
<a name="l2275"><span class="linenum">2275</span></a>              if (!YAHOO.util.DD || !YAHOO.util.Resize) { return false; }
<a name="l2276"><span class="linenum">2276</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('resize')) {
<a name="l2277"><span class="linenum">2277</span></a>                  var config = {};
<a name="l2278"><span class="linenum">2278</span></a>                  Lang.augmentObject(config, this._resizeConfig); <span class="comment">//Break the config reference</span>
<a name="l2279"><span class="linenum">2279</span></a>                  this.resize = new YAHOO.util.<a class="function" onClick="logFunction('Resize')" href="../../../../../../_functions/resize.html" onMouseOver="funcPopup(event,'resize')">Resize</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), config);
<a name="l2280"><span class="linenum">2280</span></a>                  this.resize.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('resize', function(args) {
<a name="l2281"><span class="linenum">2281</span></a>                      var anim = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('animate');
<a name="l2282"><span class="linenum">2282</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('animate', false);
<a name="l2283"><span class="linenum">2283</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('width', args.width + 'px');
<a name="l2284"><span class="linenum">2284</span></a>                      var h = args.height,
<a name="l2285"><span class="linenum">2285</span></a>                          th = (this.toolbar.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').clientHeight + 2),
<a name="l2286"><span class="linenum">2286</span></a>                          dh = 0;
<a name="l2287"><span class="linenum">2287</span></a>                      if (this.dompath) {
<a name="l2288"><span class="linenum">2288</span></a>                          dh = (this.dompath.clientHeight + 1); <span class="comment">//It has a 1px top border..</span>
<a name="l2289"><span class="linenum">2289</span></a>                      }
<a name="l2290"><span class="linenum">2290</span></a>                      var newH = (h - th - dh);
<a name="l2291"><span class="linenum">2291</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('height', newH + 'px');
<a name="l2292"><span class="linenum">2292</span></a>                      this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('height', '');
<a name="l2293"><span class="linenum">2293</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('animate', anim);
<a name="l2294"><span class="linenum">2294</span></a>                  }, this, true);
<a name="l2295"><span class="linenum">2295</span></a>              }
<a name="l2296"><span class="linenum">2296</span></a>          },
<a name="l2297"><span class="linenum">2297</span></a>          <span class="comment">/**</span>
<a name="l2298"><span class="linenum">2298</span></a>  <span class="comment">        * @property resize</span>
<a name="l2299"><span class="linenum">2299</span></a>  <span class="comment">        * @description A reference to the Resize object</span>
<a name="l2300"><span class="linenum">2300</span></a>  <span class="comment">        * @type YAHOO.util.Resize</span>
<a name="l2301"><span class="linenum">2301</span></a>  <span class="comment">        */</span>
<a name="l2302"><span class="linenum">2302</span></a>          resize: null,
<a name="l2303"><span class="linenum">2303</span></a>          <span class="comment">/**</span>
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment">        * @private</span>
<a name="l2305"><span class="linenum">2305</span></a>  <span class="comment">        * @method _setupDD</span>
<a name="l2306"><span class="linenum">2306</span></a>  <span class="comment">        * @description Sets up the DD instance used from the 'drag' config option.</span>
<a name="l2307"><span class="linenum">2307</span></a>  <span class="comment">        */</span>
<a name="l2308"><span class="linenum">2308</span></a>          _setupDD: function() {
<a name="l2309"><span class="linenum">2309</span></a>              if (!YAHOO.util.DD) { return false; }
<a name="l2310"><span class="linenum">2310</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('drag')) {
<a name="l2311"><span class="linenum">2311</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Attaching DD instance to Editor', 'info', 'SimpleEditor');
<a name="l2312"><span class="linenum">2312</span></a>                  var d = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('drag'),
<a name="l2313"><span class="linenum">2313</span></a>                      dd = YAHOO.util.DD;
<a name="l2314"><span class="linenum">2314</span></a>                  if (d === 'proxy') {
<a name="l2315"><span class="linenum">2315</span></a>                      dd = YAHOO.util.DDProxy;
<a name="l2316"><span class="linenum">2316</span></a>                  }
<a name="l2317"><span class="linenum">2317</span></a>  
<a name="l2318"><span class="linenum">2318</span></a>                  this.dd = new dd(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l2319"><span class="linenum">2319</span></a>                  this.toolbar.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('draggable'); 
<a name="l2320"><span class="linenum">2320</span></a>                  this.dd.setHandleElId(this.toolbar._titlebar); 
<a name="l2321"><span class="linenum">2321</span></a>              }
<a name="l2322"><span class="linenum">2322</span></a>          },
<a name="l2323"><span class="linenum">2323</span></a>          <span class="comment">/**</span>
<a name="l2324"><span class="linenum">2324</span></a>  <span class="comment">        * @property dd</span>
<a name="l2325"><span class="linenum">2325</span></a>  <span class="comment">        * @description A reference to the DragDrop object.</span>
<a name="l2326"><span class="linenum">2326</span></a>  <span class="comment">        * @type YAHOO.util.DD/YAHOO.util.DDProxy</span>
<a name="l2327"><span class="linenum">2327</span></a>  <span class="comment">        */</span>
<a name="l2328"><span class="linenum">2328</span></a>          dd: null,
<a name="l2329"><span class="linenum">2329</span></a>          <span class="comment">/**</span>
<a name="l2330"><span class="linenum">2330</span></a>  <span class="comment">        * @private</span>
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">        * @property _lastCommand</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">        * @description A cache of the last execCommand (used for Undo/Redo so they don't mark an undo level)</span>
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment">        * @type String</span>
<a name="l2334"><span class="linenum">2334</span></a>  <span class="comment">        */</span>
<a name="l2335"><span class="linenum">2335</span></a>          _lastCommand: null,
<a name="l2336"><span class="linenum">2336</span></a>          _undoNodeChange: function() {},
<a name="l2337"><span class="linenum">2337</span></a>          _storeUndo: function() {},
<a name="l2338"><span class="linenum">2338</span></a>          <span class="comment">/**</span>
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment">        * @private</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment">        * @method _checkKey</span>
<a name="l2341"><span class="linenum">2341</span></a>  <span class="comment">        * @description Checks a keyMap entry against a key event</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment">        * @param {Object} k The _keyMap object</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment">        * @param {Event} e The Mouse Event</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2345"><span class="linenum">2345</span></a>  <span class="comment">        */</span>
<a name="l2346"><span class="linenum">2346</span></a>          _checkKey: function(k, e) {
<a name="l2347"><span class="linenum">2347</span></a>              var ret = false;
<a name="l2348"><span class="linenum">2348</span></a>              if ((e.keyCode === k.key)) {
<a name="l2349"><span class="linenum">2349</span></a>                  if (k.mods &amp;&amp; (k.mods.length &gt; 0)) {
<a name="l2350"><span class="linenum">2350</span></a>                      var val = 0;
<a name="l2351"><span class="linenum">2351</span></a>                      for (var i = 0; i &lt; k.mods.length; i++) {
<a name="l2352"><span class="linenum">2352</span></a>                          if (this.browser.mac) {
<a name="l2353"><span class="linenum">2353</span></a>                              if (k.mods[i] == 'ctrl') {
<a name="l2354"><span class="linenum">2354</span></a>                                  k.mods[i] = 'meta';
<a name="l2355"><span class="linenum">2355</span></a>                              }
<a name="l2356"><span class="linenum">2356</span></a>                          }
<a name="l2357"><span class="linenum">2357</span></a>                          if (e[k.mods[i] + 'Key'] === true) {
<a name="l2358"><span class="linenum">2358</span></a>                              val++;
<a name="l2359"><span class="linenum">2359</span></a>                          }
<a name="l2360"><span class="linenum">2360</span></a>                      }
<a name="l2361"><span class="linenum">2361</span></a>                      if (val === k.mods.length) {
<a name="l2362"><span class="linenum">2362</span></a>                          ret = true;
<a name="l2363"><span class="linenum">2363</span></a>                      }
<a name="l2364"><span class="linenum">2364</span></a>                  } else {
<a name="l2365"><span class="linenum">2365</span></a>                      ret = true;
<a name="l2366"><span class="linenum">2366</span></a>                  }
<a name="l2367"><span class="linenum">2367</span></a>              }
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment">            //YAHOO.log('Shortcut Key Check: (' + k.key + ') return: ' + ret, 'info', 'SimpleEditor');</span>
<a name="l2369"><span class="linenum">2369</span></a>              return ret;
<a name="l2370"><span class="linenum">2370</span></a>          },
<a name="l2371"><span class="linenum">2371</span></a>          <span class="comment">/**</span>
<a name="l2372"><span class="linenum">2372</span></a>  <span class="comment">        * @private</span>
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment">        * @property _keyMap</span>
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment">        * @description Named key maps for various actions in the Editor. Example: &lt;code&gt;CLOSE_WINDOW: { key: 87, mods: ['shift', 'ctrl'] }&lt;/code&gt;. </span>
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">        * This entry shows that when key 87 (W) is found with the modifiers of shift and control, the window will close. You can customize this object to tweak keyboard shortcuts.</span>
<a name="l2376"><span class="linenum">2376</span></a>  <span class="comment">        * @type {Object/Mixed}</span>
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">        */</span>
<a name="l2378"><span class="linenum">2378</span></a>          _keyMap: {
<a name="l2379"><span class="linenum">2379</span></a>              SELECT_ALL: {
<a name="l2380"><span class="linenum">2380</span></a>                  key: 65, //A key
<a name="l2381"><span class="linenum">2381</span></a>                  mods: ['ctrl']
<a name="l2382"><span class="linenum">2382</span></a>              },
<a name="l2383"><span class="linenum">2383</span></a>              CLOSE_WINDOW: {
<a name="l2384"><span class="linenum">2384</span></a>                  key: 87, //W key
<a name="l2385"><span class="linenum">2385</span></a>                  mods: ['shift', 'ctrl']
<a name="l2386"><span class="linenum">2386</span></a>              },
<a name="l2387"><span class="linenum">2387</span></a>              FOCUS_TOOLBAR: {
<a name="l2388"><span class="linenum">2388</span></a>                  key: 27,
<a name="l2389"><span class="linenum">2389</span></a>                  mods: ['shift']
<a name="l2390"><span class="linenum">2390</span></a>              },
<a name="l2391"><span class="linenum">2391</span></a>              FOCUS_AFTER: {
<a name="l2392"><span class="linenum">2392</span></a>                  key: 27
<a name="l2393"><span class="linenum">2393</span></a>              },
<a name="l2394"><span class="linenum">2394</span></a>              FONT_SIZE_UP: {
<a name="l2395"><span class="linenum">2395</span></a>                  key: 38,
<a name="l2396"><span class="linenum">2396</span></a>                  mods: ['shift', 'ctrl']
<a name="l2397"><span class="linenum">2397</span></a>              },
<a name="l2398"><span class="linenum">2398</span></a>              FONT_SIZE_DOWN: {
<a name="l2399"><span class="linenum">2399</span></a>                  key: 40,
<a name="l2400"><span class="linenum">2400</span></a>                  mods: ['shift', 'ctrl']
<a name="l2401"><span class="linenum">2401</span></a>              },
<a name="l2402"><span class="linenum">2402</span></a>              CREATE_LINK: {
<a name="l2403"><span class="linenum">2403</span></a>                  key: 76,
<a name="l2404"><span class="linenum">2404</span></a>                  mods: ['shift', 'ctrl']
<a name="l2405"><span class="linenum">2405</span></a>              },
<a name="l2406"><span class="linenum">2406</span></a>              BOLD: {
<a name="l2407"><span class="linenum">2407</span></a>                  key: 66,
<a name="l2408"><span class="linenum">2408</span></a>                  mods: ['shift', 'ctrl']
<a name="l2409"><span class="linenum">2409</span></a>              },
<a name="l2410"><span class="linenum">2410</span></a>              ITALIC: {
<a name="l2411"><span class="linenum">2411</span></a>                  key: 73,
<a name="l2412"><span class="linenum">2412</span></a>                  mods: ['shift', 'ctrl']
<a name="l2413"><span class="linenum">2413</span></a>              },
<a name="l2414"><span class="linenum">2414</span></a>              UNDERLINE: {
<a name="l2415"><span class="linenum">2415</span></a>                  key: 85,
<a name="l2416"><span class="linenum">2416</span></a>                  mods: ['shift', 'ctrl']
<a name="l2417"><span class="linenum">2417</span></a>              },
<a name="l2418"><span class="linenum">2418</span></a>              UNDO: {
<a name="l2419"><span class="linenum">2419</span></a>                  key: 90,
<a name="l2420"><span class="linenum">2420</span></a>                  mods: ['ctrl']
<a name="l2421"><span class="linenum">2421</span></a>              },
<a name="l2422"><span class="linenum">2422</span></a>              REDO: {
<a name="l2423"><span class="linenum">2423</span></a>                  key: 90,
<a name="l2424"><span class="linenum">2424</span></a>                  mods: ['shift', 'ctrl']
<a name="l2425"><span class="linenum">2425</span></a>              },
<a name="l2426"><span class="linenum">2426</span></a>              JUSTIFY_LEFT: {
<a name="l2427"><span class="linenum">2427</span></a>                  key: 219,
<a name="l2428"><span class="linenum">2428</span></a>                  mods: ['shift', 'ctrl']
<a name="l2429"><span class="linenum">2429</span></a>              },
<a name="l2430"><span class="linenum">2430</span></a>              JUSTIFY_CENTER: {
<a name="l2431"><span class="linenum">2431</span></a>                  key: 220,
<a name="l2432"><span class="linenum">2432</span></a>                  mods: ['shift', 'ctrl']
<a name="l2433"><span class="linenum">2433</span></a>              },
<a name="l2434"><span class="linenum">2434</span></a>              JUSTIFY_RIGHT: {
<a name="l2435"><span class="linenum">2435</span></a>                  key: 221,
<a name="l2436"><span class="linenum">2436</span></a>                  mods: ['shift', 'ctrl']
<a name="l2437"><span class="linenum">2437</span></a>              }
<a name="l2438"><span class="linenum">2438</span></a>          },
<a name="l2439"><span class="linenum">2439</span></a>          <span class="comment">/**</span>
<a name="l2440"><span class="linenum">2440</span></a>  <span class="comment">        * @private</span>
<a name="l2441"><span class="linenum">2441</span></a>  <span class="comment">        * @method _cleanClassName</span>
<a name="l2442"><span class="linenum">2442</span></a>  <span class="comment">        * @description Makes a useable classname from dynamic data, by dropping it to lowercase and replacing spaces with -'s.</span>
<a name="l2443"><span class="linenum">2443</span></a>  <span class="comment">        * @param {String} str The classname to clean up</span>
<a name="l2444"><span class="linenum">2444</span></a>  <span class="comment">        * @return {String}</span>
<a name="l2445"><span class="linenum">2445</span></a>  <span class="comment">        */</span>
<a name="l2446"><span class="linenum">2446</span></a>          _cleanClassName: function(str) {
<a name="l2447"><span class="linenum">2447</span></a>              return str.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '-').toLowerCase();
<a name="l2448"><span class="linenum">2448</span></a>          },
<a name="l2449"><span class="linenum">2449</span></a>          <span class="comment">/**</span>
<a name="l2450"><span class="linenum">2450</span></a>  <span class="comment">        * @property _textarea</span>
<a name="l2451"><span class="linenum">2451</span></a>  <span class="comment">        * @description Flag to determine if we are using a textarea or an HTML Node.</span>
<a name="l2452"><span class="linenum">2452</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l2453"><span class="linenum">2453</span></a>  <span class="comment">        */</span>
<a name="l2454"><span class="linenum">2454</span></a>          _textarea: null,
<a name="l2455"><span class="linenum">2455</span></a>          <span class="comment">/**</span>
<a name="l2456"><span class="linenum">2456</span></a>  <span class="comment">        * @property _docType</span>
<a name="l2457"><span class="linenum">2457</span></a>  <span class="comment">        * @description The DOCTYPE to use in the editable container.</span>
<a name="l2458"><span class="linenum">2458</span></a>  <span class="comment">        * @type String</span>
<a name="l2459"><span class="linenum">2459</span></a>  <span class="comment">        */</span>
<a name="l2460"><span class="linenum">2460</span></a>          _docType: '&lt;!DOCTYPE HTML PUBLIC &quot;-/'+'/W3C/'+'/DTD HTML 4.01/'+'/EN&quot; &quot;http:/'+'/www.w3.org/TR/html4/strict.dtd&quot;&gt;',
<a name="l2461"><span class="linenum">2461</span></a>          <span class="comment">/**</span>
<a name="l2462"><span class="linenum">2462</span></a>  <span class="comment">        * @property editorDirty</span>
<a name="l2463"><span class="linenum">2463</span></a>  <span class="comment">        * @description This flag will be set when certain things in the Editor happen. It is to be used by the developer to check to see if content has changed.</span>
<a name="l2464"><span class="linenum">2464</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l2465"><span class="linenum">2465</span></a>  <span class="comment">        */</span>
<a name="l2466"><span class="linenum">2466</span></a>          editorDirty: null,
<a name="l2467"><span class="linenum">2467</span></a>          <span class="comment">/**</span>
<a name="l2468"><span class="linenum">2468</span></a>  <span class="comment">        * @property _defaultCSS</span>
<a name="l2469"><span class="linenum">2469</span></a>  <span class="comment">        * @description The default CSS used in the config for 'css'. This way you can add to the config like this: { css: YAHOO.widget.SimpleEditor.prototype._defaultCSS + 'ADD MYY CSS HERE' }</span>
<a name="l2470"><span class="linenum">2470</span></a>  <span class="comment">        * @type String</span>
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment">        */</span>
<a name="l2472"><span class="linenum">2472</span></a>          _defaultCSS: 'html { height: 95%; } body { padding: 7px; background-color: #fff; font: 13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small; } a, a:visited, a:hover { color: blue !important; text-decoration: underline !important; cursor: text !important; } .warning-localfile { border-bottom: 1px dashed red !important; } .yui-busy { cursor: wait !important; } img.selected { border: 2px dotted #808080; } img { cursor: pointer !important; border: none; } body.ptags.webkit div.yui-wk-p { margin: 11px 0; } body.ptags.webkit div.yui-wk-div { margin: 0; }',
<a name="l2473"><span class="linenum">2473</span></a>          <span class="comment">/**</span>
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment">        * @property _defaultToolbar</span>
<a name="l2475"><span class="linenum">2475</span></a>  <span class="comment">        * @private</span>
<a name="l2476"><span class="linenum">2476</span></a>  <span class="comment">        * @description Default toolbar config.</span>
<a name="l2477"><span class="linenum">2477</span></a>  <span class="comment">        * @type Object</span>
<a name="l2478"><span class="linenum">2478</span></a>  <span class="comment">        */</span>
<a name="l2479"><span class="linenum">2479</span></a>          _defaultToolbar: null,
<a name="l2480"><span class="linenum">2480</span></a>          <span class="comment">/**</span>
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment">        * @property _lastButton</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment">        * @private</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment">        * @description The last button pressed, so we don't disable it.</span>
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment">        * @type Object</span>
<a name="l2485"><span class="linenum">2485</span></a>  <span class="comment">        */</span>
<a name="l2486"><span class="linenum">2486</span></a>          _lastButton: null,
<a name="l2487"><span class="linenum">2487</span></a>          <span class="comment">/**</span>
<a name="l2488"><span class="linenum">2488</span></a>  <span class="comment">        * @property _baseHREF</span>
<a name="l2489"><span class="linenum">2489</span></a>  <span class="comment">        * @private</span>
<a name="l2490"><span class="linenum">2490</span></a>  <span class="comment">        * @description The base location of the editable page (this page) so that relative paths for image work.</span>
<a name="l2491"><span class="linenum">2491</span></a>  <span class="comment">        * @type String</span>
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment">        */</span>
<a name="l2493"><span class="linenum">2493</span></a>          _baseHREF: function() {
<a name="l2494"><span class="linenum">2494</span></a>              var href = document.location.href;
<a name="l2495"><span class="linenum">2495</span></a>              if (href.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('?') !== -1) { //Remove the query string
<a name="l2496"><span class="linenum">2496</span></a>                  href = href.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, href.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('?'));
<a name="l2497"><span class="linenum">2497</span></a>              }
<a name="l2498"><span class="linenum">2498</span></a>              href = href.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, href.lastIndexOf('/')) + '/';
<a name="l2499"><span class="linenum">2499</span></a>              return href;
<a name="l2500"><span class="linenum">2500</span></a>          }(),
<a name="l2501"><span class="linenum">2501</span></a>          <span class="comment">/**</span>
<a name="l2502"><span class="linenum">2502</span></a>  <span class="comment">        * @property _lastImage</span>
<a name="l2503"><span class="linenum">2503</span></a>  <span class="comment">        * @private</span>
<a name="l2504"><span class="linenum">2504</span></a>  <span class="comment">        * @description Safari reference for the last image selected (for styling as selected).</span>
<a name="l2505"><span class="linenum">2505</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l2506"><span class="linenum">2506</span></a>  <span class="comment">        */</span>
<a name="l2507"><span class="linenum">2507</span></a>          _lastImage: null,
<a name="l2508"><span class="linenum">2508</span></a>          <span class="comment">/**</span>
<a name="l2509"><span class="linenum">2509</span></a>  <span class="comment">        * @property _blankImageLoaded</span>
<a name="l2510"><span class="linenum">2510</span></a>  <span class="comment">        * @private</span>
<a name="l2511"><span class="linenum">2511</span></a>  <span class="comment">        * @description Don't load the blank image more than once..</span>
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment">        */</span>
<a name="l2514"><span class="linenum">2514</span></a>          _blankImageLoaded: null,
<a name="l2515"><span class="linenum">2515</span></a>          <span class="comment">/**</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment">        * @property _fixNodesTimer</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment">        * @private</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment">        * @description Holder for the fixNodes timer</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment">        * @type Date</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment">        */</span>
<a name="l2521"><span class="linenum">2521</span></a>          _fixNodesTimer: null,
<a name="l2522"><span class="linenum">2522</span></a>          <span class="comment">/**</span>
<a name="l2523"><span class="linenum">2523</span></a>  <span class="comment">        * @property _nodeChangeTimer</span>
<a name="l2524"><span class="linenum">2524</span></a>  <span class="comment">        * @private</span>
<a name="l2525"><span class="linenum">2525</span></a>  <span class="comment">        * @description Holds a reference to the nodeChange setTimeout call</span>
<a name="l2526"><span class="linenum">2526</span></a>  <span class="comment">        * @type Number</span>
<a name="l2527"><span class="linenum">2527</span></a>  <span class="comment">        */</span>
<a name="l2528"><span class="linenum">2528</span></a>          _nodeChangeTimer: null,
<a name="l2529"><span class="linenum">2529</span></a>          <span class="comment">/**</span>
<a name="l2530"><span class="linenum">2530</span></a>  <span class="comment">        * @property _nodeChangeDelayTimer</span>
<a name="l2531"><span class="linenum">2531</span></a>  <span class="comment">        * @private</span>
<a name="l2532"><span class="linenum">2532</span></a>  <span class="comment">        * @description Holds a reference to the nodeChangeDelay setTimeout call</span>
<a name="l2533"><span class="linenum">2533</span></a>  <span class="comment">        * @type Number</span>
<a name="l2534"><span class="linenum">2534</span></a>  <span class="comment">        */</span>
<a name="l2535"><span class="linenum">2535</span></a>          _nodeChangeDelayTimer: null,
<a name="l2536"><span class="linenum">2536</span></a>          <span class="comment">/**</span>
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment">        * @property _lastNodeChangeEvent</span>
<a name="l2538"><span class="linenum">2538</span></a>  <span class="comment">        * @private</span>
<a name="l2539"><span class="linenum">2539</span></a>  <span class="comment">        * @description Flag to determine the last event that fired a node change</span>
<a name="l2540"><span class="linenum">2540</span></a>  <span class="comment">        * @type Event</span>
<a name="l2541"><span class="linenum">2541</span></a>  <span class="comment">        */</span>
<a name="l2542"><span class="linenum">2542</span></a>          _lastNodeChangeEvent: null,
<a name="l2543"><span class="linenum">2543</span></a>          <span class="comment">/**</span>
<a name="l2544"><span class="linenum">2544</span></a>  <span class="comment">        * @property _lastNodeChange</span>
<a name="l2545"><span class="linenum">2545</span></a>  <span class="comment">        * @private</span>
<a name="l2546"><span class="linenum">2546</span></a>  <span class="comment">        * @description Flag to determine when the last node change was fired</span>
<a name="l2547"><span class="linenum">2547</span></a>  <span class="comment">        * @type Date</span>
<a name="l2548"><span class="linenum">2548</span></a>  <span class="comment">        */</span>
<a name="l2549"><span class="linenum">2549</span></a>          _lastNodeChange: 0,
<a name="l2550"><span class="linenum">2550</span></a>          <span class="comment">/**</span>
<a name="l2551"><span class="linenum">2551</span></a>  <span class="comment">        * @property _rendered</span>
<a name="l2552"><span class="linenum">2552</span></a>  <span class="comment">        * @private</span>
<a name="l2553"><span class="linenum">2553</span></a>  <span class="comment">        * @description Flag to determine if editor has been rendered or not</span>
<a name="l2554"><span class="linenum">2554</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l2555"><span class="linenum">2555</span></a>  <span class="comment">        */</span>
<a name="l2556"><span class="linenum">2556</span></a>          _rendered: null,
<a name="l2557"><span class="linenum">2557</span></a>          <span class="comment">/**</span>
<a name="l2558"><span class="linenum">2558</span></a>  <span class="comment">        * @property DOMReady</span>
<a name="l2559"><span class="linenum">2559</span></a>  <span class="comment">        * @private</span>
<a name="l2560"><span class="linenum">2560</span></a>  <span class="comment">        * @description Flag to determine if DOM is ready or not</span>
<a name="l2561"><span class="linenum">2561</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l2562"><span class="linenum">2562</span></a>  <span class="comment">        */</span>
<a name="l2563"><span class="linenum">2563</span></a>          DOMReady: null,
<a name="l2564"><span class="linenum">2564</span></a>          <span class="comment">/**</span>
<a name="l2565"><span class="linenum">2565</span></a>  <span class="comment">        * @property _selection</span>
<a name="l2566"><span class="linenum">2566</span></a>  <span class="comment">        * @private</span>
<a name="l2567"><span class="linenum">2567</span></a>  <span class="comment">        * @description Holder for caching iframe selections</span>
<a name="l2568"><span class="linenum">2568</span></a>  <span class="comment">        * @type Object</span>
<a name="l2569"><span class="linenum">2569</span></a>  <span class="comment">        */</span>
<a name="l2570"><span class="linenum">2570</span></a>          _selection: null,
<a name="l2571"><span class="linenum">2571</span></a>          <span class="comment">/**</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment">        * @property _mask</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment">        * @private</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment">        * @description DOM Element holder for the editor Mask when disabled</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment">        * @type Object</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment">        */</span>
<a name="l2577"><span class="linenum">2577</span></a>          _mask: null,
<a name="l2578"><span class="linenum">2578</span></a>          <span class="comment">/**</span>
<a name="l2579"><span class="linenum">2579</span></a>  <span class="comment">        * @property _showingHiddenElements</span>
<a name="l2580"><span class="linenum">2580</span></a>  <span class="comment">        * @private</span>
<a name="l2581"><span class="linenum">2581</span></a>  <span class="comment">        * @description Status of the hidden elements button</span>
<a name="l2582"><span class="linenum">2582</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l2583"><span class="linenum">2583</span></a>  <span class="comment">        */</span>
<a name="l2584"><span class="linenum">2584</span></a>          _showingHiddenElements: null,
<a name="l2585"><span class="linenum">2585</span></a>          <span class="comment">/**</span>
<a name="l2586"><span class="linenum">2586</span></a>  <span class="comment">        * @property currentWindow</span>
<a name="l2587"><span class="linenum">2587</span></a>  <span class="comment">        * @description A reference to the currently open EditorWindow</span>
<a name="l2588"><span class="linenum">2588</span></a>  <span class="comment">        * @type Object</span>
<a name="l2589"><span class="linenum">2589</span></a>  <span class="comment">        */</span>
<a name="l2590"><span class="linenum">2590</span></a>          currentWindow: null,
<a name="l2591"><span class="linenum">2591</span></a>          <span class="comment">/**</span>
<a name="l2592"><span class="linenum">2592</span></a>  <span class="comment">        * @property currentEvent</span>
<a name="l2593"><span class="linenum">2593</span></a>  <span class="comment">        * @description A reference to the current editor event</span>
<a name="l2594"><span class="linenum">2594</span></a>  <span class="comment">        * @type Event</span>
<a name="l2595"><span class="linenum">2595</span></a>  <span class="comment">        */</span>
<a name="l2596"><span class="linenum">2596</span></a>          currentEvent: null,
<a name="l2597"><span class="linenum">2597</span></a>          <span class="comment">/**</span>
<a name="l2598"><span class="linenum">2598</span></a>  <span class="comment">        * @property operaEvent</span>
<a name="l2599"><span class="linenum">2599</span></a>  <span class="comment">        * @private</span>
<a name="l2600"><span class="linenum">2600</span></a>  <span class="comment">        * @description setTimeout holder for Opera and Image DoubleClick event..</span>
<a name="l2601"><span class="linenum">2601</span></a>  <span class="comment">        * @type Object</span>
<a name="l2602"><span class="linenum">2602</span></a>  <span class="comment">        */</span>
<a name="l2603"><span class="linenum">2603</span></a>          operaEvent: null,
<a name="l2604"><span class="linenum">2604</span></a>          <span class="comment">/**</span>
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">        * @property currentFont</span>
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">        * @description A reference to the last font selected from the Toolbar</span>
<a name="l2607"><span class="linenum">2607</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l2608"><span class="linenum">2608</span></a>  <span class="comment">        */</span>
<a name="l2609"><span class="linenum">2609</span></a>          currentFont: null,
<a name="l2610"><span class="linenum">2610</span></a>          <span class="comment">/**</span>
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment">        * @property currentElement</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment">        * @description A reference to the current working element in the editor</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment">        * @type Array</span>
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment">        */</span>
<a name="l2615"><span class="linenum">2615</span></a>          currentElement: null,
<a name="l2616"><span class="linenum">2616</span></a>          <span class="comment">/**</span>
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment">        * @property dompath</span>
<a name="l2618"><span class="linenum">2618</span></a>  <span class="comment">        * @description A reference to the dompath container for writing the current working dom path to.</span>
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment">        */</span>
<a name="l2621"><span class="linenum">2621</span></a>          dompath: null,
<a name="l2622"><span class="linenum">2622</span></a>          <span class="comment">/**</span>
<a name="l2623"><span class="linenum">2623</span></a>  <span class="comment">        * @property beforeElement</span>
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment">        * @description A reference to the H2 placed before the editor for Accessibilty.</span>
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">        */</span>
<a name="l2627"><span class="linenum">2627</span></a>          beforeElement: null,
<a name="l2628"><span class="linenum">2628</span></a>          <span class="comment">/**</span>
<a name="l2629"><span class="linenum">2629</span></a>  <span class="comment">        * @property afterElement</span>
<a name="l2630"><span class="linenum">2630</span></a>  <span class="comment">        * @description A reference to the H2 placed after the editor for Accessibilty.</span>
<a name="l2631"><span class="linenum">2631</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l2632"><span class="linenum">2632</span></a>  <span class="comment">        */</span>
<a name="l2633"><span class="linenum">2633</span></a>          afterElement: null,
<a name="l2634"><span class="linenum">2634</span></a>          <span class="comment">/**</span>
<a name="l2635"><span class="linenum">2635</span></a>  <span class="comment">        * @property invalidHTML</span>
<a name="l2636"><span class="linenum">2636</span></a>  <span class="comment">        * @description Contains a list of HTML elements that are invalid inside the editor. They will be removed when they are found. If you set the value of a key to &quot;{ keepContents: true }&quot;, then the element will be replaced with a yui-non span to be filtered out when cleanHTML is called. The only tag that is ignored here is the span tag as it will force the Editor into a loop and freeze the browser. However.. all of these tags will be removed in the cleanHTML routine.</span>
<a name="l2637"><span class="linenum">2637</span></a>  <span class="comment">        * @type Object</span>
<a name="l2638"><span class="linenum">2638</span></a>  <span class="comment">        */</span>
<a name="l2639"><span class="linenum">2639</span></a>          invalidHTML: {
<a name="l2640"><span class="linenum">2640</span></a>              form: true,
<a name="l2641"><span class="linenum">2641</span></a>              input: true,
<a name="l2642"><span class="linenum">2642</span></a>              button: true,
<a name="l2643"><span class="linenum">2643</span></a>              select: true,
<a name="l2644"><span class="linenum">2644</span></a>              link: true,
<a name="l2645"><span class="linenum">2645</span></a>              html: true,
<a name="l2646"><span class="linenum">2646</span></a>              body: true,
<a name="l2647"><span class="linenum">2647</span></a>              iframe: true,
<a name="l2648"><span class="linenum">2648</span></a>              script: true,
<a name="l2649"><span class="linenum">2649</span></a>              style: true,
<a name="l2650"><span class="linenum">2650</span></a>              textarea: true
<a name="l2651"><span class="linenum">2651</span></a>          },
<a name="l2652"><span class="linenum">2652</span></a>          <span class="comment">/**</span>
<a name="l2653"><span class="linenum">2653</span></a>  <span class="comment">        * @property toolbar</span>
<a name="l2654"><span class="linenum">2654</span></a>  <span class="comment">        * @description Local property containing the &lt;a href=&quot;YAHOO.widget.Toolbar.html&quot;&gt;YAHOO.widget.Toolbar&lt;/a&gt; instance</span>
<a name="l2655"><span class="linenum">2655</span></a>  <span class="comment">        * @type &lt;a href=&quot;YAHOO.widget.Toolbar.html&quot;&gt;YAHOO.widget.Toolbar&lt;/a&gt;</span>
<a name="l2656"><span class="linenum">2656</span></a>  <span class="comment">        */</span>
<a name="l2657"><span class="linenum">2657</span></a>          toolbar: null,
<a name="l2658"><span class="linenum">2658</span></a>          <span class="comment">/**</span>
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment">        * @private</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment">        * @property _contentTimer</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">        * @description setTimeout holder for documentReady check</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment">        */</span>
<a name="l2663"><span class="linenum">2663</span></a>          _contentTimer: null,
<a name="l2664"><span class="linenum">2664</span></a>          <span class="comment">/**</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment">        * @private</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">        * @property _contentTimerMax</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">        * @description The number of times the loaded content should be checked before giving up. Default: 500</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment">        */</span>
<a name="l2669"><span class="linenum">2669</span></a>          _contentTimerMax: 500,
<a name="l2670"><span class="linenum">2670</span></a>          <span class="comment">/**</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">        * @private</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">        * @property _contentTimerCounter</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">        * @description Counter to check the number of times the body is polled for before giving up</span>
<a name="l2674"><span class="linenum">2674</span></a>  <span class="comment">        * @type Number</span>
<a name="l2675"><span class="linenum">2675</span></a>  <span class="comment">        */</span>
<a name="l2676"><span class="linenum">2676</span></a>          _contentTimerCounter: 0,
<a name="l2677"><span class="linenum">2677</span></a>          <span class="comment">/**</span>
<a name="l2678"><span class="linenum">2678</span></a>  <span class="comment">        * @private</span>
<a name="l2679"><span class="linenum">2679</span></a>  <span class="comment">        * @property _disabled</span>
<a name="l2680"><span class="linenum">2680</span></a>  <span class="comment">        * @description The Toolbar items that should be disabled if there is no selection present in the editor.</span>
<a name="l2681"><span class="linenum">2681</span></a>  <span class="comment">        * @type Array</span>
<a name="l2682"><span class="linenum">2682</span></a>  <span class="comment">        */</span>
<a name="l2683"><span class="linenum">2683</span></a>          _disabled: [ 'createlink', 'fontname', 'fontsize', 'forecolor', 'backcolor' ],
<a name="l2684"><span class="linenum">2684</span></a>          <span class="comment">/**</span>
<a name="l2685"><span class="linenum">2685</span></a>  <span class="comment">        * @private</span>
<a name="l2686"><span class="linenum">2686</span></a>  <span class="comment">        * @property _alwaysDisabled</span>
<a name="l2687"><span class="linenum">2687</span></a>  <span class="comment">        * @description The Toolbar items that should ALWAYS be disabled event if there is a selection present in the editor.</span>
<a name="l2688"><span class="linenum">2688</span></a>  <span class="comment">        * @type Object</span>
<a name="l2689"><span class="linenum">2689</span></a>  <span class="comment">        */</span>
<a name="l2690"><span class="linenum">2690</span></a>          _alwaysDisabled: { undo: true, redo: true },
<a name="l2691"><span class="linenum">2691</span></a>          <span class="comment">/**</span>
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">        * @private</span>
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">        * @property _alwaysEnabled</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">        * @description The Toolbar items that should ALWAYS be enabled event if there isn't a selection present in the editor.</span>
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment">        * @type Object</span>
<a name="l2696"><span class="linenum">2696</span></a>  <span class="comment">        */</span>
<a name="l2697"><span class="linenum">2697</span></a>          _alwaysEnabled: { },
<a name="l2698"><span class="linenum">2698</span></a>          <span class="comment">/**</span>
<a name="l2699"><span class="linenum">2699</span></a>  <span class="comment">        * @private</span>
<a name="l2700"><span class="linenum">2700</span></a>  <span class="comment">        * @property _semantic</span>
<a name="l2701"><span class="linenum">2701</span></a>  <span class="comment">        * @description The Toolbar commands that we should attempt to make tags out of instead of using styles.</span>
<a name="l2702"><span class="linenum">2702</span></a>  <span class="comment">        * @type Object</span>
<a name="l2703"><span class="linenum">2703</span></a>  <span class="comment">        */</span>
<a name="l2704"><span class="linenum">2704</span></a>          _semantic: { 'bold': true, 'italic' : true, 'underline' : true },
<a name="l2705"><span class="linenum">2705</span></a>          <span class="comment">/**</span>
<a name="l2706"><span class="linenum">2706</span></a>  <span class="comment">        * @private</span>
<a name="l2707"><span class="linenum">2707</span></a>  <span class="comment">        * @property _tag2cmd</span>
<a name="l2708"><span class="linenum">2708</span></a>  <span class="comment">        * @description A tag map of HTML tags to convert to the different types of commands so we can select the proper toolbar button.</span>
<a name="l2709"><span class="linenum">2709</span></a>  <span class="comment">        * @type Object</span>
<a name="l2710"><span class="linenum">2710</span></a>  <span class="comment">        */</span>
<a name="l2711"><span class="linenum">2711</span></a>          _tag2cmd: {
<a name="l2712"><span class="linenum">2712</span></a>              'b': 'bold',
<a name="l2713"><span class="linenum">2713</span></a>              'strong': 'bold',
<a name="l2714"><span class="linenum">2714</span></a>              'i': 'italic',
<a name="l2715"><span class="linenum">2715</span></a>              'em': 'italic',
<a name="l2716"><span class="linenum">2716</span></a>              'u': 'underline',
<a name="l2717"><span class="linenum">2717</span></a>              'sup': 'superscript',
<a name="l2718"><span class="linenum">2718</span></a>              'sub': 'subscript',
<a name="l2719"><span class="linenum">2719</span></a>              'img': 'insertimage',
<a name="l2720"><span class="linenum">2720</span></a>              'a' : 'createlink',
<a name="l2721"><span class="linenum">2721</span></a>              'ul' : 'insertunorderedlist',
<a name="l2722"><span class="linenum">2722</span></a>              'ol' : 'insertorderedlist'
<a name="l2723"><span class="linenum">2723</span></a>          },
<a name="l2724"><span class="linenum">2724</span></a>  
<a name="l2725"><span class="linenum">2725</span></a>          <span class="comment">/**</span>
<a name="l2726"><span class="linenum">2726</span></a>  <span class="comment">        * @private _createIframe</span>
<a name="l2727"><span class="linenum">2727</span></a>  <span class="comment">        * @description Creates the DOM and YUI Element for the iFrame editor area.</span>
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment">        * @param {String} id The string ID to prefix the iframe with</span>
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment">        * @return {Object} iFrame object</span>
<a name="l2730"><span class="linenum">2730</span></a>  <span class="comment">        */</span>
<a name="l2731"><span class="linenum">2731</span></a>          _createIframe: function() {
<a name="l2732"><span class="linenum">2732</span></a>              var ifrmDom = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('iframe');
<a name="l2733"><span class="linenum">2733</span></a>              ifrmDom.id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_editor';
<a name="l2734"><span class="linenum">2734</span></a>              var config = {
<a name="l2735"><span class="linenum">2735</span></a>                  border: '0',
<a name="l2736"><span class="linenum">2736</span></a>                  frameBorder: '0',
<a name="l2737"><span class="linenum">2737</span></a>                  marginWidth: '0',
<a name="l2738"><span class="linenum">2738</span></a>                  marginHeight: '0',
<a name="l2739"><span class="linenum">2739</span></a>                  leftMargin: '0',
<a name="l2740"><span class="linenum">2740</span></a>                  topMargin: '0',
<a name="l2741"><span class="linenum">2741</span></a>                  allowTransparency: 'true',
<a name="l2742"><span class="linenum">2742</span></a>                  width: '100%'
<a name="l2743"><span class="linenum">2743</span></a>              };
<a name="l2744"><span class="linenum">2744</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('autoHeight')) {
<a name="l2745"><span class="linenum">2745</span></a>                  config.scrolling = 'no';
<a name="l2746"><span class="linenum">2746</span></a>              }
<a name="l2747"><span class="linenum">2747</span></a>              for (var i in config) {
<a name="l2748"><span class="linenum">2748</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(config, i)) {
<a name="l2749"><span class="linenum">2749</span></a>                      ifrmDom.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>(i, config[i]);
<a name="l2750"><span class="linenum">2750</span></a>                  }
<a name="l2751"><span class="linenum">2751</span></a>              }
<a name="l2752"><span class="linenum">2752</span></a>              var isrc = 'javascript:;';
<a name="l2753"><span class="linenum">2753</span></a>              if (this.browser.ie) {
<a name="l2754"><span class="linenum">2754</span></a>  <span class="comment">                //isrc = 'about:blank';</span>
<a name="l2755"><span class="linenum">2755</span></a>  <span class="comment">                //TODO - Check this, I have changed it before..</span>
<a name="l2756"><span class="linenum">2756</span></a>                  isrc = 'javascript:false;';
<a name="l2757"><span class="linenum">2757</span></a>              }
<a name="l2758"><span class="linenum">2758</span></a>              ifrmDom.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', isrc);
<a name="l2759"><span class="linenum">2759</span></a>              var ifrm = new YAHOO.util.<a class="function" onClick="logFunction('Element')" href="../../../../../../_functions/element.html" onMouseOver="funcPopup(event,'element')">Element</a>(ifrmDom);
<a name="l2760"><span class="linenum">2760</span></a>              ifrm.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', 'hidden');
<a name="l2761"><span class="linenum">2761</span></a>              return ifrm;
<a name="l2762"><span class="linenum">2762</span></a>          },
<a name="l2763"><span class="linenum">2763</span></a>          <span class="comment">/**</span>
<a name="l2764"><span class="linenum">2764</span></a>  <span class="comment">        * @private _isElement</span>
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment">        * @description Checks to see if an Element reference is a valid one and has a certain tag type</span>
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment">        * @param {HTMLElement} el The element to check</span>
<a name="l2767"><span class="linenum">2767</span></a>  <span class="comment">        * @param {String} tag The tag that the element needs to be</span>
<a name="l2768"><span class="linenum">2768</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2769"><span class="linenum">2769</span></a>  <span class="comment">        */</span>
<a name="l2770"><span class="linenum">2770</span></a>          _isElement: function(el, tag) {
<a name="l2771"><span class="linenum">2771</span></a>              if (el &amp;&amp; el.tagName &amp;&amp; (el.tagName.toLowerCase() == tag)) {
<a name="l2772"><span class="linenum">2772</span></a>                  return true;
<a name="l2773"><span class="linenum">2773</span></a>              }
<a name="l2774"><span class="linenum">2774</span></a>              if (el &amp;&amp; el.getAttribute &amp;&amp; (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('tag') == tag)) {
<a name="l2775"><span class="linenum">2775</span></a>                  return true;
<a name="l2776"><span class="linenum">2776</span></a>              }
<a name="l2777"><span class="linenum">2777</span></a>              return false;
<a name="l2778"><span class="linenum">2778</span></a>          },
<a name="l2779"><span class="linenum">2779</span></a>          <span class="comment">/**</span>
<a name="l2780"><span class="linenum">2780</span></a>  <span class="comment">        * @private _hasParent</span>
<a name="l2781"><span class="linenum">2781</span></a>  <span class="comment">        * @description Checks to see if an Element reference or one of it's parents is a valid one and has a certain tag type</span>
<a name="l2782"><span class="linenum">2782</span></a>  <span class="comment">        * @param {HTMLElement} el The element to check</span>
<a name="l2783"><span class="linenum">2783</span></a>  <span class="comment">        * @param {String} tag The tag that the element needs to be</span>
<a name="l2784"><span class="linenum">2784</span></a>  <span class="comment">        * @return HTMLElement</span>
<a name="l2785"><span class="linenum">2785</span></a>  <span class="comment">        */</span>
<a name="l2786"><span class="linenum">2786</span></a>          _hasParent: function(el, tag) {
<a name="l2787"><span class="linenum">2787</span></a>              if (!el || !el.parentNode) {
<a name="l2788"><span class="linenum">2788</span></a>                  return false;
<a name="l2789"><span class="linenum">2789</span></a>              }
<a name="l2790"><span class="linenum">2790</span></a>              
<a name="l2791"><span class="linenum">2791</span></a>              while (el.parentNode) {
<a name="l2792"><span class="linenum">2792</span></a>                  if (this._isElement(el, tag)) {
<a name="l2793"><span class="linenum">2793</span></a>                      return el;
<a name="l2794"><span class="linenum">2794</span></a>                  }
<a name="l2795"><span class="linenum">2795</span></a>                  if (el.parentNode) {
<a name="l2796"><span class="linenum">2796</span></a>                      el = el.parentNode;
<a name="l2797"><span class="linenum">2797</span></a>                  } else {
<a name="l2798"><span class="linenum">2798</span></a>                      return false;
<a name="l2799"><span class="linenum">2799</span></a>                  }
<a name="l2800"><span class="linenum">2800</span></a>              }
<a name="l2801"><span class="linenum">2801</span></a>              return false;
<a name="l2802"><span class="linenum">2802</span></a>          },
<a name="l2803"><span class="linenum">2803</span></a>          <span class="comment">/**</span>
<a name="l2804"><span class="linenum">2804</span></a>  <span class="comment">        * @private</span>
<a name="l2805"><span class="linenum">2805</span></a>  <span class="comment">        * @method _getDoc</span>
<a name="l2806"><span class="linenum">2806</span></a>  <span class="comment">        * @description Get the Document of the IFRAME</span>
<a name="l2807"><span class="linenum">2807</span></a>  <span class="comment">        * @return {Object}</span>
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment">        */</span>
<a name="l2809"><span class="linenum">2809</span></a>          _getDoc: function() {
<a name="l2810"><span class="linenum">2810</span></a>              var value = false;
<a name="l2811"><span class="linenum">2811</span></a>              try {
<a name="l2812"><span class="linenum">2812</span></a>                  if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').contentWindow.document) {
<a name="l2813"><span class="linenum">2813</span></a>                      value = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').contentWindow.document;
<a name="l2814"><span class="linenum">2814</span></a>                      return value;
<a name="l2815"><span class="linenum">2815</span></a>                  }
<a name="l2816"><span class="linenum">2816</span></a>              } catch (e) {
<a name="l2817"><span class="linenum">2817</span></a>                  return false;
<a name="l2818"><span class="linenum">2818</span></a>              }
<a name="l2819"><span class="linenum">2819</span></a>          },
<a name="l2820"><span class="linenum">2820</span></a>          <span class="comment">/**</span>
<a name="l2821"><span class="linenum">2821</span></a>  <span class="comment">        * @private</span>
<a name="l2822"><span class="linenum">2822</span></a>  <span class="comment">        * @method _getWindow</span>
<a name="l2823"><span class="linenum">2823</span></a>  <span class="comment">        * @description Get the Window of the IFRAME</span>
<a name="l2824"><span class="linenum">2824</span></a>  <span class="comment">        * @return {Object}</span>
<a name="l2825"><span class="linenum">2825</span></a>  <span class="comment">        */</span>
<a name="l2826"><span class="linenum">2826</span></a>          _getWindow: function() {
<a name="l2827"><span class="linenum">2827</span></a>              return this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').contentWindow;
<a name="l2828"><span class="linenum">2828</span></a>          },
<a name="l2829"><span class="linenum">2829</span></a>          <span class="comment">/**</span>
<a name="l2830"><span class="linenum">2830</span></a>  <span class="comment">        * @method focus</span>
<a name="l2831"><span class="linenum">2831</span></a>  <span class="comment">        * @description Attempt to set the focus of the iframes window.</span>
<a name="l2832"><span class="linenum">2832</span></a>  <span class="comment">        */</span>
<a name="l2833"><span class="linenum">2833</span></a>          focus: function() {
<a name="l2834"><span class="linenum">2834</span></a>              this._getWindow().<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l2835"><span class="linenum">2835</span></a>          },
<a name="l2836"><span class="linenum">2836</span></a>          <span class="comment">/**</span>
<a name="l2837"><span class="linenum">2837</span></a>  <span class="comment">        * @private</span>
<a name="l2838"><span class="linenum">2838</span></a>  <span class="comment">        * @depreciated - This should not be used, moved to this.focus();</span>
<a name="l2839"><span class="linenum">2839</span></a>  <span class="comment">        * @method _focusWindow</span>
<a name="l2840"><span class="linenum">2840</span></a>  <span class="comment">        * @description Attempt to set the focus of the iframes window.</span>
<a name="l2841"><span class="linenum">2841</span></a>  <span class="comment">        */</span>
<a name="l2842"><span class="linenum">2842</span></a>          _focusWindow: function() {
<a name="l2843"><span class="linenum">2843</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('_focusWindow: depreciated in favor of this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>()', 'warn', 'Editor');
<a name="l2844"><span class="linenum">2844</span></a>              this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l2845"><span class="linenum">2845</span></a>          },
<a name="l2846"><span class="linenum">2846</span></a>          <span class="comment">/**</span>
<a name="l2847"><span class="linenum">2847</span></a>  <span class="comment">        * @private</span>
<a name="l2848"><span class="linenum">2848</span></a>  <span class="comment">        * @method _hasSelection</span>
<a name="l2849"><span class="linenum">2849</span></a>  <span class="comment">        * @description Determines if there is a selection in the editor document.</span>
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l2851"><span class="linenum">2851</span></a>  <span class="comment">        */</span>
<a name="l2852"><span class="linenum">2852</span></a>          _hasSelection: function() {
<a name="l2853"><span class="linenum">2853</span></a>              var sel = this._getSelection();
<a name="l2854"><span class="linenum">2854</span></a>              var range = this._getRange();
<a name="l2855"><span class="linenum">2855</span></a>              var hasSel = false;
<a name="l2856"><span class="linenum">2856</span></a>  
<a name="l2857"><span class="linenum">2857</span></a>              if (!sel || !range) {
<a name="l2858"><span class="linenum">2858</span></a>                  return hasSel;
<a name="l2859"><span class="linenum">2859</span></a>              }
<a name="l2860"><span class="linenum">2860</span></a>  
<a name="l2861"><span class="linenum">2861</span></a>  <span class="comment">            //Internet Explorer</span>
<a name="l2862"><span class="linenum">2862</span></a>              if (this.browser.ie) {
<a name="l2863"><span class="linenum">2863</span></a>                  if (range.text) {
<a name="l2864"><span class="linenum">2864</span></a>                      hasSel = true;
<a name="l2865"><span class="linenum">2865</span></a>                  }
<a name="l2866"><span class="linenum">2866</span></a>                  if (range.html) {
<a name="l2867"><span class="linenum">2867</span></a>                      hasSel = true;
<a name="l2868"><span class="linenum">2868</span></a>                  }
<a name="l2869"><span class="linenum">2869</span></a>              } else {
<a name="l2870"><span class="linenum">2870</span></a>                  if (this.browser.webkit) {
<a name="l2871"><span class="linenum">2871</span></a>                      if (sel+'' !== '') {
<a name="l2872"><span class="linenum">2872</span></a>                          hasSel = true;
<a name="l2873"><span class="linenum">2873</span></a>                      }
<a name="l2874"><span class="linenum">2874</span></a>                  } else {
<a name="l2875"><span class="linenum">2875</span></a>                      if (sel &amp;&amp; (sel.<a class="function" onClick="logFunction('toString')" href="../../../../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>() !== '') &amp;&amp; (sel !== undefined)) {
<a name="l2876"><span class="linenum">2876</span></a>                          hasSel = true;
<a name="l2877"><span class="linenum">2877</span></a>                      }
<a name="l2878"><span class="linenum">2878</span></a>                  }
<a name="l2879"><span class="linenum">2879</span></a>              }
<a name="l2880"><span class="linenum">2880</span></a>              return hasSel;
<a name="l2881"><span class="linenum">2881</span></a>          },
<a name="l2882"><span class="linenum">2882</span></a>          <span class="comment">/**</span>
<a name="l2883"><span class="linenum">2883</span></a>  <span class="comment">        * @private</span>
<a name="l2884"><span class="linenum">2884</span></a>  <span class="comment">        * @method _getSelection</span>
<a name="l2885"><span class="linenum">2885</span></a>  <span class="comment">        * @description Handles the different selection objects across the A-Grade list.</span>
<a name="l2886"><span class="linenum">2886</span></a>  <span class="comment">        * @return {Object} Selection Object</span>
<a name="l2887"><span class="linenum">2887</span></a>  <span class="comment">        */</span>
<a name="l2888"><span class="linenum">2888</span></a>          _getSelection: function() {
<a name="l2889"><span class="linenum">2889</span></a>              var _sel = null;
<a name="l2890"><span class="linenum">2890</span></a>              if (this._getDoc() &amp;&amp; this._getWindow()) {
<a name="l2891"><span class="linenum">2891</span></a>                  if (this._getDoc().selection &amp;&amp;! this.browser.opera) {
<a name="l2892"><span class="linenum">2892</span></a>                      _sel = this._getDoc().selection;
<a name="l2893"><span class="linenum">2893</span></a>                  } else {
<a name="l2894"><span class="linenum">2894</span></a>                      _sel = this._getWindow().getSelection();
<a name="l2895"><span class="linenum">2895</span></a>                  }
<a name="l2896"><span class="linenum">2896</span></a>  <span class="comment">                //Handle Safari's lack of Selection Object</span>
<a name="l2897"><span class="linenum">2897</span></a>                  if (this.browser.webkit) {
<a name="l2898"><span class="linenum">2898</span></a>                      if (_sel.baseNode) {
<a name="l2899"><span class="linenum">2899</span></a>                              this._selection = {};
<a name="l2900"><span class="linenum">2900</span></a>                              this._selection.baseNode = _sel.baseNode;
<a name="l2901"><span class="linenum">2901</span></a>                              this._selection.baseOffset = _sel.baseOffset;
<a name="l2902"><span class="linenum">2902</span></a>                              this._selection.extentNode = _sel.extentNode;
<a name="l2903"><span class="linenum">2903</span></a>                              this._selection.extentOffset = _sel.extentOffset;
<a name="l2904"><span class="linenum">2904</span></a>                      } else if (this._selection !== null) {
<a name="l2905"><span class="linenum">2905</span></a>                          _sel = this._getWindow().getSelection();
<a name="l2906"><span class="linenum">2906</span></a>                          _sel.setBaseAndExtent(
<a name="l2907"><span class="linenum">2907</span></a>                              this._selection.baseNode,
<a name="l2908"><span class="linenum">2908</span></a>                              this._selection.baseOffset,
<a name="l2909"><span class="linenum">2909</span></a>                              this._selection.extentNode,
<a name="l2910"><span class="linenum">2910</span></a>                              this._selection.extentOffset);
<a name="l2911"><span class="linenum">2911</span></a>                          this._selection = null;
<a name="l2912"><span class="linenum">2912</span></a>                      }
<a name="l2913"><span class="linenum">2913</span></a>                  }
<a name="l2914"><span class="linenum">2914</span></a>              }
<a name="l2915"><span class="linenum">2915</span></a>              return _sel;
<a name="l2916"><span class="linenum">2916</span></a>          },
<a name="l2917"><span class="linenum">2917</span></a>          <span class="comment">/**</span>
<a name="l2918"><span class="linenum">2918</span></a>  <span class="comment">        * @private</span>
<a name="l2919"><span class="linenum">2919</span></a>  <span class="comment">        * @method _selectNode</span>
<a name="l2920"><span class="linenum">2920</span></a>  <span class="comment">        * @description Places the highlight around a given node</span>
<a name="l2921"><span class="linenum">2921</span></a>  <span class="comment">        * @param {HTMLElement} node The node to select</span>
<a name="l2922"><span class="linenum">2922</span></a>  <span class="comment">        */</span>
<a name="l2923"><span class="linenum">2923</span></a>          _selectNode: function(node, collapse) {
<a name="l2924"><span class="linenum">2924</span></a>              if (!node) {
<a name="l2925"><span class="linenum">2925</span></a>                  return false;
<a name="l2926"><span class="linenum">2926</span></a>              }
<a name="l2927"><span class="linenum">2927</span></a>              var sel = this._getSelection(),
<a name="l2928"><span class="linenum">2928</span></a>                  range = null;
<a name="l2929"><span class="linenum">2929</span></a>  
<a name="l2930"><span class="linenum">2930</span></a>              if (this.browser.ie) {
<a name="l2931"><span class="linenum">2931</span></a>                  try { //IE freaks out here sometimes..
<a name="l2932"><span class="linenum">2932</span></a>                      range = this._getDoc().body.createTextRange();
<a name="l2933"><span class="linenum">2933</span></a>                      range.moveToElementText(node);
<a name="l2934"><span class="linenum">2934</span></a>                      range.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l2935"><span class="linenum">2935</span></a>                  } catch (e) {
<a name="l2936"><span class="linenum">2936</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('IE failed to select element: ' + node.tagName, 'warn', 'SimpleEditor');
<a name="l2937"><span class="linenum">2937</span></a>                  }
<a name="l2938"><span class="linenum">2938</span></a>              } else if (this.browser.webkit) {
<a name="l2939"><span class="linenum">2939</span></a>                  if (collapse) {
<a name="l2940"><span class="linenum">2940</span></a>                      sel.setBaseAndExtent(node, 1, node, node.innerText.length);
<a name="l2941"><span class="linenum">2941</span></a>                  } else {
<a name="l2942"><span class="linenum">2942</span></a>                      sel.setBaseAndExtent(node, 0, node, node.innerText.length);
<a name="l2943"><span class="linenum">2943</span></a>                  }
<a name="l2944"><span class="linenum">2944</span></a>              } else if (this.browser.opera) {
<a name="l2945"><span class="linenum">2945</span></a>                  sel = this._getWindow().getSelection();
<a name="l2946"><span class="linenum">2946</span></a>                  range = this._getDoc().createRange();
<a name="l2947"><span class="linenum">2947</span></a>                  range.<a class="function" onClick="logFunction('selectNode')" href="../../../../../../_functions/selectnode.html" onMouseOver="funcPopup(event,'selectnode')">selectNode</a>(node);
<a name="l2948"><span class="linenum">2948</span></a>                  sel.removeAllRanges();
<a name="l2949"><span class="linenum">2949</span></a>                  sel.addRange(range);
<a name="l2950"><span class="linenum">2950</span></a>              } else {
<a name="l2951"><span class="linenum">2951</span></a>                  range = this._getDoc().createRange();
<a name="l2952"><span class="linenum">2952</span></a>                  range.<a class="function" onClick="logFunction('selectNodeContents')" href="../../../../../../_functions/selectnodecontents.html" onMouseOver="funcPopup(event,'selectnodecontents')">selectNodeContents</a>(node);
<a name="l2953"><span class="linenum">2953</span></a>                  sel.removeAllRanges();
<a name="l2954"><span class="linenum">2954</span></a>                  sel.addRange(range);
<a name="l2955"><span class="linenum">2955</span></a>              }
<a name="l2956"><span class="linenum">2956</span></a>  <span class="comment">            //TODO - Check Performance</span>
<a name="l2957"><span class="linenum">2957</span></a>              this.nodeChange();
<a name="l2958"><span class="linenum">2958</span></a>          },
<a name="l2959"><span class="linenum">2959</span></a>          <span class="comment">/**</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">        * @private</span>
<a name="l2961"><span class="linenum">2961</span></a>  <span class="comment">        * @method _getRange</span>
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment">        * @description Handles the different range objects across the A-Grade list.</span>
<a name="l2963"><span class="linenum">2963</span></a>  <span class="comment">        * @return {Object} Range Object</span>
<a name="l2964"><span class="linenum">2964</span></a>  <span class="comment">        */</span>
<a name="l2965"><span class="linenum">2965</span></a>          _getRange: function() {
<a name="l2966"><span class="linenum">2966</span></a>              var sel = this._getSelection();
<a name="l2967"><span class="linenum">2967</span></a>  
<a name="l2968"><span class="linenum">2968</span></a>              if (sel === null) {
<a name="l2969"><span class="linenum">2969</span></a>                  return null;
<a name="l2970"><span class="linenum">2970</span></a>              }
<a name="l2971"><span class="linenum">2971</span></a>  
<a name="l2972"><span class="linenum">2972</span></a>              if (this.browser.webkit &amp;&amp; !sel.getRangeAt) {
<a name="l2973"><span class="linenum">2973</span></a>                  var _range = this._getDoc().createRange();
<a name="l2974"><span class="linenum">2974</span></a>                  try {
<a name="l2975"><span class="linenum">2975</span></a>                      _range.<a class="function" onClick="logFunction('setStart')" href="../../../../../../_functions/setstart.html" onMouseOver="funcPopup(event,'setstart')">setStart</a>(sel.anchorNode, sel.anchorOffset);
<a name="l2976"><span class="linenum">2976</span></a>                      _range.<a class="function" onClick="logFunction('setEnd')" href="../../../../../../_functions/setend.html" onMouseOver="funcPopup(event,'setend')">setEnd</a>(sel.focusNode, sel.focusOffset);
<a name="l2977"><span class="linenum">2977</span></a>                  } catch (e) {
<a name="l2978"><span class="linenum">2978</span></a>                      _range = this._getWindow().getSelection()+'';
<a name="l2979"><span class="linenum">2979</span></a>                  }
<a name="l2980"><span class="linenum">2980</span></a>                  return _range;
<a name="l2981"><span class="linenum">2981</span></a>              }
<a name="l2982"><span class="linenum">2982</span></a>  
<a name="l2983"><span class="linenum">2983</span></a>              if (this.browser.ie) {
<a name="l2984"><span class="linenum">2984</span></a>                  try {
<a name="l2985"><span class="linenum">2985</span></a>                      return sel.createRange();
<a name="l2986"><span class="linenum">2986</span></a>                  } catch (e2) {
<a name="l2987"><span class="linenum">2987</span></a>                      return null;
<a name="l2988"><span class="linenum">2988</span></a>                  }
<a name="l2989"><span class="linenum">2989</span></a>              }
<a name="l2990"><span class="linenum">2990</span></a>  
<a name="l2991"><span class="linenum">2991</span></a>              if (sel.rangeCount &gt; 0) {
<a name="l2992"><span class="linenum">2992</span></a>                  return sel.getRangeAt(0);
<a name="l2993"><span class="linenum">2993</span></a>              }
<a name="l2994"><span class="linenum">2994</span></a>              return null;
<a name="l2995"><span class="linenum">2995</span></a>          },
<a name="l2996"><span class="linenum">2996</span></a>          <span class="comment">/**</span>
<a name="l2997"><span class="linenum">2997</span></a>  <span class="comment">        * @private</span>
<a name="l2998"><span class="linenum">2998</span></a>  <span class="comment">        * @method _setDesignMode</span>
<a name="l2999"><span class="linenum">2999</span></a>  <span class="comment">        * @description Sets the designMode property of the iFrame document's body.</span>
<a name="l3000"><span class="linenum">3000</span></a>  <span class="comment">        * @param {String} state This should be either on or off</span>
<a name="l3001"><span class="linenum">3001</span></a>  <span class="comment">        */</span>
<a name="l3002"><span class="linenum">3002</span></a>          _setDesignMode: function(state) {
<a name="l3003"><span class="linenum">3003</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('setDesignMode')) {
<a name="l3004"><span class="linenum">3004</span></a>                  try {
<a name="l3005"><span class="linenum">3005</span></a>                      this._getDoc().designMode = ((state.toLowerCase() == 'off') ? 'off' : 'on');
<a name="l3006"><span class="linenum">3006</span></a>                  } catch(e) { }
<a name="l3007"><span class="linenum">3007</span></a>              }
<a name="l3008"><span class="linenum">3008</span></a>          },
<a name="l3009"><span class="linenum">3009</span></a>          <span class="comment">/**</span>
<a name="l3010"><span class="linenum">3010</span></a>  <span class="comment">        * @private</span>
<a name="l3011"><span class="linenum">3011</span></a>  <span class="comment">        * @method _toggleDesignMode</span>
<a name="l3012"><span class="linenum">3012</span></a>  <span class="comment">        * @description Toggles the designMode property of the iFrame document on and off.</span>
<a name="l3013"><span class="linenum">3013</span></a>  <span class="comment">        * @return {String} The state that it was set to.</span>
<a name="l3014"><span class="linenum">3014</span></a>  <span class="comment">        */</span>
<a name="l3015"><span class="linenum">3015</span></a>          _toggleDesignMode: function() {
<a name="l3016"><span class="linenum">3016</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('It is not recommended to use this method and it will be depreciated.', 'warn', 'SimpleEditor');
<a name="l3017"><span class="linenum">3017</span></a>              var _dMode = this._getDoc().designMode,
<a name="l3018"><span class="linenum">3018</span></a>                  _state = ((_dMode.toLowerCase() == 'on') ? 'off' : 'on');
<a name="l3019"><span class="linenum">3019</span></a>              this._setDesignMode(_state);
<a name="l3020"><span class="linenum">3020</span></a>              return _state;
<a name="l3021"><span class="linenum">3021</span></a>          },
<a name="l3022"><span class="linenum">3022</span></a>          <span class="comment">/**</span>
<a name="l3023"><span class="linenum">3023</span></a>  <span class="comment">        * @private</span>
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment">        * @property _focused</span>
<a name="l3025"><span class="linenum">3025</span></a>  <span class="comment">        * @description Holder for trapping focus/blur state and prevent double events</span>
<a name="l3026"><span class="linenum">3026</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l3027"><span class="linenum">3027</span></a>  <span class="comment">        */</span>
<a name="l3028"><span class="linenum">3028</span></a>          _focused: null,
<a name="l3029"><span class="linenum">3029</span></a>          <span class="comment">/**</span>
<a name="l3030"><span class="linenum">3030</span></a>  <span class="comment">        * @private</span>
<a name="l3031"><span class="linenum">3031</span></a>  <span class="comment">        * @method _handleFocus</span>
<a name="l3032"><span class="linenum">3032</span></a>  <span class="comment">        * @description Handles the focus of the iframe. Note, this is window focus event, not an Editor focus event.</span>
<a name="l3033"><span class="linenum">3033</span></a>  <span class="comment">        * @param {Event} e The DOM Event</span>
<a name="l3034"><span class="linenum">3034</span></a>  <span class="comment">        */</span>
<a name="l3035"><span class="linenum">3035</span></a>          _handleFocus: function(e) {
<a name="l3036"><span class="linenum">3036</span></a>              if (!this._focused) {
<a name="l3037"><span class="linenum">3037</span></a>  <span class="comment">                //YAHOO.log('Editor Window Focused', 'info', 'SimpleEditor');</span>
<a name="l3038"><span class="linenum">3038</span></a>                  this._focused = true;
<a name="l3039"><span class="linenum">3039</span></a>                  this.fireEvent('editorWindowFocus', { type: 'editorWindowFocus', target: this });
<a name="l3040"><span class="linenum">3040</span></a>              }
<a name="l3041"><span class="linenum">3041</span></a>          },
<a name="l3042"><span class="linenum">3042</span></a>          <span class="comment">/**</span>
<a name="l3043"><span class="linenum">3043</span></a>  <span class="comment">        * @private</span>
<a name="l3044"><span class="linenum">3044</span></a>  <span class="comment">        * @method _handleBlur</span>
<a name="l3045"><span class="linenum">3045</span></a>  <span class="comment">        * @description Handles the blur of the iframe. Note, this is window blur event, not an Editor blur event.</span>
<a name="l3046"><span class="linenum">3046</span></a>  <span class="comment">        * @param {Event} e The DOM Event</span>
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment">        */</span>
<a name="l3048"><span class="linenum">3048</span></a>          _handleBlur: function(e) {
<a name="l3049"><span class="linenum">3049</span></a>              if (this._focused) {
<a name="l3050"><span class="linenum">3050</span></a>  <span class="comment">                //YAHOO.log('Editor Window Blurred', 'info', 'SimpleEditor');</span>
<a name="l3051"><span class="linenum">3051</span></a>                  this._focused = false;
<a name="l3052"><span class="linenum">3052</span></a>                  this.fireEvent('editorWindowBlur', { type: 'editorWindowBlur', target: this });
<a name="l3053"><span class="linenum">3053</span></a>              }
<a name="l3054"><span class="linenum">3054</span></a>          },
<a name="l3055"><span class="linenum">3055</span></a>          <span class="comment">/**</span>
<a name="l3056"><span class="linenum">3056</span></a>  <span class="comment">        * @private</span>
<a name="l3057"><span class="linenum">3057</span></a>  <span class="comment">        * @method _initEditorEvents</span>
<a name="l3058"><span class="linenum">3058</span></a>  <span class="comment">        * @description This method sets up the listeners on the Editors document.</span>
<a name="l3059"><span class="linenum">3059</span></a>  <span class="comment">        */</span>
<a name="l3060"><span class="linenum">3060</span></a>          _initEditorEvents: function() {
<a name="l3061"><span class="linenum">3061</span></a>  <span class="comment">            //Setup Listeners on iFrame</span>
<a name="l3062"><span class="linenum">3062</span></a>              var doc = this._getDoc(),
<a name="l3063"><span class="linenum">3063</span></a>                  win = this._getWindow();
<a name="l3064"><span class="linenum">3064</span></a>  
<a name="l3065"><span class="linenum">3065</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'mouseup', this._handleMouseUp, this, true);
<a name="l3066"><span class="linenum">3066</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'mousedown', this._handleMouseDown, this, true);
<a name="l3067"><span class="linenum">3067</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'click', this._handleClick, this, true);
<a name="l3068"><span class="linenum">3068</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'dblclick', this._handleDoubleClick, this, true);
<a name="l3069"><span class="linenum">3069</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'keypress', this._handleKeyPress, this, true);
<a name="l3070"><span class="linenum">3070</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'keyup', this._handleKeyUp, this, true);
<a name="l3071"><span class="linenum">3071</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(doc, 'keydown', this._handleKeyDown, this, true);
<a name="l3072"><span class="linenum">3072</span></a>              <span class="comment">/* TODO -- Everyone but Opera works here..</span>
<a name="l3073"><span class="linenum">3073</span></a>  <span class="comment">            Event.on(doc, 'paste', function() {</span>
<a name="l3074"><span class="linenum">3074</span></a>  <span class="comment">                YAHOO.log('PASTE', 'info', 'SimpleEditor');</span>
<a name="l3075"><span class="linenum">3075</span></a>  <span class="comment">            }, this, true);</span>
<a name="l3076"><span class="linenum">3076</span></a>  <span class="comment">            */</span>
<a name="l3077"><span class="linenum">3077</span></a>   
<a name="l3078"><span class="linenum">3078</span></a>  <span class="comment">            //Focus and blur..</span>
<a name="l3079"><span class="linenum">3079</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(win, 'focus', this._handleFocus, this, true);
<a name="l3080"><span class="linenum">3080</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(win, 'blur', this._handleBlur, this, true);
<a name="l3081"><span class="linenum">3081</span></a>          },
<a name="l3082"><span class="linenum">3082</span></a>          <span class="comment">/**</span>
<a name="l3083"><span class="linenum">3083</span></a>  <span class="comment">        * @private</span>
<a name="l3084"><span class="linenum">3084</span></a>  <span class="comment">        * @method _removeEditorEvents</span>
<a name="l3085"><span class="linenum">3085</span></a>  <span class="comment">        * @description This method removes the listeners on the Editors document (for disabling).</span>
<a name="l3086"><span class="linenum">3086</span></a>  <span class="comment">        */</span>
<a name="l3087"><span class="linenum">3087</span></a>          _removeEditorEvents: function() {
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">            //Remove Listeners on iFrame</span>
<a name="l3089"><span class="linenum">3089</span></a>              var doc = this._getDoc(),
<a name="l3090"><span class="linenum">3090</span></a>                  win = this._getWindow();
<a name="l3091"><span class="linenum">3091</span></a>  
<a name="l3092"><span class="linenum">3092</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'mouseup', this._handleMouseUp, this, true);
<a name="l3093"><span class="linenum">3093</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'mousedown', this._handleMouseDown, this, true);
<a name="l3094"><span class="linenum">3094</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'click', this._handleClick, this, true);
<a name="l3095"><span class="linenum">3095</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'dblclick', this._handleDoubleClick, this, true);
<a name="l3096"><span class="linenum">3096</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'keypress', this._handleKeyPress, this, true);
<a name="l3097"><span class="linenum">3097</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'keyup', this._handleKeyUp, this, true);
<a name="l3098"><span class="linenum">3098</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(doc, 'keydown', this._handleKeyDown, this, true);
<a name="l3099"><span class="linenum">3099</span></a>  
<a name="l3100"><span class="linenum">3100</span></a>  <span class="comment">            //Focus and blur..</span>
<a name="l3101"><span class="linenum">3101</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(win, 'focus', this._handleFocus, this, true);
<a name="l3102"><span class="linenum">3102</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(win, 'blur', this._handleBlur, this, true);
<a name="l3103"><span class="linenum">3103</span></a>          },
<a name="l3104"><span class="linenum">3104</span></a>          _fixWebkitDivs: function() {
<a name="l3105"><span class="linenum">3105</span></a>              if (this.browser.webkit) {
<a name="l3106"><span class="linenum">3106</span></a>                  var divs = this._getDoc().body.getElementsByTagName('div');
<a name="l3107"><span class="linenum">3107</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(divs, 'yui-wk-div');
<a name="l3108"><span class="linenum">3108</span></a>              }
<a name="l3109"><span class="linenum">3109</span></a>          },
<a name="l3110"><span class="linenum">3110</span></a>          <span class="comment">/**</span>
<a name="l3111"><span class="linenum">3111</span></a>  <span class="comment">        * @private</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment">        * @method _initEditor</span>
<a name="l3113"><span class="linenum">3113</span></a>  <span class="comment">        * @param {Boolean} raw Don't add events.</span>
<a name="l3114"><span class="linenum">3114</span></a>  <span class="comment">        * @description This method is fired from _checkLoaded when the document is ready. It turns on designMode and set's up the listeners.</span>
<a name="l3115"><span class="linenum">3115</span></a>  <span class="comment">        */</span>
<a name="l3116"><span class="linenum">3116</span></a>          _initEditor: function(raw) {
<a name="l3117"><span class="linenum">3117</span></a>              if (this._editorInit) {
<a name="l3118"><span class="linenum">3118</span></a>                  return;
<a name="l3119"><span class="linenum">3119</span></a>              }
<a name="l3120"><span class="linenum">3120</span></a>              this._editorInit = true;
<a name="l3121"><span class="linenum">3121</span></a>              if (this.browser.ie) {
<a name="l3122"><span class="linenum">3122</span></a>                  this._getDoc().body.style.margin = '0';
<a name="l3123"><span class="linenum">3123</span></a>              }
<a name="l3124"><span class="linenum">3124</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l3125"><span class="linenum">3125</span></a>                  this._setDesignMode('on');
<a name="l3126"><span class="linenum">3126</span></a>                  this._contentTimerCounter = 0;
<a name="l3127"><span class="linenum">3127</span></a>              }
<a name="l3128"><span class="linenum">3128</span></a>              if (!this._getDoc().body) {
<a name="l3129"><span class="linenum">3129</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Body is null, check again', 'error', 'SimpleEditor');
<a name="l3130"><span class="linenum">3130</span></a>                  this._contentTimerCounter = 0;
<a name="l3131"><span class="linenum">3131</span></a>                  this._editorInit = false;
<a name="l3132"><span class="linenum">3132</span></a>                  this._checkLoaded();
<a name="l3133"><span class="linenum">3133</span></a>                  return false;
<a name="l3134"><span class="linenum">3134</span></a>              }
<a name="l3135"><span class="linenum">3135</span></a>              
<a name="l3136"><span class="linenum">3136</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('editorLoaded', 'info', 'SimpleEditor');
<a name="l3137"><span class="linenum">3137</span></a>              if (!raw) {
<a name="l3138"><span class="linenum">3138</span></a>                  this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('buttonClick', this._handleToolbarClick, this, true);
<a name="l3139"><span class="linenum">3139</span></a>              }
<a name="l3140"><span class="linenum">3140</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l3141"><span class="linenum">3141</span></a>                  this._initEditorEvents();
<a name="l3142"><span class="linenum">3142</span></a>                  this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', false);
<a name="l3143"><span class="linenum">3143</span></a>              }
<a name="l3144"><span class="linenum">3144</span></a>  
<a name="l3145"><span class="linenum">3145</span></a>              if (raw) {
<a name="l3146"><span class="linenum">3146</span></a>                  this.fireEvent('editorContentReloaded', { type: 'editorreloaded', target: this });
<a name="l3147"><span class="linenum">3147</span></a>              } else {
<a name="l3148"><span class="linenum">3148</span></a>                  this.fireEvent('editorContentLoaded', { type: 'editorLoaded', target: this });
<a name="l3149"><span class="linenum">3149</span></a>              }
<a name="l3150"><span class="linenum">3150</span></a>              this._fixWebkitDivs();
<a name="l3151"><span class="linenum">3151</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('dompath')) {
<a name="l3152"><span class="linenum">3152</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Delayed DomPath write', 'info', 'SimpleEditor');
<a name="l3153"><span class="linenum">3153</span></a>                  var self = this;
<a name="l3154"><span class="linenum">3154</span></a>                  <a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l3155"><span class="linenum">3155</span></a>                      self._writeDomPath.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l3156"><span class="linenum">3156</span></a>                      self._setupResize.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l3157"><span class="linenum">3157</span></a>                  }, 150);
<a name="l3158"><span class="linenum">3158</span></a>              }
<a name="l3159"><span class="linenum">3159</span></a>              var br = [];
<a name="l3160"><span class="linenum">3160</span></a>              for (var i in this.browser) {
<a name="l3161"><span class="linenum">3161</span></a>                  if (this.browser[i]) {
<a name="l3162"><span class="linenum">3162</span></a>                      br.<a class="function" onClick="logFunction('push')" href="../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(i);
<a name="l3163"><span class="linenum">3163</span></a>                  }
<a name="l3164"><span class="linenum">3164</span></a>              }
<a name="l3165"><span class="linenum">3165</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('ptags')) {
<a name="l3166"><span class="linenum">3166</span></a>                  br.<a class="function" onClick="logFunction('push')" href="../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>('ptags');
<a name="l3167"><span class="linenum">3167</span></a>              }
<a name="l3168"><span class="linenum">3168</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._getDoc().body, br.<a class="function" onClick="logFunction('join')" href="../../../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(' '));
<a name="l3169"><span class="linenum">3169</span></a>              this.nodeChange(true);
<a name="l3170"><span class="linenum">3170</span></a>          },
<a name="l3171"><span class="linenum">3171</span></a>          <span class="comment">/**</span>
<a name="l3172"><span class="linenum">3172</span></a>  <span class="comment">        * @private</span>
<a name="l3173"><span class="linenum">3173</span></a>  <span class="comment">        * @method _checkLoaded</span>
<a name="l3174"><span class="linenum">3174</span></a>  <span class="comment">        * @param {Boolean} raw Don't add events.</span>
<a name="l3175"><span class="linenum">3175</span></a>  <span class="comment">        * @description Called from a setTimeout loop to check if the iframes body.onload event has fired, then it will init the editor.</span>
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment">        */</span>
<a name="l3177"><span class="linenum">3177</span></a>          _checkLoaded: function(raw) {
<a name="l3178"><span class="linenum">3178</span></a>              this._editorInit = false;
<a name="l3179"><span class="linenum">3179</span></a>              this._contentTimerCounter++;
<a name="l3180"><span class="linenum">3180</span></a>              if (this._contentTimer) {
<a name="l3181"><span class="linenum">3181</span></a>                  clearTimeout(this._contentTimer);
<a name="l3182"><span class="linenum">3182</span></a>              }
<a name="l3183"><span class="linenum">3183</span></a>              if (this._contentTimerCounter &gt; this._contentTimerMax) {
<a name="l3184"><span class="linenum">3184</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('ERROR: Body Did Not load', 'error', 'SimpleEditor');
<a name="l3185"><span class="linenum">3185</span></a>                  return false;
<a name="l3186"><span class="linenum">3186</span></a>              }
<a name="l3187"><span class="linenum">3187</span></a>              var init = false;
<a name="l3188"><span class="linenum">3188</span></a>              try {
<a name="l3189"><span class="linenum">3189</span></a>                  if (this._getDoc() &amp;&amp; this._getDoc().body) {
<a name="l3190"><span class="linenum">3190</span></a>                      if (this.browser.ie) {
<a name="l3191"><span class="linenum">3191</span></a>                          if (this._getDoc().body.readyState == 'complete') {
<a name="l3192"><span class="linenum">3192</span></a>                              init = true;
<a name="l3193"><span class="linenum">3193</span></a>                          }
<a name="l3194"><span class="linenum">3194</span></a>                      } else {
<a name="l3195"><span class="linenum">3195</span></a>                          if (this._getDoc().body._rteLoaded === true) {
<a name="l3196"><span class="linenum">3196</span></a>                              init = true;
<a name="l3197"><span class="linenum">3197</span></a>                          }
<a name="l3198"><span class="linenum">3198</span></a>                      }
<a name="l3199"><span class="linenum">3199</span></a>                  }
<a name="l3200"><span class="linenum">3200</span></a>              } catch (e) {
<a name="l3201"><span class="linenum">3201</span></a>                  init = false;
<a name="l3202"><span class="linenum">3202</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('checking <a class="function" onClick="logFunction('body')" href="../../../../../../_functions/body.html" onMouseOver="funcPopup(event,'body')">body</a> (e)' + e, 'error', 'SimpleEditor');
<a name="l3203"><span class="linenum">3203</span></a>              }
<a name="l3204"><span class="linenum">3204</span></a>  
<a name="l3205"><span class="linenum">3205</span></a>              if (init === true) {
<a name="l3206"><span class="linenum">3206</span></a>  <span class="comment">                //The onload event has fired, clean up after ourselves and fire the _initEditor method</span>
<a name="l3207"><span class="linenum">3207</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Firing _initEditor', 'info', 'SimpleEditor');
<a name="l3208"><span class="linenum">3208</span></a>                  this._initEditor(raw);
<a name="l3209"><span class="linenum">3209</span></a>              } else {
<a name="l3210"><span class="linenum">3210</span></a>                  var self = this;
<a name="l3211"><span class="linenum">3211</span></a>                  this._contentTimer = <a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l3212"><span class="linenum">3212</span></a>                      self._checkLoaded.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, raw);
<a name="l3213"><span class="linenum">3213</span></a>                  }, 20);
<a name="l3214"><span class="linenum">3214</span></a>              }
<a name="l3215"><span class="linenum">3215</span></a>          },
<a name="l3216"><span class="linenum">3216</span></a>          <span class="comment">/**</span>
<a name="l3217"><span class="linenum">3217</span></a>  <span class="comment">        * @private</span>
<a name="l3218"><span class="linenum">3218</span></a>  <span class="comment">        * @method _setInitialContent</span>
<a name="l3219"><span class="linenum">3219</span></a>  <span class="comment">        * @param {Boolean} raw Don't add events.</span>
<a name="l3220"><span class="linenum">3220</span></a>  <span class="comment">        * @description This method will open the iframes content document and write the textareas value into it, then start the body.onload checking.</span>
<a name="l3221"><span class="linenum">3221</span></a>  <span class="comment">        */</span>
<a name="l3222"><span class="linenum">3222</span></a>          _setInitialContent: function(raw) {
<a name="l3223"><span class="linenum">3223</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Populating editor body with contents of the text area', 'info', 'SimpleEditor');
<a name="l3224"><span class="linenum">3224</span></a>  
<a name="l3225"><span class="linenum">3225</span></a>              var value = ((this._textarea) ? this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').value : this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').innerHTML),
<a name="l3226"><span class="linenum">3226</span></a>                  doc = null;
<a name="l3227"><span class="linenum">3227</span></a>  
<a name="l3228"><span class="linenum">3228</span></a>              if (value === '') {
<a name="l3229"><span class="linenum">3229</span></a>                  value = '&lt;br&gt;';
<a name="l3230"><span class="linenum">3230</span></a>              }
<a name="l3231"><span class="linenum">3231</span></a>  
<a name="l3232"><span class="linenum">3232</span></a>              var html = Lang.<a class="function" onClick="logFunction('substitute')" href="../../../../../../_functions/substitute.html" onMouseOver="funcPopup(event,'substitute')">substitute</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('html'), {
<a name="l3233"><span class="linenum">3233</span></a>                  TITLE: this.STR_TITLE,
<a name="l3234"><span class="linenum">3234</span></a>                  CONTENT: this._cleanIncomingHTML(value),
<a name="l3235"><span class="linenum">3235</span></a>                  CSS: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('css'),
<a name="l3236"><span class="linenum">3236</span></a>                  HIDDEN_CSS: ((this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('hiddencss')) ? this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('hiddencss') : '<span class="comment">/* No Hidden CSS */</span>'),
<a name="l3237"><span class="linenum">3237</span></a>                  EXTRA_CSS: ((this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('extracss')) ? this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('extracss') : '<span class="comment">/* No Extra CSS */</span>')
<a name="l3238"><span class="linenum">3238</span></a>              }),
<a name="l3239"><span class="linenum">3239</span></a>              check = true;
<a name="l3240"><span class="linenum">3240</span></a>  
<a name="l3241"><span class="linenum">3241</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/RIGHT_BRACKET/gi, '{');
<a name="l3242"><span class="linenum">3242</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/LEFT_BRACKET/gi, '}');
<a name="l3243"><span class="linenum">3243</span></a>  
<a name="l3244"><span class="linenum">3244</span></a>              if (document.compatMode != 'BackCompat') {
<a name="l3245"><span class="linenum">3245</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Adding Doctype to editable area', 'info', 'SimpleEditor');
<a name="l3246"><span class="linenum">3246</span></a>                  html = this._docType + &quot;\n&quot; + html;
<a name="l3247"><span class="linenum">3247</span></a>              } else {
<a name="l3248"><span class="linenum">3248</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('DocType skipped because we are in BackCompat Mode.', 'warn', 'SimpleEditor');
<a name="l3249"><span class="linenum">3249</span></a>              }
<a name="l3250"><span class="linenum">3250</span></a>  
<a name="l3251"><span class="linenum">3251</span></a>              if (this.browser.ie || this.browser.webkit || this.browser.opera || (navigator.userAgent.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('Firefox/1.5') != -1)) {
<a name="l3252"><span class="linenum">3252</span></a>  <span class="comment">                //Firefox 1.5 doesn't like setting designMode on an document created with a data url</span>
<a name="l3253"><span class="linenum">3253</span></a>                  try {
<a name="l3254"><span class="linenum">3254</span></a>  <span class="comment">                    //Adobe AIR Code</span>
<a name="l3255"><span class="linenum">3255</span></a>                      if (this.browser.air) {
<a name="l3256"><span class="linenum">3256</span></a>                          doc = this._getDoc().implementation.createHTMLDocument();
<a name="l3257"><span class="linenum">3257</span></a>                          var origDoc = this._getDoc();
<a name="l3258"><span class="linenum">3258</span></a>                          origDoc.<a class="function" onClick="logFunction('open')" href="../../../../../../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>();
<a name="l3259"><span class="linenum">3259</span></a>                          origDoc.<a class="function" onClick="logFunction('close')" href="../../../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3260"><span class="linenum">3260</span></a>                          doc.<a class="function" onClick="logFunction('open')" href="../../../../../../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>();
<a name="l3261"><span class="linenum">3261</span></a>                          doc.<a class="function" onClick="logFunction('write')" href="../../../../../../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(html);
<a name="l3262"><span class="linenum">3262</span></a>                          doc.<a class="function" onClick="logFunction('close')" href="../../../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3263"><span class="linenum">3263</span></a>                          var node = origDoc.importNode(doc.getElementsByTagName(&quot;html&quot;)[0], true);
<a name="l3264"><span class="linenum">3264</span></a>                          origDoc.replaceChild(node, origDoc.getElementsByTagName(&quot;html&quot;)[0]);
<a name="l3265"><span class="linenum">3265</span></a>                          origDoc.body._rteLoaded = true;
<a name="l3266"><span class="linenum">3266</span></a>                      } else {
<a name="l3267"><span class="linenum">3267</span></a>                          doc = this._getDoc();
<a name="l3268"><span class="linenum">3268</span></a>                          doc.<a class="function" onClick="logFunction('open')" href="../../../../../../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>();
<a name="l3269"><span class="linenum">3269</span></a>                          doc.<a class="function" onClick="logFunction('write')" href="../../../../../../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(html);
<a name="l3270"><span class="linenum">3270</span></a>                          doc.<a class="function" onClick="logFunction('close')" href="../../../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3271"><span class="linenum">3271</span></a>                      }
<a name="l3272"><span class="linenum">3272</span></a>                  } catch (e) {
<a name="l3273"><span class="linenum">3273</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Setting doc failed.. (_setInitialContent)', 'error', 'SimpleEditor');
<a name="l3274"><span class="linenum">3274</span></a>  <span class="comment">                    //Safari will only be here if we are hidden</span>
<a name="l3275"><span class="linenum">3275</span></a>                      check = false;
<a name="l3276"><span class="linenum">3276</span></a>                  }
<a name="l3277"><span class="linenum">3277</span></a>              } else {
<a name="l3278"><span class="linenum">3278</span></a>  <span class="comment">                //This keeps Firefox 2 from writing the iframe to history preserving the back buttons functionality</span>
<a name="l3279"><span class="linenum">3279</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').src = 'data:text/html;charset=utf-8,' + <a class="function" onClick="logFunction('encodeURIComponent')" href="../../../../../../_functions/encodeuricomponent.html" onMouseOver="funcPopup(event,'encodeuricomponent')">encodeURIComponent</a>(html);
<a name="l3280"><span class="linenum">3280</span></a>              }
<a name="l3281"><span class="linenum">3281</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', '');
<a name="l3282"><span class="linenum">3282</span></a>              if (check) {
<a name="l3283"><span class="linenum">3283</span></a>                  this._checkLoaded(raw);
<a name="l3284"><span class="linenum">3284</span></a>              }            
<a name="l3285"><span class="linenum">3285</span></a>          },
<a name="l3286"><span class="linenum">3286</span></a>          <span class="comment">/**</span>
<a name="l3287"><span class="linenum">3287</span></a>  <span class="comment">        * @private</span>
<a name="l3288"><span class="linenum">3288</span></a>  <span class="comment">        * @method _setMarkupType</span>
<a name="l3289"><span class="linenum">3289</span></a>  <span class="comment">        * @param {String} action The action to take. Possible values are: css, default or semantic</span>
<a name="l3290"><span class="linenum">3290</span></a>  <span class="comment">        * @description This method will turn on/off the useCSS execCommand.</span>
<a name="l3291"><span class="linenum">3291</span></a>  <span class="comment">        */</span>
<a name="l3292"><span class="linenum">3292</span></a>          _setMarkupType: function(action) {
<a name="l3293"><span class="linenum">3293</span></a>              switch (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('markup')) {
<a name="l3294"><span class="linenum">3294</span></a>                  case 'css':
<a name="l3295"><span class="linenum">3295</span></a>                      this._setEditorStyle(true);
<a name="l3296"><span class="linenum">3296</span></a>                      break;
<a name="l3297"><span class="linenum">3297</span></a>                  case 'default':
<a name="l3298"><span class="linenum">3298</span></a>                      this._setEditorStyle(false);
<a name="l3299"><span class="linenum">3299</span></a>                      break;
<a name="l3300"><span class="linenum">3300</span></a>                  case 'semantic':
<a name="l3301"><span class="linenum">3301</span></a>                  case 'xhtml':
<a name="l3302"><span class="linenum">3302</span></a>                      if (this._semantic[action]) {
<a name="l3303"><span class="linenum">3303</span></a>                          this._setEditorStyle(false);
<a name="l3304"><span class="linenum">3304</span></a>                      } else {
<a name="l3305"><span class="linenum">3305</span></a>                          this._setEditorStyle(true);
<a name="l3306"><span class="linenum">3306</span></a>                      }
<a name="l3307"><span class="linenum">3307</span></a>                      break;
<a name="l3308"><span class="linenum">3308</span></a>              }
<a name="l3309"><span class="linenum">3309</span></a>          },
<a name="l3310"><span class="linenum">3310</span></a>          <span class="comment">/**</span>
<a name="l3311"><span class="linenum">3311</span></a>  <span class="comment">        * Set the editor to use CSS instead of HTML</span>
<a name="l3312"><span class="linenum">3312</span></a>  <span class="comment">        * @param {Booleen} stat True/False</span>
<a name="l3313"><span class="linenum">3313</span></a>  <span class="comment">        */</span>
<a name="l3314"><span class="linenum">3314</span></a>          _setEditorStyle: function(stat) {
<a name="l3315"><span class="linenum">3315</span></a>              try {
<a name="l3316"><span class="linenum">3316</span></a>                  this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('useCSS', false, !stat);
<a name="l3317"><span class="linenum">3317</span></a>              } catch (ex) {
<a name="l3318"><span class="linenum">3318</span></a>              }
<a name="l3319"><span class="linenum">3319</span></a>          },
<a name="l3320"><span class="linenum">3320</span></a>          <span class="comment">/**</span>
<a name="l3321"><span class="linenum">3321</span></a>  <span class="comment">        * @private</span>
<a name="l3322"><span class="linenum">3322</span></a>  <span class="comment">        * @method _getSelectedElement</span>
<a name="l3323"><span class="linenum">3323</span></a>  <span class="comment">        * @description This method will attempt to locate the element that was last interacted with, either via selection, location or event.</span>
<a name="l3324"><span class="linenum">3324</span></a>  <span class="comment">        * @return {HTMLElement} The currently selected element.</span>
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment">        */</span>
<a name="l3326"><span class="linenum">3326</span></a>          _getSelectedElement: function() {
<a name="l3327"><span class="linenum">3327</span></a>              var doc = this._getDoc(),
<a name="l3328"><span class="linenum">3328</span></a>                  range = null,
<a name="l3329"><span class="linenum">3329</span></a>                  sel = null,
<a name="l3330"><span class="linenum">3330</span></a>                  elm = null,
<a name="l3331"><span class="linenum">3331</span></a>                  check = true;
<a name="l3332"><span class="linenum">3332</span></a>  
<a name="l3333"><span class="linenum">3333</span></a>              if (this.browser.ie) {
<a name="l3334"><span class="linenum">3334</span></a>                  this.currentEvent = this._getWindow().event; <span class="comment">//Event utility assumes window.event, so we need to reset it to this._getWindow().event;</span>
<a name="l3335"><span class="linenum">3335</span></a>                  range = this._getRange();
<a name="l3336"><span class="linenum">3336</span></a>                  if (range) {
<a name="l3337"><span class="linenum">3337</span></a>                      elm = range.item ? range.<a class="function" onClick="logFunction('item')" href="../../../../../../_functions/item.html" onMouseOver="funcPopup(event,'item')">item</a>(0) : range.<a class="function" onClick="logFunction('parentElement')" href="../../../../../../_functions/parentelement.html" onMouseOver="funcPopup(event,'parentelement')">parentElement</a>();
<a name="l3338"><span class="linenum">3338</span></a>                      if (this._hasSelection()) {
<a name="l3339"><span class="linenum">3339</span></a>  <span class="comment">                        //TODO</span>
<a name="l3340"><span class="linenum">3340</span></a>  <span class="comment">                        //WTF.. Why can't I get an element reference here?!??!</span>
<a name="l3341"><span class="linenum">3341</span></a>                      }
<a name="l3342"><span class="linenum">3342</span></a>                      if (elm === doc.body) {
<a name="l3343"><span class="linenum">3343</span></a>                          elm = null;
<a name="l3344"><span class="linenum">3344</span></a>                      }
<a name="l3345"><span class="linenum">3345</span></a>                  }
<a name="l3346"><span class="linenum">3346</span></a>                  if ((this.currentEvent !== null) &amp;&amp; (this.currentEvent.keyCode === 0)) {
<a name="l3347"><span class="linenum">3347</span></a>                      elm = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(this.currentEvent);
<a name="l3348"><span class="linenum">3348</span></a>                  }
<a name="l3349"><span class="linenum">3349</span></a>              } else {
<a name="l3350"><span class="linenum">3350</span></a>                  sel = this._getSelection();
<a name="l3351"><span class="linenum">3351</span></a>                  range = this._getRange();
<a name="l3352"><span class="linenum">3352</span></a>  
<a name="l3353"><span class="linenum">3353</span></a>                  if (!sel || !range) {
<a name="l3354"><span class="linenum">3354</span></a>                      return null;
<a name="l3355"><span class="linenum">3355</span></a>                  }
<a name="l3356"><span class="linenum">3356</span></a>  <span class="comment">                //TODO</span>
<a name="l3357"><span class="linenum">3357</span></a>                  if (!this._hasSelection() &amp;&amp; this.browser.webkit3) {
<a name="l3358"><span class="linenum">3358</span></a>  <span class="comment">                    //check = false;</span>
<a name="l3359"><span class="linenum">3359</span></a>                  }
<a name="l3360"><span class="linenum">3360</span></a>                  if (this.browser.gecko) {
<a name="l3361"><span class="linenum">3361</span></a>  <span class="comment">                    //Added in 2.6.0</span>
<a name="l3362"><span class="linenum">3362</span></a>                      if (range.startContainer) {
<a name="l3363"><span class="linenum">3363</span></a>                          if (range.startContainer.nodeType === 3) {
<a name="l3364"><span class="linenum">3364</span></a>                              elm = range.startContainer.parentNode;
<a name="l3365"><span class="linenum">3365</span></a>                          } else if (range.startContainer.nodeType === 1) {
<a name="l3366"><span class="linenum">3366</span></a>                              elm = range.startContainer;
<a name="l3367"><span class="linenum">3367</span></a>                          }
<a name="l3368"><span class="linenum">3368</span></a>  <span class="comment">                        //Added in 2.7.0</span>
<a name="l3369"><span class="linenum">3369</span></a>                          if (this.currentEvent) {
<a name="l3370"><span class="linenum">3370</span></a>                              var tar = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(this.currentEvent);
<a name="l3371"><span class="linenum">3371</span></a>                              if (!this._isElement(tar, 'html')) {
<a name="l3372"><span class="linenum">3372</span></a>                                  if (elm !== tar) {
<a name="l3373"><span class="linenum">3373</span></a>                                      elm = tar;
<a name="l3374"><span class="linenum">3374</span></a>                                  }
<a name="l3375"><span class="linenum">3375</span></a>                              }
<a name="l3376"><span class="linenum">3376</span></a>                          }
<a name="l3377"><span class="linenum">3377</span></a>                      }
<a name="l3378"><span class="linenum">3378</span></a>                  }
<a name="l3379"><span class="linenum">3379</span></a>                  
<a name="l3380"><span class="linenum">3380</span></a>                  if (check) {
<a name="l3381"><span class="linenum">3381</span></a>                      if (sel.anchorNode &amp;&amp; (sel.anchorNode.nodeType == 3)) {
<a name="l3382"><span class="linenum">3382</span></a>                          if (sel.anchorNode.parentNode) { //next check parentNode
<a name="l3383"><span class="linenum">3383</span></a>                              elm = sel.anchorNode.parentNode;
<a name="l3384"><span class="linenum">3384</span></a>                          }
<a name="l3385"><span class="linenum">3385</span></a>                          if (sel.anchorNode.nextSibling != sel.focusNode.nextSibling) {
<a name="l3386"><span class="linenum">3386</span></a>                              elm = sel.anchorNode.nextSibling;
<a name="l3387"><span class="linenum">3387</span></a>                          }
<a name="l3388"><span class="linenum">3388</span></a>                      }
<a name="l3389"><span class="linenum">3389</span></a>                      if (this._isElement(elm, 'br')) {
<a name="l3390"><span class="linenum">3390</span></a>                          elm = null;
<a name="l3391"><span class="linenum">3391</span></a>                      }
<a name="l3392"><span class="linenum">3392</span></a>                      if (!elm) {
<a name="l3393"><span class="linenum">3393</span></a>                          elm = range.commonAncestorContainer;
<a name="l3394"><span class="linenum">3394</span></a>                          if (!range.collapsed) {
<a name="l3395"><span class="linenum">3395</span></a>                              if (range.startContainer == range.endContainer) {
<a name="l3396"><span class="linenum">3396</span></a>                                  if (range.startOffset - range.endOffset &lt; 2) {
<a name="l3397"><span class="linenum">3397</span></a>                                      if (range.startContainer.hasChildNodes()) {
<a name="l3398"><span class="linenum">3398</span></a>                                          elm = range.startContainer.childNodes[range.startOffset];
<a name="l3399"><span class="linenum">3399</span></a>                                      }
<a name="l3400"><span class="linenum">3400</span></a>                                  }
<a name="l3401"><span class="linenum">3401</span></a>                              }
<a name="l3402"><span class="linenum">3402</span></a>                          }
<a name="l3403"><span class="linenum">3403</span></a>                      }
<a name="l3404"><span class="linenum">3404</span></a>                 }
<a name="l3405"><span class="linenum">3405</span></a>              }
<a name="l3406"><span class="linenum">3406</span></a>              
<a name="l3407"><span class="linenum">3407</span></a>              if (this.currentEvent !== null) {
<a name="l3408"><span class="linenum">3408</span></a>                  try {
<a name="l3409"><span class="linenum">3409</span></a>                      switch (this.currentEvent.type) {
<a name="l3410"><span class="linenum">3410</span></a>                          case 'click':
<a name="l3411"><span class="linenum">3411</span></a>                          case 'mousedown':
<a name="l3412"><span class="linenum">3412</span></a>                          case 'mouseup':
<a name="l3413"><span class="linenum">3413</span></a>                              if (this.browser.webkit) {
<a name="l3414"><span class="linenum">3414</span></a>                                  elm = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(this.currentEvent);
<a name="l3415"><span class="linenum">3415</span></a>                              }
<a name="l3416"><span class="linenum">3416</span></a>                              break;
<a name="l3417"><span class="linenum">3417</span></a>                          default:
<a name="l3418"><span class="linenum">3418</span></a>  <span class="comment">                            //Do nothing</span>
<a name="l3419"><span class="linenum">3419</span></a>                              break;
<a name="l3420"><span class="linenum">3420</span></a>                      }
<a name="l3421"><span class="linenum">3421</span></a>                  } catch (e) {
<a name="l3422"><span class="linenum">3422</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Firefox 1.5 errors here: ' + e, 'error', 'SimpleEditor');
<a name="l3423"><span class="linenum">3423</span></a>                  }
<a name="l3424"><span class="linenum">3424</span></a>              } else if ((this.currentElement &amp;&amp; this.currentElement[0]) &amp;&amp; (!this.browser.ie)) {
<a name="l3425"><span class="linenum">3425</span></a>  <span class="comment">                //TODO is this still needed?</span>
<a name="l3426"><span class="linenum">3426</span></a>  <span class="comment">                //elm = this.currentElement[0];</span>
<a name="l3427"><span class="linenum">3427</span></a>              }
<a name="l3428"><span class="linenum">3428</span></a>  
<a name="l3429"><span class="linenum">3429</span></a>  
<a name="l3430"><span class="linenum">3430</span></a>              if (this.browser.opera || this.browser.webkit) {
<a name="l3431"><span class="linenum">3431</span></a>                  if (this.currentEvent &amp;&amp; !elm) {
<a name="l3432"><span class="linenum">3432</span></a>                      elm = YAHOO.util.Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(this.currentEvent);
<a name="l3433"><span class="linenum">3433</span></a>                  }
<a name="l3434"><span class="linenum">3434</span></a>              }
<a name="l3435"><span class="linenum">3435</span></a>              if (!elm || !elm.tagName) {
<a name="l3436"><span class="linenum">3436</span></a>                  elm = doc.body;
<a name="l3437"><span class="linenum">3437</span></a>              }
<a name="l3438"><span class="linenum">3438</span></a>              if (this._isElement(elm, 'html')) {
<a name="l3439"><span class="linenum">3439</span></a>  <span class="comment">                //Safari sometimes gives us the HTML node back..</span>
<a name="l3440"><span class="linenum">3440</span></a>                  elm = doc.body;
<a name="l3441"><span class="linenum">3441</span></a>              }
<a name="l3442"><span class="linenum">3442</span></a>              if (this._isElement(elm, 'body')) {
<a name="l3443"><span class="linenum">3443</span></a>  <span class="comment">                //make sure that body means this body not the parent..</span>
<a name="l3444"><span class="linenum">3444</span></a>                  elm = doc.body;
<a name="l3445"><span class="linenum">3445</span></a>              }
<a name="l3446"><span class="linenum">3446</span></a>              if (elm &amp;&amp; !elm.parentNode) { //Not in document
<a name="l3447"><span class="linenum">3447</span></a>                  elm = doc.body;
<a name="l3448"><span class="linenum">3448</span></a>              }
<a name="l3449"><span class="linenum">3449</span></a>              if (elm === undefined) {
<a name="l3450"><span class="linenum">3450</span></a>                  elm = null;
<a name="l3451"><span class="linenum">3451</span></a>              }
<a name="l3452"><span class="linenum">3452</span></a>              return elm;
<a name="l3453"><span class="linenum">3453</span></a>          },
<a name="l3454"><span class="linenum">3454</span></a>          <span class="comment">/**</span>
<a name="l3455"><span class="linenum">3455</span></a>  <span class="comment">        * @private</span>
<a name="l3456"><span class="linenum">3456</span></a>  <span class="comment">        * @method _getDomPath</span>
<a name="l3457"><span class="linenum">3457</span></a>  <span class="comment">        * @description This method will attempt to build the DOM path from the currently selected element.</span>
<a name="l3458"><span class="linenum">3458</span></a>  <span class="comment">        * @param HTMLElement el The element to start with, if not provided _getSelectedElement is used</span>
<a name="l3459"><span class="linenum">3459</span></a>  <span class="comment">        * @return {Array} An array of node references that will create the DOM Path.</span>
<a name="l3460"><span class="linenum">3460</span></a>  <span class="comment">        */</span>
<a name="l3461"><span class="linenum">3461</span></a>          _getDomPath: function(el) {
<a name="l3462"><span class="linenum">3462</span></a>              if (!el) {
<a name="l3463"><span class="linenum">3463</span></a>                  el = this._getSelectedElement();
<a name="l3464"><span class="linenum">3464</span></a>              }
<a name="l3465"><span class="linenum">3465</span></a>              var domPath = [];
<a name="l3466"><span class="linenum">3466</span></a>              while (el !== null) {
<a name="l3467"><span class="linenum">3467</span></a>                  if (el.ownerDocument != this._getDoc()) {
<a name="l3468"><span class="linenum">3468</span></a>                      el = null;
<a name="l3469"><span class="linenum">3469</span></a>                      break;
<a name="l3470"><span class="linenum">3470</span></a>                  }
<a name="l3471"><span class="linenum">3471</span></a>  <span class="comment">                //Check to see if we get el.nodeName and nodeType</span>
<a name="l3472"><span class="linenum">3472</span></a>                  if (el.nodeName &amp;&amp; el.nodeType &amp;&amp; (el.nodeType == 1)) {
<a name="l3473"><span class="linenum">3473</span></a>                      domPath[domPath.length] = el;
<a name="l3474"><span class="linenum">3474</span></a>                  }
<a name="l3475"><span class="linenum">3475</span></a>  
<a name="l3476"><span class="linenum">3476</span></a>                  if (this._isElement(el, 'body')) {
<a name="l3477"><span class="linenum">3477</span></a>                      break;
<a name="l3478"><span class="linenum">3478</span></a>                  }
<a name="l3479"><span class="linenum">3479</span></a>  
<a name="l3480"><span class="linenum">3480</span></a>                  el = el.parentNode;
<a name="l3481"><span class="linenum">3481</span></a>              }
<a name="l3482"><span class="linenum">3482</span></a>              if (domPath.length === 0) {
<a name="l3483"><span class="linenum">3483</span></a>                  if (this._getDoc() &amp;&amp; this._getDoc().body) {
<a name="l3484"><span class="linenum">3484</span></a>                      domPath[0] = this._getDoc().body;
<a name="l3485"><span class="linenum">3485</span></a>                  }
<a name="l3486"><span class="linenum">3486</span></a>              }
<a name="l3487"><span class="linenum">3487</span></a>              return domPath.<a class="function" onClick="logFunction('reverse')" href="../../../../../../_functions/reverse.html" onMouseOver="funcPopup(event,'reverse')">reverse</a>();
<a name="l3488"><span class="linenum">3488</span></a>          },
<a name="l3489"><span class="linenum">3489</span></a>          <span class="comment">/**</span>
<a name="l3490"><span class="linenum">3490</span></a>  <span class="comment">        * @private</span>
<a name="l3491"><span class="linenum">3491</span></a>  <span class="comment">        * @method _writeDomPath</span>
<a name="l3492"><span class="linenum">3492</span></a>  <span class="comment">        * @description Write the current DOM path out to the dompath container below the editor.</span>
<a name="l3493"><span class="linenum">3493</span></a>  <span class="comment">        */</span>
<a name="l3494"><span class="linenum">3494</span></a>          _writeDomPath: function() { 
<a name="l3495"><span class="linenum">3495</span></a>              var path = this._getDomPath(),
<a name="l3496"><span class="linenum">3496</span></a>                  pathArr = [],
<a name="l3497"><span class="linenum">3497</span></a>                  classPath = '',
<a name="l3498"><span class="linenum">3498</span></a>                  pathStr = '';
<a name="l3499"><span class="linenum">3499</span></a>  
<a name="l3500"><span class="linenum">3500</span></a>              for (var i = 0; i &lt; path.length; i++) {
<a name="l3501"><span class="linenum">3501</span></a>                  var tag = path[i].tagName.toLowerCase();
<a name="l3502"><span class="linenum">3502</span></a>                  if ((tag == 'ol') &amp;&amp; (path[i].type)) {
<a name="l3503"><span class="linenum">3503</span></a>                      tag += ':' + path[i].type;
<a name="l3504"><span class="linenum">3504</span></a>                  }
<a name="l3505"><span class="linenum">3505</span></a>                  if (Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(path[i], 'yui-tag')) {
<a name="l3506"><span class="linenum">3506</span></a>                      tag = path[i].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('tag');
<a name="l3507"><span class="linenum">3507</span></a>                  }
<a name="l3508"><span class="linenum">3508</span></a>                  if ((this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('markup') == 'semantic') || (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('markup') == 'xhtml')) {
<a name="l3509"><span class="linenum">3509</span></a>                      switch (tag) {
<a name="l3510"><span class="linenum">3510</span></a>                          case 'b': tag = 'strong'; break;
<a name="l3511"><span class="linenum">3511</span></a>                          case 'i': tag = 'em'; break;
<a name="l3512"><span class="linenum">3512</span></a>                      }
<a name="l3513"><span class="linenum">3513</span></a>                  }
<a name="l3514"><span class="linenum">3514</span></a>                  if (!Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(path[i], 'yui-non')) {
<a name="l3515"><span class="linenum">3515</span></a>                      if (Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(path[i], 'yui-tag')) {
<a name="l3516"><span class="linenum">3516</span></a>                          pathStr = tag;
<a name="l3517"><span class="linenum">3517</span></a>                      } else {
<a name="l3518"><span class="linenum">3518</span></a>                          classPath = ((path[i].className !== '') ? '.' + path[i].className.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ /g, '.') : '');
<a name="l3519"><span class="linenum">3519</span></a>                          if ((classPath.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('yui') != -1) || (classPath.toLowerCase().<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('apple-style-span') != -1)) {
<a name="l3520"><span class="linenum">3520</span></a>                              classPath = '';
<a name="l3521"><span class="linenum">3521</span></a>                          }
<a name="l3522"><span class="linenum">3522</span></a>                          pathStr = tag + ((path[i].id) ? '#' + path[i].id : '') + classPath;
<a name="l3523"><span class="linenum">3523</span></a>                      }
<a name="l3524"><span class="linenum">3524</span></a>                      switch (tag) {
<a name="l3525"><span class="linenum">3525</span></a>                          case 'body':
<a name="l3526"><span class="linenum">3526</span></a>                              pathStr = 'body';
<a name="l3527"><span class="linenum">3527</span></a>                              break;
<a name="l3528"><span class="linenum">3528</span></a>                          case 'a':
<a name="l3529"><span class="linenum">3529</span></a>                              if (path[i].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2)) {
<a name="l3530"><span class="linenum">3530</span></a>                                  pathStr += ':' + path[i].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2).<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>('mailto:', '').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>('http:/'+'/', '').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>('https:/'+'/', ''); <span class="comment">//May need to add others here ftp</span>
<a name="l3531"><span class="linenum">3531</span></a>                              }
<a name="l3532"><span class="linenum">3532</span></a>                              break;
<a name="l3533"><span class="linenum">3533</span></a>                          case 'img':
<a name="l3534"><span class="linenum">3534</span></a>                              var h = path[i].height;
<a name="l3535"><span class="linenum">3535</span></a>                              var w = path[i].width;
<a name="l3536"><span class="linenum">3536</span></a>                              if (path[i].style.height) {
<a name="l3537"><span class="linenum">3537</span></a>                                  h = parseInt(path[i].style.height, 10);
<a name="l3538"><span class="linenum">3538</span></a>                              }
<a name="l3539"><span class="linenum">3539</span></a>                              if (path[i].style.width) {
<a name="l3540"><span class="linenum">3540</span></a>                                  w = parseInt(path[i].style.width, 10);
<a name="l3541"><span class="linenum">3541</span></a>                              }
<a name="l3542"><span class="linenum">3542</span></a>                              pathStr += '(' + w + 'x' + h + ')';
<a name="l3543"><span class="linenum">3543</span></a>                          break;
<a name="l3544"><span class="linenum">3544</span></a>                      }
<a name="l3545"><span class="linenum">3545</span></a>  
<a name="l3546"><span class="linenum">3546</span></a>                      if (pathStr.length &gt; 10) {
<a name="l3547"><span class="linenum">3547</span></a>                          pathStr = '&lt;span title=&quot;' + pathStr + '&quot;&gt;' + pathStr.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 10) + '...' + '&lt;/span&gt;';
<a name="l3548"><span class="linenum">3548</span></a>                      } else {
<a name="l3549"><span class="linenum">3549</span></a>                          pathStr = '&lt;span title=&quot;' + pathStr + '&quot;&gt;' + pathStr + '&lt;/span&gt;';
<a name="l3550"><span class="linenum">3550</span></a>                      }
<a name="l3551"><span class="linenum">3551</span></a>                      pathArr[pathArr.length] = pathStr;
<a name="l3552"><span class="linenum">3552</span></a>                  }
<a name="l3553"><span class="linenum">3553</span></a>              }
<a name="l3554"><span class="linenum">3554</span></a>              var str = pathArr.<a class="function" onClick="logFunction('join')" href="../../../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(' ' + this.SEP_DOMPATH + ' ');
<a name="l3555"><span class="linenum">3555</span></a>  <span class="comment">            //Prevent flickering</span>
<a name="l3556"><span class="linenum">3556</span></a>              if (this.dompath.innerHTML != str) {
<a name="l3557"><span class="linenum">3557</span></a>                  this.dompath.innerHTML = str;
<a name="l3558"><span class="linenum">3558</span></a>              }
<a name="l3559"><span class="linenum">3559</span></a>          },
<a name="l3560"><span class="linenum">3560</span></a>          <span class="comment">/**</span>
<a name="l3561"><span class="linenum">3561</span></a>  <span class="comment">        * @private</span>
<a name="l3562"><span class="linenum">3562</span></a>  <span class="comment">        * @method _fixNodes</span>
<a name="l3563"><span class="linenum">3563</span></a>  <span class="comment">        * @description Fix href and imgs as well as remove invalid HTML.</span>
<a name="l3564"><span class="linenum">3564</span></a>  <span class="comment">        */</span>
<a name="l3565"><span class="linenum">3565</span></a>          _fixNodes: function() {
<a name="l3566"><span class="linenum">3566</span></a>              try {
<a name="l3567"><span class="linenum">3567</span></a>                  var doc = this._getDoc(),
<a name="l3568"><span class="linenum">3568</span></a>                      els = [];
<a name="l3569"><span class="linenum">3569</span></a>  
<a name="l3570"><span class="linenum">3570</span></a>                  for (var v in this.invalidHTML) {
<a name="l3571"><span class="linenum">3571</span></a>                      if (YAHOO.lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(this.invalidHTML, v)) {
<a name="l3572"><span class="linenum">3572</span></a>                          if (v.toLowerCase() != 'span') {
<a name="l3573"><span class="linenum">3573</span></a>                              var tags = doc.body.getElementsByTagName(v);
<a name="l3574"><span class="linenum">3574</span></a>                              if (tags.length) {
<a name="l3575"><span class="linenum">3575</span></a>                                  for (var i = 0; i &lt; tags.length; i++) {
<a name="l3576"><span class="linenum">3576</span></a>                                      els.<a class="function" onClick="logFunction('push')" href="../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(tags[i]);
<a name="l3577"><span class="linenum">3577</span></a>                                  }
<a name="l3578"><span class="linenum">3578</span></a>                              }
<a name="l3579"><span class="linenum">3579</span></a>                          }
<a name="l3580"><span class="linenum">3580</span></a>                      }
<a name="l3581"><span class="linenum">3581</span></a>                  }
<a name="l3582"><span class="linenum">3582</span></a>                  for (var h = 0; h &lt; els.length; h++) {
<a name="l3583"><span class="linenum">3583</span></a>                      if (els[h].parentNode) {
<a name="l3584"><span class="linenum">3584</span></a>                          if (Lang.isObject(this.invalidHTML[els[h].tagName.toLowerCase()]) &amp;&amp; this.invalidHTML[els[h].tagName.toLowerCase()].keepContents) {
<a name="l3585"><span class="linenum">3585</span></a>                              this._swapEl(els[h], 'span', function(el) {
<a name="l3586"><span class="linenum">3586</span></a>                                  el.className = 'yui-non';
<a name="l3587"><span class="linenum">3587</span></a>                              });
<a name="l3588"><span class="linenum">3588</span></a>                          } else {
<a name="l3589"><span class="linenum">3589</span></a>                              els[h].parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(els[h]);
<a name="l3590"><span class="linenum">3590</span></a>                          }
<a name="l3591"><span class="linenum">3591</span></a>                      }
<a name="l3592"><span class="linenum">3592</span></a>                  }
<a name="l3593"><span class="linenum">3593</span></a>                  var imgs = this._getDoc().getElementsByTagName('img');
<a name="l3594"><span class="linenum">3594</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(imgs, 'yui-img');
<a name="l3595"><span class="linenum">3595</span></a>              } catch(e) {}
<a name="l3596"><span class="linenum">3596</span></a>          },
<a name="l3597"><span class="linenum">3597</span></a>          <span class="comment">/**</span>
<a name="l3598"><span class="linenum">3598</span></a>  <span class="comment">        * @private</span>
<a name="l3599"><span class="linenum">3599</span></a>  <span class="comment">        * @method _isNonEditable</span>
<a name="l3600"><span class="linenum">3600</span></a>  <span class="comment">        * @param Event ev The Dom event being checked</span>
<a name="l3601"><span class="linenum">3601</span></a>  <span class="comment">        * @description Method is called at the beginning of all event handlers to check if this element or a parent element has the class yui-noedit (this.CLASS_NOEDIT) applied.</span>
<a name="l3602"><span class="linenum">3602</span></a>  <span class="comment">        * If it does, then this method will stop the event and return true. The event handlers will then return false and stop the nodeChange from occuring. This method will also</span>
<a name="l3603"><span class="linenum">3603</span></a>  <span class="comment">        * disable and enable the Editor's toolbar based on the noedit state.</span>
<a name="l3604"><span class="linenum">3604</span></a>  <span class="comment">        * @return Boolean</span>
<a name="l3605"><span class="linenum">3605</span></a>  <span class="comment">        */</span>
<a name="l3606"><span class="linenum">3606</span></a>          _isNonEditable: function(ev) {
<a name="l3607"><span class="linenum">3607</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('allowNoEdit')) {
<a name="l3608"><span class="linenum">3608</span></a>                  var el = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l3609"><span class="linenum">3609</span></a>                  if (this._isElement(el, 'html')) {
<a name="l3610"><span class="linenum">3610</span></a>                      el = null;
<a name="l3611"><span class="linenum">3611</span></a>                  }
<a name="l3612"><span class="linenum">3612</span></a>                  var path = this._getDomPath(el);
<a name="l3613"><span class="linenum">3613</span></a>                  for (var i = (path.length - 1); i &gt; -1; i--) {
<a name="l3614"><span class="linenum">3614</span></a>                      if (Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(path[i], this.CLASS_NOEDIT)) {
<a name="l3615"><span class="linenum">3615</span></a>  <span class="comment">                        //if (this.toolbar.get('disabled') === false) {</span>
<a name="l3616"><span class="linenum">3616</span></a>  <span class="comment">                        //    this.toolbar.set('disabled', true);</span>
<a name="l3617"><span class="linenum">3617</span></a>  <span class="comment">                        //}</span>
<a name="l3618"><span class="linenum">3618</span></a>                          try {
<a name="l3619"><span class="linenum">3619</span></a>                               this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('enableObjectResizing', false, 'false');
<a name="l3620"><span class="linenum">3620</span></a>                          } catch (e) {}
<a name="l3621"><span class="linenum">3621</span></a>                          this.nodeChange();
<a name="l3622"><span class="linenum">3622</span></a>                          Event.stopEvent(ev);
<a name="l3623"><span class="linenum">3623</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('CLASS_NOEDIT found in DOM Path, stopping event', 'info', 'SimpleEditor');
<a name="l3624"><span class="linenum">3624</span></a>                          return true;
<a name="l3625"><span class="linenum">3625</span></a>                      }
<a name="l3626"><span class="linenum">3626</span></a>                  }
<a name="l3627"><span class="linenum">3627</span></a>  <span class="comment">                //if (this.toolbar.get('disabled') === true) {</span>
<a name="l3628"><span class="linenum">3628</span></a>  <span class="comment">                    //Should only happen once..</span>
<a name="l3629"><span class="linenum">3629</span></a>  <span class="comment">                    //this.toolbar.set('disabled', false);</span>
<a name="l3630"><span class="linenum">3630</span></a>                      try {
<a name="l3631"><span class="linenum">3631</span></a>                           this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('enableObjectResizing', false, 'true');
<a name="l3632"><span class="linenum">3632</span></a>                      } catch (e2) {}
<a name="l3633"><span class="linenum">3633</span></a>  <span class="comment">                //}</span>
<a name="l3634"><span class="linenum">3634</span></a>              }
<a name="l3635"><span class="linenum">3635</span></a>              return false;
<a name="l3636"><span class="linenum">3636</span></a>          },
<a name="l3637"><span class="linenum">3637</span></a>          <span class="comment">/**</span>
<a name="l3638"><span class="linenum">3638</span></a>  <span class="comment">        * @private</span>
<a name="l3639"><span class="linenum">3639</span></a>  <span class="comment">        * @method _setCurrentEvent</span>
<a name="l3640"><span class="linenum">3640</span></a>  <span class="comment">        * @param {Event} ev The event to cache</span>
<a name="l3641"><span class="linenum">3641</span></a>  <span class="comment">        * @description Sets the current event property</span>
<a name="l3642"><span class="linenum">3642</span></a>  <span class="comment">        */</span>
<a name="l3643"><span class="linenum">3643</span></a>          _setCurrentEvent: function(ev) {
<a name="l3644"><span class="linenum">3644</span></a>              this.currentEvent = ev;
<a name="l3645"><span class="linenum">3645</span></a>          },
<a name="l3646"><span class="linenum">3646</span></a>          <span class="comment">/**</span>
<a name="l3647"><span class="linenum">3647</span></a>  <span class="comment">        * @private</span>
<a name="l3648"><span class="linenum">3648</span></a>  <span class="comment">        * @method _handleClick</span>
<a name="l3649"><span class="linenum">3649</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3650"><span class="linenum">3650</span></a>  <span class="comment">        * @description Handles all click events inside the iFrame document.</span>
<a name="l3651"><span class="linenum">3651</span></a>  <span class="comment">        */</span>
<a name="l3652"><span class="linenum">3652</span></a>          _handleClick: function(ev) {
<a name="l3653"><span class="linenum">3653</span></a>              var ret = this.fireEvent('beforeEditorClick', { type: 'beforeEditorClick', target: this, ev: ev });
<a name="l3654"><span class="linenum">3654</span></a>              if (ret === false) {
<a name="l3655"><span class="linenum">3655</span></a>                  return false;
<a name="l3656"><span class="linenum">3656</span></a>              }
<a name="l3657"><span class="linenum">3657</span></a>              if (this._isNonEditable(ev)) {
<a name="l3658"><span class="linenum">3658</span></a>                  return false;
<a name="l3659"><span class="linenum">3659</span></a>              }
<a name="l3660"><span class="linenum">3660</span></a>              this._setCurrentEvent(ev);
<a name="l3661"><span class="linenum">3661</span></a>              if (this.currentWindow) {
<a name="l3662"><span class="linenum">3662</span></a>                  this.closeWindow();
<a name="l3663"><span class="linenum">3663</span></a>              }
<a name="l3664"><span class="linenum">3664</span></a>              if (this.currentWindow) {
<a name="l3665"><span class="linenum">3665</span></a>                  this.closeWindow();
<a name="l3666"><span class="linenum">3666</span></a>              }
<a name="l3667"><span class="linenum">3667</span></a>              if (this.browser.webkit) {
<a name="l3668"><span class="linenum">3668</span></a>                  var tar =Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l3669"><span class="linenum">3669</span></a>                  if (this._isElement(tar, 'a') || this._isElement(tar.parentNode, 'a')) {
<a name="l3670"><span class="linenum">3670</span></a>                      Event.stopEvent(ev);
<a name="l3671"><span class="linenum">3671</span></a>                      this.nodeChange();
<a name="l3672"><span class="linenum">3672</span></a>                  }
<a name="l3673"><span class="linenum">3673</span></a>              } else {
<a name="l3674"><span class="linenum">3674</span></a>                  this.nodeChange();
<a name="l3675"><span class="linenum">3675</span></a>              }
<a name="l3676"><span class="linenum">3676</span></a>              this.fireEvent('editorClick', { type: 'editorClick', target: this, ev: ev });
<a name="l3677"><span class="linenum">3677</span></a>          },
<a name="l3678"><span class="linenum">3678</span></a>          <span class="comment">/**</span>
<a name="l3679"><span class="linenum">3679</span></a>  <span class="comment">        * @private</span>
<a name="l3680"><span class="linenum">3680</span></a>  <span class="comment">        * @method _handleMouseUp</span>
<a name="l3681"><span class="linenum">3681</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3682"><span class="linenum">3682</span></a>  <span class="comment">        * @description Handles all mouseup events inside the iFrame document.</span>
<a name="l3683"><span class="linenum">3683</span></a>  <span class="comment">        */</span>
<a name="l3684"><span class="linenum">3684</span></a>          _handleMouseUp: function(ev) {
<a name="l3685"><span class="linenum">3685</span></a>              var ret = this.fireEvent('beforeEditorMouseUp', { type: 'beforeEditorMouseUp', target: this, ev: ev });
<a name="l3686"><span class="linenum">3686</span></a>              if (ret === false) {
<a name="l3687"><span class="linenum">3687</span></a>                  return false;
<a name="l3688"><span class="linenum">3688</span></a>              }
<a name="l3689"><span class="linenum">3689</span></a>              if (this._isNonEditable(ev)) {
<a name="l3690"><span class="linenum">3690</span></a>                  return false;
<a name="l3691"><span class="linenum">3691</span></a>              }
<a name="l3692"><span class="linenum">3692</span></a>  <span class="comment">            //Don't set current event for mouseup.</span>
<a name="l3693"><span class="linenum">3693</span></a>  <span class="comment">            //It get's fired after a menu is closed and gives up a bogus event to work with</span>
<a name="l3694"><span class="linenum">3694</span></a>  <span class="comment">            //this._setCurrentEvent(ev);</span>
<a name="l3695"><span class="linenum">3695</span></a>              var self = this;
<a name="l3696"><span class="linenum">3696</span></a>              if (this.browser.opera) {
<a name="l3697"><span class="linenum">3697</span></a>                  <span class="comment">/*</span>
<a name="l3698"><span class="linenum">3698</span></a>  <span class="comment">                * @knownissue Opera appears to stop the MouseDown, Click and DoubleClick events on an image inside of a document with designMode on..</span>
<a name="l3699"><span class="linenum">3699</span></a>  <span class="comment">                * @browser Opera</span>
<a name="l3700"><span class="linenum">3700</span></a>  <span class="comment">                * @description This work around traps the MouseUp event and sets a timer to check if another MouseUp event fires in so many seconds. If another event is fired, they we internally fire the DoubleClick event.</span>
<a name="l3701"><span class="linenum">3701</span></a>  <span class="comment">                */</span>
<a name="l3702"><span class="linenum">3702</span></a>                  var sel = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l3703"><span class="linenum">3703</span></a>                  if (this._isElement(sel, 'img')) {
<a name="l3704"><span class="linenum">3704</span></a>                      this.nodeChange();
<a name="l3705"><span class="linenum">3705</span></a>                      if (this.operaEvent) {
<a name="l3706"><span class="linenum">3706</span></a>                          clearTimeout(this.operaEvent);
<a name="l3707"><span class="linenum">3707</span></a>                          this.operaEvent = null;
<a name="l3708"><span class="linenum">3708</span></a>                          this._handleDoubleClick(ev);
<a name="l3709"><span class="linenum">3709</span></a>                      } else {
<a name="l3710"><span class="linenum">3710</span></a>                          this.operaEvent = window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l3711"><span class="linenum">3711</span></a>                              self.operaEvent = false;
<a name="l3712"><span class="linenum">3712</span></a>                          }, 700);
<a name="l3713"><span class="linenum">3713</span></a>                      }
<a name="l3714"><span class="linenum">3714</span></a>                  }
<a name="l3715"><span class="linenum">3715</span></a>              }
<a name="l3716"><span class="linenum">3716</span></a>  <span class="comment">            //This will stop Safari from selecting the entire document if you select all the text in the editor</span>
<a name="l3717"><span class="linenum">3717</span></a>              if (this.browser.webkit || this.browser.opera) {
<a name="l3718"><span class="linenum">3718</span></a>                  if (this.browser.webkit) {
<a name="l3719"><span class="linenum">3719</span></a>                      Event.stopEvent(ev);
<a name="l3720"><span class="linenum">3720</span></a>                  }
<a name="l3721"><span class="linenum">3721</span></a>              }
<a name="l3722"><span class="linenum">3722</span></a>              this.nodeChange();
<a name="l3723"><span class="linenum">3723</span></a>              this.fireEvent('editorMouseUp', { type: 'editorMouseUp', target: this, ev: ev });
<a name="l3724"><span class="linenum">3724</span></a>          },
<a name="l3725"><span class="linenum">3725</span></a>          <span class="comment">/**</span>
<a name="l3726"><span class="linenum">3726</span></a>  <span class="comment">        * @private</span>
<a name="l3727"><span class="linenum">3727</span></a>  <span class="comment">        * @method _handleMouseDown</span>
<a name="l3728"><span class="linenum">3728</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3729"><span class="linenum">3729</span></a>  <span class="comment">        * @description Handles all mousedown events inside the iFrame document.</span>
<a name="l3730"><span class="linenum">3730</span></a>  <span class="comment">        */</span>
<a name="l3731"><span class="linenum">3731</span></a>          _handleMouseDown: function(ev) {
<a name="l3732"><span class="linenum">3732</span></a>              var ret = this.fireEvent('beforeEditorMouseDown', { type: 'beforeEditorMouseDown', target: this, ev: ev });
<a name="l3733"><span class="linenum">3733</span></a>              if (ret === false) {
<a name="l3734"><span class="linenum">3734</span></a>                  return false;
<a name="l3735"><span class="linenum">3735</span></a>              }
<a name="l3736"><span class="linenum">3736</span></a>              if (this._isNonEditable(ev)) {
<a name="l3737"><span class="linenum">3737</span></a>                  return false;
<a name="l3738"><span class="linenum">3738</span></a>              }
<a name="l3739"><span class="linenum">3739</span></a>              this._setCurrentEvent(ev);
<a name="l3740"><span class="linenum">3740</span></a>              var sel = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l3741"><span class="linenum">3741</span></a>              if (this.browser.webkit &amp;&amp; this._hasSelection()) {
<a name="l3742"><span class="linenum">3742</span></a>                  var _sel = this._getSelection();
<a name="l3743"><span class="linenum">3743</span></a>                  if (!this.browser.webkit3) {
<a name="l3744"><span class="linenum">3744</span></a>                      _sel.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(true);
<a name="l3745"><span class="linenum">3745</span></a>                  } else {
<a name="l3746"><span class="linenum">3746</span></a>                      _sel.collapseToStart();
<a name="l3747"><span class="linenum">3747</span></a>                  }
<a name="l3748"><span class="linenum">3748</span></a>              }
<a name="l3749"><span class="linenum">3749</span></a>              if (this.browser.webkit &amp;&amp; this._lastImage) {
<a name="l3750"><span class="linenum">3750</span></a>                  Dom.removeClass(this._lastImage, 'selected');
<a name="l3751"><span class="linenum">3751</span></a>                  this._lastImage = null;
<a name="l3752"><span class="linenum">3752</span></a>              }
<a name="l3753"><span class="linenum">3753</span></a>              if (this._isElement(sel, 'img') || this._isElement(sel, 'a')) {
<a name="l3754"><span class="linenum">3754</span></a>                  if (this.browser.webkit) {
<a name="l3755"><span class="linenum">3755</span></a>                      Event.stopEvent(ev);
<a name="l3756"><span class="linenum">3756</span></a>                      if (this._isElement(sel, 'img')) {
<a name="l3757"><span class="linenum">3757</span></a>                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(sel, 'selected');
<a name="l3758"><span class="linenum">3758</span></a>                          this._lastImage = sel;
<a name="l3759"><span class="linenum">3759</span></a>                      }
<a name="l3760"><span class="linenum">3760</span></a>                  }
<a name="l3761"><span class="linenum">3761</span></a>                  if (this.currentWindow) {
<a name="l3762"><span class="linenum">3762</span></a>                      this.closeWindow();
<a name="l3763"><span class="linenum">3763</span></a>                  }
<a name="l3764"><span class="linenum">3764</span></a>                  this.nodeChange();
<a name="l3765"><span class="linenum">3765</span></a>              }
<a name="l3766"><span class="linenum">3766</span></a>              this.fireEvent('editorMouseDown', { type: 'editorMouseDown', target: this, ev: ev });
<a name="l3767"><span class="linenum">3767</span></a>          },
<a name="l3768"><span class="linenum">3768</span></a>          <span class="comment">/**</span>
<a name="l3769"><span class="linenum">3769</span></a>  <span class="comment">        * @private</span>
<a name="l3770"><span class="linenum">3770</span></a>  <span class="comment">        * @method _handleDoubleClick</span>
<a name="l3771"><span class="linenum">3771</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3772"><span class="linenum">3772</span></a>  <span class="comment">        * @description Handles all doubleclick events inside the iFrame document.</span>
<a name="l3773"><span class="linenum">3773</span></a>  <span class="comment">        */</span>
<a name="l3774"><span class="linenum">3774</span></a>          _handleDoubleClick: function(ev) {
<a name="l3775"><span class="linenum">3775</span></a>              var ret = this.fireEvent('beforeEditorDoubleClick', { type: 'beforeEditorDoubleClick', target: this, ev: ev });
<a name="l3776"><span class="linenum">3776</span></a>              if (ret === false) {
<a name="l3777"><span class="linenum">3777</span></a>                  return false;
<a name="l3778"><span class="linenum">3778</span></a>              }
<a name="l3779"><span class="linenum">3779</span></a>              if (this._isNonEditable(ev)) {
<a name="l3780"><span class="linenum">3780</span></a>                  return false;
<a name="l3781"><span class="linenum">3781</span></a>              }
<a name="l3782"><span class="linenum">3782</span></a>              this._setCurrentEvent(ev);
<a name="l3783"><span class="linenum">3783</span></a>              var sel = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l3784"><span class="linenum">3784</span></a>              if (this._isElement(sel, 'img')) {
<a name="l3785"><span class="linenum">3785</span></a>                  this.currentElement[0] = sel;
<a name="l3786"><span class="linenum">3786</span></a>                  this.toolbar.fireEvent('insertimageClick', { type: 'insertimageClick', target: this.toolbar });
<a name="l3787"><span class="linenum">3787</span></a>                  this.fireEvent('afterExecCommand', { type: 'afterExecCommand', target: this });
<a name="l3788"><span class="linenum">3788</span></a>              } else if (this._hasParent(sel, 'a')) { //Handle elements inside an a
<a name="l3789"><span class="linenum">3789</span></a>                  this.currentElement[0] = this._hasParent(sel, 'a');
<a name="l3790"><span class="linenum">3790</span></a>                  this.toolbar.fireEvent('createlinkClick', { type: 'createlinkClick', target: this.toolbar });
<a name="l3791"><span class="linenum">3791</span></a>                  this.fireEvent('afterExecCommand', { type: 'afterExecCommand', target: this });
<a name="l3792"><span class="linenum">3792</span></a>              }
<a name="l3793"><span class="linenum">3793</span></a>              this.nodeChange();
<a name="l3794"><span class="linenum">3794</span></a>              this.fireEvent('editorDoubleClick', { type: 'editorDoubleClick', target: this, ev: ev });
<a name="l3795"><span class="linenum">3795</span></a>          },
<a name="l3796"><span class="linenum">3796</span></a>          <span class="comment">/**</span>
<a name="l3797"><span class="linenum">3797</span></a>  <span class="comment">        * @private</span>
<a name="l3798"><span class="linenum">3798</span></a>  <span class="comment">        * @method _handleKeyUp</span>
<a name="l3799"><span class="linenum">3799</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3800"><span class="linenum">3800</span></a>  <span class="comment">        * @description Handles all keyup events inside the iFrame document.</span>
<a name="l3801"><span class="linenum">3801</span></a>  <span class="comment">        */</span>
<a name="l3802"><span class="linenum">3802</span></a>          _handleKeyUp: function(ev) {
<a name="l3803"><span class="linenum">3803</span></a>              var ret = this.fireEvent('beforeEditorKeyUp', { type: 'beforeEditorKeyUp', target: this, ev: ev });
<a name="l3804"><span class="linenum">3804</span></a>              if (ret === false) {
<a name="l3805"><span class="linenum">3805</span></a>                  return false;
<a name="l3806"><span class="linenum">3806</span></a>              }
<a name="l3807"><span class="linenum">3807</span></a>              if (this._isNonEditable(ev)) {
<a name="l3808"><span class="linenum">3808</span></a>                  return false;
<a name="l3809"><span class="linenum">3809</span></a>              }
<a name="l3810"><span class="linenum">3810</span></a>              this._storeUndo();
<a name="l3811"><span class="linenum">3811</span></a>              this._setCurrentEvent(ev);
<a name="l3812"><span class="linenum">3812</span></a>              switch (ev.keyCode) {
<a name="l3813"><span class="linenum">3813</span></a>                  case this._keyMap.SELECT_ALL.key:
<a name="l3814"><span class="linenum">3814</span></a>                      if (this._checkKey(this._keyMap.SELECT_ALL, ev)) {
<a name="l3815"><span class="linenum">3815</span></a>                          this.nodeChange();
<a name="l3816"><span class="linenum">3816</span></a>                      }
<a name="l3817"><span class="linenum">3817</span></a>                      break;
<a name="l3818"><span class="linenum">3818</span></a>                  case 32: //Space Bar
<a name="l3819"><span class="linenum">3819</span></a>                  case 35: //End
<a name="l3820"><span class="linenum">3820</span></a>                  case 36: //Home
<a name="l3821"><span class="linenum">3821</span></a>                  case 37: //Left Arrow
<a name="l3822"><span class="linenum">3822</span></a>                  case 38: //Up Arrow
<a name="l3823"><span class="linenum">3823</span></a>                  case 39: //Right Arrow
<a name="l3824"><span class="linenum">3824</span></a>                  case 40: //Down Arrow
<a name="l3825"><span class="linenum">3825</span></a>                  case 46: //Forward Delete
<a name="l3826"><span class="linenum">3826</span></a>                  case 8: //Delete
<a name="l3827"><span class="linenum">3827</span></a>                  case this._keyMap.CLOSE_WINDOW.key: //W key if window is open
<a name="l3828"><span class="linenum">3828</span></a>                      if ((ev.keyCode == this._keyMap.CLOSE_WINDOW.key) &amp;&amp; this.currentWindow) {
<a name="l3829"><span class="linenum">3829</span></a>                          if (this._checkKey(this._keyMap.CLOSE_WINDOW, ev)) {
<a name="l3830"><span class="linenum">3830</span></a>                              this.closeWindow();
<a name="l3831"><span class="linenum">3831</span></a>                          }
<a name="l3832"><span class="linenum">3832</span></a>                      } else {
<a name="l3833"><span class="linenum">3833</span></a>                          if (!this.browser.ie) {
<a name="l3834"><span class="linenum">3834</span></a>                              if (this._nodeChangeTimer) {
<a name="l3835"><span class="linenum">3835</span></a>                                  clearTimeout(this._nodeChangeTimer);
<a name="l3836"><span class="linenum">3836</span></a>                              }
<a name="l3837"><span class="linenum">3837</span></a>                              var self = this;
<a name="l3838"><span class="linenum">3838</span></a>                              this._nodeChangeTimer = <a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l3839"><span class="linenum">3839</span></a>                                  self._nodeChangeTimer = null;
<a name="l3840"><span class="linenum">3840</span></a>                                  self.nodeChange.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l3841"><span class="linenum">3841</span></a>                              }, 100);
<a name="l3842"><span class="linenum">3842</span></a>                          } else {
<a name="l3843"><span class="linenum">3843</span></a>                              this.nodeChange();
<a name="l3844"><span class="linenum">3844</span></a>                          }
<a name="l3845"><span class="linenum">3845</span></a>                          this.editorDirty = true;
<a name="l3846"><span class="linenum">3846</span></a>                      }
<a name="l3847"><span class="linenum">3847</span></a>                      break;
<a name="l3848"><span class="linenum">3848</span></a>              }
<a name="l3849"><span class="linenum">3849</span></a>              this.fireEvent('editorKeyUp', { type: 'editorKeyUp', target: this, ev: ev });
<a name="l3850"><span class="linenum">3850</span></a>          },
<a name="l3851"><span class="linenum">3851</span></a>          <span class="comment">/**</span>
<a name="l3852"><span class="linenum">3852</span></a>  <span class="comment">        * @private</span>
<a name="l3853"><span class="linenum">3853</span></a>  <span class="comment">        * @method _handleKeyPress</span>
<a name="l3854"><span class="linenum">3854</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3855"><span class="linenum">3855</span></a>  <span class="comment">        * @description Handles all keypress events inside the iFrame document.</span>
<a name="l3856"><span class="linenum">3856</span></a>  <span class="comment">        */</span>
<a name="l3857"><span class="linenum">3857</span></a>          _handleKeyPress: function(ev) {
<a name="l3858"><span class="linenum">3858</span></a>              var ret = this.fireEvent('beforeEditorKeyPress', { type: 'beforeEditorKeyPress', target: this, ev: ev });
<a name="l3859"><span class="linenum">3859</span></a>              if (ret === false) {
<a name="l3860"><span class="linenum">3860</span></a>                  return false;
<a name="l3861"><span class="linenum">3861</span></a>              }
<a name="l3862"><span class="linenum">3862</span></a>  
<a name="l3863"><span class="linenum">3863</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('allowNoEdit')) {
<a name="l3864"><span class="linenum">3864</span></a>  <span class="comment">                //if (ev &amp;&amp; ev.keyCode &amp;&amp; ((ev.keyCode == 46) || ev.keyCode == 63272)) {</span>
<a name="l3865"><span class="linenum">3865</span></a>                  if (ev &amp;&amp; ev.keyCode &amp;&amp; (ev.keyCode == 63272)) {
<a name="l3866"><span class="linenum">3866</span></a>  <span class="comment">                    //Forward delete key</span>
<a name="l3867"><span class="linenum">3867</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('allowNoEdit is set, forward delete key has been disabled', 'warn', 'SimpleEditor');
<a name="l3868"><span class="linenum">3868</span></a>                      Event.stopEvent(ev);
<a name="l3869"><span class="linenum">3869</span></a>                  }
<a name="l3870"><span class="linenum">3870</span></a>              }
<a name="l3871"><span class="linenum">3871</span></a>              if (this._isNonEditable(ev)) {
<a name="l3872"><span class="linenum">3872</span></a>                  return false;
<a name="l3873"><span class="linenum">3873</span></a>              }
<a name="l3874"><span class="linenum">3874</span></a>              this._setCurrentEvent(ev);
<a name="l3875"><span class="linenum">3875</span></a>              this._storeUndo();
<a name="l3876"><span class="linenum">3876</span></a>              if (this.browser.opera) {
<a name="l3877"><span class="linenum">3877</span></a>                  if (ev.keyCode === 13) {
<a name="l3878"><span class="linenum">3878</span></a>                      var tar = this._getSelectedElement();
<a name="l3879"><span class="linenum">3879</span></a>                      if (!this._isElement(tar, 'li')) {
<a name="l3880"><span class="linenum">3880</span></a>                          this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('inserthtml', '&lt;br&gt;');
<a name="l3881"><span class="linenum">3881</span></a>                          Event.stopEvent(ev);
<a name="l3882"><span class="linenum">3882</span></a>                      }
<a name="l3883"><span class="linenum">3883</span></a>                  }
<a name="l3884"><span class="linenum">3884</span></a>              }
<a name="l3885"><span class="linenum">3885</span></a>              if (this.browser.webkit) {
<a name="l3886"><span class="linenum">3886</span></a>                  if (!this.browser.webkit3) {
<a name="l3887"><span class="linenum">3887</span></a>                      if (ev.keyCode &amp;&amp; (ev.keyCode == 122) &amp;&amp; (ev.metaKey)) {
<a name="l3888"><span class="linenum">3888</span></a>  <span class="comment">                        //This is CMD + z (for undo)</span>
<a name="l3889"><span class="linenum">3889</span></a>                          if (this._hasParent(this._getSelectedElement(), 'li')) {
<a name="l3890"><span class="linenum">3890</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('We are in an LI and we found CMD + z, stopping the event', 'warn', 'SimpleEditor');
<a name="l3891"><span class="linenum">3891</span></a>                              Event.stopEvent(ev);
<a name="l3892"><span class="linenum">3892</span></a>                          }
<a name="l3893"><span class="linenum">3893</span></a>                      }
<a name="l3894"><span class="linenum">3894</span></a>                  }
<a name="l3895"><span class="linenum">3895</span></a>                  this._listFix(ev);
<a name="l3896"><span class="linenum">3896</span></a>              }
<a name="l3897"><span class="linenum">3897</span></a>              this._fixListDupIds();
<a name="l3898"><span class="linenum">3898</span></a>              this.fireEvent('editorKeyPress', { type: 'editorKeyPress', target: this, ev: ev });
<a name="l3899"><span class="linenum">3899</span></a>          },
<a name="l3900"><span class="linenum">3900</span></a>          <span class="comment">/**</span>
<a name="l3901"><span class="linenum">3901</span></a>  <span class="comment">        * @private</span>
<a name="l3902"><span class="linenum">3902</span></a>  <span class="comment">        * @method _handleKeyDown</span>
<a name="l3903"><span class="linenum">3903</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l3904"><span class="linenum">3904</span></a>  <span class="comment">        * @description Handles all keydown events inside the iFrame document.</span>
<a name="l3905"><span class="linenum">3905</span></a>  <span class="comment">        */</span>
<a name="l3906"><span class="linenum">3906</span></a>          _handleKeyDown: function(ev) {
<a name="l3907"><span class="linenum">3907</span></a>              var ret = this.fireEvent('beforeEditorKeyDown', { type: 'beforeEditorKeyDown', target: this, ev: ev });
<a name="l3908"><span class="linenum">3908</span></a>              if (ret === false) {
<a name="l3909"><span class="linenum">3909</span></a>                  return false;
<a name="l3910"><span class="linenum">3910</span></a>              }
<a name="l3911"><span class="linenum">3911</span></a>              var tar = null, _range = null;
<a name="l3912"><span class="linenum">3912</span></a>              if (this._isNonEditable(ev)) {
<a name="l3913"><span class="linenum">3913</span></a>                  return false;
<a name="l3914"><span class="linenum">3914</span></a>              }
<a name="l3915"><span class="linenum">3915</span></a>              this._setCurrentEvent(ev);
<a name="l3916"><span class="linenum">3916</span></a>              if (this.currentWindow) {
<a name="l3917"><span class="linenum">3917</span></a>                  this.closeWindow();
<a name="l3918"><span class="linenum">3918</span></a>              }
<a name="l3919"><span class="linenum">3919</span></a>              if (this.currentWindow) {
<a name="l3920"><span class="linenum">3920</span></a>                  this.closeWindow();
<a name="l3921"><span class="linenum">3921</span></a>              }
<a name="l3922"><span class="linenum">3922</span></a>              var doExec = false,
<a name="l3923"><span class="linenum">3923</span></a>                  action = null,
<a name="l3924"><span class="linenum">3924</span></a>                  value = null,
<a name="l3925"><span class="linenum">3925</span></a>                  exec = false;
<a name="l3926"><span class="linenum">3926</span></a>  
<a name="l3927"><span class="linenum">3927</span></a>  <span class="comment">            //YAHOO.log('keyCode: ' + ev.keyCode, 'info', 'SimpleEditor');</span>
<a name="l3928"><span class="linenum">3928</span></a>  
<a name="l3929"><span class="linenum">3929</span></a>              switch (ev.keyCode) {
<a name="l3930"><span class="linenum">3930</span></a>                  case this._keyMap.FOCUS_TOOLBAR.key:
<a name="l3931"><span class="linenum">3931</span></a>                      if (this._checkKey(this._keyMap.FOCUS_TOOLBAR, ev)) {
<a name="l3932"><span class="linenum">3932</span></a>                          var h = this.toolbar.getElementsByTagName('h2')[0];
<a name="l3933"><span class="linenum">3933</span></a>                          if (h &amp;&amp; h.firstChild) {
<a name="l3934"><span class="linenum">3934</span></a>                              h.firstChild.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l3935"><span class="linenum">3935</span></a>                          }
<a name="l3936"><span class="linenum">3936</span></a>                      } else if (this._checkKey(this._keyMap.FOCUS_AFTER, ev)) {
<a name="l3937"><span class="linenum">3937</span></a>  <span class="comment">                        //Focus After Element - Esc</span>
<a name="l3938"><span class="linenum">3938</span></a>                          this.afterElement.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l3939"><span class="linenum">3939</span></a>                      }
<a name="l3940"><span class="linenum">3940</span></a>                      Event.stopEvent(ev);
<a name="l3941"><span class="linenum">3941</span></a>                      doExec = false;
<a name="l3942"><span class="linenum">3942</span></a>                      break;
<a name="l3943"><span class="linenum">3943</span></a>  <span class="comment">                //case 76: //L</span>
<a name="l3944"><span class="linenum">3944</span></a>                  case this._keyMap.CREATE_LINK.key: //L
<a name="l3945"><span class="linenum">3945</span></a>                      if (this._hasSelection()) {
<a name="l3946"><span class="linenum">3946</span></a>                          if (this._checkKey(this._keyMap.CREATE_LINK, ev)) {
<a name="l3947"><span class="linenum">3947</span></a>                              var makeLink = true;
<a name="l3948"><span class="linenum">3948</span></a>                              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('limitCommands')) {
<a name="l3949"><span class="linenum">3949</span></a>                                  if (!this.toolbar.getButtonByValue('createlink')) {
<a name="l3950"><span class="linenum">3950</span></a>                                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Button for (createlink) was not found, skipping exec.', 'info', 'SimpleEditor');
<a name="l3951"><span class="linenum">3951</span></a>                                      makeLink = false;
<a name="l3952"><span class="linenum">3952</span></a>                                  }
<a name="l3953"><span class="linenum">3953</span></a>                              }
<a name="l3954"><span class="linenum">3954</span></a>                              if (makeLink) {
<a name="l3955"><span class="linenum">3955</span></a>                                  this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('createlink', '');
<a name="l3956"><span class="linenum">3956</span></a>                                  this.toolbar.fireEvent('createlinkClick', { type: 'createlinkClick', target: this.toolbar });
<a name="l3957"><span class="linenum">3957</span></a>                                  this.fireEvent('afterExecCommand', { type: 'afterExecCommand', target: this });
<a name="l3958"><span class="linenum">3958</span></a>                                  doExec = false;
<a name="l3959"><span class="linenum">3959</span></a>                              }
<a name="l3960"><span class="linenum">3960</span></a>                          }
<a name="l3961"><span class="linenum">3961</span></a>                      }
<a name="l3962"><span class="linenum">3962</span></a>                      break;
<a name="l3963"><span class="linenum">3963</span></a>  <span class="comment">                //case 90: //Z</span>
<a name="l3964"><span class="linenum">3964</span></a>                  case this._keyMap.UNDO.key:
<a name="l3965"><span class="linenum">3965</span></a>                  case this._keyMap.REDO.key:
<a name="l3966"><span class="linenum">3966</span></a>                      if (this._checkKey(this._keyMap.REDO, ev)) {
<a name="l3967"><span class="linenum">3967</span></a>                          action = 'redo';
<a name="l3968"><span class="linenum">3968</span></a>                          doExec = true;
<a name="l3969"><span class="linenum">3969</span></a>                      } else if (this._checkKey(this._keyMap.UNDO, ev)) {
<a name="l3970"><span class="linenum">3970</span></a>                          action = 'undo';
<a name="l3971"><span class="linenum">3971</span></a>                          doExec = true;
<a name="l3972"><span class="linenum">3972</span></a>                      }
<a name="l3973"><span class="linenum">3973</span></a>                      break;
<a name="l3974"><span class="linenum">3974</span></a>  <span class="comment">                //case 66: //B</span>
<a name="l3975"><span class="linenum">3975</span></a>                  case this._keyMap.BOLD.key:
<a name="l3976"><span class="linenum">3976</span></a>                      if (this._checkKey(this._keyMap.BOLD, ev)) {
<a name="l3977"><span class="linenum">3977</span></a>                          action = 'bold';
<a name="l3978"><span class="linenum">3978</span></a>                          doExec = true;
<a name="l3979"><span class="linenum">3979</span></a>                      }
<a name="l3980"><span class="linenum">3980</span></a>                      break;
<a name="l3981"><span class="linenum">3981</span></a>                  case this._keyMap.FONT_SIZE_UP.key:
<a name="l3982"><span class="linenum">3982</span></a>                  case this._keyMap.FONT_SIZE_DOWN.key:
<a name="l3983"><span class="linenum">3983</span></a>                      var uk = false, dk = false;
<a name="l3984"><span class="linenum">3984</span></a>                      if (this._checkKey(this._keyMap.FONT_SIZE_UP, ev)) {
<a name="l3985"><span class="linenum">3985</span></a>                          uk = true;
<a name="l3986"><span class="linenum">3986</span></a>                      }
<a name="l3987"><span class="linenum">3987</span></a>                      if (this._checkKey(this._keyMap.FONT_SIZE_DOWN, ev)) {
<a name="l3988"><span class="linenum">3988</span></a>                          dk = true;
<a name="l3989"><span class="linenum">3989</span></a>                      }
<a name="l3990"><span class="linenum">3990</span></a>                      if (uk || dk) {
<a name="l3991"><span class="linenum">3991</span></a>                          var fs_button = this.toolbar.getButtonByValue('fontsize'),
<a name="l3992"><span class="linenum">3992</span></a>                              label = parseInt(fs_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label'), 10),
<a name="l3993"><span class="linenum">3993</span></a>                              newValue = (label + 1);
<a name="l3994"><span class="linenum">3994</span></a>  
<a name="l3995"><span class="linenum">3995</span></a>                          if (dk) {
<a name="l3996"><span class="linenum">3996</span></a>                              newValue = (label - 1);
<a name="l3997"><span class="linenum">3997</span></a>                          }
<a name="l3998"><span class="linenum">3998</span></a>  
<a name="l3999"><span class="linenum">3999</span></a>                          action = 'fontsize';
<a name="l4000"><span class="linenum">4000</span></a>                          value = newValue + 'px';
<a name="l4001"><span class="linenum">4001</span></a>                          doExec = true;
<a name="l4002"><span class="linenum">4002</span></a>                      }
<a name="l4003"><span class="linenum">4003</span></a>                      break;
<a name="l4004"><span class="linenum">4004</span></a>  <span class="comment">                //case 73: //I</span>
<a name="l4005"><span class="linenum">4005</span></a>                  case this._keyMap.ITALIC.key:
<a name="l4006"><span class="linenum">4006</span></a>                      if (this._checkKey(this._keyMap.ITALIC, ev)) {
<a name="l4007"><span class="linenum">4007</span></a>                          action = 'italic';
<a name="l4008"><span class="linenum">4008</span></a>                          doExec = true;
<a name="l4009"><span class="linenum">4009</span></a>                      }
<a name="l4010"><span class="linenum">4010</span></a>                      break;
<a name="l4011"><span class="linenum">4011</span></a>  <span class="comment">                //case 85: //U</span>
<a name="l4012"><span class="linenum">4012</span></a>                  case this._keyMap.UNDERLINE.key:
<a name="l4013"><span class="linenum">4013</span></a>                      if (this._checkKey(this._keyMap.UNDERLINE, ev)) {
<a name="l4014"><span class="linenum">4014</span></a>                          action = 'underline';
<a name="l4015"><span class="linenum">4015</span></a>                          doExec = true;
<a name="l4016"><span class="linenum">4016</span></a>                      }
<a name="l4017"><span class="linenum">4017</span></a>                      break;
<a name="l4018"><span class="linenum">4018</span></a>                  case 9:
<a name="l4019"><span class="linenum">4019</span></a>                      if (this.browser.ie) {
<a name="l4020"><span class="linenum">4020</span></a>  <span class="comment">                        //Insert a tab in Internet Explorer</span>
<a name="l4021"><span class="linenum">4021</span></a>                          _range = this._getRange();
<a name="l4022"><span class="linenum">4022</span></a>                          tar = this._getSelectedElement();
<a name="l4023"><span class="linenum">4023</span></a>                          if (!this._isElement(tar, 'li')) {
<a name="l4024"><span class="linenum">4024</span></a>                              if (_range) {
<a name="l4025"><span class="linenum">4025</span></a>                                  _range.pasteHTML('&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;');
<a name="l4026"><span class="linenum">4026</span></a>                                  _range.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false);
<a name="l4027"><span class="linenum">4027</span></a>                                  _range.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l4028"><span class="linenum">4028</span></a>                              }
<a name="l4029"><span class="linenum">4029</span></a>                              Event.stopEvent(ev);
<a name="l4030"><span class="linenum">4030</span></a>                          }
<a name="l4031"><span class="linenum">4031</span></a>                      }
<a name="l4032"><span class="linenum">4032</span></a>  <span class="comment">                    //Firefox 3 code</span>
<a name="l4033"><span class="linenum">4033</span></a>                      if (this.browser.gecko &gt; 1.8) {
<a name="l4034"><span class="linenum">4034</span></a>                          tar = this._getSelectedElement();
<a name="l4035"><span class="linenum">4035</span></a>                          if (this._isElement(tar, 'li')) {
<a name="l4036"><span class="linenum">4036</span></a>                              if (ev.shiftKey) {
<a name="l4037"><span class="linenum">4037</span></a>                                  this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('outdent', null, '');
<a name="l4038"><span class="linenum">4038</span></a>                              } else {
<a name="l4039"><span class="linenum">4039</span></a>                                  this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('indent', null, '');
<a name="l4040"><span class="linenum">4040</span></a>                              }
<a name="l4041"><span class="linenum">4041</span></a>                              
<a name="l4042"><span class="linenum">4042</span></a>                          } else if (!this._hasSelection()) {
<a name="l4043"><span class="linenum">4043</span></a>                              this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('inserthtml', '&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;');
<a name="l4044"><span class="linenum">4044</span></a>                          }
<a name="l4045"><span class="linenum">4045</span></a>                          Event.stopEvent(ev);
<a name="l4046"><span class="linenum">4046</span></a>                      }
<a name="l4047"><span class="linenum">4047</span></a>                      break;
<a name="l4048"><span class="linenum">4048</span></a>                  case 13:
<a name="l4049"><span class="linenum">4049</span></a>                      var p = null, i = 0;
<a name="l4050"><span class="linenum">4050</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('ptags') &amp;&amp; !ev.shiftKey) {
<a name="l4051"><span class="linenum">4051</span></a>                          if (this.browser.gecko) {
<a name="l4052"><span class="linenum">4052</span></a>                              tar = this._getSelectedElement();
<a name="l4053"><span class="linenum">4053</span></a>                              if (!this._hasParent(tar, 'li')) {
<a name="l4054"><span class="linenum">4054</span></a>                                  if (this._hasParent(tar, 'p')) {
<a name="l4055"><span class="linenum">4055</span></a>                                      p = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('p');
<a name="l4056"><span class="linenum">4056</span></a>                                      p.innerHTML = '&amp;nbsp;';
<a name="l4057"><span class="linenum">4057</span></a>                                      Dom.<a class="function" onClick="logFunction('insertAfter')" href="../../../../../../_functions/insertafter.html" onMouseOver="funcPopup(event,'insertafter')">insertAfter</a>(p, tar);
<a name="l4058"><span class="linenum">4058</span></a>                                      this._selectNode(p.firstChild);
<a name="l4059"><span class="linenum">4059</span></a>                                  } else if (this._isElement(tar, 'body')) {
<a name="l4060"><span class="linenum">4060</span></a>                                      this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('insertparagraph', null);
<a name="l4061"><span class="linenum">4061</span></a>                                      var ps = this._getDoc().body.getElementsByTagName('p');
<a name="l4062"><span class="linenum">4062</span></a>                                      for (i = 0; i &lt; ps.length; i++) {
<a name="l4063"><span class="linenum">4063</span></a>                                          if (ps[i].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('_moz_dirty') !== null) {
<a name="l4064"><span class="linenum">4064</span></a>                                              p = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('p');
<a name="l4065"><span class="linenum">4065</span></a>                                              p.innerHTML = '&amp;nbsp;';
<a name="l4066"><span class="linenum">4066</span></a>                                              Dom.<a class="function" onClick="logFunction('insertAfter')" href="../../../../../../_functions/insertafter.html" onMouseOver="funcPopup(event,'insertafter')">insertAfter</a>(p, ps[i]);
<a name="l4067"><span class="linenum">4067</span></a>                                              this._selectNode(p.firstChild);
<a name="l4068"><span class="linenum">4068</span></a>                                              ps[i].<a class="function" onClick="logFunction('removeAttribute')" href="../../../../../../_functions/removeattribute.html" onMouseOver="funcPopup(event,'removeattribute')">removeAttribute</a>('_moz_dirty');
<a name="l4069"><span class="linenum">4069</span></a>                                          }
<a name="l4070"><span class="linenum">4070</span></a>                                      }
<a name="l4071"><span class="linenum">4071</span></a>                                  } else {
<a name="l4072"><span class="linenum">4072</span></a>                                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Something went wrong with paragraphs, please file a bug!!', 'error', 'SimpleEditor');
<a name="l4073"><span class="linenum">4073</span></a>                                      doExec = true;
<a name="l4074"><span class="linenum">4074</span></a>                                      action = 'insertparagraph';
<a name="l4075"><span class="linenum">4075</span></a>                                  }
<a name="l4076"><span class="linenum">4076</span></a>                                  Event.stopEvent(ev);
<a name="l4077"><span class="linenum">4077</span></a>                              }
<a name="l4078"><span class="linenum">4078</span></a>                          }
<a name="l4079"><span class="linenum">4079</span></a>                          if (this.browser.webkit) {
<a name="l4080"><span class="linenum">4080</span></a>                              tar = this._getSelectedElement();
<a name="l4081"><span class="linenum">4081</span></a>                              if (!this._hasParent(tar, 'li')) {
<a name="l4082"><span class="linenum">4082</span></a>                                  this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('insertparagraph', null);
<a name="l4083"><span class="linenum">4083</span></a>                                  var divs = this._getDoc().body.getElementsByTagName('div');
<a name="l4084"><span class="linenum">4084</span></a>                                  for (i = 0; i &lt; divs.length; i++) {
<a name="l4085"><span class="linenum">4085</span></a>                                      if (!Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(divs[i], 'yui-wk-div')) {
<a name="l4086"><span class="linenum">4086</span></a>                                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(divs[i], 'yui-wk-p');
<a name="l4087"><span class="linenum">4087</span></a>                                      }
<a name="l4088"><span class="linenum">4088</span></a>                                  }
<a name="l4089"><span class="linenum">4089</span></a>                                  Event.stopEvent(ev);
<a name="l4090"><span class="linenum">4090</span></a>                              }
<a name="l4091"><span class="linenum">4091</span></a>                          }
<a name="l4092"><span class="linenum">4092</span></a>                      } else {
<a name="l4093"><span class="linenum">4093</span></a>                          if (this.browser.webkit) {
<a name="l4094"><span class="linenum">4094</span></a>                              tar = this._getSelectedElement();
<a name="l4095"><span class="linenum">4095</span></a>                              if (!this._hasParent(tar, 'li')) {
<a name="l4096"><span class="linenum">4096</span></a>                                  if (this.browser.webkit4) {
<a name="l4097"><span class="linenum">4097</span></a>                                      this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('insertlinebreak');
<a name="l4098"><span class="linenum">4098</span></a>                                  } else {
<a name="l4099"><span class="linenum">4099</span></a>                                      this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('inserthtml', '&lt;var id=&quot;yui-br&quot;&gt;&lt;/var&gt;');
<a name="l4100"><span class="linenum">4100</span></a>                                      var holder = this._getDoc().getElementById('yui-br'),
<a name="l4101"><span class="linenum">4101</span></a>                                          br = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('br'),
<a name="l4102"><span class="linenum">4102</span></a>                                          caret = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l4103"><span class="linenum">4103</span></a>  
<a name="l4104"><span class="linenum">4104</span></a>                                      holder.parentNode.replaceChild(br, holder);
<a name="l4105"><span class="linenum">4105</span></a>                                      caret.className = 'yui-non';
<a name="l4106"><span class="linenum">4106</span></a>                                      caret.innerHTML = '&amp;nbsp;';
<a name="l4107"><span class="linenum">4107</span></a>                                      Dom.<a class="function" onClick="logFunction('insertAfter')" href="../../../../../../_functions/insertafter.html" onMouseOver="funcPopup(event,'insertafter')">insertAfter</a>(caret, br);
<a name="l4108"><span class="linenum">4108</span></a>                                      this._selectNode(caret);
<a name="l4109"><span class="linenum">4109</span></a>                                  }
<a name="l4110"><span class="linenum">4110</span></a>                                  Event.stopEvent(ev);
<a name="l4111"><span class="linenum">4111</span></a>                              }
<a name="l4112"><span class="linenum">4112</span></a>                          }
<a name="l4113"><span class="linenum">4113</span></a>                          if (this.browser.ie) {
<a name="l4114"><span class="linenum">4114</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Stopping P tags', 'info', 'SimpleEditor');
<a name="l4115"><span class="linenum">4115</span></a>  <span class="comment">                            //Insert a &lt;br&gt; instead of a &lt;p&gt;&lt;/p&gt; in Internet Explorer</span>
<a name="l4116"><span class="linenum">4116</span></a>                              _range = this._getRange();
<a name="l4117"><span class="linenum">4117</span></a>                              tar = this._getSelectedElement();
<a name="l4118"><span class="linenum">4118</span></a>                              if (!this._isElement(tar, 'li')) {
<a name="l4119"><span class="linenum">4119</span></a>                                  if (_range) {
<a name="l4120"><span class="linenum">4120</span></a>                                      _range.pasteHTML('&lt;br&gt;');
<a name="l4121"><span class="linenum">4121</span></a>                                      _range.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false);
<a name="l4122"><span class="linenum">4122</span></a>                                      _range.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l4123"><span class="linenum">4123</span></a>                                  }
<a name="l4124"><span class="linenum">4124</span></a>                                  Event.stopEvent(ev);
<a name="l4125"><span class="linenum">4125</span></a>                              }
<a name="l4126"><span class="linenum">4126</span></a>                          }
<a name="l4127"><span class="linenum">4127</span></a>                      }
<a name="l4128"><span class="linenum">4128</span></a>                      break;
<a name="l4129"><span class="linenum">4129</span></a>              }
<a name="l4130"><span class="linenum">4130</span></a>              if (this.browser.ie) {
<a name="l4131"><span class="linenum">4131</span></a>                  this._listFix(ev);
<a name="l4132"><span class="linenum">4132</span></a>              }
<a name="l4133"><span class="linenum">4133</span></a>              if (doExec &amp;&amp; action) {
<a name="l4134"><span class="linenum">4134</span></a>                  this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(action, value);
<a name="l4135"><span class="linenum">4135</span></a>                  Event.stopEvent(ev);
<a name="l4136"><span class="linenum">4136</span></a>                  this.nodeChange();
<a name="l4137"><span class="linenum">4137</span></a>              }
<a name="l4138"><span class="linenum">4138</span></a>              this._storeUndo();
<a name="l4139"><span class="linenum">4139</span></a>              this.fireEvent('editorKeyDown', { type: 'editorKeyDown', target: this, ev: ev });
<a name="l4140"><span class="linenum">4140</span></a>          },
<a name="l4141"><span class="linenum">4141</span></a>          <span class="comment">/**</span>
<a name="l4142"><span class="linenum">4142</span></a>  <span class="comment">        * @private</span>
<a name="l4143"><span class="linenum">4143</span></a>  <span class="comment">        * @property _fixListRunning</span>
<a name="l4144"><span class="linenum">4144</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l4145"><span class="linenum">4145</span></a>  <span class="comment">        * @description Keeps more than one _fixListDupIds from running at the same time.</span>
<a name="l4146"><span class="linenum">4146</span></a>  <span class="comment">        */</span>
<a name="l4147"><span class="linenum">4147</span></a>          _fixListRunning: null,
<a name="l4148"><span class="linenum">4148</span></a>          <span class="comment">/**</span>
<a name="l4149"><span class="linenum">4149</span></a>  <span class="comment">        * @private</span>
<a name="l4150"><span class="linenum">4150</span></a>  <span class="comment">        * @method _fixListDupIds</span>
<a name="l4151"><span class="linenum">4151</span></a>  <span class="comment">        * @description Some browsers will duplicate the id of an LI when created in designMode.</span>
<a name="l4152"><span class="linenum">4152</span></a>  <span class="comment">        * This method will fix the duplicate id issue. However it will only preserve the first element </span>
<a name="l4153"><span class="linenum">4153</span></a>  <span class="comment">        * in the document list with the unique id. </span>
<a name="l4154"><span class="linenum">4154</span></a>  <span class="comment">        */</span>
<a name="l4155"><span class="linenum">4155</span></a>          _fixListDupIds: function() {
<a name="l4156"><span class="linenum">4156</span></a>              if (this._fixListRunning) {
<a name="l4157"><span class="linenum">4157</span></a>                  return false;
<a name="l4158"><span class="linenum">4158</span></a>              }
<a name="l4159"><span class="linenum">4159</span></a>              if (this._getDoc()) {
<a name="l4160"><span class="linenum">4160</span></a>                  this._fixListRunning = true;
<a name="l4161"><span class="linenum">4161</span></a>                  var lis = this._getDoc().body.getElementsByTagName('li'),
<a name="l4162"><span class="linenum">4162</span></a>                      i = 0, ids = {};
<a name="l4163"><span class="linenum">4163</span></a>                  for (i = 0; i &lt; lis.length; i++) {
<a name="l4164"><span class="linenum">4164</span></a>                      if (lis[i].id) {
<a name="l4165"><span class="linenum">4165</span></a>                          if (ids[lis[i].id]) {
<a name="l4166"><span class="linenum">4166</span></a>                              lis[i].id = '';
<a name="l4167"><span class="linenum">4167</span></a>                          }
<a name="l4168"><span class="linenum">4168</span></a>                          ids[lis[i].id] = true;
<a name="l4169"><span class="linenum">4169</span></a>                      }
<a name="l4170"><span class="linenum">4170</span></a>                  }
<a name="l4171"><span class="linenum">4171</span></a>                  this._fixListRunning = false;
<a name="l4172"><span class="linenum">4172</span></a>              }
<a name="l4173"><span class="linenum">4173</span></a>          },
<a name="l4174"><span class="linenum">4174</span></a>          <span class="comment">/**</span>
<a name="l4175"><span class="linenum">4175</span></a>  <span class="comment">        * @private</span>
<a name="l4176"><span class="linenum">4176</span></a>  <span class="comment">        * @method _listFix</span>
<a name="l4177"><span class="linenum">4177</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l4178"><span class="linenum">4178</span></a>  <span class="comment">        * @description Handles the Enter key, Tab Key and Shift + Tab keys for List Items.</span>
<a name="l4179"><span class="linenum">4179</span></a>  <span class="comment">        */</span>
<a name="l4180"><span class="linenum">4180</span></a>          _listFix: function(ev) {
<a name="l4181"><span class="linenum">4181</span></a>  <span class="comment">            //YAHOO.log('Lists Fix (' + ev.keyCode + ')', 'info', 'SimpleEditor');</span>
<a name="l4182"><span class="linenum">4182</span></a>              var testLi = null, par = null, preContent = false, range = null;
<a name="l4183"><span class="linenum">4183</span></a>  <span class="comment">            //Enter Key</span>
<a name="l4184"><span class="linenum">4184</span></a>              if (this.browser.webkit) {
<a name="l4185"><span class="linenum">4185</span></a>                  if (ev.keyCode &amp;&amp; (ev.keyCode == 13)) {
<a name="l4186"><span class="linenum">4186</span></a>                      if (this._hasParent(this._getSelectedElement(), 'li')) {
<a name="l4187"><span class="linenum">4187</span></a>                          var tar = this._hasParent(this._getSelectedElement(), 'li');
<a name="l4188"><span class="linenum">4188</span></a>                          if (tar.previousSibling) {
<a name="l4189"><span class="linenum">4189</span></a>                              if (tar.firstChild &amp;&amp; (tar.firstChild.length == 1)) {
<a name="l4190"><span class="linenum">4190</span></a>                                  this._selectNode(tar);
<a name="l4191"><span class="linenum">4191</span></a>                              }
<a name="l4192"><span class="linenum">4192</span></a>                          }
<a name="l4193"><span class="linenum">4193</span></a>                      }
<a name="l4194"><span class="linenum">4194</span></a>                  }
<a name="l4195"><span class="linenum">4195</span></a>              }
<a name="l4196"><span class="linenum">4196</span></a>  <span class="comment">            //Shift + Tab Key</span>
<a name="l4197"><span class="linenum">4197</span></a>              if (ev.keyCode &amp;&amp; ((!this.browser.webkit3 &amp;&amp; (ev.keyCode == 25)) || ((this.browser.webkit3 || !this.browser.webkit) &amp;&amp; ((ev.keyCode == 9) &amp;&amp; ev.shiftKey)))) {
<a name="l4198"><span class="linenum">4198</span></a>                  testLi = this._getSelectedElement();
<a name="l4199"><span class="linenum">4199</span></a>                  if (this._hasParent(testLi, 'li')) {
<a name="l4200"><span class="linenum">4200</span></a>                      testLi = this._hasParent(testLi, 'li');
<a name="l4201"><span class="linenum">4201</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('We have a SHIFT tab in an LI, reverse it..', 'info', 'SimpleEditor');
<a name="l4202"><span class="linenum">4202</span></a>                      if (this._hasParent(testLi, 'ul') || this._hasParent(testLi, 'ol')) {
<a name="l4203"><span class="linenum">4203</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('We have a double parent, move up a level', 'info', 'SimpleEditor');
<a name="l4204"><span class="linenum">4204</span></a>                          par = this._hasParent(testLi, 'ul');
<a name="l4205"><span class="linenum">4205</span></a>                          if (!par) {
<a name="l4206"><span class="linenum">4206</span></a>                              par = this._hasParent(testLi, 'ol');
<a name="l4207"><span class="linenum">4207</span></a>                          }
<a name="l4208"><span class="linenum">4208</span></a>  <span class="comment">                        //YAHOO.log(par.previousSibling + ' :: ' + par.previousSibling.innerHTML);</span>
<a name="l4209"><span class="linenum">4209</span></a>                          if (this._isElement(par.previousSibling, 'li')) {
<a name="l4210"><span class="linenum">4210</span></a>                              par.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(testLi);
<a name="l4211"><span class="linenum">4211</span></a>                              par.parentNode.<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(testLi, par.nextSibling);
<a name="l4212"><span class="linenum">4212</span></a>                              if (this.browser.ie) {
<a name="l4213"><span class="linenum">4213</span></a>                                  range = this._getDoc().body.createTextRange();
<a name="l4214"><span class="linenum">4214</span></a>                                  range.moveToElementText(testLi);
<a name="l4215"><span class="linenum">4215</span></a>                                  range.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false);
<a name="l4216"><span class="linenum">4216</span></a>                                  range.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l4217"><span class="linenum">4217</span></a>                              }
<a name="l4218"><span class="linenum">4218</span></a>                              if (this.browser.webkit) {
<a name="l4219"><span class="linenum">4219</span></a>                                  this._selectNode(testLi.firstChild);
<a name="l4220"><span class="linenum">4220</span></a>                              }
<a name="l4221"><span class="linenum">4221</span></a>                              Event.stopEvent(ev);
<a name="l4222"><span class="linenum">4222</span></a>                          }
<a name="l4223"><span class="linenum">4223</span></a>                      }
<a name="l4224"><span class="linenum">4224</span></a>                  }
<a name="l4225"><span class="linenum">4225</span></a>              }
<a name="l4226"><span class="linenum">4226</span></a>  <span class="comment">            //Tab Key</span>
<a name="l4227"><span class="linenum">4227</span></a>              if (ev.keyCode &amp;&amp; ((ev.keyCode == 9) &amp;&amp; (!ev.shiftKey))) {
<a name="l4228"><span class="linenum">4228</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('List Fix - Tab', 'info', 'SimpleEditor');
<a name="l4229"><span class="linenum">4229</span></a>                  var preLi = this._getSelectedElement();
<a name="l4230"><span class="linenum">4230</span></a>                  if (this._hasParent(preLi, 'li')) {
<a name="l4231"><span class="linenum">4231</span></a>                      preContent = this._hasParent(preLi, 'li').innerHTML;
<a name="l4232"><span class="linenum">4232</span></a>                  }
<a name="l4233"><span class="linenum">4233</span></a>  <span class="comment">                //YAHOO.log('preLI: ' + preLi.tagName + ' :: ' + preLi.innerHTML);</span>
<a name="l4234"><span class="linenum">4234</span></a>                  if (this.browser.webkit) {
<a name="l4235"><span class="linenum">4235</span></a>                      this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('inserttext', false, '\t');
<a name="l4236"><span class="linenum">4236</span></a>                  }
<a name="l4237"><span class="linenum">4237</span></a>                  testLi = this._getSelectedElement();
<a name="l4238"><span class="linenum">4238</span></a>                  if (this._hasParent(testLi, 'li')) {
<a name="l4239"><span class="linenum">4239</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('We have a tab in an LI', 'info', 'SimpleEditor');
<a name="l4240"><span class="linenum">4240</span></a>                      par = this._hasParent(testLi, 'li');
<a name="l4241"><span class="linenum">4241</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('parLI: ' + par.tagName + ' :: ' + par.innerHTML);
<a name="l4242"><span class="linenum">4242</span></a>                      var newUl = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>(par.parentNode.tagName.toLowerCase());
<a name="l4243"><span class="linenum">4243</span></a>                      if (this.browser.webkit) {
<a name="l4244"><span class="linenum">4244</span></a>                          var span = Dom.<a class="function" onClick="logFunction('getElementsByClassName')" href="../../../../../../_functions/getelementsbyclassname.html" onMouseOver="funcPopup(event,'getelementsbyclassname')">getElementsByClassName</a>('Apple-tab-span', 'span', par);
<a name="l4245"><span class="linenum">4245</span></a>  <span class="comment">                        //Remove the span element that Safari puts in</span>
<a name="l4246"><span class="linenum">4246</span></a>                          if (span[0]) {
<a name="l4247"><span class="linenum">4247</span></a>                              par.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(span[0]);
<a name="l4248"><span class="linenum">4248</span></a>                              par.innerHTML = Lang.<a class="phpfunction" onClick="logFunction('trim')" href="../../../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(par.innerHTML);
<a name="l4249"><span class="linenum">4249</span></a>  <span class="comment">                            //Put the HTML from the LI into this new LI</span>
<a name="l4250"><span class="linenum">4250</span></a>                              if (preContent) {
<a name="l4251"><span class="linenum">4251</span></a>                                  par.innerHTML = '&lt;span class=&quot;yui-non&quot;&gt;' + preContent + '&lt;/span&gt;&amp;nbsp;';
<a name="l4252"><span class="linenum">4252</span></a>                              } else {
<a name="l4253"><span class="linenum">4253</span></a>                                  par.innerHTML = '&lt;span class=&quot;yui-non&quot;&gt;&amp;nbsp;&lt;/span&gt;&amp;nbsp;';
<a name="l4254"><span class="linenum">4254</span></a>                              }
<a name="l4255"><span class="linenum">4255</span></a>                          }
<a name="l4256"><span class="linenum">4256</span></a>                      } else {
<a name="l4257"><span class="linenum">4257</span></a>                          if (preContent) {
<a name="l4258"><span class="linenum">4258</span></a>                              par.innerHTML = preContent + '&amp;nbsp;';
<a name="l4259"><span class="linenum">4259</span></a>                          } else {
<a name="l4260"><span class="linenum">4260</span></a>                              par.innerHTML = '&amp;nbsp;';
<a name="l4261"><span class="linenum">4261</span></a>                          }
<a name="l4262"><span class="linenum">4262</span></a>                      }
<a name="l4263"><span class="linenum">4263</span></a>  
<a name="l4264"><span class="linenum">4264</span></a>                      par.parentNode.replaceChild(newUl, par);
<a name="l4265"><span class="linenum">4265</span></a>                      newUl.appendChild(par);
<a name="l4266"><span class="linenum">4266</span></a>                      if (this.browser.webkit) {
<a name="l4267"><span class="linenum">4267</span></a>                          this._getSelection().setBaseAndExtent(par.firstChild, 1, par.firstChild, par.firstChild.innerText.length);
<a name="l4268"><span class="linenum">4268</span></a>                          if (!this.browser.webkit3) {
<a name="l4269"><span class="linenum">4269</span></a>                              par.parentNode.parentNode.style.display = 'list-item';
<a name="l4270"><span class="linenum">4270</span></a>                              <a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l4271"><span class="linenum">4271</span></a>                                  par.parentNode.parentNode.style.display = 'block';
<a name="l4272"><span class="linenum">4272</span></a>                              }, 1);
<a name="l4273"><span class="linenum">4273</span></a>                          }
<a name="l4274"><span class="linenum">4274</span></a>                      } else if (this.browser.ie) {
<a name="l4275"><span class="linenum">4275</span></a>                          range = this._getDoc().body.createTextRange();
<a name="l4276"><span class="linenum">4276</span></a>                          range.moveToElementText(par);
<a name="l4277"><span class="linenum">4277</span></a>                          range.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false);
<a name="l4278"><span class="linenum">4278</span></a>                          range.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l4279"><span class="linenum">4279</span></a>                      } else {
<a name="l4280"><span class="linenum">4280</span></a>                          this._selectNode(par);
<a name="l4281"><span class="linenum">4281</span></a>                      }
<a name="l4282"><span class="linenum">4282</span></a>                      Event.stopEvent(ev);
<a name="l4283"><span class="linenum">4283</span></a>                  }
<a name="l4284"><span class="linenum">4284</span></a>                  if (this.browser.webkit) {
<a name="l4285"><span class="linenum">4285</span></a>                      Event.stopEvent(ev);
<a name="l4286"><span class="linenum">4286</span></a>                  }
<a name="l4287"><span class="linenum">4287</span></a>                  this.nodeChange();
<a name="l4288"><span class="linenum">4288</span></a>              }
<a name="l4289"><span class="linenum">4289</span></a>          },
<a name="l4290"><span class="linenum">4290</span></a>          <span class="comment">/**</span>
<a name="l4291"><span class="linenum">4291</span></a>  <span class="comment">        * @method nodeChange</span>
<a name="l4292"><span class="linenum">4292</span></a>  <span class="comment">        * @param {Boolean} force Optional paramenter to skip the threshold counter</span>
<a name="l4293"><span class="linenum">4293</span></a>  <span class="comment">        * @description Handles setting up the toolbar buttons, getting the Dom path, fixing nodes.</span>
<a name="l4294"><span class="linenum">4294</span></a>  <span class="comment">        */</span>
<a name="l4295"><span class="linenum">4295</span></a>          nodeChange: function(force) {
<a name="l4296"><span class="linenum">4296</span></a>              var NCself = this;
<a name="l4297"><span class="linenum">4297</span></a>              this._storeUndo();
<a name="l4298"><span class="linenum">4298</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('nodeChangeDelay')) {
<a name="l4299"><span class="linenum">4299</span></a>                  this._nodeChangeDelayTimer = window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l4300"><span class="linenum">4300</span></a>                      NCself._nodeChangeDelayTimer = null;
<a name="l4301"><span class="linenum">4301</span></a>                      NCself._nodeChange.<a class="function" onClick="logFunction('apply')" href="../../../../../../_functions/apply.html" onMouseOver="funcPopup(event,'apply')">apply</a>(NCself, arguments);
<a name="l4302"><span class="linenum">4302</span></a>                  }, 0);
<a name="l4303"><span class="linenum">4303</span></a>              } else {
<a name="l4304"><span class="linenum">4304</span></a>                  this._nodeChange();
<a name="l4305"><span class="linenum">4305</span></a>              }
<a name="l4306"><span class="linenum">4306</span></a>          },
<a name="l4307"><span class="linenum">4307</span></a>          <span class="comment">/**</span>
<a name="l4308"><span class="linenum">4308</span></a>  <span class="comment">        * @private</span>
<a name="l4309"><span class="linenum">4309</span></a>  <span class="comment">        * @method _nodeChange</span>
<a name="l4310"><span class="linenum">4310</span></a>  <span class="comment">        * @param {Boolean} force Optional paramenter to skip the threshold counter</span>
<a name="l4311"><span class="linenum">4311</span></a>  <span class="comment">        * @description Fired from nodeChange in a setTimeout.</span>
<a name="l4312"><span class="linenum">4312</span></a>  <span class="comment">        */</span>
<a name="l4313"><span class="linenum">4313</span></a>          _nodeChange: function(force) {
<a name="l4314"><span class="linenum">4314</span></a>              var threshold = parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('nodeChangeThreshold'), 10),
<a name="l4315"><span class="linenum">4315</span></a>                  thisNodeChange = Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().<a class="function" onClick="logFunction('getTime')" href="../../../../../../_functions/gettime.html" onMouseOver="funcPopup(event,'gettime')">getTime</a>() / 1000),
<a name="l4316"><span class="linenum">4316</span></a>                  self = this;
<a name="l4317"><span class="linenum">4317</span></a>  
<a name="l4318"><span class="linenum">4318</span></a>              if (force === true) {
<a name="l4319"><span class="linenum">4319</span></a>                  this._lastNodeChange = 0;
<a name="l4320"><span class="linenum">4320</span></a>              }
<a name="l4321"><span class="linenum">4321</span></a>              
<a name="l4322"><span class="linenum">4322</span></a>              if ((this._lastNodeChange + threshold) &lt; thisNodeChange) {
<a name="l4323"><span class="linenum">4323</span></a>                  if (this._fixNodesTimer === null) {
<a name="l4324"><span class="linenum">4324</span></a>                      this._fixNodesTimer = window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l4325"><span class="linenum">4325</span></a>                          self._fixNodes.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l4326"><span class="linenum">4326</span></a>                          self._fixNodesTimer = null;
<a name="l4327"><span class="linenum">4327</span></a>                      }, 0);
<a name="l4328"><span class="linenum">4328</span></a>                  }
<a name="l4329"><span class="linenum">4329</span></a>              }
<a name="l4330"><span class="linenum">4330</span></a>              this._lastNodeChange = thisNodeChange;
<a name="l4331"><span class="linenum">4331</span></a>              if (this.currentEvent) {
<a name="l4332"><span class="linenum">4332</span></a>                  try {
<a name="l4333"><span class="linenum">4333</span></a>                      this._lastNodeChangeEvent = this.currentEvent.type;
<a name="l4334"><span class="linenum">4334</span></a>                  } catch (e) {}
<a name="l4335"><span class="linenum">4335</span></a>              }
<a name="l4336"><span class="linenum">4336</span></a>  
<a name="l4337"><span class="linenum">4337</span></a>              var beforeNodeChange = this.fireEvent('beforeNodeChange', { type: 'beforeNodeChange', target: this });
<a name="l4338"><span class="linenum">4338</span></a>              if (beforeNodeChange === false) {
<a name="l4339"><span class="linenum">4339</span></a>                  return false;
<a name="l4340"><span class="linenum">4340</span></a>              }
<a name="l4341"><span class="linenum">4341</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('dompath')) {
<a name="l4342"><span class="linenum">4342</span></a>                  window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l4343"><span class="linenum">4343</span></a>                      self._writeDomPath.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l4344"><span class="linenum">4344</span></a>                  }, 0);
<a name="l4345"><span class="linenum">4345</span></a>              }
<a name="l4346"><span class="linenum">4346</span></a>  <span class="comment">            //Check to see if we are disabled before continuing</span>
<a name="l4347"><span class="linenum">4347</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l4348"><span class="linenum">4348</span></a>                  if (this.STOP_NODE_CHANGE) {
<a name="l4349"><span class="linenum">4349</span></a>  <span class="comment">                    //Reset this var for next action</span>
<a name="l4350"><span class="linenum">4350</span></a>                      this.STOP_NODE_CHANGE = false;
<a name="l4351"><span class="linenum">4351</span></a>                      return false;
<a name="l4352"><span class="linenum">4352</span></a>                  } else {
<a name="l4353"><span class="linenum">4353</span></a>                      var sel = this._getSelection(),
<a name="l4354"><span class="linenum">4354</span></a>                          range = this._getRange(),
<a name="l4355"><span class="linenum">4355</span></a>                          el = this._getSelectedElement(),
<a name="l4356"><span class="linenum">4356</span></a>                          fn_button = this.toolbar.getButtonByValue('fontname'),
<a name="l4357"><span class="linenum">4357</span></a>                          fs_button = this.toolbar.getButtonByValue('fontsize'),
<a name="l4358"><span class="linenum">4358</span></a>                          undo_button = this.toolbar.getButtonByValue('undo'),
<a name="l4359"><span class="linenum">4359</span></a>                          redo_button = this.toolbar.getButtonByValue('redo');
<a name="l4360"><span class="linenum">4360</span></a>  
<a name="l4361"><span class="linenum">4361</span></a>  <span class="comment">                    //Handle updating the toolbar with active buttons</span>
<a name="l4362"><span class="linenum">4362</span></a>                      var _ex = {};
<a name="l4363"><span class="linenum">4363</span></a>                      if (this._lastButton) {
<a name="l4364"><span class="linenum">4364</span></a>                          _ex[this._lastButton.id] = true;
<a name="l4365"><span class="linenum">4365</span></a>  <span class="comment">                        //this._lastButton = null;</span>
<a name="l4366"><span class="linenum">4366</span></a>                      }
<a name="l4367"><span class="linenum">4367</span></a>                      if (!this._isElement(el, 'body')) {
<a name="l4368"><span class="linenum">4368</span></a>                          if (fn_button) {
<a name="l4369"><span class="linenum">4369</span></a>                              _ex[fn_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')] = true;
<a name="l4370"><span class="linenum">4370</span></a>                          }
<a name="l4371"><span class="linenum">4371</span></a>                          if (fs_button) {
<a name="l4372"><span class="linenum">4372</span></a>                              _ex[fs_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')] = true;
<a name="l4373"><span class="linenum">4373</span></a>                          }
<a name="l4374"><span class="linenum">4374</span></a>                      }
<a name="l4375"><span class="linenum">4375</span></a>                      if (redo_button) {
<a name="l4376"><span class="linenum">4376</span></a>                          delete _ex[redo_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')];
<a name="l4377"><span class="linenum">4377</span></a>                      }
<a name="l4378"><span class="linenum">4378</span></a>                      this.toolbar.resetAllButtons(_ex);
<a name="l4379"><span class="linenum">4379</span></a>  
<a name="l4380"><span class="linenum">4380</span></a>  <span class="comment">                    //Handle disabled buttons</span>
<a name="l4381"><span class="linenum">4381</span></a>                      for (var d = 0; d &lt; this._disabled.length; d++) {
<a name="l4382"><span class="linenum">4382</span></a>                          var _button = this.toolbar.getButtonByValue(this._disabled[d]);
<a name="l4383"><span class="linenum">4383</span></a>                          if (_button &amp;&amp; _button.get) {
<a name="l4384"><span class="linenum">4384</span></a>                              if (this._lastButton &amp;&amp; (_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') === this._lastButton.id)) {
<a name="l4385"><span class="linenum">4385</span></a>  <span class="comment">                                //Skip</span>
<a name="l4386"><span class="linenum">4386</span></a>                              } else {
<a name="l4387"><span class="linenum">4387</span></a>                                  if (!this._hasSelection() &amp;&amp; !this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert')) {
<a name="l4388"><span class="linenum">4388</span></a>                                      switch (this._disabled[d]) {
<a name="l4389"><span class="linenum">4389</span></a>                                          case 'fontname':
<a name="l4390"><span class="linenum">4390</span></a>                                          case 'fontsize':
<a name="l4391"><span class="linenum">4391</span></a>                                              break;
<a name="l4392"><span class="linenum">4392</span></a>                                          default:
<a name="l4393"><span class="linenum">4393</span></a>  <span class="comment">                                            //No Selection - disable</span>
<a name="l4394"><span class="linenum">4394</span></a>                                              this.toolbar.disableButton(_button);
<a name="l4395"><span class="linenum">4395</span></a>                                      }
<a name="l4396"><span class="linenum">4396</span></a>                                  } else {
<a name="l4397"><span class="linenum">4397</span></a>                                      if (!this._alwaysDisabled[this._disabled[d]]) {
<a name="l4398"><span class="linenum">4398</span></a>                                          this.toolbar.enableButton(_button);
<a name="l4399"><span class="linenum">4399</span></a>                                      }
<a name="l4400"><span class="linenum">4400</span></a>                                  }
<a name="l4401"><span class="linenum">4401</span></a>                                  if (!this._alwaysEnabled[this._disabled[d]]) {
<a name="l4402"><span class="linenum">4402</span></a>                                      this.toolbar.deselectButton(_button);
<a name="l4403"><span class="linenum">4403</span></a>                                  }
<a name="l4404"><span class="linenum">4404</span></a>                              }
<a name="l4405"><span class="linenum">4405</span></a>                          }
<a name="l4406"><span class="linenum">4406</span></a>                      }
<a name="l4407"><span class="linenum">4407</span></a>                      var path = this._getDomPath();
<a name="l4408"><span class="linenum">4408</span></a>                      var tag = null, cmd = null;
<a name="l4409"><span class="linenum">4409</span></a>                      for (var i = 0; i &lt; path.length; i++) {
<a name="l4410"><span class="linenum">4410</span></a>                          tag = path[i].tagName.toLowerCase();
<a name="l4411"><span class="linenum">4411</span></a>                          if (path[i].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('tag')) {
<a name="l4412"><span class="linenum">4412</span></a>                              tag = path[i].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('tag').toLowerCase();
<a name="l4413"><span class="linenum">4413</span></a>                          }
<a name="l4414"><span class="linenum">4414</span></a>                          cmd = this._tag2cmd[tag];
<a name="l4415"><span class="linenum">4415</span></a>                          if (cmd === undefined) {
<a name="l4416"><span class="linenum">4416</span></a>                              cmd = [];
<a name="l4417"><span class="linenum">4417</span></a>                          }
<a name="l4418"><span class="linenum">4418</span></a>                          if (!Lang.<a class="function" onClick="logFunction('isArray')" href="../../../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(cmd)) {
<a name="l4419"><span class="linenum">4419</span></a>                              cmd = [cmd];
<a name="l4420"><span class="linenum">4420</span></a>                          }
<a name="l4421"><span class="linenum">4421</span></a>  
<a name="l4422"><span class="linenum">4422</span></a>  <span class="comment">                        //Bold and Italic styles</span>
<a name="l4423"><span class="linenum">4423</span></a>                          if (path[i].style.fontWeight.toLowerCase() == 'bold') {
<a name="l4424"><span class="linenum">4424</span></a>                              cmd[cmd.length] = 'bold';
<a name="l4425"><span class="linenum">4425</span></a>                          }
<a name="l4426"><span class="linenum">4426</span></a>                          if (path[i].style.fontStyle.toLowerCase() == 'italic') {
<a name="l4427"><span class="linenum">4427</span></a>                              cmd[cmd.length] = 'italic';
<a name="l4428"><span class="linenum">4428</span></a>                          }
<a name="l4429"><span class="linenum">4429</span></a>                          if (path[i].style.textDecoration.toLowerCase() == 'underline') {
<a name="l4430"><span class="linenum">4430</span></a>                              cmd[cmd.length] = 'underline';
<a name="l4431"><span class="linenum">4431</span></a>                          }
<a name="l4432"><span class="linenum">4432</span></a>                          if (path[i].style.textDecoration.toLowerCase() == 'line-through') {
<a name="l4433"><span class="linenum">4433</span></a>                              cmd[cmd.length] = 'strikethrough';
<a name="l4434"><span class="linenum">4434</span></a>                          }
<a name="l4435"><span class="linenum">4435</span></a>                          if (cmd.length &gt; 0) {
<a name="l4436"><span class="linenum">4436</span></a>                              for (var j = 0; j &lt; cmd.length; j++) {
<a name="l4437"><span class="linenum">4437</span></a>                                  this.toolbar.selectButton(cmd[j]);
<a name="l4438"><span class="linenum">4438</span></a>                                  this.toolbar.enableButton(cmd[j]);
<a name="l4439"><span class="linenum">4439</span></a>                              }
<a name="l4440"><span class="linenum">4440</span></a>                          }
<a name="l4441"><span class="linenum">4441</span></a>  <span class="comment">                        //Handle Alignment</span>
<a name="l4442"><span class="linenum">4442</span></a>                          switch (path[i].style.textAlign.toLowerCase()) {
<a name="l4443"><span class="linenum">4443</span></a>                              case 'left':
<a name="l4444"><span class="linenum">4444</span></a>                              case 'right':
<a name="l4445"><span class="linenum">4445</span></a>                              case 'center':
<a name="l4446"><span class="linenum">4446</span></a>                              case 'justify':
<a name="l4447"><span class="linenum">4447</span></a>                                  var alignType = path[i].style.textAlign.toLowerCase();
<a name="l4448"><span class="linenum">4448</span></a>                                  if (path[i].style.textAlign.toLowerCase() == 'justify') {
<a name="l4449"><span class="linenum">4449</span></a>                                      alignType = 'full';
<a name="l4450"><span class="linenum">4450</span></a>                                  }
<a name="l4451"><span class="linenum">4451</span></a>                                  this.toolbar.selectButton('justify' + alignType);
<a name="l4452"><span class="linenum">4452</span></a>                                  this.toolbar.enableButton('justify' + alignType);
<a name="l4453"><span class="linenum">4453</span></a>                                  break;
<a name="l4454"><span class="linenum">4454</span></a>                          }
<a name="l4455"><span class="linenum">4455</span></a>                      }
<a name="l4456"><span class="linenum">4456</span></a>  <span class="comment">                    //After for loop</span>
<a name="l4457"><span class="linenum">4457</span></a>  
<a name="l4458"><span class="linenum">4458</span></a>  <span class="comment">                    //Reset Font Family and Size to the inital configs</span>
<a name="l4459"><span class="linenum">4459</span></a>                      if (fn_button) {
<a name="l4460"><span class="linenum">4460</span></a>                          var family = fn_button._configs.label._initialConfig.value;
<a name="l4461"><span class="linenum">4461</span></a>                          fn_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', '&lt;span class=&quot;yui-toolbar-fontname-' + this._cleanClassName(family) + '&quot;&gt;' + family + '&lt;/span&gt;');
<a name="l4462"><span class="linenum">4462</span></a>                          this._updateMenuChecked('fontname', family);
<a name="l4463"><span class="linenum">4463</span></a>                      }
<a name="l4464"><span class="linenum">4464</span></a>  
<a name="l4465"><span class="linenum">4465</span></a>                      if (fs_button) {
<a name="l4466"><span class="linenum">4466</span></a>                          fs_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', fs_button._configs.label._initialConfig.value);
<a name="l4467"><span class="linenum">4467</span></a>                      }
<a name="l4468"><span class="linenum">4468</span></a>  
<a name="l4469"><span class="linenum">4469</span></a>                      var hd_button = this.toolbar.getButtonByValue('heading');
<a name="l4470"><span class="linenum">4470</span></a>                      if (hd_button) {
<a name="l4471"><span class="linenum">4471</span></a>                          hd_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', hd_button._configs.label._initialConfig.value);
<a name="l4472"><span class="linenum">4472</span></a>                          this._updateMenuChecked('heading', 'none');
<a name="l4473"><span class="linenum">4473</span></a>                      }
<a name="l4474"><span class="linenum">4474</span></a>                      var img_button = this.toolbar.getButtonByValue('insertimage');
<a name="l4475"><span class="linenum">4475</span></a>                      if (img_button &amp;&amp; this.currentWindow &amp;&amp; (this.currentWindow.name == 'insertimage')) {
<a name="l4476"><span class="linenum">4476</span></a>                          this.toolbar.disableButton(img_button);
<a name="l4477"><span class="linenum">4477</span></a>                      }
<a name="l4478"><span class="linenum">4478</span></a>                      if (this._lastButton &amp;&amp; this._lastButton.isSelected) {
<a name="l4479"><span class="linenum">4479</span></a>                          this.toolbar.deselectButton(this._lastButton.id);
<a name="l4480"><span class="linenum">4480</span></a>                      }
<a name="l4481"><span class="linenum">4481</span></a>                      this._undoNodeChange();
<a name="l4482"><span class="linenum">4482</span></a>                  }
<a name="l4483"><span class="linenum">4483</span></a>              }
<a name="l4484"><span class="linenum">4484</span></a>  
<a name="l4485"><span class="linenum">4485</span></a>              this.fireEvent('afterNodeChange', { type: 'afterNodeChange', target: this });
<a name="l4486"><span class="linenum">4486</span></a>          },
<a name="l4487"><span class="linenum">4487</span></a>          <span class="comment">/**</span>
<a name="l4488"><span class="linenum">4488</span></a>  <span class="comment">        * @private</span>
<a name="l4489"><span class="linenum">4489</span></a>  <span class="comment">        * @method _updateMenuChecked</span>
<a name="l4490"><span class="linenum">4490</span></a>  <span class="comment">        * @param {Object} button The command identifier of the button you want to check</span>
<a name="l4491"><span class="linenum">4491</span></a>  <span class="comment">        * @param {String} value The value of the menu item you want to check</span>
<a name="l4492"><span class="linenum">4492</span></a>  <span class="comment">        * @param {&lt;a href=&quot;YAHOO.widget.Toolbar.html&quot;&gt;YAHOO.widget.Toolbar&lt;/a&gt;} The Toolbar instance the button belongs to (defaults to this.toolbar) </span>
<a name="l4493"><span class="linenum">4493</span></a>  <span class="comment">        * @description Gets the menu from a button instance, if the menu is not rendered it will render it. It will then search the menu for the specified value, unchecking all other items and checking the specified on.</span>
<a name="l4494"><span class="linenum">4494</span></a>  <span class="comment">        */</span>
<a name="l4495"><span class="linenum">4495</span></a>          _updateMenuChecked: function(button, value, tbar) {
<a name="l4496"><span class="linenum">4496</span></a>              if (!tbar) {
<a name="l4497"><span class="linenum">4497</span></a>                  tbar = this.toolbar;
<a name="l4498"><span class="linenum">4498</span></a>              }
<a name="l4499"><span class="linenum">4499</span></a>              var _button = tbar.getButtonByValue(button);
<a name="l4500"><span class="linenum">4500</span></a>              _button.checkValue(value);
<a name="l4501"><span class="linenum">4501</span></a>          },
<a name="l4502"><span class="linenum">4502</span></a>          <span class="comment">/**</span>
<a name="l4503"><span class="linenum">4503</span></a>  <span class="comment">        * @private</span>
<a name="l4504"><span class="linenum">4504</span></a>  <span class="comment">        * @method _handleToolbarClick</span>
<a name="l4505"><span class="linenum">4505</span></a>  <span class="comment">        * @param {Event} ev The event that triggered the button click</span>
<a name="l4506"><span class="linenum">4506</span></a>  <span class="comment">        * @description This is an event handler attached to the Toolbar's buttonClick event. It will fire execCommand with the command identifier from the Toolbar Button.</span>
<a name="l4507"><span class="linenum">4507</span></a>  <span class="comment">        */</span>
<a name="l4508"><span class="linenum">4508</span></a>          _handleToolbarClick: function(ev) {
<a name="l4509"><span class="linenum">4509</span></a>              var value = '';
<a name="l4510"><span class="linenum">4510</span></a>              var str = '';
<a name="l4511"><span class="linenum">4511</span></a>              var cmd = ev.button.value;
<a name="l4512"><span class="linenum">4512</span></a>              if (ev.button.menucmd) {
<a name="l4513"><span class="linenum">4513</span></a>                  value = cmd;
<a name="l4514"><span class="linenum">4514</span></a>                  cmd = ev.button.menucmd;
<a name="l4515"><span class="linenum">4515</span></a>              }
<a name="l4516"><span class="linenum">4516</span></a>              this._lastButton = ev.button;
<a name="l4517"><span class="linenum">4517</span></a>              if (this.STOP_EXEC_COMMAND) {
<a name="l4518"><span class="linenum">4518</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('execCommand skipped because we found the STOP_EXEC_COMMAND flag set to true', 'warn', 'SimpleEditor');
<a name="l4519"><span class="linenum">4519</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('NOEXEC::execCommand::(' + cmd + '), (' + value + ')', 'warn', 'SimpleEditor');
<a name="l4520"><span class="linenum">4520</span></a>                  this.STOP_EXEC_COMMAND = false;
<a name="l4521"><span class="linenum">4521</span></a>                  return false;
<a name="l4522"><span class="linenum">4522</span></a>              } else {
<a name="l4523"><span class="linenum">4523</span></a>                  this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(cmd, value);
<a name="l4524"><span class="linenum">4524</span></a>                  if (!this.browser.webkit) {
<a name="l4525"><span class="linenum">4525</span></a>                       var Fself = this;
<a name="l4526"><span class="linenum">4526</span></a>                       <a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l4527"><span class="linenum">4527</span></a>                           Fself.focus.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(Fself);
<a name="l4528"><span class="linenum">4528</span></a>                       }, 5);
<a name="l4529"><span class="linenum">4529</span></a>                   }
<a name="l4530"><span class="linenum">4530</span></a>              }
<a name="l4531"><span class="linenum">4531</span></a>              Event.stopEvent(ev);
<a name="l4532"><span class="linenum">4532</span></a>          },
<a name="l4533"><span class="linenum">4533</span></a>          <span class="comment">/**</span>
<a name="l4534"><span class="linenum">4534</span></a>  <span class="comment">        * @private</span>
<a name="l4535"><span class="linenum">4535</span></a>  <span class="comment">        * @method _setupAfterElement</span>
<a name="l4536"><span class="linenum">4536</span></a>  <span class="comment">        * @description Creates the accessibility h2 header and places it after the iframe in the Dom for navigation.</span>
<a name="l4537"><span class="linenum">4537</span></a>  <span class="comment">        */</span>
<a name="l4538"><span class="linenum">4538</span></a>          _setupAfterElement: function() {
<a name="l4539"><span class="linenum">4539</span></a>              if (!this.beforeElement) {
<a name="l4540"><span class="linenum">4540</span></a>                  this.beforeElement = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('h2');
<a name="l4541"><span class="linenum">4541</span></a>                  this.beforeElement.className = 'yui-editor-skipheader';
<a name="l4542"><span class="linenum">4542</span></a>                  this.beforeElement.tabIndex = '-1';
<a name="l4543"><span class="linenum">4543</span></a>                  this.beforeElement.innerHTML = this.STR_BEFORE_EDITOR;
<a name="l4544"><span class="linenum">4544</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild').<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(this.beforeElement, this.toolbar.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('nextSibling'));
<a name="l4545"><span class="linenum">4545</span></a>              }
<a name="l4546"><span class="linenum">4546</span></a>              if (!this.afterElement) {
<a name="l4547"><span class="linenum">4547</span></a>                  this.afterElement = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('h2');
<a name="l4548"><span class="linenum">4548</span></a>                  this.afterElement.className = 'yui-editor-skipheader';
<a name="l4549"><span class="linenum">4549</span></a>                  this.afterElement.tabIndex = '-1';
<a name="l4550"><span class="linenum">4550</span></a>                  this.afterElement.innerHTML = this.STR_LEAVE_EDITOR;
<a name="l4551"><span class="linenum">4551</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild').appendChild(this.afterElement);
<a name="l4552"><span class="linenum">4552</span></a>              }
<a name="l4553"><span class="linenum">4553</span></a>          },
<a name="l4554"><span class="linenum">4554</span></a>          <span class="comment">/**</span>
<a name="l4555"><span class="linenum">4555</span></a>  <span class="comment">        * @private</span>
<a name="l4556"><span class="linenum">4556</span></a>  <span class="comment">        * @method _disableEditor</span>
<a name="l4557"><span class="linenum">4557</span></a>  <span class="comment">        * @param {Boolean} disabled Pass true to disable, false to enable</span>
<a name="l4558"><span class="linenum">4558</span></a>  <span class="comment">        * @description Creates a mask to place over the Editor.</span>
<a name="l4559"><span class="linenum">4559</span></a>  <span class="comment">        */</span>
<a name="l4560"><span class="linenum">4560</span></a>          _disableEditor: function(disabled) {
<a name="l4561"><span class="linenum">4561</span></a>              var iframe, par, html, height;
<a name="l4562"><span class="linenum">4562</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled_iframe')) {
<a name="l4563"><span class="linenum">4563</span></a>                  iframe = this._createIframe();
<a name="l4564"><span class="linenum">4564</span></a>                  iframe.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('id', 'disabled_' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id'));
<a name="l4565"><span class="linenum">4565</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('height', '100%');
<a name="l4566"><span class="linenum">4566</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('display', 'none');
<a name="l4567"><span class="linenum">4567</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', 'visible');
<a name="l4568"><span class="linenum">4568</span></a>                  this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled_iframe', iframe);
<a name="l4569"><span class="linenum">4569</span></a>                  par = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode');
<a name="l4570"><span class="linenum">4570</span></a>                  par.appendChild(iframe.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l4571"><span class="linenum">4571</span></a>              }
<a name="l4572"><span class="linenum">4572</span></a>              if (!iframe) {
<a name="l4573"><span class="linenum">4573</span></a>                  iframe = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled_iframe');
<a name="l4574"><span class="linenum">4574</span></a>              }
<a name="l4575"><span class="linenum">4575</span></a>              if (disabled) {
<a name="l4576"><span class="linenum">4576</span></a>                  this._orgIframe = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe');
<a name="l4577"><span class="linenum">4577</span></a>  
<a name="l4578"><span class="linenum">4578</span></a>                  if (this.toolbar) {
<a name="l4579"><span class="linenum">4579</span></a>                      this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true);
<a name="l4580"><span class="linenum">4580</span></a>                  }
<a name="l4581"><span class="linenum">4581</span></a>  
<a name="l4582"><span class="linenum">4582</span></a>                  html = this.getEditorHTML();
<a name="l4583"><span class="linenum">4583</span></a>                  height = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('offsetHeight');
<a name="l4584"><span class="linenum">4584</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', '');
<a name="l4585"><span class="linenum">4585</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', '');
<a name="l4586"><span class="linenum">4586</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('top', '');
<a name="l4587"><span class="linenum">4587</span></a>                  iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '');
<a name="l4588"><span class="linenum">4588</span></a>                  this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', 'hidden');
<a name="l4589"><span class="linenum">4589</span></a>                  this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', 'absolute');
<a name="l4590"><span class="linenum">4590</span></a>                  this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('top', '-99999px');
<a name="l4591"><span class="linenum">4591</span></a>                  this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '-99999px');
<a name="l4592"><span class="linenum">4592</span></a>                  this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('iframe', iframe);
<a name="l4593"><span class="linenum">4593</span></a>                  this._setInitialContent(true);
<a name="l4594"><span class="linenum">4594</span></a>                  
<a name="l4595"><span class="linenum">4595</span></a>                  if (!this._mask) {
<a name="l4596"><span class="linenum">4596</span></a>                      this._mask = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l4597"><span class="linenum">4597</span></a>                      Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._mask, 'yui-editor-masked');
<a name="l4598"><span class="linenum">4598</span></a>                      if (this.browser.ie) {
<a name="l4599"><span class="linenum">4599</span></a>                          this._mask.style.height = height + 'px';
<a name="l4600"><span class="linenum">4600</span></a>                      }
<a name="l4601"><span class="linenum">4601</span></a>                      this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode').appendChild(this._mask);
<a name="l4602"><span class="linenum">4602</span></a>                  }
<a name="l4603"><span class="linenum">4603</span></a>                  this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('editorContentReloaded', function() {
<a name="l4604"><span class="linenum">4604</span></a>                      this._getDoc().body._rteLoaded = false;
<a name="l4605"><span class="linenum">4605</span></a>                      this.setEditorHTML(html);
<a name="l4606"><span class="linenum">4606</span></a>                      iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('display', 'block');
<a name="l4607"><span class="linenum">4607</span></a>                      this.unsubscribeAll('editorContentReloaded');
<a name="l4608"><span class="linenum">4608</span></a>                  });
<a name="l4609"><span class="linenum">4609</span></a>              } else {
<a name="l4610"><span class="linenum">4610</span></a>                  if (this._mask) {
<a name="l4611"><span class="linenum">4611</span></a>                      this._mask.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this._mask);
<a name="l4612"><span class="linenum">4612</span></a>                      this._mask = null;
<a name="l4613"><span class="linenum">4613</span></a>                      if (this.toolbar) {
<a name="l4614"><span class="linenum">4614</span></a>                          this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', false);
<a name="l4615"><span class="linenum">4615</span></a>                      }
<a name="l4616"><span class="linenum">4616</span></a>                      iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', 'hidden');
<a name="l4617"><span class="linenum">4617</span></a>                      iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', 'absolute');
<a name="l4618"><span class="linenum">4618</span></a>                      iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('top', '-99999px');
<a name="l4619"><span class="linenum">4619</span></a>                      iframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '-99999px');
<a name="l4620"><span class="linenum">4620</span></a>                      this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', '');
<a name="l4621"><span class="linenum">4621</span></a>                      this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', '');
<a name="l4622"><span class="linenum">4622</span></a>                      this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('top', '');
<a name="l4623"><span class="linenum">4623</span></a>                      this._orgIframe.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '');
<a name="l4624"><span class="linenum">4624</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('iframe', this._orgIframe);
<a name="l4625"><span class="linenum">4625</span></a>  
<a name="l4626"><span class="linenum">4626</span></a>                      this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l4627"><span class="linenum">4627</span></a>                      var self = this;
<a name="l4628"><span class="linenum">4628</span></a>                      window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l4629"><span class="linenum">4629</span></a>                          self.nodeChange.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l4630"><span class="linenum">4630</span></a>                      }, 100);
<a name="l4631"><span class="linenum">4631</span></a>                  }
<a name="l4632"><span class="linenum">4632</span></a>              }
<a name="l4633"><span class="linenum">4633</span></a>          },
<a name="l4634"><span class="linenum">4634</span></a>          <span class="comment">/**</span>
<a name="l4635"><span class="linenum">4635</span></a>  <span class="comment">        * @property SEP_DOMPATH</span>
<a name="l4636"><span class="linenum">4636</span></a>  <span class="comment">        * @description The value to place in between the Dom path items</span>
<a name="l4637"><span class="linenum">4637</span></a>  <span class="comment">        * @type String</span>
<a name="l4638"><span class="linenum">4638</span></a>  <span class="comment">        */</span>
<a name="l4639"><span class="linenum">4639</span></a>          SEP_DOMPATH: '&lt;',
<a name="l4640"><span class="linenum">4640</span></a>          <span class="comment">/**</span>
<a name="l4641"><span class="linenum">4641</span></a>  <span class="comment">        * @property STR_LEAVE_EDITOR</span>
<a name="l4642"><span class="linenum">4642</span></a>  <span class="comment">        * @description The accessibility string for the element after the iFrame</span>
<a name="l4643"><span class="linenum">4643</span></a>  <span class="comment">        * @type String</span>
<a name="l4644"><span class="linenum">4644</span></a>  <span class="comment">        */</span>
<a name="l4645"><span class="linenum">4645</span></a>          STR_LEAVE_EDITOR: 'You have left the Rich Text Editor.',
<a name="l4646"><span class="linenum">4646</span></a>          <span class="comment">/**</span>
<a name="l4647"><span class="linenum">4647</span></a>  <span class="comment">        * @property STR_BEFORE_EDITOR</span>
<a name="l4648"><span class="linenum">4648</span></a>  <span class="comment">        * @description The accessibility string for the element before the iFrame</span>
<a name="l4649"><span class="linenum">4649</span></a>  <span class="comment">        * @type String</span>
<a name="l4650"><span class="linenum">4650</span></a>  <span class="comment">        */</span>
<a name="l4651"><span class="linenum">4651</span></a>          STR_BEFORE_EDITOR: 'This text field can contain stylized text and graphics. To cycle through all formatting options, use the keyboard shortcut Shift + Escape to place focus on the toolbar and navigate between options with your arrow keys. To exit this text editor use the Escape key and continue tabbing. &lt;h4&gt;Common formatting keyboard shortcuts:&lt;/h4&gt;&lt;ul&gt;&lt;li&gt;Control Shift B sets text to bold&lt;/li&gt; &lt;li&gt;Control Shift I sets text to italic&lt;/li&gt; &lt;li&gt;Control Shift U underlines text&lt;/li&gt; &lt;li&gt;Control Shift L adds an HTML link&lt;/li&gt;&lt;/ul&gt;',
<a name="l4652"><span class="linenum">4652</span></a>          <span class="comment">/**</span>
<a name="l4653"><span class="linenum">4653</span></a>  <span class="comment">        * @property STR_TITLE</span>
<a name="l4654"><span class="linenum">4654</span></a>  <span class="comment">        * @description The Title of the HTML document that is created in the iFrame</span>
<a name="l4655"><span class="linenum">4655</span></a>  <span class="comment">        * @type String</span>
<a name="l4656"><span class="linenum">4656</span></a>  <span class="comment">        */</span>
<a name="l4657"><span class="linenum">4657</span></a>          STR_TITLE: 'Rich Text Area.',
<a name="l4658"><span class="linenum">4658</span></a>          <span class="comment">/**</span>
<a name="l4659"><span class="linenum">4659</span></a>  <span class="comment">        * @property STR_IMAGE_HERE</span>
<a name="l4660"><span class="linenum">4660</span></a>  <span class="comment">        * @description The text to place in the URL textbox when using the blankimage.</span>
<a name="l4661"><span class="linenum">4661</span></a>  <span class="comment">        * @type String</span>
<a name="l4662"><span class="linenum">4662</span></a>  <span class="comment">        */</span>
<a name="l4663"><span class="linenum">4663</span></a>          STR_IMAGE_HERE: 'Image URL Here',
<a name="l4664"><span class="linenum">4664</span></a>          <span class="comment">/**</span>
<a name="l4665"><span class="linenum">4665</span></a>  <span class="comment">        * @property STR_IMAGE_URL</span>
<a name="l4666"><span class="linenum">4666</span></a>  <span class="comment">        * @description The label string for Image URL</span>
<a name="l4667"><span class="linenum">4667</span></a>  <span class="comment">        * @type String</span>
<a name="l4668"><span class="linenum">4668</span></a>  <span class="comment">        */</span>
<a name="l4669"><span class="linenum">4669</span></a>          STR_IMAGE_URL: 'Image URL',        
<a name="l4670"><span class="linenum">4670</span></a>          <span class="comment">/**</span>
<a name="l4671"><span class="linenum">4671</span></a>  <span class="comment">        * @property STR_LINK_URL</span>
<a name="l4672"><span class="linenum">4672</span></a>  <span class="comment">        * @description The label string for the Link URL.</span>
<a name="l4673"><span class="linenum">4673</span></a>  <span class="comment">        * @type String</span>
<a name="l4674"><span class="linenum">4674</span></a>  <span class="comment">        */</span>
<a name="l4675"><span class="linenum">4675</span></a>          STR_LINK_URL: 'Link URL',
<a name="l4676"><span class="linenum">4676</span></a>          <span class="comment">/**</span>
<a name="l4677"><span class="linenum">4677</span></a>  <span class="comment">        * @protected</span>
<a name="l4678"><span class="linenum">4678</span></a>  <span class="comment">        * @property STOP_EXEC_COMMAND</span>
<a name="l4679"><span class="linenum">4679</span></a>  <span class="comment">        * @description Set to true when you want the default execCommand function to not process anything</span>
<a name="l4680"><span class="linenum">4680</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l4681"><span class="linenum">4681</span></a>  <span class="comment">        */</span>
<a name="l4682"><span class="linenum">4682</span></a>          STOP_EXEC_COMMAND: false,
<a name="l4683"><span class="linenum">4683</span></a>          <span class="comment">/**</span>
<a name="l4684"><span class="linenum">4684</span></a>  <span class="comment">        * @protected</span>
<a name="l4685"><span class="linenum">4685</span></a>  <span class="comment">        * @property STOP_NODE_CHANGE</span>
<a name="l4686"><span class="linenum">4686</span></a>  <span class="comment">        * @description Set to true when you want the default nodeChange function to not process anything</span>
<a name="l4687"><span class="linenum">4687</span></a>  <span class="comment">        * @type Boolean</span>
<a name="l4688"><span class="linenum">4688</span></a>  <span class="comment">        */</span>
<a name="l4689"><span class="linenum">4689</span></a>          STOP_NODE_CHANGE: false,
<a name="l4690"><span class="linenum">4690</span></a>          <span class="comment">/**</span>
<a name="l4691"><span class="linenum">4691</span></a>  <span class="comment">        * @protected</span>
<a name="l4692"><span class="linenum">4692</span></a>  <span class="comment">        * @property CLASS_NOEDIT</span>
<a name="l4693"><span class="linenum">4693</span></a>  <span class="comment">        * @description CSS class applied to elements that are not editable.</span>
<a name="l4694"><span class="linenum">4694</span></a>  <span class="comment">        * @type String</span>
<a name="l4695"><span class="linenum">4695</span></a>  <span class="comment">        */</span>
<a name="l4696"><span class="linenum">4696</span></a>          CLASS_NOEDIT: 'yui-noedit',
<a name="l4697"><span class="linenum">4697</span></a>          <span class="comment">/**</span>
<a name="l4698"><span class="linenum">4698</span></a>  <span class="comment">        * @protected</span>
<a name="l4699"><span class="linenum">4699</span></a>  <span class="comment">        * @property CLASS_CONTAINER</span>
<a name="l4700"><span class="linenum">4700</span></a>  <span class="comment">        * @description Default CSS class to apply to the editors container element</span>
<a name="l4701"><span class="linenum">4701</span></a>  <span class="comment">        * @type String</span>
<a name="l4702"><span class="linenum">4702</span></a>  <span class="comment">        */</span>
<a name="l4703"><span class="linenum">4703</span></a>          CLASS_CONTAINER: 'yui-editor-container',
<a name="l4704"><span class="linenum">4704</span></a>          <span class="comment">/**</span>
<a name="l4705"><span class="linenum">4705</span></a>  <span class="comment">        * @protected</span>
<a name="l4706"><span class="linenum">4706</span></a>  <span class="comment">        * @property CLASS_EDITABLE</span>
<a name="l4707"><span class="linenum">4707</span></a>  <span class="comment">        * @description Default CSS class to apply to the editors iframe element</span>
<a name="l4708"><span class="linenum">4708</span></a>  <span class="comment">        * @type String</span>
<a name="l4709"><span class="linenum">4709</span></a>  <span class="comment">        */</span>
<a name="l4710"><span class="linenum">4710</span></a>          CLASS_EDITABLE: 'yui-editor-editable',
<a name="l4711"><span class="linenum">4711</span></a>          <span class="comment">/**</span>
<a name="l4712"><span class="linenum">4712</span></a>  <span class="comment">        * @protected</span>
<a name="l4713"><span class="linenum">4713</span></a>  <span class="comment">        * @property CLASS_EDITABLE_CONT</span>
<a name="l4714"><span class="linenum">4714</span></a>  <span class="comment">        * @description Default CSS class to apply to the editors iframe's parent element</span>
<a name="l4715"><span class="linenum">4715</span></a>  <span class="comment">        * @type String</span>
<a name="l4716"><span class="linenum">4716</span></a>  <span class="comment">        */</span>
<a name="l4717"><span class="linenum">4717</span></a>          CLASS_EDITABLE_CONT: 'yui-editor-editable-container',
<a name="l4718"><span class="linenum">4718</span></a>          <span class="comment">/**</span>
<a name="l4719"><span class="linenum">4719</span></a>  <span class="comment">        * @protected</span>
<a name="l4720"><span class="linenum">4720</span></a>  <span class="comment">        * @property CLASS_PREFIX</span>
<a name="l4721"><span class="linenum">4721</span></a>  <span class="comment">        * @description Default prefix for dynamically created class names</span>
<a name="l4722"><span class="linenum">4722</span></a>  <span class="comment">        * @type String</span>
<a name="l4723"><span class="linenum">4723</span></a>  <span class="comment">        */</span>
<a name="l4724"><span class="linenum">4724</span></a>          CLASS_PREFIX: 'yui-editor',
<a name="l4725"><span class="linenum">4725</span></a>          <span class="comment">/** </span>
<a name="l4726"><span class="linenum">4726</span></a>  <span class="comment">        * @property browser</span>
<a name="l4727"><span class="linenum">4727</span></a>  <span class="comment">        * @description Standard browser detection</span>
<a name="l4728"><span class="linenum">4728</span></a>  <span class="comment">        * @type Object</span>
<a name="l4729"><span class="linenum">4729</span></a>  <span class="comment">        */</span>
<a name="l4730"><span class="linenum">4730</span></a>          browser: function() {
<a name="l4731"><span class="linenum">4731</span></a>              var br = YAHOO.env.ua;
<a name="l4732"><span class="linenum">4732</span></a>  <span class="comment">            //Check for webkit3</span>
<a name="l4733"><span class="linenum">4733</span></a>              if (br.webkit &gt;= 420) {
<a name="l4734"><span class="linenum">4734</span></a>                  br.webkit3 = br.webkit;
<a name="l4735"><span class="linenum">4735</span></a>              } else {
<a name="l4736"><span class="linenum">4736</span></a>                  br.webkit3 = 0;
<a name="l4737"><span class="linenum">4737</span></a>              }
<a name="l4738"><span class="linenum">4738</span></a>              if (br.webkit &gt;= 530) {
<a name="l4739"><span class="linenum">4739</span></a>                  br.webkit4 = br.webkit;
<a name="l4740"><span class="linenum">4740</span></a>              } else {
<a name="l4741"><span class="linenum">4741</span></a>                  br.webkit4 = 0;
<a name="l4742"><span class="linenum">4742</span></a>              }
<a name="l4743"><span class="linenum">4743</span></a>              br.mac = false;
<a name="l4744"><span class="linenum">4744</span></a>  <span class="comment">            //Check for Mac</span>
<a name="l4745"><span class="linenum">4745</span></a>              if (navigator.userAgent.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('Macintosh') !== -1) {
<a name="l4746"><span class="linenum">4746</span></a>                  br.mac = true;
<a name="l4747"><span class="linenum">4747</span></a>              }
<a name="l4748"><span class="linenum">4748</span></a>  
<a name="l4749"><span class="linenum">4749</span></a>              return br;
<a name="l4750"><span class="linenum">4750</span></a>          }(),
<a name="l4751"><span class="linenum">4751</span></a>          <span class="comment">/** </span>
<a name="l4752"><span class="linenum">4752</span></a>  <span class="comment">        * @method init</span>
<a name="l4753"><span class="linenum">4753</span></a>  <span class="comment">        * @description The Editor class' initialization method</span>
<a name="l4754"><span class="linenum">4754</span></a>  <span class="comment">        */</span>
<a name="l4755"><span class="linenum">4755</span></a>          init: function(p_oElement, p_oAttributes) {
<a name="l4756"><span class="linenum">4756</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('init', 'info', 'SimpleEditor');
<a name="l4757"><span class="linenum">4757</span></a>  
<a name="l4758"><span class="linenum">4758</span></a>              if (!this._defaultToolbar) {
<a name="l4759"><span class="linenum">4759</span></a>                  this._defaultToolbar = {
<a name="l4760"><span class="linenum">4760</span></a>                      collapse: true,
<a name="l4761"><span class="linenum">4761</span></a>                      titlebar: 'Text Editing Tools',
<a name="l4762"><span class="linenum">4762</span></a>                      draggable: false,
<a name="l4763"><span class="linenum">4763</span></a>                      buttons: [
<a name="l4764"><span class="linenum">4764</span></a>                          { group: 'fontstyle', label: 'Font Name and Size',
<a name="l4765"><span class="linenum">4765</span></a>                              buttons: [
<a name="l4766"><span class="linenum">4766</span></a>                                  { type: 'select', label: 'Arial', value: 'fontname', disabled: true,
<a name="l4767"><span class="linenum">4767</span></a>                                      menu: [
<a name="l4768"><span class="linenum">4768</span></a>                                          { text: 'Arial', checked: true },
<a name="l4769"><span class="linenum">4769</span></a>                                          { text: 'Arial Black' },
<a name="l4770"><span class="linenum">4770</span></a>                                          { text: 'Comic Sans MS' },
<a name="l4771"><span class="linenum">4771</span></a>                                          { text: 'Courier New' },
<a name="l4772"><span class="linenum">4772</span></a>                                          { text: 'Lucida Console' },
<a name="l4773"><span class="linenum">4773</span></a>                                          { text: 'Tahoma' },
<a name="l4774"><span class="linenum">4774</span></a>                                          { text: 'Times New Roman' },
<a name="l4775"><span class="linenum">4775</span></a>                                          { text: 'Trebuchet MS' },
<a name="l4776"><span class="linenum">4776</span></a>                                          { text: 'Verdana' }
<a name="l4777"><span class="linenum">4777</span></a>                                      ]
<a name="l4778"><span class="linenum">4778</span></a>                                  },
<a name="l4779"><span class="linenum">4779</span></a>                                  { type: 'spin', label: '13', value: 'fontsize', range: [ 9, 75 ], disabled: true }
<a name="l4780"><span class="linenum">4780</span></a>                              ]
<a name="l4781"><span class="linenum">4781</span></a>                          },
<a name="l4782"><span class="linenum">4782</span></a>                          { type: 'separator' },
<a name="l4783"><span class="linenum">4783</span></a>                          { group: 'textstyle', label: 'Font Style',
<a name="l4784"><span class="linenum">4784</span></a>                              buttons: [
<a name="l4785"><span class="linenum">4785</span></a>                                  { type: 'push', label: 'Bold CTRL + SHIFT + B', value: 'bold' },
<a name="l4786"><span class="linenum">4786</span></a>                                  { type: 'push', label: 'Italic CTRL + SHIFT + I', value: 'italic' },
<a name="l4787"><span class="linenum">4787</span></a>                                  { type: 'push', label: 'Underline CTRL + SHIFT + U', value: 'underline' },
<a name="l4788"><span class="linenum">4788</span></a>                                  { type: 'push', label: 'Strike Through', value: 'strikethrough' },
<a name="l4789"><span class="linenum">4789</span></a>                                  { type: 'separator' },
<a name="l4790"><span class="linenum">4790</span></a>                                  { type: 'color', label: 'Font Color', value: 'forecolor', disabled: true },
<a name="l4791"><span class="linenum">4791</span></a>                                  { type: 'color', label: 'Background Color', value: 'backcolor', disabled: true }
<a name="l4792"><span class="linenum">4792</span></a>                                  
<a name="l4793"><span class="linenum">4793</span></a>                              ]
<a name="l4794"><span class="linenum">4794</span></a>                          },
<a name="l4795"><span class="linenum">4795</span></a>                          { type: 'separator' },
<a name="l4796"><span class="linenum">4796</span></a>                          { group: 'indentlist', label: 'Lists',
<a name="l4797"><span class="linenum">4797</span></a>                              buttons: [
<a name="l4798"><span class="linenum">4798</span></a>                                  { type: 'push', label: 'Create an Unordered List', value: 'insertunorderedlist' },
<a name="l4799"><span class="linenum">4799</span></a>                                  { type: 'push', label: 'Create an Ordered List', value: 'insertorderedlist' }
<a name="l4800"><span class="linenum">4800</span></a>                              ]
<a name="l4801"><span class="linenum">4801</span></a>                          },
<a name="l4802"><span class="linenum">4802</span></a>                          { type: 'separator' },
<a name="l4803"><span class="linenum">4803</span></a>                          { group: 'insertitem', label: 'Insert Item',
<a name="l4804"><span class="linenum">4804</span></a>                              buttons: [
<a name="l4805"><span class="linenum">4805</span></a>                                  { type: 'push', label: 'HTML Link CTRL + SHIFT + L', value: 'createlink', disabled: true },
<a name="l4806"><span class="linenum">4806</span></a>                                  { type: 'push', label: 'Insert Image', value: 'insertimage' }
<a name="l4807"><span class="linenum">4807</span></a>                              ]
<a name="l4808"><span class="linenum">4808</span></a>                          }
<a name="l4809"><span class="linenum">4809</span></a>                      ]
<a name="l4810"><span class="linenum">4810</span></a>                  };
<a name="l4811"><span class="linenum">4811</span></a>              }
<a name="l4812"><span class="linenum">4812</span></a>  
<a name="l4813"><span class="linenum">4813</span></a>              YAHOO.widget.SimpleEditor.superclass.init.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, p_oElement, p_oAttributes);
<a name="l4814"><span class="linenum">4814</span></a>              YAHOO.widget.EditorInfo._instances[this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id')] = this;
<a name="l4815"><span class="linenum">4815</span></a>  
<a name="l4816"><span class="linenum">4816</span></a>  
<a name="l4817"><span class="linenum">4817</span></a>              this.currentElement = [];
<a name="l4818"><span class="linenum">4818</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('contentReady', function() {
<a name="l4819"><span class="linenum">4819</span></a>                  this.DOMReady = true;
<a name="l4820"><span class="linenum">4820</span></a>                  this.fireQueue();
<a name="l4821"><span class="linenum">4821</span></a>              }, this, true);
<a name="l4822"><span class="linenum">4822</span></a>  
<a name="l4823"><span class="linenum">4823</span></a>          },
<a name="l4824"><span class="linenum">4824</span></a>          <span class="comment">/**</span>
<a name="l4825"><span class="linenum">4825</span></a>  <span class="comment">        * @method initAttributes</span>
<a name="l4826"><span class="linenum">4826</span></a>  <span class="comment">        * @description Initializes all of the configuration attributes used to create </span>
<a name="l4827"><span class="linenum">4827</span></a>  <span class="comment">        * the editor.</span>
<a name="l4828"><span class="linenum">4828</span></a>  <span class="comment">        * @param {Object} attr Object literal specifying a set of </span>
<a name="l4829"><span class="linenum">4829</span></a>  <span class="comment">        * configuration attributes used to create the editor.</span>
<a name="l4830"><span class="linenum">4830</span></a>  <span class="comment">        */</span>
<a name="l4831"><span class="linenum">4831</span></a>          initAttributes: function(attr) {
<a name="l4832"><span class="linenum">4832</span></a>              YAHOO.widget.SimpleEditor.superclass.initAttributes.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, attr);
<a name="l4833"><span class="linenum">4833</span></a>              var self = this;
<a name="l4834"><span class="linenum">4834</span></a>  
<a name="l4835"><span class="linenum">4835</span></a>              <span class="comment">/**</span>
<a name="l4836"><span class="linenum">4836</span></a>  <span class="comment">            * @config setDesignMode</span>
<a name="l4837"><span class="linenum">4837</span></a>  <span class="comment">            * @description Should the Editor set designMode on the document. Default: true.</span>
<a name="l4838"><span class="linenum">4838</span></a>  <span class="comment">            * @default true</span>
<a name="l4839"><span class="linenum">4839</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4840"><span class="linenum">4840</span></a>  <span class="comment">            */</span>
<a name="l4841"><span class="linenum">4841</span></a>              this.setAttributeConfig('setDesignMode', {
<a name="l4842"><span class="linenum">4842</span></a>                  value: ((attr.setDesignMode === false) ? false : true)
<a name="l4843"><span class="linenum">4843</span></a>              });
<a name="l4844"><span class="linenum">4844</span></a>              <span class="comment">/**</span>
<a name="l4845"><span class="linenum">4845</span></a>  <span class="comment">            * @config nodeChangeDelay</span>
<a name="l4846"><span class="linenum">4846</span></a>  <span class="comment">            * @description Do we wrap the nodeChange method in a timeout for performance. Default: true.</span>
<a name="l4847"><span class="linenum">4847</span></a>  <span class="comment">            * @default true</span>
<a name="l4848"><span class="linenum">4848</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4849"><span class="linenum">4849</span></a>  <span class="comment">            */</span>
<a name="l4850"><span class="linenum">4850</span></a>              this.setAttributeConfig('nodeChangeDelay', {
<a name="l4851"><span class="linenum">4851</span></a>                  value: ((attr.nodeChangeDelay === false) ? false : true)
<a name="l4852"><span class="linenum">4852</span></a>              });
<a name="l4853"><span class="linenum">4853</span></a>              <span class="comment">/**</span>
<a name="l4854"><span class="linenum">4854</span></a>  <span class="comment">            * @config maxUndo</span>
<a name="l4855"><span class="linenum">4855</span></a>  <span class="comment">            * @description The max number of undo levels to store.</span>
<a name="l4856"><span class="linenum">4856</span></a>  <span class="comment">            * @default 30</span>
<a name="l4857"><span class="linenum">4857</span></a>  <span class="comment">            * @type Number</span>
<a name="l4858"><span class="linenum">4858</span></a>  <span class="comment">            */</span>
<a name="l4859"><span class="linenum">4859</span></a>              this.setAttributeConfig('maxUndo', {
<a name="l4860"><span class="linenum">4860</span></a>                  writeOnce: true,
<a name="l4861"><span class="linenum">4861</span></a>                  value: attr.maxUndo || 30
<a name="l4862"><span class="linenum">4862</span></a>              });
<a name="l4863"><span class="linenum">4863</span></a>  
<a name="l4864"><span class="linenum">4864</span></a>              <span class="comment">/**</span>
<a name="l4865"><span class="linenum">4865</span></a>  <span class="comment">            * @config ptags</span>
<a name="l4866"><span class="linenum">4866</span></a>  <span class="comment">            * @description If true, the editor uses &amp;lt;P&amp;gt; tags instead of &amp;lt;br&amp;gt; tags. (Use Shift + Enter to get a &amp;lt;br&amp;gt;)</span>
<a name="l4867"><span class="linenum">4867</span></a>  <span class="comment">            * @default false</span>
<a name="l4868"><span class="linenum">4868</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4869"><span class="linenum">4869</span></a>  <span class="comment">            */</span>
<a name="l4870"><span class="linenum">4870</span></a>              this.setAttributeConfig('ptags', {
<a name="l4871"><span class="linenum">4871</span></a>                  writeOnce: true,
<a name="l4872"><span class="linenum">4872</span></a>                  value: attr.ptags || false
<a name="l4873"><span class="linenum">4873</span></a>              });
<a name="l4874"><span class="linenum">4874</span></a>              <span class="comment">/**</span>
<a name="l4875"><span class="linenum">4875</span></a>  <span class="comment">            * @config insert</span>
<a name="l4876"><span class="linenum">4876</span></a>  <span class="comment">            * @description If true, selection is not required for: fontname, fontsize, forecolor, backcolor.</span>
<a name="l4877"><span class="linenum">4877</span></a>  <span class="comment">            * @default false</span>
<a name="l4878"><span class="linenum">4878</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4879"><span class="linenum">4879</span></a>  <span class="comment">            */</span>
<a name="l4880"><span class="linenum">4880</span></a>              this.setAttributeConfig('insert', {
<a name="l4881"><span class="linenum">4881</span></a>                  writeOnce: true,
<a name="l4882"><span class="linenum">4882</span></a>                  value: attr.insert || false,
<a name="l4883"><span class="linenum">4883</span></a>                  method: function(insert) {
<a name="l4884"><span class="linenum">4884</span></a>                      if (insert) {
<a name="l4885"><span class="linenum">4885</span></a>                          var buttons = {
<a name="l4886"><span class="linenum">4886</span></a>                              fontname: true,
<a name="l4887"><span class="linenum">4887</span></a>                              fontsize: true,
<a name="l4888"><span class="linenum">4888</span></a>                              forecolor: true,
<a name="l4889"><span class="linenum">4889</span></a>                              backcolor: true
<a name="l4890"><span class="linenum">4890</span></a>                          };
<a name="l4891"><span class="linenum">4891</span></a>                          var tmp = this._defaultToolbar.buttons;
<a name="l4892"><span class="linenum">4892</span></a>                          for (var i = 0; i &lt; tmp.length; i++) {
<a name="l4893"><span class="linenum">4893</span></a>                              if (tmp[i].buttons) {
<a name="l4894"><span class="linenum">4894</span></a>                                  for (var a = 0; a &lt; tmp[i].buttons.length; a++) {
<a name="l4895"><span class="linenum">4895</span></a>                                      if (tmp[i].buttons[a].value) {
<a name="l4896"><span class="linenum">4896</span></a>                                          if (buttons[tmp[i].buttons[a].value]) {
<a name="l4897"><span class="linenum">4897</span></a>                                              delete tmp[i].buttons[a].disabled;
<a name="l4898"><span class="linenum">4898</span></a>                                          }
<a name="l4899"><span class="linenum">4899</span></a>                                      }
<a name="l4900"><span class="linenum">4900</span></a>                                  }
<a name="l4901"><span class="linenum">4901</span></a>                              }
<a name="l4902"><span class="linenum">4902</span></a>                          }
<a name="l4903"><span class="linenum">4903</span></a>                      }
<a name="l4904"><span class="linenum">4904</span></a>                  }
<a name="l4905"><span class="linenum">4905</span></a>              });
<a name="l4906"><span class="linenum">4906</span></a>              <span class="comment">/**</span>
<a name="l4907"><span class="linenum">4907</span></a>  <span class="comment">            * @config container</span>
<a name="l4908"><span class="linenum">4908</span></a>  <span class="comment">            * @description Used when dynamically creating the Editor from Javascript with no default textarea.</span>
<a name="l4909"><span class="linenum">4909</span></a>  <span class="comment">            * We will create one and place it in this container. If no container is passed we will append to document.body.</span>
<a name="l4910"><span class="linenum">4910</span></a>  <span class="comment">            * @default false</span>
<a name="l4911"><span class="linenum">4911</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l4912"><span class="linenum">4912</span></a>  <span class="comment">            */</span>
<a name="l4913"><span class="linenum">4913</span></a>              this.setAttributeConfig('container', {
<a name="l4914"><span class="linenum">4914</span></a>                  writeOnce: true,
<a name="l4915"><span class="linenum">4915</span></a>                  value: attr.container || false
<a name="l4916"><span class="linenum">4916</span></a>              });
<a name="l4917"><span class="linenum">4917</span></a>              <span class="comment">/**</span>
<a name="l4918"><span class="linenum">4918</span></a>  <span class="comment">            * @config plainText</span>
<a name="l4919"><span class="linenum">4919</span></a>  <span class="comment">            * @description Process the inital textarea data as if it was plain text. Accounting for spaces, tabs and line feeds.</span>
<a name="l4920"><span class="linenum">4920</span></a>  <span class="comment">            * @default false</span>
<a name="l4921"><span class="linenum">4921</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4922"><span class="linenum">4922</span></a>  <span class="comment">            */</span>
<a name="l4923"><span class="linenum">4923</span></a>              this.setAttributeConfig('plainText', {
<a name="l4924"><span class="linenum">4924</span></a>                  writeOnce: true,
<a name="l4925"><span class="linenum">4925</span></a>                  value: attr.plainText || false
<a name="l4926"><span class="linenum">4926</span></a>              });
<a name="l4927"><span class="linenum">4927</span></a>              <span class="comment">/**</span>
<a name="l4928"><span class="linenum">4928</span></a>  <span class="comment">            * @private</span>
<a name="l4929"><span class="linenum">4929</span></a>  <span class="comment">            * @config iframe</span>
<a name="l4930"><span class="linenum">4930</span></a>  <span class="comment">            * @description Internal config for holding the iframe element.</span>
<a name="l4931"><span class="linenum">4931</span></a>  <span class="comment">            * @default null</span>
<a name="l4932"><span class="linenum">4932</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l4933"><span class="linenum">4933</span></a>  <span class="comment">            */</span>
<a name="l4934"><span class="linenum">4934</span></a>              this.setAttributeConfig('iframe', {
<a name="l4935"><span class="linenum">4935</span></a>                  value: null
<a name="l4936"><span class="linenum">4936</span></a>              });
<a name="l4937"><span class="linenum">4937</span></a>              <span class="comment">/**</span>
<a name="l4938"><span class="linenum">4938</span></a>  <span class="comment">            * @private</span>
<a name="l4939"><span class="linenum">4939</span></a>  <span class="comment">            * @config disabled_iframe</span>
<a name="l4940"><span class="linenum">4940</span></a>  <span class="comment">            * @description Internal config for holding the iframe element used when disabling the Editor.</span>
<a name="l4941"><span class="linenum">4941</span></a>  <span class="comment">            * @default null</span>
<a name="l4942"><span class="linenum">4942</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l4943"><span class="linenum">4943</span></a>  <span class="comment">            */</span>
<a name="l4944"><span class="linenum">4944</span></a>              this.setAttributeConfig('disabled_iframe', {
<a name="l4945"><span class="linenum">4945</span></a>                  value: null
<a name="l4946"><span class="linenum">4946</span></a>              });
<a name="l4947"><span class="linenum">4947</span></a>              <span class="comment">/**</span>
<a name="l4948"><span class="linenum">4948</span></a>  <span class="comment">            * @private</span>
<a name="l4949"><span class="linenum">4949</span></a>  <span class="comment">            * @depreciated - No longer used, should use this.get('element')</span>
<a name="l4950"><span class="linenum">4950</span></a>  <span class="comment">            * @config textarea</span>
<a name="l4951"><span class="linenum">4951</span></a>  <span class="comment">            * @description Internal config for holding the textarea element (replaced with element).</span>
<a name="l4952"><span class="linenum">4952</span></a>  <span class="comment">            * @default null</span>
<a name="l4953"><span class="linenum">4953</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l4954"><span class="linenum">4954</span></a>  <span class="comment">            */</span>
<a name="l4955"><span class="linenum">4955</span></a>              this.setAttributeConfig('textarea', {
<a name="l4956"><span class="linenum">4956</span></a>                  value: null,
<a name="l4957"><span class="linenum">4957</span></a>                  writeOnce: true
<a name="l4958"><span class="linenum">4958</span></a>              });
<a name="l4959"><span class="linenum">4959</span></a>              <span class="comment">/**</span>
<a name="l4960"><span class="linenum">4960</span></a>  <span class="comment">            * @config nodeChangeThreshold</span>
<a name="l4961"><span class="linenum">4961</span></a>  <span class="comment">            * @description The number of seconds that need to be in between nodeChange processing</span>
<a name="l4962"><span class="linenum">4962</span></a>  <span class="comment">            * @default 3</span>
<a name="l4963"><span class="linenum">4963</span></a>  <span class="comment">            * @type Number</span>
<a name="l4964"><span class="linenum">4964</span></a>  <span class="comment">            */</span>            
<a name="l4965"><span class="linenum">4965</span></a>              this.setAttributeConfig('nodeChangeThreshold', {
<a name="l4966"><span class="linenum">4966</span></a>                  value: attr.nodeChangeThreshold || 3,
<a name="l4967"><span class="linenum">4967</span></a>                  validator: YAHOO.lang.isNumber
<a name="l4968"><span class="linenum">4968</span></a>              });
<a name="l4969"><span class="linenum">4969</span></a>              <span class="comment">/**</span>
<a name="l4970"><span class="linenum">4970</span></a>  <span class="comment">            * @config allowNoEdit</span>
<a name="l4971"><span class="linenum">4971</span></a>  <span class="comment">            * @description Should the editor check for non-edit fields. It should be noted that this technique is not perfect. If the user does the right things, they will still be able to make changes.</span>
<a name="l4972"><span class="linenum">4972</span></a>  <span class="comment">            * Such as highlighting an element below and above the content and hitting a toolbar button or a shortcut key.</span>
<a name="l4973"><span class="linenum">4973</span></a>  <span class="comment">            * @default false</span>
<a name="l4974"><span class="linenum">4974</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4975"><span class="linenum">4975</span></a>  <span class="comment">            */</span>            
<a name="l4976"><span class="linenum">4976</span></a>              this.setAttributeConfig('allowNoEdit', {
<a name="l4977"><span class="linenum">4977</span></a>                  value: attr.allowNoEdit || false,
<a name="l4978"><span class="linenum">4978</span></a>                  validator: YAHOO.lang.isBoolean
<a name="l4979"><span class="linenum">4979</span></a>              });
<a name="l4980"><span class="linenum">4980</span></a>              <span class="comment">/**</span>
<a name="l4981"><span class="linenum">4981</span></a>  <span class="comment">            * @config limitCommands</span>
<a name="l4982"><span class="linenum">4982</span></a>  <span class="comment">            * @description Should the Editor limit the allowed execCommands to the ones available in the toolbar. If true, then execCommand and keyboard shortcuts will fail if they are not defined in the toolbar.</span>
<a name="l4983"><span class="linenum">4983</span></a>  <span class="comment">            * @default false</span>
<a name="l4984"><span class="linenum">4984</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l4985"><span class="linenum">4985</span></a>  <span class="comment">            */</span>            
<a name="l4986"><span class="linenum">4986</span></a>              this.setAttributeConfig('limitCommands', {
<a name="l4987"><span class="linenum">4987</span></a>                  value: attr.limitCommands || false,
<a name="l4988"><span class="linenum">4988</span></a>                  validator: YAHOO.lang.isBoolean
<a name="l4989"><span class="linenum">4989</span></a>              });
<a name="l4990"><span class="linenum">4990</span></a>              <span class="comment">/**</span>
<a name="l4991"><span class="linenum">4991</span></a>  <span class="comment">            * @config element_cont</span>
<a name="l4992"><span class="linenum">4992</span></a>  <span class="comment">            * @description Internal config for the editors container</span>
<a name="l4993"><span class="linenum">4993</span></a>  <span class="comment">            * @default false</span>
<a name="l4994"><span class="linenum">4994</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l4995"><span class="linenum">4995</span></a>  <span class="comment">            */</span>
<a name="l4996"><span class="linenum">4996</span></a>              this.setAttributeConfig('element_cont', {
<a name="l4997"><span class="linenum">4997</span></a>                  value: attr.element_cont
<a name="l4998"><span class="linenum">4998</span></a>              });
<a name="l4999"><span class="linenum">4999</span></a>              <span class="comment">/**</span>
<a name="l5000"><span class="linenum">5000</span></a>  <span class="comment">            * @private</span>
<a name="l5001"><span class="linenum">5001</span></a>  <span class="comment">            * @config editor_wrapper</span>
<a name="l5002"><span class="linenum">5002</span></a>  <span class="comment">            * @description The outter wrapper for the entire editor.</span>
<a name="l5003"><span class="linenum">5003</span></a>  <span class="comment">            * @default null</span>
<a name="l5004"><span class="linenum">5004</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l5005"><span class="linenum">5005</span></a>  <span class="comment">            */</span>
<a name="l5006"><span class="linenum">5006</span></a>              this.setAttributeConfig('editor_wrapper', {
<a name="l5007"><span class="linenum">5007</span></a>                  value: attr.editor_wrapper || null,
<a name="l5008"><span class="linenum">5008</span></a>                  writeOnce: true
<a name="l5009"><span class="linenum">5009</span></a>              });
<a name="l5010"><span class="linenum">5010</span></a>              <span class="comment">/**</span>
<a name="l5011"><span class="linenum">5011</span></a>  <span class="comment">            * @attribute height</span>
<a name="l5012"><span class="linenum">5012</span></a>  <span class="comment">            * @description The height of the editor iframe container, not including the toolbar..</span>
<a name="l5013"><span class="linenum">5013</span></a>  <span class="comment">            * @default Best guessed size of the textarea, for best results use CSS to style the height of the textarea or pass it in as an argument</span>
<a name="l5014"><span class="linenum">5014</span></a>  <span class="comment">            * @type String</span>
<a name="l5015"><span class="linenum">5015</span></a>  <span class="comment">            */</span>
<a name="l5016"><span class="linenum">5016</span></a>              this.setAttributeConfig('height', {
<a name="l5017"><span class="linenum">5017</span></a>                  value: attr.height || Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(self.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), 'height'),
<a name="l5018"><span class="linenum">5018</span></a>                  method: function(height) {
<a name="l5019"><span class="linenum">5019</span></a>                      if (this._rendered) {
<a name="l5020"><span class="linenum">5020</span></a>  <span class="comment">                        //We have been rendered, change the height</span>
<a name="l5021"><span class="linenum">5021</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('animate')) {
<a name="l5022"><span class="linenum">5022</span></a>                              var anim = new YAHOO.util.Anim(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode'), {
<a name="l5023"><span class="linenum">5023</span></a>                                  height: {
<a name="l5024"><span class="linenum">5024</span></a>                                      to: parseInt(height, 10)
<a name="l5025"><span class="linenum">5025</span></a>                                  }
<a name="l5026"><span class="linenum">5026</span></a>                              }, 0.5);
<a name="l5027"><span class="linenum">5027</span></a>                              anim.animate();
<a name="l5028"><span class="linenum">5028</span></a>                          } else {
<a name="l5029"><span class="linenum">5029</span></a>                              Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode'), 'height', height);
<a name="l5030"><span class="linenum">5030</span></a>                          }
<a name="l5031"><span class="linenum">5031</span></a>                      }
<a name="l5032"><span class="linenum">5032</span></a>                  }
<a name="l5033"><span class="linenum">5033</span></a>              });
<a name="l5034"><span class="linenum">5034</span></a>              <span class="comment">/**</span>
<a name="l5035"><span class="linenum">5035</span></a>  <span class="comment">            * @config autoHeight</span>
<a name="l5036"><span class="linenum">5036</span></a>  <span class="comment">            * @description Remove the scrollbars from the edit area and resize it to fit the content. It will not go any lower than the current config height.</span>
<a name="l5037"><span class="linenum">5037</span></a>  <span class="comment">            * @default false</span>
<a name="l5038"><span class="linenum">5038</span></a>  <span class="comment">            * @type Boolean || Number</span>
<a name="l5039"><span class="linenum">5039</span></a>  <span class="comment">            */</span>
<a name="l5040"><span class="linenum">5040</span></a>              this.setAttributeConfig('autoHeight', {
<a name="l5041"><span class="linenum">5041</span></a>                  value: attr.autoHeight || false,
<a name="l5042"><span class="linenum">5042</span></a>                  method: function(a) {
<a name="l5043"><span class="linenum">5043</span></a>                      if (a) {
<a name="l5044"><span class="linenum">5044</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe')) {
<a name="l5045"><span class="linenum">5045</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('scrolling', 'no');
<a name="l5046"><span class="linenum">5046</span></a>                          }
<a name="l5047"><span class="linenum">5047</span></a>                          this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterNodeChange', this._handleAutoHeight, this, true);
<a name="l5048"><span class="linenum">5048</span></a>                          this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('editorKeyDown', this._handleAutoHeight, this, true);
<a name="l5049"><span class="linenum">5049</span></a>                          this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('editorKeyPress', this._handleAutoHeight, this, true);
<a name="l5050"><span class="linenum">5050</span></a>                      } else {
<a name="l5051"><span class="linenum">5051</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe')) {
<a name="l5052"><span class="linenum">5052</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('scrolling', 'auto');
<a name="l5053"><span class="linenum">5053</span></a>                          }
<a name="l5054"><span class="linenum">5054</span></a>                          this.unsubscribe('afterNodeChange', this._handleAutoHeight);
<a name="l5055"><span class="linenum">5055</span></a>                          this.unsubscribe('editorKeyDown', this._handleAutoHeight);
<a name="l5056"><span class="linenum">5056</span></a>                          this.unsubscribe('editorKeyPress', this._handleAutoHeight);
<a name="l5057"><span class="linenum">5057</span></a>                      }
<a name="l5058"><span class="linenum">5058</span></a>                  }
<a name="l5059"><span class="linenum">5059</span></a>              });
<a name="l5060"><span class="linenum">5060</span></a>              <span class="comment">/**</span>
<a name="l5061"><span class="linenum">5061</span></a>  <span class="comment">            * @attribute width</span>
<a name="l5062"><span class="linenum">5062</span></a>  <span class="comment">            * @description The width of the editor container.</span>
<a name="l5063"><span class="linenum">5063</span></a>  <span class="comment">            * @default Best guessed size of the textarea, for best results use CSS to style the width of the textarea or pass it in as an argument</span>
<a name="l5064"><span class="linenum">5064</span></a>  <span class="comment">            * @type String</span>
<a name="l5065"><span class="linenum">5065</span></a>  <span class="comment">            */</span>            
<a name="l5066"><span class="linenum">5066</span></a>              this.setAttributeConfig('width', {
<a name="l5067"><span class="linenum">5067</span></a>                  value: attr.width || Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), 'width'),
<a name="l5068"><span class="linenum">5068</span></a>                  method: function(width) {
<a name="l5069"><span class="linenum">5069</span></a>                      if (this._rendered) {
<a name="l5070"><span class="linenum">5070</span></a>  <span class="comment">                        //We have been rendered, change the width</span>
<a name="l5071"><span class="linenum">5071</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('animate')) {
<a name="l5072"><span class="linenum">5072</span></a>                              var anim = new YAHOO.util.Anim(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), {
<a name="l5073"><span class="linenum">5073</span></a>                                  width: {
<a name="l5074"><span class="linenum">5074</span></a>                                      to: parseInt(width, 10)
<a name="l5075"><span class="linenum">5075</span></a>                                  }
<a name="l5076"><span class="linenum">5076</span></a>                              }, 0.5);
<a name="l5077"><span class="linenum">5077</span></a>                              anim.animate();
<a name="l5078"><span class="linenum">5078</span></a>                          } else {
<a name="l5079"><span class="linenum">5079</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('width', width);
<a name="l5080"><span class="linenum">5080</span></a>                          }
<a name="l5081"><span class="linenum">5081</span></a>                      }
<a name="l5082"><span class="linenum">5082</span></a>                  }
<a name="l5083"><span class="linenum">5083</span></a>              });
<a name="l5084"><span class="linenum">5084</span></a>                          
<a name="l5085"><span class="linenum">5085</span></a>              <span class="comment">/**</span>
<a name="l5086"><span class="linenum">5086</span></a>  <span class="comment">            * @attribute blankimage</span>
<a name="l5087"><span class="linenum">5087</span></a>  <span class="comment">            * @description The URL for the image placeholder to put in when inserting an image.</span>
<a name="l5088"><span class="linenum">5088</span></a>  <span class="comment">            * @default The yahooapis.com address for the current release + 'assets/blankimage.png'</span>
<a name="l5089"><span class="linenum">5089</span></a>  <span class="comment">            * @type String</span>
<a name="l5090"><span class="linenum">5090</span></a>  <span class="comment">            */</span>            
<a name="l5091"><span class="linenum">5091</span></a>              this.setAttributeConfig('blankimage', {
<a name="l5092"><span class="linenum">5092</span></a>                  value: attr.blankimage || this._getBlankImage()
<a name="l5093"><span class="linenum">5093</span></a>              });
<a name="l5094"><span class="linenum">5094</span></a>              <span class="comment">/**</span>
<a name="l5095"><span class="linenum">5095</span></a>  <span class="comment">            * @attribute css</span>
<a name="l5096"><span class="linenum">5096</span></a>  <span class="comment">            * @description The Base CSS used to format the content of the editor</span>
<a name="l5097"><span class="linenum">5097</span></a>  <span class="comment">            * @default &lt;code&gt;&lt;pre&gt;html {</span>
<a name="l5098"><span class="linenum">5098</span></a>  <span class="comment">                height: 95%;</span>
<a name="l5099"><span class="linenum">5099</span></a>  <span class="comment">            }</span>
<a name="l5100"><span class="linenum">5100</span></a>  <span class="comment">            body {</span>
<a name="l5101"><span class="linenum">5101</span></a>  <span class="comment">                height: 100%;</span>
<a name="l5102"><span class="linenum">5102</span></a>  <span class="comment">                padding: 7px; background-color: #fff; font:13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;</span>
<a name="l5103"><span class="linenum">5103</span></a>  <span class="comment">            }</span>
<a name="l5104"><span class="linenum">5104</span></a>  <span class="comment">            a {</span>
<a name="l5105"><span class="linenum">5105</span></a>  <span class="comment">                color: blue;</span>
<a name="l5106"><span class="linenum">5106</span></a>  <span class="comment">                text-decoration: underline;</span>
<a name="l5107"><span class="linenum">5107</span></a>  <span class="comment">                cursor: pointer;</span>
<a name="l5108"><span class="linenum">5108</span></a>  <span class="comment">            }</span>
<a name="l5109"><span class="linenum">5109</span></a>  <span class="comment">            .warning-localfile {</span>
<a name="l5110"><span class="linenum">5110</span></a>  <span class="comment">                border-bottom: 1px dashed red !important;</span>
<a name="l5111"><span class="linenum">5111</span></a>  <span class="comment">            }</span>
<a name="l5112"><span class="linenum">5112</span></a>  <span class="comment">            .yui-busy {</span>
<a name="l5113"><span class="linenum">5113</span></a>  <span class="comment">                cursor: wait !important;</span>
<a name="l5114"><span class="linenum">5114</span></a>  <span class="comment">            }</span>
<a name="l5115"><span class="linenum">5115</span></a>  <span class="comment">            img.selected { //Safari image selection</span>
<a name="l5116"><span class="linenum">5116</span></a>  <span class="comment">                border: 2px dotted #808080;</span>
<a name="l5117"><span class="linenum">5117</span></a>  <span class="comment">            }</span>
<a name="l5118"><span class="linenum">5118</span></a>  <span class="comment">            img {</span>
<a name="l5119"><span class="linenum">5119</span></a>  <span class="comment">                cursor: pointer !important;</span>
<a name="l5120"><span class="linenum">5120</span></a>  <span class="comment">                border: none;</span>
<a name="l5121"><span class="linenum">5121</span></a>  <span class="comment">            }</span>
<a name="l5122"><span class="linenum">5122</span></a>  <span class="comment">            &lt;/pre&gt;&lt;/code&gt;</span>
<a name="l5123"><span class="linenum">5123</span></a>  <span class="comment">            * @type String</span>
<a name="l5124"><span class="linenum">5124</span></a>  <span class="comment">            */</span>            
<a name="l5125"><span class="linenum">5125</span></a>              this.setAttributeConfig('css', {
<a name="l5126"><span class="linenum">5126</span></a>                  value: attr.css || this._defaultCSS,
<a name="l5127"><span class="linenum">5127</span></a>                  writeOnce: true
<a name="l5128"><span class="linenum">5128</span></a>              });
<a name="l5129"><span class="linenum">5129</span></a>              <span class="comment">/**</span>
<a name="l5130"><span class="linenum">5130</span></a>  <span class="comment">            * @attribute html</span>
<a name="l5131"><span class="linenum">5131</span></a>  <span class="comment">            * @description The default HTML to be written to the iframe document before the contents are loaded (Note that the DOCTYPE attr will be added at render item)</span>
<a name="l5132"><span class="linenum">5132</span></a>  <span class="comment">            * @default This HTML requires a few things if you are to override:</span>
<a name="l5133"><span class="linenum">5133</span></a>  <span class="comment">                &lt;p&gt;&lt;code&gt;{TITLE}, {CSS}, {HIDDEN_CSS}, {EXTRA_CSS}&lt;/code&gt; and &lt;code&gt;{CONTENT}&lt;/code&gt; need to be there, they are passed to YAHOO.lang.substitute to be replace with other strings.&lt;p&gt;</span>
<a name="l5134"><span class="linenum">5134</span></a>  <span class="comment">                &lt;p&gt;&lt;code&gt;onload=&quot;document.body._rteLoaded = true;&quot;&lt;/code&gt; : the onload statement must be there or the editor will not finish loading.&lt;/p&gt;</span>
<a name="l5135"><span class="linenum">5135</span></a>  <span class="comment">                &lt;code&gt;</span>
<a name="l5136"><span class="linenum">5136</span></a>  <span class="comment">                &lt;pre&gt;</span>
<a name="l5137"><span class="linenum">5137</span></a>  <span class="comment">                &amp;lt;html&amp;gt;</span>
<a name="l5138"><span class="linenum">5138</span></a>  <span class="comment">                    &amp;lt;head&amp;gt;</span>
<a name="l5139"><span class="linenum">5139</span></a>  <span class="comment">                        &amp;lt;title&amp;gt;{TITLE}&amp;lt;/title&amp;gt;</span>
<a name="l5140"><span class="linenum">5140</span></a>  <span class="comment">                        &amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&amp;gt;</span>
<a name="l5141"><span class="linenum">5141</span></a>  <span class="comment">                        &amp;lt;style&amp;gt;</span>
<a name="l5142"><span class="linenum">5142</span></a>  <span class="comment">                        {CSS}</span>
<a name="l5143"><span class="linenum">5143</span></a>  <span class="comment">                        &amp;lt;/style&amp;gt;</span>
<a name="l5144"><span class="linenum">5144</span></a>  <span class="comment">                        &amp;lt;style&amp;gt;</span>
<a name="l5145"><span class="linenum">5145</span></a>  <span class="comment">                        {HIDDEN_CSS}</span>
<a name="l5146"><span class="linenum">5146</span></a>  <span class="comment">                        &amp;lt;/style&amp;gt;</span>
<a name="l5147"><span class="linenum">5147</span></a>  <span class="comment">                        &amp;lt;style&amp;gt;</span>
<a name="l5148"><span class="linenum">5148</span></a>  <span class="comment">                        {EXTRA_CSS}</span>
<a name="l5149"><span class="linenum">5149</span></a>  <span class="comment">                        &amp;lt;/style&amp;gt;</span>
<a name="l5150"><span class="linenum">5150</span></a>  <span class="comment">                    &amp;lt;/head&amp;gt;</span>
<a name="l5151"><span class="linenum">5151</span></a>  <span class="comment">                &amp;lt;body onload=&quot;document.body._rteLoaded = true;&quot;&amp;gt;</span>
<a name="l5152"><span class="linenum">5152</span></a>  <span class="comment">                {CONTENT}</span>
<a name="l5153"><span class="linenum">5153</span></a>  <span class="comment">                &amp;lt;/body&amp;gt;</span>
<a name="l5154"><span class="linenum">5154</span></a>  <span class="comment">                &amp;lt;/html&amp;gt;</span>
<a name="l5155"><span class="linenum">5155</span></a>  <span class="comment">                &lt;/pre&gt;</span>
<a name="l5156"><span class="linenum">5156</span></a>  <span class="comment">                &lt;/code&gt;</span>
<a name="l5157"><span class="linenum">5157</span></a>  <span class="comment">            * @type String</span>
<a name="l5158"><span class="linenum">5158</span></a>  <span class="comment">            */</span>            
<a name="l5159"><span class="linenum">5159</span></a>              this.setAttributeConfig('html', {
<a name="l5160"><span class="linenum">5160</span></a>                  value: attr.html || '&lt;html&gt;&lt;head&gt;&lt;title&gt;{TITLE}&lt;/title&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;base href=&quot;' + this._baseHREF + '&quot;&gt;&lt;style&gt;{CSS}&lt;/style&gt;&lt;style&gt;{HIDDEN_CSS}&lt;/style&gt;&lt;style&gt;{EXTRA_CSS}&lt;/style&gt;&lt;/head&gt;&lt;body onload=&quot;document.body._rteLoaded = true;&quot;&gt;{CONTENT}&lt;/body&gt;&lt;/html&gt;',
<a name="l5161"><span class="linenum">5161</span></a>                  writeOnce: true
<a name="l5162"><span class="linenum">5162</span></a>              });
<a name="l5163"><span class="linenum">5163</span></a>  
<a name="l5164"><span class="linenum">5164</span></a>              <span class="comment">/**</span>
<a name="l5165"><span class="linenum">5165</span></a>  <span class="comment">            * @attribute extracss</span>
<a name="l5166"><span class="linenum">5166</span></a>  <span class="comment">            * @description Extra user defined css to load after the default SimpleEditor CSS</span>
<a name="l5167"><span class="linenum">5167</span></a>  <span class="comment">            * @default ''</span>
<a name="l5168"><span class="linenum">5168</span></a>  <span class="comment">            * @type String</span>
<a name="l5169"><span class="linenum">5169</span></a>  <span class="comment">            */</span>            
<a name="l5170"><span class="linenum">5170</span></a>              this.setAttributeConfig('extracss', {
<a name="l5171"><span class="linenum">5171</span></a>                  value: attr.extracss || '',
<a name="l5172"><span class="linenum">5172</span></a>                  writeOnce: true
<a name="l5173"><span class="linenum">5173</span></a>              });
<a name="l5174"><span class="linenum">5174</span></a>  
<a name="l5175"><span class="linenum">5175</span></a>              <span class="comment">/**</span>
<a name="l5176"><span class="linenum">5176</span></a>  <span class="comment">            * @attribute handleSubmit</span>
<a name="l5177"><span class="linenum">5177</span></a>  <span class="comment">            * @description Config handles if the editor will attach itself to the textareas parent form's submit handler.</span>
<a name="l5178"><span class="linenum">5178</span></a>  <span class="comment">            If it is set to true, the editor will attempt to attach a submit listener to the textareas parent form.</span>
<a name="l5179"><span class="linenum">5179</span></a>  <span class="comment">            Then it will trigger the editors save handler and place the new content back into the text area before the form is submitted.</span>
<a name="l5180"><span class="linenum">5180</span></a>  <span class="comment">            * @default false</span>
<a name="l5181"><span class="linenum">5181</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5182"><span class="linenum">5182</span></a>  <span class="comment">            */</span>            
<a name="l5183"><span class="linenum">5183</span></a>              this.setAttributeConfig('handleSubmit', {
<a name="l5184"><span class="linenum">5184</span></a>                  value: attr.handleSubmit || false,
<a name="l5185"><span class="linenum">5185</span></a>                  method: function(exec) {
<a name="l5186"><span class="linenum">5186</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form) {
<a name="l5187"><span class="linenum">5187</span></a>                          if (!this._formButtons) {
<a name="l5188"><span class="linenum">5188</span></a>                              this._formButtons = [];
<a name="l5189"><span class="linenum">5189</span></a>                          }
<a name="l5190"><span class="linenum">5190</span></a>                          if (exec) {
<a name="l5191"><span class="linenum">5191</span></a>                              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form, 'submit', this._handleFormSubmit, this, true);
<a name="l5192"><span class="linenum">5192</span></a>                              var i = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form.getElementsByTagName('input');
<a name="l5193"><span class="linenum">5193</span></a>                              for (var s = 0; s &lt; i.length; s++) {
<a name="l5194"><span class="linenum">5194</span></a>                                  var type = i[s].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('type');
<a name="l5195"><span class="linenum">5195</span></a>                                  if (type &amp;&amp; (type.toLowerCase() == 'submit')) {
<a name="l5196"><span class="linenum">5196</span></a>                                      Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(i[s], 'click', this._handleFormButtonClick, this, true);
<a name="l5197"><span class="linenum">5197</span></a>                                      this._formButtons[this._formButtons.length] = i[s];
<a name="l5198"><span class="linenum">5198</span></a>                                  }
<a name="l5199"><span class="linenum">5199</span></a>                              }
<a name="l5200"><span class="linenum">5200</span></a>                          } else {
<a name="l5201"><span class="linenum">5201</span></a>                              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form, 'submit', this._handleFormSubmit);
<a name="l5202"><span class="linenum">5202</span></a>                              if (this._formButtons) {
<a name="l5203"><span class="linenum">5203</span></a>                                  Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(this._formButtons, 'click', this._handleFormButtonClick);
<a name="l5204"><span class="linenum">5204</span></a>                              }
<a name="l5205"><span class="linenum">5205</span></a>                          }
<a name="l5206"><span class="linenum">5206</span></a>                      }
<a name="l5207"><span class="linenum">5207</span></a>                  }
<a name="l5208"><span class="linenum">5208</span></a>              });
<a name="l5209"><span class="linenum">5209</span></a>              <span class="comment">/**</span>
<a name="l5210"><span class="linenum">5210</span></a>  <span class="comment">            * @attribute disabled</span>
<a name="l5211"><span class="linenum">5211</span></a>  <span class="comment">            * @description This will toggle the editor's disabled state. When the editor is disabled, designMode is turned off and a mask is placed over the iframe so no interaction can take place.</span>
<a name="l5212"><span class="linenum">5212</span></a>  <span class="comment">            All Toolbar buttons are also disabled so they cannot be used.</span>
<a name="l5213"><span class="linenum">5213</span></a>  <span class="comment">            * @default false</span>
<a name="l5214"><span class="linenum">5214</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5215"><span class="linenum">5215</span></a>  <span class="comment">            */</span>
<a name="l5216"><span class="linenum">5216</span></a>  
<a name="l5217"><span class="linenum">5217</span></a>              this.setAttributeConfig('disabled', {
<a name="l5218"><span class="linenum">5218</span></a>                  value: false,
<a name="l5219"><span class="linenum">5219</span></a>                  method: function(disabled) {
<a name="l5220"><span class="linenum">5220</span></a>                      if (this._rendered) {
<a name="l5221"><span class="linenum">5221</span></a>                          this._disableEditor(disabled);
<a name="l5222"><span class="linenum">5222</span></a>                      }
<a name="l5223"><span class="linenum">5223</span></a>                  }
<a name="l5224"><span class="linenum">5224</span></a>              });
<a name="l5225"><span class="linenum">5225</span></a>              <span class="comment">/**</span>
<a name="l5226"><span class="linenum">5226</span></a>  <span class="comment">            * @config saveEl</span>
<a name="l5227"><span class="linenum">5227</span></a>  <span class="comment">            * @description When save HTML is called, this element will be updated as well as the source of data.</span>
<a name="l5228"><span class="linenum">5228</span></a>  <span class="comment">            * @default element</span>
<a name="l5229"><span class="linenum">5229</span></a>  <span class="comment">            * @type HTMLElement</span>
<a name="l5230"><span class="linenum">5230</span></a>  <span class="comment">            */</span>
<a name="l5231"><span class="linenum">5231</span></a>              this.setAttributeConfig('saveEl', {
<a name="l5232"><span class="linenum">5232</span></a>                  value: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')
<a name="l5233"><span class="linenum">5233</span></a>              });
<a name="l5234"><span class="linenum">5234</span></a>              <span class="comment">/**</span>
<a name="l5235"><span class="linenum">5235</span></a>  <span class="comment">            * @config toolbar_cont</span>
<a name="l5236"><span class="linenum">5236</span></a>  <span class="comment">            * @description Internal config for the toolbars container</span>
<a name="l5237"><span class="linenum">5237</span></a>  <span class="comment">            * @default false</span>
<a name="l5238"><span class="linenum">5238</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5239"><span class="linenum">5239</span></a>  <span class="comment">            */</span>
<a name="l5240"><span class="linenum">5240</span></a>              this.setAttributeConfig('toolbar_cont', {
<a name="l5241"><span class="linenum">5241</span></a>                  value: null,
<a name="l5242"><span class="linenum">5242</span></a>                  writeOnce: true
<a name="l5243"><span class="linenum">5243</span></a>              });
<a name="l5244"><span class="linenum">5244</span></a>              <span class="comment">/**</span>
<a name="l5245"><span class="linenum">5245</span></a>  <span class="comment">            * @attribute toolbar</span>
<a name="l5246"><span class="linenum">5246</span></a>  <span class="comment">            * @description The default toolbar config.</span>
<a name="l5247"><span class="linenum">5247</span></a>  <span class="comment">            * @type Object</span>
<a name="l5248"><span class="linenum">5248</span></a>  <span class="comment">            */</span>            
<a name="l5249"><span class="linenum">5249</span></a>              this.setAttributeConfig('toolbar', {
<a name="l5250"><span class="linenum">5250</span></a>                  value: attr.toolbar || this._defaultToolbar,
<a name="l5251"><span class="linenum">5251</span></a>                  writeOnce: true,
<a name="l5252"><span class="linenum">5252</span></a>                  method: function(toolbar) {
<a name="l5253"><span class="linenum">5253</span></a>                      if (!toolbar.buttonType) {
<a name="l5254"><span class="linenum">5254</span></a>                          toolbar.buttonType = this._defaultToolbar.buttonType;
<a name="l5255"><span class="linenum">5255</span></a>                      }
<a name="l5256"><span class="linenum">5256</span></a>                      this._defaultToolbar = toolbar;
<a name="l5257"><span class="linenum">5257</span></a>                  }
<a name="l5258"><span class="linenum">5258</span></a>              });
<a name="l5259"><span class="linenum">5259</span></a>              <span class="comment">/**</span>
<a name="l5260"><span class="linenum">5260</span></a>  <span class="comment">            * @attribute animate</span>
<a name="l5261"><span class="linenum">5261</span></a>  <span class="comment">            * @description Should the editor animate window movements</span>
<a name="l5262"><span class="linenum">5262</span></a>  <span class="comment">            * @default false unless Animation is found, then true</span>
<a name="l5263"><span class="linenum">5263</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5264"><span class="linenum">5264</span></a>  <span class="comment">            */</span>            
<a name="l5265"><span class="linenum">5265</span></a>              this.setAttributeConfig('animate', {
<a name="l5266"><span class="linenum">5266</span></a>                  value: ((attr.animate) ? ((YAHOO.util.Anim) ? true : false) : false),
<a name="l5267"><span class="linenum">5267</span></a>                  validator: function(value) {
<a name="l5268"><span class="linenum">5268</span></a>                      var ret = true;
<a name="l5269"><span class="linenum">5269</span></a>                      if (!YAHOO.util.Anim) {
<a name="l5270"><span class="linenum">5270</span></a>                          ret = false;
<a name="l5271"><span class="linenum">5271</span></a>                      }
<a name="l5272"><span class="linenum">5272</span></a>                      return ret;
<a name="l5273"><span class="linenum">5273</span></a>                  }
<a name="l5274"><span class="linenum">5274</span></a>              });
<a name="l5275"><span class="linenum">5275</span></a>              <span class="comment">/**</span>
<a name="l5276"><span class="linenum">5276</span></a>  <span class="comment">            * @config panel</span>
<a name="l5277"><span class="linenum">5277</span></a>  <span class="comment">            * @description A reference to the panel we are using for windows.</span>
<a name="l5278"><span class="linenum">5278</span></a>  <span class="comment">            * @default false</span>
<a name="l5279"><span class="linenum">5279</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5280"><span class="linenum">5280</span></a>  <span class="comment">            */</span>            
<a name="l5281"><span class="linenum">5281</span></a>              this.setAttributeConfig('panel', {
<a name="l5282"><span class="linenum">5282</span></a>                  value: null,
<a name="l5283"><span class="linenum">5283</span></a>                  writeOnce: true,
<a name="l5284"><span class="linenum">5284</span></a>                  validator: function(value) {
<a name="l5285"><span class="linenum">5285</span></a>                      var ret = true;
<a name="l5286"><span class="linenum">5286</span></a>                      if (!YAHOO.widget.Overlay) {
<a name="l5287"><span class="linenum">5287</span></a>                          ret = false;
<a name="l5288"><span class="linenum">5288</span></a>                      }
<a name="l5289"><span class="linenum">5289</span></a>                      return ret;
<a name="l5290"><span class="linenum">5290</span></a>                  }               
<a name="l5291"><span class="linenum">5291</span></a>              });
<a name="l5292"><span class="linenum">5292</span></a>              <span class="comment">/**</span>
<a name="l5293"><span class="linenum">5293</span></a>  <span class="comment">            * @attribute focusAtStart</span>
<a name="l5294"><span class="linenum">5294</span></a>  <span class="comment">            * @description Should we focus the window when the content is ready?</span>
<a name="l5295"><span class="linenum">5295</span></a>  <span class="comment">            * @default false</span>
<a name="l5296"><span class="linenum">5296</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5297"><span class="linenum">5297</span></a>  <span class="comment">            */</span>            
<a name="l5298"><span class="linenum">5298</span></a>              this.setAttributeConfig('focusAtStart', {
<a name="l5299"><span class="linenum">5299</span></a>                  value: attr.focusAtStart || false,
<a name="l5300"><span class="linenum">5300</span></a>                  writeOnce: true,
<a name="l5301"><span class="linenum">5301</span></a>                  method: function(fs) {
<a name="l5302"><span class="linenum">5302</span></a>                      if (fs) {
<a name="l5303"><span class="linenum">5303</span></a>                          this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('editorContentLoaded', function() {
<a name="l5304"><span class="linenum">5304</span></a>                              var self = this;
<a name="l5305"><span class="linenum">5305</span></a>                              <a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l5306"><span class="linenum">5306</span></a>                                  self.focus.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l5307"><span class="linenum">5307</span></a>                                  self.editorDirty = false;
<a name="l5308"><span class="linenum">5308</span></a>                              }, 400);
<a name="l5309"><span class="linenum">5309</span></a>                          }, this, true);
<a name="l5310"><span class="linenum">5310</span></a>                      }
<a name="l5311"><span class="linenum">5311</span></a>                  }
<a name="l5312"><span class="linenum">5312</span></a>              });
<a name="l5313"><span class="linenum">5313</span></a>              <span class="comment">/**</span>
<a name="l5314"><span class="linenum">5314</span></a>  <span class="comment">            * @attribute dompath</span>
<a name="l5315"><span class="linenum">5315</span></a>  <span class="comment">            * @description Toggle the display of the current Dom path below the editor</span>
<a name="l5316"><span class="linenum">5316</span></a>  <span class="comment">            * @default false</span>
<a name="l5317"><span class="linenum">5317</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5318"><span class="linenum">5318</span></a>  <span class="comment">            */</span>            
<a name="l5319"><span class="linenum">5319</span></a>              this.setAttributeConfig('dompath', {
<a name="l5320"><span class="linenum">5320</span></a>                  value: attr.dompath || false,
<a name="l5321"><span class="linenum">5321</span></a>                  method: function(dompath) {
<a name="l5322"><span class="linenum">5322</span></a>                      if (dompath &amp;&amp; !this.dompath) {
<a name="l5323"><span class="linenum">5323</span></a>                          this.dompath = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('DIV');
<a name="l5324"><span class="linenum">5324</span></a>                          this.dompath.id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_dompath';
<a name="l5325"><span class="linenum">5325</span></a>                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.dompath, 'dompath');
<a name="l5326"><span class="linenum">5326</span></a>                          this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild').appendChild(this.dompath);
<a name="l5327"><span class="linenum">5327</span></a>                          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe')) {
<a name="l5328"><span class="linenum">5328</span></a>                              this._writeDomPath();
<a name="l5329"><span class="linenum">5329</span></a>                          }
<a name="l5330"><span class="linenum">5330</span></a>                      } else if (!dompath &amp;&amp; this.dompath) {
<a name="l5331"><span class="linenum">5331</span></a>                          this.dompath.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this.dompath);
<a name="l5332"><span class="linenum">5332</span></a>                          this.dompath = null;
<a name="l5333"><span class="linenum">5333</span></a>                      }
<a name="l5334"><span class="linenum">5334</span></a>                  }
<a name="l5335"><span class="linenum">5335</span></a>              });
<a name="l5336"><span class="linenum">5336</span></a>              <span class="comment">/**</span>
<a name="l5337"><span class="linenum">5337</span></a>  <span class="comment">            * @attribute markup</span>
<a name="l5338"><span class="linenum">5338</span></a>  <span class="comment">            * @description Should we try to adjust the markup for the following types: semantic, css, default or xhtml</span>
<a name="l5339"><span class="linenum">5339</span></a>  <span class="comment">            * @default &quot;semantic&quot;</span>
<a name="l5340"><span class="linenum">5340</span></a>  <span class="comment">            * @type String</span>
<a name="l5341"><span class="linenum">5341</span></a>  <span class="comment">            */</span>            
<a name="l5342"><span class="linenum">5342</span></a>              this.setAttributeConfig('markup', {
<a name="l5343"><span class="linenum">5343</span></a>                  value: attr.markup || 'semantic',
<a name="l5344"><span class="linenum">5344</span></a>                  validator: function(markup) {
<a name="l5345"><span class="linenum">5345</span></a>                      switch (markup.toLowerCase()) {
<a name="l5346"><span class="linenum">5346</span></a>                          case 'semantic':
<a name="l5347"><span class="linenum">5347</span></a>                          case 'css':
<a name="l5348"><span class="linenum">5348</span></a>                          case 'default':
<a name="l5349"><span class="linenum">5349</span></a>                          case 'xhtml':
<a name="l5350"><span class="linenum">5350</span></a>                          return true;
<a name="l5351"><span class="linenum">5351</span></a>                      }
<a name="l5352"><span class="linenum">5352</span></a>                      return false;
<a name="l5353"><span class="linenum">5353</span></a>                  }
<a name="l5354"><span class="linenum">5354</span></a>              });
<a name="l5355"><span class="linenum">5355</span></a>              <span class="comment">/**</span>
<a name="l5356"><span class="linenum">5356</span></a>  <span class="comment">            * @attribute removeLineBreaks</span>
<a name="l5357"><span class="linenum">5357</span></a>  <span class="comment">            * @description Should we remove linebreaks and extra spaces on cleanup</span>
<a name="l5358"><span class="linenum">5358</span></a>  <span class="comment">            * @default false</span>
<a name="l5359"><span class="linenum">5359</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5360"><span class="linenum">5360</span></a>  <span class="comment">            */</span>            
<a name="l5361"><span class="linenum">5361</span></a>              this.setAttributeConfig('removeLineBreaks', {
<a name="l5362"><span class="linenum">5362</span></a>                  value: attr.removeLineBreaks || false,
<a name="l5363"><span class="linenum">5363</span></a>                  validator: YAHOO.lang.isBoolean
<a name="l5364"><span class="linenum">5364</span></a>              });
<a name="l5365"><span class="linenum">5365</span></a>              
<a name="l5366"><span class="linenum">5366</span></a>              <span class="comment">/**</span>
<a name="l5367"><span class="linenum">5367</span></a>  <span class="comment">            * @config drag</span>
<a name="l5368"><span class="linenum">5368</span></a>  <span class="comment">            * @description Set this config to make the Editor draggable, pass 'proxy' to make use YAHOO.util.DDProxy.</span>
<a name="l5369"><span class="linenum">5369</span></a>  <span class="comment">            * @type {Boolean/String}</span>
<a name="l5370"><span class="linenum">5370</span></a>  <span class="comment">            */</span>
<a name="l5371"><span class="linenum">5371</span></a>              this.setAttributeConfig('drag', {
<a name="l5372"><span class="linenum">5372</span></a>                  writeOnce: true,
<a name="l5373"><span class="linenum">5373</span></a>                  value: attr.drag || false
<a name="l5374"><span class="linenum">5374</span></a>              });
<a name="l5375"><span class="linenum">5375</span></a>  
<a name="l5376"><span class="linenum">5376</span></a>              <span class="comment">/**</span>
<a name="l5377"><span class="linenum">5377</span></a>  <span class="comment">            * @config resize</span>
<a name="l5378"><span class="linenum">5378</span></a>  <span class="comment">            * @description Set this to true to make the Editor Resizable with YAHOO.util.Resize. The default config is available: myEditor._resizeConfig</span>
<a name="l5379"><span class="linenum">5379</span></a>  <span class="comment">            * Animation will be ignored while performing this resize to allow for the dynamic change in size of the toolbar.</span>
<a name="l5380"><span class="linenum">5380</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5381"><span class="linenum">5381</span></a>  <span class="comment">            */</span>
<a name="l5382"><span class="linenum">5382</span></a>              this.setAttributeConfig('resize', {
<a name="l5383"><span class="linenum">5383</span></a>                  writeOnce: true,
<a name="l5384"><span class="linenum">5384</span></a>                  value: attr.resize || false
<a name="l5385"><span class="linenum">5385</span></a>              });
<a name="l5386"><span class="linenum">5386</span></a>  
<a name="l5387"><span class="linenum">5387</span></a>              <span class="comment">/**</span>
<a name="l5388"><span class="linenum">5388</span></a>  <span class="comment">            * @config filterWord</span>
<a name="l5389"><span class="linenum">5389</span></a>  <span class="comment">            * @description Attempt to filter out MS Word HTML from the Editor's output.</span>
<a name="l5390"><span class="linenum">5390</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l5391"><span class="linenum">5391</span></a>  <span class="comment">            */</span>
<a name="l5392"><span class="linenum">5392</span></a>              this.setAttributeConfig('filterWord', {
<a name="l5393"><span class="linenum">5393</span></a>                  value: attr.filterWord || false,
<a name="l5394"><span class="linenum">5394</span></a>                  validator: YAHOO.lang.isBoolean
<a name="l5395"><span class="linenum">5395</span></a>              });
<a name="l5396"><span class="linenum">5396</span></a>  
<a name="l5397"><span class="linenum">5397</span></a>          },
<a name="l5398"><span class="linenum">5398</span></a>          <span class="comment">/**</span>
<a name="l5399"><span class="linenum">5399</span></a>  <span class="comment">        * @private</span>
<a name="l5400"><span class="linenum">5400</span></a>  <span class="comment">        * @method _getBlankImage</span>
<a name="l5401"><span class="linenum">5401</span></a>  <span class="comment">        * @description Retrieves the full url of the image to use as the blank image.</span>
<a name="l5402"><span class="linenum">5402</span></a>  <span class="comment">        * @return {String} The URL to the blank image</span>
<a name="l5403"><span class="linenum">5403</span></a>  <span class="comment">        */</span>
<a name="l5404"><span class="linenum">5404</span></a>          _getBlankImage: function() {
<a name="l5405"><span class="linenum">5405</span></a>              if (!this.DOMReady) {
<a name="l5406"><span class="linenum">5406</span></a>                  this._queue[this._queue.length] = ['_getBlankImage', arguments];
<a name="l5407"><span class="linenum">5407</span></a>                  return '';
<a name="l5408"><span class="linenum">5408</span></a>              }
<a name="l5409"><span class="linenum">5409</span></a>              var img = '';
<a name="l5410"><span class="linenum">5410</span></a>              if (!this._blankImageLoaded) {
<a name="l5411"><span class="linenum">5411</span></a>                  if (YAHOO.widget.EditorInfo.blankImage) {
<a name="l5412"><span class="linenum">5412</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('blankimage', YAHOO.widget.EditorInfo.blankImage);
<a name="l5413"><span class="linenum">5413</span></a>                      this._blankImageLoaded = true;
<a name="l5414"><span class="linenum">5414</span></a>                  } else {
<a name="l5415"><span class="linenum">5415</span></a>                      var div = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l5416"><span class="linenum">5416</span></a>                      div.style.position = 'absolute';
<a name="l5417"><span class="linenum">5417</span></a>                      div.style.top = '-9999px';
<a name="l5418"><span class="linenum">5418</span></a>                      div.style.left = '-9999px';
<a name="l5419"><span class="linenum">5419</span></a>                      div.className = this.CLASS_PREFIX + '-blankimage';
<a name="l5420"><span class="linenum">5420</span></a>                      document.body.appendChild(div);
<a name="l5421"><span class="linenum">5421</span></a>                      img = YAHOO.util.Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(div, 'background-image');
<a name="l5422"><span class="linenum">5422</span></a>                      img = img.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>('url(', '').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(')', '').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&quot;/g, '');
<a name="l5423"><span class="linenum">5423</span></a>  <span class="comment">                    //Adobe AIR Code</span>
<a name="l5424"><span class="linenum">5424</span></a>                      img = img.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>('app:/', '');             
<a name="l5425"><span class="linenum">5425</span></a>                      this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('blankimage', img);
<a name="l5426"><span class="linenum">5426</span></a>                      this._blankImageLoaded = true;
<a name="l5427"><span class="linenum">5427</span></a>                      div.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(div);
<a name="l5428"><span class="linenum">5428</span></a>                      YAHOO.widget.EditorInfo.blankImage = img;
<a name="l5429"><span class="linenum">5429</span></a>                  }
<a name="l5430"><span class="linenum">5430</span></a>              } else {
<a name="l5431"><span class="linenum">5431</span></a>                  img = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage');
<a name="l5432"><span class="linenum">5432</span></a>              }
<a name="l5433"><span class="linenum">5433</span></a>              return img;
<a name="l5434"><span class="linenum">5434</span></a>          },
<a name="l5435"><span class="linenum">5435</span></a>          <span class="comment">/**</span>
<a name="l5436"><span class="linenum">5436</span></a>  <span class="comment">        * @private</span>
<a name="l5437"><span class="linenum">5437</span></a>  <span class="comment">        * @method _handleAutoHeight</span>
<a name="l5438"><span class="linenum">5438</span></a>  <span class="comment">        * @description Handles resizing the editor's height based on the content</span>
<a name="l5439"><span class="linenum">5439</span></a>  <span class="comment">        */</span>
<a name="l5440"><span class="linenum">5440</span></a>          _handleAutoHeight: function() {
<a name="l5441"><span class="linenum">5441</span></a>              var doc = this._getDoc(),
<a name="l5442"><span class="linenum">5442</span></a>                  body = doc.body,
<a name="l5443"><span class="linenum">5443</span></a>                  docEl = doc.documentElement;
<a name="l5444"><span class="linenum">5444</span></a>  
<a name="l5445"><span class="linenum">5445</span></a>              var height = parseInt(Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('editor_wrapper'), 'height'), 10);
<a name="l5446"><span class="linenum">5446</span></a>              var newHeight = body.scrollHeight;
<a name="l5447"><span class="linenum">5447</span></a>              if (this.browser.webkit) {
<a name="l5448"><span class="linenum">5448</span></a>                  newHeight = docEl.scrollHeight;
<a name="l5449"><span class="linenum">5449</span></a>              }
<a name="l5450"><span class="linenum">5450</span></a>              if (newHeight &lt; parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('height'), 10)) {
<a name="l5451"><span class="linenum">5451</span></a>                  newHeight = parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('height'), 10);
<a name="l5452"><span class="linenum">5452</span></a>              }
<a name="l5453"><span class="linenum">5453</span></a>              if ((height != newHeight) &amp;&amp; (newHeight &gt;= parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('height'), 10))) {   
<a name="l5454"><span class="linenum">5454</span></a>                  var anim = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('animate');
<a name="l5455"><span class="linenum">5455</span></a>                  this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('animate', false);
<a name="l5456"><span class="linenum">5456</span></a>                  this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('height', newHeight + 'px');
<a name="l5457"><span class="linenum">5457</span></a>                  this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('animate', anim);
<a name="l5458"><span class="linenum">5458</span></a>                  if (this.browser.ie) {
<a name="l5459"><span class="linenum">5459</span></a>  <span class="comment">                    //Internet Explorer needs this</span>
<a name="l5460"><span class="linenum">5460</span></a>                      this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('height', '99%');
<a name="l5461"><span class="linenum">5461</span></a>                      this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('zoom', '1');
<a name="l5462"><span class="linenum">5462</span></a>                      var self = this;
<a name="l5463"><span class="linenum">5463</span></a>                      window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l5464"><span class="linenum">5464</span></a>                          self.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('height', '100%');
<a name="l5465"><span class="linenum">5465</span></a>                      }, 1);
<a name="l5466"><span class="linenum">5466</span></a>                  }
<a name="l5467"><span class="linenum">5467</span></a>              }
<a name="l5468"><span class="linenum">5468</span></a>          },
<a name="l5469"><span class="linenum">5469</span></a>          <span class="comment">/**</span>
<a name="l5470"><span class="linenum">5470</span></a>  <span class="comment">        * @private</span>
<a name="l5471"><span class="linenum">5471</span></a>  <span class="comment">        * @property _formButtons</span>
<a name="l5472"><span class="linenum">5472</span></a>  <span class="comment">        * @description Array of buttons that are in the Editor's parent form (for handleSubmit)</span>
<a name="l5473"><span class="linenum">5473</span></a>  <span class="comment">        * @type Array</span>
<a name="l5474"><span class="linenum">5474</span></a>  <span class="comment">        */</span>
<a name="l5475"><span class="linenum">5475</span></a>          _formButtons: null,
<a name="l5476"><span class="linenum">5476</span></a>          <span class="comment">/**</span>
<a name="l5477"><span class="linenum">5477</span></a>  <span class="comment">        * @private</span>
<a name="l5478"><span class="linenum">5478</span></a>  <span class="comment">        * @property _formButtonClicked</span>
<a name="l5479"><span class="linenum">5479</span></a>  <span class="comment">        * @description The form button that was clicked to submit the form.</span>
<a name="l5480"><span class="linenum">5480</span></a>  <span class="comment">        * @type HTMLElement</span>
<a name="l5481"><span class="linenum">5481</span></a>  <span class="comment">        */</span>
<a name="l5482"><span class="linenum">5482</span></a>          _formButtonClicked: null,
<a name="l5483"><span class="linenum">5483</span></a>          <span class="comment">/**</span>
<a name="l5484"><span class="linenum">5484</span></a>  <span class="comment">        * @private</span>
<a name="l5485"><span class="linenum">5485</span></a>  <span class="comment">        * @method _handleFormButtonClick</span>
<a name="l5486"><span class="linenum">5486</span></a>  <span class="comment">        * @description The click listener assigned to each submit button in the Editor's parent form.</span>
<a name="l5487"><span class="linenum">5487</span></a>  <span class="comment">        * @param {Event} ev The click event</span>
<a name="l5488"><span class="linenum">5488</span></a>  <span class="comment">        */</span>
<a name="l5489"><span class="linenum">5489</span></a>          _handleFormButtonClick: function(ev) {
<a name="l5490"><span class="linenum">5490</span></a>              var tar = Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(ev);
<a name="l5491"><span class="linenum">5491</span></a>              this._formButtonClicked = tar;
<a name="l5492"><span class="linenum">5492</span></a>          },
<a name="l5493"><span class="linenum">5493</span></a>          <span class="comment">/**</span>
<a name="l5494"><span class="linenum">5494</span></a>  <span class="comment">        * @private</span>
<a name="l5495"><span class="linenum">5495</span></a>  <span class="comment">        * @method _handleFormSubmit</span>
<a name="l5496"><span class="linenum">5496</span></a>  <span class="comment">        * @description Handles the form submission.</span>
<a name="l5497"><span class="linenum">5497</span></a>  <span class="comment">        * @param {Object} ev The Form Submit Event</span>
<a name="l5498"><span class="linenum">5498</span></a>  <span class="comment">        */</span>
<a name="l5499"><span class="linenum">5499</span></a>          _handleFormSubmit: function(ev) {
<a name="l5500"><span class="linenum">5500</span></a>              this.saveHTML();
<a name="l5501"><span class="linenum">5501</span></a>  
<a name="l5502"><span class="linenum">5502</span></a>              var form = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form,
<a name="l5503"><span class="linenum">5503</span></a>                  tar = this._formButtonClicked || false;
<a name="l5504"><span class="linenum">5504</span></a>  
<a name="l5505"><span class="linenum">5505</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(form, 'submit', this._handleFormSubmit);
<a name="l5506"><span class="linenum">5506</span></a>              if (YAHOO.env.ua.ie) {
<a name="l5507"><span class="linenum">5507</span></a>  <span class="comment">                //form.fireEvent(&quot;onsubmit&quot;);</span>
<a name="l5508"><span class="linenum">5508</span></a>                  if (tar &amp;&amp; !tar.disabled) {
<a name="l5509"><span class="linenum">5509</span></a>                      tar.click();
<a name="l5510"><span class="linenum">5510</span></a>                  }
<a name="l5511"><span class="linenum">5511</span></a>              } else {  // Gecko, Opera, and Safari
<a name="l5512"><span class="linenum">5512</span></a>                  if (tar &amp;&amp; !tar.disabled) {
<a name="l5513"><span class="linenum">5513</span></a>                      tar.click();
<a name="l5514"><span class="linenum">5514</span></a>                  }
<a name="l5515"><span class="linenum">5515</span></a>                  var oEvent = document.createEvent(&quot;HTMLEvents&quot;);
<a name="l5516"><span class="linenum">5516</span></a>                  oEvent.initEvent(&quot;submit&quot;, true, true);
<a name="l5517"><span class="linenum">5517</span></a>                  form.<a class="function" onClick="logFunction('dispatchEvent')" href="../../../../../../_functions/dispatchevent.html" onMouseOver="funcPopup(event,'dispatchevent')">dispatchEvent</a>(oEvent);
<a name="l5518"><span class="linenum">5518</span></a>                  if (YAHOO.env.ua.webkit) {
<a name="l5519"><span class="linenum">5519</span></a>                      if (YAHOO.lang.<a class="function" onClick="logFunction('isFunction')" href="../../../../../../_functions/isfunction.html" onMouseOver="funcPopup(event,'isfunction')">isFunction</a>(form.submit)) {
<a name="l5520"><span class="linenum">5520</span></a>                          form.<a class="function" onClick="logFunction('submit')" href="../../../../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>();
<a name="l5521"><span class="linenum">5521</span></a>                      }
<a name="l5522"><span class="linenum">5522</span></a>                  }
<a name="l5523"><span class="linenum">5523</span></a>              }
<a name="l5524"><span class="linenum">5524</span></a>  <span class="comment">            //2.6.0</span>
<a name="l5525"><span class="linenum">5525</span></a>  <span class="comment">            //Removed this, not need since removing Safari 2.x</span>
<a name="l5526"><span class="linenum">5526</span></a>  <span class="comment">            //Event.stopEvent(ev);</span>
<a name="l5527"><span class="linenum">5527</span></a>          },
<a name="l5528"><span class="linenum">5528</span></a>          <span class="comment">/**</span>
<a name="l5529"><span class="linenum">5529</span></a>  <span class="comment">        * @private</span>
<a name="l5530"><span class="linenum">5530</span></a>  <span class="comment">        * @method _handleFontSize</span>
<a name="l5531"><span class="linenum">5531</span></a>  <span class="comment">        * @description Handles the font size button in the toolbar.</span>
<a name="l5532"><span class="linenum">5532</span></a>  <span class="comment">        * @param {Object} o Object returned from Toolbar's buttonClick Event</span>
<a name="l5533"><span class="linenum">5533</span></a>  <span class="comment">        */</span>
<a name="l5534"><span class="linenum">5534</span></a>          _handleFontSize: function(o) {
<a name="l5535"><span class="linenum">5535</span></a>              var button = this.toolbar.getButtonById(o.button.id);
<a name="l5536"><span class="linenum">5536</span></a>              var value = button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label') + 'px';
<a name="l5537"><span class="linenum">5537</span></a>              this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('fontsize', value);
<a name="l5538"><span class="linenum">5538</span></a>              return false;
<a name="l5539"><span class="linenum">5539</span></a>          },
<a name="l5540"><span class="linenum">5540</span></a>          <span class="comment">/**</span>
<a name="l5541"><span class="linenum">5541</span></a>  <span class="comment">        * @private</span>
<a name="l5542"><span class="linenum">5542</span></a>  <span class="comment">        * @description Handles the colorpicker buttons in the toolbar.</span>
<a name="l5543"><span class="linenum">5543</span></a>  <span class="comment">        * @param {Object} o Object returned from Toolbar's buttonClick Event</span>
<a name="l5544"><span class="linenum">5544</span></a>  <span class="comment">        */</span>
<a name="l5545"><span class="linenum">5545</span></a>          _handleColorPicker: function(o) {
<a name="l5546"><span class="linenum">5546</span></a>              var cmd = o.button;
<a name="l5547"><span class="linenum">5547</span></a>              var value = '#' + o.color;
<a name="l5548"><span class="linenum">5548</span></a>              if ((cmd == 'forecolor') || (cmd == 'backcolor')) {
<a name="l5549"><span class="linenum">5549</span></a>                  this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(cmd, value);
<a name="l5550"><span class="linenum">5550</span></a>              }
<a name="l5551"><span class="linenum">5551</span></a>          },
<a name="l5552"><span class="linenum">5552</span></a>          <span class="comment">/**</span>
<a name="l5553"><span class="linenum">5553</span></a>  <span class="comment">        * @private</span>
<a name="l5554"><span class="linenum">5554</span></a>  <span class="comment">        * @method _handleAlign</span>
<a name="l5555"><span class="linenum">5555</span></a>  <span class="comment">        * @description Handles the alignment buttons in the toolbar.</span>
<a name="l5556"><span class="linenum">5556</span></a>  <span class="comment">        * @param {Object} o Object returned from Toolbar's buttonClick Event</span>
<a name="l5557"><span class="linenum">5557</span></a>  <span class="comment">        */</span>
<a name="l5558"><span class="linenum">5558</span></a>          _handleAlign: function(o) {
<a name="l5559"><span class="linenum">5559</span></a>              var cmd = null;
<a name="l5560"><span class="linenum">5560</span></a>              for (var i = 0; i &lt; o.button.menu.length; i++) {
<a name="l5561"><span class="linenum">5561</span></a>                  if (o.button.menu[i].value == o.button.value) {
<a name="l5562"><span class="linenum">5562</span></a>                      cmd = o.button.menu[i].value;
<a name="l5563"><span class="linenum">5563</span></a>                  }
<a name="l5564"><span class="linenum">5564</span></a>              }
<a name="l5565"><span class="linenum">5565</span></a>              var value = this._getSelection();
<a name="l5566"><span class="linenum">5566</span></a>  
<a name="l5567"><span class="linenum">5567</span></a>              this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(cmd, value);
<a name="l5568"><span class="linenum">5568</span></a>              return false;
<a name="l5569"><span class="linenum">5569</span></a>          },
<a name="l5570"><span class="linenum">5570</span></a>          <span class="comment">/**</span>
<a name="l5571"><span class="linenum">5571</span></a>  <span class="comment">        * @private</span>
<a name="l5572"><span class="linenum">5572</span></a>  <span class="comment">        * @method _handleAfterNodeChange</span>
<a name="l5573"><span class="linenum">5573</span></a>  <span class="comment">        * @description Fires after a nodeChange happens to setup the things that where reset on the node change (button state).</span>
<a name="l5574"><span class="linenum">5574</span></a>  <span class="comment">        */</span>
<a name="l5575"><span class="linenum">5575</span></a>          _handleAfterNodeChange: function() {
<a name="l5576"><span class="linenum">5576</span></a>              var path = this._getDomPath(),
<a name="l5577"><span class="linenum">5577</span></a>                  elm = null,
<a name="l5578"><span class="linenum">5578</span></a>                  family = null,
<a name="l5579"><span class="linenum">5579</span></a>                  fontsize = null,
<a name="l5580"><span class="linenum">5580</span></a>                  validFont = false,
<a name="l5581"><span class="linenum">5581</span></a>                  fn_button = this.toolbar.getButtonByValue('fontname'),
<a name="l5582"><span class="linenum">5582</span></a>                  fs_button = this.toolbar.getButtonByValue('fontsize'),
<a name="l5583"><span class="linenum">5583</span></a>                  hd_button = this.toolbar.getButtonByValue('heading');
<a name="l5584"><span class="linenum">5584</span></a>  
<a name="l5585"><span class="linenum">5585</span></a>              for (var i = 0; i &lt; path.length; i++) {
<a name="l5586"><span class="linenum">5586</span></a>                  elm = path[i];
<a name="l5587"><span class="linenum">5587</span></a>  
<a name="l5588"><span class="linenum">5588</span></a>                  var tag = elm.tagName.toLowerCase();
<a name="l5589"><span class="linenum">5589</span></a>  
<a name="l5590"><span class="linenum">5590</span></a>  
<a name="l5591"><span class="linenum">5591</span></a>                  if (elm.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('tag')) {
<a name="l5592"><span class="linenum">5592</span></a>                      tag = elm.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('tag');
<a name="l5593"><span class="linenum">5593</span></a>                  }
<a name="l5594"><span class="linenum">5594</span></a>  
<a name="l5595"><span class="linenum">5595</span></a>                  family = elm.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('face');
<a name="l5596"><span class="linenum">5596</span></a>                  if (Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(elm, 'font-family')) {
<a name="l5597"><span class="linenum">5597</span></a>                      family = Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(elm, 'font-family');
<a name="l5598"><span class="linenum">5598</span></a>  <span class="comment">                    //Adobe AIR Code</span>
<a name="l5599"><span class="linenum">5599</span></a>                      family = family.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/'/g, '');                    
<a name="l5600"><span class="linenum">5600</span></a>                  }
<a name="l5601"><span class="linenum">5601</span></a>  
<a name="l5602"><span class="linenum">5602</span></a>                  if (tag.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 1) == 'h') {
<a name="l5603"><span class="linenum">5603</span></a>                      if (hd_button) {
<a name="l5604"><span class="linenum">5604</span></a>                          for (var h = 0; h &lt; hd_button._configs.menu.value.length; h++) {
<a name="l5605"><span class="linenum">5605</span></a>                              if (hd_button._configs.menu.value[h].value.toLowerCase() == tag) {
<a name="l5606"><span class="linenum">5606</span></a>                                  hd_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', hd_button._configs.menu.value[h].text);
<a name="l5607"><span class="linenum">5607</span></a>                              }
<a name="l5608"><span class="linenum">5608</span></a>                          }
<a name="l5609"><span class="linenum">5609</span></a>                          this._updateMenuChecked('heading', tag);
<a name="l5610"><span class="linenum">5610</span></a>                      }
<a name="l5611"><span class="linenum">5611</span></a>                  }
<a name="l5612"><span class="linenum">5612</span></a>              }
<a name="l5613"><span class="linenum">5613</span></a>  
<a name="l5614"><span class="linenum">5614</span></a>              if (fn_button) {
<a name="l5615"><span class="linenum">5615</span></a>                  for (var b = 0; b &lt; fn_button._configs.menu.value.length; b++) {
<a name="l5616"><span class="linenum">5616</span></a>                      if (family &amp;&amp; fn_button._configs.menu.value[b].text.toLowerCase() == family.toLowerCase()) {
<a name="l5617"><span class="linenum">5617</span></a>                          validFont = true;
<a name="l5618"><span class="linenum">5618</span></a>                          family = fn_button._configs.menu.value[b].text; <span class="comment">//Put the proper menu name in the button</span>
<a name="l5619"><span class="linenum">5619</span></a>                      }
<a name="l5620"><span class="linenum">5620</span></a>                  }
<a name="l5621"><span class="linenum">5621</span></a>                  if (!validFont) {
<a name="l5622"><span class="linenum">5622</span></a>                      family = fn_button._configs.label._initialConfig.value;
<a name="l5623"><span class="linenum">5623</span></a>                  }
<a name="l5624"><span class="linenum">5624</span></a>                  var familyLabel = '&lt;span class=&quot;yui-toolbar-fontname-' + this._cleanClassName(family) + '&quot;&gt;' + family + '&lt;/span&gt;';
<a name="l5625"><span class="linenum">5625</span></a>                  if (fn_button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label') != familyLabel) {
<a name="l5626"><span class="linenum">5626</span></a>                      fn_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', familyLabel);
<a name="l5627"><span class="linenum">5627</span></a>                      this._updateMenuChecked('fontname', family);
<a name="l5628"><span class="linenum">5628</span></a>                  }
<a name="l5629"><span class="linenum">5629</span></a>              }
<a name="l5630"><span class="linenum">5630</span></a>  
<a name="l5631"><span class="linenum">5631</span></a>              if (fs_button) {
<a name="l5632"><span class="linenum">5632</span></a>                  fontsize = parseInt(Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(elm, 'fontSize'), 10);
<a name="l5633"><span class="linenum">5633</span></a>                  if ((fontsize === null) || isNaN(fontsize)) {
<a name="l5634"><span class="linenum">5634</span></a>                      fontsize = fs_button._configs.label._initialConfig.value;
<a name="l5635"><span class="linenum">5635</span></a>                  }
<a name="l5636"><span class="linenum">5636</span></a>                  fs_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', ''+fontsize);
<a name="l5637"><span class="linenum">5637</span></a>              }
<a name="l5638"><span class="linenum">5638</span></a>              
<a name="l5639"><span class="linenum">5639</span></a>              if (!this._isElement(elm, 'body') &amp;&amp; !this._isElement(elm, 'img')) {
<a name="l5640"><span class="linenum">5640</span></a>                  this.toolbar.enableButton(fn_button);
<a name="l5641"><span class="linenum">5641</span></a>                  this.toolbar.enableButton(fs_button);
<a name="l5642"><span class="linenum">5642</span></a>                  this.toolbar.enableButton('forecolor');
<a name="l5643"><span class="linenum">5643</span></a>                  this.toolbar.enableButton('backcolor');
<a name="l5644"><span class="linenum">5644</span></a>              }
<a name="l5645"><span class="linenum">5645</span></a>              if (this._isElement(elm, 'img')) {
<a name="l5646"><span class="linenum">5646</span></a>                  if (YAHOO.widget.Overlay) {
<a name="l5647"><span class="linenum">5647</span></a>                      this.toolbar.enableButton('createlink');
<a name="l5648"><span class="linenum">5648</span></a>                  }
<a name="l5649"><span class="linenum">5649</span></a>              }
<a name="l5650"><span class="linenum">5650</span></a>              if (this._hasParent(elm, 'blockquote')) {
<a name="l5651"><span class="linenum">5651</span></a>                  this.toolbar.selectButton('indent');
<a name="l5652"><span class="linenum">5652</span></a>                  this.toolbar.disableButton('indent');
<a name="l5653"><span class="linenum">5653</span></a>                  this.toolbar.enableButton('outdent');
<a name="l5654"><span class="linenum">5654</span></a>              }
<a name="l5655"><span class="linenum">5655</span></a>              if (this._hasParent(elm, 'ol') || this._hasParent(elm, 'ul')) {
<a name="l5656"><span class="linenum">5656</span></a>                  this.toolbar.disableButton('indent');
<a name="l5657"><span class="linenum">5657</span></a>              }
<a name="l5658"><span class="linenum">5658</span></a>              this._lastButton = null;
<a name="l5659"><span class="linenum">5659</span></a>              
<a name="l5660"><span class="linenum">5660</span></a>          },
<a name="l5661"><span class="linenum">5661</span></a>          <span class="comment">/**</span>
<a name="l5662"><span class="linenum">5662</span></a>  <span class="comment">        * @private</span>
<a name="l5663"><span class="linenum">5663</span></a>  <span class="comment">        * @method _handleInsertImageClick</span>
<a name="l5664"><span class="linenum">5664</span></a>  <span class="comment">        * @description Opens the Image Properties Window when the insert Image button is clicked or an Image is Double Clicked.</span>
<a name="l5665"><span class="linenum">5665</span></a>  <span class="comment">        */</span>
<a name="l5666"><span class="linenum">5666</span></a>          _handleInsertImageClick: function() {
<a name="l5667"><span class="linenum">5667</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('limitCommands')) {
<a name="l5668"><span class="linenum">5668</span></a>                  if (!this.toolbar.getButtonByValue('insertimage')) {
<a name="l5669"><span class="linenum">5669</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Button for (insertimage) was not found, skipping exec.', 'info', 'SimpleEditor');
<a name="l5670"><span class="linenum">5670</span></a>                      return false;
<a name="l5671"><span class="linenum">5671</span></a>                  }
<a name="l5672"><span class="linenum">5672</span></a>              }
<a name="l5673"><span class="linenum">5673</span></a>          
<a name="l5674"><span class="linenum">5674</span></a>              this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true); <span class="comment">//Disable the toolbar when the prompt is showing</span>
<a name="l5675"><span class="linenum">5675</span></a>              var _handleAEC = function() {
<a name="l5676"><span class="linenum">5676</span></a>                  var el = this.currentElement[0],
<a name="l5677"><span class="linenum">5677</span></a>                      src = 'http://';
<a name="l5678"><span class="linenum">5678</span></a>                  if (!el) {
<a name="l5679"><span class="linenum">5679</span></a>                      el = this._getSelectedElement();
<a name="l5680"><span class="linenum">5680</span></a>                  }
<a name="l5681"><span class="linenum">5681</span></a>                  if (el) {
<a name="l5682"><span class="linenum">5682</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src')) {
<a name="l5683"><span class="linenum">5683</span></a>                          src = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src', 2);
<a name="l5684"><span class="linenum">5684</span></a>                          if (src.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage')) != -1) {
<a name="l5685"><span class="linenum">5685</span></a>                              src = this.STR_IMAGE_HERE;
<a name="l5686"><span class="linenum">5686</span></a>                          }
<a name="l5687"><span class="linenum">5687</span></a>                      }
<a name="l5688"><span class="linenum">5688</span></a>                  }
<a name="l5689"><span class="linenum">5689</span></a>                  var str = <a class="function" onClick="logFunction('prompt')" href="../../../../../../_functions/prompt.html" onMouseOver="funcPopup(event,'prompt')">prompt</a>(this.STR_IMAGE_URL + ': ', src);
<a name="l5690"><span class="linenum">5690</span></a>                  if ((str !== '') &amp;&amp; (str !== null)) {
<a name="l5691"><span class="linenum">5691</span></a>                      el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', str);
<a name="l5692"><span class="linenum">5692</span></a>                  } else if (str === '') {
<a name="l5693"><span class="linenum">5693</span></a>                      el.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(el);
<a name="l5694"><span class="linenum">5694</span></a>                      this.currentElement = [];
<a name="l5695"><span class="linenum">5695</span></a>                      this.nodeChange();
<a name="l5696"><span class="linenum">5696</span></a>                  } else if ((str === null)) {
<a name="l5697"><span class="linenum">5697</span></a>                      src = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src', 2);
<a name="l5698"><span class="linenum">5698</span></a>                      if (src.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage')) != -1) {
<a name="l5699"><span class="linenum">5699</span></a>                          el.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(el);
<a name="l5700"><span class="linenum">5700</span></a>                          this.currentElement = [];
<a name="l5701"><span class="linenum">5701</span></a>                          this.nodeChange();
<a name="l5702"><span class="linenum">5702</span></a>                      }
<a name="l5703"><span class="linenum">5703</span></a>                  }
<a name="l5704"><span class="linenum">5704</span></a>                  this.closeWindow();
<a name="l5705"><span class="linenum">5705</span></a>                  this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', false);
<a name="l5706"><span class="linenum">5706</span></a>                  this.unsubscribe('afterExecCommand', _handleAEC, this, true);
<a name="l5707"><span class="linenum">5707</span></a>              };
<a name="l5708"><span class="linenum">5708</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterExecCommand', _handleAEC, this, true);
<a name="l5709"><span class="linenum">5709</span></a>          },
<a name="l5710"><span class="linenum">5710</span></a>          <span class="comment">/**</span>
<a name="l5711"><span class="linenum">5711</span></a>  <span class="comment">        * @private</span>
<a name="l5712"><span class="linenum">5712</span></a>  <span class="comment">        * @method _handleInsertImageWindowClose</span>
<a name="l5713"><span class="linenum">5713</span></a>  <span class="comment">        * @description Handles the closing of the Image Properties Window.</span>
<a name="l5714"><span class="linenum">5714</span></a>  <span class="comment">        */</span>
<a name="l5715"><span class="linenum">5715</span></a>          _handleInsertImageWindowClose: function() {
<a name="l5716"><span class="linenum">5716</span></a>              this.nodeChange();
<a name="l5717"><span class="linenum">5717</span></a>          },
<a name="l5718"><span class="linenum">5718</span></a>          <span class="comment">/**</span>
<a name="l5719"><span class="linenum">5719</span></a>  <span class="comment">        * @private</span>
<a name="l5720"><span class="linenum">5720</span></a>  <span class="comment">        * @method _isLocalFile</span>
<a name="l5721"><span class="linenum">5721</span></a>  <span class="comment">        * @param {String} url THe url/string to check</span>
<a name="l5722"><span class="linenum">5722</span></a>  <span class="comment">        * @description Checks to see if a string (href or img src) is possibly a local file reference..</span>
<a name="l5723"><span class="linenum">5723</span></a>  <span class="comment">        */</span>
<a name="l5724"><span class="linenum">5724</span></a>          _isLocalFile: function(url) {
<a name="l5725"><span class="linenum">5725</span></a>              if ((url) &amp;&amp; (url !== '') &amp;&amp; ((url.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('file:/') != -1) || (url.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(':\\') != -1))) {
<a name="l5726"><span class="linenum">5726</span></a>                  return true;
<a name="l5727"><span class="linenum">5727</span></a>              }
<a name="l5728"><span class="linenum">5728</span></a>              return false;
<a name="l5729"><span class="linenum">5729</span></a>          },
<a name="l5730"><span class="linenum">5730</span></a>          <span class="comment">/**</span>
<a name="l5731"><span class="linenum">5731</span></a>  <span class="comment">        * @private</span>
<a name="l5732"><span class="linenum">5732</span></a>  <span class="comment">        * @method _handleCreateLinkClick</span>
<a name="l5733"><span class="linenum">5733</span></a>  <span class="comment">        * @description Handles the opening of the Link Properties Window when the Create Link button is clicked or an href is doubleclicked.</span>
<a name="l5734"><span class="linenum">5734</span></a>  <span class="comment">        */</span>
<a name="l5735"><span class="linenum">5735</span></a>          _handleCreateLinkClick: function() {
<a name="l5736"><span class="linenum">5736</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('limitCommands')) {
<a name="l5737"><span class="linenum">5737</span></a>                  if (!this.toolbar.getButtonByValue('createlink')) {
<a name="l5738"><span class="linenum">5738</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Button for (createlink) was not found, skipping exec.', 'info', 'SimpleEditor');
<a name="l5739"><span class="linenum">5739</span></a>                      return false;
<a name="l5740"><span class="linenum">5740</span></a>                  }
<a name="l5741"><span class="linenum">5741</span></a>              }
<a name="l5742"><span class="linenum">5742</span></a>          
<a name="l5743"><span class="linenum">5743</span></a>              this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true); <span class="comment">//Disable the toolbar when the prompt is showing</span>
<a name="l5744"><span class="linenum">5744</span></a>  
<a name="l5745"><span class="linenum">5745</span></a>              var _handleAEC = function() {
<a name="l5746"><span class="linenum">5746</span></a>                  var el = this.currentElement[0],
<a name="l5747"><span class="linenum">5747</span></a>                      url = '';
<a name="l5748"><span class="linenum">5748</span></a>  
<a name="l5749"><span class="linenum">5749</span></a>                  if (el) {
<a name="l5750"><span class="linenum">5750</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2) !== null) {
<a name="l5751"><span class="linenum">5751</span></a>                          url = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2);
<a name="l5752"><span class="linenum">5752</span></a>                      }
<a name="l5753"><span class="linenum">5753</span></a>                  }
<a name="l5754"><span class="linenum">5754</span></a>                  var str = <a class="function" onClick="logFunction('prompt')" href="../../../../../../_functions/prompt.html" onMouseOver="funcPopup(event,'prompt')">prompt</a>(this.STR_LINK_URL + ': ', url);
<a name="l5755"><span class="linenum">5755</span></a>                  if ((str !== '') &amp;&amp; (str !== null)) {
<a name="l5756"><span class="linenum">5756</span></a>                      var urlValue = str;
<a name="l5757"><span class="linenum">5757</span></a>                      if ((urlValue.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(':/'+'/') == -1) &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0,1) != '/') &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 6).toLowerCase() != 'mailto')) {
<a name="l5758"><span class="linenum">5758</span></a>                          if ((urlValue.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('@') != -1) &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 6).toLowerCase() != 'mailto')) {
<a name="l5759"><span class="linenum">5759</span></a>  <span class="comment">                            //Found an @ sign, prefix with mailto:</span>
<a name="l5760"><span class="linenum">5760</span></a>                              urlValue = 'mailto:' + urlValue;
<a name="l5761"><span class="linenum">5761</span></a>                          } else {
<a name="l5762"><span class="linenum">5762</span></a>  <span class="comment">                            /* :// not found adding */</span>
<a name="l5763"><span class="linenum">5763</span></a>                              if (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 1) != '#') {
<a name="l5764"><span class="linenum">5764</span></a>  <span class="comment">                                //urlValue = 'http:/'+'/' + urlValue;</span>
<a name="l5765"><span class="linenum">5765</span></a>                              }
<a name="l5766"><span class="linenum">5766</span></a>                          }
<a name="l5767"><span class="linenum">5767</span></a>                      }
<a name="l5768"><span class="linenum">5768</span></a>                      el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('href', urlValue);
<a name="l5769"><span class="linenum">5769</span></a>                  } else if (str !== null) {
<a name="l5770"><span class="linenum">5770</span></a>                      var _span = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l5771"><span class="linenum">5771</span></a>                      _span.innerHTML = el.innerHTML;
<a name="l5772"><span class="linenum">5772</span></a>                      Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_span, 'yui-non');
<a name="l5773"><span class="linenum">5773</span></a>                      el.parentNode.replaceChild(_span, el);
<a name="l5774"><span class="linenum">5774</span></a>                  }
<a name="l5775"><span class="linenum">5775</span></a>                  this.closeWindow();
<a name="l5776"><span class="linenum">5776</span></a>                  this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', false);
<a name="l5777"><span class="linenum">5777</span></a>                  this.unsubscribe('afterExecCommand', _handleAEC, this, true);
<a name="l5778"><span class="linenum">5778</span></a>              };
<a name="l5779"><span class="linenum">5779</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterExecCommand', _handleAEC, this);
<a name="l5780"><span class="linenum">5780</span></a>  
<a name="l5781"><span class="linenum">5781</span></a>          },
<a name="l5782"><span class="linenum">5782</span></a>          <span class="comment">/**</span>
<a name="l5783"><span class="linenum">5783</span></a>  <span class="comment">        * @private</span>
<a name="l5784"><span class="linenum">5784</span></a>  <span class="comment">        * @method _handleCreateLinkWindowClose</span>
<a name="l5785"><span class="linenum">5785</span></a>  <span class="comment">        * @description Handles the closing of the Link Properties Window.</span>
<a name="l5786"><span class="linenum">5786</span></a>  <span class="comment">        */</span>
<a name="l5787"><span class="linenum">5787</span></a>          _handleCreateLinkWindowClose: function() {
<a name="l5788"><span class="linenum">5788</span></a>              this.nodeChange();
<a name="l5789"><span class="linenum">5789</span></a>              this.currentElement = [];
<a name="l5790"><span class="linenum">5790</span></a>          },
<a name="l5791"><span class="linenum">5791</span></a>          <span class="comment">/**</span>
<a name="l5792"><span class="linenum">5792</span></a>  <span class="comment">        * @method render</span>
<a name="l5793"><span class="linenum">5793</span></a>  <span class="comment">        * @description Calls the private method _render in a setTimeout to allow for other things on the page to continue to load.</span>
<a name="l5794"><span class="linenum">5794</span></a>  <span class="comment">        */</span>
<a name="l5795"><span class="linenum">5795</span></a>          render: function() {
<a name="l5796"><span class="linenum">5796</span></a>              if (this._rendered) {
<a name="l5797"><span class="linenum">5797</span></a>                  return false;
<a name="l5798"><span class="linenum">5798</span></a>              }
<a name="l5799"><span class="linenum">5799</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Render', 'info', 'SimpleEditor');
<a name="l5800"><span class="linenum">5800</span></a>              if (!this.DOMReady) {
<a name="l5801"><span class="linenum">5801</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('!DOMReady', 'info', 'SimpleEditor');
<a name="l5802"><span class="linenum">5802</span></a>                  this._queue[this._queue.length] = ['render', arguments];
<a name="l5803"><span class="linenum">5803</span></a>                  return false;
<a name="l5804"><span class="linenum">5804</span></a>              }
<a name="l5805"><span class="linenum">5805</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')) {
<a name="l5806"><span class="linenum">5806</span></a>                  if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').tagName) {
<a name="l5807"><span class="linenum">5807</span></a>                      this._textarea = true;
<a name="l5808"><span class="linenum">5808</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').tagName.toLowerCase() !== 'textarea') {
<a name="l5809"><span class="linenum">5809</span></a>                          this._textarea = false;
<a name="l5810"><span class="linenum">5810</span></a>                      }
<a name="l5811"><span class="linenum">5811</span></a>                  } else {
<a name="l5812"><span class="linenum">5812</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('No Valid Element', 'error', 'SimpleEditor');
<a name="l5813"><span class="linenum">5813</span></a>                      return false;
<a name="l5814"><span class="linenum">5814</span></a>                  }
<a name="l5815"><span class="linenum">5815</span></a>              } else {
<a name="l5816"><span class="linenum">5816</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('No Element', 'error', 'SimpleEditor');
<a name="l5817"><span class="linenum">5817</span></a>                  return false;
<a name="l5818"><span class="linenum">5818</span></a>              }
<a name="l5819"><span class="linenum">5819</span></a>              this._rendered = true;
<a name="l5820"><span class="linenum">5820</span></a>              var self = this;
<a name="l5821"><span class="linenum">5821</span></a>              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l5822"><span class="linenum">5822</span></a>                  self._render.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l5823"><span class="linenum">5823</span></a>              }, 4);
<a name="l5824"><span class="linenum">5824</span></a>          },
<a name="l5825"><span class="linenum">5825</span></a>          <span class="comment">/**</span>
<a name="l5826"><span class="linenum">5826</span></a>  <span class="comment">        * @private</span>
<a name="l5827"><span class="linenum">5827</span></a>  <span class="comment">        * @method _render</span>
<a name="l5828"><span class="linenum">5828</span></a>  <span class="comment">        * @description Causes the toolbar and the editor to render and replace the textarea.</span>
<a name="l5829"><span class="linenum">5829</span></a>  <span class="comment">        */</span>
<a name="l5830"><span class="linenum">5830</span></a>          _render: function() {
<a name="l5831"><span class="linenum">5831</span></a>              var self = this;
<a name="l5832"><span class="linenum">5832</span></a>              this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('textarea', this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l5833"><span class="linenum">5833</span></a>  
<a name="l5834"><span class="linenum">5834</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('display', 'none');
<a name="l5835"><span class="linenum">5835</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_CONTAINER);
<a name="l5836"><span class="linenum">5836</span></a>              
<a name="l5837"><span class="linenum">5837</span></a>              this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('iframe', this._createIframe());
<a name="l5838"><span class="linenum">5838</span></a>  
<a name="l5839"><span class="linenum">5839</span></a>              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l5840"><span class="linenum">5840</span></a>                  self._setInitialContent.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l5841"><span class="linenum">5841</span></a>              }, 10);
<a name="l5842"><span class="linenum">5842</span></a>  
<a name="l5843"><span class="linenum">5843</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('editor_wrapper').appendChild(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l5844"><span class="linenum">5844</span></a>  
<a name="l5845"><span class="linenum">5845</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled')) {
<a name="l5846"><span class="linenum">5846</span></a>                  this._disableEditor(true);
<a name="l5847"><span class="linenum">5847</span></a>              }
<a name="l5848"><span class="linenum">5848</span></a>  
<a name="l5849"><span class="linenum">5849</span></a>              var tbarConf = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('toolbar');
<a name="l5850"><span class="linenum">5850</span></a>  <span class="comment">            //Create Toolbar instance</span>
<a name="l5851"><span class="linenum">5851</span></a>              if (tbarConf instanceof Toolbar) {
<a name="l5852"><span class="linenum">5852</span></a>                  this.toolbar = tbarConf;
<a name="l5853"><span class="linenum">5853</span></a>  <span class="comment">                //Set the toolbar to disabled until content is loaded</span>
<a name="l5854"><span class="linenum">5854</span></a>                  this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true);
<a name="l5855"><span class="linenum">5855</span></a>              } else {
<a name="l5856"><span class="linenum">5856</span></a>  <span class="comment">                //Set the toolbar to disabled until content is loaded</span>
<a name="l5857"><span class="linenum">5857</span></a>                  tbarConf.disabled = true;
<a name="l5858"><span class="linenum">5858</span></a>                  this.toolbar = new Toolbar(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('toolbar_cont'), tbarConf);
<a name="l5859"><span class="linenum">5859</span></a>              }
<a name="l5860"><span class="linenum">5860</span></a>  
<a name="l5861"><span class="linenum">5861</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('fireEvent::toolbarLoaded', 'info', 'SimpleEditor');
<a name="l5862"><span class="linenum">5862</span></a>              this.fireEvent('toolbarLoaded', { type: 'toolbarLoaded', target: this.toolbar });
<a name="l5863"><span class="linenum">5863</span></a>  
<a name="l5864"><span class="linenum">5864</span></a>              
<a name="l5865"><span class="linenum">5865</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('toolbarCollapsed', function() {
<a name="l5866"><span class="linenum">5866</span></a>                  if (this.currentWindow) {
<a name="l5867"><span class="linenum">5867</span></a>                      this.moveWindow();
<a name="l5868"><span class="linenum">5868</span></a>                  }
<a name="l5869"><span class="linenum">5869</span></a>              }, this, true);
<a name="l5870"><span class="linenum">5870</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('toolbarExpanded', function() {
<a name="l5871"><span class="linenum">5871</span></a>                  if (this.currentWindow) {
<a name="l5872"><span class="linenum">5872</span></a>                      this.moveWindow();
<a name="l5873"><span class="linenum">5873</span></a>                  }
<a name="l5874"><span class="linenum">5874</span></a>              }, this, true);
<a name="l5875"><span class="linenum">5875</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('fontsizeClick', this._handleFontSize, this, true);
<a name="l5876"><span class="linenum">5876</span></a>              
<a name="l5877"><span class="linenum">5877</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('colorPickerClicked', function(o) {
<a name="l5878"><span class="linenum">5878</span></a>                  this._handleColorPicker(o);
<a name="l5879"><span class="linenum">5879</span></a>                  return false; <span class="comment">//Stop the buttonClick event</span>
<a name="l5880"><span class="linenum">5880</span></a>              }, this, true);
<a name="l5881"><span class="linenum">5881</span></a>  
<a name="l5882"><span class="linenum">5882</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('alignClick', this._handleAlign, this, true);
<a name="l5883"><span class="linenum">5883</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterNodeChange', this._handleAfterNodeChange, this, true);
<a name="l5884"><span class="linenum">5884</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('insertimageClick', this._handleInsertImageClick, this, true);
<a name="l5885"><span class="linenum">5885</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('windowinsertimageClose', this._handleInsertImageWindowClose, this, true);
<a name="l5886"><span class="linenum">5886</span></a>              this.toolbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('createlinkClick', this._handleCreateLinkClick, this, true);
<a name="l5887"><span class="linenum">5887</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('windowcreatelinkClose', this._handleCreateLinkWindowClose, this, true);
<a name="l5888"><span class="linenum">5888</span></a>              
<a name="l5889"><span class="linenum">5889</span></a>  
<a name="l5890"><span class="linenum">5890</span></a>  <span class="comment">            //Replace Textarea with editable area</span>
<a name="l5891"><span class="linenum">5891</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode').replaceChild(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'), this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l5892"><span class="linenum">5892</span></a>  
<a name="l5893"><span class="linenum">5893</span></a>              
<a name="l5894"><span class="linenum">5894</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', 'hidden');
<a name="l5895"><span class="linenum">5895</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', 'absolute');
<a name="l5896"><span class="linenum">5896</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('top', '-9999px');
<a name="l5897"><span class="linenum">5897</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '-9999px');
<a name="l5898"><span class="linenum">5898</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').appendChild(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l5899"><span class="linenum">5899</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('display', 'block');
<a name="l5900"><span class="linenum">5900</span></a>  
<a name="l5901"><span class="linenum">5901</span></a>  
<a name="l5902"><span class="linenum">5902</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode'), this.CLASS_EDITABLE_CONT);
<a name="l5903"><span class="linenum">5903</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.CLASS_EDITABLE);
<a name="l5904"><span class="linenum">5904</span></a>  
<a name="l5905"><span class="linenum">5905</span></a>  <span class="comment">            //Set height and width of editor container</span>
<a name="l5906"><span class="linenum">5906</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('width', this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('width'));
<a name="l5907"><span class="linenum">5907</span></a>              Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode'), 'height', this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('height'));
<a name="l5908"><span class="linenum">5908</span></a>  
<a name="l5909"><span class="linenum">5909</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('width', '100%'); <span class="comment">//WIDTH</span>
<a name="l5910"><span class="linenum">5910</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('height', '100%');
<a name="l5911"><span class="linenum">5911</span></a>  
<a name="l5912"><span class="linenum">5912</span></a>              this._setupDD();
<a name="l5913"><span class="linenum">5913</span></a>  
<a name="l5914"><span class="linenum">5914</span></a>              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l5915"><span class="linenum">5915</span></a>                  self._setupAfterElement.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l5916"><span class="linenum">5916</span></a>              }, 0);
<a name="l5917"><span class="linenum">5917</span></a>              this.fireEvent('afterRender', { type: 'afterRender', target: this });
<a name="l5918"><span class="linenum">5918</span></a>          },
<a name="l5919"><span class="linenum">5919</span></a>          <span class="comment">/**</span>
<a name="l5920"><span class="linenum">5920</span></a>  <span class="comment">        * @method execCommand</span>
<a name="l5921"><span class="linenum">5921</span></a>  <span class="comment">        * @param {String} action The &quot;execCommand&quot; action to try to execute (Example: bold, insertimage, inserthtml)</span>
<a name="l5922"><span class="linenum">5922</span></a>  <span class="comment">        * @param {String} value (optional) The value for a given action such as action: fontname value: 'Verdana'</span>
<a name="l5923"><span class="linenum">5923</span></a>  <span class="comment">        * @description This method attempts to try and level the differences in the various browsers and their support for execCommand actions</span>
<a name="l5924"><span class="linenum">5924</span></a>  <span class="comment">        */</span>
<a name="l5925"><span class="linenum">5925</span></a>          execCommand: function(action, value) {
<a name="l5926"><span class="linenum">5926</span></a>              var beforeExec = this.fireEvent('beforeExecCommand', { type: 'beforeExecCommand', target: this, args: arguments });
<a name="l5927"><span class="linenum">5927</span></a>              if ((beforeExec === false) || (this.STOP_EXEC_COMMAND)) {
<a name="l5928"><span class="linenum">5928</span></a>                  this.STOP_EXEC_COMMAND = false;
<a name="l5929"><span class="linenum">5929</span></a>                  return false;
<a name="l5930"><span class="linenum">5930</span></a>              }
<a name="l5931"><span class="linenum">5931</span></a>              this._lastCommand = action;
<a name="l5932"><span class="linenum">5932</span></a>              this._setMarkupType(action);
<a name="l5933"><span class="linenum">5933</span></a>              if (this.browser.ie) {
<a name="l5934"><span class="linenum">5934</span></a>                  this._getWindow().<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l5935"><span class="linenum">5935</span></a>              }
<a name="l5936"><span class="linenum">5936</span></a>              var exec = true;
<a name="l5937"><span class="linenum">5937</span></a>              
<a name="l5938"><span class="linenum">5938</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('limitCommands')) {
<a name="l5939"><span class="linenum">5939</span></a>                  if (!this.toolbar.getButtonByValue(action)) {
<a name="l5940"><span class="linenum">5940</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Button for (' + action + ') was not found, skipping exec.', 'info', 'SimpleEditor');
<a name="l5941"><span class="linenum">5941</span></a>                      exec = false;
<a name="l5942"><span class="linenum">5942</span></a>                  }
<a name="l5943"><span class="linenum">5943</span></a>              }
<a name="l5944"><span class="linenum">5944</span></a>  
<a name="l5945"><span class="linenum">5945</span></a>              this.editorDirty = true;
<a name="l5946"><span class="linenum">5946</span></a>              
<a name="l5947"><span class="linenum">5947</span></a>              if ((typeof this['cmd_' + action.toLowerCase()] == 'function') &amp;&amp; exec) {
<a name="l5948"><span class="linenum">5948</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Found execCommand override method: (cmd_' + action.toLowerCase() + ')', 'info', 'SimpleEditor');
<a name="l5949"><span class="linenum">5949</span></a>                  var retValue = this['cmd_' + action.toLowerCase()](value);
<a name="l5950"><span class="linenum">5950</span></a>                  exec = retValue[0];
<a name="l5951"><span class="linenum">5951</span></a>                  if (retValue[1]) {
<a name="l5952"><span class="linenum">5952</span></a>                      action = retValue[1];
<a name="l5953"><span class="linenum">5953</span></a>                  }
<a name="l5954"><span class="linenum">5954</span></a>                  if (retValue[2]) {
<a name="l5955"><span class="linenum">5955</span></a>                      value = retValue[2];
<a name="l5956"><span class="linenum">5956</span></a>                  }
<a name="l5957"><span class="linenum">5957</span></a>              }
<a name="l5958"><span class="linenum">5958</span></a>              if (exec) {
<a name="l5959"><span class="linenum">5959</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('execCommand::(' + action + '), (' + value + ')', 'info', 'SimpleEditor');
<a name="l5960"><span class="linenum">5960</span></a>                  try {
<a name="l5961"><span class="linenum">5961</span></a>                      this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(action, false, value);
<a name="l5962"><span class="linenum">5962</span></a>                  } catch(e) {
<a name="l5963"><span class="linenum">5963</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('execCommand Failed', 'error', 'SimpleEditor');
<a name="l5964"><span class="linenum">5964</span></a>                  }
<a name="l5965"><span class="linenum">5965</span></a>              } else {
<a name="l5966"><span class="linenum">5966</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('<a class="class" onClick="logClass('OVERRIDE')" href="../../../../../../_classes/override.html" onMouseOver="classPopup(event,'override')">OVERRIDE</a>::execCommand::(' + action + '),(' + value + ') skipped', 'warn', 'SimpleEditor');
<a name="l5967"><span class="linenum">5967</span></a>              }
<a name="l5968"><span class="linenum">5968</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterExecCommand', function() {
<a name="l5969"><span class="linenum">5969</span></a>                  this.unsubscribeAll('afterExecCommand');
<a name="l5970"><span class="linenum">5970</span></a>                  this.nodeChange();
<a name="l5971"><span class="linenum">5971</span></a>              }, this, true);
<a name="l5972"><span class="linenum">5972</span></a>              this.fireEvent('afterExecCommand', { type: 'afterExecCommand', target: this });
<a name="l5973"><span class="linenum">5973</span></a>              
<a name="l5974"><span class="linenum">5974</span></a>          },
<a name="l5975"><span class="linenum">5975</span></a>  <span class="comment">    /* {{{  Command Overrides */</span>
<a name="l5976"><span class="linenum">5976</span></a>  
<a name="l5977"><span class="linenum">5977</span></a>          <span class="comment">/**</span>
<a name="l5978"><span class="linenum">5978</span></a>  <span class="comment">        * @method cmd_bold</span>
<a name="l5979"><span class="linenum">5979</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l5980"><span class="linenum">5980</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('bold') is used.</span>
<a name="l5981"><span class="linenum">5981</span></a>  <span class="comment">        */</span>
<a name="l5982"><span class="linenum">5982</span></a>          cmd_bold: function(value) {
<a name="l5983"><span class="linenum">5983</span></a>              if (!this.browser.webkit) {
<a name="l5984"><span class="linenum">5984</span></a>                  var el = this._getSelectedElement();
<a name="l5985"><span class="linenum">5985</span></a>                  if (el &amp;&amp; this._isElement(el, 'span') &amp;&amp; this._hasSelection()) {
<a name="l5986"><span class="linenum">5986</span></a>                      if (el.style.fontWeight == 'bold') {
<a name="l5987"><span class="linenum">5987</span></a>                          el.style.fontWeight = '';
<a name="l5988"><span class="linenum">5988</span></a>                          var b = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('b'),
<a name="l5989"><span class="linenum">5989</span></a>                          par = el.parentNode;
<a name="l5990"><span class="linenum">5990</span></a>                          par.replaceChild(b, el);
<a name="l5991"><span class="linenum">5991</span></a>                          b.appendChild(el);
<a name="l5992"><span class="linenum">5992</span></a>                      }
<a name="l5993"><span class="linenum">5993</span></a>                  }
<a name="l5994"><span class="linenum">5994</span></a>              }
<a name="l5995"><span class="linenum">5995</span></a>              return [true];
<a name="l5996"><span class="linenum">5996</span></a>          },
<a name="l5997"><span class="linenum">5997</span></a>          <span class="comment">/**</span>
<a name="l5998"><span class="linenum">5998</span></a>  <span class="comment">        * @method cmd_italic</span>
<a name="l5999"><span class="linenum">5999</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6000"><span class="linenum">6000</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('italic') is used.</span>
<a name="l6001"><span class="linenum">6001</span></a>  <span class="comment">        */</span>
<a name="l6002"><span class="linenum">6002</span></a>  
<a name="l6003"><span class="linenum">6003</span></a>          cmd_italic: function(value) {
<a name="l6004"><span class="linenum">6004</span></a>              if (!this.browser.webkit) {
<a name="l6005"><span class="linenum">6005</span></a>                  var el = this._getSelectedElement();
<a name="l6006"><span class="linenum">6006</span></a>                  if (el &amp;&amp; this._isElement(el, 'span') &amp;&amp; this._hasSelection()) {
<a name="l6007"><span class="linenum">6007</span></a>                      if (el.style.fontStyle == 'italic') {
<a name="l6008"><span class="linenum">6008</span></a>                          el.style.fontStyle = '';
<a name="l6009"><span class="linenum">6009</span></a>                          var i = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('i'),
<a name="l6010"><span class="linenum">6010</span></a>                          par = el.parentNode;
<a name="l6011"><span class="linenum">6011</span></a>                          par.replaceChild(i, el);
<a name="l6012"><span class="linenum">6012</span></a>                          i.appendChild(el);
<a name="l6013"><span class="linenum">6013</span></a>                      }
<a name="l6014"><span class="linenum">6014</span></a>                  }
<a name="l6015"><span class="linenum">6015</span></a>              }
<a name="l6016"><span class="linenum">6016</span></a>              return [true];
<a name="l6017"><span class="linenum">6017</span></a>          },
<a name="l6018"><span class="linenum">6018</span></a>  
<a name="l6019"><span class="linenum">6019</span></a>  
<a name="l6020"><span class="linenum">6020</span></a>          <span class="comment">/**</span>
<a name="l6021"><span class="linenum">6021</span></a>  <span class="comment">        * @method cmd_underline</span>
<a name="l6022"><span class="linenum">6022</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6023"><span class="linenum">6023</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('underline') is used.</span>
<a name="l6024"><span class="linenum">6024</span></a>  <span class="comment">        */</span>
<a name="l6025"><span class="linenum">6025</span></a>          cmd_underline: function(value) {
<a name="l6026"><span class="linenum">6026</span></a>              if (!this.browser.webkit) {
<a name="l6027"><span class="linenum">6027</span></a>                  var el = this._getSelectedElement();
<a name="l6028"><span class="linenum">6028</span></a>                  if (el &amp;&amp; this._isElement(el, 'span')) {
<a name="l6029"><span class="linenum">6029</span></a>                      if (el.style.textDecoration == 'underline') {
<a name="l6030"><span class="linenum">6030</span></a>                          el.style.textDecoration = 'none';
<a name="l6031"><span class="linenum">6031</span></a>                      } else {
<a name="l6032"><span class="linenum">6032</span></a>                          el.style.textDecoration = 'underline';
<a name="l6033"><span class="linenum">6033</span></a>                      }
<a name="l6034"><span class="linenum">6034</span></a>                      return [false];
<a name="l6035"><span class="linenum">6035</span></a>                  }
<a name="l6036"><span class="linenum">6036</span></a>              }
<a name="l6037"><span class="linenum">6037</span></a>              return [true];
<a name="l6038"><span class="linenum">6038</span></a>          },
<a name="l6039"><span class="linenum">6039</span></a>          <span class="comment">/**</span>
<a name="l6040"><span class="linenum">6040</span></a>  <span class="comment">        * @method cmd_backcolor</span>
<a name="l6041"><span class="linenum">6041</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6042"><span class="linenum">6042</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('backcolor') is used.</span>
<a name="l6043"><span class="linenum">6043</span></a>  <span class="comment">        */</span>
<a name="l6044"><span class="linenum">6044</span></a>          cmd_backcolor: function(value) {
<a name="l6045"><span class="linenum">6045</span></a>              var exec = true,
<a name="l6046"><span class="linenum">6046</span></a>                  el = this._getSelectedElement(),
<a name="l6047"><span class="linenum">6047</span></a>                  action = 'backcolor';
<a name="l6048"><span class="linenum">6048</span></a>  
<a name="l6049"><span class="linenum">6049</span></a>              if (this.browser.gecko || this.browser.opera) {
<a name="l6050"><span class="linenum">6050</span></a>                  this._setEditorStyle(true);
<a name="l6051"><span class="linenum">6051</span></a>                  action = 'hilitecolor';
<a name="l6052"><span class="linenum">6052</span></a>              }
<a name="l6053"><span class="linenum">6053</span></a>  
<a name="l6054"><span class="linenum">6054</span></a>              if (!this._isElement(el, 'body') &amp;&amp; !this._hasSelection()) {
<a name="l6055"><span class="linenum">6055</span></a>                  el.style.backgroundColor = value;
<a name="l6056"><span class="linenum">6056</span></a>                  this._selectNode(el);
<a name="l6057"><span class="linenum">6057</span></a>                  exec = false;
<a name="l6058"><span class="linenum">6058</span></a>              } else {
<a name="l6059"><span class="linenum">6059</span></a>                  if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert')) {
<a name="l6060"><span class="linenum">6060</span></a>                      el = this._createInsertElement({ backgroundColor: value });
<a name="l6061"><span class="linenum">6061</span></a>                  } else {
<a name="l6062"><span class="linenum">6062</span></a>                      this._createCurrentElement('span', { backgroundColor: value, color: el.style.color, fontSize: el.style.fontSize, fontFamily: el.style.fontFamily });
<a name="l6063"><span class="linenum">6063</span></a>                      this._selectNode(this.currentElement[0]);
<a name="l6064"><span class="linenum">6064</span></a>                  }
<a name="l6065"><span class="linenum">6065</span></a>                  exec = false;
<a name="l6066"><span class="linenum">6066</span></a>              }
<a name="l6067"><span class="linenum">6067</span></a>  
<a name="l6068"><span class="linenum">6068</span></a>              return [exec, action];
<a name="l6069"><span class="linenum">6069</span></a>          },
<a name="l6070"><span class="linenum">6070</span></a>          <span class="comment">/**</span>
<a name="l6071"><span class="linenum">6071</span></a>  <span class="comment">        * @method cmd_forecolor</span>
<a name="l6072"><span class="linenum">6072</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6073"><span class="linenum">6073</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('forecolor') is used.</span>
<a name="l6074"><span class="linenum">6074</span></a>  <span class="comment">        */</span>
<a name="l6075"><span class="linenum">6075</span></a>          cmd_forecolor: function(value) {
<a name="l6076"><span class="linenum">6076</span></a>              var exec = true,
<a name="l6077"><span class="linenum">6077</span></a>                  el = this._getSelectedElement();
<a name="l6078"><span class="linenum">6078</span></a>                  
<a name="l6079"><span class="linenum">6079</span></a>                  if (!this._isElement(el, 'body') &amp;&amp; !this._hasSelection()) {
<a name="l6080"><span class="linenum">6080</span></a>                      Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(el, 'color', value);
<a name="l6081"><span class="linenum">6081</span></a>                      this._selectNode(el);
<a name="l6082"><span class="linenum">6082</span></a>                      exec = false;
<a name="l6083"><span class="linenum">6083</span></a>                  } else {
<a name="l6084"><span class="linenum">6084</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert')) {
<a name="l6085"><span class="linenum">6085</span></a>                          el = this._createInsertElement({ color: value });
<a name="l6086"><span class="linenum">6086</span></a>                      } else {
<a name="l6087"><span class="linenum">6087</span></a>                          this._createCurrentElement('span', { color: value, fontSize: el.style.fontSize, fontFamily: el.style.fontFamily, backgroundColor: el.style.backgroundColor });
<a name="l6088"><span class="linenum">6088</span></a>                          this._selectNode(this.currentElement[0]);
<a name="l6089"><span class="linenum">6089</span></a>                      }
<a name="l6090"><span class="linenum">6090</span></a>                      exec = false;
<a name="l6091"><span class="linenum">6091</span></a>                  }
<a name="l6092"><span class="linenum">6092</span></a>                  return [exec];
<a name="l6093"><span class="linenum">6093</span></a>          },
<a name="l6094"><span class="linenum">6094</span></a>          <span class="comment">/**</span>
<a name="l6095"><span class="linenum">6095</span></a>  <span class="comment">        * @method cmd_unlink</span>
<a name="l6096"><span class="linenum">6096</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6097"><span class="linenum">6097</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('unlink') is used.</span>
<a name="l6098"><span class="linenum">6098</span></a>  <span class="comment">        */</span>
<a name="l6099"><span class="linenum">6099</span></a>          cmd_unlink: function(value) {
<a name="l6100"><span class="linenum">6100</span></a>              this._swapEl(this.currentElement[0], 'span', function(el) {
<a name="l6101"><span class="linenum">6101</span></a>                  el.className = 'yui-non';
<a name="l6102"><span class="linenum">6102</span></a>              });
<a name="l6103"><span class="linenum">6103</span></a>              return [false];
<a name="l6104"><span class="linenum">6104</span></a>          },
<a name="l6105"><span class="linenum">6105</span></a>          <span class="comment">/**</span>
<a name="l6106"><span class="linenum">6106</span></a>  <span class="comment">        * @method cmd_createlink</span>
<a name="l6107"><span class="linenum">6107</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6108"><span class="linenum">6108</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('createlink') is used.</span>
<a name="l6109"><span class="linenum">6109</span></a>  <span class="comment">        */</span>
<a name="l6110"><span class="linenum">6110</span></a>          cmd_createlink: function(value) {
<a name="l6111"><span class="linenum">6111</span></a>              var el = this._getSelectedElement(), _a = null;
<a name="l6112"><span class="linenum">6112</span></a>              if (this._hasParent(el, 'a')) {
<a name="l6113"><span class="linenum">6113</span></a>                  this.currentElement[0] = this._hasParent(el, 'a');
<a name="l6114"><span class="linenum">6114</span></a>              } else if (this._isElement(el, 'li')) {
<a name="l6115"><span class="linenum">6115</span></a>                  _a = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('a');
<a name="l6116"><span class="linenum">6116</span></a>                  _a.innerHTML = el.innerHTML;
<a name="l6117"><span class="linenum">6117</span></a>                  el.innerHTML = '';
<a name="l6118"><span class="linenum">6118</span></a>                  el.appendChild(_a);
<a name="l6119"><span class="linenum">6119</span></a>                  this.currentElement[0] = _a;
<a name="l6120"><span class="linenum">6120</span></a>              } else if (!this._isElement(el, 'a')) {
<a name="l6121"><span class="linenum">6121</span></a>                  this._createCurrentElement('a');
<a name="l6122"><span class="linenum">6122</span></a>                  _a = this._swapEl(this.currentElement[0], 'a');
<a name="l6123"><span class="linenum">6123</span></a>                  this.currentElement[0] = _a;
<a name="l6124"><span class="linenum">6124</span></a>              } else {
<a name="l6125"><span class="linenum">6125</span></a>                  this.currentElement[0] = el;
<a name="l6126"><span class="linenum">6126</span></a>              }
<a name="l6127"><span class="linenum">6127</span></a>              return [false];
<a name="l6128"><span class="linenum">6128</span></a>          },
<a name="l6129"><span class="linenum">6129</span></a>          <span class="comment">/**</span>
<a name="l6130"><span class="linenum">6130</span></a>  <span class="comment">        * @method cmd_insertimage</span>
<a name="l6131"><span class="linenum">6131</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6132"><span class="linenum">6132</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('insertimage') is used.</span>
<a name="l6133"><span class="linenum">6133</span></a>  <span class="comment">        */</span>
<a name="l6134"><span class="linenum">6134</span></a>          cmd_insertimage: function(value) {
<a name="l6135"><span class="linenum">6135</span></a>              var exec = true, _img = null, action = 'insertimage',
<a name="l6136"><span class="linenum">6136</span></a>                  el = this._getSelectedElement();
<a name="l6137"><span class="linenum">6137</span></a>  
<a name="l6138"><span class="linenum">6138</span></a>              if (value === '') {
<a name="l6139"><span class="linenum">6139</span></a>                  value = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage');
<a name="l6140"><span class="linenum">6140</span></a>              }
<a name="l6141"><span class="linenum">6141</span></a>  
<a name="l6142"><span class="linenum">6142</span></a>              <span class="comment">/*</span>
<a name="l6143"><span class="linenum">6143</span></a>  <span class="comment">            * @knownissue Safari Cursor Position</span>
<a name="l6144"><span class="linenum">6144</span></a>  <span class="comment">            * @browser Safari 2.x</span>
<a name="l6145"><span class="linenum">6145</span></a>  <span class="comment">            * @description The issue here is that we have no way of knowing where the cursor position is</span>
<a name="l6146"><span class="linenum">6146</span></a>  <span class="comment">            * inside of the iframe, so we have to place the newly inserted data in the best place that we can.</span>
<a name="l6147"><span class="linenum">6147</span></a>  <span class="comment">            */</span>
<a name="l6148"><span class="linenum">6148</span></a>              
<a name="l6149"><span class="linenum">6149</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('InsertImage: ' + el.tagName, 'info', 'SimpleEditor');
<a name="l6150"><span class="linenum">6150</span></a>              if (this._isElement(el, 'img')) {
<a name="l6151"><span class="linenum">6151</span></a>                  this.currentElement[0] = el;
<a name="l6152"><span class="linenum">6152</span></a>                  exec = false;
<a name="l6153"><span class="linenum">6153</span></a>              } else {
<a name="l6154"><span class="linenum">6154</span></a>                  if (this._getDoc().queryCommandEnabled(action)) {
<a name="l6155"><span class="linenum">6155</span></a>                      this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(action, false, value);
<a name="l6156"><span class="linenum">6156</span></a>                      var imgs = this._getDoc().getElementsByTagName('img');
<a name="l6157"><span class="linenum">6157</span></a>                      for (var i = 0; i &lt; imgs.length; i++) {
<a name="l6158"><span class="linenum">6158</span></a>                          if (!YAHOO.util.Dom.<a class="function" onClick="logFunction('hasClass')" href="../../../../../../_functions/hasclass.html" onMouseOver="funcPopup(event,'hasclass')">hasClass</a>(imgs[i], 'yui-img')) {
<a name="l6159"><span class="linenum">6159</span></a>                              YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(imgs[i], 'yui-img');
<a name="l6160"><span class="linenum">6160</span></a>                              this.currentElement[0] = imgs[i];
<a name="l6161"><span class="linenum">6161</span></a>                          }
<a name="l6162"><span class="linenum">6162</span></a>                      }
<a name="l6163"><span class="linenum">6163</span></a>                      exec = false;
<a name="l6164"><span class="linenum">6164</span></a>                  } else {
<a name="l6165"><span class="linenum">6165</span></a>                      if (el == this._getDoc().body) {
<a name="l6166"><span class="linenum">6166</span></a>                          _img = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('img');
<a name="l6167"><span class="linenum">6167</span></a>                          _img.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', value);
<a name="l6168"><span class="linenum">6168</span></a>                          YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_img, 'yui-img');
<a name="l6169"><span class="linenum">6169</span></a>                          this._getDoc().body.appendChild(_img);
<a name="l6170"><span class="linenum">6170</span></a>                      } else {
<a name="l6171"><span class="linenum">6171</span></a>                          this._createCurrentElement('img');
<a name="l6172"><span class="linenum">6172</span></a>                          _img = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('img');
<a name="l6173"><span class="linenum">6173</span></a>                          _img.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', value);
<a name="l6174"><span class="linenum">6174</span></a>                          YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_img, 'yui-img');
<a name="l6175"><span class="linenum">6175</span></a>                          this.currentElement[0].parentNode.replaceChild(_img, this.currentElement[0]);
<a name="l6176"><span class="linenum">6176</span></a>                      }
<a name="l6177"><span class="linenum">6177</span></a>                      this.currentElement[0] = _img;
<a name="l6178"><span class="linenum">6178</span></a>                      exec = false;
<a name="l6179"><span class="linenum">6179</span></a>                  }
<a name="l6180"><span class="linenum">6180</span></a>              }
<a name="l6181"><span class="linenum">6181</span></a>              return [exec];
<a name="l6182"><span class="linenum">6182</span></a>          },
<a name="l6183"><span class="linenum">6183</span></a>          <span class="comment">/**</span>
<a name="l6184"><span class="linenum">6184</span></a>  <span class="comment">        * @method cmd_inserthtml</span>
<a name="l6185"><span class="linenum">6185</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6186"><span class="linenum">6186</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('inserthtml') is used.</span>
<a name="l6187"><span class="linenum">6187</span></a>  <span class="comment">        */</span>
<a name="l6188"><span class="linenum">6188</span></a>          cmd_inserthtml: function(value) {
<a name="l6189"><span class="linenum">6189</span></a>              var exec = true, action = 'inserthtml', _span = null, _range = null;
<a name="l6190"><span class="linenum">6190</span></a>              <span class="comment">/*</span>
<a name="l6191"><span class="linenum">6191</span></a>  <span class="comment">            * @knownissue Safari cursor position</span>
<a name="l6192"><span class="linenum">6192</span></a>  <span class="comment">            * @browser Safari 2.x</span>
<a name="l6193"><span class="linenum">6193</span></a>  <span class="comment">            * @description The issue here is that we have no way of knowing where the cursor position is</span>
<a name="l6194"><span class="linenum">6194</span></a>  <span class="comment">            * inside of the iframe, so we have to place the newly inserted data in the best place that we can.</span>
<a name="l6195"><span class="linenum">6195</span></a>  <span class="comment">            */</span>
<a name="l6196"><span class="linenum">6196</span></a>              if (this.browser.webkit &amp;&amp; !this._getDoc().queryCommandEnabled(action)) {
<a name="l6197"><span class="linenum">6197</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('More Safari DOM tricks (inserthtml)', 'info', 'EditorSafari');
<a name="l6198"><span class="linenum">6198</span></a>                  this._createCurrentElement('img');
<a name="l6199"><span class="linenum">6199</span></a>                  _span = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l6200"><span class="linenum">6200</span></a>                  _span.innerHTML = value;
<a name="l6201"><span class="linenum">6201</span></a>                  this.currentElement[0].parentNode.replaceChild(_span, this.currentElement[0]);
<a name="l6202"><span class="linenum">6202</span></a>                  exec = false;
<a name="l6203"><span class="linenum">6203</span></a>              } else if (this.browser.ie) {
<a name="l6204"><span class="linenum">6204</span></a>                  _range = this._getRange();
<a name="l6205"><span class="linenum">6205</span></a>                  if (_range.item) {
<a name="l6206"><span class="linenum">6206</span></a>                      _range.<a class="function" onClick="logFunction('item')" href="../../../../../../_functions/item.html" onMouseOver="funcPopup(event,'item')">item</a>(0).outerHTML = value;
<a name="l6207"><span class="linenum">6207</span></a>                  } else {
<a name="l6208"><span class="linenum">6208</span></a>                      _range.pasteHTML(value);
<a name="l6209"><span class="linenum">6209</span></a>                  }
<a name="l6210"><span class="linenum">6210</span></a>                  exec = false;                    
<a name="l6211"><span class="linenum">6211</span></a>              }
<a name="l6212"><span class="linenum">6212</span></a>              return [exec];
<a name="l6213"><span class="linenum">6213</span></a>          },
<a name="l6214"><span class="linenum">6214</span></a>          <span class="comment">/**</span>
<a name="l6215"><span class="linenum">6215</span></a>  <span class="comment">        * @method cmd_list</span>
<a name="l6216"><span class="linenum">6216</span></a>  <span class="comment">        * @param tag The tag of the list you want to create (eg, ul or ol)</span>
<a name="l6217"><span class="linenum">6217</span></a>  <span class="comment">        * @description This is a combined execCommand override method. It is called from the cmd_insertorderedlist and cmd_insertunorderedlist methods.</span>
<a name="l6218"><span class="linenum">6218</span></a>  <span class="comment">        */</span>
<a name="l6219"><span class="linenum">6219</span></a>          cmd_list: function(tag) {
<a name="l6220"><span class="linenum">6220</span></a>              var exec = true, list = null, li = 0, el = null, str = '',
<a name="l6221"><span class="linenum">6221</span></a>                  selEl = this._getSelectedElement(), action = 'insertorderedlist';
<a name="l6222"><span class="linenum">6222</span></a>                  if (tag == 'ul') {
<a name="l6223"><span class="linenum">6223</span></a>                      action = 'insertunorderedlist';
<a name="l6224"><span class="linenum">6224</span></a>                  }
<a name="l6225"><span class="linenum">6225</span></a>              <span class="comment">/*</span>
<a name="l6226"><span class="linenum">6226</span></a>  <span class="comment">            * @knownissue Safari 2.+ doesn't support ordered and unordered lists</span>
<a name="l6227"><span class="linenum">6227</span></a>  <span class="comment">            * @browser Safari 2.x</span>
<a name="l6228"><span class="linenum">6228</span></a>  <span class="comment">            * The issue with this workaround is that when applied to a set of text</span>
<a name="l6229"><span class="linenum">6229</span></a>  <span class="comment">            * that has BR's in it, Safari may or may not pick up the individual items as</span>
<a name="l6230"><span class="linenum">6230</span></a>  <span class="comment">            * list items. This is fixed in WebKit (Safari 3)</span>
<a name="l6231"><span class="linenum">6231</span></a>  <span class="comment">            * 2.6.0: Seems there are still some issues with List Creation and Safari 3, reverting to previously working Safari 2.x code</span>
<a name="l6232"><span class="linenum">6232</span></a>  <span class="comment">            */</span>
<a name="l6233"><span class="linenum">6233</span></a>  <span class="comment">            //if ((this.browser.webkit &amp;&amp; !this._getDoc().queryCommandEnabled(action))) {</span>
<a name="l6234"><span class="linenum">6234</span></a>              if ((this.browser.webkit &amp;&amp; !this.browser.webkit4) || (this.browser.opera)) {
<a name="l6235"><span class="linenum">6235</span></a>                  if (this._isElement(selEl, 'li') &amp;&amp; this._isElement(selEl.parentNode, tag)) {
<a name="l6236"><span class="linenum">6236</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('We already have a list, undo it', 'info', 'SimpleEditor');
<a name="l6237"><span class="linenum">6237</span></a>                      el = selEl.parentNode;
<a name="l6238"><span class="linenum">6238</span></a>                      list = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l6239"><span class="linenum">6239</span></a>                      YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(list, 'yui-non');
<a name="l6240"><span class="linenum">6240</span></a>                      str = '';
<a name="l6241"><span class="linenum">6241</span></a>                      var lis = el.getElementsByTagName('li'), p_tag = ((this.browser.opera &amp;&amp; this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('ptags')) ? 'p' : 'div');
<a name="l6242"><span class="linenum">6242</span></a>                      for (li = 0; li &lt; lis.length; li++) {
<a name="l6243"><span class="linenum">6243</span></a>                          str += '&lt;' + p_tag + '&gt;' + lis[li].innerHTML + '&lt;/' + p_tag + '&gt;';
<a name="l6244"><span class="linenum">6244</span></a>                      }
<a name="l6245"><span class="linenum">6245</span></a>                      list.innerHTML = str;
<a name="l6246"><span class="linenum">6246</span></a>                      this.currentElement[0] = el;
<a name="l6247"><span class="linenum">6247</span></a>                      this.currentElement[0].parentNode.replaceChild(list, this.currentElement[0]);
<a name="l6248"><span class="linenum">6248</span></a>                  } else {
<a name="l6249"><span class="linenum">6249</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Create list item', 'info', 'SimpleEditor');
<a name="l6250"><span class="linenum">6250</span></a>                      this._createCurrentElement(tag.toLowerCase());
<a name="l6251"><span class="linenum">6251</span></a>                      list = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>(tag);
<a name="l6252"><span class="linenum">6252</span></a>                      for (li = 0; li &lt; this.currentElement.length; li++) {
<a name="l6253"><span class="linenum">6253</span></a>                          var newli = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('li');
<a name="l6254"><span class="linenum">6254</span></a>                          newli.innerHTML = this.currentElement[li].innerHTML + '&lt;span class=&quot;yui-non&quot;&gt;&amp;nbsp;&lt;/span&gt;&amp;nbsp;';
<a name="l6255"><span class="linenum">6255</span></a>                          list.appendChild(newli);
<a name="l6256"><span class="linenum">6256</span></a>                          if (li &gt; 0) {
<a name="l6257"><span class="linenum">6257</span></a>                              this.currentElement[li].parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this.currentElement[li]);
<a name="l6258"><span class="linenum">6258</span></a>                          }
<a name="l6259"><span class="linenum">6259</span></a>                      }
<a name="l6260"><span class="linenum">6260</span></a>                      var b_tag = ((this.browser.opera) ? '&lt;BR&gt;' : '&lt;br&gt;'),
<a name="l6261"><span class="linenum">6261</span></a>                      items = list.firstChild.innerHTML.<a class="phpfunction" onClick="logFunction('split')" href="../../../../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>(b_tag), i, item;
<a name="l6262"><span class="linenum">6262</span></a>                      if (items.length &gt; 0) {
<a name="l6263"><span class="linenum">6263</span></a>                          list.innerHTML = '';
<a name="l6264"><span class="linenum">6264</span></a>                          for (i = 0; i &lt; items.length; i++) {
<a name="l6265"><span class="linenum">6265</span></a>                              item = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('li');
<a name="l6266"><span class="linenum">6266</span></a>                              item.innerHTML = items[i];
<a name="l6267"><span class="linenum">6267</span></a>                              list.appendChild(item);
<a name="l6268"><span class="linenum">6268</span></a>                          }
<a name="l6269"><span class="linenum">6269</span></a>                      }
<a name="l6270"><span class="linenum">6270</span></a>  
<a name="l6271"><span class="linenum">6271</span></a>                      this.currentElement[0].parentNode.replaceChild(list, this.currentElement[0]);
<a name="l6272"><span class="linenum">6272</span></a>                      this.currentElement[0] = list;
<a name="l6273"><span class="linenum">6273</span></a>                      var _h = this.currentElement[0].firstChild;
<a name="l6274"><span class="linenum">6274</span></a>                      _h = Dom.<a class="function" onClick="logFunction('getElementsByClassName')" href="../../../../../../_functions/getelementsbyclassname.html" onMouseOver="funcPopup(event,'getelementsbyclassname')">getElementsByClassName</a>('yui-non', 'span', _h)[0];
<a name="l6275"><span class="linenum">6275</span></a>                      if (this.browser.webkit) {
<a name="l6276"><span class="linenum">6276</span></a>                          this._getSelection().setBaseAndExtent(_h, 1, _h, _h.innerText.length);
<a name="l6277"><span class="linenum">6277</span></a>                      }
<a name="l6278"><span class="linenum">6278</span></a>                  }
<a name="l6279"><span class="linenum">6279</span></a>                  exec = false;
<a name="l6280"><span class="linenum">6280</span></a>              } else {
<a name="l6281"><span class="linenum">6281</span></a>                  el = this._getSelectedElement();
<a name="l6282"><span class="linenum">6282</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>(el.tagName);
<a name="l6283"><span class="linenum">6283</span></a>                  if (this._isElement(el, 'li') &amp;&amp; this._isElement(el.parentNode, tag) || (this.browser.ie &amp;&amp; this._isElement(this._getRange().parentElement, 'li')) || (this.browser.ie &amp;&amp; this._isElement(el, 'ul')) || (this.browser.ie &amp;&amp; this._isElement(el, 'ol'))) { //we are in a list..
<a name="l6284"><span class="linenum">6284</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('We already have a list, undo it', 'info', 'SimpleEditor');
<a name="l6285"><span class="linenum">6285</span></a>                      if (this.browser.ie) {
<a name="l6286"><span class="linenum">6286</span></a>                          if ((this.browser.ie &amp;&amp; this._isElement(el, 'ul')) || (this.browser.ie &amp;&amp; this._isElement(el, 'ol'))) {
<a name="l6287"><span class="linenum">6287</span></a>                              el = el.getElementsByTagName('li')[0];
<a name="l6288"><span class="linenum">6288</span></a>                          }
<a name="l6289"><span class="linenum">6289</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Undo IE', 'info', 'SimpleEditor');
<a name="l6290"><span class="linenum">6290</span></a>                          str = '';
<a name="l6291"><span class="linenum">6291</span></a>                          var lis2 = el.parentNode.getElementsByTagName('li');
<a name="l6292"><span class="linenum">6292</span></a>                          for (var j = 0; j &lt; lis2.length; j++) {
<a name="l6293"><span class="linenum">6293</span></a>                              str += lis2[j].innerHTML + '&lt;br&gt;';
<a name="l6294"><span class="linenum">6294</span></a>                          }
<a name="l6295"><span class="linenum">6295</span></a>                          var newEl = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l6296"><span class="linenum">6296</span></a>                          newEl.innerHTML = str;
<a name="l6297"><span class="linenum">6297</span></a>                          el.parentNode.parentNode.replaceChild(newEl, el.parentNode);
<a name="l6298"><span class="linenum">6298</span></a>                      } else {
<a name="l6299"><span class="linenum">6299</span></a>                          this.nodeChange();
<a name="l6300"><span class="linenum">6300</span></a>                          this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(action, '', el.parentNode);
<a name="l6301"><span class="linenum">6301</span></a>                          this.nodeChange();
<a name="l6302"><span class="linenum">6302</span></a>                      }
<a name="l6303"><span class="linenum">6303</span></a>                      exec = false;
<a name="l6304"><span class="linenum">6304</span></a>                  }
<a name="l6305"><span class="linenum">6305</span></a>                  if (this.browser.opera) {
<a name="l6306"><span class="linenum">6306</span></a>                      var self = this;
<a name="l6307"><span class="linenum">6307</span></a>                      window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l6308"><span class="linenum">6308</span></a>                          var liso = self._getDoc().getElementsByTagName('li');
<a name="l6309"><span class="linenum">6309</span></a>                          for (var i = 0; i &lt; liso.length; i++) {
<a name="l6310"><span class="linenum">6310</span></a>                              if (liso[i].innerHTML.toLowerCase() == '&lt;br&gt;') {
<a name="l6311"><span class="linenum">6311</span></a>                                  liso[i].parentNode.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(liso[i].parentNode);
<a name="l6312"><span class="linenum">6312</span></a>                              }
<a name="l6313"><span class="linenum">6313</span></a>                          }
<a name="l6314"><span class="linenum">6314</span></a>                      },30);
<a name="l6315"><span class="linenum">6315</span></a>                  }
<a name="l6316"><span class="linenum">6316</span></a>                  if (this.browser.ie &amp;&amp; exec) {
<a name="l6317"><span class="linenum">6317</span></a>                      var html = '';
<a name="l6318"><span class="linenum">6318</span></a>                      if (this._getRange().html) {
<a name="l6319"><span class="linenum">6319</span></a>                          html = '&lt;li&gt;' + this._getRange().html+ '&lt;/li&gt;';
<a name="l6320"><span class="linenum">6320</span></a>                      } else {
<a name="l6321"><span class="linenum">6321</span></a>                          var t = this._getRange().text.<a class="phpfunction" onClick="logFunction('split')" href="../../../../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>('\n');
<a name="l6322"><span class="linenum">6322</span></a>                          if (t.length &gt; 1) {
<a name="l6323"><span class="linenum">6323</span></a>                              html = '';
<a name="l6324"><span class="linenum">6324</span></a>                              for (var ie = 0; ie &lt; t.length; ie++) {
<a name="l6325"><span class="linenum">6325</span></a>                                  html += '&lt;li&gt;' + t[ie] + '&lt;/li&gt;';
<a name="l6326"><span class="linenum">6326</span></a>                              }
<a name="l6327"><span class="linenum">6327</span></a>                          } else {
<a name="l6328"><span class="linenum">6328</span></a>                              var txt = this._getRange().text;
<a name="l6329"><span class="linenum">6329</span></a>                              if (txt === '') {
<a name="l6330"><span class="linenum">6330</span></a>                                  html = '&lt;li id=&quot;new_list_item&quot;&gt;' + txt + '&lt;/li&gt;';
<a name="l6331"><span class="linenum">6331</span></a>                              } else {
<a name="l6332"><span class="linenum">6332</span></a>                                  html = '&lt;li&gt;' + txt + '&lt;/li&gt;';
<a name="l6333"><span class="linenum">6333</span></a>                              }
<a name="l6334"><span class="linenum">6334</span></a>                          }
<a name="l6335"><span class="linenum">6335</span></a>                      }
<a name="l6336"><span class="linenum">6336</span></a>                      this._getRange().pasteHTML('&lt;' + tag + '&gt;' + html + '&lt;/' + tag + '&gt;');
<a name="l6337"><span class="linenum">6337</span></a>                      var new_item = this._getDoc().getElementById('new_list_item');
<a name="l6338"><span class="linenum">6338</span></a>                      if (new_item) {
<a name="l6339"><span class="linenum">6339</span></a>                          var range = this._getDoc().body.createTextRange();
<a name="l6340"><span class="linenum">6340</span></a>                          range.moveToElementText(new_item);
<a name="l6341"><span class="linenum">6341</span></a>                          range.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false);
<a name="l6342"><span class="linenum">6342</span></a>                          range.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();                       
<a name="l6343"><span class="linenum">6343</span></a>                          new_item.id = '';
<a name="l6344"><span class="linenum">6344</span></a>                      }
<a name="l6345"><span class="linenum">6345</span></a>                      exec = false;
<a name="l6346"><span class="linenum">6346</span></a>                  }
<a name="l6347"><span class="linenum">6347</span></a>              }
<a name="l6348"><span class="linenum">6348</span></a>              return exec;
<a name="l6349"><span class="linenum">6349</span></a>          },
<a name="l6350"><span class="linenum">6350</span></a>          <span class="comment">/**</span>
<a name="l6351"><span class="linenum">6351</span></a>  <span class="comment">        * @method cmd_insertorderedlist</span>
<a name="l6352"><span class="linenum">6352</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6353"><span class="linenum">6353</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('insertorderedlist ') is used.</span>
<a name="l6354"><span class="linenum">6354</span></a>  <span class="comment">        */</span>
<a name="l6355"><span class="linenum">6355</span></a>          cmd_insertorderedlist: function(value) {
<a name="l6356"><span class="linenum">6356</span></a>              return [this.cmd_list('ol')];
<a name="l6357"><span class="linenum">6357</span></a>          },
<a name="l6358"><span class="linenum">6358</span></a>          <span class="comment">/**</span>
<a name="l6359"><span class="linenum">6359</span></a>  <span class="comment">        * @method cmd_insertunorderedlist </span>
<a name="l6360"><span class="linenum">6360</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6361"><span class="linenum">6361</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('insertunorderedlist') is used.</span>
<a name="l6362"><span class="linenum">6362</span></a>  <span class="comment">        */</span>
<a name="l6363"><span class="linenum">6363</span></a>          cmd_insertunorderedlist: function(value) {
<a name="l6364"><span class="linenum">6364</span></a>              return [this.cmd_list('ul')];
<a name="l6365"><span class="linenum">6365</span></a>          },
<a name="l6366"><span class="linenum">6366</span></a>          <span class="comment">/**</span>
<a name="l6367"><span class="linenum">6367</span></a>  <span class="comment">        * @method cmd_fontname</span>
<a name="l6368"><span class="linenum">6368</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6369"><span class="linenum">6369</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('fontname') is used.</span>
<a name="l6370"><span class="linenum">6370</span></a>  <span class="comment">        */</span>
<a name="l6371"><span class="linenum">6371</span></a>          cmd_fontname: function(value) {
<a name="l6372"><span class="linenum">6372</span></a>              var exec = true,
<a name="l6373"><span class="linenum">6373</span></a>                  selEl = this._getSelectedElement();
<a name="l6374"><span class="linenum">6374</span></a>  
<a name="l6375"><span class="linenum">6375</span></a>              this.currentFont = value;
<a name="l6376"><span class="linenum">6376</span></a>              if (selEl &amp;&amp; selEl.tagName &amp;&amp; !this._hasSelection() &amp;&amp; !this._isElement(selEl, 'body') &amp;&amp; !this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert')) {
<a name="l6377"><span class="linenum">6377</span></a>                  YAHOO.util.Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(selEl, 'font-family', value);
<a name="l6378"><span class="linenum">6378</span></a>                  exec = false;
<a name="l6379"><span class="linenum">6379</span></a>              } else if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert') &amp;&amp; !this._hasSelection()) {
<a name="l6380"><span class="linenum">6380</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('No selection and no selected element and we are in insert mode', 'info', 'SimpleEditor');
<a name="l6381"><span class="linenum">6381</span></a>                  var el = this._createInsertElement({ fontFamily: value });
<a name="l6382"><span class="linenum">6382</span></a>                  exec = false;
<a name="l6383"><span class="linenum">6383</span></a>              }
<a name="l6384"><span class="linenum">6384</span></a>              return [exec];
<a name="l6385"><span class="linenum">6385</span></a>          },
<a name="l6386"><span class="linenum">6386</span></a>          <span class="comment">/**</span>
<a name="l6387"><span class="linenum">6387</span></a>  <span class="comment">        * @method cmd_fontsize</span>
<a name="l6388"><span class="linenum">6388</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l6389"><span class="linenum">6389</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('fontsize') is used.</span>
<a name="l6390"><span class="linenum">6390</span></a>  <span class="comment">        */</span>
<a name="l6391"><span class="linenum">6391</span></a>          cmd_fontsize: function(value) {
<a name="l6392"><span class="linenum">6392</span></a>              var el = null, go = true;
<a name="l6393"><span class="linenum">6393</span></a>              el = this._getSelectedElement();
<a name="l6394"><span class="linenum">6394</span></a>              if (this.browser.webkit) {
<a name="l6395"><span class="linenum">6395</span></a>                  if (this.currentElement[0]) {
<a name="l6396"><span class="linenum">6396</span></a>                      if (el == this.currentElement[0]) {
<a name="l6397"><span class="linenum">6397</span></a>                          go = false;
<a name="l6398"><span class="linenum">6398</span></a>                          YAHOO.util.Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(el, 'fontSize', value);
<a name="l6399"><span class="linenum">6399</span></a>                          this._selectNode(el);
<a name="l6400"><span class="linenum">6400</span></a>                          this.currentElement[0] = el;
<a name="l6401"><span class="linenum">6401</span></a>                      }
<a name="l6402"><span class="linenum">6402</span></a>                  }
<a name="l6403"><span class="linenum">6403</span></a>              }
<a name="l6404"><span class="linenum">6404</span></a>              if (go) {
<a name="l6405"><span class="linenum">6405</span></a>                  if (!this._isElement(this._getSelectedElement(), 'body') &amp;&amp; (!this._hasSelection())) {
<a name="l6406"><span class="linenum">6406</span></a>                      el = this._getSelectedElement();
<a name="l6407"><span class="linenum">6407</span></a>                      YAHOO.util.Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(el, 'fontSize', value);
<a name="l6408"><span class="linenum">6408</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert') &amp;&amp; this.browser.ie) {
<a name="l6409"><span class="linenum">6409</span></a>                          var r = this._getRange();
<a name="l6410"><span class="linenum">6410</span></a>                          r.<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(false);
<a name="l6411"><span class="linenum">6411</span></a>                          r.<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l6412"><span class="linenum">6412</span></a>                      } else {
<a name="l6413"><span class="linenum">6413</span></a>                          this._selectNode(el);
<a name="l6414"><span class="linenum">6414</span></a>                      }
<a name="l6415"><span class="linenum">6415</span></a>                  } else if (this.currentElement &amp;&amp; (this.currentElement.length &gt; 0) &amp;&amp; (!this._hasSelection()) &amp;&amp; (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert'))) {
<a name="l6416"><span class="linenum">6416</span></a>                      YAHOO.util.Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(this.currentElement, 'fontSize', value);
<a name="l6417"><span class="linenum">6417</span></a>                  } else {
<a name="l6418"><span class="linenum">6418</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('insert') &amp;&amp; !this._hasSelection()) {
<a name="l6419"><span class="linenum">6419</span></a>                          el = this._createInsertElement({ fontSize: value });
<a name="l6420"><span class="linenum">6420</span></a>                          this.currentElement[0] = el;
<a name="l6421"><span class="linenum">6421</span></a>                          this._selectNode(this.currentElement[0]);
<a name="l6422"><span class="linenum">6422</span></a>                      } else {
<a name="l6423"><span class="linenum">6423</span></a>                          this._createCurrentElement('span', {'fontSize': value, fontFamily: el.style.fontFamily, color: el.style.color, backgroundColor: el.style.backgroundColor });
<a name="l6424"><span class="linenum">6424</span></a>                          this._selectNode(this.currentElement[0]);
<a name="l6425"><span class="linenum">6425</span></a>                      }
<a name="l6426"><span class="linenum">6426</span></a>                  }
<a name="l6427"><span class="linenum">6427</span></a>              }
<a name="l6428"><span class="linenum">6428</span></a>              return [false];
<a name="l6429"><span class="linenum">6429</span></a>          },
<a name="l6430"><span class="linenum">6430</span></a>  <span class="comment">    /* }}} */</span>
<a name="l6431"><span class="linenum">6431</span></a>          <span class="comment">/**</span>
<a name="l6432"><span class="linenum">6432</span></a>  <span class="comment">        * @private</span>
<a name="l6433"><span class="linenum">6433</span></a>  <span class="comment">        * @method _swapEl</span>
<a name="l6434"><span class="linenum">6434</span></a>  <span class="comment">        * @param {HTMLElement} el The element to swap with</span>
<a name="l6435"><span class="linenum">6435</span></a>  <span class="comment">        * @param {String} tagName The tagname of the element that you wish to create</span>
<a name="l6436"><span class="linenum">6436</span></a>  <span class="comment">        * @param {Function} callback (optional) A function to run on the element after it is created, but before it is replaced. An element reference is passed to this function.</span>
<a name="l6437"><span class="linenum">6437</span></a>  <span class="comment">        * @description This function will create a new element in the DOM and populate it with the contents of another element. Then it will assume it's place.</span>
<a name="l6438"><span class="linenum">6438</span></a>  <span class="comment">        */</span>
<a name="l6439"><span class="linenum">6439</span></a>          _swapEl: function(el, tagName, callback) {
<a name="l6440"><span class="linenum">6440</span></a>              var _el = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>(tagName);
<a name="l6441"><span class="linenum">6441</span></a>              if (el) {
<a name="l6442"><span class="linenum">6442</span></a>                  _el.innerHTML = el.innerHTML;
<a name="l6443"><span class="linenum">6443</span></a>              }
<a name="l6444"><span class="linenum">6444</span></a>              if (typeof callback == 'function') {
<a name="l6445"><span class="linenum">6445</span></a>                  callback.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, _el);
<a name="l6446"><span class="linenum">6446</span></a>              }
<a name="l6447"><span class="linenum">6447</span></a>              if (el) {
<a name="l6448"><span class="linenum">6448</span></a>                  el.parentNode.replaceChild(_el, el);
<a name="l6449"><span class="linenum">6449</span></a>              }
<a name="l6450"><span class="linenum">6450</span></a>              return _el;
<a name="l6451"><span class="linenum">6451</span></a>          },
<a name="l6452"><span class="linenum">6452</span></a>          <span class="comment">/**</span>
<a name="l6453"><span class="linenum">6453</span></a>  <span class="comment">        * @private</span>
<a name="l6454"><span class="linenum">6454</span></a>  <span class="comment">        * @method _createInsertElement</span>
<a name="l6455"><span class="linenum">6455</span></a>  <span class="comment">        * @description Creates a new &quot;currentElement&quot; then adds some text (and other things) to make it selectable and stylable. Then the user can continue typing.</span>
<a name="l6456"><span class="linenum">6456</span></a>  <span class="comment">        * @param {Object} css (optional) Object literal containing styles to apply to the new element.</span>
<a name="l6457"><span class="linenum">6457</span></a>  <span class="comment">        * @return {HTMLElement}</span>
<a name="l6458"><span class="linenum">6458</span></a>  <span class="comment">        */</span>
<a name="l6459"><span class="linenum">6459</span></a>          _createInsertElement: function(css) {
<a name="l6460"><span class="linenum">6460</span></a>              this._createCurrentElement('span', css);
<a name="l6461"><span class="linenum">6461</span></a>              var el = this.currentElement[0];
<a name="l6462"><span class="linenum">6462</span></a>              if (this.browser.webkit) {
<a name="l6463"><span class="linenum">6463</span></a>  <span class="comment">                //Little Safari Hackery here..</span>
<a name="l6464"><span class="linenum">6464</span></a>                  el.innerHTML = '&lt;span class=&quot;yui-non&quot;&gt;&amp;nbsp;&lt;/span&gt;';
<a name="l6465"><span class="linenum">6465</span></a>                  el = el.firstChild;
<a name="l6466"><span class="linenum">6466</span></a>                  this._getSelection().setBaseAndExtent(el, 1, el, el.innerText.length);                    
<a name="l6467"><span class="linenum">6467</span></a>              } else if (this.browser.ie || this.browser.opera) {
<a name="l6468"><span class="linenum">6468</span></a>                  el.innerHTML = '&amp;nbsp;';
<a name="l6469"><span class="linenum">6469</span></a>              }
<a name="l6470"><span class="linenum">6470</span></a>              this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l6471"><span class="linenum">6471</span></a>              this._selectNode(el, true);
<a name="l6472"><span class="linenum">6472</span></a>              return el;
<a name="l6473"><span class="linenum">6473</span></a>          },
<a name="l6474"><span class="linenum">6474</span></a>          <span class="comment">/**</span>
<a name="l6475"><span class="linenum">6475</span></a>  <span class="comment">        * @private</span>
<a name="l6476"><span class="linenum">6476</span></a>  <span class="comment">        * @method _createCurrentElement</span>
<a name="l6477"><span class="linenum">6477</span></a>  <span class="comment">        * @param {String} tagName (optional defaults to a) The tagname of the element that you wish to create</span>
<a name="l6478"><span class="linenum">6478</span></a>  <span class="comment">        * @param {Object} tagStyle (optional) Object literal containing styles to apply to the new element.</span>
<a name="l6479"><span class="linenum">6479</span></a>  <span class="comment">        * @description This is a work around for the various browser issues with execCommand. This method will run &lt;code&gt;execCommand('fontname', false, 'yui-tmp')&lt;/code&gt; on the given selection.</span>
<a name="l6480"><span class="linenum">6480</span></a>  <span class="comment">        * It will then search the document for an element with the font-family set to &lt;strong&gt;yui-tmp&lt;/strong&gt; and replace that with another span that has other information in it, then assign the new span to the </span>
<a name="l6481"><span class="linenum">6481</span></a>  <span class="comment">        * &lt;code&gt;this.currentElement&lt;/code&gt; array, so we now have element references to the elements that were just modified. At this point we can use standard DOM manipulation to change them as we see fit.</span>
<a name="l6482"><span class="linenum">6482</span></a>  <span class="comment">        */</span>
<a name="l6483"><span class="linenum">6483</span></a>          _createCurrentElement: function(tagName, tagStyle) {
<a name="l6484"><span class="linenum">6484</span></a>              tagName = ((tagName) ? tagName : 'a');
<a name="l6485"><span class="linenum">6485</span></a>              var tar = null,
<a name="l6486"><span class="linenum">6486</span></a>                  el = [],
<a name="l6487"><span class="linenum">6487</span></a>                  _doc = this._getDoc();
<a name="l6488"><span class="linenum">6488</span></a>              
<a name="l6489"><span class="linenum">6489</span></a>              if (this.currentFont) {
<a name="l6490"><span class="linenum">6490</span></a>                  if (!tagStyle) {
<a name="l6491"><span class="linenum">6491</span></a>                      tagStyle = {};
<a name="l6492"><span class="linenum">6492</span></a>                  }
<a name="l6493"><span class="linenum">6493</span></a>                  tagStyle.fontFamily = this.currentFont;
<a name="l6494"><span class="linenum">6494</span></a>                  this.currentFont = null;
<a name="l6495"><span class="linenum">6495</span></a>              }
<a name="l6496"><span class="linenum">6496</span></a>              this.currentElement = [];
<a name="l6497"><span class="linenum">6497</span></a>  
<a name="l6498"><span class="linenum">6498</span></a>              var _elCreate = function(tagName, tagStyle) {
<a name="l6499"><span class="linenum">6499</span></a>                  var el = null;
<a name="l6500"><span class="linenum">6500</span></a>                  tagName = ((tagName) ? tagName : 'span');
<a name="l6501"><span class="linenum">6501</span></a>                  tagName = tagName.toLowerCase();
<a name="l6502"><span class="linenum">6502</span></a>                  switch (tagName) {
<a name="l6503"><span class="linenum">6503</span></a>                      case 'h1':
<a name="l6504"><span class="linenum">6504</span></a>                      case 'h2':
<a name="l6505"><span class="linenum">6505</span></a>                      case 'h3':
<a name="l6506"><span class="linenum">6506</span></a>                      case 'h4':
<a name="l6507"><span class="linenum">6507</span></a>                      case 'h5':
<a name="l6508"><span class="linenum">6508</span></a>                      case 'h6':
<a name="l6509"><span class="linenum">6509</span></a>                          el = _doc.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>(tagName);
<a name="l6510"><span class="linenum">6510</span></a>                          break;
<a name="l6511"><span class="linenum">6511</span></a>                      default:
<a name="l6512"><span class="linenum">6512</span></a>                          el = _doc.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>(tagName);
<a name="l6513"><span class="linenum">6513</span></a>                          if (tagName === 'span') {
<a name="l6514"><span class="linenum">6514</span></a>                              YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(el, 'yui-tag-' + tagName);
<a name="l6515"><span class="linenum">6515</span></a>                              YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(el, 'yui-tag');
<a name="l6516"><span class="linenum">6516</span></a>                              el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('tag', tagName);
<a name="l6517"><span class="linenum">6517</span></a>                          }
<a name="l6518"><span class="linenum">6518</span></a>  
<a name="l6519"><span class="linenum">6519</span></a>                          for (var k in tagStyle) {
<a name="l6520"><span class="linenum">6520</span></a>                              if (YAHOO.lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(tagStyle, k)) {
<a name="l6521"><span class="linenum">6521</span></a>                                  el.style[k] = tagStyle[k];
<a name="l6522"><span class="linenum">6522</span></a>                              }
<a name="l6523"><span class="linenum">6523</span></a>                          }
<a name="l6524"><span class="linenum">6524</span></a>                          break;
<a name="l6525"><span class="linenum">6525</span></a>                  }
<a name="l6526"><span class="linenum">6526</span></a>                  return el;
<a name="l6527"><span class="linenum">6527</span></a>              };
<a name="l6528"><span class="linenum">6528</span></a>  
<a name="l6529"><span class="linenum">6529</span></a>              if (!this._hasSelection()) {
<a name="l6530"><span class="linenum">6530</span></a>                  if (this._getDoc().queryCommandEnabled('insertimage')) {
<a name="l6531"><span class="linenum">6531</span></a>                      this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('insertimage', false, 'yui-tmp-img');
<a name="l6532"><span class="linenum">6532</span></a>                      var imgs = this._getDoc().getElementsByTagName('img');
<a name="l6533"><span class="linenum">6533</span></a>                      for (var j = 0; j &lt; imgs.length; j++) {
<a name="l6534"><span class="linenum">6534</span></a>                          if (imgs[j].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src', 2) == 'yui-tmp-img') {
<a name="l6535"><span class="linenum">6535</span></a>                              el = _elCreate(tagName, tagStyle);
<a name="l6536"><span class="linenum">6536</span></a>                              imgs[j].parentNode.replaceChild(el, imgs[j]);
<a name="l6537"><span class="linenum">6537</span></a>                              this.currentElement[this.currentElement.length] = el;
<a name="l6538"><span class="linenum">6538</span></a>                          }
<a name="l6539"><span class="linenum">6539</span></a>                      }
<a name="l6540"><span class="linenum">6540</span></a>                  } else {
<a name="l6541"><span class="linenum">6541</span></a>                      if (this.currentEvent) {
<a name="l6542"><span class="linenum">6542</span></a>                          tar = YAHOO.util.Event.<a class="function" onClick="logFunction('getTarget')" href="../../../../../../_functions/gettarget.html" onMouseOver="funcPopup(event,'gettarget')">getTarget</a>(this.currentEvent);
<a name="l6543"><span class="linenum">6543</span></a>                      } else {
<a name="l6544"><span class="linenum">6544</span></a>  <span class="comment">                        //For Safari..</span>
<a name="l6545"><span class="linenum">6545</span></a>                          tar = this._getDoc().body;                        
<a name="l6546"><span class="linenum">6546</span></a>                      }
<a name="l6547"><span class="linenum">6547</span></a>                  }
<a name="l6548"><span class="linenum">6548</span></a>                  if (tar) {
<a name="l6549"><span class="linenum">6549</span></a>                      <span class="comment">/*</span>
<a name="l6550"><span class="linenum">6550</span></a>  <span class="comment">                    * @knownissue Safari Cursor Position</span>
<a name="l6551"><span class="linenum">6551</span></a>  <span class="comment">                    * @browser Safari 2.x</span>
<a name="l6552"><span class="linenum">6552</span></a>  <span class="comment">                    * @description The issue here is that we have no way of knowing where the cursor position is</span>
<a name="l6553"><span class="linenum">6553</span></a>  <span class="comment">                    * inside of the iframe, so we have to place the newly inserted data in the best place that we can.</span>
<a name="l6554"><span class="linenum">6554</span></a>  <span class="comment">                    */</span>
<a name="l6555"><span class="linenum">6555</span></a>                      el = _elCreate(tagName, tagStyle);
<a name="l6556"><span class="linenum">6556</span></a>                      if (this._isElement(tar, 'body') || this._isElement(tar, 'html')) {
<a name="l6557"><span class="linenum">6557</span></a>                          if (this._isElement(tar, 'html')) {
<a name="l6558"><span class="linenum">6558</span></a>                              tar = this._getDoc().body;
<a name="l6559"><span class="linenum">6559</span></a>                          }
<a name="l6560"><span class="linenum">6560</span></a>                          tar.appendChild(el);
<a name="l6561"><span class="linenum">6561</span></a>                      } else if (tar.nextSibling) {
<a name="l6562"><span class="linenum">6562</span></a>                          tar.parentNode.<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(el, tar.nextSibling);
<a name="l6563"><span class="linenum">6563</span></a>                      } else {
<a name="l6564"><span class="linenum">6564</span></a>                          tar.parentNode.appendChild(el);
<a name="l6565"><span class="linenum">6565</span></a>                      }
<a name="l6566"><span class="linenum">6566</span></a>  <span class="comment">                    //this.currentElement = el;</span>
<a name="l6567"><span class="linenum">6567</span></a>                      this.currentElement[this.currentElement.length] = el;
<a name="l6568"><span class="linenum">6568</span></a>                      this.currentEvent = null;
<a name="l6569"><span class="linenum">6569</span></a>                      if (this.browser.webkit) {
<a name="l6570"><span class="linenum">6570</span></a>  <span class="comment">                        //Force Safari to focus the new element</span>
<a name="l6571"><span class="linenum">6571</span></a>                          this._getSelection().setBaseAndExtent(el, 0, el, 0);
<a name="l6572"><span class="linenum">6572</span></a>                          if (this.browser.webkit3) {
<a name="l6573"><span class="linenum">6573</span></a>                              this._getSelection().collapseToStart();
<a name="l6574"><span class="linenum">6574</span></a>                          } else {
<a name="l6575"><span class="linenum">6575</span></a>                              this._getSelection().<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(true);
<a name="l6576"><span class="linenum">6576</span></a>                          }
<a name="l6577"><span class="linenum">6577</span></a>                      }
<a name="l6578"><span class="linenum">6578</span></a>                  }
<a name="l6579"><span class="linenum">6579</span></a>              } else {
<a name="l6580"><span class="linenum">6580</span></a>  <span class="comment">                //Force CSS Styling for this action...</span>
<a name="l6581"><span class="linenum">6581</span></a>                  this._setEditorStyle(true);
<a name="l6582"><span class="linenum">6582</span></a>                  this._getDoc().<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('fontname', false, 'yui-tmp');
<a name="l6583"><span class="linenum">6583</span></a>                  var _tmp = [], __tmp, __els = ['font', 'span', 'i', 'b', 'u'];
<a name="l6584"><span class="linenum">6584</span></a>  
<a name="l6585"><span class="linenum">6585</span></a>                  if (!this._isElement(this._getSelectedElement(), 'body')) {
<a name="l6586"><span class="linenum">6586</span></a>                      __els[__els.length] = this._getDoc().getElementsByTagName(this._getSelectedElement().tagName);
<a name="l6587"><span class="linenum">6587</span></a>                      __els[__els.length] = this._getDoc().getElementsByTagName(this._getSelectedElement().parentNode.tagName);
<a name="l6588"><span class="linenum">6588</span></a>                  }
<a name="l6589"><span class="linenum">6589</span></a>                  for (var _els = 0; _els &lt; __els.length; _els++) {
<a name="l6590"><span class="linenum">6590</span></a>                      var _tmp1 = this._getDoc().getElementsByTagName(__els[_els]);
<a name="l6591"><span class="linenum">6591</span></a>                      for (var e = 0; e &lt; _tmp1.length; e++) {
<a name="l6592"><span class="linenum">6592</span></a>                          _tmp[_tmp.length] = _tmp1[e];
<a name="l6593"><span class="linenum">6593</span></a>                      }
<a name="l6594"><span class="linenum">6594</span></a>                  }
<a name="l6595"><span class="linenum">6595</span></a>  
<a name="l6596"><span class="linenum">6596</span></a>                  
<a name="l6597"><span class="linenum">6597</span></a>                  for (var i = 0; i &lt; _tmp.length; i++) {
<a name="l6598"><span class="linenum">6598</span></a>                      if ((YAHOO.util.Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(_tmp[i], 'font-family') == 'yui-tmp') || (_tmp[i].face &amp;&amp; (_tmp[i].face == 'yui-tmp'))) {
<a name="l6599"><span class="linenum">6599</span></a>                          if (tagName !== 'span') {
<a name="l6600"><span class="linenum">6600</span></a>                              el = _elCreate(tagName, tagStyle);
<a name="l6601"><span class="linenum">6601</span></a>                          } else {
<a name="l6602"><span class="linenum">6602</span></a>                              el = _elCreate(_tmp[i].tagName, tagStyle);
<a name="l6603"><span class="linenum">6603</span></a>                          }
<a name="l6604"><span class="linenum">6604</span></a>                          el.innerHTML = _tmp[i].innerHTML;
<a name="l6605"><span class="linenum">6605</span></a>                          if (this._isElement(_tmp[i], 'ol') || (this._isElement(_tmp[i], 'ul'))) {
<a name="l6606"><span class="linenum">6606</span></a>                              var fc = _tmp[i].getElementsByTagName('li')[0];
<a name="l6607"><span class="linenum">6607</span></a>                              _tmp[i].style.fontFamily = 'inherit';
<a name="l6608"><span class="linenum">6608</span></a>                              fc.style.fontFamily = 'inherit';
<a name="l6609"><span class="linenum">6609</span></a>                              el.innerHTML = fc.innerHTML;
<a name="l6610"><span class="linenum">6610</span></a>                              fc.innerHTML = '';
<a name="l6611"><span class="linenum">6611</span></a>                              fc.appendChild(el);
<a name="l6612"><span class="linenum">6612</span></a>                              this.currentElement[this.currentElement.length] = el;
<a name="l6613"><span class="linenum">6613</span></a>                          } else if (this._isElement(_tmp[i], 'li')) {
<a name="l6614"><span class="linenum">6614</span></a>                              _tmp[i].innerHTML = '';
<a name="l6615"><span class="linenum">6615</span></a>                              _tmp[i].appendChild(el);
<a name="l6616"><span class="linenum">6616</span></a>                              _tmp[i].style.fontFamily = 'inherit';
<a name="l6617"><span class="linenum">6617</span></a>                              this.currentElement[this.currentElement.length] = el;
<a name="l6618"><span class="linenum">6618</span></a>                          } else {
<a name="l6619"><span class="linenum">6619</span></a>                              if (_tmp[i].parentNode) {
<a name="l6620"><span class="linenum">6620</span></a>                                  _tmp[i].parentNode.replaceChild(el, _tmp[i]);
<a name="l6621"><span class="linenum">6621</span></a>                                  this.currentElement[this.currentElement.length] = el;
<a name="l6622"><span class="linenum">6622</span></a>                                  this.currentEvent = null;
<a name="l6623"><span class="linenum">6623</span></a>                                  if (this.browser.webkit) {
<a name="l6624"><span class="linenum">6624</span></a>  <span class="comment">                                    //Force Safari to focus the new element</span>
<a name="l6625"><span class="linenum">6625</span></a>                                      this._getSelection().setBaseAndExtent(el, 0, el, 0);
<a name="l6626"><span class="linenum">6626</span></a>                                      if (this.browser.webkit3) {
<a name="l6627"><span class="linenum">6627</span></a>                                          this._getSelection().collapseToStart();
<a name="l6628"><span class="linenum">6628</span></a>                                      } else {
<a name="l6629"><span class="linenum">6629</span></a>                                          this._getSelection().<a class="function" onClick="logFunction('collapse')" href="../../../../../../_functions/collapse.html" onMouseOver="funcPopup(event,'collapse')">collapse</a>(true);
<a name="l6630"><span class="linenum">6630</span></a>                                      }
<a name="l6631"><span class="linenum">6631</span></a>                                  }
<a name="l6632"><span class="linenum">6632</span></a>                                  if (this.browser.ie &amp;&amp; tagStyle &amp;&amp; tagStyle.fontSize) {
<a name="l6633"><span class="linenum">6633</span></a>                                      this._getSelection().empty();
<a name="l6634"><span class="linenum">6634</span></a>                                  }
<a name="l6635"><span class="linenum">6635</span></a>                                  if (this.browser.gecko) {
<a name="l6636"><span class="linenum">6636</span></a>                                      this._getSelection().collapseToStart();
<a name="l6637"><span class="linenum">6637</span></a>                                  }
<a name="l6638"><span class="linenum">6638</span></a>                              }
<a name="l6639"><span class="linenum">6639</span></a>                          }
<a name="l6640"><span class="linenum">6640</span></a>                      }
<a name="l6641"><span class="linenum">6641</span></a>                  }
<a name="l6642"><span class="linenum">6642</span></a>                  var len = this.currentElement.length;
<a name="l6643"><span class="linenum">6643</span></a>                  for (var o = 0; o &lt; len; o++) {
<a name="l6644"><span class="linenum">6644</span></a>                      if ((o + 1) != len) { //Skip the last one in the list
<a name="l6645"><span class="linenum">6645</span></a>                          if (this.currentElement[o] &amp;&amp; this.currentElement[o].nextSibling) {
<a name="l6646"><span class="linenum">6646</span></a>                              if (this._isElement(this.currentElement[o], 'br')) {
<a name="l6647"><span class="linenum">6647</span></a>                                  this.currentElement[this.currentElement.length] = this.currentElement[o].nextSibling;
<a name="l6648"><span class="linenum">6648</span></a>                              }
<a name="l6649"><span class="linenum">6649</span></a>                          }
<a name="l6650"><span class="linenum">6650</span></a>                      }
<a name="l6651"><span class="linenum">6651</span></a>                  }
<a name="l6652"><span class="linenum">6652</span></a>              }
<a name="l6653"><span class="linenum">6653</span></a>          },
<a name="l6654"><span class="linenum">6654</span></a>          <span class="comment">/**</span>
<a name="l6655"><span class="linenum">6655</span></a>  <span class="comment">        * @method saveHTML</span>
<a name="l6656"><span class="linenum">6656</span></a>  <span class="comment">        * @description Cleans the HTML with the cleanHTML method then places that string back into the textarea.</span>
<a name="l6657"><span class="linenum">6657</span></a>  <span class="comment">        * @return String</span>
<a name="l6658"><span class="linenum">6658</span></a>  <span class="comment">        */</span>
<a name="l6659"><span class="linenum">6659</span></a>          saveHTML: function() {
<a name="l6660"><span class="linenum">6660</span></a>              var html = this.cleanHTML();
<a name="l6661"><span class="linenum">6661</span></a>              if (this._textarea) {
<a name="l6662"><span class="linenum">6662</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').value = html;
<a name="l6663"><span class="linenum">6663</span></a>              } else {
<a name="l6664"><span class="linenum">6664</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').innerHTML = html;
<a name="l6665"><span class="linenum">6665</span></a>              }
<a name="l6666"><span class="linenum">6666</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('saveEl') !== this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')) {
<a name="l6667"><span class="linenum">6667</span></a>                  var out = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('saveEl');
<a name="l6668"><span class="linenum">6668</span></a>                  if (Lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(out)) {
<a name="l6669"><span class="linenum">6669</span></a>                      out = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(out);
<a name="l6670"><span class="linenum">6670</span></a>                  }
<a name="l6671"><span class="linenum">6671</span></a>                  if (out) {
<a name="l6672"><span class="linenum">6672</span></a>                      if (out.tagName.toLowerCase() === 'textarea') {
<a name="l6673"><span class="linenum">6673</span></a>                          out.value = html;
<a name="l6674"><span class="linenum">6674</span></a>                      } else {
<a name="l6675"><span class="linenum">6675</span></a>                          out.innerHTML = html;
<a name="l6676"><span class="linenum">6676</span></a>                      }
<a name="l6677"><span class="linenum">6677</span></a>                  }
<a name="l6678"><span class="linenum">6678</span></a>              }
<a name="l6679"><span class="linenum">6679</span></a>              return html;
<a name="l6680"><span class="linenum">6680</span></a>          },
<a name="l6681"><span class="linenum">6681</span></a>          <span class="comment">/**</span>
<a name="l6682"><span class="linenum">6682</span></a>  <span class="comment">        * @method setEditorHTML</span>
<a name="l6683"><span class="linenum">6683</span></a>  <span class="comment">        * @param {String} incomingHTML The html content to load into the editor</span>
<a name="l6684"><span class="linenum">6684</span></a>  <span class="comment">        * @description Loads HTML into the editors body</span>
<a name="l6685"><span class="linenum">6685</span></a>  <span class="comment">        */</span>
<a name="l6686"><span class="linenum">6686</span></a>          setEditorHTML: function(incomingHTML) {
<a name="l6687"><span class="linenum">6687</span></a>              var html = this._cleanIncomingHTML(incomingHTML);
<a name="l6688"><span class="linenum">6688</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/RIGHT_BRACKET/gi, '{');
<a name="l6689"><span class="linenum">6689</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/LEFT_BRACKET/gi, '}');
<a name="l6690"><span class="linenum">6690</span></a>              this._getDoc().body.innerHTML = html;
<a name="l6691"><span class="linenum">6691</span></a>              this.nodeChange();
<a name="l6692"><span class="linenum">6692</span></a>          },
<a name="l6693"><span class="linenum">6693</span></a>          <span class="comment">/**</span>
<a name="l6694"><span class="linenum">6694</span></a>  <span class="comment">        * @method getEditorHTML</span>
<a name="l6695"><span class="linenum">6695</span></a>  <span class="comment">        * @description Gets the unprocessed/unfiltered HTML from the editor</span>
<a name="l6696"><span class="linenum">6696</span></a>  <span class="comment">        */</span>
<a name="l6697"><span class="linenum">6697</span></a>          getEditorHTML: function() {
<a name="l6698"><span class="linenum">6698</span></a>              try {
<a name="l6699"><span class="linenum">6699</span></a>                  var b = this._getDoc().body;
<a name="l6700"><span class="linenum">6700</span></a>                  if (b === null) {
<a name="l6701"><span class="linenum">6701</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Body is null, returning null.', 'error', 'SimpleEditor');
<a name="l6702"><span class="linenum">6702</span></a>                      return null;
<a name="l6703"><span class="linenum">6703</span></a>                  }
<a name="l6704"><span class="linenum">6704</span></a>                  return this._getDoc().body.innerHTML;
<a name="l6705"><span class="linenum">6705</span></a>              } catch (e) {
<a name="l6706"><span class="linenum">6706</span></a>                  return '';
<a name="l6707"><span class="linenum">6707</span></a>              }
<a name="l6708"><span class="linenum">6708</span></a>          },
<a name="l6709"><span class="linenum">6709</span></a>          <span class="comment">/**</span>
<a name="l6710"><span class="linenum">6710</span></a>  <span class="comment">        * @method show</span>
<a name="l6711"><span class="linenum">6711</span></a>  <span class="comment">        * @description This method needs to be called if the Editor was hidden (like in a TabView or Panel). It is used to reset the editor after being in a container that was set to display none.</span>
<a name="l6712"><span class="linenum">6712</span></a>  <span class="comment">        */</span>
<a name="l6713"><span class="linenum">6713</span></a>          show: function() {
<a name="l6714"><span class="linenum">6714</span></a>              if (this.browser.gecko) {
<a name="l6715"><span class="linenum">6715</span></a>                  this._setDesignMode('on');
<a name="l6716"><span class="linenum">6716</span></a>                  this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l6717"><span class="linenum">6717</span></a>              }
<a name="l6718"><span class="linenum">6718</span></a>              if (this.browser.webkit) {
<a name="l6719"><span class="linenum">6719</span></a>                  var self = this;
<a name="l6720"><span class="linenum">6720</span></a>                  window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l6721"><span class="linenum">6721</span></a>                      self._setInitialContent.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l6722"><span class="linenum">6722</span></a>                  }, 10);
<a name="l6723"><span class="linenum">6723</span></a>              }
<a name="l6724"><span class="linenum">6724</span></a>  <span class="comment">            //Adding this will close all other Editor window's when showing this one.</span>
<a name="l6725"><span class="linenum">6725</span></a>              if (this.currentWindow) {
<a name="l6726"><span class="linenum">6726</span></a>                  this.closeWindow();
<a name="l6727"><span class="linenum">6727</span></a>              }
<a name="l6728"><span class="linenum">6728</span></a>  <span class="comment">            //Put the iframe back in place</span>
<a name="l6729"><span class="linenum">6729</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', 'static');
<a name="l6730"><span class="linenum">6730</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '');
<a name="l6731"><span class="linenum">6731</span></a>          },
<a name="l6732"><span class="linenum">6732</span></a>          <span class="comment">/**</span>
<a name="l6733"><span class="linenum">6733</span></a>  <span class="comment">        * @method hide</span>
<a name="l6734"><span class="linenum">6734</span></a>  <span class="comment">        * @description This method needs to be called if the Editor is to be hidden (like in a TabView or Panel). It should be called to clear timeouts and close open editor windows.</span>
<a name="l6735"><span class="linenum">6735</span></a>  <span class="comment">        */</span>
<a name="l6736"><span class="linenum">6736</span></a>          hide: function() {
<a name="l6737"><span class="linenum">6737</span></a>  <span class="comment">            //Adding this will close all other Editor window's.</span>
<a name="l6738"><span class="linenum">6738</span></a>              if (this.currentWindow) {
<a name="l6739"><span class="linenum">6739</span></a>                  this.closeWindow();
<a name="l6740"><span class="linenum">6740</span></a>              }
<a name="l6741"><span class="linenum">6741</span></a>              if (this._fixNodesTimer) {
<a name="l6742"><span class="linenum">6742</span></a>                  clearTimeout(this._fixNodesTimer);
<a name="l6743"><span class="linenum">6743</span></a>                  this._fixNodesTimer = null;
<a name="l6744"><span class="linenum">6744</span></a>              }
<a name="l6745"><span class="linenum">6745</span></a>              if (this._nodeChangeTimer) {
<a name="l6746"><span class="linenum">6746</span></a>                  clearTimeout(this._nodeChangeTimer);
<a name="l6747"><span class="linenum">6747</span></a>                  this._nodeChangeTimer = null;
<a name="l6748"><span class="linenum">6748</span></a>              }
<a name="l6749"><span class="linenum">6749</span></a>              this._lastNodeChange = 0;
<a name="l6750"><span class="linenum">6750</span></a>  <span class="comment">            //Move the iframe off of the screen, so that in containers with visiblity hidden, IE will not cover other elements.</span>
<a name="l6751"><span class="linenum">6751</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', 'absolute');
<a name="l6752"><span class="linenum">6752</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '-9999px');
<a name="l6753"><span class="linenum">6753</span></a>          },
<a name="l6754"><span class="linenum">6754</span></a>          <span class="comment">/**</span>
<a name="l6755"><span class="linenum">6755</span></a>  <span class="comment">        * @method _cleanIncomingHTML</span>
<a name="l6756"><span class="linenum">6756</span></a>  <span class="comment">        * @param {String} html The unfiltered HTML</span>
<a name="l6757"><span class="linenum">6757</span></a>  <span class="comment">        * @description Process the HTML with a few regexes to clean it up and stabilize the input</span>
<a name="l6758"><span class="linenum">6758</span></a>  <span class="comment">        * @return {String} The filtered HTML</span>
<a name="l6759"><span class="linenum">6759</span></a>  <span class="comment">        */</span>
<a name="l6760"><span class="linenum">6760</span></a>          _cleanIncomingHTML: function(html) {
<a name="l6761"><span class="linenum">6761</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/{/gi, 'RIGHT_BRACKET');
<a name="l6762"><span class="linenum">6762</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/}/gi, 'LEFT_BRACKET');
<a name="l6763"><span class="linenum">6763</span></a>  
<a name="l6764"><span class="linenum">6764</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;strong([^&gt;]*)&gt;/gi, '&lt;b<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6765"><span class="linenum">6765</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/strong&gt;/gi, '&lt;/b&gt;');   
<a name="l6766"><span class="linenum">6766</span></a>  
<a name="l6767"><span class="linenum">6767</span></a>  <span class="comment">            //replace embed before em check</span>
<a name="l6768"><span class="linenum">6768</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('embed')" href="../../../../../../_functions/embed.html" onMouseOver="funcPopup(event,'embed')">embed</a>([^&gt;]*)&gt;/gi, '&lt;YUI_EMBED<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6769"><span class="linenum">6769</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/embed&gt;/gi, '&lt;/YUI_EMBED&gt;');
<a name="l6770"><span class="linenum">6770</span></a>  
<a name="l6771"><span class="linenum">6771</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;em([^&gt;]*)&gt;/gi, '&lt;i<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6772"><span class="linenum">6772</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/em&gt;/gi, '&lt;/i&gt;');
<a name="l6773"><span class="linenum">6773</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/_moz_dirty=&quot;&quot;/gi, '');
<a name="l6774"><span class="linenum">6774</span></a>              
<a name="l6775"><span class="linenum">6775</span></a>  <span class="comment">            //Put embed tags back in..</span>
<a name="l6776"><span class="linenum">6776</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_EMBED([^&gt;]*)&gt;/gi, '&lt;embed<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6777"><span class="linenum">6777</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/YUI_EMBED&gt;/gi, '&lt;/embed&gt;');
<a name="l6778"><span class="linenum">6778</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('plainText')) {
<a name="l6779"><span class="linenum">6779</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Filtering as plain text', 'info', 'SimpleEditor');
<a name="l6780"><span class="linenum">6780</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\n/g, '&lt;br&gt;').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\r/g, '&lt;br&gt;');
<a name="l6781"><span class="linenum">6781</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/  /gi, '&amp;nbsp;&amp;nbsp;'); <span class="comment">//Replace all double spaces</span>
<a name="l6782"><span class="linenum">6782</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\t/gi, '&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'); <span class="comment">//Replace all tabs</span>
<a name="l6783"><span class="linenum">6783</span></a>              }
<a name="l6784"><span class="linenum">6784</span></a>  <span class="comment">            //Removing Script Tags from the Editor</span>
<a name="l6785"><span class="linenum">6785</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('script')" href="../../../../../../_functions/script.html" onMouseOver="funcPopup(event,'script')">script</a>([^&gt;]*)&gt;/gi, '&lt;bad&gt;');
<a name="l6786"><span class="linenum">6786</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/<a class="function" onClick="logFunction('script')" href="../../../../../../_functions/script.html" onMouseOver="funcPopup(event,'script')">script</a>([^&gt;]*)&gt;/gi, '&lt;/bad&gt;');
<a name="l6787"><span class="linenum">6787</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&amp;lt;<a class="function" onClick="logFunction('script')" href="../../../../../../_functions/script.html" onMouseOver="funcPopup(event,'script')">script</a>([^&gt;]*)&amp;gt;/gi, '&lt;bad&gt;');
<a name="l6788"><span class="linenum">6788</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&amp;lt;\/<a class="function" onClick="logFunction('script')" href="../../../../../../_functions/script.html" onMouseOver="funcPopup(event,'script')">script</a>([^&gt;]*)&amp;gt;/gi, '&lt;/bad&gt;');
<a name="l6789"><span class="linenum">6789</span></a>  <span class="comment">            //Replace the line feeds</span>
<a name="l6790"><span class="linenum">6790</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\r\n/g, '&lt;YUI_LF&gt;').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\n/g, '&lt;YUI_LF&gt;').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\r/g, '&lt;YUI_LF&gt;');
<a name="l6791"><span class="linenum">6791</span></a>              
<a name="l6792"><span class="linenum">6792</span></a>  <span class="comment">            //Remove Bad HTML elements (used to be script nodes)</span>
<a name="l6793"><span class="linenum">6793</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp('&lt;bad([^&gt;]*)&gt;(.*?)&lt;\/bad&gt;', 'gi'), '');
<a name="l6794"><span class="linenum">6794</span></a>  <span class="comment">            //Replace the lines feeds</span>
<a name="l6795"><span class="linenum">6795</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_LF&gt;/g, '\n');
<a name="l6796"><span class="linenum">6796</span></a>              return html;
<a name="l6797"><span class="linenum">6797</span></a>          },
<a name="l6798"><span class="linenum">6798</span></a>          <span class="comment">/**</span>
<a name="l6799"><span class="linenum">6799</span></a>  <span class="comment">        * @method cleanHTML</span>
<a name="l6800"><span class="linenum">6800</span></a>  <span class="comment">        * @param {String} html The unfiltered HTML</span>
<a name="l6801"><span class="linenum">6801</span></a>  <span class="comment">        * @description Process the HTML with a few regexes to clean it up and stabilize the output</span>
<a name="l6802"><span class="linenum">6802</span></a>  <span class="comment">        * @return {String} The filtered HTML</span>
<a name="l6803"><span class="linenum">6803</span></a>  <span class="comment">        */</span>
<a name="l6804"><span class="linenum">6804</span></a>          cleanHTML: function(html) {
<a name="l6805"><span class="linenum">6805</span></a>  <span class="comment">            //Start Filtering Output</span>
<a name="l6806"><span class="linenum">6806</span></a>  <span class="comment">            //Begin RegExs..</span>
<a name="l6807"><span class="linenum">6807</span></a>              if (!html) { 
<a name="l6808"><span class="linenum">6808</span></a>                  html = this.getEditorHTML();
<a name="l6809"><span class="linenum">6809</span></a>              }
<a name="l6810"><span class="linenum">6810</span></a>              var markup = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('markup');
<a name="l6811"><span class="linenum">6811</span></a>  <span class="comment">            //Make some backups...</span>
<a name="l6812"><span class="linenum">6812</span></a>              html = this.pre_filter_linebreaks(html, markup);
<a name="l6813"><span class="linenum">6813</span></a>  
<a name="l6814"><span class="linenum">6814</span></a>  <span class="comment">            //Filter MS Word</span>
<a name="l6815"><span class="linenum">6815</span></a>              html = this.filter_msword(html);
<a name="l6816"><span class="linenum">6816</span></a>  
<a name="l6817"><span class="linenum">6817</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('img')" href="../../../../../../_functions/img.html" onMouseOver="funcPopup(event,'img')">img</a>([^&gt;]*)\/&gt;/gi, '&lt;YUI_IMG<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6818"><span class="linenum">6818</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('img')" href="../../../../../../_functions/img.html" onMouseOver="funcPopup(event,'img')">img</a>([^&gt;]*)&gt;/gi, '&lt;YUI_IMG<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6819"><span class="linenum">6819</span></a>  
<a name="l6820"><span class="linenum">6820</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;input([^&gt;]*)\/&gt;/gi, '&lt;YUI_INPUT<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6821"><span class="linenum">6821</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;input([^&gt;]*)&gt;/gi, '&lt;YUI_INPUT<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6822"><span class="linenum">6822</span></a>  
<a name="l6823"><span class="linenum">6823</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;ul([^&gt;]*)&gt;/gi, '&lt;YUI_UL<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6824"><span class="linenum">6824</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/ul&gt;/gi, '&lt;\/YUI_UL&gt;');
<a name="l6825"><span class="linenum">6825</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;blockquote([^&gt;]*)&gt;/gi, '&lt;YUI_BQ<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6826"><span class="linenum">6826</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/blockquote&gt;/gi, '&lt;\/YUI_BQ&gt;');
<a name="l6827"><span class="linenum">6827</span></a>  
<a name="l6828"><span class="linenum">6828</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('embed')" href="../../../../../../_functions/embed.html" onMouseOver="funcPopup(event,'embed')">embed</a>([^&gt;]*)&gt;/gi, '&lt;YUI_EMBED<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6829"><span class="linenum">6829</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/embed&gt;/gi, '&lt;\/YUI_EMBED&gt;');
<a name="l6830"><span class="linenum">6830</span></a>  
<a name="l6831"><span class="linenum">6831</span></a>  <span class="comment">            //Convert b and i tags to strong and em tags</span>
<a name="l6832"><span class="linenum">6832</span></a>              if ((markup == 'semantic') || (markup == 'xhtml')) {
<a name="l6833"><span class="linenum">6833</span></a>  <span class="comment">                //html = html.replace(/&lt;i(\s+[^&gt;]*)?&gt;/gi, &quot;&lt;em$1&gt;&quot;);</span>
<a name="l6834"><span class="linenum">6834</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('i')" href="../../../../../../_functions/i.html" onMouseOver="funcPopup(event,'i')">i</a>([^&gt;]*)&gt;/gi, &quot;&lt;em<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;&quot;);
<a name="l6835"><span class="linenum">6835</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/i&gt;/gi, '&lt;/em&gt;');
<a name="l6836"><span class="linenum">6836</span></a>  <span class="comment">                //html = html.replace(/&lt;b(\s+[^&gt;]*)?&gt;/gi, &quot;&lt;strong$1&gt;&quot;);</span>
<a name="l6837"><span class="linenum">6837</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('b')" href="../../../../../../_functions/b.html" onMouseOver="funcPopup(event,'b')">b</a>([^&gt;]*)&gt;/gi, &quot;&lt;strong<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;&quot;);
<a name="l6838"><span class="linenum">6838</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/b&gt;/gi, '&lt;/strong&gt;');
<a name="l6839"><span class="linenum">6839</span></a>              }
<a name="l6840"><span class="linenum">6840</span></a>  
<a name="l6841"><span class="linenum">6841</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/_moz_dirty=&quot;&quot;/gi, '');
<a name="l6842"><span class="linenum">6842</span></a>  
<a name="l6843"><span class="linenum">6843</span></a>  <span class="comment">            //normalize strikethrough</span>
<a name="l6844"><span class="linenum">6844</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;strike/gi, '&lt;span style=&quot;text-decoration: line-through;&quot;');
<a name="l6845"><span class="linenum">6845</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/strike&gt;/gi, '/span&gt;');
<a name="l6846"><span class="linenum">6846</span></a>              
<a name="l6847"><span class="linenum">6847</span></a>              
<a name="l6848"><span class="linenum">6848</span></a>  <span class="comment">            //Case Changing</span>
<a name="l6849"><span class="linenum">6849</span></a>              if (this.browser.ie) {
<a name="l6850"><span class="linenum">6850</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/text-decoration/gi, 'text-decoration');
<a name="l6851"><span class="linenum">6851</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/font-weight/gi, 'font-weight');
<a name="l6852"><span class="linenum">6852</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/_width=&quot;([^&gt;]*)&quot;/gi, '');
<a name="l6853"><span class="linenum">6853</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/_height=&quot;([^&gt;]*)&quot;/gi, '');
<a name="l6854"><span class="linenum">6854</span></a>  <span class="comment">                //Cleanup Image URL's</span>
<a name="l6855"><span class="linenum">6855</span></a>                  var url = this._baseHREF.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\//gi, '\\/'),
<a name="l6856"><span class="linenum">6856</span></a>                      re = new RegExp('src=&quot;' + url, 'gi');
<a name="l6857"><span class="linenum">6857</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(re, 'src=&quot;');
<a name="l6858"><span class="linenum">6858</span></a>              }
<a name="l6859"><span class="linenum">6859</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;font/gi, '&lt;font');
<a name="l6860"><span class="linenum">6860</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/font&gt;/gi, '&lt;/font&gt;');
<a name="l6861"><span class="linenum">6861</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;span/gi, '&lt;span');
<a name="l6862"><span class="linenum">6862</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/span&gt;/gi, '&lt;/span&gt;');
<a name="l6863"><span class="linenum">6863</span></a>              if ((markup == 'semantic') || (markup == 'xhtml') || (markup == 'css')) {
<a name="l6864"><span class="linenum">6864</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp('&lt;font([^&gt;]*)face=&quot;([^&gt;]*)&quot;&gt;(.*?)&lt;\/font&gt;', 'gi'), '&lt;span <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a> style=&quot;font-family: <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../../../../_variables/2.html">$2</a>;&quot;&gt;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../../../../_variables/3.html">$3</a>&lt;/span&gt;');
<a name="l6865"><span class="linenum">6865</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;u/gi, '&lt;span style=&quot;text-decoration: underline;&quot;');
<a name="l6866"><span class="linenum">6866</span></a>                  if (this.browser.webkit) {
<a name="l6867"><span class="linenum">6867</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp('&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-weight: bold;&quot;&gt;([^&gt;]*)&lt;\/span&gt;', 'gi'), '&lt;strong&gt;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&lt;/strong&gt;');
<a name="l6868"><span class="linenum">6868</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp('&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-style: italic;&quot;&gt;([^&gt;]*)&lt;\/span&gt;', 'gi'), '&lt;em&gt;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&lt;/em&gt;');
<a name="l6869"><span class="linenum">6869</span></a>                  }
<a name="l6870"><span class="linenum">6870</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/u&gt;/gi, '/span&gt;');
<a name="l6871"><span class="linenum">6871</span></a>                  if (markup == 'css') {
<a name="l6872"><span class="linenum">6872</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;em([^&gt;]*)&gt;/gi, '&lt;i<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6873"><span class="linenum">6873</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/em&gt;/gi, '&lt;/i&gt;');
<a name="l6874"><span class="linenum">6874</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;strong([^&gt;]*)&gt;/gi, '&lt;b<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6875"><span class="linenum">6875</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/strong&gt;/gi, '&lt;/b&gt;');
<a name="l6876"><span class="linenum">6876</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;b/gi, '&lt;span style=&quot;font-weight: bold;&quot;');
<a name="l6877"><span class="linenum">6877</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/b&gt;/gi, '/span&gt;');
<a name="l6878"><span class="linenum">6878</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;i/gi, '&lt;span style=&quot;font-style: italic;&quot;');
<a name="l6879"><span class="linenum">6879</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/i&gt;/gi, '/span&gt;');
<a name="l6880"><span class="linenum">6880</span></a>                  }
<a name="l6881"><span class="linenum">6881</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/  /gi, ' '); <span class="comment">//Replace all double spaces and replace with a single</span>
<a name="l6882"><span class="linenum">6882</span></a>              } else {
<a name="l6883"><span class="linenum">6883</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;u/gi, '&lt;u');
<a name="l6884"><span class="linenum">6884</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/u&gt;/gi, '/u&gt;');
<a name="l6885"><span class="linenum">6885</span></a>              }
<a name="l6886"><span class="linenum">6886</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;ol([^&gt;]*)&gt;/gi, '&lt;ol<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6887"><span class="linenum">6887</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/ol&gt;/gi, '/ol&gt;');
<a name="l6888"><span class="linenum">6888</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;li/gi, '&lt;li');
<a name="l6889"><span class="linenum">6889</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/li&gt;/gi, '/li&gt;');
<a name="l6890"><span class="linenum">6890</span></a>              html = this.filter_safari(html);
<a name="l6891"><span class="linenum">6891</span></a>  
<a name="l6892"><span class="linenum">6892</span></a>              html = this.filter_internals(html);
<a name="l6893"><span class="linenum">6893</span></a>  
<a name="l6894"><span class="linenum">6894</span></a>              html = this.filter_all_rgb(html);
<a name="l6895"><span class="linenum">6895</span></a>  
<a name="l6896"><span class="linenum">6896</span></a>  <span class="comment">            //Replace our backups with the real thing</span>
<a name="l6897"><span class="linenum">6897</span></a>              html = this.post_filter_linebreaks(html, markup);
<a name="l6898"><span class="linenum">6898</span></a>  
<a name="l6899"><span class="linenum">6899</span></a>              if (markup == 'xhtml') {
<a name="l6900"><span class="linenum">6900</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_IMG([^&gt;]*)&gt;/g, '&lt;img <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a> /&gt;');
<a name="l6901"><span class="linenum">6901</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_INPUT([^&gt;]*)&gt;/g, '&lt;input <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a> /&gt;');
<a name="l6902"><span class="linenum">6902</span></a>              } else {
<a name="l6903"><span class="linenum">6903</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_IMG([^&gt;]*)&gt;/g, '&lt;img <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6904"><span class="linenum">6904</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_INPUT([^&gt;]*)&gt;/g, '&lt;input <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6905"><span class="linenum">6905</span></a>              }
<a name="l6906"><span class="linenum">6906</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_UL([^&gt;]*)&gt;/g, '&lt;ul<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6907"><span class="linenum">6907</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/YUI_UL&gt;/g, '&lt;\/ul&gt;');
<a name="l6908"><span class="linenum">6908</span></a>  
<a name="l6909"><span class="linenum">6909</span></a>              html = this.filter_invalid_lists(html);
<a name="l6910"><span class="linenum">6910</span></a>  
<a name="l6911"><span class="linenum">6911</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_BQ([^&gt;]*)&gt;/g, '&lt;blockquote<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6912"><span class="linenum">6912</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/YUI_BQ&gt;/g, '&lt;\/blockquote&gt;');
<a name="l6913"><span class="linenum">6913</span></a>  
<a name="l6914"><span class="linenum">6914</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_EMBED([^&gt;]*)&gt;/g, '&lt;embed<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l6915"><span class="linenum">6915</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/YUI_EMBED&gt;/g, '&lt;\/embed&gt;');
<a name="l6916"><span class="linenum">6916</span></a>              
<a name="l6917"><span class="linenum">6917</span></a>  <span class="comment">            //This should fix &amp;amp;'s in URL's</span>
<a name="l6918"><span class="linenum">6918</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ &amp;amp; /gi, ' YUI_AMP ');
<a name="l6919"><span class="linenum">6919</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ &amp;amp;/gi, ' YUI_AMP_F ');
<a name="l6920"><span class="linenum">6920</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&amp;amp; /gi, ' YUI_AMP_R ');
<a name="l6921"><span class="linenum">6921</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&amp;amp;/gi, '&amp;');
<a name="l6922"><span class="linenum">6922</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ YUI_AMP /gi, ' &amp;amp; ');
<a name="l6923"><span class="linenum">6923</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ YUI_AMP_F /gi, ' &amp;amp;');
<a name="l6924"><span class="linenum">6924</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ YUI_AMP_R /gi, '&amp;amp; ');
<a name="l6925"><span class="linenum">6925</span></a>  
<a name="l6926"><span class="linenum">6926</span></a>  <span class="comment">            //Trim the output, removing whitespace from the beginning and end</span>
<a name="l6927"><span class="linenum">6927</span></a>              html = YAHOO.lang.<a class="phpfunction" onClick="logFunction('trim')" href="../../../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(html);
<a name="l6928"><span class="linenum">6928</span></a>  
<a name="l6929"><span class="linenum">6929</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('removeLineBreaks')) {
<a name="l6930"><span class="linenum">6930</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\n/g, '').<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\r/g, '');
<a name="l6931"><span class="linenum">6931</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/  /gi, ' '); <span class="comment">//Replace all double spaces and replace with a single</span>
<a name="l6932"><span class="linenum">6932</span></a>              }
<a name="l6933"><span class="linenum">6933</span></a>              
<a name="l6934"><span class="linenum">6934</span></a>              for (var v in this.invalidHTML) {
<a name="l6935"><span class="linenum">6935</span></a>                  if (YAHOO.lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(this.invalidHTML, v)) {
<a name="l6936"><span class="linenum">6936</span></a>                      if (Lang.isObject(v) &amp;&amp; v.keepContents) {
<a name="l6937"><span class="linenum">6937</span></a>                          html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp('&lt;' + v + '([^&gt;]*)&gt;(.*?)&lt;\/' + v + '&gt;', 'gi'), '<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>');
<a name="l6938"><span class="linenum">6938</span></a>                      } else {
<a name="l6939"><span class="linenum">6939</span></a>                          html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp('&lt;' + v + '([^&gt;]*)&gt;(.*?)&lt;\/' + v + '&gt;', 'gi'), '');
<a name="l6940"><span class="linenum">6940</span></a>                      }
<a name="l6941"><span class="linenum">6941</span></a>                  }
<a name="l6942"><span class="linenum">6942</span></a>              }
<a name="l6943"><span class="linenum">6943</span></a>  
<a name="l6944"><span class="linenum">6944</span></a>              <span class="comment">/* LATER -- Add DOM manipulation</span>
<a name="l6945"><span class="linenum">6945</span></a>  <span class="comment">            console.log(html);</span>
<a name="l6946"><span class="linenum">6946</span></a>  <span class="comment">            var frag = document.createDocumentFragment();</span>
<a name="l6947"><span class="linenum">6947</span></a>  <span class="comment">            frag.innerHTML = html;</span>
<a name="l6948"><span class="linenum">6948</span></a>  <span class="comment"></span>
<a name="l6949"><span class="linenum">6949</span></a>  <span class="comment">            var ps = frag.getElementsByTagName('p'),</span>
<a name="l6950"><span class="linenum">6950</span></a>  <span class="comment">                len = ps.length;</span>
<a name="l6951"><span class="linenum">6951</span></a>  <span class="comment">            for (var i = 0; i &lt; len; i++) {</span>
<a name="l6952"><span class="linenum">6952</span></a>  <span class="comment">                var ps2 = ps[i].getElementsByTagName('p');</span>
<a name="l6953"><span class="linenum">6953</span></a>  <span class="comment">                if (ps2.length) {</span>
<a name="l6954"><span class="linenum">6954</span></a>  <span class="comment">                    </span>
<a name="l6955"><span class="linenum">6955</span></a>  <span class="comment">                }</span>
<a name="l6956"><span class="linenum">6956</span></a>  <span class="comment">                </span>
<a name="l6957"><span class="linenum">6957</span></a>  <span class="comment">            }</span>
<a name="l6958"><span class="linenum">6958</span></a>  <span class="comment">            html = frag.innerHTML;</span>
<a name="l6959"><span class="linenum">6959</span></a>  <span class="comment">            console.log(html);</span>
<a name="l6960"><span class="linenum">6960</span></a>  <span class="comment">            */</span>
<a name="l6961"><span class="linenum">6961</span></a>  
<a name="l6962"><span class="linenum">6962</span></a>              this.fireEvent('cleanHTML', { type: 'cleanHTML', target: this, html: html });
<a name="l6963"><span class="linenum">6963</span></a>  
<a name="l6964"><span class="linenum">6964</span></a>              return html;
<a name="l6965"><span class="linenum">6965</span></a>          },
<a name="l6966"><span class="linenum">6966</span></a>          <span class="comment">/**</span>
<a name="l6967"><span class="linenum">6967</span></a>  <span class="comment">        * @method filter_msword</span>
<a name="l6968"><span class="linenum">6968</span></a>  <span class="comment">        * @param String html The HTML string to filter</span>
<a name="l6969"><span class="linenum">6969</span></a>  <span class="comment">        * @description Filters out msword html attributes and other junk. Activate with filterWord: true in config</span>
<a name="l6970"><span class="linenum">6970</span></a>  <span class="comment">        */</span>
<a name="l6971"><span class="linenum">6971</span></a>          filter_msword: function(html) {
<a name="l6972"><span class="linenum">6972</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('filterWord')) {
<a name="l6973"><span class="linenum">6973</span></a>                  return html;
<a name="l6974"><span class="linenum">6974</span></a>              }
<a name="l6975"><span class="linenum">6975</span></a>  <span class="comment">            //Remove the ms o: tags</span>
<a name="l6976"><span class="linenum">6976</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;o:p&gt;\s*&lt;\/o:p&gt;/g, '');
<a name="l6977"><span class="linenum">6977</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;o:p&gt;[\s\S]*?&lt;\/o:p&gt;/g, '&amp;nbsp;');
<a name="l6978"><span class="linenum">6978</span></a>  
<a name="l6979"><span class="linenum">6979</span></a>  <span class="comment">            //Remove the ms w: tags</span>
<a name="l6980"><span class="linenum">6980</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /&lt;w:[^&gt;]*&gt;[\s\S]*?&lt;\/w:[^&gt;]*&gt;/gi, '');
<a name="l6981"><span class="linenum">6981</span></a>  
<a name="l6982"><span class="linenum">6982</span></a>  <span class="comment">            //Remove mso-? styles.</span>
<a name="l6983"><span class="linenum">6983</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*mso-[^:]+:[^;&quot;]+;?/gi, '');
<a name="l6984"><span class="linenum">6984</span></a>  
<a name="l6985"><span class="linenum">6985</span></a>  <span class="comment">            //Remove more bogus MS styles.</span>
<a name="l6986"><span class="linenum">6986</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*MARGIN: 0cm 0cm 0pt\s*;/gi, '');
<a name="l6987"><span class="linenum">6987</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*MARGIN: 0cm 0cm 0pt\s*&quot;/gi, &quot;\&quot;&quot;);
<a name="l6988"><span class="linenum">6988</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*TEXT-INDENT: 0cm\s*;/gi, '');
<a name="l6989"><span class="linenum">6989</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*TEXT-INDENT: 0cm\s*&quot;/gi, &quot;\&quot;&quot;);
<a name="l6990"><span class="linenum">6990</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*PAGE-BREAK-BEFORE: [^\s;]+;?&quot;/gi, &quot;\&quot;&quot;);
<a name="l6991"><span class="linenum">6991</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*FONT-VARIANT: [^\s;]+;?&quot;/gi, &quot;\&quot;&quot; );
<a name="l6992"><span class="linenum">6992</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*tab-stops:[^;&quot;]*;?/gi, '');
<a name="l6993"><span class="linenum">6993</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\s*tab-stops:[^&quot;]*/gi, '');
<a name="l6994"><span class="linenum">6994</span></a>  
<a name="l6995"><span class="linenum">6995</span></a>  <span class="comment">            //Remove XML declarations</span>
<a name="l6996"><span class="linenum">6996</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\\?\?xml[^&gt;]*&gt;/gi, '');
<a name="l6997"><span class="linenum">6997</span></a>  
<a name="l6998"><span class="linenum">6998</span></a>  <span class="comment">            //Remove lang</span>
<a name="l6999"><span class="linenum">6999</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;(\w[^&gt;]*) lang=([^ |&gt;]*)([^&gt;]*)/gi, &quot;&lt;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a><a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../../../../_variables/3.html">$3</a>&quot;);
<a name="l7000"><span class="linenum">7000</span></a>  
<a name="l7001"><span class="linenum">7001</span></a>  <span class="comment">            //Remove language tags</span>
<a name="l7002"><span class="linenum">7002</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /&lt;(\w[^&gt;]*) language=([^ |&gt;]*)([^&gt;]*)/gi, &quot;&lt;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a><a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../../../../_variables/3.html">$3</a>&quot;);
<a name="l7003"><span class="linenum">7003</span></a>  
<a name="l7004"><span class="linenum">7004</span></a>  <span class="comment">            //Remove onmouseover and onmouseout events (from MS Word comments effect)</span>
<a name="l7005"><span class="linenum">7005</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /&lt;(\w[^&gt;]*) onmouseover=&quot;([^\&quot;]*)&quot;([^&gt;]*)/gi, &quot;&lt;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a><a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../../../../_variables/3.html">$3</a>&quot;);
<a name="l7006"><span class="linenum">7006</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /&lt;(\w[^&gt;]*) onmouseout=&quot;([^\&quot;]*)&quot;([^&gt;]*)/gi, &quot;&lt;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a><a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../../../../_variables/3.html">$3</a>&quot;);
<a name="l7007"><span class="linenum">7007</span></a>              
<a name="l7008"><span class="linenum">7008</span></a>              return html;
<a name="l7009"><span class="linenum">7009</span></a>          },
<a name="l7010"><span class="linenum">7010</span></a>          <span class="comment">/**</span>
<a name="l7011"><span class="linenum">7011</span></a>  <span class="comment">        * @method filter_invalid_lists</span>
<a name="l7012"><span class="linenum">7012</span></a>  <span class="comment">        * @param String html The HTML string to filter</span>
<a name="l7013"><span class="linenum">7013</span></a>  <span class="comment">        * @description Filters invalid ol and ul list markup, converts this: &lt;li&gt;&lt;/li&gt;&lt;ol&gt;..&lt;/ol&gt; to this: &lt;li&gt;&lt;/li&gt;&lt;li&gt;&lt;ol&gt;..&lt;/ol&gt;&lt;/li&gt;</span>
<a name="l7014"><span class="linenum">7014</span></a>  <span class="comment">        */</span>
<a name="l7015"><span class="linenum">7015</span></a>          filter_invalid_lists: function(html) {
<a name="l7016"><span class="linenum">7016</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/li&gt;\n/gi, '&lt;/li&gt;');
<a name="l7017"><span class="linenum">7017</span></a>  
<a name="l7018"><span class="linenum">7018</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/li&gt;&lt;ol&gt;/gi, '&lt;/li&gt;&lt;li&gt;&lt;ol&gt;');
<a name="l7019"><span class="linenum">7019</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/ol&gt;/gi, '&lt;/ol&gt;&lt;/li&gt;');
<a name="l7020"><span class="linenum">7020</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/ol&gt;&lt;\/li&gt;\n/gi, &quot;&lt;/ol&gt;&quot;);
<a name="l7021"><span class="linenum">7021</span></a>  
<a name="l7022"><span class="linenum">7022</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/li&gt;&lt;ul&gt;/gi, '&lt;/li&gt;&lt;li&gt;&lt;ul&gt;');
<a name="l7023"><span class="linenum">7023</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/ul&gt;/gi, '&lt;/ul&gt;&lt;/li&gt;');
<a name="l7024"><span class="linenum">7024</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/ul&gt;&lt;\/li&gt;\n?/gi, &quot;&lt;/ul&gt;&quot;);
<a name="l7025"><span class="linenum">7025</span></a>  
<a name="l7026"><span class="linenum">7026</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/li&gt;/gi, &quot;&lt;/li&gt;&quot;);
<a name="l7027"><span class="linenum">7027</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/ol&gt;/gi, &quot;&lt;/ol&gt;&quot;);
<a name="l7028"><span class="linenum">7028</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;ol&gt;/gi, &quot;&lt;ol&gt;&quot;);
<a name="l7029"><span class="linenum">7029</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;ul&gt;/gi, &quot;&lt;ul&gt;&quot;);
<a name="l7030"><span class="linenum">7030</span></a>              return html;
<a name="l7031"><span class="linenum">7031</span></a>          },
<a name="l7032"><span class="linenum">7032</span></a>          <span class="comment">/**</span>
<a name="l7033"><span class="linenum">7033</span></a>  <span class="comment">        * @method filter_safari</span>
<a name="l7034"><span class="linenum">7034</span></a>  <span class="comment">        * @param String html The HTML string to filter</span>
<a name="l7035"><span class="linenum">7035</span></a>  <span class="comment">        * @description Filters strings specific to Safari</span>
<a name="l7036"><span class="linenum">7036</span></a>  <span class="comment">        * @return String</span>
<a name="l7037"><span class="linenum">7037</span></a>  <span class="comment">        */</span>
<a name="l7038"><span class="linenum">7038</span></a>          filter_safari: function(html) {
<a name="l7039"><span class="linenum">7039</span></a>              if (this.browser.webkit) {
<a name="l7040"><span class="linenum">7040</span></a>  <span class="comment">                //&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;</span>
<a name="l7041"><span class="linenum">7041</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;([^&gt;])&lt;\/span&gt;/gi, '&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;');
<a name="l7042"><span class="linenum">7042</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/Apple-style-span/gi, '');
<a name="l7043"><span class="linenum">7043</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/style=&quot;line-height: normal;&quot;/gi, '');
<a name="l7044"><span class="linenum">7044</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/yui-wk-div/gi, '');
<a name="l7045"><span class="linenum">7045</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/yui-wk-p/gi, '');
<a name="l7046"><span class="linenum">7046</span></a>  
<a name="l7047"><span class="linenum">7047</span></a>  
<a name="l7048"><span class="linenum">7048</span></a>  <span class="comment">                //Remove bogus LI's</span>
<a name="l7049"><span class="linenum">7049</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;li&gt;&lt;\/li&gt;/gi, '');
<a name="l7050"><span class="linenum">7050</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;li&gt; &lt;\/li&gt;/gi, '');
<a name="l7051"><span class="linenum">7051</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;li&gt;  &lt;\/li&gt;/gi, '');
<a name="l7052"><span class="linenum">7052</span></a>  <span class="comment">                //Remove bogus DIV's - updated from just removing the div's to replacing /div with a break</span>
<a name="l7053"><span class="linenum">7053</span></a>                  if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('ptags')) {
<a name="l7054"><span class="linenum">7054</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('div')" href="../../../../../../_functions/div.html" onMouseOver="funcPopup(event,'div')">div</a>([^&gt;]*)&gt;/g, '&lt;p<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>&gt;');
<a name="l7055"><span class="linenum">7055</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/div&gt;/gi, '&lt;/p&gt;');
<a name="l7056"><span class="linenum">7056</span></a>                  } else {
<a name="l7057"><span class="linenum">7057</span></a>  <span class="comment">                    //html = html.replace(/&lt;div&gt;/gi, '&lt;br&gt;');</span>
<a name="l7058"><span class="linenum">7058</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;<a class="function" onClick="logFunction('div')" href="../../../../../../_functions/div.html" onMouseOver="funcPopup(event,'div')">div</a>([^&gt;]*)&gt;([ tnr]*)&lt;\/div&gt;/gi, '&lt;br&gt;');
<a name="l7059"><span class="linenum">7059</span></a>                      html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/div&gt;/gi, '');
<a name="l7060"><span class="linenum">7060</span></a>                  }
<a name="l7061"><span class="linenum">7061</span></a>              }
<a name="l7062"><span class="linenum">7062</span></a>              return html;
<a name="l7063"><span class="linenum">7063</span></a>          },
<a name="l7064"><span class="linenum">7064</span></a>          <span class="comment">/**</span>
<a name="l7065"><span class="linenum">7065</span></a>  <span class="comment">        * @method filter_internals</span>
<a name="l7066"><span class="linenum">7066</span></a>  <span class="comment">        * @param String html The HTML string to filter</span>
<a name="l7067"><span class="linenum">7067</span></a>  <span class="comment">        * @description Filters internal RTE strings and bogus attrs we don't want</span>
<a name="l7068"><span class="linenum">7068</span></a>  <span class="comment">        * @return String</span>
<a name="l7069"><span class="linenum">7069</span></a>  <span class="comment">        */</span>
<a name="l7070"><span class="linenum">7070</span></a>          filter_internals: function(html) {
<a name="l7071"><span class="linenum">7071</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\r/g, '');
<a name="l7072"><span class="linenum">7072</span></a>  <span class="comment">            //Fix stuff we don't want</span>
<a name="l7073"><span class="linenum">7073</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;\/?(body|head|html)[^&gt;]*&gt;/gi, '');
<a name="l7074"><span class="linenum">7074</span></a>  <span class="comment">            //Fix last BR in LI</span>
<a name="l7075"><span class="linenum">7075</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_BR&gt;&lt;\/li&gt;/gi, '&lt;/li&gt;');
<a name="l7076"><span class="linenum">7076</span></a>  
<a name="l7077"><span class="linenum">7077</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/yui-tag-span/gi, '');
<a name="l7078"><span class="linenum">7078</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/yui-tag/gi, '');
<a name="l7079"><span class="linenum">7079</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/yui-non/gi, '');
<a name="l7080"><span class="linenum">7080</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/yui-img/gi, '');
<a name="l7081"><span class="linenum">7081</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ tag=&quot;span&quot;/gi, '');
<a name="l7082"><span class="linenum">7082</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ class=&quot;&quot;/gi, '');
<a name="l7083"><span class="linenum">7083</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ style=&quot;&quot;/gi, '');
<a name="l7084"><span class="linenum">7084</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ class=&quot; &quot;/gi, '');
<a name="l7085"><span class="linenum">7085</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ class=&quot;  &quot;/gi, '');
<a name="l7086"><span class="linenum">7086</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ target=&quot;&quot;/gi, '');
<a name="l7087"><span class="linenum">7087</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ title=&quot;&quot;/gi, '');
<a name="l7088"><span class="linenum">7088</span></a>  
<a name="l7089"><span class="linenum">7089</span></a>              if (this.browser.ie) {
<a name="l7090"><span class="linenum">7090</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ class= /gi, '');
<a name="l7091"><span class="linenum">7091</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/ class= &gt;/gi, '');
<a name="l7092"><span class="linenum">7092</span></a>              }
<a name="l7093"><span class="linenum">7093</span></a>              
<a name="l7094"><span class="linenum">7094</span></a>              return html;
<a name="l7095"><span class="linenum">7095</span></a>          },
<a name="l7096"><span class="linenum">7096</span></a>          <span class="comment">/**</span>
<a name="l7097"><span class="linenum">7097</span></a>  <span class="comment">        * @method filter_all_rgb</span>
<a name="l7098"><span class="linenum">7098</span></a>  <span class="comment">        * @param String str The HTML string to filter</span>
<a name="l7099"><span class="linenum">7099</span></a>  <span class="comment">        * @description Converts all RGB color strings found in passed string to a hex color, example: style=&quot;color: rgb(0, 255, 0)&quot; converts to style=&quot;color: #00ff00&quot;</span>
<a name="l7100"><span class="linenum">7100</span></a>  <span class="comment">        * @return String</span>
<a name="l7101"><span class="linenum">7101</span></a>  <span class="comment">        */</span>
<a name="l7102"><span class="linenum">7102</span></a>          filter_all_rgb: function(str) {
<a name="l7103"><span class="linenum">7103</span></a>              var exp = new RegExp(&quot;rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)&quot;, &quot;gi&quot;);
<a name="l7104"><span class="linenum">7104</span></a>              var arr = str.<a class="function" onClick="logFunction('match')" href="../../../../../../_functions/match.html" onMouseOver="funcPopup(event,'match')">match</a>(exp);
<a name="l7105"><span class="linenum">7105</span></a>              if (Lang.<a class="function" onClick="logFunction('isArray')" href="../../../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(arr)) {
<a name="l7106"><span class="linenum">7106</span></a>                  for (var i = 0; i &lt; arr.length; i++) {
<a name="l7107"><span class="linenum">7107</span></a>                      var color = this.filter_rgb(arr[i]);
<a name="l7108"><span class="linenum">7108</span></a>                      str = str.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(arr[i].<a class="function" onClick="logFunction('toString')" href="../../../../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>(), color);
<a name="l7109"><span class="linenum">7109</span></a>                  }
<a name="l7110"><span class="linenum">7110</span></a>              }
<a name="l7111"><span class="linenum">7111</span></a>              
<a name="l7112"><span class="linenum">7112</span></a>              return str;
<a name="l7113"><span class="linenum">7113</span></a>          },
<a name="l7114"><span class="linenum">7114</span></a>          <span class="comment">/**</span>
<a name="l7115"><span class="linenum">7115</span></a>  <span class="comment">        * @method filter_rgb</span>
<a name="l7116"><span class="linenum">7116</span></a>  <span class="comment">        * @param String css The CSS string containing rgb(#,#,#);</span>
<a name="l7117"><span class="linenum">7117</span></a>  <span class="comment">        * @description Converts an RGB color string to a hex color, example: rgb(0, 255, 0) converts to #00ff00</span>
<a name="l7118"><span class="linenum">7118</span></a>  <span class="comment">        * @return String</span>
<a name="l7119"><span class="linenum">7119</span></a>  <span class="comment">        */</span>
<a name="l7120"><span class="linenum">7120</span></a>          filter_rgb: function(css) {
<a name="l7121"><span class="linenum">7121</span></a>              if (css.toLowerCase().<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('rgb') != -1) {
<a name="l7122"><span class="linenum">7122</span></a>                  var exp = new RegExp(&quot;(.*?)rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)(.*?)&quot;, &quot;gi&quot;);
<a name="l7123"><span class="linenum">7123</span></a>                  var rgb = css.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(exp, &quot;<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../../../../_variables/1.html">$1</a>,<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../../../../_variables/2.html">$2</a>,<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../../../../_variables/3.html">$3</a>,<a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('4')" href="../../../../../../_variables/4.html">$4</a>,<a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('5')" href="../../../../../../_variables/5.html">$5</a>&quot;).<a class="phpfunction" onClick="logFunction('split')" href="../../../../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>(',');
<a name="l7124"><span class="linenum">7124</span></a>              
<a name="l7125"><span class="linenum">7125</span></a>                  if (rgb.length == 5) {
<a name="l7126"><span class="linenum">7126</span></a>                      var r = parseInt(rgb[1], 10).<a class="function" onClick="logFunction('toString')" href="../../../../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>(16);
<a name="l7127"><span class="linenum">7127</span></a>                      var g = parseInt(rgb[2], 10).<a class="function" onClick="logFunction('toString')" href="../../../../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>(16);
<a name="l7128"><span class="linenum">7128</span></a>                      var b = parseInt(rgb[3], 10).<a class="function" onClick="logFunction('toString')" href="../../../../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>(16);
<a name="l7129"><span class="linenum">7129</span></a>  
<a name="l7130"><span class="linenum">7130</span></a>                      r = r.length == 1 ? '0' + r : r;
<a name="l7131"><span class="linenum">7131</span></a>                      g = g.length == 1 ? '0' + g : g;
<a name="l7132"><span class="linenum">7132</span></a>                      b = b.length == 1 ? '0' + b : b;
<a name="l7133"><span class="linenum">7133</span></a>  
<a name="l7134"><span class="linenum">7134</span></a>                      css = &quot;#&quot; + r + g + b;
<a name="l7135"><span class="linenum">7135</span></a>                  }
<a name="l7136"><span class="linenum">7136</span></a>              }
<a name="l7137"><span class="linenum">7137</span></a>              return css;
<a name="l7138"><span class="linenum">7138</span></a>          },
<a name="l7139"><span class="linenum">7139</span></a>          <span class="comment">/**</span>
<a name="l7140"><span class="linenum">7140</span></a>  <span class="comment">        * @method pre_filter_linebreaks</span>
<a name="l7141"><span class="linenum">7141</span></a>  <span class="comment">        * @param String html The HTML to filter</span>
<a name="l7142"><span class="linenum">7142</span></a>  <span class="comment">        * @param String markup The markup type to filter to</span>
<a name="l7143"><span class="linenum">7143</span></a>  <span class="comment">        * @description HTML Pre Filter</span>
<a name="l7144"><span class="linenum">7144</span></a>  <span class="comment">        * @return String</span>
<a name="l7145"><span class="linenum">7145</span></a>  <span class="comment">        */</span>
<a name="l7146"><span class="linenum">7146</span></a>          pre_filter_linebreaks: function(html, markup) {
<a name="l7147"><span class="linenum">7147</span></a>              if (this.browser.webkit) {
<a name="l7148"><span class="linenum">7148</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;br class=&quot;khtml-block-placeholder&quot;&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7149"><span class="linenum">7149</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;br class=&quot;webkit-block-placeholder&quot;&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7150"><span class="linenum">7150</span></a>              }
<a name="l7151"><span class="linenum">7151</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;br&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7152"><span class="linenum">7152</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;br (.*?)&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7153"><span class="linenum">7153</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;br\/&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7154"><span class="linenum">7154</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;br \/&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7155"><span class="linenum">7155</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;div&gt;&lt;YUI_BR&gt;&lt;\/div&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7156"><span class="linenum">7156</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;p&gt;(&amp;nbsp;|&amp;#160;)&lt;\/p&gt;/g, '&lt;YUI_BR&gt;');            
<a name="l7157"><span class="linenum">7157</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;p&gt;&lt;br&gt;&amp;nbsp;&lt;\/p&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7158"><span class="linenum">7158</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;p&gt;&amp;nbsp;&lt;\/p&gt;/gi, '&lt;YUI_BR&gt;');
<a name="l7159"><span class="linenum">7159</span></a>  <span class="comment">            //Fix last BR</span>
<a name="l7160"><span class="linenum">7160</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_BR&gt;$/, '');
<a name="l7161"><span class="linenum">7161</span></a>  <span class="comment">            //Fix last BR in P</span>
<a name="l7162"><span class="linenum">7162</span></a>              html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_BR&gt;&lt;\/p&gt;/g, '&lt;/p&gt;');
<a name="l7163"><span class="linenum">7163</span></a>              if (this.browser.ie) {
<a name="l7164"><span class="linenum">7164</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/g, '\t');
<a name="l7165"><span class="linenum">7165</span></a>              }
<a name="l7166"><span class="linenum">7166</span></a>              return html;
<a name="l7167"><span class="linenum">7167</span></a>          },
<a name="l7168"><span class="linenum">7168</span></a>          <span class="comment">/**</span>
<a name="l7169"><span class="linenum">7169</span></a>  <span class="comment">        * @method post_filter_linebreaks</span>
<a name="l7170"><span class="linenum">7170</span></a>  <span class="comment">        * @param String html The HTML to filter</span>
<a name="l7171"><span class="linenum">7171</span></a>  <span class="comment">        * @param String markup The markup type to filter to</span>
<a name="l7172"><span class="linenum">7172</span></a>  <span class="comment">        * @description HTML Pre Filter</span>
<a name="l7173"><span class="linenum">7173</span></a>  <span class="comment">        * @return String</span>
<a name="l7174"><span class="linenum">7174</span></a>  <span class="comment">        */</span>
<a name="l7175"><span class="linenum">7175</span></a>          post_filter_linebreaks: function(html, markup) {
<a name="l7176"><span class="linenum">7176</span></a>              if (markup == 'xhtml') {
<a name="l7177"><span class="linenum">7177</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_BR&gt;/g, '&lt;br /&gt;');
<a name="l7178"><span class="linenum">7178</span></a>              } else {
<a name="l7179"><span class="linenum">7179</span></a>                  html = html.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/&lt;YUI_BR&gt;/g, '&lt;br&gt;');
<a name="l7180"><span class="linenum">7180</span></a>              }
<a name="l7181"><span class="linenum">7181</span></a>              return html;
<a name="l7182"><span class="linenum">7182</span></a>          },
<a name="l7183"><span class="linenum">7183</span></a>          <span class="comment">/**</span>
<a name="l7184"><span class="linenum">7184</span></a>  <span class="comment">        * @method clearEditorDoc</span>
<a name="l7185"><span class="linenum">7185</span></a>  <span class="comment">        * @description Clear the doc of the Editor</span>
<a name="l7186"><span class="linenum">7186</span></a>  <span class="comment">        */</span>
<a name="l7187"><span class="linenum">7187</span></a>          clearEditorDoc: function() {
<a name="l7188"><span class="linenum">7188</span></a>              this._getDoc().body.innerHTML = '&amp;nbsp;';
<a name="l7189"><span class="linenum">7189</span></a>          },
<a name="l7190"><span class="linenum">7190</span></a>          <span class="comment">/**</span>
<a name="l7191"><span class="linenum">7191</span></a>  <span class="comment">        * @method openWindow</span>
<a name="l7192"><span class="linenum">7192</span></a>  <span class="comment">        * @description Override Method for Advanced Editor</span>
<a name="l7193"><span class="linenum">7193</span></a>  <span class="comment">        */</span>
<a name="l7194"><span class="linenum">7194</span></a>          openWindow: function(win) {
<a name="l7195"><span class="linenum">7195</span></a>          },
<a name="l7196"><span class="linenum">7196</span></a>          <span class="comment">/**</span>
<a name="l7197"><span class="linenum">7197</span></a>  <span class="comment">        * @method moveWindow</span>
<a name="l7198"><span class="linenum">7198</span></a>  <span class="comment">        * @description Override Method for Advanced Editor</span>
<a name="l7199"><span class="linenum">7199</span></a>  <span class="comment">        */</span>
<a name="l7200"><span class="linenum">7200</span></a>          moveWindow: function() {
<a name="l7201"><span class="linenum">7201</span></a>          },
<a name="l7202"><span class="linenum">7202</span></a>          <span class="comment">/**</span>
<a name="l7203"><span class="linenum">7203</span></a>  <span class="comment">        * @private</span>
<a name="l7204"><span class="linenum">7204</span></a>  <span class="comment">        * @method _closeWindow</span>
<a name="l7205"><span class="linenum">7205</span></a>  <span class="comment">        * @description Override Method for Advanced Editor</span>
<a name="l7206"><span class="linenum">7206</span></a>  <span class="comment">        */</span>
<a name="l7207"><span class="linenum">7207</span></a>          _closeWindow: function() {
<a name="l7208"><span class="linenum">7208</span></a>          },
<a name="l7209"><span class="linenum">7209</span></a>          <span class="comment">/**</span>
<a name="l7210"><span class="linenum">7210</span></a>  <span class="comment">        * @method closeWindow</span>
<a name="l7211"><span class="linenum">7211</span></a>  <span class="comment">        * @description Override Method for Advanced Editor</span>
<a name="l7212"><span class="linenum">7212</span></a>  <span class="comment">        */</span>
<a name="l7213"><span class="linenum">7213</span></a>          closeWindow: function() {
<a name="l7214"><span class="linenum">7214</span></a>  <span class="comment">            //this.unsubscribeAll('afterExecCommand');</span>
<a name="l7215"><span class="linenum">7215</span></a>              this.toolbar.resetAllButtons();
<a name="l7216"><span class="linenum">7216</span></a>              this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();        
<a name="l7217"><span class="linenum">7217</span></a>          },
<a name="l7218"><span class="linenum">7218</span></a>          <span class="comment">/**</span>
<a name="l7219"><span class="linenum">7219</span></a>  <span class="comment">        * @method destroy</span>
<a name="l7220"><span class="linenum">7220</span></a>  <span class="comment">        * @description Destroys the editor, all of it's elements and objects.</span>
<a name="l7221"><span class="linenum">7221</span></a>  <span class="comment">        * @return {Boolean}</span>
<a name="l7222"><span class="linenum">7222</span></a>  <span class="comment">        */</span>
<a name="l7223"><span class="linenum">7223</span></a>          destroy: function() {
<a name="l7224"><span class="linenum">7224</span></a>              if (this._nodeChangeDelayTimer) {
<a name="l7225"><span class="linenum">7225</span></a>                  clearTimeout(this._nodeChangeDelayTimer);
<a name="l7226"><span class="linenum">7226</span></a>              }
<a name="l7227"><span class="linenum">7227</span></a>              this.<a class="function" onClick="logFunction('hide')" href="../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l7228"><span class="linenum">7228</span></a>          
<a name="l7229"><span class="linenum">7229</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Destroying Editor', 'warn', 'SimpleEditor');
<a name="l7230"><span class="linenum">7230</span></a>              if (this.resize) {
<a name="l7231"><span class="linenum">7231</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Destroying Resize', 'warn', 'SimpleEditor');
<a name="l7232"><span class="linenum">7232</span></a>                  this.resize.<a class="function" onClick="logFunction('destroy')" href="../../../../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l7233"><span class="linenum">7233</span></a>              }
<a name="l7234"><span class="linenum">7234</span></a>              if (this.dd) {
<a name="l7235"><span class="linenum">7235</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Unreg DragDrop Instance', 'warn', 'SimpleEditor');
<a name="l7236"><span class="linenum">7236</span></a>                  this.dd.unreg();
<a name="l7237"><span class="linenum">7237</span></a>              }
<a name="l7238"><span class="linenum">7238</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel')) {
<a name="l7239"><span class="linenum">7239</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Destroying Editor Panel', 'warn', 'SimpleEditor');
<a name="l7240"><span class="linenum">7240</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('destroy')" href="../../../../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l7241"><span class="linenum">7241</span></a>              }
<a name="l7242"><span class="linenum">7242</span></a>              this.saveHTML();
<a name="l7243"><span class="linenum">7243</span></a>              this.toolbar.<a class="function" onClick="logFunction('destroy')" href="../../../../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l7244"><span class="linenum">7244</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Restoring TextArea', 'info', 'SimpleEditor');
<a name="l7245"><span class="linenum">7245</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('visibility', 'visible');
<a name="l7246"><span class="linenum">7246</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('position', 'static');
<a name="l7247"><span class="linenum">7247</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('top', '');
<a name="l7248"><span class="linenum">7248</span></a>              this.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('left', '');
<a name="l7249"><span class="linenum">7249</span></a>              var textArea = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element');
<a name="l7250"><span class="linenum">7250</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('parentNode').replaceChild(textArea, this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element'));
<a name="l7251"><span class="linenum">7251</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').innerHTML = '';
<a name="l7252"><span class="linenum">7252</span></a>              this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('handleSubmit', false); <span class="comment">//Remove the submit handler</span>
<a name="l7253"><span class="linenum">7253</span></a>              return true;
<a name="l7254"><span class="linenum">7254</span></a>          },        
<a name="l7255"><span class="linenum">7255</span></a>          <span class="comment">/**</span>
<a name="l7256"><span class="linenum">7256</span></a>  <span class="comment">        * @method toString</span>
<a name="l7257"><span class="linenum">7257</span></a>  <span class="comment">        * @description Returns a string representing the editor.</span>
<a name="l7258"><span class="linenum">7258</span></a>  <span class="comment">        * @return {String}</span>
<a name="l7259"><span class="linenum">7259</span></a>  <span class="comment">        */</span>
<a name="l7260"><span class="linenum">7260</span></a>          toString: function() {
<a name="l7261"><span class="linenum">7261</span></a>              var str = 'SimpleEditor';
<a name="l7262"><span class="linenum">7262</span></a>              if (this.get &amp;&amp; this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont')) {
<a name="l7263"><span class="linenum">7263</span></a>                  str = 'SimpleEditor (#' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + ')' + ((this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled') ? ' Disabled' : ''));
<a name="l7264"><span class="linenum">7264</span></a>              }
<a name="l7265"><span class="linenum">7265</span></a>              return str;
<a name="l7266"><span class="linenum">7266</span></a>          }
<a name="l7267"><span class="linenum">7267</span></a>      });
<a name="l7268"><span class="linenum">7268</span></a>  
<a name="l7269"><span class="linenum">7269</span></a>  <span class="comment">/**</span>
<a name="l7270"><span class="linenum">7270</span></a>  <span class="comment">* @event toolbarLoaded</span>
<a name="l7271"><span class="linenum">7271</span></a>  <span class="comment">* @description Event is fired during the render process directly after the Toolbar is loaded. Allowing you to attach events to the toolbar. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7272"><span class="linenum">7272</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7273"><span class="linenum">7273</span></a>  <span class="comment">*/</span>
<a name="l7274"><span class="linenum">7274</span></a>  <span class="comment">/**</span>
<a name="l7275"><span class="linenum">7275</span></a>  <span class="comment">* @event cleanHTML</span>
<a name="l7276"><span class="linenum">7276</span></a>  <span class="comment">* @description Event is fired after the cleanHTML method is called.</span>
<a name="l7277"><span class="linenum">7277</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7278"><span class="linenum">7278</span></a>  <span class="comment">*/</span>
<a name="l7279"><span class="linenum">7279</span></a>  <span class="comment">/**</span>
<a name="l7280"><span class="linenum">7280</span></a>  <span class="comment">* @event afterRender</span>
<a name="l7281"><span class="linenum">7281</span></a>  <span class="comment">* @description Event is fired after the render process finishes. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7282"><span class="linenum">7282</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7283"><span class="linenum">7283</span></a>  <span class="comment">*/</span>
<a name="l7284"><span class="linenum">7284</span></a>  <span class="comment">/**</span>
<a name="l7285"><span class="linenum">7285</span></a>  <span class="comment">* @event editorContentLoaded</span>
<a name="l7286"><span class="linenum">7286</span></a>  <span class="comment">* @description Event is fired after the editor iframe's document fully loads and fires it's onload event. From here you can start injecting your own things into the document. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7287"><span class="linenum">7287</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7288"><span class="linenum">7288</span></a>  <span class="comment">*/</span>
<a name="l7289"><span class="linenum">7289</span></a>  <span class="comment">/**</span>
<a name="l7290"><span class="linenum">7290</span></a>  <span class="comment">* @event beforeNodeChange</span>
<a name="l7291"><span class="linenum">7291</span></a>  <span class="comment">* @description Event fires at the beginning of the nodeChange process. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7292"><span class="linenum">7292</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7293"><span class="linenum">7293</span></a>  <span class="comment">*/</span>
<a name="l7294"><span class="linenum">7294</span></a>  <span class="comment">/**</span>
<a name="l7295"><span class="linenum">7295</span></a>  <span class="comment">* @event afterNodeChange</span>
<a name="l7296"><span class="linenum">7296</span></a>  <span class="comment">* @description Event fires at the end of the nodeChange process. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7297"><span class="linenum">7297</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7298"><span class="linenum">7298</span></a>  <span class="comment">*/</span>
<a name="l7299"><span class="linenum">7299</span></a>  <span class="comment">/**</span>
<a name="l7300"><span class="linenum">7300</span></a>  <span class="comment">* @event beforeExecCommand</span>
<a name="l7301"><span class="linenum">7301</span></a>  <span class="comment">* @description Event fires at the beginning of the execCommand process. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7302"><span class="linenum">7302</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7303"><span class="linenum">7303</span></a>  <span class="comment">*/</span>
<a name="l7304"><span class="linenum">7304</span></a>  <span class="comment">/**</span>
<a name="l7305"><span class="linenum">7305</span></a>  <span class="comment">* @event afterExecCommand</span>
<a name="l7306"><span class="linenum">7306</span></a>  <span class="comment">* @description Event fires at the end of the execCommand process. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7307"><span class="linenum">7307</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7308"><span class="linenum">7308</span></a>  <span class="comment">*/</span>
<a name="l7309"><span class="linenum">7309</span></a>  <span class="comment">/**</span>
<a name="l7310"><span class="linenum">7310</span></a>  <span class="comment">* @event editorMouseUp</span>
<a name="l7311"><span class="linenum">7311</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7312"><span class="linenum">7312</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7313"><span class="linenum">7313</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7314"><span class="linenum">7314</span></a>  <span class="comment">*/</span>
<a name="l7315"><span class="linenum">7315</span></a>  <span class="comment">/**</span>
<a name="l7316"><span class="linenum">7316</span></a>  <span class="comment">* @event editorMouseDown</span>
<a name="l7317"><span class="linenum">7317</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7318"><span class="linenum">7318</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7319"><span class="linenum">7319</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7320"><span class="linenum">7320</span></a>  <span class="comment">*/</span>
<a name="l7321"><span class="linenum">7321</span></a>  <span class="comment">/**</span>
<a name="l7322"><span class="linenum">7322</span></a>  <span class="comment">* @event editorDoubleClick</span>
<a name="l7323"><span class="linenum">7323</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7324"><span class="linenum">7324</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7325"><span class="linenum">7325</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7326"><span class="linenum">7326</span></a>  <span class="comment">*/</span>
<a name="l7327"><span class="linenum">7327</span></a>  <span class="comment">/**</span>
<a name="l7328"><span class="linenum">7328</span></a>  <span class="comment">* @event editorClick</span>
<a name="l7329"><span class="linenum">7329</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7330"><span class="linenum">7330</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7331"><span class="linenum">7331</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7332"><span class="linenum">7332</span></a>  <span class="comment">*/</span>
<a name="l7333"><span class="linenum">7333</span></a>  <span class="comment">/**</span>
<a name="l7334"><span class="linenum">7334</span></a>  <span class="comment">* @event editorKeyUp</span>
<a name="l7335"><span class="linenum">7335</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7336"><span class="linenum">7336</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7337"><span class="linenum">7337</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7338"><span class="linenum">7338</span></a>  <span class="comment">*/</span>
<a name="l7339"><span class="linenum">7339</span></a>  <span class="comment">/**</span>
<a name="l7340"><span class="linenum">7340</span></a>  <span class="comment">* @event editorKeyPress</span>
<a name="l7341"><span class="linenum">7341</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7342"><span class="linenum">7342</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7343"><span class="linenum">7343</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7344"><span class="linenum">7344</span></a>  <span class="comment">*/</span>
<a name="l7345"><span class="linenum">7345</span></a>  <span class="comment">/**</span>
<a name="l7346"><span class="linenum">7346</span></a>  <span class="comment">* @event editorKeyDown</span>
<a name="l7347"><span class="linenum">7347</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7348"><span class="linenum">7348</span></a>  <span class="comment">* @description Passed through HTML Event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l7349"><span class="linenum">7349</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7350"><span class="linenum">7350</span></a>  <span class="comment">*/</span>
<a name="l7351"><span class="linenum">7351</span></a>  <span class="comment">/**</span>
<a name="l7352"><span class="linenum">7352</span></a>  <span class="comment">* @event beforeEditorMouseUp</span>
<a name="l7353"><span class="linenum">7353</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7354"><span class="linenum">7354</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7355"><span class="linenum">7355</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7356"><span class="linenum">7356</span></a>  <span class="comment">*/</span>
<a name="l7357"><span class="linenum">7357</span></a>  <span class="comment">/**</span>
<a name="l7358"><span class="linenum">7358</span></a>  <span class="comment">* @event beforeEditorMouseDown</span>
<a name="l7359"><span class="linenum">7359</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7360"><span class="linenum">7360</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7361"><span class="linenum">7361</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7362"><span class="linenum">7362</span></a>  <span class="comment">*/</span>
<a name="l7363"><span class="linenum">7363</span></a>  <span class="comment">/**</span>
<a name="l7364"><span class="linenum">7364</span></a>  <span class="comment">* @event beforeEditorDoubleClick</span>
<a name="l7365"><span class="linenum">7365</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7366"><span class="linenum">7366</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7367"><span class="linenum">7367</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7368"><span class="linenum">7368</span></a>  <span class="comment">*/</span>
<a name="l7369"><span class="linenum">7369</span></a>  <span class="comment">/**</span>
<a name="l7370"><span class="linenum">7370</span></a>  <span class="comment">* @event beforeEditorClick</span>
<a name="l7371"><span class="linenum">7371</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7372"><span class="linenum">7372</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7373"><span class="linenum">7373</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7374"><span class="linenum">7374</span></a>  <span class="comment">*/</span>
<a name="l7375"><span class="linenum">7375</span></a>  <span class="comment">/**</span>
<a name="l7376"><span class="linenum">7376</span></a>  <span class="comment">* @event beforeEditorKeyUp</span>
<a name="l7377"><span class="linenum">7377</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7378"><span class="linenum">7378</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7379"><span class="linenum">7379</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7380"><span class="linenum">7380</span></a>  <span class="comment">*/</span>
<a name="l7381"><span class="linenum">7381</span></a>  <span class="comment">/**</span>
<a name="l7382"><span class="linenum">7382</span></a>  <span class="comment">* @event beforeEditorKeyPress</span>
<a name="l7383"><span class="linenum">7383</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7384"><span class="linenum">7384</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7385"><span class="linenum">7385</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7386"><span class="linenum">7386</span></a>  <span class="comment">*/</span>
<a name="l7387"><span class="linenum">7387</span></a>  <span class="comment">/**</span>
<a name="l7388"><span class="linenum">7388</span></a>  <span class="comment">* @event beforeEditorKeyDown</span>
<a name="l7389"><span class="linenum">7389</span></a>  <span class="comment">* @param {Event} ev The DOM Event that occured</span>
<a name="l7390"><span class="linenum">7390</span></a>  <span class="comment">* @description Fires before editor event, returning false will stop the internal processing.</span>
<a name="l7391"><span class="linenum">7391</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7392"><span class="linenum">7392</span></a>  <span class="comment">*/</span>
<a name="l7393"><span class="linenum">7393</span></a>  
<a name="l7394"><span class="linenum">7394</span></a>  <span class="comment">/**</span>
<a name="l7395"><span class="linenum">7395</span></a>  <span class="comment">* @event editorWindowFocus</span>
<a name="l7396"><span class="linenum">7396</span></a>  <span class="comment">* @description Fires when the iframe is focused. Note, this is window focus event, not an Editor focus event.</span>
<a name="l7397"><span class="linenum">7397</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7398"><span class="linenum">7398</span></a>  <span class="comment">*/</span>
<a name="l7399"><span class="linenum">7399</span></a>  <span class="comment">/**</span>
<a name="l7400"><span class="linenum">7400</span></a>  <span class="comment">* @event editorWindowBlur</span>
<a name="l7401"><span class="linenum">7401</span></a>  <span class="comment">* @description Fires when the iframe is blurred. Note, this is window blur event, not an Editor blur event.</span>
<a name="l7402"><span class="linenum">7402</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l7403"><span class="linenum">7403</span></a>  <span class="comment">*/</span>
<a name="l7404"><span class="linenum">7404</span></a>  
<a name="l7405"><span class="linenum">7405</span></a>  
<a name="l7406"><span class="linenum">7406</span></a>  <span class="comment">/**</span>
<a name="l7407"><span class="linenum">7407</span></a>  <span class="comment"> * @description Singleton object used to track the open window objects and panels across the various open editors</span>
<a name="l7408"><span class="linenum">7408</span></a>  <span class="comment"> * @class EditorInfo</span>
<a name="l7409"><span class="linenum">7409</span></a>  <span class="comment"> * @static</span>
<a name="l7410"><span class="linenum">7410</span></a>  <span class="comment">*/</span>
<a name="l7411"><span class="linenum">7411</span></a>  YAHOO.widget.EditorInfo = {
<a name="l7412"><span class="linenum">7412</span></a>      <span class="comment">/**</span>
<a name="l7413"><span class="linenum">7413</span></a>  <span class="comment">    * @private</span>
<a name="l7414"><span class="linenum">7414</span></a>  <span class="comment">    * @property _instances</span>
<a name="l7415"><span class="linenum">7415</span></a>  <span class="comment">    * @description A reference to all editors on the page.</span>
<a name="l7416"><span class="linenum">7416</span></a>  <span class="comment">    * @type Object</span>
<a name="l7417"><span class="linenum">7417</span></a>  <span class="comment">    */</span>
<a name="l7418"><span class="linenum">7418</span></a>      _instances: {},
<a name="l7419"><span class="linenum">7419</span></a>      <span class="comment">/**</span>
<a name="l7420"><span class="linenum">7420</span></a>  <span class="comment">    * @private</span>
<a name="l7421"><span class="linenum">7421</span></a>  <span class="comment">    * @property blankImage</span>
<a name="l7422"><span class="linenum">7422</span></a>  <span class="comment">    * @description A reference to the blankImage url</span>
<a name="l7423"><span class="linenum">7423</span></a>  <span class="comment">    * @type String </span>
<a name="l7424"><span class="linenum">7424</span></a>  <span class="comment">    */</span>
<a name="l7425"><span class="linenum">7425</span></a>      blankImage: '',
<a name="l7426"><span class="linenum">7426</span></a>      <span class="comment">/**</span>
<a name="l7427"><span class="linenum">7427</span></a>  <span class="comment">    * @private</span>
<a name="l7428"><span class="linenum">7428</span></a>  <span class="comment">    * @property window</span>
<a name="l7429"><span class="linenum">7429</span></a>  <span class="comment">    * @description A reference to the currently open window object in any editor on the page.</span>
<a name="l7430"><span class="linenum">7430</span></a>  <span class="comment">    * @type Object &lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;YAHOO.widget.EditorWindow&lt;/a&gt;</span>
<a name="l7431"><span class="linenum">7431</span></a>  <span class="comment">    */</span>
<a name="l7432"><span class="linenum">7432</span></a>      window: {},
<a name="l7433"><span class="linenum">7433</span></a>      <span class="comment">/**</span>
<a name="l7434"><span class="linenum">7434</span></a>  <span class="comment">    * @private</span>
<a name="l7435"><span class="linenum">7435</span></a>  <span class="comment">    * @property panel</span>
<a name="l7436"><span class="linenum">7436</span></a>  <span class="comment">    * @description A reference to the currently open panel in any editor on the page.</span>
<a name="l7437"><span class="linenum">7437</span></a>  <span class="comment">    * @type Object &lt;a href=&quot;YAHOO.widget.Overlay.html&quot;&gt;YAHOO.widget.Overlay&lt;/a&gt;</span>
<a name="l7438"><span class="linenum">7438</span></a>  <span class="comment">    */</span>
<a name="l7439"><span class="linenum">7439</span></a>      panel: null,
<a name="l7440"><span class="linenum">7440</span></a>      <span class="comment">/**</span>
<a name="l7441"><span class="linenum">7441</span></a>  <span class="comment">    * @method getEditorById</span>
<a name="l7442"><span class="linenum">7442</span></a>  <span class="comment">    * @description Returns a reference to the Editor object associated with the given textarea</span>
<a name="l7443"><span class="linenum">7443</span></a>  <span class="comment">    * @param {String/HTMLElement} id The id or reference of the textarea to return the Editor instance of</span>
<a name="l7444"><span class="linenum">7444</span></a>  <span class="comment">    * @return Object &lt;a href=&quot;YAHOO.widget.Editor.html&quot;&gt;YAHOO.widget.Editor&lt;/a&gt;</span>
<a name="l7445"><span class="linenum">7445</span></a>  <span class="comment">    */</span>
<a name="l7446"><span class="linenum">7446</span></a>      getEditorById: function(id) {
<a name="l7447"><span class="linenum">7447</span></a>          if (!YAHOO.lang.<a class="function" onClick="logFunction('isString')" href="../../../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(id)) {
<a name="l7448"><span class="linenum">7448</span></a>  <span class="comment">            //Not a string, assume a node Reference</span>
<a name="l7449"><span class="linenum">7449</span></a>              id = id.id;
<a name="l7450"><span class="linenum">7450</span></a>          }
<a name="l7451"><span class="linenum">7451</span></a>          if (this._instances[id]) {
<a name="l7452"><span class="linenum">7452</span></a>              return this._instances[id];
<a name="l7453"><span class="linenum">7453</span></a>          }
<a name="l7454"><span class="linenum">7454</span></a>          return false;
<a name="l7455"><span class="linenum">7455</span></a>      },
<a name="l7456"><span class="linenum">7456</span></a>      <span class="comment">/**</span>
<a name="l7457"><span class="linenum">7457</span></a>  <span class="comment">    * @method saveAll</span>
<a name="l7458"><span class="linenum">7458</span></a>  <span class="comment">    * @description Saves all Editor instances on the page. If a form reference is passed, only Editor's bound to this form will be saved.</span>
<a name="l7459"><span class="linenum">7459</span></a>  <span class="comment">    * @param {HTMLElement} form The form to check if this Editor instance belongs to</span>
<a name="l7460"><span class="linenum">7460</span></a>  <span class="comment">    */</span>
<a name="l7461"><span class="linenum">7461</span></a>      saveAll: function(form) {
<a name="l7462"><span class="linenum">7462</span></a>          var i, e, items = YAHOO.widget.EditorInfo._instances;
<a name="l7463"><span class="linenum">7463</span></a>          if (form) {
<a name="l7464"><span class="linenum">7464</span></a>              for (i in items) {
<a name="l7465"><span class="linenum">7465</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(items, i)) {
<a name="l7466"><span class="linenum">7466</span></a>                      e = items[i];
<a name="l7467"><span class="linenum">7467</span></a>                      if (e.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form &amp;&amp; (e.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').form == form)) {
<a name="l7468"><span class="linenum">7468</span></a>                          e.saveHTML();
<a name="l7469"><span class="linenum">7469</span></a>                      }
<a name="l7470"><span class="linenum">7470</span></a>                  }
<a name="l7471"><span class="linenum">7471</span></a>              }
<a name="l7472"><span class="linenum">7472</span></a>          } else {
<a name="l7473"><span class="linenum">7473</span></a>              for (i in items) {
<a name="l7474"><span class="linenum">7474</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(items, i)) {
<a name="l7475"><span class="linenum">7475</span></a>                      items[i].saveHTML();
<a name="l7476"><span class="linenum">7476</span></a>                  }
<a name="l7477"><span class="linenum">7477</span></a>              }
<a name="l7478"><span class="linenum">7478</span></a>          }
<a name="l7479"><span class="linenum">7479</span></a>      },
<a name="l7480"><span class="linenum">7480</span></a>      <span class="comment">/**</span>
<a name="l7481"><span class="linenum">7481</span></a>  <span class="comment">    * @method toString</span>
<a name="l7482"><span class="linenum">7482</span></a>  <span class="comment">    * @description Returns a string representing the EditorInfo.</span>
<a name="l7483"><span class="linenum">7483</span></a>  <span class="comment">    * @return {String}</span>
<a name="l7484"><span class="linenum">7484</span></a>  <span class="comment">    */</span>
<a name="l7485"><span class="linenum">7485</span></a>      toString: function() {
<a name="l7486"><span class="linenum">7486</span></a>          var len = 0;
<a name="l7487"><span class="linenum">7487</span></a>          for (var i in this._instances) {
<a name="l7488"><span class="linenum">7488</span></a>              if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(this._instances, i)) {
<a name="l7489"><span class="linenum">7489</span></a>                  len++;
<a name="l7490"><span class="linenum">7490</span></a>              }
<a name="l7491"><span class="linenum">7491</span></a>          }
<a name="l7492"><span class="linenum">7492</span></a>          return 'Editor <a class="function" onClick="logFunction('Info')" href="../../../../../../_functions/info.html" onMouseOver="funcPopup(event,'info')">Info</a> (' + len + ' registered intance' + ((len &gt; 1) ? 's' : '') + ')';
<a name="l7493"><span class="linenum">7493</span></a>      }
<a name="l7494"><span class="linenum">7494</span></a>  };
<a name="l7495"><span class="linenum">7495</span></a>  
<a name="l7496"><span class="linenum">7496</span></a>  
<a name="l7497"><span class="linenum">7497</span></a>  
<a name="l7498"><span class="linenum">7498</span></a>      
<a name="l7499"><span class="linenum">7499</span></a>  })();
<a name="l7500"><span class="linenum">7500</span></a>  <span class="comment">/**</span>
<a name="l7501"><span class="linenum">7501</span></a>  <span class="comment"> * @module editor</span>
<a name="l7502"><span class="linenum">7502</span></a>  <span class="comment"> * @description &lt;p&gt;The Rich Text Editor is a UI control that replaces a standard HTML textarea; it allows for the rich formatting of text content, including common structural treatments like lists, formatting treatments like bold and italic text, and drag-and-drop inclusion and sizing of images. The Rich Text Editor's toolbar is extensible via a plugin architecture so that advanced implementations can achieve a high degree of customization.&lt;/p&gt;</span>
<a name="l7503"><span class="linenum">7503</span></a>  <span class="comment"> * @namespace YAHOO.widget</span>
<a name="l7504"><span class="linenum">7504</span></a>  <span class="comment"> * @requires yahoo, dom, element, event, container_core, simpleeditor</span>
<a name="l7505"><span class="linenum">7505</span></a>  <span class="comment"> * @optional dragdrop, animation, menu, button, resize</span>
<a name="l7506"><span class="linenum">7506</span></a>  <span class="comment"> */</span>
<a name="l7507"><span class="linenum">7507</span></a>  
<a name="l7508"><span class="linenum">7508</span></a>  (function() {
<a name="l7509"><span class="linenum">7509</span></a>  var Dom = YAHOO.util.Dom,
<a name="l7510"><span class="linenum">7510</span></a>      Event = YAHOO.util.Event,
<a name="l7511"><span class="linenum">7511</span></a>      Lang = YAHOO.lang,
<a name="l7512"><span class="linenum">7512</span></a>      Toolbar = YAHOO.widget.Toolbar;
<a name="l7513"><span class="linenum">7513</span></a>  
<a name="l7514"><span class="linenum">7514</span></a>      <span class="comment">/**</span>
<a name="l7515"><span class="linenum">7515</span></a>  <span class="comment">     * The Rich Text Editor is a UI control that replaces a standard HTML textarea; it allows for the rich formatting of text content, including common structural treatments like lists, formatting treatments like bold and italic text, and drag-and-drop inclusion and sizing of images. The Rich Text Editor's toolbar is extensible via a plugin architecture so that advanced implementations can achieve a high degree of customization.</span>
<a name="l7516"><span class="linenum">7516</span></a>  <span class="comment">     * @constructor</span>
<a name="l7517"><span class="linenum">7517</span></a>  <span class="comment">     * @class Editor</span>
<a name="l7518"><span class="linenum">7518</span></a>  <span class="comment">     * @extends YAHOO.widget.SimpleEditor</span>
<a name="l7519"><span class="linenum">7519</span></a>  <span class="comment">     * @param {String/HTMLElement} el The textarea element to turn into an editor.</span>
<a name="l7520"><span class="linenum">7520</span></a>  <span class="comment">     * @param {Object} attrs Object liternal containing configuration parameters.</span>
<a name="l7521"><span class="linenum">7521</span></a>  <span class="comment">    */</span>
<a name="l7522"><span class="linenum">7522</span></a>      
<a name="l7523"><span class="linenum">7523</span></a>      YAHOO.widget.Editor = function(el, attrs) {
<a name="l7524"><span class="linenum">7524</span></a>          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Editor Initalizing', 'info', 'Editor');
<a name="l7525"><span class="linenum">7525</span></a>          YAHOO.widget.Editor.superclass.constructor.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, el, attrs);
<a name="l7526"><span class="linenum">7526</span></a>      };
<a name="l7527"><span class="linenum">7527</span></a>  
<a name="l7528"><span class="linenum">7528</span></a>      YAHOO.<a class="function" onClick="logFunction('extend')" href="../../../../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(YAHOO.widget.Editor, YAHOO.widget.SimpleEditor, {
<a name="l7529"><span class="linenum">7529</span></a>          <span class="comment">/**</span>
<a name="l7530"><span class="linenum">7530</span></a>  <span class="comment">        * @private</span>
<a name="l7531"><span class="linenum">7531</span></a>  <span class="comment">        * @property _undoCache</span>
<a name="l7532"><span class="linenum">7532</span></a>  <span class="comment">        * @description An Array hash of the Undo Levels.</span>
<a name="l7533"><span class="linenum">7533</span></a>  <span class="comment">        * @type Array</span>
<a name="l7534"><span class="linenum">7534</span></a>  <span class="comment">        */</span>
<a name="l7535"><span class="linenum">7535</span></a>          _undoCache: null,
<a name="l7536"><span class="linenum">7536</span></a>          <span class="comment">/**</span>
<a name="l7537"><span class="linenum">7537</span></a>  <span class="comment">        * @private</span>
<a name="l7538"><span class="linenum">7538</span></a>  <span class="comment">        * @property _undoLevel</span>
<a name="l7539"><span class="linenum">7539</span></a>  <span class="comment">        * @description The index of the current undo state.</span>
<a name="l7540"><span class="linenum">7540</span></a>  <span class="comment">        * @type Number</span>
<a name="l7541"><span class="linenum">7541</span></a>  <span class="comment">        */</span>
<a name="l7542"><span class="linenum">7542</span></a>          _undoLevel: null,    
<a name="l7543"><span class="linenum">7543</span></a>          <span class="comment">/**</span>
<a name="l7544"><span class="linenum">7544</span></a>  <span class="comment">        * @private</span>
<a name="l7545"><span class="linenum">7545</span></a>  <span class="comment">        * @method _hasUndoLevel</span>
<a name="l7546"><span class="linenum">7546</span></a>  <span class="comment">        * @description Checks to see if we have an undo level available</span>
<a name="l7547"><span class="linenum">7547</span></a>  <span class="comment">        * @return Boolean</span>
<a name="l7548"><span class="linenum">7548</span></a>  <span class="comment">        */</span>
<a name="l7549"><span class="linenum">7549</span></a>          _hasUndoLevel: function() {
<a name="l7550"><span class="linenum">7550</span></a>              return ((this._undoCache.length &gt; 1) &amp;&amp; this._undoLevel);
<a name="l7551"><span class="linenum">7551</span></a>          },
<a name="l7552"><span class="linenum">7552</span></a>          <span class="comment">/**</span>
<a name="l7553"><span class="linenum">7553</span></a>  <span class="comment">        * @private</span>
<a name="l7554"><span class="linenum">7554</span></a>  <span class="comment">        * @method _undoNodeChange</span>
<a name="l7555"><span class="linenum">7555</span></a>  <span class="comment">        * @description nodeChange listener for undo processing</span>
<a name="l7556"><span class="linenum">7556</span></a>  <span class="comment">        */</span>
<a name="l7557"><span class="linenum">7557</span></a>          _undoNodeChange: function() {
<a name="l7558"><span class="linenum">7558</span></a>              var undo_button = this.toolbar.getButtonByValue('undo'),
<a name="l7559"><span class="linenum">7559</span></a>                  redo_button = this.toolbar.getButtonByValue('redo');
<a name="l7560"><span class="linenum">7560</span></a>              if (undo_button &amp;&amp; redo_button) {
<a name="l7561"><span class="linenum">7561</span></a>                  if (this._hasUndoLevel()) {
<a name="l7562"><span class="linenum">7562</span></a>                      this.toolbar.enableButton(undo_button);
<a name="l7563"><span class="linenum">7563</span></a>                  }
<a name="l7564"><span class="linenum">7564</span></a>                  if (this._undoLevel &lt; this._undoCache.length) {
<a name="l7565"><span class="linenum">7565</span></a>                      this.toolbar.enableButton(redo_button);
<a name="l7566"><span class="linenum">7566</span></a>                  }
<a name="l7567"><span class="linenum">7567</span></a>              }
<a name="l7568"><span class="linenum">7568</span></a>              this._lastCommand = null;
<a name="l7569"><span class="linenum">7569</span></a>          },
<a name="l7570"><span class="linenum">7570</span></a>          <span class="comment">/**</span>
<a name="l7571"><span class="linenum">7571</span></a>  <span class="comment">        * @private</span>
<a name="l7572"><span class="linenum">7572</span></a>  <span class="comment">        * @method _checkUndo</span>
<a name="l7573"><span class="linenum">7573</span></a>  <span class="comment">        * @description Prunes the undo cache when it reaches the maxUndo config</span>
<a name="l7574"><span class="linenum">7574</span></a>  <span class="comment">        */</span>
<a name="l7575"><span class="linenum">7575</span></a>          _checkUndo: function() {
<a name="l7576"><span class="linenum">7576</span></a>              var len = this._undoCache.length,
<a name="l7577"><span class="linenum">7577</span></a>              tmp = [];
<a name="l7578"><span class="linenum">7578</span></a>              if (len &gt;= this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('maxUndo')) {
<a name="l7579"><span class="linenum">7579</span></a>  <span class="comment">                //YAHOO.log('Undo cache too large (' + len + '), pruning..', 'info', 'SimpleEditor');</span>
<a name="l7580"><span class="linenum">7580</span></a>                  for (var i = (len - this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('maxUndo')); i &lt; len; i++) {
<a name="l7581"><span class="linenum">7581</span></a>                      tmp.<a class="function" onClick="logFunction('push')" href="../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(this._undoCache[i]);
<a name="l7582"><span class="linenum">7582</span></a>                  }
<a name="l7583"><span class="linenum">7583</span></a>                  this._undoCache = tmp;
<a name="l7584"><span class="linenum">7584</span></a>                  this._undoLevel = this._undoCache.length;
<a name="l7585"><span class="linenum">7585</span></a>              }
<a name="l7586"><span class="linenum">7586</span></a>          },
<a name="l7587"><span class="linenum">7587</span></a>          <span class="comment">/**</span>
<a name="l7588"><span class="linenum">7588</span></a>  <span class="comment">        * @private</span>
<a name="l7589"><span class="linenum">7589</span></a>  <span class="comment">        * @method _putUndo</span>
<a name="l7590"><span class="linenum">7590</span></a>  <span class="comment">        * @description Puts the content of the Editor into the _undoCache.</span>
<a name="l7591"><span class="linenum">7591</span></a>  <span class="comment">        * //TODO Convert the hash to a series of TEXTAREAS to store state in.</span>
<a name="l7592"><span class="linenum">7592</span></a>  <span class="comment">        * @param {String} str The content of the Editor</span>
<a name="l7593"><span class="linenum">7593</span></a>  <span class="comment">        */</span>
<a name="l7594"><span class="linenum">7594</span></a>          _putUndo: function(str) {
<a name="l7595"><span class="linenum">7595</span></a>              if (this._undoLevel === this._undoCache.length) {
<a name="l7596"><span class="linenum">7596</span></a>                  this._undoCache.<a class="function" onClick="logFunction('push')" href="../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(str);
<a name="l7597"><span class="linenum">7597</span></a>                  this._undoLevel = this._undoCache.length;
<a name="l7598"><span class="linenum">7598</span></a>              } else {
<a name="l7599"><span class="linenum">7599</span></a>                  var str = this.getEditorHTML();
<a name="l7600"><span class="linenum">7600</span></a>                  var last = this._undoCache[this._undoLevel];
<a name="l7601"><span class="linenum">7601</span></a>                  if (last) {
<a name="l7602"><span class="linenum">7602</span></a>                      if (str !== last) {
<a name="l7603"><span class="linenum">7603</span></a>                          this._undoCache = [];
<a name="l7604"><span class="linenum">7604</span></a>                          this._undoLevel = 0;
<a name="l7605"><span class="linenum">7605</span></a>                      }
<a name="l7606"><span class="linenum">7606</span></a>                  }
<a name="l7607"><span class="linenum">7607</span></a>              }
<a name="l7608"><span class="linenum">7608</span></a>          },
<a name="l7609"><span class="linenum">7609</span></a>          <span class="comment">/**</span>
<a name="l7610"><span class="linenum">7610</span></a>  <span class="comment">        * @private</span>
<a name="l7611"><span class="linenum">7611</span></a>  <span class="comment">        * @method _getUndo</span>
<a name="l7612"><span class="linenum">7612</span></a>  <span class="comment">        * @description Get's a level from the undo cache.</span>
<a name="l7613"><span class="linenum">7613</span></a>  <span class="comment">        * @param {Number} index The index of the undo level we want to get.</span>
<a name="l7614"><span class="linenum">7614</span></a>  <span class="comment">        * @return {String}</span>
<a name="l7615"><span class="linenum">7615</span></a>  <span class="comment">        */</span>
<a name="l7616"><span class="linenum">7616</span></a>          _getUndo: function(index) {
<a name="l7617"><span class="linenum">7617</span></a>              this._undoLevel = index;
<a name="l7618"><span class="linenum">7618</span></a>              return this._undoCache[index];
<a name="l7619"><span class="linenum">7619</span></a>          },
<a name="l7620"><span class="linenum">7620</span></a>          <span class="comment">/**</span>
<a name="l7621"><span class="linenum">7621</span></a>  <span class="comment">        * @private</span>
<a name="l7622"><span class="linenum">7622</span></a>  <span class="comment">        * @method _storeUndo</span>
<a name="l7623"><span class="linenum">7623</span></a>  <span class="comment">        * @description Method to call when you want to store an undo state. Currently called from nodeChange and _handleKeyUp</span>
<a name="l7624"><span class="linenum">7624</span></a>  <span class="comment">        */</span>
<a name="l7625"><span class="linenum">7625</span></a>          _storeUndo: function() {
<a name="l7626"><span class="linenum">7626</span></a>              if (this._lastCommand === 'undo' || this._lastCommand === 'redo') {
<a name="l7627"><span class="linenum">7627</span></a>                  return false;
<a name="l7628"><span class="linenum">7628</span></a>              }
<a name="l7629"><span class="linenum">7629</span></a>              if (!this._undoCache) {
<a name="l7630"><span class="linenum">7630</span></a>                  this._undoCache = [];
<a name="l7631"><span class="linenum">7631</span></a>                  this._undoLevel = 0;
<a name="l7632"><span class="linenum">7632</span></a>              }
<a name="l7633"><span class="linenum">7633</span></a>              this._checkUndo();
<a name="l7634"><span class="linenum">7634</span></a>              var str = this.getEditorHTML();
<a name="l7635"><span class="linenum">7635</span></a>  <span class="comment">            //var last = this._undoCache[this._undoCache.length - 1];</span>
<a name="l7636"><span class="linenum">7636</span></a>              var last = this._undoCache[this._undoLevel - 1];
<a name="l7637"><span class="linenum">7637</span></a>              if (last) {
<a name="l7638"><span class="linenum">7638</span></a>                  if (str !== last) {
<a name="l7639"><span class="linenum">7639</span></a>  <span class="comment">                    //YAHOO.log('Storing Undo', 'info', 'SimpleEditor');</span>
<a name="l7640"><span class="linenum">7640</span></a>                      this._putUndo(str);
<a name="l7641"><span class="linenum">7641</span></a>                  }
<a name="l7642"><span class="linenum">7642</span></a>              } else {
<a name="l7643"><span class="linenum">7643</span></a>  <span class="comment">                //YAHOO.log('Storing Undo', 'info', 'SimpleEditor');</span>
<a name="l7644"><span class="linenum">7644</span></a>                  this._putUndo(str);
<a name="l7645"><span class="linenum">7645</span></a>              }
<a name="l7646"><span class="linenum">7646</span></a>              this._undoNodeChange();
<a name="l7647"><span class="linenum">7647</span></a>          },    
<a name="l7648"><span class="linenum">7648</span></a>          <span class="comment">/**</span>
<a name="l7649"><span class="linenum">7649</span></a>  <span class="comment">        * @property STR_BEFORE_EDITOR</span>
<a name="l7650"><span class="linenum">7650</span></a>  <span class="comment">        * @description The accessibility string for the element before the iFrame</span>
<a name="l7651"><span class="linenum">7651</span></a>  <span class="comment">        * @type String</span>
<a name="l7652"><span class="linenum">7652</span></a>  <span class="comment">        */</span>
<a name="l7653"><span class="linenum">7653</span></a>          STR_BEFORE_EDITOR: 'This text field can contain stylized text and graphics. To cycle through all formatting options, use the keyboard shortcut Control + Shift + T to place focus on the toolbar and navigate between option heading names. &lt;h4&gt;Common formatting keyboard shortcuts:&lt;/h4&gt;&lt;ul&gt;&lt;li&gt;Control Shift B sets text to bold&lt;/li&gt; &lt;li&gt;Control Shift I sets text to italic&lt;/li&gt; &lt;li&gt;Control Shift U underlines text&lt;/li&gt; &lt;li&gt;Control Shift [ aligns text left&lt;/li&gt; &lt;li&gt;Control Shift | centers text&lt;/li&gt; &lt;li&gt;Control Shift ] aligns text right&lt;/li&gt; &lt;li&gt;Control Shift L adds an HTML link&lt;/li&gt; &lt;li&gt;To exit this text editor use the keyboard shortcut Control + Shift + ESC.&lt;/li&gt;&lt;/ul&gt;',    
<a name="l7654"><span class="linenum">7654</span></a>          <span class="comment">/**</span>
<a name="l7655"><span class="linenum">7655</span></a>  <span class="comment">        * @property STR_CLOSE_WINDOW</span>
<a name="l7656"><span class="linenum">7656</span></a>  <span class="comment">        * @description The Title of the close button in the Editor Window</span>
<a name="l7657"><span class="linenum">7657</span></a>  <span class="comment">        * @type String</span>
<a name="l7658"><span class="linenum">7658</span></a>  <span class="comment">        */</span>
<a name="l7659"><span class="linenum">7659</span></a>          STR_CLOSE_WINDOW: 'Close Window',
<a name="l7660"><span class="linenum">7660</span></a>          <span class="comment">/**</span>
<a name="l7661"><span class="linenum">7661</span></a>  <span class="comment">        * @property STR_CLOSE_WINDOW_NOTE</span>
<a name="l7662"><span class="linenum">7662</span></a>  <span class="comment">        * @description A note appearing in the Editor Window to tell the user that the Escape key will close the window</span>
<a name="l7663"><span class="linenum">7663</span></a>  <span class="comment">        * @type String</span>
<a name="l7664"><span class="linenum">7664</span></a>  <span class="comment">        */</span>
<a name="l7665"><span class="linenum">7665</span></a>          STR_CLOSE_WINDOW_NOTE: 'To close this window use the Control + Shift + W key',
<a name="l7666"><span class="linenum">7666</span></a>          <span class="comment">/**</span>
<a name="l7667"><span class="linenum">7667</span></a>  <span class="comment">        * @property STR_IMAGE_PROP_TITLE</span>
<a name="l7668"><span class="linenum">7668</span></a>  <span class="comment">        * @description The title for the Image Property Editor Window</span>
<a name="l7669"><span class="linenum">7669</span></a>  <span class="comment">        * @type String</span>
<a name="l7670"><span class="linenum">7670</span></a>  <span class="comment">        */</span>
<a name="l7671"><span class="linenum">7671</span></a>          STR_IMAGE_PROP_TITLE: 'Image Options',
<a name="l7672"><span class="linenum">7672</span></a>          <span class="comment">/**</span>
<a name="l7673"><span class="linenum">7673</span></a>  <span class="comment">        * @property STR_IMAGE_TITLE</span>
<a name="l7674"><span class="linenum">7674</span></a>  <span class="comment">        * @description The label string for Image Description</span>
<a name="l7675"><span class="linenum">7675</span></a>  <span class="comment">        * @type String</span>
<a name="l7676"><span class="linenum">7676</span></a>  <span class="comment">        */</span>
<a name="l7677"><span class="linenum">7677</span></a>          STR_IMAGE_TITLE: 'Description',
<a name="l7678"><span class="linenum">7678</span></a>          <span class="comment">/**</span>
<a name="l7679"><span class="linenum">7679</span></a>  <span class="comment">        * @property STR_IMAGE_SIZE</span>
<a name="l7680"><span class="linenum">7680</span></a>  <span class="comment">        * @description The label string for Image Size</span>
<a name="l7681"><span class="linenum">7681</span></a>  <span class="comment">        * @type String</span>
<a name="l7682"><span class="linenum">7682</span></a>  <span class="comment">        */</span>
<a name="l7683"><span class="linenum">7683</span></a>          STR_IMAGE_SIZE: 'Size',
<a name="l7684"><span class="linenum">7684</span></a>          <span class="comment">/**</span>
<a name="l7685"><span class="linenum">7685</span></a>  <span class="comment">        * @property STR_IMAGE_ORIG_SIZE</span>
<a name="l7686"><span class="linenum">7686</span></a>  <span class="comment">        * @description The label string for Original Image Size</span>
<a name="l7687"><span class="linenum">7687</span></a>  <span class="comment">        * @type String</span>
<a name="l7688"><span class="linenum">7688</span></a>  <span class="comment">        */</span>
<a name="l7689"><span class="linenum">7689</span></a>          STR_IMAGE_ORIG_SIZE: 'Original Size',
<a name="l7690"><span class="linenum">7690</span></a>          <span class="comment">/**</span>
<a name="l7691"><span class="linenum">7691</span></a>  <span class="comment">        * @property STR_IMAGE_COPY</span>
<a name="l7692"><span class="linenum">7692</span></a>  <span class="comment">        * @description The label string for the image copy and paste message for Opera and Safari</span>
<a name="l7693"><span class="linenum">7693</span></a>  <span class="comment">        * @type String</span>
<a name="l7694"><span class="linenum">7694</span></a>  <span class="comment">        */</span>
<a name="l7695"><span class="linenum">7695</span></a>          STR_IMAGE_COPY: '&lt;span class=&quot;tip&quot;&gt;&lt;span class=&quot;icon icon-info&quot;&gt;&lt;/span&gt;&lt;strong&gt;Note:&lt;/strong&gt;To move this image just highlight it, cut, and paste where ever you\'d like.&lt;/span&gt;',
<a name="l7696"><span class="linenum">7696</span></a>          <span class="comment">/**</span>
<a name="l7697"><span class="linenum">7697</span></a>  <span class="comment">        * @property STR_IMAGE_PADDING</span>
<a name="l7698"><span class="linenum">7698</span></a>  <span class="comment">        * @description The label string for the image padding.</span>
<a name="l7699"><span class="linenum">7699</span></a>  <span class="comment">        * @type String</span>
<a name="l7700"><span class="linenum">7700</span></a>  <span class="comment">        */</span>
<a name="l7701"><span class="linenum">7701</span></a>          STR_IMAGE_PADDING: 'Padding',
<a name="l7702"><span class="linenum">7702</span></a>          <span class="comment">/**</span>
<a name="l7703"><span class="linenum">7703</span></a>  <span class="comment">        * @property STR_IMAGE_BORDER</span>
<a name="l7704"><span class="linenum">7704</span></a>  <span class="comment">        * @description The label string for the image border.</span>
<a name="l7705"><span class="linenum">7705</span></a>  <span class="comment">        * @type String</span>
<a name="l7706"><span class="linenum">7706</span></a>  <span class="comment">        */</span>
<a name="l7707"><span class="linenum">7707</span></a>          STR_IMAGE_BORDER: 'Border',
<a name="l7708"><span class="linenum">7708</span></a>          <span class="comment">/**</span>
<a name="l7709"><span class="linenum">7709</span></a>  <span class="comment">        * @property STR_IMAGE_BORDER_SIZE</span>
<a name="l7710"><span class="linenum">7710</span></a>  <span class="comment">        * @description The label string for the image border size.</span>
<a name="l7711"><span class="linenum">7711</span></a>  <span class="comment">        * @type String</span>
<a name="l7712"><span class="linenum">7712</span></a>  <span class="comment">        */</span>
<a name="l7713"><span class="linenum">7713</span></a>          STR_IMAGE_BORDER_SIZE: 'Border Size',
<a name="l7714"><span class="linenum">7714</span></a>          <span class="comment">/**</span>
<a name="l7715"><span class="linenum">7715</span></a>  <span class="comment">        * @property STR_IMAGE_BORDER_TYPE</span>
<a name="l7716"><span class="linenum">7716</span></a>  <span class="comment">        * @description The label string for the image border type.</span>
<a name="l7717"><span class="linenum">7717</span></a>  <span class="comment">        * @type String</span>
<a name="l7718"><span class="linenum">7718</span></a>  <span class="comment">        */</span>
<a name="l7719"><span class="linenum">7719</span></a>          STR_IMAGE_BORDER_TYPE: 'Border Type',
<a name="l7720"><span class="linenum">7720</span></a>          <span class="comment">/**</span>
<a name="l7721"><span class="linenum">7721</span></a>  <span class="comment">        * @property STR_IMAGE_TEXTFLOW</span>
<a name="l7722"><span class="linenum">7722</span></a>  <span class="comment">        * @description The label string for the image text flow.</span>
<a name="l7723"><span class="linenum">7723</span></a>  <span class="comment">        * @type String</span>
<a name="l7724"><span class="linenum">7724</span></a>  <span class="comment">        */</span>
<a name="l7725"><span class="linenum">7725</span></a>          STR_IMAGE_TEXTFLOW: 'Text Flow',
<a name="l7726"><span class="linenum">7726</span></a>          <span class="comment">/**</span>
<a name="l7727"><span class="linenum">7727</span></a>  <span class="comment">        * @property STR_LOCAL_FILE_WARNING</span>
<a name="l7728"><span class="linenum">7728</span></a>  <span class="comment">        * @description The label string for the local file warning.</span>
<a name="l7729"><span class="linenum">7729</span></a>  <span class="comment">        * @type String</span>
<a name="l7730"><span class="linenum">7730</span></a>  <span class="comment">        */</span>
<a name="l7731"><span class="linenum">7731</span></a>          STR_LOCAL_FILE_WARNING: '&lt;span class=&quot;tip&quot;&gt;&lt;span class=&quot;icon icon-warn&quot;&gt;&lt;/span&gt;&lt;strong&gt;Note:&lt;/strong&gt;This image/link points to a file on your computer and will not be accessible to others on the internet.&lt;/span&gt;',
<a name="l7732"><span class="linenum">7732</span></a>          <span class="comment">/**</span>
<a name="l7733"><span class="linenum">7733</span></a>  <span class="comment">        * @property STR_LINK_PROP_TITLE</span>
<a name="l7734"><span class="linenum">7734</span></a>  <span class="comment">        * @description The label string for the Link Property Editor Window.</span>
<a name="l7735"><span class="linenum">7735</span></a>  <span class="comment">        * @type String</span>
<a name="l7736"><span class="linenum">7736</span></a>  <span class="comment">        */</span>
<a name="l7737"><span class="linenum">7737</span></a>          STR_LINK_PROP_TITLE: 'Link Options',
<a name="l7738"><span class="linenum">7738</span></a>          <span class="comment">/**</span>
<a name="l7739"><span class="linenum">7739</span></a>  <span class="comment">        * @property STR_LINK_PROP_REMOVE</span>
<a name="l7740"><span class="linenum">7740</span></a>  <span class="comment">        * @description The label string for the Remove link from text link inside the property editor.</span>
<a name="l7741"><span class="linenum">7741</span></a>  <span class="comment">        * @type String</span>
<a name="l7742"><span class="linenum">7742</span></a>  <span class="comment">        */</span>
<a name="l7743"><span class="linenum">7743</span></a>          STR_LINK_PROP_REMOVE: 'Remove link from text',
<a name="l7744"><span class="linenum">7744</span></a>          <span class="comment">/**</span>
<a name="l7745"><span class="linenum">7745</span></a>  <span class="comment">        * @property STR_LINK_NEW_WINDOW</span>
<a name="l7746"><span class="linenum">7746</span></a>  <span class="comment">        * @description The string for the open in a new window label.</span>
<a name="l7747"><span class="linenum">7747</span></a>  <span class="comment">        * @type String</span>
<a name="l7748"><span class="linenum">7748</span></a>  <span class="comment">        */</span>
<a name="l7749"><span class="linenum">7749</span></a>          STR_LINK_NEW_WINDOW: 'Open in a new window.',
<a name="l7750"><span class="linenum">7750</span></a>          <span class="comment">/**</span>
<a name="l7751"><span class="linenum">7751</span></a>  <span class="comment">        * @property STR_LINK_TITLE</span>
<a name="l7752"><span class="linenum">7752</span></a>  <span class="comment">        * @description The string for the link description.</span>
<a name="l7753"><span class="linenum">7753</span></a>  <span class="comment">        * @type String</span>
<a name="l7754"><span class="linenum">7754</span></a>  <span class="comment">        */</span>
<a name="l7755"><span class="linenum">7755</span></a>          STR_LINK_TITLE: 'Description',
<a name="l7756"><span class="linenum">7756</span></a>          <span class="comment">/**</span>
<a name="l7757"><span class="linenum">7757</span></a>  <span class="comment">        * @property STR_NONE</span>
<a name="l7758"><span class="linenum">7758</span></a>  <span class="comment">        * @description The string for the word none.</span>
<a name="l7759"><span class="linenum">7759</span></a>  <span class="comment">        * @type String</span>
<a name="l7760"><span class="linenum">7760</span></a>  <span class="comment">        */</span>
<a name="l7761"><span class="linenum">7761</span></a>          STR_NONE: 'none',
<a name="l7762"><span class="linenum">7762</span></a>          <span class="comment">/**</span>
<a name="l7763"><span class="linenum">7763</span></a>  <span class="comment">        * @protected</span>
<a name="l7764"><span class="linenum">7764</span></a>  <span class="comment">        * @property CLASS_LOCAL_FILE</span>
<a name="l7765"><span class="linenum">7765</span></a>  <span class="comment">        * @description CSS class applied to an element when it's found to have a local url.</span>
<a name="l7766"><span class="linenum">7766</span></a>  <span class="comment">        * @type String</span>
<a name="l7767"><span class="linenum">7767</span></a>  <span class="comment">        */</span>
<a name="l7768"><span class="linenum">7768</span></a>          CLASS_LOCAL_FILE: 'warning-localfile',
<a name="l7769"><span class="linenum">7769</span></a>          <span class="comment">/**</span>
<a name="l7770"><span class="linenum">7770</span></a>  <span class="comment">        * @protected</span>
<a name="l7771"><span class="linenum">7771</span></a>  <span class="comment">        * @property CLASS_HIDDEN</span>
<a name="l7772"><span class="linenum">7772</span></a>  <span class="comment">        * @description CSS class applied to the body when the hiddenelements button is pressed.</span>
<a name="l7773"><span class="linenum">7773</span></a>  <span class="comment">        * @type String</span>
<a name="l7774"><span class="linenum">7774</span></a>  <span class="comment">        */</span>
<a name="l7775"><span class="linenum">7775</span></a>          CLASS_HIDDEN: 'yui-hidden',
<a name="l7776"><span class="linenum">7776</span></a>          <span class="comment">/** </span>
<a name="l7777"><span class="linenum">7777</span></a>  <span class="comment">        * @method init</span>
<a name="l7778"><span class="linenum">7778</span></a>  <span class="comment">        * @description The Editor class' initialization method</span>
<a name="l7779"><span class="linenum">7779</span></a>  <span class="comment">        */</span>
<a name="l7780"><span class="linenum">7780</span></a>          init: function(p_oElement, p_oAttributes) {
<a name="l7781"><span class="linenum">7781</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('init', 'info', 'Editor');
<a name="l7782"><span class="linenum">7782</span></a>              
<a name="l7783"><span class="linenum">7783</span></a>              this._windows = {};
<a name="l7784"><span class="linenum">7784</span></a>              if (!this._defaultToolbar) {            
<a name="l7785"><span class="linenum">7785</span></a>                  this._defaultToolbar = {
<a name="l7786"><span class="linenum">7786</span></a>                      collapse: true,
<a name="l7787"><span class="linenum">7787</span></a>                      titlebar: 'Text Editing Tools',
<a name="l7788"><span class="linenum">7788</span></a>                      draggable: false,
<a name="l7789"><span class="linenum">7789</span></a>                      buttonType: 'advanced',
<a name="l7790"><span class="linenum">7790</span></a>                      buttons: [
<a name="l7791"><span class="linenum">7791</span></a>                          { group: 'fontstyle', label: 'Font Name and Size',
<a name="l7792"><span class="linenum">7792</span></a>                              buttons: [
<a name="l7793"><span class="linenum">7793</span></a>                                  { type: 'select', label: 'Arial', value: 'fontname', disabled: true,
<a name="l7794"><span class="linenum">7794</span></a>                                      menu: [
<a name="l7795"><span class="linenum">7795</span></a>                                          { text: 'Arial', checked: true },
<a name="l7796"><span class="linenum">7796</span></a>                                          { text: 'Arial Black' },
<a name="l7797"><span class="linenum">7797</span></a>                                          { text: 'Comic Sans MS' },
<a name="l7798"><span class="linenum">7798</span></a>                                          { text: 'Courier New' },
<a name="l7799"><span class="linenum">7799</span></a>                                          { text: 'Lucida Console' },
<a name="l7800"><span class="linenum">7800</span></a>                                          { text: 'Tahoma' },
<a name="l7801"><span class="linenum">7801</span></a>                                          { text: 'Times New Roman' },
<a name="l7802"><span class="linenum">7802</span></a>                                          { text: 'Trebuchet MS' },
<a name="l7803"><span class="linenum">7803</span></a>                                          { text: 'Verdana' }
<a name="l7804"><span class="linenum">7804</span></a>                                      ]
<a name="l7805"><span class="linenum">7805</span></a>                                  },
<a name="l7806"><span class="linenum">7806</span></a>                                  { type: 'spin', label: '13', value: 'fontsize', range: [ 9, 75 ], disabled: true }
<a name="l7807"><span class="linenum">7807</span></a>                              ]
<a name="l7808"><span class="linenum">7808</span></a>                          },
<a name="l7809"><span class="linenum">7809</span></a>                          { type: 'separator' },
<a name="l7810"><span class="linenum">7810</span></a>                          { group: 'textstyle', label: 'Font Style',
<a name="l7811"><span class="linenum">7811</span></a>                              buttons: [
<a name="l7812"><span class="linenum">7812</span></a>                                  { type: 'push', label: 'Bold CTRL + SHIFT + B', value: 'bold' },
<a name="l7813"><span class="linenum">7813</span></a>                                  { type: 'push', label: 'Italic CTRL + SHIFT + I', value: 'italic' },
<a name="l7814"><span class="linenum">7814</span></a>                                  { type: 'push', label: 'Underline CTRL + SHIFT + U', value: 'underline' },
<a name="l7815"><span class="linenum">7815</span></a>                                  { type: 'separator' },
<a name="l7816"><span class="linenum">7816</span></a>                                  { type: 'push', label: 'Subscript', value: 'subscript', disabled: true },
<a name="l7817"><span class="linenum">7817</span></a>                                  { type: 'push', label: 'Superscript', value: 'superscript', disabled: true }
<a name="l7818"><span class="linenum">7818</span></a>                              ]
<a name="l7819"><span class="linenum">7819</span></a>                          },
<a name="l7820"><span class="linenum">7820</span></a>                          { type: 'separator' },
<a name="l7821"><span class="linenum">7821</span></a>                          { group: 'textstyle2', label: '&amp;nbsp;',
<a name="l7822"><span class="linenum">7822</span></a>                              buttons: [
<a name="l7823"><span class="linenum">7823</span></a>                                  { type: 'color', label: 'Font Color', value: 'forecolor', disabled: true },
<a name="l7824"><span class="linenum">7824</span></a>                                  { type: 'color', label: 'Background Color', value: 'backcolor', disabled: true },
<a name="l7825"><span class="linenum">7825</span></a>                                  { type: 'separator' },
<a name="l7826"><span class="linenum">7826</span></a>                                  { type: 'push', label: 'Remove Formatting', value: 'removeformat', disabled: true },
<a name="l7827"><span class="linenum">7827</span></a>                                  { type: 'push', label: 'Show/Hide Hidden Elements', value: 'hiddenelements' }
<a name="l7828"><span class="linenum">7828</span></a>                              ]
<a name="l7829"><span class="linenum">7829</span></a>                          },
<a name="l7830"><span class="linenum">7830</span></a>                          { type: 'separator' },
<a name="l7831"><span class="linenum">7831</span></a>                          { group: 'undoredo', label: 'Undo/Redo',
<a name="l7832"><span class="linenum">7832</span></a>                              buttons: [
<a name="l7833"><span class="linenum">7833</span></a>                                  { type: 'push', label: 'Undo', value: 'undo', disabled: true },
<a name="l7834"><span class="linenum">7834</span></a>                                  { type: 'push', label: 'Redo', value: 'redo', disabled: true }
<a name="l7835"><span class="linenum">7835</span></a>                                  
<a name="l7836"><span class="linenum">7836</span></a>                              ]
<a name="l7837"><span class="linenum">7837</span></a>                          },
<a name="l7838"><span class="linenum">7838</span></a>                          { type: 'separator' },
<a name="l7839"><span class="linenum">7839</span></a>                          { group: 'alignment', label: 'Alignment',
<a name="l7840"><span class="linenum">7840</span></a>                              buttons: [
<a name="l7841"><span class="linenum">7841</span></a>                                  { type: 'push', label: 'Align Left CTRL + SHIFT + [', value: 'justifyleft' },
<a name="l7842"><span class="linenum">7842</span></a>                                  { type: 'push', label: 'Align Center CTRL + SHIFT + |', value: 'justifycenter' },
<a name="l7843"><span class="linenum">7843</span></a>                                  { type: 'push', label: 'Align Right CTRL + SHIFT + ]', value: 'justifyright' },
<a name="l7844"><span class="linenum">7844</span></a>                                  { type: 'push', label: 'Justify', value: 'justifyfull' }
<a name="l7845"><span class="linenum">7845</span></a>                              ]
<a name="l7846"><span class="linenum">7846</span></a>                          },
<a name="l7847"><span class="linenum">7847</span></a>                          { type: 'separator' },
<a name="l7848"><span class="linenum">7848</span></a>                          { group: 'parastyle', label: 'Paragraph Style',
<a name="l7849"><span class="linenum">7849</span></a>                              buttons: [
<a name="l7850"><span class="linenum">7850</span></a>                              { type: 'select', label: 'Normal', value: 'heading', disabled: true,
<a name="l7851"><span class="linenum">7851</span></a>                                  menu: [
<a name="l7852"><span class="linenum">7852</span></a>                                      { text: 'Normal', value: 'none', checked: true },
<a name="l7853"><span class="linenum">7853</span></a>                                      { text: 'Header 1', value: 'h1' },
<a name="l7854"><span class="linenum">7854</span></a>                                      { text: 'Header 2', value: 'h2' },
<a name="l7855"><span class="linenum">7855</span></a>                                      { text: 'Header 3', value: 'h3' },
<a name="l7856"><span class="linenum">7856</span></a>                                      { text: 'Header 4', value: 'h4' },
<a name="l7857"><span class="linenum">7857</span></a>                                      { text: 'Header 5', value: 'h5' },
<a name="l7858"><span class="linenum">7858</span></a>                                      { text: 'Header 6', value: 'h6' }
<a name="l7859"><span class="linenum">7859</span></a>                                  ]
<a name="l7860"><span class="linenum">7860</span></a>                              }
<a name="l7861"><span class="linenum">7861</span></a>                              ]
<a name="l7862"><span class="linenum">7862</span></a>                          },
<a name="l7863"><span class="linenum">7863</span></a>                          { type: 'separator' },
<a name="l7864"><span class="linenum">7864</span></a>                          
<a name="l7865"><span class="linenum">7865</span></a>                          { group: 'indentlist2', label: 'Indenting and Lists',
<a name="l7866"><span class="linenum">7866</span></a>                              buttons: [
<a name="l7867"><span class="linenum">7867</span></a>                                  { type: 'push', label: 'Indent', value: 'indent', disabled: true },
<a name="l7868"><span class="linenum">7868</span></a>                                  { type: 'push', label: 'Outdent', value: 'outdent', disabled: true },
<a name="l7869"><span class="linenum">7869</span></a>                                  { type: 'push', label: 'Create an Unordered List', value: 'insertunorderedlist' },
<a name="l7870"><span class="linenum">7870</span></a>                                  { type: 'push', label: 'Create an Ordered List', value: 'insertorderedlist' }
<a name="l7871"><span class="linenum">7871</span></a>                              ]
<a name="l7872"><span class="linenum">7872</span></a>                          },
<a name="l7873"><span class="linenum">7873</span></a>                          { type: 'separator' },
<a name="l7874"><span class="linenum">7874</span></a>                          { group: 'insertitem', label: 'Insert Item',
<a name="l7875"><span class="linenum">7875</span></a>                              buttons: [
<a name="l7876"><span class="linenum">7876</span></a>                                  { type: 'push', label: 'HTML Link CTRL + SHIFT + L', value: 'createlink', disabled: true },
<a name="l7877"><span class="linenum">7877</span></a>                                  { type: 'push', label: 'Insert Image', value: 'insertimage' }
<a name="l7878"><span class="linenum">7878</span></a>                              ]
<a name="l7879"><span class="linenum">7879</span></a>                          }
<a name="l7880"><span class="linenum">7880</span></a>                      ]
<a name="l7881"><span class="linenum">7881</span></a>                  };
<a name="l7882"><span class="linenum">7882</span></a>              }
<a name="l7883"><span class="linenum">7883</span></a>  
<a name="l7884"><span class="linenum">7884</span></a>              if (!this._defaultImageToolbarConfig) {
<a name="l7885"><span class="linenum">7885</span></a>                  this._defaultImageToolbarConfig = {
<a name="l7886"><span class="linenum">7886</span></a>                      buttonType: this._defaultToolbar.buttonType,
<a name="l7887"><span class="linenum">7887</span></a>                      buttons: [
<a name="l7888"><span class="linenum">7888</span></a>                          { group: 'textflow', label: this.STR_IMAGE_TEXTFLOW + ':',
<a name="l7889"><span class="linenum">7889</span></a>                              buttons: [
<a name="l7890"><span class="linenum">7890</span></a>                                  { type: 'push', label: 'Left', value: 'left' },
<a name="l7891"><span class="linenum">7891</span></a>                                  { type: 'push', label: 'Inline', value: 'inline' },
<a name="l7892"><span class="linenum">7892</span></a>                                  { type: 'push', label: 'Block', value: 'block' },
<a name="l7893"><span class="linenum">7893</span></a>                                  { type: 'push', label: 'Right', value: 'right' }
<a name="l7894"><span class="linenum">7894</span></a>                              ]
<a name="l7895"><span class="linenum">7895</span></a>                          },
<a name="l7896"><span class="linenum">7896</span></a>                          { type: 'separator' },
<a name="l7897"><span class="linenum">7897</span></a>                          { group: 'padding', label: this.STR_IMAGE_PADDING + ':',
<a name="l7898"><span class="linenum">7898</span></a>                              buttons: [
<a name="l7899"><span class="linenum">7899</span></a>                                  { type: 'spin', label: '0', value: 'padding', range: [0, 50] }
<a name="l7900"><span class="linenum">7900</span></a>                              ]
<a name="l7901"><span class="linenum">7901</span></a>                          },
<a name="l7902"><span class="linenum">7902</span></a>                          { type: 'separator' },
<a name="l7903"><span class="linenum">7903</span></a>                          { group: 'border', label: this.STR_IMAGE_BORDER + ':',
<a name="l7904"><span class="linenum">7904</span></a>                              buttons: [
<a name="l7905"><span class="linenum">7905</span></a>                                  { type: 'select', label: this.STR_IMAGE_BORDER_SIZE, value: 'bordersize',
<a name="l7906"><span class="linenum">7906</span></a>                                      menu: [
<a name="l7907"><span class="linenum">7907</span></a>                                          { text: 'none', value: '0', checked: true },
<a name="l7908"><span class="linenum">7908</span></a>                                          { text: '1px', value: '1' },
<a name="l7909"><span class="linenum">7909</span></a>                                          { text: '2px', value: '2' },
<a name="l7910"><span class="linenum">7910</span></a>                                          { text: '3px', value: '3' },
<a name="l7911"><span class="linenum">7911</span></a>                                          { text: '4px', value: '4' },
<a name="l7912"><span class="linenum">7912</span></a>                                          { text: '5px', value: '5' }
<a name="l7913"><span class="linenum">7913</span></a>                                      ]
<a name="l7914"><span class="linenum">7914</span></a>                                  },
<a name="l7915"><span class="linenum">7915</span></a>                                  { type: 'select', label: this.STR_IMAGE_BORDER_TYPE, value: 'bordertype', disabled: true,
<a name="l7916"><span class="linenum">7916</span></a>                                      menu: [
<a name="l7917"><span class="linenum">7917</span></a>                                          { text: 'Solid', value: 'solid', checked: true },
<a name="l7918"><span class="linenum">7918</span></a>                                          { text: 'Dashed', value: 'dashed' },
<a name="l7919"><span class="linenum">7919</span></a>                                          { text: 'Dotted', value: 'dotted' }
<a name="l7920"><span class="linenum">7920</span></a>                                      ]
<a name="l7921"><span class="linenum">7921</span></a>                                  },
<a name="l7922"><span class="linenum">7922</span></a>                                  { type: 'color', label: 'Border Color', value: 'bordercolor', disabled: true }
<a name="l7923"><span class="linenum">7923</span></a>                              ]
<a name="l7924"><span class="linenum">7924</span></a>                          }
<a name="l7925"><span class="linenum">7925</span></a>                      ]
<a name="l7926"><span class="linenum">7926</span></a>                  };
<a name="l7927"><span class="linenum">7927</span></a>              }
<a name="l7928"><span class="linenum">7928</span></a>  
<a name="l7929"><span class="linenum">7929</span></a>              YAHOO.widget.Editor.superclass.init.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, p_oElement, p_oAttributes);
<a name="l7930"><span class="linenum">7930</span></a>          },
<a name="l7931"><span class="linenum">7931</span></a>          _render: function() {
<a name="l7932"><span class="linenum">7932</span></a>              YAHOO.widget.Editor.superclass._render.<a class="function" onClick="logFunction('apply')" href="../../../../../../_functions/apply.html" onMouseOver="funcPopup(event,'apply')">apply</a>(this, arguments);
<a name="l7933"><span class="linenum">7933</span></a>              var self = this;
<a name="l7934"><span class="linenum">7934</span></a>  <span class="comment">            //Render the panel in another thread and delay it a little..</span>
<a name="l7935"><span class="linenum">7935</span></a>              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l7936"><span class="linenum">7936</span></a>                  self._renderPanel.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self);
<a name="l7937"><span class="linenum">7937</span></a>              }, 800);
<a name="l7938"><span class="linenum">7938</span></a>          },
<a name="l7939"><span class="linenum">7939</span></a>          <span class="comment">/**</span>
<a name="l7940"><span class="linenum">7940</span></a>  <span class="comment">        * @method initAttributes</span>
<a name="l7941"><span class="linenum">7941</span></a>  <span class="comment">        * @description Initializes all of the configuration attributes used to create </span>
<a name="l7942"><span class="linenum">7942</span></a>  <span class="comment">        * the editor.</span>
<a name="l7943"><span class="linenum">7943</span></a>  <span class="comment">        * @param {Object} attr Object literal specifying a set of </span>
<a name="l7944"><span class="linenum">7944</span></a>  <span class="comment">        * configuration attributes used to create the editor.</span>
<a name="l7945"><span class="linenum">7945</span></a>  <span class="comment">        */</span>
<a name="l7946"><span class="linenum">7946</span></a>          initAttributes: function(attr) {
<a name="l7947"><span class="linenum">7947</span></a>              YAHOO.widget.Editor.superclass.initAttributes.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, attr);
<a name="l7948"><span class="linenum">7948</span></a>  
<a name="l7949"><span class="linenum">7949</span></a>              <span class="comment">/**</span>
<a name="l7950"><span class="linenum">7950</span></a>  <span class="comment">            * @attribute localFileWarning</span>
<a name="l7951"><span class="linenum">7951</span></a>  <span class="comment">            * @description Should we throw the warning if we detect a file that is local to their machine?</span>
<a name="l7952"><span class="linenum">7952</span></a>  <span class="comment">            * @default true</span>
<a name="l7953"><span class="linenum">7953</span></a>  <span class="comment">            * @type Boolean</span>
<a name="l7954"><span class="linenum">7954</span></a>  <span class="comment">            */</span>            
<a name="l7955"><span class="linenum">7955</span></a>              this.setAttributeConfig('localFileWarning', {
<a name="l7956"><span class="linenum">7956</span></a>                  value: attr.locaFileWarning || true
<a name="l7957"><span class="linenum">7957</span></a>              });
<a name="l7958"><span class="linenum">7958</span></a>  
<a name="l7959"><span class="linenum">7959</span></a>              <span class="comment">/**</span>
<a name="l7960"><span class="linenum">7960</span></a>  <span class="comment">            * @attribute hiddencss</span>
<a name="l7961"><span class="linenum">7961</span></a>  <span class="comment">            * @description The CSS used to show/hide hidden elements on the page, these rules must be prefixed with the class provided in &lt;code&gt;this.CLASS_HIDDEN&lt;/code&gt;</span>
<a name="l7962"><span class="linenum">7962</span></a>  <span class="comment">            * @default &lt;code&gt;&lt;pre&gt;</span>
<a name="l7963"><span class="linenum">7963</span></a>  <span class="comment">            .yui-hidden font, .yui-hidden strong, .yui-hidden b, .yui-hidden em, .yui-hidden i, .yui-hidden u,</span>
<a name="l7964"><span class="linenum">7964</span></a>  <span class="comment">            .yui-hidden div, .yui-hidden p, .yui-hidden span, .yui-hidden img, .yui-hidden ul, .yui-hidden ol,</span>
<a name="l7965"><span class="linenum">7965</span></a>  <span class="comment">            .yui-hidden li, .yui-hidden table {</span>
<a name="l7966"><span class="linenum">7966</span></a>  <span class="comment">                border: 1px dotted #ccc;</span>
<a name="l7967"><span class="linenum">7967</span></a>  <span class="comment">            }</span>
<a name="l7968"><span class="linenum">7968</span></a>  <span class="comment">            .yui-hidden .yui-non {</span>
<a name="l7969"><span class="linenum">7969</span></a>  <span class="comment">                border: none;</span>
<a name="l7970"><span class="linenum">7970</span></a>  <span class="comment">            }</span>
<a name="l7971"><span class="linenum">7971</span></a>  <span class="comment">            .yui-hidden img {</span>
<a name="l7972"><span class="linenum">7972</span></a>  <span class="comment">                padding: 2px;</span>
<a name="l7973"><span class="linenum">7973</span></a>  <span class="comment">            }&lt;/pre&gt;&lt;/code&gt;</span>
<a name="l7974"><span class="linenum">7974</span></a>  <span class="comment">            * @type String</span>
<a name="l7975"><span class="linenum">7975</span></a>  <span class="comment">            */</span>            
<a name="l7976"><span class="linenum">7976</span></a>              this.setAttributeConfig('hiddencss', {
<a name="l7977"><span class="linenum">7977</span></a>                  value: attr.hiddencss || '.yui-hidden font, .yui-hidden strong, .yui-hidden b, .yui-hidden em, .yui-hidden i, .yui-hidden u, .yui-hidden div,.yui-hidden p,.yui-hidden span,.yui-hidden img, .yui-hidden ul, .yui-hidden ol, .yui-hidden li, .yui-hidden table { border: 1px dotted #ccc; } .yui-hidden .yui-non { border: none; } .yui-hidden img { padding: 2px; }',
<a name="l7978"><span class="linenum">7978</span></a>                  writeOnce: true
<a name="l7979"><span class="linenum">7979</span></a>              });
<a name="l7980"><span class="linenum">7980</span></a>             
<a name="l7981"><span class="linenum">7981</span></a>          },
<a name="l7982"><span class="linenum">7982</span></a>          <span class="comment">/**</span>
<a name="l7983"><span class="linenum">7983</span></a>  <span class="comment">        * @private</span>
<a name="l7984"><span class="linenum">7984</span></a>  <span class="comment">        * @method _windows</span>
<a name="l7985"><span class="linenum">7985</span></a>  <span class="comment">        * @description A reference to the HTML elements used for the body of Editor Windows.</span>
<a name="l7986"><span class="linenum">7986</span></a>  <span class="comment">        */</span>
<a name="l7987"><span class="linenum">7987</span></a>          _windows: null,
<a name="l7988"><span class="linenum">7988</span></a>          <span class="comment">/**</span>
<a name="l7989"><span class="linenum">7989</span></a>  <span class="comment">        * @private</span>
<a name="l7990"><span class="linenum">7990</span></a>  <span class="comment">        * @method _defaultImageToolbar</span>
<a name="l7991"><span class="linenum">7991</span></a>  <span class="comment">        * @description A reference to the Toolbar Object inside Image Editor Window.</span>
<a name="l7992"><span class="linenum">7992</span></a>  <span class="comment">        */</span>
<a name="l7993"><span class="linenum">7993</span></a>          _defaultImageToolbar: null,
<a name="l7994"><span class="linenum">7994</span></a>          <span class="comment">/**</span>
<a name="l7995"><span class="linenum">7995</span></a>  <span class="comment">        * @private</span>
<a name="l7996"><span class="linenum">7996</span></a>  <span class="comment">        * @method _defaultImageToolbarConfig</span>
<a name="l7997"><span class="linenum">7997</span></a>  <span class="comment">        * @description Config to be used for the default Image Editor Window.</span>
<a name="l7998"><span class="linenum">7998</span></a>  <span class="comment">        */</span>
<a name="l7999"><span class="linenum">7999</span></a>          _defaultImageToolbarConfig: null,
<a name="l8000"><span class="linenum">8000</span></a>          <span class="comment">/**</span>
<a name="l8001"><span class="linenum">8001</span></a>  <span class="comment">        * @private</span>
<a name="l8002"><span class="linenum">8002</span></a>  <span class="comment">        * @method _fixNodes</span>
<a name="l8003"><span class="linenum">8003</span></a>  <span class="comment">        * @description Fix href and imgs as well as remove invalid HTML.</span>
<a name="l8004"><span class="linenum">8004</span></a>  <span class="comment">        */</span>
<a name="l8005"><span class="linenum">8005</span></a>          _fixNodes: function() {
<a name="l8006"><span class="linenum">8006</span></a>              YAHOO.widget.Editor.superclass._fixNodes.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this);
<a name="l8007"><span class="linenum">8007</span></a>              try {
<a name="l8008"><span class="linenum">8008</span></a>                  var url = '';
<a name="l8009"><span class="linenum">8009</span></a>  
<a name="l8010"><span class="linenum">8010</span></a>                  var imgs = this._getDoc().getElementsByTagName('img');
<a name="l8011"><span class="linenum">8011</span></a>                  for (var im = 0; im &lt; imgs.length; im++) {
<a name="l8012"><span class="linenum">8012</span></a>                      if (imgs[im].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2)) {
<a name="l8013"><span class="linenum">8013</span></a>                          url = imgs[im].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src', 2);
<a name="l8014"><span class="linenum">8014</span></a>                          if (this._isLocalFile(url)) {
<a name="l8015"><span class="linenum">8015</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(imgs[im], this.CLASS_LOCAL_FILE);
<a name="l8016"><span class="linenum">8016</span></a>                          } else {
<a name="l8017"><span class="linenum">8017</span></a>                              Dom.removeClass(imgs[im], this.CLASS_LOCAL_FILE);
<a name="l8018"><span class="linenum">8018</span></a>                          }
<a name="l8019"><span class="linenum">8019</span></a>                      }
<a name="l8020"><span class="linenum">8020</span></a>                  }
<a name="l8021"><span class="linenum">8021</span></a>                  var fakeAs = this._getDoc().body.getElementsByTagName('a');
<a name="l8022"><span class="linenum">8022</span></a>                  for (var a = 0; a &lt; fakeAs.length; a++) {
<a name="l8023"><span class="linenum">8023</span></a>                      if (fakeAs[a].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2)) {
<a name="l8024"><span class="linenum">8024</span></a>                          url = fakeAs[a].<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2);
<a name="l8025"><span class="linenum">8025</span></a>                          if (this._isLocalFile(url)) {
<a name="l8026"><span class="linenum">8026</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(fakeAs[a], this.CLASS_LOCAL_FILE);
<a name="l8027"><span class="linenum">8027</span></a>                          } else {
<a name="l8028"><span class="linenum">8028</span></a>                              Dom.removeClass(fakeAs[a], this.CLASS_LOCAL_FILE);
<a name="l8029"><span class="linenum">8029</span></a>                          }
<a name="l8030"><span class="linenum">8030</span></a>                      }
<a name="l8031"><span class="linenum">8031</span></a>                  }
<a name="l8032"><span class="linenum">8032</span></a>              } catch(e) {}
<a name="l8033"><span class="linenum">8033</span></a>          },
<a name="l8034"><span class="linenum">8034</span></a>          <span class="comment">/**</span>
<a name="l8035"><span class="linenum">8035</span></a>  <span class="comment">        * @private</span>
<a name="l8036"><span class="linenum">8036</span></a>  <span class="comment">        * @property _disabled</span>
<a name="l8037"><span class="linenum">8037</span></a>  <span class="comment">        * @description The Toolbar items that should be disabled if there is no selection present in the editor.</span>
<a name="l8038"><span class="linenum">8038</span></a>  <span class="comment">        * @type Array</span>
<a name="l8039"><span class="linenum">8039</span></a>  <span class="comment">        */</span>
<a name="l8040"><span class="linenum">8040</span></a>          _disabled: [ 'createlink', 'forecolor', 'backcolor', 'fontname', 'fontsize', 'superscript', 'subscript', 'removeformat', 'heading', 'indent' ],
<a name="l8041"><span class="linenum">8041</span></a>          <span class="comment">/**</span>
<a name="l8042"><span class="linenum">8042</span></a>  <span class="comment">        * @private</span>
<a name="l8043"><span class="linenum">8043</span></a>  <span class="comment">        * @property _alwaysDisabled</span>
<a name="l8044"><span class="linenum">8044</span></a>  <span class="comment">        * @description The Toolbar items that should ALWAYS be disabled event if there is a selection present in the editor.</span>
<a name="l8045"><span class="linenum">8045</span></a>  <span class="comment">        * @type Object</span>
<a name="l8046"><span class="linenum">8046</span></a>  <span class="comment">        */</span>
<a name="l8047"><span class="linenum">8047</span></a>          _alwaysDisabled: { 'outdent': true },
<a name="l8048"><span class="linenum">8048</span></a>          <span class="comment">/**</span>
<a name="l8049"><span class="linenum">8049</span></a>  <span class="comment">        * @private</span>
<a name="l8050"><span class="linenum">8050</span></a>  <span class="comment">        * @property _alwaysEnabled</span>
<a name="l8051"><span class="linenum">8051</span></a>  <span class="comment">        * @description The Toolbar items that should ALWAYS be enabled event if there isn't a selection present in the editor.</span>
<a name="l8052"><span class="linenum">8052</span></a>  <span class="comment">        * @type Object</span>
<a name="l8053"><span class="linenum">8053</span></a>  <span class="comment">        */</span>
<a name="l8054"><span class="linenum">8054</span></a>          _alwaysEnabled: { hiddenelements: true },
<a name="l8055"><span class="linenum">8055</span></a>          <span class="comment">/**</span>
<a name="l8056"><span class="linenum">8056</span></a>  <span class="comment">        * @private</span>
<a name="l8057"><span class="linenum">8057</span></a>  <span class="comment">        * @method _handleKeyDown</span>
<a name="l8058"><span class="linenum">8058</span></a>  <span class="comment">        * @param {Event} ev The event we are working on.</span>
<a name="l8059"><span class="linenum">8059</span></a>  <span class="comment">        * @description Override method that handles some new keydown events inside the iFrame document.</span>
<a name="l8060"><span class="linenum">8060</span></a>  <span class="comment">        */</span>
<a name="l8061"><span class="linenum">8061</span></a>          _handleKeyDown: function(ev) {
<a name="l8062"><span class="linenum">8062</span></a>              YAHOO.widget.Editor.superclass._handleKeyDown.<a class="function" onClick="logFunction('call')" href="../../../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, ev);
<a name="l8063"><span class="linenum">8063</span></a>              var doExec = false,
<a name="l8064"><span class="linenum">8064</span></a>                  action = null,
<a name="l8065"><span class="linenum">8065</span></a>                  exec = false;
<a name="l8066"><span class="linenum">8066</span></a>  
<a name="l8067"><span class="linenum">8067</span></a>              switch (ev.keyCode) {
<a name="l8068"><span class="linenum">8068</span></a>  <span class="comment">                //case 219: //Left</span>
<a name="l8069"><span class="linenum">8069</span></a>                  case this._keyMap.JUSTIFY_LEFT.key: //Left
<a name="l8070"><span class="linenum">8070</span></a>                      if (this._checkKey(this._keyMap.JUSTIFY_LEFT, ev)) {
<a name="l8071"><span class="linenum">8071</span></a>                          action = 'justifyleft';
<a name="l8072"><span class="linenum">8072</span></a>                          doExec = true;
<a name="l8073"><span class="linenum">8073</span></a>                      }
<a name="l8074"><span class="linenum">8074</span></a>                      break;
<a name="l8075"><span class="linenum">8075</span></a>  <span class="comment">                //case 220: //Center</span>
<a name="l8076"><span class="linenum">8076</span></a>                  case this._keyMap.JUSTIFY_CENTER.key:
<a name="l8077"><span class="linenum">8077</span></a>                      if (this._checkKey(this._keyMap.JUSTIFY_CENTER, ev)) {
<a name="l8078"><span class="linenum">8078</span></a>                          action = 'justifycenter';
<a name="l8079"><span class="linenum">8079</span></a>                          doExec = true;
<a name="l8080"><span class="linenum">8080</span></a>                      }
<a name="l8081"><span class="linenum">8081</span></a>                      break;
<a name="l8082"><span class="linenum">8082</span></a>                  case 221: //Right
<a name="l8083"><span class="linenum">8083</span></a>                  case this._keyMap.JUSTIFY_RIGHT.key:
<a name="l8084"><span class="linenum">8084</span></a>                      if (this._checkKey(this._keyMap.JUSTIFY_RIGHT, ev)) {
<a name="l8085"><span class="linenum">8085</span></a>                          action = 'justifyright';
<a name="l8086"><span class="linenum">8086</span></a>                          doExec = true;
<a name="l8087"><span class="linenum">8087</span></a>                      }
<a name="l8088"><span class="linenum">8088</span></a>                      break;
<a name="l8089"><span class="linenum">8089</span></a>              }
<a name="l8090"><span class="linenum">8090</span></a>              if (doExec &amp;&amp; action) {
<a name="l8091"><span class="linenum">8091</span></a>                  this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>(action, null);
<a name="l8092"><span class="linenum">8092</span></a>                  Event.stopEvent(ev);
<a name="l8093"><span class="linenum">8093</span></a>                  this.nodeChange();
<a name="l8094"><span class="linenum">8094</span></a>              }
<a name="l8095"><span class="linenum">8095</span></a>          },        
<a name="l8096"><span class="linenum">8096</span></a>          <span class="comment">/**</span>
<a name="l8097"><span class="linenum">8097</span></a>  <span class="comment">        * @private</span>
<a name="l8098"><span class="linenum">8098</span></a>  <span class="comment">        * @method _renderCreateLinkWindow</span>
<a name="l8099"><span class="linenum">8099</span></a>  <span class="comment">        * @description Pre renders the CreateLink window so we get faster window opening.</span>
<a name="l8100"><span class="linenum">8100</span></a>  <span class="comment">        */</span>
<a name="l8101"><span class="linenum">8101</span></a>          _renderCreateLinkWindow: function() {
<a name="l8102"><span class="linenum">8102</span></a>                  var str = '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url&quot;&gt;&lt;strong&gt;' + this.STR_LINK_URL + ':&lt;/strong&gt; &lt;input type=&quot;text&quot; name=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url&quot; value=&quot;&quot;&gt;&lt;/label&gt;';
<a name="l8103"><span class="linenum">8103</span></a>                  str += '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_target&quot;&gt;&lt;strong&gt;&amp;nbsp;&lt;/strong&gt;&lt;input type=&quot;checkbox&quot; name=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_target&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_target&quot; value=&quot;_blank&quot; class=&quot;createlink_target&quot;&gt; ' + this.STR_LINK_NEW_WINDOW + '&lt;/label&gt;';
<a name="l8104"><span class="linenum">8104</span></a>                  str += '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_title&quot;&gt;&lt;strong&gt;' + this.STR_LINK_TITLE + ':&lt;/strong&gt; &lt;input type=&quot;text&quot; name=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_title&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_title&quot; value=&quot;&quot;&gt;&lt;/label&gt;';
<a name="l8105"><span class="linenum">8105</span></a>                  
<a name="l8106"><span class="linenum">8106</span></a>                  var body = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8107"><span class="linenum">8107</span></a>                  body.innerHTML = str;
<a name="l8108"><span class="linenum">8108</span></a>  
<a name="l8109"><span class="linenum">8109</span></a>                  var unlinkCont = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8110"><span class="linenum">8110</span></a>                  unlinkCont.className = 'removeLink';
<a name="l8111"><span class="linenum">8111</span></a>                  var unlink = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('a');
<a name="l8112"><span class="linenum">8112</span></a>                  unlink.href = '#';
<a name="l8113"><span class="linenum">8113</span></a>                  unlink.innerHTML = this.STR_LINK_PROP_REMOVE;
<a name="l8114"><span class="linenum">8114</span></a>                  unlink.title = this.STR_LINK_PROP_REMOVE;
<a name="l8115"><span class="linenum">8115</span></a>                  Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(unlink, 'click', function(ev) {
<a name="l8116"><span class="linenum">8116</span></a>                      Event.stopEvent(ev);
<a name="l8117"><span class="linenum">8117</span></a>                      this.unsubscribeAll('afterExecCommand');
<a name="l8118"><span class="linenum">8118</span></a>                      this.<a class="function" onClick="logFunction('execCommand')" href="../../../../../../_functions/execcommand.html" onMouseOver="funcPopup(event,'execcommand')">execCommand</a>('unlink');
<a name="l8119"><span class="linenum">8119</span></a>                      this.closeWindow();
<a name="l8120"><span class="linenum">8120</span></a>                  }, this, true);
<a name="l8121"><span class="linenum">8121</span></a>                  unlinkCont.appendChild(unlink);
<a name="l8122"><span class="linenum">8122</span></a>                  body.appendChild(unlinkCont);
<a name="l8123"><span class="linenum">8123</span></a>                  
<a name="l8124"><span class="linenum">8124</span></a>                  this._windows.createlink = {};
<a name="l8125"><span class="linenum">8125</span></a>                  this._windows.createlink.body = body;
<a name="l8126"><span class="linenum">8126</span></a>  <span class="comment">                //body.style.display = 'none';</span>
<a name="l8127"><span class="linenum">8127</span></a>                  Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(body, 'keyup', function(e) {
<a name="l8128"><span class="linenum">8128</span></a>                      Event.stopPropagation(e);
<a name="l8129"><span class="linenum">8129</span></a>                  });
<a name="l8130"><span class="linenum">8130</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').editor_form.appendChild(body);
<a name="l8131"><span class="linenum">8131</span></a>                  this.fireEvent('windowCreateLinkRender', { type: 'windowCreateLinkRender', panel: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel'), body: body });
<a name="l8132"><span class="linenum">8132</span></a>                  return body;
<a name="l8133"><span class="linenum">8133</span></a>          },
<a name="l8134"><span class="linenum">8134</span></a>          _handleCreateLinkClick: function() {
<a name="l8135"><span class="linenum">8135</span></a>              var el = this._getSelectedElement();
<a name="l8136"><span class="linenum">8136</span></a>              if (this._isElement(el, 'img')) {
<a name="l8137"><span class="linenum">8137</span></a>                  this.STOP_EXEC_COMMAND = true;
<a name="l8138"><span class="linenum">8138</span></a>                  this.currentElement[0] = el;
<a name="l8139"><span class="linenum">8139</span></a>                  this.toolbar.fireEvent('insertimageClick', { type: 'insertimageClick', target: this.toolbar });
<a name="l8140"><span class="linenum">8140</span></a>                  this.fireEvent('afterExecCommand', { type: 'afterExecCommand', target: this });
<a name="l8141"><span class="linenum">8141</span></a>                  return false;
<a name="l8142"><span class="linenum">8142</span></a>              }
<a name="l8143"><span class="linenum">8143</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('limitCommands')) {
<a name="l8144"><span class="linenum">8144</span></a>                  if (!this.toolbar.getButtonByValue('createlink')) {
<a name="l8145"><span class="linenum">8145</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Button for (createlink) was not found, skipping exec.', 'info', 'Editor');
<a name="l8146"><span class="linenum">8146</span></a>                      return false;
<a name="l8147"><span class="linenum">8147</span></a>                  }
<a name="l8148"><span class="linenum">8148</span></a>              }
<a name="l8149"><span class="linenum">8149</span></a>              
<a name="l8150"><span class="linenum">8150</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterExecCommand', function() {
<a name="l8151"><span class="linenum">8151</span></a>                  var win = new YAHOO.widget.EditorWindow('createlink', {
<a name="l8152"><span class="linenum">8152</span></a>                      width: '350px'
<a name="l8153"><span class="linenum">8153</span></a>                  });
<a name="l8154"><span class="linenum">8154</span></a>                  
<a name="l8155"><span class="linenum">8155</span></a>                  var el = this.currentElement[0],
<a name="l8156"><span class="linenum">8156</span></a>                      url = '',
<a name="l8157"><span class="linenum">8157</span></a>                      title = '',
<a name="l8158"><span class="linenum">8158</span></a>                      target = '',
<a name="l8159"><span class="linenum">8159</span></a>                      localFile = false;
<a name="l8160"><span class="linenum">8160</span></a>                  if (el) {
<a name="l8161"><span class="linenum">8161</span></a>                      win.el = el;
<a name="l8162"><span class="linenum">8162</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2) !== null) {
<a name="l8163"><span class="linenum">8163</span></a>                          url = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2);
<a name="l8164"><span class="linenum">8164</span></a>                          if (this._isLocalFile(url)) {
<a name="l8165"><span class="linenum">8165</span></a>  <span class="comment">                            //Local File throw Warning</span>
<a name="l8166"><span class="linenum">8166</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Local file reference found, show local warning', 'warn', 'Editor');
<a name="l8167"><span class="linenum">8167</span></a>                              win.<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_LOCAL_FILE_WARNING);
<a name="l8168"><span class="linenum">8168</span></a>                              localFile = true;
<a name="l8169"><span class="linenum">8169</span></a>                          } else {
<a name="l8170"><span class="linenum">8170</span></a>                              win.<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' ');
<a name="l8171"><span class="linenum">8171</span></a>                          }
<a name="l8172"><span class="linenum">8172</span></a>                      }
<a name="l8173"><span class="linenum">8173</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('title') !== null) {
<a name="l8174"><span class="linenum">8174</span></a>                          title = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('title');
<a name="l8175"><span class="linenum">8175</span></a>                      }
<a name="l8176"><span class="linenum">8176</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('target') !== null) {
<a name="l8177"><span class="linenum">8177</span></a>                          target = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('target');
<a name="l8178"><span class="linenum">8178</span></a>                      }
<a name="l8179"><span class="linenum">8179</span></a>                  }
<a name="l8180"><span class="linenum">8180</span></a>                  var body = null;
<a name="l8181"><span class="linenum">8181</span></a>                  if (this._windows.createlink &amp;&amp; this._windows.createlink.body) {
<a name="l8182"><span class="linenum">8182</span></a>                      body = this._windows.createlink.body;
<a name="l8183"><span class="linenum">8183</span></a>                  } else {
<a name="l8184"><span class="linenum">8184</span></a>                      body = this._renderCreateLinkWindow();
<a name="l8185"><span class="linenum">8185</span></a>                  }
<a name="l8186"><span class="linenum">8186</span></a>  
<a name="l8187"><span class="linenum">8187</span></a>                  win.<a class="function" onClick="logFunction('setHeader')" href="../../../../../../_functions/setheader.html" onMouseOver="funcPopup(event,'setheader')">setHeader</a>(this.STR_LINK_PROP_TITLE);
<a name="l8188"><span class="linenum">8188</span></a>                  win.<a class="function" onClick="logFunction('setBody')" href="../../../../../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>(body);
<a name="l8189"><span class="linenum">8189</span></a>  
<a name="l8190"><span class="linenum">8190</span></a>                  Event.purgeElement(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url');
<a name="l8191"><span class="linenum">8191</span></a>  
<a name="l8192"><span class="linenum">8192</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url').value = url;
<a name="l8193"><span class="linenum">8193</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_title').value = title;
<a name="l8194"><span class="linenum">8194</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_target').checked = ((target) ? true : false);
<a name="l8195"><span class="linenum">8195</span></a>                  
<a name="l8196"><span class="linenum">8196</span></a>  
<a name="l8197"><span class="linenum">8197</span></a>                  Event.onAvailable(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url', function() {
<a name="l8198"><span class="linenum">8198</span></a>                      var id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id');
<a name="l8199"><span class="linenum">8199</span></a>                      window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l8200"><span class="linenum">8200</span></a>                          try {
<a name="l8201"><span class="linenum">8201</span></a>                              YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_createlink_url').<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l8202"><span class="linenum">8202</span></a>                          } catch (e) {}
<a name="l8203"><span class="linenum">8203</span></a>                      }, 50);
<a name="l8204"><span class="linenum">8204</span></a>  
<a name="l8205"><span class="linenum">8205</span></a>                      if (this._isLocalFile(url)) {
<a name="l8206"><span class="linenum">8206</span></a>  <span class="comment">                        //Local File throw Warning</span>
<a name="l8207"><span class="linenum">8207</span></a>                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url', 'warning');
<a name="l8208"><span class="linenum">8208</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Local file reference found, show local warning', 'warn', 'Editor');
<a name="l8209"><span class="linenum">8209</span></a>                          this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_LOCAL_FILE_WARNING);
<a name="l8210"><span class="linenum">8210</span></a>                      } else {
<a name="l8211"><span class="linenum">8211</span></a>                          Dom.removeClass(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url', 'warning');
<a name="l8212"><span class="linenum">8212</span></a>                          this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' ');
<a name="l8213"><span class="linenum">8213</span></a>                      }
<a name="l8214"><span class="linenum">8214</span></a>                      Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url', 'blur', function() {
<a name="l8215"><span class="linenum">8215</span></a>                          var url = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url');
<a name="l8216"><span class="linenum">8216</span></a>                          if (this._isLocalFile(url.value)) {
<a name="l8217"><span class="linenum">8217</span></a>  <span class="comment">                            //Local File throw Warning</span>
<a name="l8218"><span class="linenum">8218</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(url, 'warning');
<a name="l8219"><span class="linenum">8219</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Local file reference found, show local warning', 'warn', 'Editor');
<a name="l8220"><span class="linenum">8220</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_LOCAL_FILE_WARNING);
<a name="l8221"><span class="linenum">8221</span></a>                          } else {
<a name="l8222"><span class="linenum">8222</span></a>                              Dom.removeClass(url, 'warning');
<a name="l8223"><span class="linenum">8223</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' ');
<a name="l8224"><span class="linenum">8224</span></a>                          }
<a name="l8225"><span class="linenum">8225</span></a>                      }, this, true);
<a name="l8226"><span class="linenum">8226</span></a>                  }, this, true);
<a name="l8227"><span class="linenum">8227</span></a>                  
<a name="l8228"><span class="linenum">8228</span></a>                  this.openWindow(win);
<a name="l8229"><span class="linenum">8229</span></a>  
<a name="l8230"><span class="linenum">8230</span></a>              });
<a name="l8231"><span class="linenum">8231</span></a>          },
<a name="l8232"><span class="linenum">8232</span></a>          <span class="comment">/**</span>
<a name="l8233"><span class="linenum">8233</span></a>  <span class="comment">        * @private</span>
<a name="l8234"><span class="linenum">8234</span></a>  <span class="comment">        * @method _handleCreateLinkWindowClose</span>
<a name="l8235"><span class="linenum">8235</span></a>  <span class="comment">        * @description Handles the closing of the Link Properties Window.</span>
<a name="l8236"><span class="linenum">8236</span></a>  <span class="comment">        */</span>
<a name="l8237"><span class="linenum">8237</span></a>          _handleCreateLinkWindowClose: function() {
<a name="l8238"><span class="linenum">8238</span></a>              
<a name="l8239"><span class="linenum">8239</span></a>              var url = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url'),
<a name="l8240"><span class="linenum">8240</span></a>                  target = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_target'),
<a name="l8241"><span class="linenum">8241</span></a>                  title = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_title'),
<a name="l8242"><span class="linenum">8242</span></a>                  el = arguments[0].win.el,
<a name="l8243"><span class="linenum">8243</span></a>                  a = el;
<a name="l8244"><span class="linenum">8244</span></a>  
<a name="l8245"><span class="linenum">8245</span></a>              if (url &amp;&amp; url.value) {
<a name="l8246"><span class="linenum">8246</span></a>                  var urlValue = url.value;
<a name="l8247"><span class="linenum">8247</span></a>                  if ((urlValue.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(':/'+'/') == -1) &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0,1) != '/') &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 6).toLowerCase() != 'mailto')) {
<a name="l8248"><span class="linenum">8248</span></a>                      if ((urlValue.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('@') != -1) &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 6).toLowerCase() != 'mailto')) {
<a name="l8249"><span class="linenum">8249</span></a>  <span class="comment">                        //Found an @ sign, prefix with mailto:</span>
<a name="l8250"><span class="linenum">8250</span></a>                          urlValue = 'mailto:' + urlValue;
<a name="l8251"><span class="linenum">8251</span></a>                      } else {
<a name="l8252"><span class="linenum">8252</span></a>  <span class="comment">                        // :// not found adding</span>
<a name="l8253"><span class="linenum">8253</span></a>                          if (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 1) != '#') {
<a name="l8254"><span class="linenum">8254</span></a>                              urlValue = 'http:/'+'/' + urlValue;
<a name="l8255"><span class="linenum">8255</span></a>                          }
<a name="l8256"><span class="linenum">8256</span></a>                          
<a name="l8257"><span class="linenum">8257</span></a>                      }
<a name="l8258"><span class="linenum">8258</span></a>                  }
<a name="l8259"><span class="linenum">8259</span></a>                  el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('href', urlValue);
<a name="l8260"><span class="linenum">8260</span></a>                  if (target.checked) {
<a name="l8261"><span class="linenum">8261</span></a>                      el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', target.value);
<a name="l8262"><span class="linenum">8262</span></a>                  } else {
<a name="l8263"><span class="linenum">8263</span></a>                      el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', '');
<a name="l8264"><span class="linenum">8264</span></a>                  }
<a name="l8265"><span class="linenum">8265</span></a>                  el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('title', ((title.value) ? title.value : ''));
<a name="l8266"><span class="linenum">8266</span></a>  
<a name="l8267"><span class="linenum">8267</span></a>              } else {
<a name="l8268"><span class="linenum">8268</span></a>                  var _span = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l8269"><span class="linenum">8269</span></a>                  _span.innerHTML = el.innerHTML;
<a name="l8270"><span class="linenum">8270</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_span, 'yui-non');
<a name="l8271"><span class="linenum">8271</span></a>                  el.parentNode.replaceChild(_span, el);
<a name="l8272"><span class="linenum">8272</span></a>              }
<a name="l8273"><span class="linenum">8273</span></a>              Dom.removeClass(url, 'warning');
<a name="l8274"><span class="linenum">8274</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_url').value = '';
<a name="l8275"><span class="linenum">8275</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_title').value = '';
<a name="l8276"><span class="linenum">8276</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_createlink_target').checked = false;
<a name="l8277"><span class="linenum">8277</span></a>              this.nodeChange();
<a name="l8278"><span class="linenum">8278</span></a>              this.currentElement = [];
<a name="l8279"><span class="linenum">8279</span></a>              
<a name="l8280"><span class="linenum">8280</span></a>          },
<a name="l8281"><span class="linenum">8281</span></a>          <span class="comment">/**</span>
<a name="l8282"><span class="linenum">8282</span></a>  <span class="comment">        * @private</span>
<a name="l8283"><span class="linenum">8283</span></a>  <span class="comment">        * @method _renderInsertImageWindow</span>
<a name="l8284"><span class="linenum">8284</span></a>  <span class="comment">        * @description Pre renders the InsertImage window so we get faster window opening.</span>
<a name="l8285"><span class="linenum">8285</span></a>  <span class="comment">        */</span>
<a name="l8286"><span class="linenum">8286</span></a>          _renderInsertImageWindow: function() {
<a name="l8287"><span class="linenum">8287</span></a>                  var el = this.currentElement[0];
<a name="l8288"><span class="linenum">8288</span></a>                  var str = '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url&quot;&gt;&lt;strong&gt;' + this.STR_IMAGE_URL + ':&lt;/strong&gt; &lt;input type=&quot;text&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url&quot; value=&quot;&quot; size=&quot;40&quot;&gt;&lt;/label&gt;';
<a name="l8289"><span class="linenum">8289</span></a>                  var body = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8290"><span class="linenum">8290</span></a>                  body.innerHTML = str;
<a name="l8291"><span class="linenum">8291</span></a>  
<a name="l8292"><span class="linenum">8292</span></a>                  var tbarCont = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8293"><span class="linenum">8293</span></a>                  tbarCont.id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_img_toolbar';
<a name="l8294"><span class="linenum">8294</span></a>                  body.appendChild(tbarCont);
<a name="l8295"><span class="linenum">8295</span></a>  
<a name="l8296"><span class="linenum">8296</span></a>                  var str2 = '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_title&quot;&gt;&lt;strong&gt;' + this.STR_IMAGE_TITLE + ':&lt;/strong&gt; &lt;input type=&quot;text&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_title&quot; value=&quot;&quot; size=&quot;40&quot;&gt;&lt;/label&gt;';
<a name="l8297"><span class="linenum">8297</span></a>                  str2 += '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link&quot;&gt;&lt;strong&gt;' + this.STR_LINK_URL + ':&lt;/strong&gt; &lt;input type=&quot;text&quot; name=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link&quot; value=&quot;&quot;&gt;&lt;/label&gt;';
<a name="l8298"><span class="linenum">8298</span></a>                  str2 += '&lt;label for=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_target&quot;&gt;&lt;strong&gt;&amp;nbsp;&lt;/strong&gt;&lt;input type=&quot;checkbox&quot; name=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_target_&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_target&quot; value=&quot;_blank&quot; class=&quot;insertimage_target&quot;&gt; ' + this.STR_LINK_NEW_WINDOW + '&lt;/label&gt;';
<a name="l8299"><span class="linenum">8299</span></a>                  var div = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8300"><span class="linenum">8300</span></a>                  div.innerHTML = str2;
<a name="l8301"><span class="linenum">8301</span></a>                  body.appendChild(div);
<a name="l8302"><span class="linenum">8302</span></a>  
<a name="l8303"><span class="linenum">8303</span></a>                  var o = {};
<a name="l8304"><span class="linenum">8304</span></a>                  Lang.augmentObject(o, this._defaultImageToolbarConfig); <span class="comment">//Break the config reference</span>
<a name="l8305"><span class="linenum">8305</span></a>  
<a name="l8306"><span class="linenum">8306</span></a>                  var tbar = new YAHOO.widget.Toolbar(tbarCont, o);
<a name="l8307"><span class="linenum">8307</span></a>                  tbar.editor_el = el;
<a name="l8308"><span class="linenum">8308</span></a>                  this._defaultImageToolbar = tbar;
<a name="l8309"><span class="linenum">8309</span></a>                  
<a name="l8310"><span class="linenum">8310</span></a>                  var cont = tbar.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('cont');
<a name="l8311"><span class="linenum">8311</span></a>                  var hw = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8312"><span class="linenum">8312</span></a>                  hw.className = 'yui-toolbar-group yui-toolbar-group-height-width height-width';
<a name="l8313"><span class="linenum">8313</span></a>                  hw.innerHTML = '&lt;h3&gt;' + this.STR_IMAGE_SIZE + ':&lt;/h3&gt;';
<a name="l8314"><span class="linenum">8314</span></a>                  hw.innerHTML += '&lt;span tabIndex=&quot;-1&quot;&gt;&lt;input type=&quot;text&quot; size=&quot;3&quot; value=&quot;&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width&quot;&gt; x &lt;input type=&quot;text&quot; size=&quot;3&quot; value=&quot;&quot; id=&quot;' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height&quot;&gt;&lt;/span&gt;';
<a name="l8315"><span class="linenum">8315</span></a>                  cont.<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(hw, cont.firstChild);
<a name="l8316"><span class="linenum">8316</span></a>  
<a name="l8317"><span class="linenum">8317</span></a>                  Event.onAvailable(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width', function() {
<a name="l8318"><span class="linenum">8318</span></a>                      Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width', 'blur', function() {
<a name="l8319"><span class="linenum">8319</span></a>                          var value = parseInt(Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width').value, 10);
<a name="l8320"><span class="linenum">8320</span></a>                          if (value &gt; 5) {
<a name="l8321"><span class="linenum">8321</span></a>                             this._defaultImageToolbar.editor_el.style.width = value + 'px';
<a name="l8322"><span class="linenum">8322</span></a>  <span class="comment">                            //Removed moveWindow call so the window doesn't jump</span>
<a name="l8323"><span class="linenum">8323</span></a>  <span class="comment">                            //this.moveWindow();</span>
<a name="l8324"><span class="linenum">8324</span></a>                          }
<a name="l8325"><span class="linenum">8325</span></a>                      }, this, true);
<a name="l8326"><span class="linenum">8326</span></a>                  }, this, true);
<a name="l8327"><span class="linenum">8327</span></a>                  Event.onAvailable(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height', function() {
<a name="l8328"><span class="linenum">8328</span></a>                      Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height', 'blur', function() {
<a name="l8329"><span class="linenum">8329</span></a>                          var value = parseInt(Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').value, 10);
<a name="l8330"><span class="linenum">8330</span></a>                          if (value &gt; 5) {
<a name="l8331"><span class="linenum">8331</span></a>                              this._defaultImageToolbar.editor_el.style.height = value + 'px';
<a name="l8332"><span class="linenum">8332</span></a>  <span class="comment">                            //Removed moveWindow call so the window doesn't jump</span>
<a name="l8333"><span class="linenum">8333</span></a>  <span class="comment">                            //this.moveWindow();</span>
<a name="l8334"><span class="linenum">8334</span></a>                          }
<a name="l8335"><span class="linenum">8335</span></a>                      }, this, true);
<a name="l8336"><span class="linenum">8336</span></a>                  }, this, true);
<a name="l8337"><span class="linenum">8337</span></a>  
<a name="l8338"><span class="linenum">8338</span></a>  
<a name="l8339"><span class="linenum">8339</span></a>                  tbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('colorPickerClicked', function(o) {
<a name="l8340"><span class="linenum">8340</span></a>                      var size = '1', type = 'solid', color = 'black', el = this._defaultImageToolbar.editor_el;
<a name="l8341"><span class="linenum">8341</span></a>  
<a name="l8342"><span class="linenum">8342</span></a>                      if (el.style.borderLeftWidth) {
<a name="l8343"><span class="linenum">8343</span></a>                          size = parseInt(el.style.borderLeftWidth, 10);
<a name="l8344"><span class="linenum">8344</span></a>                      }
<a name="l8345"><span class="linenum">8345</span></a>                      if (el.style.borderLeftStyle) {
<a name="l8346"><span class="linenum">8346</span></a>                          type = el.style.borderLeftStyle;
<a name="l8347"><span class="linenum">8347</span></a>                      }
<a name="l8348"><span class="linenum">8348</span></a>                      if (el.style.borderLeftColor) {
<a name="l8349"><span class="linenum">8349</span></a>                          color = el.style.borderLeftColor;
<a name="l8350"><span class="linenum">8350</span></a>                      }
<a name="l8351"><span class="linenum">8351</span></a>                      var borderString = size + 'px ' + type + ' #' + o.color;
<a name="l8352"><span class="linenum">8352</span></a>                      el.style.border = borderString;
<a name="l8353"><span class="linenum">8353</span></a>                  }, this, true);
<a name="l8354"><span class="linenum">8354</span></a>  
<a name="l8355"><span class="linenum">8355</span></a>                  tbar.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('buttonClick', function(o) {
<a name="l8356"><span class="linenum">8356</span></a>                      var value = o.button.value,
<a name="l8357"><span class="linenum">8357</span></a>                          el = this._defaultImageToolbar.editor_el,
<a name="l8358"><span class="linenum">8358</span></a>                          borderString = '';
<a name="l8359"><span class="linenum">8359</span></a>                      if (o.button.menucmd) {
<a name="l8360"><span class="linenum">8360</span></a>                          value = o.button.menucmd;
<a name="l8361"><span class="linenum">8361</span></a>                      }
<a name="l8362"><span class="linenum">8362</span></a>                      var size = '1', type = 'solid', color = 'black';
<a name="l8363"><span class="linenum">8363</span></a>  
<a name="l8364"><span class="linenum">8364</span></a>                      <span class="comment">/* All border calcs are done on the left border</span>
<a name="l8365"><span class="linenum">8365</span></a>  <span class="comment">                        since our default interface only supports</span>
<a name="l8366"><span class="linenum">8366</span></a>  <span class="comment">                        one border size/type and color */</span>
<a name="l8367"><span class="linenum">8367</span></a>                      if (el.style.borderLeftWidth) {
<a name="l8368"><span class="linenum">8368</span></a>                          size = parseInt(el.style.borderLeftWidth, 10);
<a name="l8369"><span class="linenum">8369</span></a>                      }
<a name="l8370"><span class="linenum">8370</span></a>                      if (el.style.borderLeftStyle) {
<a name="l8371"><span class="linenum">8371</span></a>                          type = el.style.borderLeftStyle;
<a name="l8372"><span class="linenum">8372</span></a>                      }
<a name="l8373"><span class="linenum">8373</span></a>                      if (el.style.borderLeftColor) {
<a name="l8374"><span class="linenum">8374</span></a>                          color = el.style.borderLeftColor;
<a name="l8375"><span class="linenum">8375</span></a>                      }
<a name="l8376"><span class="linenum">8376</span></a>                      switch(value) {
<a name="l8377"><span class="linenum">8377</span></a>                          case 'bordersize':
<a name="l8378"><span class="linenum">8378</span></a>                              if (this.browser.webkit &amp;&amp; this._lastImage) {
<a name="l8379"><span class="linenum">8379</span></a>                                  Dom.removeClass(this._lastImage, 'selected');
<a name="l8380"><span class="linenum">8380</span></a>                                  this._lastImage = null;
<a name="l8381"><span class="linenum">8381</span></a>                              }
<a name="l8382"><span class="linenum">8382</span></a>  
<a name="l8383"><span class="linenum">8383</span></a>                              borderString = parseInt(o.button.value, 10) + 'px ' + type + ' ' + color;
<a name="l8384"><span class="linenum">8384</span></a>                              el.style.border = borderString;
<a name="l8385"><span class="linenum">8385</span></a>                              if (parseInt(o.button.value, 10) &gt; 0) {
<a name="l8386"><span class="linenum">8386</span></a>                                  tbar.enableButton('bordertype');
<a name="l8387"><span class="linenum">8387</span></a>                                  tbar.enableButton('bordercolor');
<a name="l8388"><span class="linenum">8388</span></a>                              } else {
<a name="l8389"><span class="linenum">8389</span></a>                                  tbar.disableButton('bordertype');
<a name="l8390"><span class="linenum">8390</span></a>                                  tbar.disableButton('bordercolor');
<a name="l8391"><span class="linenum">8391</span></a>                              }
<a name="l8392"><span class="linenum">8392</span></a>                              break;
<a name="l8393"><span class="linenum">8393</span></a>                          case 'bordertype':
<a name="l8394"><span class="linenum">8394</span></a>                              if (this.browser.webkit &amp;&amp; this._lastImage) {
<a name="l8395"><span class="linenum">8395</span></a>                                  Dom.removeClass(this._lastImage, 'selected');
<a name="l8396"><span class="linenum">8396</span></a>                                  this._lastImage = null;
<a name="l8397"><span class="linenum">8397</span></a>                              }
<a name="l8398"><span class="linenum">8398</span></a>                              borderString = size + 'px ' + o.button.value + ' ' + color;
<a name="l8399"><span class="linenum">8399</span></a>                              el.style.border = borderString;
<a name="l8400"><span class="linenum">8400</span></a>                              break;
<a name="l8401"><span class="linenum">8401</span></a>                          case 'right':
<a name="l8402"><span class="linenum">8402</span></a>                          case 'left':
<a name="l8403"><span class="linenum">8403</span></a>                              tbar.deselectAllButtons();
<a name="l8404"><span class="linenum">8404</span></a>                              el.style.display = '';
<a name="l8405"><span class="linenum">8405</span></a>                              el.align = o.button.value;
<a name="l8406"><span class="linenum">8406</span></a>                              break;
<a name="l8407"><span class="linenum">8407</span></a>                          case 'inline':
<a name="l8408"><span class="linenum">8408</span></a>                              tbar.deselectAllButtons();
<a name="l8409"><span class="linenum">8409</span></a>                              el.style.display = '';
<a name="l8410"><span class="linenum">8410</span></a>                              el.align = '';
<a name="l8411"><span class="linenum">8411</span></a>                              break;
<a name="l8412"><span class="linenum">8412</span></a>                          case 'block':
<a name="l8413"><span class="linenum">8413</span></a>                              tbar.deselectAllButtons();
<a name="l8414"><span class="linenum">8414</span></a>                              el.style.display = 'block';
<a name="l8415"><span class="linenum">8415</span></a>                              el.align = 'center';
<a name="l8416"><span class="linenum">8416</span></a>                              break;
<a name="l8417"><span class="linenum">8417</span></a>                          case 'padding':
<a name="l8418"><span class="linenum">8418</span></a>                              var _button = tbar.getButtonById(o.button.id);
<a name="l8419"><span class="linenum">8419</span></a>                              el.style.margin = _button.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('label') + 'px';
<a name="l8420"><span class="linenum">8420</span></a>                              break;
<a name="l8421"><span class="linenum">8421</span></a>                      }
<a name="l8422"><span class="linenum">8422</span></a>                      tbar.selectButton(o.button.value);
<a name="l8423"><span class="linenum">8423</span></a>                      if (value !== 'padding') {
<a name="l8424"><span class="linenum">8424</span></a>                          this.moveWindow();
<a name="l8425"><span class="linenum">8425</span></a>                      }
<a name="l8426"><span class="linenum">8426</span></a>                  }, this, true);
<a name="l8427"><span class="linenum">8427</span></a>  
<a name="l8428"><span class="linenum">8428</span></a>  
<a name="l8429"><span class="linenum">8429</span></a>  
<a name="l8430"><span class="linenum">8430</span></a>                  if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('localFileWarning')) {
<a name="l8431"><span class="linenum">8431</span></a>                      Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link', 'blur', function() {
<a name="l8432"><span class="linenum">8432</span></a>                          var url = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link');
<a name="l8433"><span class="linenum">8433</span></a>                          if (this._isLocalFile(url.value)) {
<a name="l8434"><span class="linenum">8434</span></a>  <span class="comment">                            //Local File throw Warning</span>
<a name="l8435"><span class="linenum">8435</span></a>                              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(url, 'warning');
<a name="l8436"><span class="linenum">8436</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Local file reference found, show local warning', 'warn', 'Editor');
<a name="l8437"><span class="linenum">8437</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_LOCAL_FILE_WARNING);
<a name="l8438"><span class="linenum">8438</span></a>                          } else {
<a name="l8439"><span class="linenum">8439</span></a>                              Dom.removeClass(url, 'warning');
<a name="l8440"><span class="linenum">8440</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' ');
<a name="l8441"><span class="linenum">8441</span></a>  <span class="comment">                            //Adobe AIR Code</span>
<a name="l8442"><span class="linenum">8442</span></a>                              if ((this.browser.webkit &amp;&amp; !this.browser.webkit3 || this.browser.air) || this.browser.opera) {                
<a name="l8443"><span class="linenum">8443</span></a>                                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_IMAGE_COPY);
<a name="l8444"><span class="linenum">8444</span></a>                              }
<a name="l8445"><span class="linenum">8445</span></a>                          }
<a name="l8446"><span class="linenum">8446</span></a>                      }, this, true);
<a name="l8447"><span class="linenum">8447</span></a>                  }
<a name="l8448"><span class="linenum">8448</span></a>  
<a name="l8449"><span class="linenum">8449</span></a>                  Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url', 'blur', function() {
<a name="l8450"><span class="linenum">8450</span></a>                      var url = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url'),
<a name="l8451"><span class="linenum">8451</span></a>                          el = this.currentElement[0];
<a name="l8452"><span class="linenum">8452</span></a>  
<a name="l8453"><span class="linenum">8453</span></a>                      if (url.value &amp;&amp; el) {
<a name="l8454"><span class="linenum">8454</span></a>                          if (url.value == el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src', 2)) {
<a name="l8455"><span class="linenum">8455</span></a>                              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Images are the same, bail on blur handler', 'info', 'Editor');
<a name="l8456"><span class="linenum">8456</span></a>                              return false;
<a name="l8457"><span class="linenum">8457</span></a>                          }
<a name="l8458"><span class="linenum">8458</span></a>                      }
<a name="l8459"><span class="linenum">8459</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Images are different, process blur handler', 'info', 'Editor');
<a name="l8460"><span class="linenum">8460</span></a>                      if (this._isLocalFile(url.value)) {
<a name="l8461"><span class="linenum">8461</span></a>  <span class="comment">                        //Local File throw Warning</span>
<a name="l8462"><span class="linenum">8462</span></a>                          Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(url, 'warning');
<a name="l8463"><span class="linenum">8463</span></a>                          YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Local file reference found, show local warning', 'warn', 'Editor');
<a name="l8464"><span class="linenum">8464</span></a>                          this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_LOCAL_FILE_WARNING);
<a name="l8465"><span class="linenum">8465</span></a>                      } else if (this.currentElement[0]) {
<a name="l8466"><span class="linenum">8466</span></a>                          Dom.removeClass(url, 'warning');
<a name="l8467"><span class="linenum">8467</span></a>                          this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' ');
<a name="l8468"><span class="linenum">8468</span></a>  <span class="comment">                        //Adobe AIR Code</span>
<a name="l8469"><span class="linenum">8469</span></a>                          if ((this.browser.webkit &amp;&amp; !this.browser.webkit3 || this.browser.air) || this.browser.opera) {                
<a name="l8470"><span class="linenum">8470</span></a>                              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_IMAGE_COPY);
<a name="l8471"><span class="linenum">8471</span></a>                          }
<a name="l8472"><span class="linenum">8472</span></a>                          
<a name="l8473"><span class="linenum">8473</span></a>                          if (url &amp;&amp; url.value &amp;&amp; (url.value != this.STR_IMAGE_HERE)) {
<a name="l8474"><span class="linenum">8474</span></a>                              this.currentElement[0].<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', url.value);
<a name="l8475"><span class="linenum">8475</span></a>                              var self = this,
<a name="l8476"><span class="linenum">8476</span></a>                                  img = new <a class="function" onClick="logFunction('Image')" href="../../../../../../_functions/image.html" onMouseOver="funcPopup(event,'image')">Image</a>();
<a name="l8477"><span class="linenum">8477</span></a>  
<a name="l8478"><span class="linenum">8478</span></a>                              img.onerror = function() {
<a name="l8479"><span class="linenum">8479</span></a>                                  url.value = self.STR_IMAGE_HERE;
<a name="l8480"><span class="linenum">8480</span></a>                                  img.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', self.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage'));
<a name="l8481"><span class="linenum">8481</span></a>                                  self.currentElement[0].<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', self.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage'));
<a name="l8482"><span class="linenum">8482</span></a>                                  YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(self.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').value = img.height;
<a name="l8483"><span class="linenum">8483</span></a>                                  YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(self.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width').value = img.width;
<a name="l8484"><span class="linenum">8484</span></a>                              };
<a name="l8485"><span class="linenum">8485</span></a>                              var id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id');
<a name="l8486"><span class="linenum">8486</span></a>                              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l8487"><span class="linenum">8487</span></a>                                  YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_insertimage_height').value = img.height;
<a name="l8488"><span class="linenum">8488</span></a>                                  YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_insertimage_width').value = img.width;
<a name="l8489"><span class="linenum">8489</span></a>                                  if (self.currentElement &amp;&amp; self.currentElement[0]) {
<a name="l8490"><span class="linenum">8490</span></a>                                      if (!self.currentElement[0]._height) {
<a name="l8491"><span class="linenum">8491</span></a>                                          self.currentElement[0]._height = img.height;
<a name="l8492"><span class="linenum">8492</span></a>                                      }
<a name="l8493"><span class="linenum">8493</span></a>                                      if (!self.currentElement[0]._width) {
<a name="l8494"><span class="linenum">8494</span></a>                                          self.currentElement[0]._width = img.width;
<a name="l8495"><span class="linenum">8495</span></a>                                      }
<a name="l8496"><span class="linenum">8496</span></a>                                  }
<a name="l8497"><span class="linenum">8497</span></a>  <span class="comment">                                //Removed moveWindow call so the window doesn't jump</span>
<a name="l8498"><span class="linenum">8498</span></a>  <span class="comment">                                //self.moveWindow();</span>
<a name="l8499"><span class="linenum">8499</span></a>                              }, 800); <span class="comment">//Bumped the timeout up to account for larger images..</span>
<a name="l8500"><span class="linenum">8500</span></a>  
<a name="l8501"><span class="linenum">8501</span></a>                              if (url.value != this.STR_IMAGE_HERE) {
<a name="l8502"><span class="linenum">8502</span></a>                                  img.src = url.value;
<a name="l8503"><span class="linenum">8503</span></a>                              }
<a name="l8504"><span class="linenum">8504</span></a>                          }
<a name="l8505"><span class="linenum">8505</span></a>                      }
<a name="l8506"><span class="linenum">8506</span></a>                      }, this, true);
<a name="l8507"><span class="linenum">8507</span></a>  
<a name="l8508"><span class="linenum">8508</span></a>  
<a name="l8509"><span class="linenum">8509</span></a>  
<a name="l8510"><span class="linenum">8510</span></a>                  this._windows.insertimage = {};
<a name="l8511"><span class="linenum">8511</span></a>                  this._windows.insertimage.body = body;
<a name="l8512"><span class="linenum">8512</span></a>  <span class="comment">                //body.style.display = 'none';</span>
<a name="l8513"><span class="linenum">8513</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').editor_form.appendChild(body);
<a name="l8514"><span class="linenum">8514</span></a>                  this.fireEvent('windowInsertImageRender', { type: 'windowInsertImageRender', panel: this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel'), body: body, toolbar: tbar });
<a name="l8515"><span class="linenum">8515</span></a>                  return body;
<a name="l8516"><span class="linenum">8516</span></a>          },
<a name="l8517"><span class="linenum">8517</span></a>          <span class="comment">/**</span>
<a name="l8518"><span class="linenum">8518</span></a>  <span class="comment">        * @private</span>
<a name="l8519"><span class="linenum">8519</span></a>  <span class="comment">        * @method _handleInsertImageClick</span>
<a name="l8520"><span class="linenum">8520</span></a>  <span class="comment">        * @description Opens the Image Properties Window when the insert Image button is clicked or an Image is Double Clicked.</span>
<a name="l8521"><span class="linenum">8521</span></a>  <span class="comment">        */</span>
<a name="l8522"><span class="linenum">8522</span></a>          _handleInsertImageClick: function() {
<a name="l8523"><span class="linenum">8523</span></a>              if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('limitCommands')) {
<a name="l8524"><span class="linenum">8524</span></a>                  if (!this.toolbar.getButtonByValue('insertimage')) {
<a name="l8525"><span class="linenum">8525</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Toolbar Button for (insertimage) was not found, skipping exec.', 'info', 'Editor');
<a name="l8526"><span class="linenum">8526</span></a>                      return false;
<a name="l8527"><span class="linenum">8527</span></a>                  }
<a name="l8528"><span class="linenum">8528</span></a>              }
<a name="l8529"><span class="linenum">8529</span></a>              this.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('afterExecCommand', function() {
<a name="l8530"><span class="linenum">8530</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('afterExecCommand :: _handleInsertImageClick', 'info', 'Editor');
<a name="l8531"><span class="linenum">8531</span></a>                  var el = this.currentElement[0],
<a name="l8532"><span class="linenum">8532</span></a>                      body = null,
<a name="l8533"><span class="linenum">8533</span></a>                      link = '',
<a name="l8534"><span class="linenum">8534</span></a>                      target = '',
<a name="l8535"><span class="linenum">8535</span></a>                      tbar = null,
<a name="l8536"><span class="linenum">8536</span></a>                      title = '',
<a name="l8537"><span class="linenum">8537</span></a>                      src = '',
<a name="l8538"><span class="linenum">8538</span></a>                      align = '',
<a name="l8539"><span class="linenum">8539</span></a>                      height = 75,
<a name="l8540"><span class="linenum">8540</span></a>                      width = 75,
<a name="l8541"><span class="linenum">8541</span></a>                      padding = 0,
<a name="l8542"><span class="linenum">8542</span></a>                      oheight = 0,
<a name="l8543"><span class="linenum">8543</span></a>                      owidth = 0,
<a name="l8544"><span class="linenum">8544</span></a>                      blankimage = false,
<a name="l8545"><span class="linenum">8545</span></a>                      win = new YAHOO.widget.EditorWindow('insertimage', {
<a name="l8546"><span class="linenum">8546</span></a>                          width: '415px'
<a name="l8547"><span class="linenum">8547</span></a>                      });
<a name="l8548"><span class="linenum">8548</span></a>  
<a name="l8549"><span class="linenum">8549</span></a>                  if (!el) {
<a name="l8550"><span class="linenum">8550</span></a>                      el = this._getSelectedElement();
<a name="l8551"><span class="linenum">8551</span></a>                  }
<a name="l8552"><span class="linenum">8552</span></a>                  if (el) {
<a name="l8553"><span class="linenum">8553</span></a>                      win.el = el;
<a name="l8554"><span class="linenum">8554</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src')) {
<a name="l8555"><span class="linenum">8555</span></a>                          src = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('src', 2);
<a name="l8556"><span class="linenum">8556</span></a>                          if (src.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage')) != -1) {
<a name="l8557"><span class="linenum">8557</span></a>                              src = this.STR_IMAGE_HERE;
<a name="l8558"><span class="linenum">8558</span></a>                              blankimage = true;
<a name="l8559"><span class="linenum">8559</span></a>                          }
<a name="l8560"><span class="linenum">8560</span></a>                      }
<a name="l8561"><span class="linenum">8561</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('alt', 2)) {
<a name="l8562"><span class="linenum">8562</span></a>                          title = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('alt', 2);
<a name="l8563"><span class="linenum">8563</span></a>                      }
<a name="l8564"><span class="linenum">8564</span></a>                      if (el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('title', 2)) {
<a name="l8565"><span class="linenum">8565</span></a>                          title = el.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('title', 2);
<a name="l8566"><span class="linenum">8566</span></a>                      }
<a name="l8567"><span class="linenum">8567</span></a>  
<a name="l8568"><span class="linenum">8568</span></a>                      if (el.parentNode &amp;&amp; this._isElement(el.parentNode, 'a')) {
<a name="l8569"><span class="linenum">8569</span></a>                          link = el.parentNode.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('href', 2);
<a name="l8570"><span class="linenum">8570</span></a>                          if (el.parentNode.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('target') !== null) {
<a name="l8571"><span class="linenum">8571</span></a>                              target = el.parentNode.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('target');
<a name="l8572"><span class="linenum">8572</span></a>                          }
<a name="l8573"><span class="linenum">8573</span></a>                      }
<a name="l8574"><span class="linenum">8574</span></a>                      height = parseInt(el.height, 10);
<a name="l8575"><span class="linenum">8575</span></a>                      width = parseInt(el.width, 10);
<a name="l8576"><span class="linenum">8576</span></a>                      if (el.style.height) {
<a name="l8577"><span class="linenum">8577</span></a>                          height = parseInt(el.style.height, 10);
<a name="l8578"><span class="linenum">8578</span></a>                      }
<a name="l8579"><span class="linenum">8579</span></a>                      if (el.style.width) {
<a name="l8580"><span class="linenum">8580</span></a>                          width = parseInt(el.style.width, 10);
<a name="l8581"><span class="linenum">8581</span></a>                      }
<a name="l8582"><span class="linenum">8582</span></a>                      if (el.style.margin) {
<a name="l8583"><span class="linenum">8583</span></a>                          padding = parseInt(el.style.margin, 10);
<a name="l8584"><span class="linenum">8584</span></a>                      }
<a name="l8585"><span class="linenum">8585</span></a>                      if (!blankimage) {
<a name="l8586"><span class="linenum">8586</span></a>                          if (!el._height) {
<a name="l8587"><span class="linenum">8587</span></a>                              el._height = height;
<a name="l8588"><span class="linenum">8588</span></a>                          }
<a name="l8589"><span class="linenum">8589</span></a>                          if (!el._width) {
<a name="l8590"><span class="linenum">8590</span></a>                              el._width = width;
<a name="l8591"><span class="linenum">8591</span></a>                          }
<a name="l8592"><span class="linenum">8592</span></a>                          oheight = el._height;
<a name="l8593"><span class="linenum">8593</span></a>                          owidth = el._width;
<a name="l8594"><span class="linenum">8594</span></a>                      }
<a name="l8595"><span class="linenum">8595</span></a>                  }
<a name="l8596"><span class="linenum">8596</span></a>                  if (this._windows.insertimage &amp;&amp; this._windows.insertimage.body) {
<a name="l8597"><span class="linenum">8597</span></a>                      body = this._windows.insertimage.body;
<a name="l8598"><span class="linenum">8598</span></a>                      this._defaultImageToolbar.resetAllButtons();
<a name="l8599"><span class="linenum">8599</span></a>                  } else {
<a name="l8600"><span class="linenum">8600</span></a>                      body = this._renderInsertImageWindow();
<a name="l8601"><span class="linenum">8601</span></a>                  }
<a name="l8602"><span class="linenum">8602</span></a>  
<a name="l8603"><span class="linenum">8603</span></a>                  tbar = this._defaultImageToolbar;
<a name="l8604"><span class="linenum">8604</span></a>                  tbar.editor_el = el;
<a name="l8605"><span class="linenum">8605</span></a>                  
<a name="l8606"><span class="linenum">8606</span></a>  
<a name="l8607"><span class="linenum">8607</span></a>                  var bsize = '0',
<a name="l8608"><span class="linenum">8608</span></a>                      btype = 'solid';
<a name="l8609"><span class="linenum">8609</span></a>  
<a name="l8610"><span class="linenum">8610</span></a>                  if (el.style.borderLeftWidth) {
<a name="l8611"><span class="linenum">8611</span></a>                      bsize = parseInt(el.style.borderLeftWidth, 10);
<a name="l8612"><span class="linenum">8612</span></a>                  }
<a name="l8613"><span class="linenum">8613</span></a>                  if (el.style.borderLeftStyle) {
<a name="l8614"><span class="linenum">8614</span></a>                      btype = el.style.borderLeftStyle;
<a name="l8615"><span class="linenum">8615</span></a>                  }
<a name="l8616"><span class="linenum">8616</span></a>                  var bs_button = tbar.getButtonByValue('bordersize'),
<a name="l8617"><span class="linenum">8617</span></a>                      bSizeStr = ((parseInt(bsize, 10) &gt; 0) ? '' : this.STR_NONE);
<a name="l8618"><span class="linenum">8618</span></a>                  bs_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', '&lt;span class=&quot;yui-toolbar-bordersize-' + bsize + '&quot;&gt;' + bSizeStr + '&lt;/span&gt;');
<a name="l8619"><span class="linenum">8619</span></a>                  this._updateMenuChecked('bordersize', bsize, tbar);
<a name="l8620"><span class="linenum">8620</span></a>  
<a name="l8621"><span class="linenum">8621</span></a>                  var bt_button = tbar.getButtonByValue('bordertype');
<a name="l8622"><span class="linenum">8622</span></a>                  bt_button.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', '&lt;span class=&quot;yui-toolbar-bordertype-' + btype + '&quot;&gt;asdfa&lt;/span&gt;');
<a name="l8623"><span class="linenum">8623</span></a>                  this._updateMenuChecked('bordertype', btype, tbar);
<a name="l8624"><span class="linenum">8624</span></a>                  if (parseInt(bsize, 10) &gt; 0) {
<a name="l8625"><span class="linenum">8625</span></a>                      tbar.enableButton(bt_button);
<a name="l8626"><span class="linenum">8626</span></a>                      tbar.enableButton(bs_button);
<a name="l8627"><span class="linenum">8627</span></a>                      tbar.enableButton('bordercolor');
<a name="l8628"><span class="linenum">8628</span></a>                  }
<a name="l8629"><span class="linenum">8629</span></a>  
<a name="l8630"><span class="linenum">8630</span></a>                  if ((el.align == 'right') || (el.align == 'left')) {
<a name="l8631"><span class="linenum">8631</span></a>                      tbar.selectButton(el.align);
<a name="l8632"><span class="linenum">8632</span></a>                  } else if (el.style.display == 'block') {
<a name="l8633"><span class="linenum">8633</span></a>                      tbar.selectButton('block');
<a name="l8634"><span class="linenum">8634</span></a>                  } else {
<a name="l8635"><span class="linenum">8635</span></a>                      tbar.selectButton('inline');
<a name="l8636"><span class="linenum">8636</span></a>                  }
<a name="l8637"><span class="linenum">8637</span></a>                  if (parseInt(el.style.marginLeft, 10) &gt; 0) {
<a name="l8638"><span class="linenum">8638</span></a>                      tbar.getButtonByValue('padding').<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', ''+parseInt(el.style.marginLeft, 10));
<a name="l8639"><span class="linenum">8639</span></a>                  }
<a name="l8640"><span class="linenum">8640</span></a>                  if (el.style.borderSize) {
<a name="l8641"><span class="linenum">8641</span></a>                      tbar.selectButton('bordersize');
<a name="l8642"><span class="linenum">8642</span></a>                      tbar.selectButton(parseInt(el.style.borderSize, 10));
<a name="l8643"><span class="linenum">8643</span></a>                  }
<a name="l8644"><span class="linenum">8644</span></a>                  tbar.getButtonByValue('padding').<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('label', ''+padding);
<a name="l8645"><span class="linenum">8645</span></a>  
<a name="l8646"><span class="linenum">8646</span></a>  
<a name="l8647"><span class="linenum">8647</span></a>  
<a name="l8648"><span class="linenum">8648</span></a>                  win.<a class="function" onClick="logFunction('setHeader')" href="../../../../../../_functions/setheader.html" onMouseOver="funcPopup(event,'setheader')">setHeader</a>(this.STR_IMAGE_PROP_TITLE);
<a name="l8649"><span class="linenum">8649</span></a>                  win.<a class="function" onClick="logFunction('setBody')" href="../../../../../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>(body);
<a name="l8650"><span class="linenum">8650</span></a>  <span class="comment">                //Adobe AIR Code</span>
<a name="l8651"><span class="linenum">8651</span></a>                  if ((this.browser.webkit &amp;&amp; !this.browser.webkit3 || this.browser.air) || this.browser.opera) {                
<a name="l8652"><span class="linenum">8652</span></a>                      win.<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(this.STR_IMAGE_COPY);
<a name="l8653"><span class="linenum">8653</span></a>                  }
<a name="l8654"><span class="linenum">8654</span></a>                  this.openWindow(win);
<a name="l8655"><span class="linenum">8655</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url').value = src;
<a name="l8656"><span class="linenum">8656</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_title').value = title;
<a name="l8657"><span class="linenum">8657</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link').value = link;
<a name="l8658"><span class="linenum">8658</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_target').checked = ((target) ? true : false);
<a name="l8659"><span class="linenum">8659</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width').value = width;
<a name="l8660"><span class="linenum">8660</span></a>                  Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').value = height;
<a name="l8661"><span class="linenum">8661</span></a>  
<a name="l8662"><span class="linenum">8662</span></a>  
<a name="l8663"><span class="linenum">8663</span></a>                  if (((height != oheight) || (width != owidth)) &amp;&amp; (!blankimage)) {
<a name="l8664"><span class="linenum">8664</span></a>                      var s = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l8665"><span class="linenum">8665</span></a>                      s.className = 'info';
<a name="l8666"><span class="linenum">8666</span></a>                      s.innerHTML = this.STR_IMAGE_ORIG_SIZE + ': ('+ owidth +' x ' + oheight + ')';
<a name="l8667"><span class="linenum">8667</span></a>                      if (Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').nextSibling) {
<a name="l8668"><span class="linenum">8668</span></a>                          var old = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').nextSibling;
<a name="l8669"><span class="linenum">8669</span></a>                          old.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(old);
<a name="l8670"><span class="linenum">8670</span></a>                      }
<a name="l8671"><span class="linenum">8671</span></a>                      Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').parentNode.appendChild(s);
<a name="l8672"><span class="linenum">8672</span></a>                  }
<a name="l8673"><span class="linenum">8673</span></a>  
<a name="l8674"><span class="linenum">8674</span></a>                  this.toolbar.selectButton('insertimage');
<a name="l8675"><span class="linenum">8675</span></a>                  var id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id');
<a name="l8676"><span class="linenum">8676</span></a>                  window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l8677"><span class="linenum">8677</span></a>                      try {
<a name="l8678"><span class="linenum">8678</span></a>                          YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_insertimage_url').<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l8679"><span class="linenum">8679</span></a>                          if (blankimage) {
<a name="l8680"><span class="linenum">8680</span></a>                              YAHOO.util.Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(id + '_insertimage_url').<a class="function" onClick="logFunction('select')" href="../../../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>();
<a name="l8681"><span class="linenum">8681</span></a>                          }
<a name="l8682"><span class="linenum">8682</span></a>                      } catch (e) {}
<a name="l8683"><span class="linenum">8683</span></a>                  }, 50);
<a name="l8684"><span class="linenum">8684</span></a>  
<a name="l8685"><span class="linenum">8685</span></a>              });
<a name="l8686"><span class="linenum">8686</span></a>          },
<a name="l8687"><span class="linenum">8687</span></a>          <span class="comment">/**</span>
<a name="l8688"><span class="linenum">8688</span></a>  <span class="comment">        * @private</span>
<a name="l8689"><span class="linenum">8689</span></a>  <span class="comment">        * @method _handleInsertImageWindowClose</span>
<a name="l8690"><span class="linenum">8690</span></a>  <span class="comment">        * @description Handles the closing of the Image Properties Window.</span>
<a name="l8691"><span class="linenum">8691</span></a>  <span class="comment">        */</span>
<a name="l8692"><span class="linenum">8692</span></a>          _handleInsertImageWindowClose: function() {
<a name="l8693"><span class="linenum">8693</span></a>              var url = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url'),
<a name="l8694"><span class="linenum">8694</span></a>                  title = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_title'),
<a name="l8695"><span class="linenum">8695</span></a>                  link = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link'),
<a name="l8696"><span class="linenum">8696</span></a>                  target = Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_target'),
<a name="l8697"><span class="linenum">8697</span></a>                  el = arguments[0].win.el;
<a name="l8698"><span class="linenum">8698</span></a>  
<a name="l8699"><span class="linenum">8699</span></a>              if (url &amp;&amp; url.value &amp;&amp; (url.value != this.STR_IMAGE_HERE)) {
<a name="l8700"><span class="linenum">8700</span></a>                  el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', url.value);
<a name="l8701"><span class="linenum">8701</span></a>                  el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('title', title.value);
<a name="l8702"><span class="linenum">8702</span></a>                  el.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('alt', title.value);
<a name="l8703"><span class="linenum">8703</span></a>                  var par = el.parentNode;
<a name="l8704"><span class="linenum">8704</span></a>                  if (link.value) {
<a name="l8705"><span class="linenum">8705</span></a>                      var urlValue = link.value;
<a name="l8706"><span class="linenum">8706</span></a>                      if ((urlValue.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(':/'+'/') == -1) &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0,1) != '/') &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 6).toLowerCase() != 'mailto')) {
<a name="l8707"><span class="linenum">8707</span></a>                          if ((urlValue.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('@') != -1) &amp;&amp; (urlValue.<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 6).toLowerCase() != 'mailto')) {
<a name="l8708"><span class="linenum">8708</span></a>  <span class="comment">                            //Found an @ sign, prefix with mailto:</span>
<a name="l8709"><span class="linenum">8709</span></a>                              urlValue = 'mailto:' + urlValue;
<a name="l8710"><span class="linenum">8710</span></a>                          } else {
<a name="l8711"><span class="linenum">8711</span></a>  <span class="comment">                            // :// not found adding</span>
<a name="l8712"><span class="linenum">8712</span></a>                              urlValue = 'http:/'+'/' + urlValue;
<a name="l8713"><span class="linenum">8713</span></a>                          }
<a name="l8714"><span class="linenum">8714</span></a>                      }
<a name="l8715"><span class="linenum">8715</span></a>                      if (par &amp;&amp; this._isElement(par, 'a')) {
<a name="l8716"><span class="linenum">8716</span></a>                          par.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('href', urlValue);
<a name="l8717"><span class="linenum">8717</span></a>                          if (target.checked) {
<a name="l8718"><span class="linenum">8718</span></a>                              par.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', target.value);
<a name="l8719"><span class="linenum">8719</span></a>                          } else {
<a name="l8720"><span class="linenum">8720</span></a>                              par.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', '');
<a name="l8721"><span class="linenum">8721</span></a>                          }
<a name="l8722"><span class="linenum">8722</span></a>                      } else {
<a name="l8723"><span class="linenum">8723</span></a>                          var _a = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('a');
<a name="l8724"><span class="linenum">8724</span></a>                          _a.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('href', urlValue);
<a name="l8725"><span class="linenum">8725</span></a>                          if (target.checked) {
<a name="l8726"><span class="linenum">8726</span></a>                              _a.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', target.value);
<a name="l8727"><span class="linenum">8727</span></a>                          } else {
<a name="l8728"><span class="linenum">8728</span></a>                              _a.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', '');
<a name="l8729"><span class="linenum">8729</span></a>                          }
<a name="l8730"><span class="linenum">8730</span></a>                          el.parentNode.replaceChild(_a, el);
<a name="l8731"><span class="linenum">8731</span></a>                          _a.appendChild(el);
<a name="l8732"><span class="linenum">8732</span></a>                      }
<a name="l8733"><span class="linenum">8733</span></a>                  } else {
<a name="l8734"><span class="linenum">8734</span></a>                      if (par &amp;&amp; this._isElement(par, 'a')) {
<a name="l8735"><span class="linenum">8735</span></a>                          par.parentNode.replaceChild(el, par);
<a name="l8736"><span class="linenum">8736</span></a>                      }
<a name="l8737"><span class="linenum">8737</span></a>                  }
<a name="l8738"><span class="linenum">8738</span></a>              } else {
<a name="l8739"><span class="linenum">8739</span></a>  <span class="comment">                //No url/src given, remove the node from the document</span>
<a name="l8740"><span class="linenum">8740</span></a>                  el.parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(el);
<a name="l8741"><span class="linenum">8741</span></a>              }
<a name="l8742"><span class="linenum">8742</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_url').value = '';
<a name="l8743"><span class="linenum">8743</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_title').value = '';
<a name="l8744"><span class="linenum">8744</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_link').value = '';
<a name="l8745"><span class="linenum">8745</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_target').checked = false;
<a name="l8746"><span class="linenum">8746</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_width').value = 0;
<a name="l8747"><span class="linenum">8747</span></a>              Dom.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + '_insertimage_height').value = 0;
<a name="l8748"><span class="linenum">8748</span></a>              this._defaultImageToolbar.resetAllButtons();
<a name="l8749"><span class="linenum">8749</span></a>              this.currentElement = [];
<a name="l8750"><span class="linenum">8750</span></a>              this.nodeChange();
<a name="l8751"><span class="linenum">8751</span></a>          },
<a name="l8752"><span class="linenum">8752</span></a>          <span class="comment">/**</span>
<a name="l8753"><span class="linenum">8753</span></a>  <span class="comment">        * @property EDITOR_PANEL_ID</span>
<a name="l8754"><span class="linenum">8754</span></a>  <span class="comment">        * @description HTML id to give the properties window in the DOM.</span>
<a name="l8755"><span class="linenum">8755</span></a>  <span class="comment">        * @type String</span>
<a name="l8756"><span class="linenum">8756</span></a>  <span class="comment">        */</span>
<a name="l8757"><span class="linenum">8757</span></a>          EDITOR_PANEL_ID: '-panel',
<a name="l8758"><span class="linenum">8758</span></a>          <span class="comment">/**</span>
<a name="l8759"><span class="linenum">8759</span></a>  <span class="comment">        * @private</span>
<a name="l8760"><span class="linenum">8760</span></a>  <span class="comment">        * @method _renderPanel</span>
<a name="l8761"><span class="linenum">8761</span></a>  <span class="comment">        * @description Renders the panel used for Editor Windows to the document so we can start using it..</span>
<a name="l8762"><span class="linenum">8762</span></a>  <span class="comment">        * @return {&lt;a href=&quot;YAHOO.widget.Overlay.html&quot;&gt;YAHOO.widget.Overlay&lt;/a&gt;}</span>
<a name="l8763"><span class="linenum">8763</span></a>  <span class="comment">        */</span>
<a name="l8764"><span class="linenum">8764</span></a>          _renderPanel: function() {
<a name="l8765"><span class="linenum">8765</span></a>              var panelEl = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8766"><span class="linenum">8766</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(panelEl, 'yui-editor-panel');
<a name="l8767"><span class="linenum">8767</span></a>              panelEl.id = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + this.EDITOR_PANEL_ID;
<a name="l8768"><span class="linenum">8768</span></a>              panelEl.style.position = 'absolute';
<a name="l8769"><span class="linenum">8769</span></a>              panelEl.style.top = '-9999px';
<a name="l8770"><span class="linenum">8770</span></a>              panelEl.style.left = '-9999px';
<a name="l8771"><span class="linenum">8771</span></a>              document.body.appendChild(panelEl);
<a name="l8772"><span class="linenum">8772</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('insertBefore')" href="../../../../../../_functions/insertbefore.html" onMouseOver="funcPopup(event,'insertbefore')">insertBefore</a>(panelEl, this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('firstChild'));
<a name="l8773"><span class="linenum">8773</span></a>  
<a name="l8774"><span class="linenum">8774</span></a>                  
<a name="l8775"><span class="linenum">8775</span></a>  
<a name="l8776"><span class="linenum">8776</span></a>              var panel = new YAHOO.widget.<a class="function" onClick="logFunction('Overlay')" href="../../../../../../_functions/overlay.html" onMouseOver="funcPopup(event,'overlay')">Overlay</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + this.EDITOR_PANEL_ID, {
<a name="l8777"><span class="linenum">8777</span></a>                      width: '300px',
<a name="l8778"><span class="linenum">8778</span></a>                      iframe: true,
<a name="l8779"><span class="linenum">8779</span></a>                      visible: false,
<a name="l8780"><span class="linenum">8780</span></a>                      underlay: 'none',
<a name="l8781"><span class="linenum">8781</span></a>                      draggable: false,
<a name="l8782"><span class="linenum">8782</span></a>                      close: false
<a name="l8783"><span class="linenum">8783</span></a>                  });
<a name="l8784"><span class="linenum">8784</span></a>              this.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('panel', panel);
<a name="l8785"><span class="linenum">8785</span></a>  
<a name="l8786"><span class="linenum">8786</span></a>              panel.<a class="function" onClick="logFunction('setBody')" href="../../../../../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>('---');
<a name="l8787"><span class="linenum">8787</span></a>              panel.<a class="function" onClick="logFunction('setHeader')" href="../../../../../../_functions/setheader.html" onMouseOver="funcPopup(event,'setheader')">setHeader</a>(' ');
<a name="l8788"><span class="linenum">8788</span></a>              panel.<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' ');
<a name="l8789"><span class="linenum">8789</span></a>  
<a name="l8790"><span class="linenum">8790</span></a>  
<a name="l8791"><span class="linenum">8791</span></a>              var body = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8792"><span class="linenum">8792</span></a>              body.className = this.CLASS_PREFIX + '-body-cont';
<a name="l8793"><span class="linenum">8793</span></a>              for (var b in this.browser) {
<a name="l8794"><span class="linenum">8794</span></a>                  if (this.browser[b]) {
<a name="l8795"><span class="linenum">8795</span></a>                      Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(body, b);
<a name="l8796"><span class="linenum">8796</span></a>                      break;
<a name="l8797"><span class="linenum">8797</span></a>                  }
<a name="l8798"><span class="linenum">8798</span></a>              }
<a name="l8799"><span class="linenum">8799</span></a>              Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(body, ((YAHOO.widget.Button &amp;&amp; (this._defaultToolbar.buttonType == 'advanced')) ? 'good-button' : 'no-button'));
<a name="l8800"><span class="linenum">8800</span></a>  
<a name="l8801"><span class="linenum">8801</span></a>              var _note = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('h3');
<a name="l8802"><span class="linenum">8802</span></a>              _note.className = 'yui-editor-skipheader';
<a name="l8803"><span class="linenum">8803</span></a>              _note.innerHTML = this.STR_CLOSE_WINDOW_NOTE;
<a name="l8804"><span class="linenum">8804</span></a>              body.appendChild(_note);
<a name="l8805"><span class="linenum">8805</span></a>              var form = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('fieldset');
<a name="l8806"><span class="linenum">8806</span></a>              panel.editor_form = form;
<a name="l8807"><span class="linenum">8807</span></a>  
<a name="l8808"><span class="linenum">8808</span></a>              body.appendChild(form);
<a name="l8809"><span class="linenum">8809</span></a>              var _close = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l8810"><span class="linenum">8810</span></a>              _close.innerHTML = 'X';
<a name="l8811"><span class="linenum">8811</span></a>              _close.title = this.STR_CLOSE_WINDOW;
<a name="l8812"><span class="linenum">8812</span></a>              _close.className = 'close';
<a name="l8813"><span class="linenum">8813</span></a>              
<a name="l8814"><span class="linenum">8814</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(_close, 'click', this.closeWindow, this, true);
<a name="l8815"><span class="linenum">8815</span></a>  
<a name="l8816"><span class="linenum">8816</span></a>              var _knob = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l8817"><span class="linenum">8817</span></a>              _knob.innerHTML = '^';
<a name="l8818"><span class="linenum">8818</span></a>              _knob.className = 'knob';
<a name="l8819"><span class="linenum">8819</span></a>              panel.editor_knob = _knob;
<a name="l8820"><span class="linenum">8820</span></a>  
<a name="l8821"><span class="linenum">8821</span></a>              var _header = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('h3');
<a name="l8822"><span class="linenum">8822</span></a>              panel.editor_header = _header;
<a name="l8823"><span class="linenum">8823</span></a>              _header.innerHTML = '&lt;span&gt;&lt;/span&gt;';
<a name="l8824"><span class="linenum">8824</span></a>  
<a name="l8825"><span class="linenum">8825</span></a>              panel.<a class="function" onClick="logFunction('setHeader')" href="../../../../../../_functions/setheader.html" onMouseOver="funcPopup(event,'setheader')">setHeader</a>(' '); <span class="comment">//Clear the current header</span>
<a name="l8826"><span class="linenum">8826</span></a>              panel.appendToHeader(_header);
<a name="l8827"><span class="linenum">8827</span></a>              _header.appendChild(_close);
<a name="l8828"><span class="linenum">8828</span></a>              _header.appendChild(_knob);
<a name="l8829"><span class="linenum">8829</span></a>              panel.<a class="function" onClick="logFunction('setBody')" href="../../../../../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>(' '); <span class="comment">//Clear the current body</span>
<a name="l8830"><span class="linenum">8830</span></a>              panel.<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(' '); <span class="comment">//Clear the current footer</span>
<a name="l8831"><span class="linenum">8831</span></a>              panel.appendToBody(body); <span class="comment">//Append the new DOM node to it</span>
<a name="l8832"><span class="linenum">8832</span></a>  
<a name="l8833"><span class="linenum">8833</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(panel.element, 'click', function(ev) {
<a name="l8834"><span class="linenum">8834</span></a>                  Event.stopPropagation(ev);
<a name="l8835"><span class="linenum">8835</span></a>              });
<a name="l8836"><span class="linenum">8836</span></a>  
<a name="l8837"><span class="linenum">8837</span></a>              var fireShowEvent = function() {
<a name="l8838"><span class="linenum">8838</span></a>                  panel.bringToTop();
<a name="l8839"><span class="linenum">8839</span></a>                  YAHOO.util.Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(this.element, 'display', 'block');
<a name="l8840"><span class="linenum">8840</span></a>                  this._handleWindowInputs(false);
<a name="l8841"><span class="linenum">8841</span></a>              };
<a name="l8842"><span class="linenum">8842</span></a>              panel.showEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(fireShowEvent, this, true);
<a name="l8843"><span class="linenum">8843</span></a>              panel.hideEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function() {
<a name="l8844"><span class="linenum">8844</span></a>                  this._handleWindowInputs(true);
<a name="l8845"><span class="linenum">8845</span></a>              }, this, true);
<a name="l8846"><span class="linenum">8846</span></a>              panel.renderEvent.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function() {
<a name="l8847"><span class="linenum">8847</span></a>                  this._renderInsertImageWindow();
<a name="l8848"><span class="linenum">8848</span></a>                  this._renderCreateLinkWindow();
<a name="l8849"><span class="linenum">8849</span></a>                  this.fireEvent('windowRender', { type: 'windowRender', panel: panel });
<a name="l8850"><span class="linenum">8850</span></a>                  this._handleWindowInputs(true);
<a name="l8851"><span class="linenum">8851</span></a>              }, this, true);
<a name="l8852"><span class="linenum">8852</span></a>  
<a name="l8853"><span class="linenum">8853</span></a>              if (this.DOMReady) {
<a name="l8854"><span class="linenum">8854</span></a>                  this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('render')" href="../../../../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>();
<a name="l8855"><span class="linenum">8855</span></a>              } else {
<a name="l8856"><span class="linenum">8856</span></a>                  Event.<a class="function" onClick="logFunction('onDOMReady')" href="../../../../../../_functions/ondomready.html" onMouseOver="funcPopup(event,'ondomready')">onDOMReady</a>(function() {
<a name="l8857"><span class="linenum">8857</span></a>                      this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('render')" href="../../../../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>();
<a name="l8858"><span class="linenum">8858</span></a>                  }, this, true);
<a name="l8859"><span class="linenum">8859</span></a>              }
<a name="l8860"><span class="linenum">8860</span></a>              return this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel');
<a name="l8861"><span class="linenum">8861</span></a>          },
<a name="l8862"><span class="linenum">8862</span></a>          <span class="comment">/**</span>
<a name="l8863"><span class="linenum">8863</span></a>  <span class="comment">        * @method _handleWindowInputs</span>
<a name="l8864"><span class="linenum">8864</span></a>  <span class="comment">        * @param {Boolean} disable The state to set all inputs in all Editor windows to. Defaults to: false.</span>
<a name="l8865"><span class="linenum">8865</span></a>  <span class="comment">        * @description Disables/Enables all fields inside Editor windows. Used in show/hide events to keep window fields from submitting when the parent form is submitted.</span>
<a name="l8866"><span class="linenum">8866</span></a>  <span class="comment">        */</span>
<a name="l8867"><span class="linenum">8867</span></a>          _handleWindowInputs: function(disable) {
<a name="l8868"><span class="linenum">8868</span></a>              if (!Lang.isBoolean(disable)) {
<a name="l8869"><span class="linenum">8869</span></a>                  disable = false;
<a name="l8870"><span class="linenum">8870</span></a>              }
<a name="l8871"><span class="linenum">8871</span></a>              var inputs = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').element.getElementsByTagName('input');
<a name="l8872"><span class="linenum">8872</span></a>              for (var i = 0; i &lt; inputs.length; i++) {
<a name="l8873"><span class="linenum">8873</span></a>                  try {
<a name="l8874"><span class="linenum">8874</span></a>                      inputs[i].disabled = disable;
<a name="l8875"><span class="linenum">8875</span></a>                  } catch (e) {}
<a name="l8876"><span class="linenum">8876</span></a>              }
<a name="l8877"><span class="linenum">8877</span></a>          },
<a name="l8878"><span class="linenum">8878</span></a>          <span class="comment">/**</span>
<a name="l8879"><span class="linenum">8879</span></a>  <span class="comment">        * @method openWindow</span>
<a name="l8880"><span class="linenum">8880</span></a>  <span class="comment">        * @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;YAHOO.widget.EditorWindow&lt;/a&gt;} win A &lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;YAHOO.widget.EditorWindow&lt;/a&gt; instance</span>
<a name="l8881"><span class="linenum">8881</span></a>  <span class="comment">        * @description Opens a new &quot;window/panel&quot;</span>
<a name="l8882"><span class="linenum">8882</span></a>  <span class="comment">        */</span>
<a name="l8883"><span class="linenum">8883</span></a>          openWindow: function(win) {
<a name="l8884"><span class="linenum">8884</span></a>              
<a name="l8885"><span class="linenum">8885</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('openWindow: ' + win.name, 'info', 'Editor');
<a name="l8886"><span class="linenum">8886</span></a>              var self = this;
<a name="l8887"><span class="linenum">8887</span></a>              window.<a class="function" onClick="logFunction('setTimeout')" href="../../../../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l8888"><span class="linenum">8888</span></a>                  self.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', true); <span class="comment">//Disable the toolbar when an editor window is open..</span>
<a name="l8889"><span class="linenum">8889</span></a>              }, 10);
<a name="l8890"><span class="linenum">8890</span></a>              Event.<a class="function" onClick="logFunction('on')" href="../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(document, 'keydown', this._closeWindow, this, true);
<a name="l8891"><span class="linenum">8891</span></a>              
<a name="l8892"><span class="linenum">8892</span></a>              if (this.currentWindow) {
<a name="l8893"><span class="linenum">8893</span></a>                  this.closeWindow();
<a name="l8894"><span class="linenum">8894</span></a>              }
<a name="l8895"><span class="linenum">8895</span></a>              
<a name="l8896"><span class="linenum">8896</span></a>              var xy = Dom.getXY(this.currentElement[0]),
<a name="l8897"><span class="linenum">8897</span></a>              elXY = Dom.getXY(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')),
<a name="l8898"><span class="linenum">8898</span></a>              panel = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel'),
<a name="l8899"><span class="linenum">8899</span></a>              newXY = [(xy[0] + elXY[0] - 20), (xy[1] + elXY[1] + 10)],
<a name="l8900"><span class="linenum">8900</span></a>              wWidth = (parseInt(win.attrs.width, 10) / 2),
<a name="l8901"><span class="linenum">8901</span></a>              align = 'center',
<a name="l8902"><span class="linenum">8902</span></a>              body = null;
<a name="l8903"><span class="linenum">8903</span></a>  
<a name="l8904"><span class="linenum">8904</span></a>              this.fireEvent('beforeOpenWindow', { type: 'beforeOpenWindow', win: win, panel: panel });
<a name="l8905"><span class="linenum">8905</span></a>  
<a name="l8906"><span class="linenum">8906</span></a>              var form = panel.editor_form;
<a name="l8907"><span class="linenum">8907</span></a>              
<a name="l8908"><span class="linenum">8908</span></a>              var wins = this._windows;
<a name="l8909"><span class="linenum">8909</span></a>              for (var b in wins) {
<a name="l8910"><span class="linenum">8910</span></a>                  if (Lang.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(wins, b)) {
<a name="l8911"><span class="linenum">8911</span></a>                      if (wins[b] &amp;&amp; wins[b].body) {
<a name="l8912"><span class="linenum">8912</span></a>                          if (b == win.name) {
<a name="l8913"><span class="linenum">8913</span></a>                              Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(wins[b].body, 'display', 'block');
<a name="l8914"><span class="linenum">8914</span></a>                          } else {
<a name="l8915"><span class="linenum">8915</span></a>                              Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(wins[b].body, 'display', 'none');
<a name="l8916"><span class="linenum">8916</span></a>                          }
<a name="l8917"><span class="linenum">8917</span></a>                      }
<a name="l8918"><span class="linenum">8918</span></a>                  }
<a name="l8919"><span class="linenum">8919</span></a>              }
<a name="l8920"><span class="linenum">8920</span></a>              
<a name="l8921"><span class="linenum">8921</span></a>              if (this._windows[win.name].body) {
<a name="l8922"><span class="linenum">8922</span></a>                  Dom.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>(this._windows[win.name].body, 'display', 'block');
<a name="l8923"><span class="linenum">8923</span></a>                  form.appendChild(this._windows[win.name].body);
<a name="l8924"><span class="linenum">8924</span></a>              } else {
<a name="l8925"><span class="linenum">8925</span></a>                  if (Lang.isObject(win.body)) { //Assume it's a reference
<a name="l8926"><span class="linenum">8926</span></a>                      form.appendChild(win.body);
<a name="l8927"><span class="linenum">8927</span></a>                  } else { //Assume it's a string
<a name="l8928"><span class="linenum">8928</span></a>                      var _tmp = document.<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('div');
<a name="l8929"><span class="linenum">8929</span></a>                      _tmp.innerHTML = win.body;
<a name="l8930"><span class="linenum">8930</span></a>                      form.appendChild(_tmp);
<a name="l8931"><span class="linenum">8931</span></a>                  }
<a name="l8932"><span class="linenum">8932</span></a>              }
<a name="l8933"><span class="linenum">8933</span></a>              panel.editor_header.firstChild.innerHTML = win.header;
<a name="l8934"><span class="linenum">8934</span></a>              if (win.footer !== null) {
<a name="l8935"><span class="linenum">8935</span></a>                  panel.<a class="function" onClick="logFunction('setFooter')" href="../../../../../../_functions/setfooter.html" onMouseOver="funcPopup(event,'setfooter')">setFooter</a>(win.footer);
<a name="l8936"><span class="linenum">8936</span></a>              }
<a name="l8937"><span class="linenum">8937</span></a>              panel.cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('width', win.attrs.width);
<a name="l8938"><span class="linenum">8938</span></a>  
<a name="l8939"><span class="linenum">8939</span></a>              this.currentWindow = win;
<a name="l8940"><span class="linenum">8940</span></a>              this.moveWindow(true);
<a name="l8941"><span class="linenum">8941</span></a>              panel.<a class="function" onClick="logFunction('show')" href="../../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l8942"><span class="linenum">8942</span></a>              this.fireEvent('afterOpenWindow', { type: 'afterOpenWindow', win: win, panel: panel });
<a name="l8943"><span class="linenum">8943</span></a>          },
<a name="l8944"><span class="linenum">8944</span></a>          <span class="comment">/**</span>
<a name="l8945"><span class="linenum">8945</span></a>  <span class="comment">        * @method moveWindow</span>
<a name="l8946"><span class="linenum">8946</span></a>  <span class="comment">        * @param {Boolean} force Boolean to tell it to move but not use any animation (Usually done the first time the window is loaded.)</span>
<a name="l8947"><span class="linenum">8947</span></a>  <span class="comment">        * @description Realign the window with the currentElement and reposition the knob above the panel.</span>
<a name="l8948"><span class="linenum">8948</span></a>  <span class="comment">        */</span>
<a name="l8949"><span class="linenum">8949</span></a>          moveWindow: function(force) {
<a name="l8950"><span class="linenum">8950</span></a>              if (!this.currentWindow) {
<a name="l8951"><span class="linenum">8951</span></a>                  return false;
<a name="l8952"><span class="linenum">8952</span></a>              }
<a name="l8953"><span class="linenum">8953</span></a>              var win = this.currentWindow,
<a name="l8954"><span class="linenum">8954</span></a>                  xy = Dom.getXY(this.currentElement[0]),
<a name="l8955"><span class="linenum">8955</span></a>                  elXY = Dom.getXY(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element')),
<a name="l8956"><span class="linenum">8956</span></a>                  panel = this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel'),
<a name="l8957"><span class="linenum">8957</span></a>  <span class="comment">                //newXY = [(xy[0] + elXY[0] - 20), (xy[1] + elXY[1] + 10)],</span>
<a name="l8958"><span class="linenum">8958</span></a>                  newXY = [(xy[0] + elXY[0]), (xy[1] + elXY[1])],
<a name="l8959"><span class="linenum">8959</span></a>                  wWidth = (parseInt(win.attrs.width, 10) / 2),
<a name="l8960"><span class="linenum">8960</span></a>                  align = 'center',
<a name="l8961"><span class="linenum">8961</span></a>                  orgXY = panel.cfg.<a class="function" onClick="logFunction('getProperty')" href="../../../../../../_functions/getproperty.html" onMouseOver="funcPopup(event,'getproperty')">getProperty</a>('xy') || [0,0],
<a name="l8962"><span class="linenum">8962</span></a>                  _knob = panel.editor_knob,
<a name="l8963"><span class="linenum">8963</span></a>                  xDiff = 0,
<a name="l8964"><span class="linenum">8964</span></a>                  yDiff = 0,
<a name="l8965"><span class="linenum">8965</span></a>                  anim = false;
<a name="l8966"><span class="linenum">8966</span></a>  
<a name="l8967"><span class="linenum">8967</span></a>  
<a name="l8968"><span class="linenum">8968</span></a>              newXY[0] = ((newXY[0] - wWidth) + 20);
<a name="l8969"><span class="linenum">8969</span></a>  <span class="comment">            //Account for the Scroll bars in a scrolled editor window.</span>
<a name="l8970"><span class="linenum">8970</span></a>              newXY[0] = newXY[0] - Dom.getDocumentScrollLeft(this._getDoc());
<a name="l8971"><span class="linenum">8971</span></a>              newXY[1] = newXY[1] - Dom.getDocumentScrollTop(this._getDoc());
<a name="l8972"><span class="linenum">8972</span></a>              
<a name="l8973"><span class="linenum">8973</span></a>              if (this._isElement(this.currentElement[0], 'img')) {
<a name="l8974"><span class="linenum">8974</span></a>                  if (this.currentElement[0].src.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('blankimage')) != -1) {
<a name="l8975"><span class="linenum">8975</span></a>                      newXY[0] = (newXY[0] + (75 / 2)); <span class="comment">//Placeholder size</span>
<a name="l8976"><span class="linenum">8976</span></a>                      newXY[1] = (newXY[1] + 75); <span class="comment">//Placeholder sizea</span>
<a name="l8977"><span class="linenum">8977</span></a>                  } else {
<a name="l8978"><span class="linenum">8978</span></a>                      var w = parseInt(this.currentElement[0].width, 10);
<a name="l8979"><span class="linenum">8979</span></a>                      var h = parseInt(this.currentElement[0].height, 10);
<a name="l8980"><span class="linenum">8980</span></a>                      newXY[0] = (newXY[0] + (w / 2));
<a name="l8981"><span class="linenum">8981</span></a>                      newXY[1] = (newXY[1] + h);
<a name="l8982"><span class="linenum">8982</span></a>                  }
<a name="l8983"><span class="linenum">8983</span></a>                  newXY[1] = newXY[1] + 15;
<a name="l8984"><span class="linenum">8984</span></a>              } else {
<a name="l8985"><span class="linenum">8985</span></a>                  var fs = Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(this.currentElement[0], 'fontSize');
<a name="l8986"><span class="linenum">8986</span></a>                  if (fs &amp;&amp; fs.indexOf &amp;&amp; fs.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>('px') != -1) {
<a name="l8987"><span class="linenum">8987</span></a>                      newXY[1] = newXY[1] + parseInt(Dom.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>(this.currentElement[0], 'fontSize'), 10) + 5;
<a name="l8988"><span class="linenum">8988</span></a>                  } else {
<a name="l8989"><span class="linenum">8989</span></a>                      newXY[1] = newXY[1] + 20;
<a name="l8990"><span class="linenum">8990</span></a>                  }
<a name="l8991"><span class="linenum">8991</span></a>              }
<a name="l8992"><span class="linenum">8992</span></a>              if (newXY[0] &lt; elXY[0]) {
<a name="l8993"><span class="linenum">8993</span></a>                  newXY[0] = elXY[0] + 5;
<a name="l8994"><span class="linenum">8994</span></a>                  align = 'left';
<a name="l8995"><span class="linenum">8995</span></a>              }
<a name="l8996"><span class="linenum">8996</span></a>  
<a name="l8997"><span class="linenum">8997</span></a>              if ((newXY[0] + (wWidth * 2)) &gt; (elXY[0] + parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').clientWidth, 10))) {
<a name="l8998"><span class="linenum">8998</span></a>                  newXY[0] = ((elXY[0] + parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('iframe').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element').clientWidth, 10)) - (wWidth * 2) - 5);
<a name="l8999"><span class="linenum">8999</span></a>                  align = 'right';
<a name="l9000"><span class="linenum">9000</span></a>              }
<a name="l9001"><span class="linenum">9001</span></a>              
<a name="l9002"><span class="linenum">9002</span></a>              try {
<a name="l9003"><span class="linenum">9003</span></a>                  xDiff = (newXY[0] - orgXY[0]);
<a name="l9004"><span class="linenum">9004</span></a>                  yDiff = (newXY[1] - orgXY[1]);
<a name="l9005"><span class="linenum">9005</span></a>              } catch (e) {}
<a name="l9006"><span class="linenum">9006</span></a>  
<a name="l9007"><span class="linenum">9007</span></a>  
<a name="l9008"><span class="linenum">9008</span></a>              var iTop = elXY[1] + parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('height'), 10);
<a name="l9009"><span class="linenum">9009</span></a>              var iLeft = elXY[0] + parseInt(this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('width'), 10);
<a name="l9010"><span class="linenum">9010</span></a>              if (newXY[1] &gt; iTop) {
<a name="l9011"><span class="linenum">9011</span></a>                  newXY[1] = iTop;
<a name="l9012"><span class="linenum">9012</span></a>              }
<a name="l9013"><span class="linenum">9013</span></a>              if (newXY[0] &gt; iLeft) {
<a name="l9014"><span class="linenum">9014</span></a>                  newXY[0] = (iLeft / 2);
<a name="l9015"><span class="linenum">9015</span></a>              }
<a name="l9016"><span class="linenum">9016</span></a>              
<a name="l9017"><span class="linenum">9017</span></a>  <span class="comment">            //Convert negative numbers to positive so we can get the difference in distance</span>
<a name="l9018"><span class="linenum">9018</span></a>              xDiff = ((xDiff &lt; 0) ? (xDiff * -1) : xDiff);
<a name="l9019"><span class="linenum">9019</span></a>              yDiff = ((yDiff &lt; 0) ? (yDiff * -1) : yDiff);
<a name="l9020"><span class="linenum">9020</span></a>  
<a name="l9021"><span class="linenum">9021</span></a>              if (((xDiff &gt; 10) || (yDiff &gt; 10)) || force) { //Only move the window if it's supposed to move more than 10px or force was passed (new window)
<a name="l9022"><span class="linenum">9022</span></a>                  var _knobLeft = 0,
<a name="l9023"><span class="linenum">9023</span></a>                      elW = 0;
<a name="l9024"><span class="linenum">9024</span></a>  
<a name="l9025"><span class="linenum">9025</span></a>                  if (this.currentElement[0].width) {
<a name="l9026"><span class="linenum">9026</span></a>                      elW = (parseInt(this.currentElement[0].width, 10) / 2);
<a name="l9027"><span class="linenum">9027</span></a>                  }
<a name="l9028"><span class="linenum">9028</span></a>  
<a name="l9029"><span class="linenum">9029</span></a>                  var leftOffset = xy[0] + elXY[0] + elW;
<a name="l9030"><span class="linenum">9030</span></a>                  _knobLeft = leftOffset - newXY[0];
<a name="l9031"><span class="linenum">9031</span></a>  <span class="comment">                //Check to see if the knob will go off either side &amp; reposition it</span>
<a name="l9032"><span class="linenum">9032</span></a>                  if (_knobLeft &gt; (parseInt(win.attrs.width, 10) - 1)) {
<a name="l9033"><span class="linenum">9033</span></a>                      _knobLeft = ((parseInt(win.attrs.width, 10) - 30) - 1);
<a name="l9034"><span class="linenum">9034</span></a>                  } else if (_knobLeft &lt; 40) {
<a name="l9035"><span class="linenum">9035</span></a>                      _knobLeft = 1;
<a name="l9036"><span class="linenum">9036</span></a>                  }
<a name="l9037"><span class="linenum">9037</span></a>                  if (isNaN(_knobLeft)) {
<a name="l9038"><span class="linenum">9038</span></a>                      _knobLeft = 1;
<a name="l9039"><span class="linenum">9039</span></a>                  }
<a name="l9040"><span class="linenum">9040</span></a>                  if (force) {
<a name="l9041"><span class="linenum">9041</span></a>                      if (_knob) {
<a name="l9042"><span class="linenum">9042</span></a>                          _knob.style.left = _knobLeft + 'px';
<a name="l9043"><span class="linenum">9043</span></a>                      }
<a name="l9044"><span class="linenum">9044</span></a>  <span class="comment">                    //Removed Animation from a forced move..</span>
<a name="l9045"><span class="linenum">9045</span></a>                      panel.cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('xy', newXY);
<a name="l9046"><span class="linenum">9046</span></a>                  } else {
<a name="l9047"><span class="linenum">9047</span></a>                      if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('animate')) {
<a name="l9048"><span class="linenum">9048</span></a>                          anim = new YAHOO.util.Anim(panel.element, {}, 0.5, YAHOO.util.Easing.easeOut);
<a name="l9049"><span class="linenum">9049</span></a>                          anim.attributes = {
<a name="l9050"><span class="linenum">9050</span></a>                              top: {
<a name="l9051"><span class="linenum">9051</span></a>                                  to: newXY[1]
<a name="l9052"><span class="linenum">9052</span></a>                              },
<a name="l9053"><span class="linenum">9053</span></a>                              left: {
<a name="l9054"><span class="linenum">9054</span></a>                                  to: newXY[0]
<a name="l9055"><span class="linenum">9055</span></a>                              }
<a name="l9056"><span class="linenum">9056</span></a>                          };
<a name="l9057"><span class="linenum">9057</span></a>                          anim.onComplete.<a class="function" onClick="logFunction('subscribe')" href="../../../../../../_functions/subscribe.html" onMouseOver="funcPopup(event,'subscribe')">subscribe</a>(function() {
<a name="l9058"><span class="linenum">9058</span></a>                              panel.cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('xy', newXY);
<a name="l9059"><span class="linenum">9059</span></a>                          });
<a name="l9060"><span class="linenum">9060</span></a>  <span class="comment">                        //We have to animate the iframe shim at the same time as the panel or we get scrollbar bleed ..</span>
<a name="l9061"><span class="linenum">9061</span></a>                          var iframeAnim = new YAHOO.util.Anim(panel.iframe, anim.attributes, 0.5, YAHOO.util.Easing.easeOut);
<a name="l9062"><span class="linenum">9062</span></a>  
<a name="l9063"><span class="linenum">9063</span></a>                          var _knobAnim = new YAHOO.util.Anim(_knob, {
<a name="l9064"><span class="linenum">9064</span></a>                              left: {
<a name="l9065"><span class="linenum">9065</span></a>                                  to: _knobLeft
<a name="l9066"><span class="linenum">9066</span></a>                              }
<a name="l9067"><span class="linenum">9067</span></a>                          }, 0.6, YAHOO.util.Easing.easeOut);
<a name="l9068"><span class="linenum">9068</span></a>                          anim.animate();
<a name="l9069"><span class="linenum">9069</span></a>                          iframeAnim.animate();
<a name="l9070"><span class="linenum">9070</span></a>                          _knobAnim.animate();
<a name="l9071"><span class="linenum">9071</span></a>                      } else {
<a name="l9072"><span class="linenum">9072</span></a>                          _knob.style.left = _knobLeft + 'px';
<a name="l9073"><span class="linenum">9073</span></a>                          panel.cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('xy', newXY);
<a name="l9074"><span class="linenum">9074</span></a>                      }
<a name="l9075"><span class="linenum">9075</span></a>                  }
<a name="l9076"><span class="linenum">9076</span></a>              }
<a name="l9077"><span class="linenum">9077</span></a>          },
<a name="l9078"><span class="linenum">9078</span></a>          <span class="comment">/**</span>
<a name="l9079"><span class="linenum">9079</span></a>  <span class="comment">        * @private</span>
<a name="l9080"><span class="linenum">9080</span></a>  <span class="comment">        * @method _closeWindow</span>
<a name="l9081"><span class="linenum">9081</span></a>  <span class="comment">        * @description Close the currently open EditorWindow with the Escape key.</span>
<a name="l9082"><span class="linenum">9082</span></a>  <span class="comment">        * @param {Event} ev The keypress Event that we are trapping</span>
<a name="l9083"><span class="linenum">9083</span></a>  <span class="comment">        */</span>
<a name="l9084"><span class="linenum">9084</span></a>          _closeWindow: function(ev) {
<a name="l9085"><span class="linenum">9085</span></a>  <span class="comment">            //if ((ev.charCode == 87) &amp;&amp; ev.shiftKey &amp;&amp; ev.ctrlKey) {</span>
<a name="l9086"><span class="linenum">9086</span></a>              if (this._checkKey(this._keyMap.CLOSE_WINDOW, ev)) {            
<a name="l9087"><span class="linenum">9087</span></a>                  if (this.currentWindow) {
<a name="l9088"><span class="linenum">9088</span></a>                      this.closeWindow();
<a name="l9089"><span class="linenum">9089</span></a>                  }
<a name="l9090"><span class="linenum">9090</span></a>              }
<a name="l9091"><span class="linenum">9091</span></a>          },
<a name="l9092"><span class="linenum">9092</span></a>          <span class="comment">/**</span>
<a name="l9093"><span class="linenum">9093</span></a>  <span class="comment">        * @method closeWindow</span>
<a name="l9094"><span class="linenum">9094</span></a>  <span class="comment">        * @description Close the currently open EditorWindow.</span>
<a name="l9095"><span class="linenum">9095</span></a>  <span class="comment">        */</span>
<a name="l9096"><span class="linenum">9096</span></a>          closeWindow: function(keepOpen) {
<a name="l9097"><span class="linenum">9097</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('closeWindow: ' + this.currentWindow.name, 'info', 'Editor');
<a name="l9098"><span class="linenum">9098</span></a>              this.fireEvent('window' + this.currentWindow.name + 'Close', { type: 'window' + this.currentWindow.name + 'Close', win: this.currentWindow, el: this.currentElement[0] });
<a name="l9099"><span class="linenum">9099</span></a>              this.fireEvent('closeWindow', { type: 'closeWindow', win: this.currentWindow });
<a name="l9100"><span class="linenum">9100</span></a>              this.currentWindow = null;
<a name="l9101"><span class="linenum">9101</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').<a class="function" onClick="logFunction('hide')" href="../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l9102"><span class="linenum">9102</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').cfg.<a class="function" onClick="logFunction('setProperty')" href="../../../../../../_functions/setproperty.html" onMouseOver="funcPopup(event,'setproperty')">setProperty</a>('xy', [-900,-900]);
<a name="l9103"><span class="linenum">9103</span></a>              this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('panel').syncIframe(); <span class="comment">//Needed to move the iframe with the hidden panel</span>
<a name="l9104"><span class="linenum">9104</span></a>              this.unsubscribeAll('afterExecCommand');
<a name="l9105"><span class="linenum">9105</span></a>              this.toolbar.<a class="function" onClick="logFunction('set')" href="../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('disabled', false); <span class="comment">//enable the toolbar now that the window is closed</span>
<a name="l9106"><span class="linenum">9106</span></a>              this.toolbar.resetAllButtons();
<a name="l9107"><span class="linenum">9107</span></a>              this.<a class="function" onClick="logFunction('focus')" href="../../../../../../_functions/focus.html" onMouseOver="funcPopup(event,'focus')">focus</a>();
<a name="l9108"><span class="linenum">9108</span></a>              Event.<a class="function" onClick="logFunction('removeListener')" href="../../../../../../_functions/removelistener.html" onMouseOver="funcPopup(event,'removelistener')">removeListener</a>(document, 'keydown', this._closeWindow);
<a name="l9109"><span class="linenum">9109</span></a>          },
<a name="l9110"><span class="linenum">9110</span></a>  
<a name="l9111"><span class="linenum">9111</span></a>  <span class="comment">        /* {{{  Command Overrides - These commands are only over written when we are using the advanced version */</span>
<a name="l9112"><span class="linenum">9112</span></a>          
<a name="l9113"><span class="linenum">9113</span></a>          <span class="comment">/**</span>
<a name="l9114"><span class="linenum">9114</span></a>  <span class="comment">        * @method cmd_undo</span>
<a name="l9115"><span class="linenum">9115</span></a>  <span class="comment">        * @description Pulls an item from the Undo stack and updates the Editor</span>
<a name="l9116"><span class="linenum">9116</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9117"><span class="linenum">9117</span></a>  <span class="comment">        */</span>
<a name="l9118"><span class="linenum">9118</span></a>          cmd_undo: function(value) {
<a name="l9119"><span class="linenum">9119</span></a>              if (this._hasUndoLevel()) {
<a name="l9120"><span class="linenum">9120</span></a>                  var c_html = this.getEditorHTML(), html;
<a name="l9121"><span class="linenum">9121</span></a>                  if (!this._undoLevel) {
<a name="l9122"><span class="linenum">9122</span></a>                      this._undoLevel = this._undoCache.length;
<a name="l9123"><span class="linenum">9123</span></a>                  }
<a name="l9124"><span class="linenum">9124</span></a>                  this._undoLevel = (this._undoLevel - 1);
<a name="l9125"><span class="linenum">9125</span></a>                  if (this._undoCache[this._undoLevel]) {
<a name="l9126"><span class="linenum">9126</span></a>                      html = this._getUndo(this._undoLevel);
<a name="l9127"><span class="linenum">9127</span></a>                      if (html != c_html) {
<a name="l9128"><span class="linenum">9128</span></a>                          this.setEditorHTML(html);
<a name="l9129"><span class="linenum">9129</span></a>                      } else {
<a name="l9130"><span class="linenum">9130</span></a>                          this._undoLevel = (this._undoLevel - 1);
<a name="l9131"><span class="linenum">9131</span></a>                          html = this._getUndo(this._undoLevel);
<a name="l9132"><span class="linenum">9132</span></a>                          if (html != c_html) {
<a name="l9133"><span class="linenum">9133</span></a>                              this.setEditorHTML(html);
<a name="l9134"><span class="linenum">9134</span></a>                          }
<a name="l9135"><span class="linenum">9135</span></a>                      }
<a name="l9136"><span class="linenum">9136</span></a>                  } else {
<a name="l9137"><span class="linenum">9137</span></a>                      this._undoLevel = 0;
<a name="l9138"><span class="linenum">9138</span></a>                      this.toolbar.disableButton('undo');
<a name="l9139"><span class="linenum">9139</span></a>                  }
<a name="l9140"><span class="linenum">9140</span></a>              }
<a name="l9141"><span class="linenum">9141</span></a>              return [false];
<a name="l9142"><span class="linenum">9142</span></a>          },
<a name="l9143"><span class="linenum">9143</span></a>  
<a name="l9144"><span class="linenum">9144</span></a>          <span class="comment">/**</span>
<a name="l9145"><span class="linenum">9145</span></a>  <span class="comment">        * @method cmd_redo</span>
<a name="l9146"><span class="linenum">9146</span></a>  <span class="comment">        * @description Pulls an item from the Undo stack and updates the Editor</span>
<a name="l9147"><span class="linenum">9147</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9148"><span class="linenum">9148</span></a>  <span class="comment">        */</span>
<a name="l9149"><span class="linenum">9149</span></a>          cmd_redo: function(value) {
<a name="l9150"><span class="linenum">9150</span></a>              this._undoLevel = this._undoLevel + 1;
<a name="l9151"><span class="linenum">9151</span></a>              if (this._undoLevel &gt;= this._undoCache.length) {
<a name="l9152"><span class="linenum">9152</span></a>                  this._undoLevel = this._undoCache.length;
<a name="l9153"><span class="linenum">9153</span></a>              }
<a name="l9154"><span class="linenum">9154</span></a>              YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>(this._undoLevel + ' :: ' + this._undoCache.length, 'warn', 'SimpleEditor');
<a name="l9155"><span class="linenum">9155</span></a>              if (this._undoCache[this._undoLevel]) {
<a name="l9156"><span class="linenum">9156</span></a>                  var html = this._getUndo(this._undoLevel);
<a name="l9157"><span class="linenum">9157</span></a>                  this.setEditorHTML(html);
<a name="l9158"><span class="linenum">9158</span></a>              } else {
<a name="l9159"><span class="linenum">9159</span></a>                  this.toolbar.disableButton('redo');
<a name="l9160"><span class="linenum">9160</span></a>              }
<a name="l9161"><span class="linenum">9161</span></a>              return [false];
<a name="l9162"><span class="linenum">9162</span></a>          },       
<a name="l9163"><span class="linenum">9163</span></a>          
<a name="l9164"><span class="linenum">9164</span></a>          <span class="comment">/**</span>
<a name="l9165"><span class="linenum">9165</span></a>  <span class="comment">        * @method cmd_heading</span>
<a name="l9166"><span class="linenum">9166</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9167"><span class="linenum">9167</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('heading') is used.</span>
<a name="l9168"><span class="linenum">9168</span></a>  <span class="comment">        */</span>
<a name="l9169"><span class="linenum">9169</span></a>          cmd_heading: function(value) {
<a name="l9170"><span class="linenum">9170</span></a>              var exec = true,
<a name="l9171"><span class="linenum">9171</span></a>                  el = null,
<a name="l9172"><span class="linenum">9172</span></a>                  action = 'heading',
<a name="l9173"><span class="linenum">9173</span></a>                  _sel = this._getSelection(),
<a name="l9174"><span class="linenum">9174</span></a>                  _selEl = this._getSelectedElement();
<a name="l9175"><span class="linenum">9175</span></a>  
<a name="l9176"><span class="linenum">9176</span></a>              if (_selEl) {
<a name="l9177"><span class="linenum">9177</span></a>                  _sel = _selEl;
<a name="l9178"><span class="linenum">9178</span></a>              }
<a name="l9179"><span class="linenum">9179</span></a>              
<a name="l9180"><span class="linenum">9180</span></a>              if (this.browser.ie) {
<a name="l9181"><span class="linenum">9181</span></a>                  action = 'formatblock';
<a name="l9182"><span class="linenum">9182</span></a>              }
<a name="l9183"><span class="linenum">9183</span></a>              if (value == this.STR_NONE) {
<a name="l9184"><span class="linenum">9184</span></a>                  if ((_sel &amp;&amp; _sel.tagName &amp;&amp; (_sel.tagName.toLowerCase().<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0,1) == 'h')) || (_sel &amp;&amp; _sel.parentNode &amp;&amp; _sel.parentNode.tagName &amp;&amp; (_sel.parentNode.tagName.toLowerCase().<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0,1) == 'h'))) {
<a name="l9185"><span class="linenum">9185</span></a>                      if (_sel.parentNode.tagName.toLowerCase().<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0,1) == 'h') {
<a name="l9186"><span class="linenum">9186</span></a>                          _sel = _sel.parentNode;
<a name="l9187"><span class="linenum">9187</span></a>                      }
<a name="l9188"><span class="linenum">9188</span></a>                      if (this._isElement(_sel, 'html')) {
<a name="l9189"><span class="linenum">9189</span></a>                          return [false];
<a name="l9190"><span class="linenum">9190</span></a>                      }
<a name="l9191"><span class="linenum">9191</span></a>                      el = this._swapEl(_selEl, 'span', function(el) {
<a name="l9192"><span class="linenum">9192</span></a>                          el.className = 'yui-non';
<a name="l9193"><span class="linenum">9193</span></a>                      });
<a name="l9194"><span class="linenum">9194</span></a>                      this._selectNode(el);
<a name="l9195"><span class="linenum">9195</span></a>                      this.currentElement[0] = el;
<a name="l9196"><span class="linenum">9196</span></a>                  }
<a name="l9197"><span class="linenum">9197</span></a>                  exec = false;
<a name="l9198"><span class="linenum">9198</span></a>              } else {
<a name="l9199"><span class="linenum">9199</span></a>                  if (this._isElement(_selEl, 'h1') || this._isElement(_selEl, 'h2') || this._isElement(_selEl, 'h3') || this._isElement(_selEl, 'h4') || this._isElement(_selEl, 'h5') || this._isElement(_selEl, 'h6')) {
<a name="l9200"><span class="linenum">9200</span></a>                      el = this._swapEl(_selEl, value);
<a name="l9201"><span class="linenum">9201</span></a>                      this._selectNode(el);
<a name="l9202"><span class="linenum">9202</span></a>                      this.currentElement[0] = el;
<a name="l9203"><span class="linenum">9203</span></a>                  } else {
<a name="l9204"><span class="linenum">9204</span></a>                      this._createCurrentElement(value);
<a name="l9205"><span class="linenum">9205</span></a>                      this._selectNode(this.currentElement[0]);
<a name="l9206"><span class="linenum">9206</span></a>                  }
<a name="l9207"><span class="linenum">9207</span></a>                  exec = false;
<a name="l9208"><span class="linenum">9208</span></a>              }
<a name="l9209"><span class="linenum">9209</span></a>              return [exec, action];
<a name="l9210"><span class="linenum">9210</span></a>          },
<a name="l9211"><span class="linenum">9211</span></a>          <span class="comment">/**</span>
<a name="l9212"><span class="linenum">9212</span></a>  <span class="comment">        * @method cmd_hiddenelements</span>
<a name="l9213"><span class="linenum">9213</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9214"><span class="linenum">9214</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('hiddenelements') is used.</span>
<a name="l9215"><span class="linenum">9215</span></a>  <span class="comment">        */</span>
<a name="l9216"><span class="linenum">9216</span></a>          cmd_hiddenelements: function(value) {
<a name="l9217"><span class="linenum">9217</span></a>              if (this._showingHiddenElements) {
<a name="l9218"><span class="linenum">9218</span></a>  <span class="comment">                //Don't auto highlight the hidden button</span>
<a name="l9219"><span class="linenum">9219</span></a>                  this._lastButton = null;
<a name="l9220"><span class="linenum">9220</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Enabling hidden CSS File', 'info', 'SimpleEditor');
<a name="l9221"><span class="linenum">9221</span></a>                  this._showingHiddenElements = false;
<a name="l9222"><span class="linenum">9222</span></a>                  this.toolbar.deselectButton('hiddenelements');
<a name="l9223"><span class="linenum">9223</span></a>                  Dom.removeClass(this._getDoc().body, this.CLASS_HIDDEN);
<a name="l9224"><span class="linenum">9224</span></a>              } else {
<a name="l9225"><span class="linenum">9225</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Disabling hidden CSS File', 'info', 'SimpleEditor');
<a name="l9226"><span class="linenum">9226</span></a>                  this._showingHiddenElements = true;
<a name="l9227"><span class="linenum">9227</span></a>                  Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(this._getDoc().body, this.CLASS_HIDDEN);
<a name="l9228"><span class="linenum">9228</span></a>                  this.toolbar.selectButton('hiddenelements');
<a name="l9229"><span class="linenum">9229</span></a>              }
<a name="l9230"><span class="linenum">9230</span></a>              return [false];
<a name="l9231"><span class="linenum">9231</span></a>          },
<a name="l9232"><span class="linenum">9232</span></a>          <span class="comment">/**</span>
<a name="l9233"><span class="linenum">9233</span></a>  <span class="comment">        * @method cmd_removeformat</span>
<a name="l9234"><span class="linenum">9234</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9235"><span class="linenum">9235</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('removeformat') is used.</span>
<a name="l9236"><span class="linenum">9236</span></a>  <span class="comment">        */</span>
<a name="l9237"><span class="linenum">9237</span></a>          cmd_removeformat: function(value) {
<a name="l9238"><span class="linenum">9238</span></a>              var exec = true;
<a name="l9239"><span class="linenum">9239</span></a>              <span class="comment">/*</span>
<a name="l9240"><span class="linenum">9240</span></a>  <span class="comment">            * @knownissue Remove Format issue</span>
<a name="l9241"><span class="linenum">9241</span></a>  <span class="comment">            * @browser Safari 2.x</span>
<a name="l9242"><span class="linenum">9242</span></a>  <span class="comment">            * @description There is an issue here with Safari, that it may not always remove the format of the item that is selected.</span>
<a name="l9243"><span class="linenum">9243</span></a>  <span class="comment">            * Due to the way that Safari 2.x handles ranges, it is very difficult to determine what the selection holds.</span>
<a name="l9244"><span class="linenum">9244</span></a>  <span class="comment">            * So here we are making the best possible guess and acting on it.</span>
<a name="l9245"><span class="linenum">9245</span></a>  <span class="comment">            */</span>
<a name="l9246"><span class="linenum">9246</span></a>              if (this.browser.webkit &amp;&amp; !this._getDoc().queryCommandEnabled('removeformat')) {
<a name="l9247"><span class="linenum">9247</span></a>                  var _txt = this._getSelection()+'';
<a name="l9248"><span class="linenum">9248</span></a>                  this._createCurrentElement('span');
<a name="l9249"><span class="linenum">9249</span></a>                  this.currentElement[0].className = 'yui-non';
<a name="l9250"><span class="linenum">9250</span></a>                  this.currentElement[0].innerHTML = _txt;
<a name="l9251"><span class="linenum">9251</span></a>                  for (var i = 1; i &lt; this.currentElement.length; i++) {
<a name="l9252"><span class="linenum">9252</span></a>                      this.currentElement[i].parentNode.<a class="function" onClick="logFunction('removeChild')" href="../../../../../../_functions/removechild.html" onMouseOver="funcPopup(event,'removechild')">removeChild</a>(this.currentElement[i]);
<a name="l9253"><span class="linenum">9253</span></a>                  }
<a name="l9254"><span class="linenum">9254</span></a>                  
<a name="l9255"><span class="linenum">9255</span></a>                  exec = false;
<a name="l9256"><span class="linenum">9256</span></a>              }
<a name="l9257"><span class="linenum">9257</span></a>              return [exec];
<a name="l9258"><span class="linenum">9258</span></a>          },
<a name="l9259"><span class="linenum">9259</span></a>          <span class="comment">/**</span>
<a name="l9260"><span class="linenum">9260</span></a>  <span class="comment">        * @method cmd_script</span>
<a name="l9261"><span class="linenum">9261</span></a>  <span class="comment">        * @param action action passed from the execCommand method</span>
<a name="l9262"><span class="linenum">9262</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9263"><span class="linenum">9263</span></a>  <span class="comment">        * @description This is a combined execCommand override method. It is called from the cmd_superscript and cmd_subscript methods.</span>
<a name="l9264"><span class="linenum">9264</span></a>  <span class="comment">        */</span>
<a name="l9265"><span class="linenum">9265</span></a>          cmd_script: function(action, value) {
<a name="l9266"><span class="linenum">9266</span></a>              var exec = true, tag = action.toLowerCase().<a class="function" onClick="logFunction('substring')" href="../../../../../../_functions/substring.html" onMouseOver="funcPopup(event,'substring')">substring</a>(0, 3),
<a name="l9267"><span class="linenum">9267</span></a>                  _span = null, _selEl = this._getSelectedElement();
<a name="l9268"><span class="linenum">9268</span></a>  
<a name="l9269"><span class="linenum">9269</span></a>              if (this.browser.webkit) {
<a name="l9270"><span class="linenum">9270</span></a>                  YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Safari dom fun again (' + action + ')..', 'info', 'EditorSafari');
<a name="l9271"><span class="linenum">9271</span></a>                  if (this._isElement(_selEl, tag)) {
<a name="l9272"><span class="linenum">9272</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('we are a child of <a class="function" onClick="logFunction('tag')" href="../../../../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a> (' + tag + '), reverse process', 'info', 'EditorSafari');
<a name="l9273"><span class="linenum">9273</span></a>                      _span = this._swapEl(this.currentElement[0], 'span', function(el) {
<a name="l9274"><span class="linenum">9274</span></a>                          el.className = 'yui-non';
<a name="l9275"><span class="linenum">9275</span></a>                      });
<a name="l9276"><span class="linenum">9276</span></a>                      this._selectNode(_span);
<a name="l9277"><span class="linenum">9277</span></a>                  } else {
<a name="l9278"><span class="linenum">9278</span></a>                      this._createCurrentElement(tag);
<a name="l9279"><span class="linenum">9279</span></a>                      var _sub = this._swapEl(this.currentElement[0], tag);
<a name="l9280"><span class="linenum">9280</span></a>                      this._selectNode(_sub);
<a name="l9281"><span class="linenum">9281</span></a>                      this.currentElement[0] = _sub;
<a name="l9282"><span class="linenum">9282</span></a>                  }
<a name="l9283"><span class="linenum">9283</span></a>                  exec = false;
<a name="l9284"><span class="linenum">9284</span></a>              }
<a name="l9285"><span class="linenum">9285</span></a>              return exec;
<a name="l9286"><span class="linenum">9286</span></a>          },
<a name="l9287"><span class="linenum">9287</span></a>          <span class="comment">/**</span>
<a name="l9288"><span class="linenum">9288</span></a>  <span class="comment">        * @method cmd_superscript</span>
<a name="l9289"><span class="linenum">9289</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9290"><span class="linenum">9290</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('superscript') is used.</span>
<a name="l9291"><span class="linenum">9291</span></a>  <span class="comment">        */</span>
<a name="l9292"><span class="linenum">9292</span></a>          cmd_superscript: function(value) {
<a name="l9293"><span class="linenum">9293</span></a>              return [this.cmd_script('superscript', value)];
<a name="l9294"><span class="linenum">9294</span></a>          },
<a name="l9295"><span class="linenum">9295</span></a>          <span class="comment">/**</span>
<a name="l9296"><span class="linenum">9296</span></a>  <span class="comment">        * @method cmd_subscript</span>
<a name="l9297"><span class="linenum">9297</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9298"><span class="linenum">9298</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('subscript') is used.</span>
<a name="l9299"><span class="linenum">9299</span></a>  <span class="comment">        */</span>
<a name="l9300"><span class="linenum">9300</span></a>          cmd_subscript: function(value) {
<a name="l9301"><span class="linenum">9301</span></a>              return [this.cmd_script('subscript', value)];
<a name="l9302"><span class="linenum">9302</span></a>          },
<a name="l9303"><span class="linenum">9303</span></a>          <span class="comment">/**</span>
<a name="l9304"><span class="linenum">9304</span></a>  <span class="comment">        * @method cmd_indent</span>
<a name="l9305"><span class="linenum">9305</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9306"><span class="linenum">9306</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('indent') is used.</span>
<a name="l9307"><span class="linenum">9307</span></a>  <span class="comment">        */</span>
<a name="l9308"><span class="linenum">9308</span></a>          cmd_indent: function(value) {
<a name="l9309"><span class="linenum">9309</span></a>              var exec = true, selEl = this._getSelectedElement(), _bq = null;
<a name="l9310"><span class="linenum">9310</span></a>  
<a name="l9311"><span class="linenum">9311</span></a>  <span class="comment">            //if (this.browser.webkit || this.browser.ie || this.browser.gecko) {</span>
<a name="l9312"><span class="linenum">9312</span></a>  <span class="comment">            //if (this.browser.webkit || this.browser.ie) {</span>
<a name="l9313"><span class="linenum">9313</span></a>              if (this.browser.ie) {
<a name="l9314"><span class="linenum">9314</span></a>                  if (this._isElement(selEl, 'blockquote')) {
<a name="l9315"><span class="linenum">9315</span></a>                      _bq = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('blockquote');
<a name="l9316"><span class="linenum">9316</span></a>                      _bq.innerHTML = selEl.innerHTML;
<a name="l9317"><span class="linenum">9317</span></a>                      selEl.innerHTML = '';
<a name="l9318"><span class="linenum">9318</span></a>                      selEl.appendChild(_bq);
<a name="l9319"><span class="linenum">9319</span></a>                      this._selectNode(_bq);
<a name="l9320"><span class="linenum">9320</span></a>                  } else {
<a name="l9321"><span class="linenum">9321</span></a>                      _bq = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('blockquote');
<a name="l9322"><span class="linenum">9322</span></a>                      var html = this._getRange().htmlText;
<a name="l9323"><span class="linenum">9323</span></a>                      _bq.innerHTML = html;
<a name="l9324"><span class="linenum">9324</span></a>                      this._createCurrentElement('blockquote');
<a name="l9325"><span class="linenum">9325</span></a>                      <span class="comment">/*</span>
<a name="l9326"><span class="linenum">9326</span></a>  <span class="comment">                    for (var i = 0; i &lt; this.currentElement.length; i++) {</span>
<a name="l9327"><span class="linenum">9327</span></a>  <span class="comment">                        _bq = this._getDoc().createElement('blockquote');</span>
<a name="l9328"><span class="linenum">9328</span></a>  <span class="comment">                        _bq.innerHTML = this.currentElement[i].innerHTML;</span>
<a name="l9329"><span class="linenum">9329</span></a>  <span class="comment">                        this.currentElement[i].parentNode.replaceChild(_bq, this.currentElement[i]);</span>
<a name="l9330"><span class="linenum">9330</span></a>  <span class="comment">                        this.currentElement[i] = _bq;</span>
<a name="l9331"><span class="linenum">9331</span></a>  <span class="comment">                    }</span>
<a name="l9332"><span class="linenum">9332</span></a>  <span class="comment">                    */</span>
<a name="l9333"><span class="linenum">9333</span></a>                      this.currentElement[0].parentNode.replaceChild(_bq, this.currentElement[0]);
<a name="l9334"><span class="linenum">9334</span></a>                      this.currentElement[0] = _bq;
<a name="l9335"><span class="linenum">9335</span></a>                      this._selectNode(this.currentElement[0]);
<a name="l9336"><span class="linenum">9336</span></a>                  }
<a name="l9337"><span class="linenum">9337</span></a>                  exec = false;
<a name="l9338"><span class="linenum">9338</span></a>              } else {
<a name="l9339"><span class="linenum">9339</span></a>                  value = 'blockquote';
<a name="l9340"><span class="linenum">9340</span></a>              }
<a name="l9341"><span class="linenum">9341</span></a>              return [exec, 'formatblock', value];
<a name="l9342"><span class="linenum">9342</span></a>          },
<a name="l9343"><span class="linenum">9343</span></a>          <span class="comment">/**</span>
<a name="l9344"><span class="linenum">9344</span></a>  <span class="comment">        * @method cmd_outdent</span>
<a name="l9345"><span class="linenum">9345</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9346"><span class="linenum">9346</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('outdent') is used.</span>
<a name="l9347"><span class="linenum">9347</span></a>  <span class="comment">        */</span>
<a name="l9348"><span class="linenum">9348</span></a>          cmd_outdent: function(value) {
<a name="l9349"><span class="linenum">9349</span></a>              var exec = true, selEl = this._getSelectedElement(), _bq = null, _span = null;
<a name="l9350"><span class="linenum">9350</span></a>  <span class="comment">            //if (this.browser.webkit || this.browser.ie || this.browser.gecko) {</span>
<a name="l9351"><span class="linenum">9351</span></a>              if (this.browser.webkit || this.browser.ie) {
<a name="l9352"><span class="linenum">9352</span></a>  <span class="comment">            //if (this.browser.ie) {</span>
<a name="l9353"><span class="linenum">9353</span></a>                  selEl = this._getSelectedElement();
<a name="l9354"><span class="linenum">9354</span></a>                  if (this._isElement(selEl, 'blockquote')) {
<a name="l9355"><span class="linenum">9355</span></a>                      var par = selEl.parentNode;
<a name="l9356"><span class="linenum">9356</span></a>                      if (this._isElement(selEl.parentNode, 'blockquote')) {
<a name="l9357"><span class="linenum">9357</span></a>                          par.innerHTML = selEl.innerHTML;
<a name="l9358"><span class="linenum">9358</span></a>                          this._selectNode(par);
<a name="l9359"><span class="linenum">9359</span></a>                      } else {
<a name="l9360"><span class="linenum">9360</span></a>                          _span = this._getDoc().<a class="function" onClick="logFunction('createElement')" href="../../../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('span');
<a name="l9361"><span class="linenum">9361</span></a>                          _span.innerHTML = selEl.innerHTML;
<a name="l9362"><span class="linenum">9362</span></a>                          YAHOO.util.Dom.<a class="function" onClick="logFunction('addClass')" href="../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(_span, 'yui-non');
<a name="l9363"><span class="linenum">9363</span></a>                          par.replaceChild(_span, selEl);
<a name="l9364"><span class="linenum">9364</span></a>                          this._selectNode(_span);
<a name="l9365"><span class="linenum">9365</span></a>                      }
<a name="l9366"><span class="linenum">9366</span></a>                  } else {
<a name="l9367"><span class="linenum">9367</span></a>                      YAHOO.<a class="phpfunction" onClick="logFunction('log')" href="../../../../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Can not outdent, we are not inside a blockquote', 'warn', 'Editor');
<a name="l9368"><span class="linenum">9368</span></a>                  }
<a name="l9369"><span class="linenum">9369</span></a>                  exec = false;
<a name="l9370"><span class="linenum">9370</span></a>              } else {
<a name="l9371"><span class="linenum">9371</span></a>                  value = false;
<a name="l9372"><span class="linenum">9372</span></a>              }
<a name="l9373"><span class="linenum">9373</span></a>              return [exec, 'outdent', value];
<a name="l9374"><span class="linenum">9374</span></a>          },
<a name="l9375"><span class="linenum">9375</span></a>          <span class="comment">/**</span>
<a name="l9376"><span class="linenum">9376</span></a>  <span class="comment">        * @method cmd_justify</span>
<a name="l9377"><span class="linenum">9377</span></a>  <span class="comment">        * @param dir The direction to justify</span>
<a name="l9378"><span class="linenum">9378</span></a>  <span class="comment">        * @description This is a factory method for the justify family of commands.</span>
<a name="l9379"><span class="linenum">9379</span></a>  <span class="comment">        */</span>
<a name="l9380"><span class="linenum">9380</span></a>          cmd_justify: function(dir) {
<a name="l9381"><span class="linenum">9381</span></a>              if (this.browser.ie) {
<a name="l9382"><span class="linenum">9382</span></a>                  if (this._hasSelection()) {
<a name="l9383"><span class="linenum">9383</span></a>                      this._createCurrentElement('span');
<a name="l9384"><span class="linenum">9384</span></a>                      this._swapEl(this.currentElement[0], 'div', function(el) {
<a name="l9385"><span class="linenum">9385</span></a>                          el.style.textAlign = dir;
<a name="l9386"><span class="linenum">9386</span></a>                      });
<a name="l9387"><span class="linenum">9387</span></a>                      
<a name="l9388"><span class="linenum">9388</span></a>                      return [false];
<a name="l9389"><span class="linenum">9389</span></a>                  }
<a name="l9390"><span class="linenum">9390</span></a>              }
<a name="l9391"><span class="linenum">9391</span></a>              return [true, 'justify' + dir, ''];
<a name="l9392"><span class="linenum">9392</span></a>          },
<a name="l9393"><span class="linenum">9393</span></a>          <span class="comment">/**</span>
<a name="l9394"><span class="linenum">9394</span></a>  <span class="comment">        * @method cmd_justifycenter</span>
<a name="l9395"><span class="linenum">9395</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9396"><span class="linenum">9396</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('justifycenter') is used.</span>
<a name="l9397"><span class="linenum">9397</span></a>  <span class="comment">        */</span>
<a name="l9398"><span class="linenum">9398</span></a>          cmd_justifycenter: function() {
<a name="l9399"><span class="linenum">9399</span></a>              return [this.cmd_justify('center')];
<a name="l9400"><span class="linenum">9400</span></a>          },
<a name="l9401"><span class="linenum">9401</span></a>          <span class="comment">/**</span>
<a name="l9402"><span class="linenum">9402</span></a>  <span class="comment">        * @method cmd_justifyleft</span>
<a name="l9403"><span class="linenum">9403</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9404"><span class="linenum">9404</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('justifyleft') is used.</span>
<a name="l9405"><span class="linenum">9405</span></a>  <span class="comment">        */</span>
<a name="l9406"><span class="linenum">9406</span></a>          cmd_justifyleft: function() {
<a name="l9407"><span class="linenum">9407</span></a>              return [this.cmd_justify('left')];
<a name="l9408"><span class="linenum">9408</span></a>          },
<a name="l9409"><span class="linenum">9409</span></a>          <span class="comment">/**</span>
<a name="l9410"><span class="linenum">9410</span></a>  <span class="comment">        * @method cmd_justifyright</span>
<a name="l9411"><span class="linenum">9411</span></a>  <span class="comment">        * @param value Value passed from the execCommand method</span>
<a name="l9412"><span class="linenum">9412</span></a>  <span class="comment">        * @description This is an execCommand override method. It is called from execCommand when the execCommand('justifyright') is used.</span>
<a name="l9413"><span class="linenum">9413</span></a>  <span class="comment">        */</span>
<a name="l9414"><span class="linenum">9414</span></a>          cmd_justifyright: function() {
<a name="l9415"><span class="linenum">9415</span></a>              return [this.cmd_justify('right')];
<a name="l9416"><span class="linenum">9416</span></a>          },
<a name="l9417"><span class="linenum">9417</span></a>  <span class="comment">        /* }}}*/        </span>
<a name="l9418"><span class="linenum">9418</span></a>          <span class="comment">/**</span>
<a name="l9419"><span class="linenum">9419</span></a>  <span class="comment">        * @method toString</span>
<a name="l9420"><span class="linenum">9420</span></a>  <span class="comment">        * @description Returns a string representing the editor.</span>
<a name="l9421"><span class="linenum">9421</span></a>  <span class="comment">        * @return {String}</span>
<a name="l9422"><span class="linenum">9422</span></a>  <span class="comment">        */</span>
<a name="l9423"><span class="linenum">9423</span></a>          toString: function() {
<a name="l9424"><span class="linenum">9424</span></a>              var str = 'Editor';
<a name="l9425"><span class="linenum">9425</span></a>              if (this.get &amp;&amp; this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont')) {
<a name="l9426"><span class="linenum">9426</span></a>                  str = '<a class="function" onClick="logFunction('Editor')" href="../../../../../../_functions/editor.html" onMouseOver="funcPopup(event,'editor')">Editor</a> (#' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('element_cont').<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('id') + ')' + ((this.<a class="function" onClick="logFunction('get')" href="../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('disabled') ? ' Disabled' : ''));
<a name="l9427"><span class="linenum">9427</span></a>              }
<a name="l9428"><span class="linenum">9428</span></a>              return str;
<a name="l9429"><span class="linenum">9429</span></a>          }
<a name="l9430"><span class="linenum">9430</span></a>      });
<a name="l9431"><span class="linenum">9431</span></a>  <span class="comment">/**</span>
<a name="l9432"><span class="linenum">9432</span></a>  <span class="comment">* @event beforeOpenWindow</span>
<a name="l9433"><span class="linenum">9433</span></a>  <span class="comment">* @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt;} win The EditorWindow object</span>
<a name="l9434"><span class="linenum">9434</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9435"><span class="linenum">9435</span></a>  <span class="comment">* @description Event fires before an Editor Window is opened. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l9436"><span class="linenum">9436</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9437"><span class="linenum">9437</span></a>  <span class="comment">*/</span>
<a name="l9438"><span class="linenum">9438</span></a>  <span class="comment">/**</span>
<a name="l9439"><span class="linenum">9439</span></a>  <span class="comment">* @event afterOpenWindow</span>
<a name="l9440"><span class="linenum">9440</span></a>  <span class="comment">* @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt;} win The EditorWindow object</span>
<a name="l9441"><span class="linenum">9441</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9442"><span class="linenum">9442</span></a>  <span class="comment">* @description Event fires after an Editor Window is opened. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l9443"><span class="linenum">9443</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9444"><span class="linenum">9444</span></a>  <span class="comment">*/</span>
<a name="l9445"><span class="linenum">9445</span></a>  <span class="comment">/**</span>
<a name="l9446"><span class="linenum">9446</span></a>  <span class="comment">* @event closeWindow</span>
<a name="l9447"><span class="linenum">9447</span></a>  <span class="comment">* @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt;} win The EditorWindow object</span>
<a name="l9448"><span class="linenum">9448</span></a>  <span class="comment">* @description Event fires after an Editor Window is closed. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l9449"><span class="linenum">9449</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9450"><span class="linenum">9450</span></a>  <span class="comment">*/</span>
<a name="l9451"><span class="linenum">9451</span></a>  <span class="comment">/**</span>
<a name="l9452"><span class="linenum">9452</span></a>  <span class="comment">* @event windowCMDOpen</span>
<a name="l9453"><span class="linenum">9453</span></a>  <span class="comment">* @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt;} win The EditorWindow object</span>
<a name="l9454"><span class="linenum">9454</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9455"><span class="linenum">9455</span></a>  <span class="comment">* @description Dynamic event fired when an &lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt; is opened.. The dynamic event is based on the name of the window. Example Window: createlink, opening this window would fire the windowcreatelinkOpen event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l9456"><span class="linenum">9456</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9457"><span class="linenum">9457</span></a>  <span class="comment">*/</span>
<a name="l9458"><span class="linenum">9458</span></a>  <span class="comment">/**</span>
<a name="l9459"><span class="linenum">9459</span></a>  <span class="comment">* @event windowCMDClose</span>
<a name="l9460"><span class="linenum">9460</span></a>  <span class="comment">* @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt;} win The EditorWindow object</span>
<a name="l9461"><span class="linenum">9461</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9462"><span class="linenum">9462</span></a>  <span class="comment">* @description Dynamic event fired when an &lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt; is closed.. The dynamic event is based on the name of the window. Example Window: createlink, opening this window would fire the windowcreatelinkClose event. See &lt;a href=&quot;YAHOO.util.Element.html#addListener&quot;&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<a name="l9463"><span class="linenum">9463</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9464"><span class="linenum">9464</span></a>  <span class="comment">*/</span>
<a name="l9465"><span class="linenum">9465</span></a>  <span class="comment">/**</span>
<a name="l9466"><span class="linenum">9466</span></a>  <span class="comment">* @event windowRender</span>
<a name="l9467"><span class="linenum">9467</span></a>  <span class="comment">* @param {&lt;a href=&quot;YAHOO.widget.EditorWindow.html&quot;&gt;EditorWindow&lt;/a&gt;} win The EditorWindow object</span>
<a name="l9468"><span class="linenum">9468</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9469"><span class="linenum">9469</span></a>  <span class="comment">* @description Event fired when the initial Overlay is rendered. Can be used to manipulate the content of the panel.</span>
<a name="l9470"><span class="linenum">9470</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9471"><span class="linenum">9471</span></a>  <span class="comment">*/</span>
<a name="l9472"><span class="linenum">9472</span></a>  <span class="comment">/**</span>
<a name="l9473"><span class="linenum">9473</span></a>  <span class="comment">* @event windowInsertImageRender</span>
<a name="l9474"><span class="linenum">9474</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9475"><span class="linenum">9475</span></a>  <span class="comment">* @param {HTMLElement} body The HTML element used as the body of the window..</span>
<a name="l9476"><span class="linenum">9476</span></a>  <span class="comment">* @param {Toolbar} toolbar A reference to the toolbar object used inside this window.</span>
<a name="l9477"><span class="linenum">9477</span></a>  <span class="comment">* @description Event fired when the pre render of the Insert Image window has finished.</span>
<a name="l9478"><span class="linenum">9478</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9479"><span class="linenum">9479</span></a>  <span class="comment">*/</span>
<a name="l9480"><span class="linenum">9480</span></a>  <span class="comment">/**</span>
<a name="l9481"><span class="linenum">9481</span></a>  <span class="comment">* @event windowCreateLinkRender</span>
<a name="l9482"><span class="linenum">9482</span></a>  <span class="comment">* @param {Overlay} panel The Overlay object that is used to create the window.</span>
<a name="l9483"><span class="linenum">9483</span></a>  <span class="comment">* @param {HTMLElement} body The HTML element used as the body of the window..</span>
<a name="l9484"><span class="linenum">9484</span></a>  <span class="comment">* @description Event fired when the pre render of the Create Link window has finished.</span>
<a name="l9485"><span class="linenum">9485</span></a>  <span class="comment">* @type YAHOO.util.CustomEvent</span>
<a name="l9486"><span class="linenum">9486</span></a>  <span class="comment">*/</span>
<a name="l9487"><span class="linenum">9487</span></a>  
<a name="l9488"><span class="linenum">9488</span></a>  
<a name="l9489"><span class="linenum">9489</span></a>  
<a name="l9490"><span class="linenum">9490</span></a>      <span class="comment">/**</span>
<a name="l9491"><span class="linenum">9491</span></a>  <span class="comment">     * @description Class to hold Window information between uses. We use the same panel to show the windows, so using this will allow you to configure a window before it is shown.</span>
<a name="l9492"><span class="linenum">9492</span></a>  <span class="comment">     * This is what you pass to Editor.openWindow();. These parameters will not take effect until the openWindow() is called in the editor.</span>
<a name="l9493"><span class="linenum">9493</span></a>  <span class="comment">     * @class EditorWindow</span>
<a name="l9494"><span class="linenum">9494</span></a>  <span class="comment">     * @param {String} name The name of the window.</span>
<a name="l9495"><span class="linenum">9495</span></a>  <span class="comment">     * @param {Object} attrs Attributes for the window. Current attributes used are : height and width</span>
<a name="l9496"><span class="linenum">9496</span></a>  <span class="comment">    */</span>
<a name="l9497"><span class="linenum">9497</span></a>      YAHOO.widget.EditorWindow = function(name, attrs) {
<a name="l9498"><span class="linenum">9498</span></a>          <span class="comment">/**</span>
<a name="l9499"><span class="linenum">9499</span></a>  <span class="comment">        * @private</span>
<a name="l9500"><span class="linenum">9500</span></a>  <span class="comment">        * @property name</span>
<a name="l9501"><span class="linenum">9501</span></a>  <span class="comment">        * @description A unique name for the window</span>
<a name="l9502"><span class="linenum">9502</span></a>  <span class="comment">        */</span>
<a name="l9503"><span class="linenum">9503</span></a>          this.name = name.<a class="function" onClick="logFunction('replace')" href="../../../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(' ', '_');
<a name="l9504"><span class="linenum">9504</span></a>          <span class="comment">/**</span>
<a name="l9505"><span class="linenum">9505</span></a>  <span class="comment">        * @private</span>
<a name="l9506"><span class="linenum">9506</span></a>  <span class="comment">        * @property attrs</span>
<a name="l9507"><span class="linenum">9507</span></a>  <span class="comment">        * @description The window attributes</span>
<a name="l9508"><span class="linenum">9508</span></a>  <span class="comment">        */</span>
<a name="l9509"><span class="linenum">9509</span></a>          this.attrs = attrs;
<a name="l9510"><span class="linenum">9510</span></a>      };
<a name="l9511"><span class="linenum">9511</span></a>  
<a name="l9512"><span class="linenum">9512</span></a>      YAHOO.widget.EditorWindow.prototype = {
<a name="l9513"><span class="linenum">9513</span></a>          <span class="comment">/**</span>
<a name="l9514"><span class="linenum">9514</span></a>  <span class="comment">        * @private</span>
<a name="l9515"><span class="linenum">9515</span></a>  <span class="comment">        * @property header</span>
<a name="l9516"><span class="linenum">9516</span></a>  <span class="comment">        * @description Holder for the header of the window, used in Editor.openWindow</span>
<a name="l9517"><span class="linenum">9517</span></a>  <span class="comment">        */</span>
<a name="l9518"><span class="linenum">9518</span></a>          header: null,
<a name="l9519"><span class="linenum">9519</span></a>          <span class="comment">/**</span>
<a name="l9520"><span class="linenum">9520</span></a>  <span class="comment">        * @private</span>
<a name="l9521"><span class="linenum">9521</span></a>  <span class="comment">        * @property body</span>
<a name="l9522"><span class="linenum">9522</span></a>  <span class="comment">        * @description Holder for the body of the window, used in Editor.openWindow</span>
<a name="l9523"><span class="linenum">9523</span></a>  <span class="comment">        */</span>
<a name="l9524"><span class="linenum">9524</span></a>          body: null,
<a name="l9525"><span class="linenum">9525</span></a>          <span class="comment">/**</span>
<a name="l9526"><span class="linenum">9526</span></a>  <span class="comment">        * @private</span>
<a name="l9527"><span class="linenum">9527</span></a>  <span class="comment">        * @property footer</span>
<a name="l9528"><span class="linenum">9528</span></a>  <span class="comment">        * @description Holder for the footer of the window, used in Editor.openWindow</span>
<a name="l9529"><span class="linenum">9529</span></a>  <span class="comment">        */</span>
<a name="l9530"><span class="linenum">9530</span></a>          footer: null,
<a name="l9531"><span class="linenum">9531</span></a>          <span class="comment">/**</span>
<a name="l9532"><span class="linenum">9532</span></a>  <span class="comment">        * @method setHeader</span>
<a name="l9533"><span class="linenum">9533</span></a>  <span class="comment">        * @description Sets the header for the window.</span>
<a name="l9534"><span class="linenum">9534</span></a>  <span class="comment">        * @param {String/HTMLElement} str The string or DOM reference to be used as the windows header.</span>
<a name="l9535"><span class="linenum">9535</span></a>  <span class="comment">        */</span>
<a name="l9536"><span class="linenum">9536</span></a>          setHeader: function(str) {
<a name="l9537"><span class="linenum">9537</span></a>              this.header = str;
<a name="l9538"><span class="linenum">9538</span></a>          },
<a name="l9539"><span class="linenum">9539</span></a>          <span class="comment">/**</span>
<a name="l9540"><span class="linenum">9540</span></a>  <span class="comment">        * @method setBody</span>
<a name="l9541"><span class="linenum">9541</span></a>  <span class="comment">        * @description Sets the body for the window.</span>
<a name="l9542"><span class="linenum">9542</span></a>  <span class="comment">        * @param {String/HTMLElement} str The string or DOM reference to be used as the windows body.</span>
<a name="l9543"><span class="linenum">9543</span></a>  <span class="comment">        */</span>
<a name="l9544"><span class="linenum">9544</span></a>          setBody: function(str) {
<a name="l9545"><span class="linenum">9545</span></a>              this.body = str;
<a name="l9546"><span class="linenum">9546</span></a>          },
<a name="l9547"><span class="linenum">9547</span></a>          <span class="comment">/**</span>
<a name="l9548"><span class="linenum">9548</span></a>  <span class="comment">        * @method setFooter</span>
<a name="l9549"><span class="linenum">9549</span></a>  <span class="comment">        * @description Sets the footer for the window.</span>
<a name="l9550"><span class="linenum">9550</span></a>  <span class="comment">        * @param {String/HTMLElement} str The string or DOM reference to be used as the windows footer.</span>
<a name="l9551"><span class="linenum">9551</span></a>  <span class="comment">        */</span>
<a name="l9552"><span class="linenum">9552</span></a>          setFooter: function(str) {
<a name="l9553"><span class="linenum">9553</span></a>              this.footer = str;
<a name="l9554"><span class="linenum">9554</span></a>          },
<a name="l9555"><span class="linenum">9555</span></a>          <span class="comment">/**</span>
<a name="l9556"><span class="linenum">9556</span></a>  <span class="comment">        * @method toString</span>
<a name="l9557"><span class="linenum">9557</span></a>  <span class="comment">        * @description Returns a string representing the EditorWindow.</span>
<a name="l9558"><span class="linenum">9558</span></a>  <span class="comment">        * @return {String}</span>
<a name="l9559"><span class="linenum">9559</span></a>  <span class="comment">        */</span>
<a name="l9560"><span class="linenum">9560</span></a>          toString: function() {
<a name="l9561"><span class="linenum">9561</span></a>              return 'Editor Window (' + this.name + ')';
<a name="l9562"><span class="linenum">9562</span></a>          }
<a name="l9563"><span class="linenum">9563</span></a>      };
<a name="l9564"><span class="linenum">9564</span></a>  })();
<a name="l9565"><span class="linenum">9565</span></a>  YAHOO.<a class="function" onClick="logFunction('register')" href="../../../../../../_functions/register.html" onMouseOver="funcPopup(event,'register')">register</a>(&quot;editor&quot;, YAHOO.widget.Editor, {version: &quot;2.9.0&quot;, build: &quot;2800&quot;});
<a name="l9566"><span class="linenum">9566</span></a>  
<a name="l9567"><span class="linenum">9567</span></a>  }, '2.9.0' ,{&quot;requires&quot;: [&quot;yui2-yahoo&quot;, &quot;yui2-dom&quot;, &quot;yui2-event&quot;, &quot;yui2-containercore&quot;, &quot;yui2-skin-sam-editor&quot;, &quot;yui2-skin-sam-button&quot;, &quot;yui2-element&quot;, &quot;yui2-skin-sam-menu&quot;, &quot;yui2-menu&quot;, &quot;yui2-button&quot;], &quot;supersedes&quot;: [&quot;yui2-simpleeditor&quot;], &quot;optional&quot;: [&quot;yui2-animation&quot;, &quot;yui2-dragdrop&quot;]});
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'parentelement': ['parentelement', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',353],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',353],['lib/editor/atto/yui/src/rangy/js','rangy-core.js',353]], 73],
'render': ['render', 'Render TeX string into gif/png ', [['filter/tex','latex.php',78],['lib/adodb','adodb-pager.inc.php',239],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['lib/mustache/src/Mustache','Engine.php',202],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',768],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib','formslib.php',926],['question/engine/tests','helpers.php',797],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',167],['lib','outputrenderers.php',299],['mod/quiz/classes/question/bank','custom_view.php',133],['question/behaviour','behaviourbase.php',97],['lib/mustache/src/Mustache','Template.php',57],['question/engine','questionattempt.php',815],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib','portfoliolib.php',241],['lib/phpexcel/PHPExcel','Chart.php',527],['lib/mustache/src/Mustache','LambdaHelper.php',36]], 757],
'extend': ['extend', 'Extend the lifetime of this lock. Not supported by all factories. ', [['lib/classes/lock','lock.php',81]], 1336],
'prompt': ['prompt', '', [['question/type/multichoice','renderer.php',219],['question/type/multichoice','renderer.php',271]], 18],
'insertafter': ['insertafter', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',415],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',415],['lib/editor/atto/yui/src/rangy/js','rangy-core.js',415],['lib/htmlpurifier/HTMLPurifier','Zipper.php',114]], 96],
'getelementsbyclassname': ['getelementsbyclassname', '', [['lib','javascript-static.js',1368]], 192],
'img': ['img', 'Generates a simple image tag with attributes. ', [['lib','outputcomponents.php',1159]], 45],
'isfunction': ['isfunction', '', [['lib/requirejs','require.js',41],['lib/amd/src','mustache.js',52]], 507],
'on': ['on', '', [['lib/requirejs','require.js',506]], 3494],
'match': ['match', 'Parse from a token, regexp or string, and move forward if match ', [['lib/lessphp','Parser.php',661],['lib/zend/Zend/Http','Cookie.php',221],['lib/phpexcel/PHPExcel/Calculation','LookupRef.php',477],['lib/horde/framework/Horde/Mail/Rfc822','List.php',244],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',121],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17319],['lib','lexer.php',69],['lib/minify/lib','JSMinPlus.php',1780],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',181],['lib/lessphp/Tree','Selector.php',67],['lib/zend/Zend/Rest','Route.php',113]], 908],
'info': ['info', 'Write informational message to debug log. ', [['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',90],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',146],['lib/minify/lib','FirePHP.php',390],['lib/mustache/src/Mustache','Logger.php',112],['lib/google/src/Google/Logger','Abstract.php',235],['lib/mustache/src/Mustache/Logger','AbstractLogger.php',98],['question/engine','renderer.php',128],['lib/editor/tinymce/plugins/spellchecker/includes','general.php',70]], 42],
'hasownproperty': ['hasownproperty', '', [['lib/lessphp','Colors.php',161]], 1712],
'item': ['item', 'A managed course. ', [['course/yui/build/moodle-course-management','moodle-course-management.js',850],['course/yui/src/management/js','item.js',1],['course/yui/build/moodle-course-management','moodle-course-management-debug.js',860]], 1004],
'show': ['show', '', [['lib/jquery/ui-1.11.4','jquery-ui.js',13476],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',187],['lib','coursecatlib.php',2013]], 547],
'generateid': ['generateid', 'generate a unique id ', [['lib/zend/Zend/Amf/Value/Messaging','AbstractMessage.php',69]], 249],
'settimeout': ['settimeout', 'Set the maximum request time in seconds. ', [['lib/google','curlio.php',156],['lib/phpmailer','class.smtp.php',949],['lib/google/src/Google/IO','Curl.php',123],['lib/google/src/Google/IO','Stream.php',187]], 699],
'reverse': ['reverse', '', [['mod/wiki/diff','diff_nwiki.php',19],['mod/wiki/diff','diff_nwiki.php',42],['mod/wiki/diff','diff_nwiki.php',55],['mod/wiki/diff','diff_nwiki.php',68],['mod/wiki/diff','diff_nwiki.php',81],['mod/wiki/diff','diff_nwiki.php',509],['lib/horde/framework/Horde/Imap/Client','Ids.php',213]], 72],
'setfooter': ['setfooter', 'This method is used to render the page footer. ', [['lib/tcpdf','tcpdf.php',3552],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',196]], 59],
'getproperty': ['getproperty', '', [['lib/alfresco/Service','ContentData.php',68],['lib/google/src/Google/Service','YouTube.php',8152],['lib/google/src/Google/Service','Datastore.php',1015],['lib/google/src/Google/Service','Datastore.php',1044],['lib/google/src/Google/Service','Datastore.php',1079],['lib/zend/Zend/Amf/Value','TraitsInfo.php',134]], 925],
'collapse': ['collapse', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',6699]], 272],
'removelistener': ['removelistener', '', [['lib/requirejs','require.js',1182]], 347],
'hide': ['hide', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/contextmenu','editor_plugin_src.js',71],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',269],['repository','lib.php',2059],['lib/google/src/Google/Service','GamesManagement.php',559],['lib','navigationlib.php',697],['lib','coursecatlib.php',1954]], 750],
'tostring': ['tostring', 'Make a string representation of this object. ', [['lib/pear','PEAR.php',1009],['lib/horde/framework/Horde/Mime','Headers.php',169],['lib/htmlpurifier/HTMLPurifier','URI.php',213],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',27],['lib/zend/Zend','Date.php',400],['lib/horde/framework/Horde/Mime','Part.php',1133],['lib/lessphp','Output.php',40],['lib/htmlpurifier/HTMLPurifier','Length.php',95],['lib/jabber/XMPP','XMLObj.php',108],['lib/lessphp/Tree','Unit.php',40]], 595],
'isarray': ['isarray', '', [['lib/requirejs','require.js',45]], 818],
'is': ['is', '', [['lib/lessphp/Tree','Unit.php',60]], 195],
'createelement': ['createelement', 'Create an element, set its class name and optionally install the element to its parent. ', [['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel.js',298],['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel-debug.js',299],['theme/bootstrapbase/javascript','html5shiv.js',102],['lib/pear/HTML','QuickForm.php',523]], 1968],
'addclass': ['addclass', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',3262],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',3262],['lib/editor/atto/yui/src/rangy/js','rangy-cssclassapplier.js',32]], 2443],
'push': ['push', 'Push the close HTML for a recently opened container onto the stack. ', [['lib','outputlib.php',2008],['lib/evalmath','evalmath.class.php',452],['lib/htmlpurifier/HTMLPurifier','Queue.php',43],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',62],['lib/horde/framework/Horde/Support','Memory.php',44],['lib/mustache/src/Mustache','Context.php',32],['lib/horde/framework/Horde/Support','Timer.php',33],['lib/horde/framework/Horde/Support','Stack.php',23],['webservice/amf/testclient','AMFTester.mxml',391],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',55]], 4171],
'getitems': ['getitems', '', [['lib/google/src/Google/Service','Replicapoolupdater.php',566],['lib/google/src/Google/Service','Fusiontables.php',1511],['lib/google/src/Google/Service','Fusiontables.php',2085],['lib/google/src/Google/Service','Fusiontables.php',2257],['lib/google/src/Google/Service','Fusiontables.php',2348],['lib/google/src/Google/Service','Fusiontables.php',2457],['lib/google/src/Google/Service','Blogger.php',1839],['lib/google/src/Google/Service','Blogger.php',1991],['lib/google/src/Google/Service','Blogger.php',2274],['lib/google/src/Google/Service','Blogger.php',2532],['lib/google/src/Google/Service','Blogger.php',2905],['lib/google/src/Google/Service','Blogger.php',3039],['lib/google/src/Google/Service','Blogger.php',3114],['lib/google/src/Google/Service','Doubleclicksearch.php',1411],['lib/google/src/Google/Service','AdExchangeBuyer.php',836],['lib/google/src/Google/Service','AdExchangeBuyer.php',909],['lib/google/src/Google/Service','AdExchangeBuyer.php',1239],['lib/google/src/Google/Service','AdExchangeBuyer.php',1871],['lib/google/src/Google/Service','Manager.php',1076],['lib/google/src/Google/Service','Manager.php',1771],['lib/google/src/Google/Service','Reports.php',464],['lib/google/src/Google/Service','Customsearch.php',1124],['lib/google/src/Google/Service','Plus.php',664],['lib/google/src/Google/Service','Plus.php',1006],['lib/google/src/Google/Service','Plus.php',1819],['lib/google/src/Google/Service','Plus.php',2565],['lib/google/src/Google/Service','Plus.php',2646],['lib/google/src/Google/Service','Mirror.php',940],['lib/google/src/Google/Service','Mirror.php',1129],['lib/google/src/Google/Service','Mirror.php',1237],['lib/google/src/Google/Service','Mirror.php',1581],['lib/google/src/Google/Service','Mirror.php',1859],['lib/google/src/Google/Service','Urlshortener.php',390],['lib/google/src/Google/Service','Dfareporting.php',1213],['lib/google/src/Google/Service','Dfareporting.php',1314],['lib/google/src/Google/Service','Dfareporting.php',2190],['lib/google/src/Google/Service','Dfareporting.php',2686],['lib/google/src/Google/Service','PlusDomains.php',932],['lib/google/src/Google/Service','PlusDomains.php',1274],['lib/google/src/Google/Service','PlusDomains.php',2046],['lib/google/src/Google/Service','PlusDomains.php',2176],['lib/google/src/Google/Service','PlusDomains.php',2457],['lib/google/src/Google/Service','PlusDomains.php',2861],['lib/google/src/Google/Service','Licensing.php',456],['lib/google/src/Google/Service','Drive.php',3197],['lib/google/src/Google/Service','Drive.php',3318],['lib/google/src/Google/Service','Drive.php',3492],['lib/google/src/Google/Service','Drive.php',3764],['lib/google/src/Google/Service','Drive.php',3909],['lib/google/src/Google/Service','Drive.php',4816],['lib/google/src/Google/Service','Drive.php',4878],['lib/google/src/Google/Service','Drive.php',5138],['lib/google/src/Google/Service','Drive.php',5246],['lib/google/src/Google/Service','Drive.php',5467],['lib/google/src/Google/Service','Books.php',2832],['lib/google/src/Google/Service','Books.php',2959],['lib/google/src/Google/Service','Books.php',3207],['lib/google/src/Google/Service','Books.php',4327],['lib/google/src/Google/Service','Books.php',4489],['lib/google/src/Google/Service','Books.php',4572],['lib/google/src/Google/Service','Books.php',4617],['lib/google/src/Google/Service','Books.php',6338],['lib/google/src/Google/Service','Books.php',6391],['lib/google/src/Google/Service','AdExchangeSeller.php',890],['lib/google/src/Google/Service','AdExchangeSeller.php',989],['lib/google/src/Google/Service','AdExchangeSeller.php',1078],['lib/google/src/Google/Service','AdExchangeSeller.php',1214],['lib/google/src/Google/Service','AdExchangeSeller.php',1250],['lib/google/src/Google/Service','AdExchangeSeller.php',1358],['lib/google/src/Google/Service','AdExchangeSeller.php',1611],['lib/google/src/Google/Service','AdExchangeSeller.php',1692],['lib/google/src/Google/Service','YouTube.php',4123],['lib/google/src/Google/Service','YouTube.php',4747],['lib/google/src/Google/Service','YouTube.php',4916],['lib/google/src/Google/Service','YouTube.php',5963],['lib/google/src/Google/Service','YouTube.php',6121],['lib/google/src/Google/Service','YouTube.php',6247],['lib/google/src/Google/Service','YouTube.php',6648],['lib/google/src/Google/Service','YouTube.php',6890],['lib/google/src/Google/Service','YouTube.php',7218],['lib/google/src/Google/Service','YouTube.php',7688],['lib/google/src/Google/Service','YouTube.php',7889],['lib/google/src/Google/Service','YouTube.php',8249],['lib/google/src/Google/Service','YouTube.php',8560],['lib/google/src/Google/Service','YouTube.php',8858],['lib/google/src/Google/Service','YouTube.php',9188],['lib/google/src/Google/Service','YouTube.php',9691],['lib/google/src/Google/Service','YouTube.php',9752],['lib/google/src/Google/Service','Coordinate.php',843],['lib/google/src/Google/Service','Coordinate.php',983],['lib/google/src/Google/Service','Coordinate.php',1159],['lib/google/src/Google/Service','Coordinate.php',1370],['lib/google/src/Google/Service','Autoscaler.php',611],['lib/google/src/Google/Service','Autoscaler.php',1109],['lib/google/src/Google/Service','Autoscaler.php',1328],['lib/google/src/Google/Service','Webfonts.php',203],['lib/google/src/Google/Service','Audit.php',179],['lib/google/src/Google/Service','YouTubeAnalytics.php',297],['lib/google/src/Google/Service','YouTubeAnalytics.php',406],['lib/google/src/Google/Service','SQLAdmin.php',1185],['lib/google/src/Google/Service','SQLAdmin.php',1600],['lib/google/src/Google/Service','SQLAdmin.php',1987],['lib/google/src/Google/Service','SQLAdmin.php',2312],['lib/google/src/Google/Service','SQLAdmin.php',2682],['lib/google/src/Google/Service','SQLAdmin.php',2766],['lib/google/src/Google/Service','Directory.php',2782],['lib/google/src/Google/Service','Directory.php',3942],['lib/google/src/Google/Service','Directory.php',4392],['lib/google/src/Google/Service','Directory.php',5436],['lib/google/src/Google/Service','AppState.php',287],['lib/google/src/Google/Service','Taskqueue.php',649],['lib/google/src/Google/Service','Taskqueue.php',677],['lib/google/src/Google/Service','AdSenseHost.php',1290],['lib/google/src/Google/Service','AdSenseHost.php',1381],['lib/google/src/Google/Service','AdSenseHost.php',1776],['lib/google/src/Google/Service','AdSenseHost.php',1956],['lib/google/src/Google/Service','AdSenseHost.php',2145],['lib/google/src/Google/Service','Games.php',2402],['lib/google/src/Google/Service','Games.php',3023],['lib/google/src/Google/Service','Games.php',3204],['lib/google/src/Google/Service','Games.php',3986],['lib/google/src/Google/Service','Games.php',4080],['lib/google/src/Google/Service','Games.php',4620],['lib/google/src/Google/Service','Games.php',4710],['lib/google/src/Google/Service','Games.php',4896],['lib/google/src/Google/Service','Games.php',4985],['lib/google/src/Google/Service','Games.php',5566],['lib/google/src/Google/Service','Games.php',6169],['lib/google/src/Google/Service','Games.php',6723],['lib/google/src/Google/Service','Games.php',7116],['lib/google/src/Google/Service','Games.php',7337],['lib/google/src/Google/Service','SiteVerification.php',337],['lib/google/src/Google/Service','Prediction.php',1172],['lib/google/src/Google/Service','Compute.php',5636],['lib/google/src/Google/Service','Compute.php',5695],['lib/google/src/Google/Service','Compute.php',6221],['lib/google/src/Google/Service','Compute.php',6481],['lib/google/src/Google/Service','Compute.php',6540],['lib/google/src/Google/Service','Compute.php',6693],['lib/google/src/Google/Service','Compute.php',6752],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7291],['lib/google/src/Google/Service','Compute.php',7350],['lib/google/src/Google/Service','Compute.php',7719],['lib/google/src/Google/Service','Compute.php',7920],['lib/google/src/Google/Service','Compute.php',8177],['lib/google/src/Google/Service','Compute.php',8236],['lib/google/src/Google/Service','Compute.php',8476],['lib/google/src/Google/Service','Compute.php',8803],['lib/google/src/Google/Service','Compute.php',8862],['lib/google/src/Google/Service','Compute.php',9024],['lib/google/src/Google/Service','Compute.php',9216],['lib/google/src/Google/Service','Compute.php',9479],['lib/google/src/Google/Service','Compute.php',9592],['lib/google/src/Google/Service','Compute.php',10104],['lib/google/src/Google/Service','Compute.php',10321],['lib/google/src/Google/Service','Compute.php',10653],['lib/google/src/Google/Service','Compute.php',10704],['lib/google/src/Google/Service','Compute.php',10806],['lib/google/src/Google/Service','Compute.php',10949],['lib/google/src/Google/Service','Compute.php',11008],['lib/google/src/Google/Service','Compute.php',11271],['lib/google/src/Google/Service','Compute.php',11358],['lib/google/src/Google/Service','Compute.php',11753],['lib/google/src/Google/Service','Compute.php',12078],['lib/google/src/Google/Service','Calendar.php',1876],['lib/google/src/Google/Service','Calendar.php',2082],['lib/google/src/Google/Service','Calendar.php',3373],['lib/google/src/Google/Service','Calendar.php',3518],['lib/google/src/Google/Service','Calendar.php',3697],['lib/google/src/Google/Service','Analytics.php',3739],['lib/google/src/Google/Service','Analytics.php',3932],['lib/google/src/Google/Service','Analytics.php',4119],['lib/google/src/Google/Service','Analytics.php',4359],['lib/google/src/Google/Service','Analytics.php',4674],['lib/google/src/Google/Service','Analytics.php',4847],['lib/google/src/Google/Service','Analytics.php',5050],['lib/google/src/Google/Service','Analytics.php',5466],['lib/google/src/Google/Service','Analytics.php',6006],['lib/google/src/Google/Service','Analytics.php',6982],['lib/google/src/Google/Service','Analytics.php',7796],['lib/google/src/Google/Service','Analytics.php',8037],['lib/google/src/Google/Service','Analytics.php',8466],['lib/google/src/Google/Service','Analytics.php',8774],['lib/google/src/Google/Service','Analytics.php',8918],['lib/google/src/Google/Service','Analytics.php',9162],['lib/google/src/Google/Service','Tasks.php',841],['lib/google/src/Google/Service','Tasks.php',887],['lib/google/src/Google/Service','GamesManagement.php',1136],['lib/google/src/Google/Service','Storage.php',2110],['lib/google/src/Google/Service','Storage.php',2387],['lib/google/src/Google/Service','Storage.php',2767],['lib/google/src/Google/Service','Storage.php',2797],['lib/google/src/Google/Service','AdSense.php',2205],['lib/google/src/Google/Service','AdSense.php',2313],['lib/google/src/Google/Service','AdSense.php',2771],['lib/google/src/Google/Service','AdSense.php',2995],['lib/google/src/Google/Service','AdSense.php',3131],['lib/google/src/Google/Service','AdSense.php',3167],['lib/google/src/Google/Service','AdSense.php',3248],['lib/google/src/Google/Service','AdSense.php',3403],['lib/google/src/Google/Service','AdSense.php',3484],['lib/google/src/Google/Service','AdSense.php',3565],['lib/google/src/Google/Service','Replicapool.php',766],['lib/google/src/Google/Service','Replicapool.php',1182],['lib/google/src/Google/Service','Resourceviews.php',921],['lib/google/src/Google/Service','Resourceviews.php',1221],['lib/google/src/Google/Service','Resourceviews.php',1266]], 59],
'substring': ['substring', '', [['lib/horde/framework/Horde/Stream','TempString.php',183],['lib/horde/framework/Horde','Stream.php',351],['lib/phpexcel/PHPExcel/Shared','String.php',564]], 551],
'indexof': ['indexof', 'IndexOf - first version of find an element in the Array given returns the index of the *first* occurance ', [['backup/cc/cc_lib/gral_lib','functions.php',97]], 1415],
'setstart': ['setstart', '', [['lib/google/src/Google/Service','Genomics.php',2754],['lib/google/src/Google/Service','Genomics.php',3676],['lib/google/src/Google/Service','Genomics.php',3997],['lib/google/src/Google/Service','Genomics.php',4160],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',188],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',6675],['lib/google/src/Google/Service','AndroidPublisher.php',3211],['lib/google/src/Google/Service','MapsEngine.php',3321],['lib/google/src/Google/Service','CloudMonitoring.php',717],['lib/google/src/Google/Service','Calendar.php',2831],['lib/google/src/Google/Service','Calendar.php',3743]], 176],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1715],['lib/google/src/Google/Service','Games.php',2099]], 949],
'b': ['b', '', [['lib/flowplayer','flowplayer-3.2.13.js',321]], 477],
'setstyle': ['setstyle', '', [['lib/google/src/Google/Service','YouTube.php',4965],['lib/phpexcel/PHPExcel/Style','Conditional.php',237],['lib/google/src/Google/Service','MapsEngine.php',4383],['lib/zend/Zend/Soap','Client.php',509]], 2078],
'gettime': ['gettime', '', [['lib/google/src/Google/Service','Reports.php',735],['lib/google/src/Google/Service','PlusDomains.php',2828],['lib/zend/Zend/Gdata/YouTube','VideoQuery.php',417],['lib/google/src/Google/Service','Audit.php',404],['lib/zend/Zend','Date.php',2738],['lib/google/src/Google/Service','Analytics.php',4648],['lib/zend/Zend/Gdata/Exif/Extension','Tags.php',526],['lib/zend/Zend/Gdata/Media/Extension','MediaThumbnail.php',195]], 364],
'appendto': ['appendto', '', [['lib/yuilib/2in3/2.9.0/build/yui2-containercore','yui2-containercore.js',1696],['lib/yuilib/2in3/2.9.0/build/yui2-container','yui2-container-debug.js',1705],['lib/yuilib/2in3/2.9.0/build/yui2-container','yui2-container.js',1697],['lib/yuilib/2in3/2.9.0/build/yui2-containercore','yui2-containercore-debug.js',1704]], 132],
'set': ['set', '', [['lib/adodb','adodb-active-recordx.inc.php',620],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',286],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/portfolio','plugin.php',647],['lib/portfolio','exporter.php',154],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/pear/Net/GeoIP','Location.php',125],['cache/classes','interfaces.php',68],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['lib/google/src/Google/Cache','Memcache.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['cache','disabledlib.php',81],['grade/report/singleview/classes/local/ui','finalgrade.php',136],['cache/stores/memcached','lib.php',320],['lib/google/src/Google/Service','YouTube.php',3122],['lib/google/src/Google/Service','YouTube.php',3481],['lib/zend/Zend','Registry.php',153],['lib/phpmailer','class.phpmailer.php',3144],['grade/report/singleview/classes/local/ui','feedback.php',102],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/google/src/Google/Service','ShoppingContent.php',919],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['grade/report/singleview/classes/local/ui','override.php',95],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['cache/stores/static','lib.php',265],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/portfolio','caller.php',187],['lib/zend/Zend','Date.php',1056],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['cache/stores/memcache','lib.php',358],['lib','filelib.php',3615],['cache/stores/session','lib.php',290],['cache/classes','dummystore.php',170],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['grade/report/singleview/classes/local/ui','exclude.php',77],['cache/classes','loaders.php',484],['cache/classes','loaders.php',1370],['cache/classes','loaders.php',1815],['cache/stores/mongodb','lib.php',305],['lib/zend/Zend/Service','Audioscrobbler.php',125],['cache/stores/file','lib.php',425],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['lib/google/src/Google/Cache','Null.php',42],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/google/src/Google/Cache','File.php',84],['lib','navigationlib.php',5017],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Cache','Apc.php',80],['lib/adodb','adodb-active-record.inc.php',569],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203]], 4687],
'gettarget': ['gettarget', '', [['lib/google/src/Google/Service','Plus.php',2523],['lib/google/src/Google/Service','Autoscaler.php',590],['lib/google/src/Google/Service','Appsactivity.php',265],['lib/google/src/Google/Service','Container.php',782],['lib/google/src/Google/Service','Compute.php',7261],['lib/google/src/Google/Service','Compute.php',11567]], 225],
'execcommand': ['execcommand', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',15087]], 454],
'resize': ['resize', '', [['lib/yuilib/3.17.2/resize-base','resize-base-debug.js',172],['repository/flickr_public','image.php',114],['lib/yuilib/3.17.2/resize-base','resize-base.js',172],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/autoresize','editor_plugin_src.js',34],['lib/google/src/Google/Service','Replicapool.php',497]], 113],
'focus': ['focus', 'To autofocus on first form element or first element with error. ', [['lib','formslib.php',219]], 919],
'apply': ['apply', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16662]], 2571],
'script': ['script', 'Generate a script tag containing the the specified code. ', [['lib','outputcomponents.php',1471],['lib/minify/lib','JSMinPlus.php',745]], 80],
'getattribute': ['getattribute', 'Get a specific attribute by name ', [['auth/cas/CAS/CAS','Client.php',1195],['lib/google/src/Google/Service','AdExchangeBuyer.php',998],['lib/pear/HTML','Common.php',261],['lib/zend/Zend/Service/Amazon','Sqs.php',282],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',276],['auth/cas/CAS','CAS.php',1161]], 1046],
'image': ['image', 'Puts an image in the page. The upper-left corner must be given. The dimensions can be specified in different ways:<ul> <li>explicit width and height (expressed in user unit)</li> <li>one explicit dimension, the other being calculated automatically in order to keep the original proportions</li> <li>no explicit dimension, in which case the image is put at 72 dpi</li></ul> Supported formats are JPEG and PNG images whitout GD library and all images supported by GD: GD, GD2, GD2PART, GIF, JPEG, PNG, BMP, XBM, XPM; The format can be specified explicitly or inferred from the file extension.<br /> It is possible to put a link on the image.<br /> Remark: if an image is used several times, only one copy will be embedded in the file.<br /> ', [['lib/tcpdf','tcpdf.php',6784],['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',292],['mod/data','lib.php',480],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',217]], 54],
'insertbefore': ['insertbefore', 'Inserts a token before the current token. Cursor now points to this token.  You must reprocess after this. ', [['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',576],['lib/htmlpurifier/HTMLPurifier','Zipper.php',106]], 505],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1063],['lib/zend/Zend/Service','Technorati.php',228]], 1254],
'setproperty': ['setproperty', '', [['lib/google/src/Google/Service','YouTube.php',8148],['lib/google/src/Google/Service','Datastore.php',1011],['lib/google/src/Google/Service','Datastore.php',1040],['lib/google/src/Google/Service','Datastore.php',1075]], 598],
'overlay': ['overlay', '', [['lib/lessphp','Functions.php',943]], 29],
'div': ['div', 'Divides two numbers, using arbitrary precision when available. ', [['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',239],['lib','outputcomponents.php',1809]], 130],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'submit': ['submit', 'Submits a sitemap for a site. (sitemaps.submit) ', [['lib/google/src/Google/Service','Webmasters.php',348],['lib/google/src/Google/Service','Games.php',1892]], 72],
'get': ['get', 'Gets a customer resource if one exists and is owned by the reseller. (customers.get) ', [['lib/google/src/Google/Service','Reseller.php',294],['lib/google/src/Google/Service','Reseller.php',457],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['lib/google/src/Google/Service','Replicapoolupdater.php',275],['lib/zend/Zend/Gdata','Gapps.php',187],['lib/google/src/Google/Service','Fusiontables.php',658],['lib/google/src/Google/Service','Fusiontables.php',823],['lib/google/src/Google/Service','Fusiontables.php',947],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',148],['lib/htmlpurifier/HTMLPurifier','Context.php',36],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','Blogger.php',931],['lib/google/src/Google/Service','Blogger.php',962],['lib/google/src/Google/Service','Blogger.php',1066],['lib/google/src/Google/Service','Blogger.php',1184],['lib/google/src/Google/Service','Blogger.php',1226],['lib/google/src/Google/Service','Blogger.php',1365],['lib/google/src/Google/Service','Blogger.php',1448],['lib/google/src/Google/Service','Blogger.php',1669],['lib/google/src/Google/Service','Doubleclicksearch.php',256],['lib/google/src/Google/Service','Doubleclicksearch.php',380],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','AdExchangeBuyer.php',349],['lib/google/src/Google/Service','AdExchangeBuyer.php',419],['lib/google/src/Google/Service','AdExchangeBuyer.php',460],['lib/google/src/Google/Service','AdExchangeBuyer.php',528],['lib/google/src/Google/Service','AdExchangeBuyer.php',620],['lib/google/src/Google/Service','Manager.php',255],['lib/google/src/Google/Service','Manager.php',334],['lib/google/src/Google/Service','Reports.php',374],['lib/google/src/Google/Service','Reports.php',408],['lib/portfolio','exporter.php',134],['lib','webdavlib.php',264],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','Gmail.php',702],['lib/google/src/Google/Service','Gmail.php',859],['lib/google/src/Google/Service','Gmail.php',952],['lib/google/src/Google/Service','Gmail.php',1118],['lib/google/src/Google/Service','Gmail.php',1162],['lib/google/src/Google/Service','Plus.php',352],['lib/google/src/Google/Service','Plus.php',427],['lib/google/src/Google/Service','Plus.php',547],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/testing/classes','nasty_strings.php',73],['lib/google/src/Google/Service','Mirror.php',437],['lib/google/src/Google/Service','Mirror.php',522],['lib/google/src/Google/Service','Mirror.php',562],['lib/google/src/Google/Service','Mirror.php',673],['lib/google/src/Google/Service','Mirror.php',785],['lib/google/src/Google/Service','Genomics.php',645],['lib/google/src/Google/Service','Genomics.php',744],['lib/google/src/Google/Service','Genomics.php',891],['lib/google/src/Google/Service','Genomics.php',997],['lib/google/src/Google/Service','Genomics.php',1187],['lib/google/src/Google/Service','Genomics.php',1269],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1430],['lib/google/src/Google/Service','Urlshortener.php',108],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Dfareporting.php',421],['lib/google/src/Google/Service','Dfareporting.php',484],['lib/google/src/Google/Service','Dfareporting.php',626],['lib/google/src/Google/Service','Dfareporting.php',675],['lib/google/src/Google/Service','PlusDomains.php',467],['lib/google/src/Google/Service','PlusDomains.php',592],['lib/google/src/Google/Service','PlusDomains.php',718],['lib/google/src/Google/Service','PlusDomains.php',812],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','Licensing.php',236],['lib/google/src/Google/Service','Drive.php',1277],['lib/google/src/Google/Service','Drive.php',1313],['lib/google/src/Google/Service','Drive.php',1366],['lib/google/src/Google/Service','Drive.php',1476],['lib/google/src/Google/Service','Drive.php',1550],['lib/google/src/Google/Service','Drive.php',1706],['lib/google/src/Google/Service','Drive.php',1946],['lib/google/src/Google/Service','Drive.php',2016],['lib/google/src/Google/Service','Drive.php',2147],['lib/google/src/Google/Service','Drive.php',2241],['lib/google/src/Google/Service','Drive.php',2309],['lib/google/src/Google/Service','Drive.php',2428],['lib/google/src/Google/Service','Books.php',1343],['lib/google/src/Google/Service','Books.php',1512],['lib/google/src/Google/Service','Books.php',1564],['lib/google/src/Google/Service','Books.php',1639],['lib/google/src/Google/Service','Books.php',1819],['lib/google/src/Google/Service','Books.php',1960],['lib/google/src/Google/Service','Books.php',2077],['lib/google/src/Google/Service','Books.php',2175],['lib/google/src/Google/Service','Books.php',2207],['lib/zend/Zend/Gdata','App.php',847],['lib/google/src/Google/Service','AdExchangeSeller.php',443],['lib/google/src/Google/Service','AdExchangeSeller.php',551],['lib/google/src/Google/Service','AdExchangeSeller.php',665],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['lib/google/src/Google/Cache','Memcache.php',72],['lib/google/src/Google/Service','Bigquery.php',533],['lib/google/src/Google/Service','Bigquery.php',633],['lib/google/src/Google/Service','Bigquery.php',838],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['cache','disabledlib.php',55],['lib/zend/Zend/Server','Cache.php',78],['lib/google/src/Google/Service','Groupssettings.php',107],['cache/stores/memcached','lib.php',285],['lib/google/src/Google/Service','Coordinate.php',476],['lib/google/src/Google/Service','Coordinate.php',642],['lib/zend/Zend','Registry.php',130],['lib/google/src/Google/Service','Webmasters.php',314],['lib/google/src/Google/Service','Webmasters.php',403],['lib/google/src/Google/Service','Webmasters.php',479],['lib/google/src/Google/Service','Autoscaler.php',330],['lib/google/src/Google/Service','Autoscaler.php',444],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/google/src/Google/Service','ShoppingContent.php',567],['lib/google/src/Google/Service','ShoppingContent.php',675],['lib/google/src/Google/Service','ShoppingContent.php',749],['lib/google/src/Google/Service','ShoppingContent.php',857],['lib/google/src/Google/Service','ShoppingContent.php',985],['lib/google/src/Google/Service','ShoppingContent.php',1062],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/editor/tinymce/classes','plugin.php',447],['mod/lesson','locallib.php',3239],['lib/horde/framework/Horde','Variables.php',135],['lib/google/src/Google/Service','SQLAdmin.php',528],['lib/google/src/Google/Service','SQLAdmin.php',664],['lib/google/src/Google/Service','SQLAdmin.php',872],['lib/google/src/Google/Service','SQLAdmin.php',941],['lib/google/src/Google/Service','Fitness.php',363],['lib/google/src/Google/Service','Fitness.php',489],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1063],['lib/google/src/Google/Service','TagManager.php',1155],['lib/google/src/Google/Service','TagManager.php',1248],['lib/google/src/Google/Service','TagManager.php',1341],['lib/google/src/Google/Service','TagManager.php',1434],['lib/google/src/Google/Service','TagManager.php',1528],['lib/google/src/Google/Service','TagManager.php',1622],['lib/google/src/Google/Service','TagManager.php',1772],['lib/google/src/Google/Service','Directory.php',1315],['lib/google/src/Google/Service','Directory.php',1383],['lib/google/src/Google/Service','Directory.php',1490],['lib/google/src/Google/Service','Directory.php',1656],['lib/google/src/Google/Service','Directory.php',1783],['lib/google/src/Google/Service','Directory.php',1853],['lib/google/src/Google/Service','Directory.php',1949],['lib/google/src/Google/Service','Directory.php',2056],['lib/google/src/Google/Service','Directory.php',2160],['lib/google/src/Google/Service','Directory.php',2218],['lib/google/src/Google/Service','Directory.php',2493],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['cache/stores/static','lib.php',220],['question/engine','states.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/google/src/Google/Service','AppState.php',170],['lib/google/src/Google/Service','Taskqueue.php',263],['lib/google/src/Google/Service','Taskqueue.php',307],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Container.php',364],['lib/google/src/Google/Service','Container.php',411],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','AndroidPublisher.php',1194],['lib/google/src/Google/Service','AndroidPublisher.php',1296],['lib/google/src/Google/Service','AndroidPublisher.php',1437],['lib/google/src/Google/Service','AndroidPublisher.php',1500],['lib/google/src/Google/Service','AndroidPublisher.php',1723],['lib/google/src/Google/Service','AndroidPublisher.php',1811],['lib/google/src/Google/Service','AndroidPublisher.php',1875],['lib/google/src/Google/Service','AndroidPublisher.php',1987],['lib/google/src/Google/Service','AndroidPublisher.php',2112],['lib/google/src/Google/Service','AndroidPublisher.php',2182],['lib/zend/Zend','Date.php',516],['lib/google/src/Google/Service','AdSenseHost.php',644],['lib/google/src/Google/Service','AdSenseHost.php',685],['lib/google/src/Google/Service','AdSenseHost.php',750],['lib/google/src/Google/Service','AdSenseHost.php',917],['lib/google/src/Google/Service','AdSenseHost.php',1025],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Games.php',1219],['lib/google/src/Google/Service','Games.php',1338],['lib/google/src/Google/Service','Games.php',1440],['lib/google/src/Google/Service','Games.php',1698],['lib/google/src/Google/Service','Games.php',1805],['lib/google/src/Google/Service','Games.php',1947],['lib/google/src/Google/Service','Games.php',2081],['lib','filelib.php',3341],['lib','filelib.php',3589],['lib','oauthlib.php',302],['lib/google/src/Google/Service','MapsEngine.php',1529],['lib/google/src/Google/Service','MapsEngine.php',1708],['lib/google/src/Google/Service','MapsEngine.php',2005],['lib/google/src/Google/Service','MapsEngine.php',2267],['lib/google/src/Google/Service','MapsEngine.php',2359],['lib/google/src/Google/Service','MapsEngine.php',2665],['lib/google/src/Google/Service','MapsEngine.php',2926],['lib/google/src/Google/Service','MapsEngine.php',3117],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','SiteVerification.php',151],['lib/horde/framework/Horde/Support','Array.php',30],['lib/google/src/Google/Service','Prediction.php',275],['cache/stores/session','lib.php',225],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Compute.php',2828],['lib/google/src/Google/Service','Compute.php',2911],['lib/google/src/Google/Service','Compute.php',3050],['lib/google/src/Google/Service','Compute.php',3155],['lib/google/src/Google/Service','Compute.php',3240],['lib/google/src/Google/Service','Compute.php',3377],['lib/google/src/Google/Service','Compute.php',3478],['lib/google/src/Google/Service','Compute.php',3558],['lib/google/src/Google/Service','Compute.php',3676],['lib/google/src/Google/Service','Compute.php',3741],['lib/google/src/Google/Service','Compute.php',3876],['lib/google/src/Google/Service','Compute.php',3957],['lib/google/src/Google/Service','Compute.php',4132],['lib/google/src/Google/Service','Compute.php',4306],['lib/google/src/Google/Service','Compute.php',4355],['lib/google/src/Google/Service','Compute.php',4421],['lib/google/src/Google/Service','Compute.php',4486],['lib/google/src/Google/Service','Compute.php',4559],['lib/google/src/Google/Service','Compute.php',4611],['lib/google/src/Google/Service','Compute.php',4675],['lib/google/src/Google/Service','Compute.php',4756],['lib/google/src/Google/Service','Compute.php',4822],['lib/google/src/Google/Service','Compute.php',4943],['lib/google/src/Google/Service','Compute.php',5085],['lib/google/src/Google/Service','Compute.php',5244],['lib/google/src/Google/Service','Compute.php',5376],['lib/google/src/Google/Service','Compute.php',5428],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Calendar.php',900],['lib/google/src/Google/Service','Calendar.php',1053],['lib/google/src/Google/Service','Calendar.php',1241],['lib/google/src/Google/Service','Calendar.php',1337],['lib/google/src/Google/Service','Calendar.php',1379],['lib/google/src/Google/Service','Calendar.php',1780],['lib/google/src/Google/Service','Analytics.php',1891],['lib/google/src/Google/Service','Analytics.php',1940],['lib/google/src/Google/Service','Analytics.php',1987],['lib/google/src/Google/Service','Analytics.php',2309],['lib/google/src/Google/Service','Analytics.php',2429],['lib/google/src/Google/Service','Analytics.php',2522],['lib/google/src/Google/Service','Analytics.php',2648],['lib/google/src/Google/Service','Analytics.php',2867],['lib/google/src/Google/Service','Analytics.php',3004],['lib/google/src/Google/Service','Analytics.php',3095],['lib/google/src/Google/Service','Analytics.php',3197],['lib/google/src/Google/Service','Analytics.php',3308],['lib/google/src/Google/Service','Tasks.php',322],['lib/google/src/Google/Service','Tasks.php',441],['lib/behat/classes','behat_context_helper.php',66],['backup/cc/cc_lib/gral_lib','cssparser.php',137],['cache/classes','loaders.php',270],['cache/classes','loaders.php',1442],['cache/classes','loaders.php',1749],['cache/stores/mongodb','lib.php',252],['lib/zend/Zend/Service','Audioscrobbler.php',110],['lib/google/src/Google/Service','Oauth2.php',143],['lib/google/src/Google/Service','Oauth2.php',180],['cache/stores/file','lib.php',329],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Storage.php',962],['lib/google/src/Google/Service','Storage.php',1078],['lib/google/src/Google/Service','Storage.php',1244],['lib/google/src/Google/Service','Storage.php',1370],['lib/google/src/Google/Service','Storage.php',1592],['lib/google/src/Google/Cache','Null.php',34],['lib/google/src/Google/Service','AdSense.php',1075],['lib/google/src/Google/Service','AdSense.php',1154],['lib/google/src/Google/Service','AdSense.php',1302],['lib/google/src/Google/Service','AdSense.php',1518],['lib/google/src/Google/Service','AdSense.php',1630],['lib/google/src/Google/Service','AdSense.php',1772],['lib/google/src/Google/Service','AdSense.php',2046],['lib/google/src/Google/Service','Pubsub.php',254],['lib/google/src/Google/Service','Pubsub.php',393],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['lib/google/src/Google/Cache','File.php',45],['lib','navigationlib.php',382],['lib','navigationlib.php',833],['lib','navigationlib.php',2693],['lib','navigationlib.php',3126],['lib/google/src/Google/Service','Dns.php',299],['lib/google/src/Google/Service','Dns.php',385],['lib/google/src/Google/Service','Dns.php',434],['lib/mustache/src/Mustache','HelperCollection.php',81],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapool.php',416],['lib/google/src/Google/Service','Replicapool.php',571],['lib/google/src/Google/Service','Resourceviews.php',350],['lib/google/src/Google/Service','Resourceviews.php',435],['lib','coursecatlib.php',215],['lib/google/src/Google/Cache','Apc.php',50],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163]], 21003],
'register': ['register', 'Registers a custom scheme to the cache, bypassing reflection. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',70],['lib/zend/Zend/Service/Amazon/Ec2','Image.php',39],['lib/htmlpurifier/HTMLPurifier','Context.php',19],['lib/google/src/Google/Service','Spectrum.php',163],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16599],['lib/lessphp','Autoloader.php',25],['lib/simplepie/library/SimplePie','Cache.php',106],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',18],['lib/phpexcel/PHPExcel','Autoloader.php',48],['lib/mustache/src/Mustache','Autoloader.php',39],['lib/phpexcel/PHPExcel/Shared','ZipStreamWrapper.php',65],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',48],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',76],['lib/simplepie/library/SimplePie','Registry.php',106],['lib/minify/lib/Minify','Loader.php',23]], 307],
'setend': ['setend', '', [['lib/google/src/Google/Service','Genomics.php',2738],['lib/google/src/Google/Service','Genomics.php',3628],['lib/google/src/Google/Service','Genomics.php',3957],['lib/google/src/Google/Service','Genomics.php',4096],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',206],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',6679],['lib/google/src/Google/Service','AndroidPublisher.php',3203],['lib/google/src/Google/Service','MapsEngine.php',3305],['lib/google/src/Google/Service','CloudMonitoring.php',701],['lib/google/src/Google/Service','Calendar.php',2647],['lib/google/src/Google/Service','Calendar.php',3735]], 167],
'element': ['element', 'Prints a complete element with content inside ', [['lib/htmlpurifier/HTMLPurifier','Printer.php',70]], 91],
'body': ['body', 'Parse the body ', [['lib/simplepie/library/SimplePie/HTTP','Parser.php',438],['lib/simplepie/library/SimplePie','Locator.php',344]], 4],
'editor': ['editor', 'The Atto editor for Moodle. ', [['lib/editor/atto/yui/src/editor/js','editor.js',41],['lib/editor/atto/yui/build/moodle-editor_atto-editor','moodle-editor_atto-editor-debug.js',43],['lib/editor/atto/yui/build/moodle-editor_atto-editor','moodle-editor_atto-editor.js',43]], 27],
'embed': ['embed', '', [['lib/tests','medialib_test.php',637],['lib/simplepie/library/SimplePie','Enclosure.php',925],['lib','medialib.php',414],['lib','medialib.php',686],['lib','medialib.php',728],['lib','medialib.php',772],['lib','medialib.php',848],['lib','medialib.php',916],['lib','medialib.php',975],['lib','medialib.php',1037],['lib','medialib.php',1156],['lib','medialib.php',1239]], 15],
'isnumber': ['isnumber', '', [['lib/lessphp','Functions.php',651]], 793],
'call': ['call', 'Execute client WS request with token authentication ', [['webservice/rest','lib.php',69],['webservice/soap','lib.php',65],['lib/google/src/Google/Service','Resource.php',71],['webservice/xmlrpc','lib.php',63],['lib/markdown','Readme.md',68],['lib/simplepie/library/SimplePie','Registry.php',194],['lib/zend/Zend/XmlRpc','Client.php',300],['lib','flickrlib.php',254]], 4447],
'removeattribute': ['removeattribute', 'Removes an attribute ', [['lib/pear/HTML','Common.php',316]], 309],
'ondomready': ['ondomready', '', [['lib/yuilib/2in3/2.9.0/build/yui2-container','yui2-container-debug.js',4958],['lib/yuilib/2in3/2.9.0/build/yui2-container','yui2-container.js',4948]], 24],
'subscribe': ['subscribe', 'Send Auth request ', [['lib/jabber/XMPP','XMPP.php',211]], 933],
'open': ['open', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/searchreplace','editor_plugin_src.js',14],['lib','webdavlib.php',156],['lib/tcpdf','tcpdf.php',2931],['lib/pear/Net','GeoIP.php',400],['lib/pear/Auth','RADIUS.php',251],['lib/pear/Auth','RADIUS.php',586],['lib/pear/Auth','RADIUS.php',893],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',64],['auth/fc','fcFPP.php',42],['lib/filestorage','zip_archive.php',73],['auth/cas/CAS/CAS/ProxiedService','Imap.php',179],['lib/google/src/Google/Logger','File.php',94],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',92]], 254],
'dispatchevent': ['dispatchevent', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',684],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',684],['lib/editor/atto/yui/src/rangy/js','rangy-core.js',684]], 42],
'substitute': ['substitute', 'SUBSTITUTE ', [['lib/phpexcel/PHPExcel/Calculation','TextData.php',509]], 75],
'selectnodecontents': ['selectnodecontents', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',6716]], 38],
'write': ['write', 'Send request to the remote server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',250],['lib/horde/framework/Horde','Secret.php',62],['lib/google/src/Google/Logger','Null.php',35],['lib/tcpdf','tcpdf.php',6254],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Pop3.php',35],['lib','excellib.class.php',268],['lib/zend/Zend/Gdata','HttpAdapterStreamingSocket.php',49],['auth/cas/CAS/CAS/PGTStorage','File.php',188],['lib/zend/Zend/Http/Client/Adapter','Test.php',142],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',80],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',109],['admin/tool/log/classes/helper','buffered_writer.php',53],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',187],['lib/zend/Zend/Http/Client/Adapter','Interface.php',54],['lib/alfresco/Service/Logger','Logger.php',75],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Socket.php',38],['admin/tool/log/classes/log','writer.php',30],['backup/util/xml','xml_writer.class.php',224],['lib','odslib.class.php',258],['lib/zend/Zend/Gdata','HttpAdapterStreamingProxy.php',48],['lib/google/src/Google/Logger','File.php',72],['auth/cas/CAS/CAS/PGTStorage','Db.php',340],['lib/google/src/Google/Logger','Psr.php',85],['lib/zend/Zend/Http/Client/Adapter','Curl.php',251],['backup/util/xml/output','xml_output.class.php',103],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',142]], 227],
'replace': ['replace', '', [['lib/adodb','adodb-active-recordx.inc.php',985],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',48],['lib/adodb','adodb.inc.php',1669],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/searchreplace/js','searchreplace.js',70],['lib/phpexcel/PHPExcel/Calculation','TextData.php',487],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',49],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',2448],['lib/google/src/Google/Utils','URITemplate.php',83],['lib/lessphp','Functions.php',373],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',61],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',70],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',55],['lib/adodb','adodb-active-record.inc.php',813]], 3262],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'i': ['i', '', [['lib/flowplayer','flowplayer-3.2.13.js',703],['lib/flowplayer','flowplayer-3.2.13.js',846],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',202]], 413],
'select': ['select', 'Create a new Zend_Service_WindowsAzure_Storage_TableEntityQuery ', [['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',455],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntityQuery.php',74],['lib','outputcomponents.php',1255],['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845]], 593],
'setheader': ['setheader', 'This method is used to render the page header. ', [['lib/tcpdf','tcpdf.php',3511],['lib/minify/lib','FirePHP.php',779],['lib/google/src/Google/Service','Datastore.php',269],['lib/google/src/Google/Service','Datastore.php',313],['lib/google/src/Google/Service','Datastore.php',386],['lib/google/src/Google/Service','Datastore.php',734],['lib/google/src/Google/Service','Datastore.php',1320],['lib/google/src/Google/Service','Datastore.php',1396],['lib/google/src/Google/Service','Pagespeedonline.php',318],['lib','filelib.php',2893],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',176],['repository/s3','S3.php',2060]], 89],
'isstring': ['isstring', '', [['lib/lessphp','Functions.php',655]], 898],
'encodeuricomponent': ['encodeuricomponent', 'Php version of javascript\'s `encodeURIComponent` function ', [['lib/lessphp','Functions.php',893]], 150],
'getmenu': ['getmenu', 'Generate a SELECT tag string from a recordset, and return the string. If the recordset has 2 cols, we treat the 1st col as the containing the text to display to the user, and 2nd col as the return value. Default strings are compared with the FIRST column. ', [['lib/adodb','adodb.inc.php',2999]], 98],
'removechild': ['removechild', '', [['lib/yuilib/2in3/2.9.0/build/yui2-button','yui2-button-debug.js',2625],['lib/yuilib/2in3/2.9.0/build/yui2-button','yui2-button.js',2602],['lib/alfresco/Service','Node.php',188]], 689],
'clonenode': ['clonenode', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table','editor_plugin_src.js',46]], 250],
'hasclass': ['hasclass', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/template','editor_plugin_src.js',82],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',3258],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',13134],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',3258],['lib/editor/atto/yui/src/rangy/js','rangy-cssclassapplier.js',28]], 833],
'setbody': ['setbody', '', [['lib/google/src/Google/Service','Fusiontables.php',2399],['auth/cas/CAS/CAS/ProxiedService/Http','Post.php',107],['lib/google/src/Google/Service','Gmail.php',1671],['lib/google/src/Google/Service','Directory.php',3851],['lib/horde/framework/Horde/Mime','Mail.php',189]], 46],
'selectnode': ['selectnode', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',6711]], 93],
'setattribute': ['setattribute', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',994],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',253]], 1842],
'getstyle': ['getstyle', 'Get the computed style of an element. ', [['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel.js',340],['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel-debug.js',341],['lib/google/src/Google/Service','YouTube.php',4969],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17496],['lib/editor/tinymce/tiny_mce/3.5.11/utils','form_utils.js',200],['lib/phpexcel/PHPExcel','Worksheet.php',1405],['lib/phpexcel/PHPExcel/Style','Conditional.php',228],['lib/phpexcel/PHPExcel','Cell.php',499],['lib/google/src/Google/Service','MapsEngine.php',4387],['lib/zend/Zend/Soap','Client.php',530]], 794],
'destroy': ['destroy', 'Destroy all circular references. It helps PHP 5.2 a lot! ', [['backup/util/plan','base_plan.class.php',192],['lib/htmlpurifier/HTMLPurifier','Context.php',57],['backup/util/ui','base_ui.class.php',97],['backup/util/settings','base_setting.class.php',125],['backup/util/settings','setting_dependency.class.php',81],['backup/util/plan','base_task.class.php',199],['backup/util/structure','base_final_element.class.php',53],['backup/util/plan','backup_plan.class.php',51],['backup/util/plan','base_step.class.php',60],['backup/util/ui','restore_ui_stage.class.php',208],['backup/util/structure','base_nested_element.class.php',62],['repository/flickr_public','image.php',65],['backup/util/plan','restore_plan.class.php',62],['lib/adodb','adodb-xmlschema03.inc.php',174],['lib/adodb','adodb-xmlschema03.inc.php',2371],['lib/adodb','adodb-xmlschema.inc.php',156],['lib/adodb','adodb-xmlschema.inc.php',2190],['backup/util/ui','backup_ui_setting.class.php',78],['backup/converter','convertlib.php',255],['backup/controller','restore_controller.class.php',158],['backup/controller','backup_controller.class.php',146],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',166]], 461],
'date': ['date', '', [], 790],
'trim': ['trim', '', [], 1889],
'round': ['round', '', [], 903],
'split': ['split', '', [], 852],
'log': ['log', '', [], 2067]};
CLASS_DATA={
'override': ['override', 'An override grade checkbox element ', [['grade/report/singleview/classes/local/ui','override.php',29]], 2]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
