<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/yuilib/3.17.2/loader-base/loader-base.js source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='lib/yuilib/3.17.2/loader-base';
filename='loader-base.js.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/yuilib/3.17.2/loader-base/</a> -> <a href="loader-base.js.html">loader-base.js</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="loader-base.js.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="loader-base.js.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment">/*</span>
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">YUI 3.17.2 (build 9c3c78e)</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">Copyright 2014 Yahoo! Inc. All rights reserved.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">Licensed under the BSD License.</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">http://yuilibrary.com/license/</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">*/</span>
<a name="l7"><span class="linenum">   7</span></a>  
<a name="l8"><span class="linenum">   8</span></a>  YUI.<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('loader-base', function (Y, NAME) {
<a name="l9"><span class="linenum">   9</span></a>  
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">/**</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * The YUI loader core</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * @module loader</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @submodule loader-base</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  
<a name="l16"><span class="linenum">  16</span></a>  (function() {
<a name="l17"><span class="linenum">  17</span></a>      var VERSION = Y.version,
<a name="l18"><span class="linenum">  18</span></a>          BUILD = '/build/',
<a name="l19"><span class="linenum">  19</span></a>          ROOT = VERSION + '/',
<a name="l20"><span class="linenum">  20</span></a>          CDN_BASE = Y.Env.base,
<a name="l21"><span class="linenum">  21</span></a>          GALLERY_VERSION = 'gallery-2014.05.29-15-46',
<a name="l22"><span class="linenum">  22</span></a>          TNT = '2in3',
<a name="l23"><span class="linenum">  23</span></a>          TNT_VERSION = '4',
<a name="l24"><span class="linenum">  24</span></a>          YUI2_VERSION = '2.9.0',
<a name="l25"><span class="linenum">  25</span></a>          COMBO_BASE = CDN_BASE + 'combo?',
<a name="l26"><span class="linenum">  26</span></a>          META = {
<a name="l27"><span class="linenum">  27</span></a>              version: VERSION,
<a name="l28"><span class="linenum">  28</span></a>              root: ROOT,
<a name="l29"><span class="linenum">  29</span></a>              base: Y.Env.base,
<a name="l30"><span class="linenum">  30</span></a>              comboBase: COMBO_BASE,
<a name="l31"><span class="linenum">  31</span></a>              skin: {
<a name="l32"><span class="linenum">  32</span></a>                  defaultSkin: 'sam',
<a name="l33"><span class="linenum">  33</span></a>                  base: 'assets/skins/',
<a name="l34"><span class="linenum">  34</span></a>                  path: 'skin.css',
<a name="l35"><span class="linenum">  35</span></a>                  after: [
<a name="l36"><span class="linenum">  36</span></a>                      'cssreset',
<a name="l37"><span class="linenum">  37</span></a>                      'cssfonts',
<a name="l38"><span class="linenum">  38</span></a>                      'cssgrids',
<a name="l39"><span class="linenum">  39</span></a>                      'cssbase',
<a name="l40"><span class="linenum">  40</span></a>                      'cssreset-context',
<a name="l41"><span class="linenum">  41</span></a>                      'cssfonts-context'
<a name="l42"><span class="linenum">  42</span></a>                  ]
<a name="l43"><span class="linenum">  43</span></a>              },
<a name="l44"><span class="linenum">  44</span></a>              groups: {},
<a name="l45"><span class="linenum">  45</span></a>              patterns: {}
<a name="l46"><span class="linenum">  46</span></a>          },
<a name="l47"><span class="linenum">  47</span></a>          groups = META.groups,
<a name="l48"><span class="linenum">  48</span></a>          yui2Update = function(tnt, yui2, config) {
<a name="l49"><span class="linenum">  49</span></a>              var root = TNT + '.' +
<a name="l50"><span class="linenum">  50</span></a>                      (tnt || TNT_VERSION) + '/' +
<a name="l51"><span class="linenum">  51</span></a>                      (yui2 || YUI2_VERSION) + BUILD,
<a name="l52"><span class="linenum">  52</span></a>                  base = (config &amp;&amp; config.base) ? config.base : CDN_BASE,
<a name="l53"><span class="linenum">  53</span></a>                  combo = (config &amp;&amp; config.comboBase) ? config.comboBase : COMBO_BASE;
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>              groups.yui2.base = base + root;
<a name="l56"><span class="linenum">  56</span></a>              groups.yui2.root = root;
<a name="l57"><span class="linenum">  57</span></a>              groups.yui2.comboBase = combo;
<a name="l58"><span class="linenum">  58</span></a>          },
<a name="l59"><span class="linenum">  59</span></a>          galleryUpdate = function(tag, config) {
<a name="l60"><span class="linenum">  60</span></a>              var root = (tag || GALLERY_VERSION) + BUILD,
<a name="l61"><span class="linenum">  61</span></a>                  base = (config &amp;&amp; config.base) ? config.base : CDN_BASE,
<a name="l62"><span class="linenum">  62</span></a>                  combo = (config &amp;&amp; config.comboBase) ? config.comboBase : COMBO_BASE;
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>              groups.gallery.base = base + root;
<a name="l65"><span class="linenum">  65</span></a>              groups.gallery.root = root;
<a name="l66"><span class="linenum">  66</span></a>              groups.gallery.comboBase = combo;
<a name="l67"><span class="linenum">  67</span></a>          };
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>      groups[VERSION] = {};
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      groups.gallery = {
<a name="l73"><span class="linenum">  73</span></a>          ext: false,
<a name="l74"><span class="linenum">  74</span></a>          combine: true,
<a name="l75"><span class="linenum">  75</span></a>          comboBase: COMBO_BASE,
<a name="l76"><span class="linenum">  76</span></a>          update: galleryUpdate,
<a name="l77"><span class="linenum">  77</span></a>          patterns: {
<a name="l78"><span class="linenum">  78</span></a>              'gallery-': {},
<a name="l79"><span class="linenum">  79</span></a>              'lang/gallery-': {},
<a name="l80"><span class="linenum">  80</span></a>              'gallerycss-': {
<a name="l81"><span class="linenum">  81</span></a>                  type: 'css'
<a name="l82"><span class="linenum">  82</span></a>              }
<a name="l83"><span class="linenum">  83</span></a>          }
<a name="l84"><span class="linenum">  84</span></a>      };
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>      groups.yui2 = {
<a name="l87"><span class="linenum">  87</span></a>          combine: true,
<a name="l88"><span class="linenum">  88</span></a>          ext: false,
<a name="l89"><span class="linenum">  89</span></a>          comboBase: COMBO_BASE,
<a name="l90"><span class="linenum">  90</span></a>          update: yui2Update,
<a name="l91"><span class="linenum">  91</span></a>          patterns: {
<a name="l92"><span class="linenum">  92</span></a>              'yui2-': {
<a name="l93"><span class="linenum">  93</span></a>                  configFn: function(me) {
<a name="l94"><span class="linenum">  94</span></a>                      if (/-skin|reset|fonts|grids|base/.test(me.name)) {
<a name="l95"><span class="linenum">  95</span></a>                          me.type = 'css';
<a name="l96"><span class="linenum">  96</span></a>                          me.path = me.path.<a class="function" onClick="logFunction('replace')" href="../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\.js/, '.css');
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">                        // this makes skins in builds earlier than</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">                        // 2.6.0 work as long as combine is false</span>
<a name="l99"><span class="linenum">  99</span></a>                          me.path = me.path.<a class="function" onClick="logFunction('replace')" href="../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/\/yui2-skin/,
<a name="l100"><span class="linenum"> 100</span></a>                                              '/assets/skins/sam/yui2-skin');
<a name="l101"><span class="linenum"> 101</span></a>                      }
<a name="l102"><span class="linenum"> 102</span></a>                  }
<a name="l103"><span class="linenum"> 103</span></a>              }
<a name="l104"><span class="linenum"> 104</span></a>          }
<a name="l105"><span class="linenum"> 105</span></a>      };
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      galleryUpdate();
<a name="l108"><span class="linenum"> 108</span></a>      yui2Update();
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>      if (YUI.Env[VERSION]) {
<a name="l111"><span class="linenum"> 111</span></a>          Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(META, YUI.Env[VERSION], false, [
<a name="l112"><span class="linenum"> 112</span></a>              'modules',
<a name="l113"><span class="linenum"> 113</span></a>              'groups',
<a name="l114"><span class="linenum"> 114</span></a>              'skin'
<a name="l115"><span class="linenum"> 115</span></a>          ], 0, true);
<a name="l116"><span class="linenum"> 116</span></a>      }
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>      YUI.Env[VERSION] = META;
<a name="l119"><span class="linenum"> 119</span></a>  }());
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">/*jslint forin: true, maxlen: 350 */</span>
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment"> * Loader dynamically loads script and css files.  It includes the dependency</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment"> * information for the version of the library in use, and will automatically pull in</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment"> * dependencies for the modules requested. It can also load the</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> * files from the Yahoo! CDN, and it can utilize the combo service provided on</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment"> * this network to reduce the number of http connections required to download</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> * YUI files.</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> *</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * @module loader</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> * @main loader</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment"> * @submodule loader-base</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment"> */</span>
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>  var NOT_FOUND = {},
<a name="l136"><span class="linenum"> 136</span></a>      NO_REQUIREMENTS = [],
<a name="l137"><span class="linenum"> 137</span></a>      MAX_URL_LENGTH = 1024,
<a name="l138"><span class="linenum"> 138</span></a>      GLOBAL_ENV = YUI.Env,
<a name="l139"><span class="linenum"> 139</span></a>      GLOBAL_LOADED = GLOBAL_ENV._loaded,
<a name="l140"><span class="linenum"> 140</span></a>      CSS = 'css',
<a name="l141"><span class="linenum"> 141</span></a>      JS = 'js',
<a name="l142"><span class="linenum"> 142</span></a>      INTL = 'intl',
<a name="l143"><span class="linenum"> 143</span></a>      DEFAULT_SKIN = 'sam',
<a name="l144"><span class="linenum"> 144</span></a>      VERSION = Y.version,
<a name="l145"><span class="linenum"> 145</span></a>      ROOT_LANG = '',
<a name="l146"><span class="linenum"> 146</span></a>      YObject = Y.Object,
<a name="l147"><span class="linenum"> 147</span></a>      oeach = YObject.each,
<a name="l148"><span class="linenum"> 148</span></a>      yArray = Y.Array,
<a name="l149"><span class="linenum"> 149</span></a>      _queue = GLOBAL_ENV._loaderQueue,
<a name="l150"><span class="linenum"> 150</span></a>      META = GLOBAL_ENV[VERSION],
<a name="l151"><span class="linenum"> 151</span></a>      SKIN_PREFIX = 'skin-',
<a name="l152"><span class="linenum"> 152</span></a>      L = Y.Lang,
<a name="l153"><span class="linenum"> 153</span></a>      ON_PAGE = GLOBAL_ENV.mods,
<a name="l154"><span class="linenum"> 154</span></a>      modulekey,
<a name="l155"><span class="linenum"> 155</span></a>      _path = function(dir, file, type, nomin) {
<a name="l156"><span class="linenum"> 156</span></a>          var path = dir + '/' + file;
<a name="l157"><span class="linenum"> 157</span></a>          if (!nomin) {
<a name="l158"><span class="linenum"> 158</span></a>              path += '-min';
<a name="l159"><span class="linenum"> 159</span></a>          }
<a name="l160"><span class="linenum"> 160</span></a>          path += '.' + (type || CSS);
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>          return path;
<a name="l163"><span class="linenum"> 163</span></a>      };
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      if (!YUI.Env._cssLoaded) {
<a name="l167"><span class="linenum"> 167</span></a>          YUI.Env._cssLoaded = {};
<a name="l168"><span class="linenum"> 168</span></a>      }
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">/**</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment"> * The component metadata is stored in Y.Env.meta.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment"> * Part of the loader module.</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> * @property meta</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> * @for YUI</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> */</span>
<a name="l177"><span class="linenum"> 177</span></a>  Y.Env.meta = META;
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">/**</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment"> * Loader dynamically loads script and css files.  It includes the dependency</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment"> * info for the version of the library in use, and will automatically pull in</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment"> * dependencies for the modules requested. It can load the</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment"> * files from the Yahoo! CDN, and it can utilize the combo service provided on</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment"> * this network to reduce the number of http connections required to download</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment"> * YUI files. You can also specify an external, custom combo service to host</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment"> * your modules as well.</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment"></span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        var Y = YUI();</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">        var loader = new Y.Loader({</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">            filter: 'debug',</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">            base: '../../',</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">            root: 'build/',</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">            combine: true,</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">            require: ['node', 'dd', 'console']</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">        });</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">        var out = loader.resolve(true);</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment"></span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * If the Loader needs to be patched before it is used for the first time, it</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> * should be done through the `doBeforeLoader` hook. Simply make the patch</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * available via configuration before YUI is loaded:</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"></span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        YUI_config = YUI_config || {};</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">        YUI_config.doBeforeLoader = function (config) {</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">            var resolve = this.context.Loader.prototype.resolve;</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">            this.context.Loader.prototype.resolve = function () {</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">                // do something here</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">                return resolve.apply(this, arguments);</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">            };</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">        };</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment"></span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment"> * @constructor</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment"> * @class Loader</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment"> * @param {Object} config an optional set of configuration options.</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment"> * @param {String} config.base The base dir which to fetch this module from</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment"> * @param {String} config.comboBase The Combo service base path. Ex: `http://yui.yahooapis.com/combo?`</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment"> * @param {String} config.root The root path to prepend to module names for the combo service. Ex: `2.5.2/build/`</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment"> * @param {String|Object} config.filter A filter to apply to result urls. &lt;a href=&quot;#property_filter&quot;&gt;See filter property&lt;/a&gt;</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment"> * @param {Object} config.filters Per-component filter specification.  If specified for a given component, this overrides the filter config.</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment"> * @param {Boolean} config.combine Use a combo service to reduce the number of http connections required to load your dependencies</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment"> * @param {Boolean} [config.async=true] Fetch files in async</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment"> * @param {Array} config.ignore: A list of modules that should never be dynamically loaded</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment"> * @param {Array} config.force A list of modules that should always be loaded when required, even if already present on the page</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment"> * @param {HTMLElement|String} config.insertBefore Node or id for a node that should be used as the insertion point for new nodes</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * @param {Object} config.jsAttributes Object literal containing attributes to add to script nodes</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> * @param {Object} config.cssAttributes Object literal containing attributes to add to link nodes</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * @param {Number} config.timeout The number of milliseconds before a timeout occurs when dynamically loading nodes.  If not set, there is no timeout</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * @param {Object} config.context Execution context for all callbacks</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> * @param {Function} config.onSuccess Callback for the 'success' event</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> * @param {Function} config.onFailure Callback for the 'failure' event</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment"> * @param {Function} config.onTimeout Callback for the 'timeout' event</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment"> * @param {Function} config.onProgress Callback executed each time a script or css file is loaded</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment"> * @param {Object} config.modules A list of module definitions.  See &lt;a href=&quot;#method_addModule&quot;&gt;Loader.addModule&lt;/a&gt; for the supported module metadata</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment"> * @param {Object} config.groups A list of group definitions.  Each group can contain specific definitions for `base`, `comboBase`, `combine`, and accepts a list of `modules`.</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> * @param {String} config.2in3 The version of the YUI 2 in 3 wrapper to use.  The intrinsic support for YUI 2 modules in YUI 3 relies on versions of the YUI 2 components inside YUI 3 module wrappers.  These wrappers change over time to accomodate the issues that arise from running YUI 2 in a YUI 3 sandbox.</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> * @param {String} config.yui2 When using the 2in3 project, you can select the version of YUI 2 to use.  Valid values are `2.2.2`, `2.3.1`, `2.4.1`, `2.5.2`, `2.6.0`, `2.7.0`, `2.8.0`, `2.8.1` and `2.9.0` [default] -- plus all versions of YUI 2 going forward.</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * @param {Function} config.doBeforeLoader An optional hook that allows for the patching of the loader instance. The `Y` instance is available as `this.context` and the only argument to the function is the Loader configuration object.</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> */</span>
<a name="l238"><span class="linenum"> 238</span></a>  Y.Loader = function(o) {
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>      var self = this;
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">    //Catch no config passed.</span>
<a name="l243"><span class="linenum"> 243</span></a>      o = o || {};
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>      modulekey = META.md5;
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>      <span class="comment">/**</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     * Internal callback to handle multiple internal insert() calls</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     * so that css is inserted prior to js</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">     * @property _internalCallback</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * @private</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     */</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">    // self._internalCallback = null;</span>
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>      <span class="comment">/**</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     * Callback that will be executed when the loader is finished</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * with an insert</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * @method onSuccess</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     * @type function</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     */</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">    // self.onSuccess = null;</span>
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      <span class="comment">/**</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">     * Callback that will be executed if there is a failure</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     * @method onFailure</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * @type function</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     */</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">    // self.onFailure = null;</span>
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>      <span class="comment">/**</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * Callback executed each time a script or css file is loaded</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * @method onProgress</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @type function</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     */</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">    // self.onProgress = null;</span>
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     * Callback that will be executed if a timeout occurs</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     * @method onTimeout</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @type function</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     */</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">    // self.onTimeout = null;</span>
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>      <span class="comment">/**</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * The execution context for all callbacks</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * @property context</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     * @default {YUI} the YUI instance</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">     */</span>
<a name="l289"><span class="linenum"> 289</span></a>      self.context = Y;
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">    // Hook that allows the patching of loader</span>
<a name="l292"><span class="linenum"> 292</span></a>      if (o.doBeforeLoader) {
<a name="l293"><span class="linenum"> 293</span></a>          o.doBeforeLoader.<a class="function" onClick="logFunction('apply')" href="../../../../_functions/apply.html" onMouseOver="funcPopup(event,'apply')">apply</a>(self, arguments);
<a name="l294"><span class="linenum"> 294</span></a>      }
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>      <span class="comment">/**</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     * Data that is passed to all callbacks</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     * @property data</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     */</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">    // self.data = null;</span>
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>      <span class="comment">/**</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     * Node reference or id where new nodes should be inserted before</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     * @property insertBefore</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * @type string|HTMLElement</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     */</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">    // self.insertBefore = null;</span>
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>      <span class="comment">/**</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * The charset attribute for inserted nodes</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * @property charset</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     * @type string</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     * @deprecated , use cssAttributes or jsAttributes.</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     */</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">    // self.charset = null;</span>
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>      <span class="comment">/**</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     * An object literal containing attributes to add to link nodes</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     * @property cssAttributes</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * @type object</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     */</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">    // self.cssAttributes = null;</span>
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>      <span class="comment">/**</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     * An object literal containing attributes to add to script nodes</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     * @property jsAttributes</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">     * @type object</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">     */</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">    // self.jsAttributes = null;</span>
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>      <span class="comment">/**</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     * The base directory.</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     * @property base</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * @type string</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     * @default http://yui.yahooapis.com/[YUI VERSION]/build/</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     */</span>
<a name="l337"><span class="linenum"> 337</span></a>      self.base = Y.Env.meta.base + Y.Env.meta.root;
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>      <span class="comment">/**</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     * Base path for the combo service</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">     * @property comboBase</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">     * @type string</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">     * @default http://yui.yahooapis.com/combo?</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">     */</span>
<a name="l345"><span class="linenum"> 345</span></a>      self.comboBase = Y.Env.meta.comboBase;
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>      <span class="comment">/*</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     * Base path for language packs.</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     */</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">    // self.langBase = Y.Env.meta.langBase;</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">    // self.lang = &quot;&quot;;</span>
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>      <span class="comment">/**</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     * If configured, the loader will attempt to use the combo</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     * service for YUI resources and configured external resources.</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * @property combine</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     * @type boolean</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * @default true if a base dir isn't in the config</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     */</span>
<a name="l360"><span class="linenum"> 360</span></a>      self.combine = o.base &amp;&amp;
<a name="l361"><span class="linenum"> 361</span></a>          (o.base.<a class="function" onClick="logFunction('indexOf')" href="../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(self.comboBase.<a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(0, 20)) &gt; -1);
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>      <span class="comment">/**</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">    * The default seperator to use between files in a combo URL</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">    * @property comboSep</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">    * @type {String}</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">    * @default Ampersand</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">    */</span>
<a name="l369"><span class="linenum"> 369</span></a>      self.comboSep = '&amp;';
<a name="l370"><span class="linenum"> 370</span></a>      <span class="comment">/**</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     * Max url length for combo urls.  The default is 1024. This is the URL</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">     * limit for the Yahoo! hosted combo servers.  If consuming</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     * a different combo service that has a different URL limit</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * it is possible to override this default by supplying</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     * the maxURLLength config option.  The config option will</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * only take effect if lower than the default.</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     *</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * @property maxURLLength</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @type int</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     */</span>
<a name="l381"><span class="linenum"> 381</span></a>      self.maxURLLength = MAX_URL_LENGTH;
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>      <span class="comment">/**</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * Ignore modules registered on the YUI global</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     * @property ignoreRegistered</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     * @default false</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     */</span>
<a name="l388"><span class="linenum"> 388</span></a>      self.ignoreRegistered = o.ignoreRegistered;
<a name="l389"><span class="linenum"> 389</span></a>  
<a name="l390"><span class="linenum"> 390</span></a>      <span class="comment">/**</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     * Root path to prepend to module path for the combo</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">     * service</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">     * @property root</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">     * @type string</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">     * @default [YUI VERSION]/build/</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">     */</span>
<a name="l397"><span class="linenum"> 397</span></a>      self.root = Y.Env.meta.root;
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>      <span class="comment">/**</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     * Timeout value in milliseconds.  If set, self value will be used by</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * the get utility.  the timeout event will fire if</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     * a timeout occurs.</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * @property timeout</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     * @type int</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     */</span>
<a name="l406"><span class="linenum"> 406</span></a>      self.timeout = 0;
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>      <span class="comment">/**</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">     * A list of modules that should not be loaded, even if</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * they turn up in the dependency tree</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * @property ignore</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * @type string[]</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     */</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">    // self.ignore = null;</span>
<a name="l415"><span class="linenum"> 415</span></a>  
<a name="l416"><span class="linenum"> 416</span></a>      <span class="comment">/**</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     * A list of modules that should always be loaded, even</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">     * if they have already been inserted into the page.</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * @property force</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     * @type string[]</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     */</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">    // self.force = null;</span>
<a name="l423"><span class="linenum"> 423</span></a>  
<a name="l424"><span class="linenum"> 424</span></a>      self.forceMap = {};
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>      <span class="comment">/**</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">     * Should we allow rollups</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">     * @property allowRollup</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     * @type boolean</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * @default false</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     */</span>
<a name="l432"><span class="linenum"> 432</span></a>      self.allowRollup = false;
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>      <span class="comment">/**</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     * A filter to apply to result urls.  This filter will modify the default</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * path for all modules.  The default path for the YUI library is the</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     * minified version of the files (e.g., event-min.js).  The filter property</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * can be a predefined filter or a custom filter.  The valid predefined</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * filters are:</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * &lt;dl&gt;</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     *  &lt;dt&gt;DEBUG&lt;/dt&gt;</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     *  &lt;dd&gt;Selects the debug versions of the library (e.g., event-debug.js).</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">     *      This option will automatically include the Logger widget&lt;/dd&gt;</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     *  &lt;dt&gt;RAW&lt;/dt&gt;</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     *  &lt;dd&gt;Selects the non-minified version of the library (e.g., event.js).</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     *  &lt;/dd&gt;</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * &lt;/dl&gt;</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * You can also define a custom filter, which must be an object literal</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * containing a search expression and a replace string:</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     *</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     *      myFilter: {</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     *          'searchExp': &quot;-min\\.js&quot;,</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     *          'replaceStr': &quot;-debug.js&quot;</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     *      }</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     *</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     * @property filter</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     * @type string| {searchExp: string, replaceStr: string}</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     */</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">    // self.filter = null;</span>
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>      <span class="comment">/**</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * per-component filter specification.  If specified for a given</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     * component, this overrides the filter config.</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     * @property filters</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">     * @type object</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">     */</span>
<a name="l467"><span class="linenum"> 467</span></a>      self.filters = {};
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>      <span class="comment">/**</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">     * The list of requested modules</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     * @property required</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     * @type {string: boolean}</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     */</span>
<a name="l474"><span class="linenum"> 474</span></a>      self.required = {};
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>      <span class="comment">/**</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * If a module name is predefined when requested, it is checked againsts</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * the patterns provided in this property.  If there is a match, the</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * module is added with the default configuration.</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     *</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     * At the moment only supporting module prefixes, but anticipate</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">     * supporting at least regular expressions.</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">     * @property patterns</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">     * @type Object</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">     */</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">    // self.patterns = Y.merge(Y.Env.meta.patterns);</span>
<a name="l487"><span class="linenum"> 487</span></a>      self.patterns = {};
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>      <span class="comment">/**</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     * Internal loader instance metadata. Use accessor `getModuleInfo()` instead.</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     */</span>
<a name="l492"><span class="linenum"> 492</span></a>      self.moduleInfo = {};
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>      self.groups = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(Y.Env.meta.groups);
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>      <span class="comment">/**</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     * Provides the information used to skin the skinnable components.</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * The following skin definition would result in 'skin1' and 'skin2'</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     * being loaded for calendar (if calendar was requested), and</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     * 'sam' for all other skinnable components:</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     *</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     *      skin: {</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     *          // The default skin, which is automatically applied if not</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     *          // overriden by a component-specific skin definition.</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     *          // Change this in to apply a different skin globally</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     *          defaultSkin: 'sam',</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     *</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     *          // This is combined with the loader base property to get</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     *          // the default root directory for a skin. ex:</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     *          // http://yui.yahooapis.com/2.3.0/build/assets/skins/sam/</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     *          base: 'assets/skins/',</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     *</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     *          // Any component-specific overrides can be specified here,</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     *          // making it possible to load different skins for different</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     *          // components.  It is possible to load more than one skin</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     *          // for a given component as well.</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">     *          overrides: {</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">     *              calendar: ['skin1', 'skin2']</span>
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">     *          }</span>
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">     *      }</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     * @property skin</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     * @type {Object}</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     */</span>
<a name="l524"><span class="linenum"> 524</span></a>      self.skin = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(Y.Env.meta.skin);
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>      <span class="comment">/*</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * Map of conditional modules</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     * @since 3.2.0</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">     */</span>
<a name="l530"><span class="linenum"> 530</span></a>      self.conditions = {};
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">    // map of modules with a hash of modules that meet the requirement</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">    // self.provides = {};</span>
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>      self.config = o;
<a name="l536"><span class="linenum"> 536</span></a>      self._internal = true;
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>      self._populateConditionsCache();
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>      <span class="comment">/**</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">     * Set when beginning to compute the dependency tree.</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment">     * Composed of what YUI reports to be loaded combined</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">     * with what has been loaded by any instance on the page</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     * with the version number specified in the metadata.</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     * @property loaded</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * @type {string: boolean}</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     */</span>
<a name="l548"><span class="linenum"> 548</span></a>      self.loaded = GLOBAL_LOADED[VERSION];
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>      <span class="comment">/**</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">    * Should Loader fetch scripts in `async`, defaults to `true`</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">    * @property async</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">    */</span>
<a name="l555"><span class="linenum"> 555</span></a>  
<a name="l556"><span class="linenum"> 556</span></a>      self.async = true;
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>      self._inspectPage();
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>      self._internal = false;
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>      self._config(o);
<a name="l563"><span class="linenum"> 563</span></a>  
<a name="l564"><span class="linenum"> 564</span></a>      self.forceMap = (self.force) ? Y.Array.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(self.force) : {};
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>      self.testresults = null;
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>      if (Y.config.tests) {
<a name="l569"><span class="linenum"> 569</span></a>          self.testresults = Y.config.tests;
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      <span class="comment">/**</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * List of rollup files found in the library metadata</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     * @property rollups</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     */</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">    // self.rollups = null;</span>
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>      <span class="comment">/**</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * Whether or not to load optional dependencies for</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * the requested modules</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @property loadOptional</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @type boolean</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @default false</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     */</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">    // self.loadOptional = false;</span>
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>      <span class="comment">/**</span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">     * All of the derived dependencies in sorted order, which</span>
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">     * will be populated when either calculate() or insert()</span>
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment">     * is called</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">     * @property sorted</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">     * @type string[]</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">     */</span>
<a name="l594"><span class="linenum"> 594</span></a>      self.sorted = [];
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>      <span class="comment">/*</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">     * A list of modules to attach to the YUI instance when complete.</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">     * If not supplied, the sorted list of dependencies are applied.</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">     * @property attaching</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">     */</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">    // self.attaching = null;</span>
<a name="l602"><span class="linenum"> 602</span></a>  
<a name="l603"><span class="linenum"> 603</span></a>      <span class="comment">/**</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     * Flag to indicate the dependency tree needs to be recomputed</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">     * if insert is called again.</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">     * @property dirty</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">     * @type boolean</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">     * @default true</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     */</span>
<a name="l610"><span class="linenum"> 610</span></a>      self.dirty = true;
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>      <span class="comment">/**</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * List of modules inserted by the utility</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @property inserted</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @type {string: boolean}</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     */</span>
<a name="l617"><span class="linenum"> 617</span></a>      self.inserted = {};
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>      <span class="comment">/**</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">     * List of skipped modules during insert() because the module</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">     * was not defined</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">     * @property skipped</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">     */</span>
<a name="l624"><span class="linenum"> 624</span></a>      self.skipped = {};
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">    // Y.on('yui:load', self.loadNext, self);</span>
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>      self.tested = {};
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>      <span class="comment">/*</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     * Cached sorted calculate results</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     * @property results</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">     * @since 3.2.0</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">     */</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">    //self.results = {};</span>
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>      if (self.ignoreRegistered) {
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">        //Clear inpage already processed modules.</span>
<a name="l639"><span class="linenum"> 639</span></a>          self._resetModules();
<a name="l640"><span class="linenum"> 640</span></a>      }
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>  };
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>  Y.Loader.prototype = {
<a name="l645"><span class="linenum"> 645</span></a>      <span class="comment">/**</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">    * Gets the module info from the local moduleInfo hash, or from the</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">    * default metadata and populate the local moduleInfo hash.</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">    * @method getModuleInfo</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">    * @param {string} name of the module</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">    * @public</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">    */</span>
<a name="l652"><span class="linenum"> 652</span></a>      getModuleInfo: function(name) {
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>          var m = this.moduleInfo[name],
<a name="l655"><span class="linenum"> 655</span></a>              rawMetaModules, globalRenderedMods, internal, v;
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>          if (m) {
<a name="l658"><span class="linenum"> 658</span></a>              return m;
<a name="l659"><span class="linenum"> 659</span></a>          }
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>          rawMetaModules = META.modules;
<a name="l662"><span class="linenum"> 662</span></a>          globalRenderedMods = GLOBAL_ENV._renderedMods;
<a name="l663"><span class="linenum"> 663</span></a>          internal = this._internal;
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>          <span class="comment">/*</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">        The logic here is:</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment"></span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">        - if the `moduleInfo[name]` is avilable,</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">          then short circuit</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">        - otherwise, if the module is in the globalCache (cross Y instance),</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">          then port it from the global registry into `moduleInfo[name]`</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">        - otherwise, if the module has raw metadata (from meta modules)</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">          then add it to the global registry and to `moduleInfo[name]`</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment"></span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">        */</span>
<a name="l676"><span class="linenum"> 676</span></a>          if (globalRenderedMods &amp;&amp; globalRenderedMods.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(name) &amp;&amp; !this.ignoreRegistered) {
<a name="l677"><span class="linenum"> 677</span></a>              this.moduleInfo[name] = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(globalRenderedMods[name]);
<a name="l678"><span class="linenum"> 678</span></a>          } else {
<a name="l679"><span class="linenum"> 679</span></a>              if (rawMetaModules.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(name)) {
<a name="l680"><span class="linenum"> 680</span></a>                  this._internal = true; <span class="comment">// making sure that modules from raw data are marked as internal</span>
<a name="l681"><span class="linenum"> 681</span></a>                  v = this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(rawMetaModules[name], name);
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">                // Inspect the page for the CSS module and mark it as loaded.</span>
<a name="l683"><span class="linenum"> 683</span></a>                  if (v &amp;&amp; v.type === CSS) {
<a name="l684"><span class="linenum"> 684</span></a>                      if (this.isCSSLoaded(v.name, true)) {
<a name="l685"><span class="linenum"> 685</span></a>                          this.loaded[v.name] = true;
<a name="l686"><span class="linenum"> 686</span></a>                      }
<a name="l687"><span class="linenum"> 687</span></a>                  }
<a name="l688"><span class="linenum"> 688</span></a>                  this._internal = internal;
<a name="l689"><span class="linenum"> 689</span></a>              }
<a name="l690"><span class="linenum"> 690</span></a>          }
<a name="l691"><span class="linenum"> 691</span></a>          return this.moduleInfo[name];
<a name="l692"><span class="linenum"> 692</span></a>      },
<a name="l693"><span class="linenum"> 693</span></a>      <span class="comment">/**</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">    * Expand the names that are aliases to other modules.</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">    * @method _expandAliases</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">    * @param {string[]} list a module name or a list of names to be expanded</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">    * @private</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">    * @return {array}</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">    */</span>
<a name="l700"><span class="linenum"> 700</span></a>      _expandAliases: function(list) {
<a name="l701"><span class="linenum"> 701</span></a>          var expanded = [],
<a name="l702"><span class="linenum"> 702</span></a>              aliases = YUI.Env.aliases,
<a name="l703"><span class="linenum"> 703</span></a>              i, name;
<a name="l704"><span class="linenum"> 704</span></a>          list = Y.Array(list);
<a name="l705"><span class="linenum"> 705</span></a>          for (i = 0; i &lt; list.length; i += 1) {
<a name="l706"><span class="linenum"> 706</span></a>              name = list[i];
<a name="l707"><span class="linenum"> 707</span></a>              expanded.push.<a class="function" onClick="logFunction('apply')" href="../../../../_functions/apply.html" onMouseOver="funcPopup(event,'apply')">apply</a>(expanded, aliases[name] ? aliases[name] : [name]);
<a name="l708"><span class="linenum"> 708</span></a>          }
<a name="l709"><span class="linenum"> 709</span></a>          return expanded;
<a name="l710"><span class="linenum"> 710</span></a>      },
<a name="l711"><span class="linenum"> 711</span></a>      <span class="comment">/**</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">    * Populate the conditions cache from raw modules, this is necessary</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">    * because no other module will require a conditional module, instead</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">    * the condition has to be executed and then the module is analyzed</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">    * to be included in the final requirement list. Without this cache</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">    * conditional modules will be simply ignored.</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">    * @method _populateConditionsCache</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">    * @private</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">    */</span>
<a name="l720"><span class="linenum"> 720</span></a>      _populateConditionsCache: function() {
<a name="l721"><span class="linenum"> 721</span></a>          var rawMetaModules = META.modules,
<a name="l722"><span class="linenum"> 722</span></a>              cache = GLOBAL_ENV._conditions,
<a name="l723"><span class="linenum"> 723</span></a>              i, j, t, trigger;
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">        // if we have conditions in cache and cache is enabled</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">        // we should port them to this loader instance</span>
<a name="l727"><span class="linenum"> 727</span></a>          if (cache &amp;&amp; !this.ignoreRegistered) {
<a name="l728"><span class="linenum"> 728</span></a>              for (i in cache) {
<a name="l729"><span class="linenum"> 729</span></a>                  if (cache.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l730"><span class="linenum"> 730</span></a>                      this.conditions[i] = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(cache[i]);
<a name="l731"><span class="linenum"> 731</span></a>                  }
<a name="l732"><span class="linenum"> 732</span></a>              }
<a name="l733"><span class="linenum"> 733</span></a>          } else {
<a name="l734"><span class="linenum"> 734</span></a>              for (i in rawMetaModules) {
<a name="l735"><span class="linenum"> 735</span></a>                  if (rawMetaModules.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i) &amp;&amp; rawMetaModules[i].condition) {
<a name="l736"><span class="linenum"> 736</span></a>                      t = this._expandAliases(rawMetaModules[i].condition.trigger);
<a name="l737"><span class="linenum"> 737</span></a>                      for (j = 0; j &lt; t.length; j += 1) {
<a name="l738"><span class="linenum"> 738</span></a>                          trigger = t[j];
<a name="l739"><span class="linenum"> 739</span></a>                          this.conditions[trigger] = this.conditions[trigger] || {};
<a name="l740"><span class="linenum"> 740</span></a>                          this.conditions[trigger][rawMetaModules[i].name || i] = rawMetaModules[i].condition;
<a name="l741"><span class="linenum"> 741</span></a>                      }
<a name="l742"><span class="linenum"> 742</span></a>                  }
<a name="l743"><span class="linenum"> 743</span></a>              }
<a name="l744"><span class="linenum"> 744</span></a>              GLOBAL_ENV._conditions = this.conditions;
<a name="l745"><span class="linenum"> 745</span></a>          }
<a name="l746"><span class="linenum"> 746</span></a>      },
<a name="l747"><span class="linenum"> 747</span></a>      <span class="comment">/**</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">    * Reset modules in the module cache to a pre-processed state so additional</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">    * computations with a different skin or language will work as expected.</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">    * @method _resetModules</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">    * @private</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">    */</span>
<a name="l753"><span class="linenum"> 753</span></a>      _resetModules: function() {
<a name="l754"><span class="linenum"> 754</span></a>          var self = this, i, o,
<a name="l755"><span class="linenum"> 755</span></a>              mod, name, details;
<a name="l756"><span class="linenum"> 756</span></a>          for (i in self.moduleInfo) {
<a name="l757"><span class="linenum"> 757</span></a>              if (self.moduleInfo.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i) &amp;&amp; self.moduleInfo[i]) {
<a name="l758"><span class="linenum"> 758</span></a>                  mod = self.moduleInfo[i];
<a name="l759"><span class="linenum"> 759</span></a>                  name = mod.name;
<a name="l760"><span class="linenum"> 760</span></a>                  details  = (YUI.Env.mods[name] ? YUI.Env.mods[name].details : null);
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>                  if (details) {
<a name="l763"><span class="linenum"> 763</span></a>                      self.moduleInfo[name]._reset = true;
<a name="l764"><span class="linenum"> 764</span></a>                      self.moduleInfo[name].requires = details.requires || [];
<a name="l765"><span class="linenum"> 765</span></a>                      self.moduleInfo[name].optional = details.optional || [];
<a name="l766"><span class="linenum"> 766</span></a>                      self.moduleInfo[name].supersedes = details.supercedes || [];
<a name="l767"><span class="linenum"> 767</span></a>                  }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>                  if (mod.defaults) {
<a name="l770"><span class="linenum"> 770</span></a>                      for (o in mod.defaults) {
<a name="l771"><span class="linenum"> 771</span></a>                          if (mod.defaults.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(o)) {
<a name="l772"><span class="linenum"> 772</span></a>                              if (mod[o]) {
<a name="l773"><span class="linenum"> 773</span></a>                                  mod[o] = mod.defaults[o];
<a name="l774"><span class="linenum"> 774</span></a>                              }
<a name="l775"><span class="linenum"> 775</span></a>                          }
<a name="l776"><span class="linenum"> 776</span></a>                      }
<a name="l777"><span class="linenum"> 777</span></a>                  }
<a name="l778"><span class="linenum"> 778</span></a>                  mod.langCache = undefined;
<a name="l779"><span class="linenum"> 779</span></a>                  mod.skinCache = undefined;
<a name="l780"><span class="linenum"> 780</span></a>                  if (mod.skinnable) {
<a name="l781"><span class="linenum"> 781</span></a>                      self._addSkin(self.skin.defaultSkin, mod.name);
<a name="l782"><span class="linenum"> 782</span></a>                  }
<a name="l783"><span class="linenum"> 783</span></a>              }
<a name="l784"><span class="linenum"> 784</span></a>          }
<a name="l785"><span class="linenum"> 785</span></a>      },
<a name="l786"><span class="linenum"> 786</span></a>      <span class="comment">/**</span>
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment">    Regex that matches a CSS URL. Used to guess the file type when it's not</span>
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment">    specified.</span>
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment"></span>
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment">    @property REGEX_CSS</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment">    @type RegExp</span>
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment">    @final</span>
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment">    @protected</span>
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">    @since 3.5.0</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">    **/</span>
<a name="l796"><span class="linenum"> 796</span></a>      REGEX_CSS: /\.<a class="function" onClick="logFunction('css')" href="../../../../_functions/css.html" onMouseOver="funcPopup(event,'css')">css</a>(?:[?;].*)?$/i,
<a name="l797"><span class="linenum"> 797</span></a>  
<a name="l798"><span class="linenum"> 798</span></a>      <span class="comment">/**</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">    * Default filters for raw and debug</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">    * @property FILTER_DEFS</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">    * @type Object</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">    * @final</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">    * @protected</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">    */</span>
<a name="l805"><span class="linenum"> 805</span></a>      FILTER_DEFS: {
<a name="l806"><span class="linenum"> 806</span></a>          RAW: {
<a name="l807"><span class="linenum"> 807</span></a>              'searchExp': '-min\\.js',
<a name="l808"><span class="linenum"> 808</span></a>              'replaceStr': '.js'
<a name="l809"><span class="linenum"> 809</span></a>          },
<a name="l810"><span class="linenum"> 810</span></a>          DEBUG: {
<a name="l811"><span class="linenum"> 811</span></a>              'searchExp': '-min\\.js',
<a name="l812"><span class="linenum"> 812</span></a>              'replaceStr': '-debug.js'
<a name="l813"><span class="linenum"> 813</span></a>          },
<a name="l814"><span class="linenum"> 814</span></a>          COVERAGE: {
<a name="l815"><span class="linenum"> 815</span></a>              'searchExp': '-min\\.js',
<a name="l816"><span class="linenum"> 816</span></a>              'replaceStr': '-coverage.js'
<a name="l817"><span class="linenum"> 817</span></a>          }
<a name="l818"><span class="linenum"> 818</span></a>      },
<a name="l819"><span class="linenum"> 819</span></a>      <span class="comment">/*</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment">    * Check the pages meta-data and cache the result.</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">    * @method _inspectPage</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment">    * @private</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">    */</span>
<a name="l824"><span class="linenum"> 824</span></a>      _inspectPage: function() {
<a name="l825"><span class="linenum"> 825</span></a>          var self = this, v, m, req, mr, i;
<a name="l826"><span class="linenum"> 826</span></a>  
<a name="l827"><span class="linenum"> 827</span></a>          for (i in ON_PAGE) {
<a name="l828"><span class="linenum"> 828</span></a>              if (ON_PAGE.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l829"><span class="linenum"> 829</span></a>                  v = ON_PAGE[i];
<a name="l830"><span class="linenum"> 830</span></a>                  if (v.details) {
<a name="l831"><span class="linenum"> 831</span></a>                      m = self.getModuleInfo(v.name);
<a name="l832"><span class="linenum"> 832</span></a>                      req = v.details.requires;
<a name="l833"><span class="linenum"> 833</span></a>                      mr = m &amp;&amp; m.requires;
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>                     if (m) {
<a name="l836"><span class="linenum"> 836</span></a>                         if (!m._inspected &amp;&amp; req &amp;&amp; mr.length !== req.length) {
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">                           // console.log('deleting ' + m.name);</span>
<a name="l838"><span class="linenum"> 838</span></a>                             delete m.expanded;
<a name="l839"><span class="linenum"> 839</span></a>                         }
<a name="l840"><span class="linenum"> 840</span></a>                     } else {
<a name="l841"><span class="linenum"> 841</span></a>                         m = self.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(v.details, i);
<a name="l842"><span class="linenum"> 842</span></a>                     }
<a name="l843"><span class="linenum"> 843</span></a>                     m._inspected = true;
<a name="l844"><span class="linenum"> 844</span></a>                 }
<a name="l845"><span class="linenum"> 845</span></a>              }
<a name="l846"><span class="linenum"> 846</span></a>          }
<a name="l847"><span class="linenum"> 847</span></a>      },
<a name="l848"><span class="linenum"> 848</span></a>      <span class="comment">/*</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">    * returns true if b is not loaded, and is required directly or by means of modules it supersedes.</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">    * @private</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment">    * @method _requires</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment">    * @param {String} mod1 The first module to compare</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">    * @param {String} mod2 The second module to compare</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">    */</span>
<a name="l855"><span class="linenum"> 855</span></a>     _requires: function(mod1, mod2) {
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>          var i, rm, after_map, s,
<a name="l858"><span class="linenum"> 858</span></a>              m = this.getModuleInfo(mod1),
<a name="l859"><span class="linenum"> 859</span></a>              other = this.getModuleInfo(mod2);
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>          if (!m || !other) {
<a name="l862"><span class="linenum"> 862</span></a>              return false;
<a name="l863"><span class="linenum"> 863</span></a>          }
<a name="l864"><span class="linenum"> 864</span></a>  
<a name="l865"><span class="linenum"> 865</span></a>          rm = m.expanded_map;
<a name="l866"><span class="linenum"> 866</span></a>          after_map = m.after_map;
<a name="l867"><span class="linenum"> 867</span></a>  
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">        // check if this module should be sorted after the other</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">        // do this first to short circut circular deps</span>
<a name="l870"><span class="linenum"> 870</span></a>          if (after_map &amp;&amp; (mod2 in after_map)) {
<a name="l871"><span class="linenum"> 871</span></a>              return true;
<a name="l872"><span class="linenum"> 872</span></a>          }
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>          after_map = other.after_map;
<a name="l875"><span class="linenum"> 875</span></a>  
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">        // and vis-versa</span>
<a name="l877"><span class="linenum"> 877</span></a>          if (after_map &amp;&amp; (mod1 in after_map)) {
<a name="l878"><span class="linenum"> 878</span></a>              return false;
<a name="l879"><span class="linenum"> 879</span></a>          }
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">        // check if this module requires one the other supersedes</span>
<a name="l882"><span class="linenum"> 882</span></a>          s = other.supersedes;
<a name="l883"><span class="linenum"> 883</span></a>          if (s) {
<a name="l884"><span class="linenum"> 884</span></a>              for (i = 0; i &lt; s.length; i++) {
<a name="l885"><span class="linenum"> 885</span></a>                  if (this._requires(mod1, s[i])) {
<a name="l886"><span class="linenum"> 886</span></a>                      return true;
<a name="l887"><span class="linenum"> 887</span></a>                  }
<a name="l888"><span class="linenum"> 888</span></a>              }
<a name="l889"><span class="linenum"> 889</span></a>          }
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>          s = m.supersedes;
<a name="l892"><span class="linenum"> 892</span></a>          if (s) {
<a name="l893"><span class="linenum"> 893</span></a>              for (i = 0; i &lt; s.length; i++) {
<a name="l894"><span class="linenum"> 894</span></a>                  if (this._requires(mod2, s[i])) {
<a name="l895"><span class="linenum"> 895</span></a>                      return false;
<a name="l896"><span class="linenum"> 896</span></a>                  }
<a name="l897"><span class="linenum"> 897</span></a>              }
<a name="l898"><span class="linenum"> 898</span></a>          }
<a name="l899"><span class="linenum"> 899</span></a>  
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">        // check if this module requires the other directly</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">        // if (r &amp;&amp; yArray.indexOf(r, mod2) &gt; -1) {</span>
<a name="l902"><span class="linenum"> 902</span></a>          if (rm &amp;&amp; (mod2 in rm)) {
<a name="l903"><span class="linenum"> 903</span></a>              return true;
<a name="l904"><span class="linenum"> 904</span></a>          }
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">        // external css files should be sorted below yui css</span>
<a name="l907"><span class="linenum"> 907</span></a>          if (m.ext &amp;&amp; m.type === CSS &amp;&amp; !other.ext &amp;&amp; other.type === CSS) {
<a name="l908"><span class="linenum"> 908</span></a>              return true;
<a name="l909"><span class="linenum"> 909</span></a>          }
<a name="l910"><span class="linenum"> 910</span></a>  
<a name="l911"><span class="linenum"> 911</span></a>          return false;
<a name="l912"><span class="linenum"> 912</span></a>      },
<a name="l913"><span class="linenum"> 913</span></a>      <span class="comment">/**</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">    * Apply a new config to the Loader instance</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">    * @method _config</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">    * @private</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">    * @param {Object} o The new configuration</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">    */</span>
<a name="l919"><span class="linenum"> 919</span></a>      _config: function(o) {
<a name="l920"><span class="linenum"> 920</span></a>          var i, j, val, a, f, group, groupName, self = this,
<a name="l921"><span class="linenum"> 921</span></a>              mods = [], mod, modInfo;
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">        // apply config values</span>
<a name="l923"><span class="linenum"> 923</span></a>          if (o) {
<a name="l924"><span class="linenum"> 924</span></a>              for (i in o) {
<a name="l925"><span class="linenum"> 925</span></a>                  if (o.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l926"><span class="linenum"> 926</span></a>                      val = o[i];
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">                    //TODO This should be a case</span>
<a name="l928"><span class="linenum"> 928</span></a>                      if (i === 'require') {
<a name="l929"><span class="linenum"> 929</span></a>                          self.<a class="function" onClick="logFunction('require')" href="../../../../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(val);
<a name="l930"><span class="linenum"> 930</span></a>                      } else if (i === 'skin') {
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">                        //If the config.skin is a string, format to the expected object</span>
<a name="l932"><span class="linenum"> 932</span></a>                          if (typeof val === 'string') {
<a name="l933"><span class="linenum"> 933</span></a>                              self.skin.defaultSkin = o.skin;
<a name="l934"><span class="linenum"> 934</span></a>                              val = {
<a name="l935"><span class="linenum"> 935</span></a>                                  defaultSkin: val
<a name="l936"><span class="linenum"> 936</span></a>                              };
<a name="l937"><span class="linenum"> 937</span></a>                          }
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>                          Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(self.skin, val, true);
<a name="l940"><span class="linenum"> 940</span></a>                      } else if (i === 'groups') {
<a name="l941"><span class="linenum"> 941</span></a>                          for (j in val) {
<a name="l942"><span class="linenum"> 942</span></a>                              if (val.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(j)) {
<a name="l943"><span class="linenum"> 943</span></a>                                  groupName = j;
<a name="l944"><span class="linenum"> 944</span></a>                                  group = val[j];
<a name="l945"><span class="linenum"> 945</span></a>                                  self.<a class="function" onClick="logFunction('addGroup')" href="../../../../_functions/addgroup.html" onMouseOver="funcPopup(event,'addgroup')">addGroup</a>(group, groupName);
<a name="l946"><span class="linenum"> 946</span></a>                                  if (group.aliases) {
<a name="l947"><span class="linenum"> 947</span></a>                                      for (a in group.aliases) {
<a name="l948"><span class="linenum"> 948</span></a>                                          if (group.aliases.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(a)) {
<a name="l949"><span class="linenum"> 949</span></a>                                              self.<a class="function" onClick="logFunction('addAlias')" href="../../../../_functions/addalias.html" onMouseOver="funcPopup(event,'addalias')">addAlias</a>(group.aliases[a], a);
<a name="l950"><span class="linenum"> 950</span></a>                                          }
<a name="l951"><span class="linenum"> 951</span></a>                                      }
<a name="l952"><span class="linenum"> 952</span></a>                                  }
<a name="l953"><span class="linenum"> 953</span></a>                              }
<a name="l954"><span class="linenum"> 954</span></a>                          }
<a name="l955"><span class="linenum"> 955</span></a>  
<a name="l956"><span class="linenum"> 956</span></a>                      } else if (i === 'modules') {
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">                        // add a hash of module definitions</span>
<a name="l958"><span class="linenum"> 958</span></a>                          for (j in val) {
<a name="l959"><span class="linenum"> 959</span></a>                              if (val.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(j)) {
<a name="l960"><span class="linenum"> 960</span></a>                                  self.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(val[j], j);
<a name="l961"><span class="linenum"> 961</span></a>                              }
<a name="l962"><span class="linenum"> 962</span></a>                          }
<a name="l963"><span class="linenum"> 963</span></a>                      } else if (i === 'aliases') {
<a name="l964"><span class="linenum"> 964</span></a>                          for (j in val) {
<a name="l965"><span class="linenum"> 965</span></a>                              if (val.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(j)) {
<a name="l966"><span class="linenum"> 966</span></a>                                  self.<a class="function" onClick="logFunction('addAlias')" href="../../../../_functions/addalias.html" onMouseOver="funcPopup(event,'addalias')">addAlias</a>(val[j], j);
<a name="l967"><span class="linenum"> 967</span></a>                              }
<a name="l968"><span class="linenum"> 968</span></a>                          }
<a name="l969"><span class="linenum"> 969</span></a>                      } else if (i === 'gallery') {
<a name="l970"><span class="linenum"> 970</span></a>                          if (this.groups.gallery.update) {
<a name="l971"><span class="linenum"> 971</span></a>                              this.groups.gallery.<a class="function" onClick="logFunction('update')" href="../../../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(val, o);
<a name="l972"><span class="linenum"> 972</span></a>                          }
<a name="l973"><span class="linenum"> 973</span></a>                      } else if (i === 'yui2' || i === '2in3') {
<a name="l974"><span class="linenum"> 974</span></a>                          if (this.groups.yui2.update) {
<a name="l975"><span class="linenum"> 975</span></a>                              this.groups.yui2.<a class="function" onClick="logFunction('update')" href="../../../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(o['2in3'], o.yui2, o);
<a name="l976"><span class="linenum"> 976</span></a>                          }
<a name="l977"><span class="linenum"> 977</span></a>                      } else {
<a name="l978"><span class="linenum"> 978</span></a>                          self[i] = val;
<a name="l979"><span class="linenum"> 979</span></a>                      }
<a name="l980"><span class="linenum"> 980</span></a>                  }
<a name="l981"><span class="linenum"> 981</span></a>              }
<a name="l982"><span class="linenum"> 982</span></a>          }
<a name="l983"><span class="linenum"> 983</span></a>  
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">        // fix filter</span>
<a name="l985"><span class="linenum"> 985</span></a>          f = self.filter;
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>          if (L.<a class="function" onClick="logFunction('isString')" href="../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(f)) {
<a name="l988"><span class="linenum"> 988</span></a>              f = f.toUpperCase();
<a name="l989"><span class="linenum"> 989</span></a>              self.filterName = f;
<a name="l990"><span class="linenum"> 990</span></a>              self.filter = self.FILTER_DEFS[f];
<a name="l991"><span class="linenum"> 991</span></a>              if (f === 'DEBUG') {
<a name="l992"><span class="linenum"> 992</span></a>                  self.<a class="function" onClick="logFunction('require')" href="../../../../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>('yui-log', 'dump');
<a name="l993"><span class="linenum"> 993</span></a>              }
<a name="l994"><span class="linenum"> 994</span></a>          }
<a name="l995"><span class="linenum"> 995</span></a>  
<a name="l996"><span class="linenum"> 996</span></a>          if (self.filterName &amp;&amp; self.coverage) {
<a name="l997"><span class="linenum"> 997</span></a>              if (self.filterName === 'COVERAGE' &amp;&amp; L.<a class="function" onClick="logFunction('isArray')" href="../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(self.coverage) &amp;&amp; self.coverage.length) {
<a name="l998"><span class="linenum"> 998</span></a>                  for (i = 0; i &lt; self.coverage.length; i++) {
<a name="l999"><span class="linenum"> 999</span></a>                      mod = self.coverage[i];
<a name="l1000"><span class="linenum">1000</span></a>                      modInfo = self.getModuleInfo(mod);
<a name="l1001"><span class="linenum">1001</span></a>                      if (modInfo &amp;&amp; modInfo.use) {
<a name="l1002"><span class="linenum">1002</span></a>                          mods = mods.<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(modInfo.use);
<a name="l1003"><span class="linenum">1003</span></a>                      } else {
<a name="l1004"><span class="linenum">1004</span></a>                          mods.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(mod);
<a name="l1005"><span class="linenum">1005</span></a>                      }
<a name="l1006"><span class="linenum">1006</span></a>                  }
<a name="l1007"><span class="linenum">1007</span></a>                  self.filters = self.filters || {};
<a name="l1008"><span class="linenum">1008</span></a>                  Y.Array.<a class="phpfunction" onClick="logFunction('each')" href="../../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(mods, function(mod) {
<a name="l1009"><span class="linenum">1009</span></a>                      self.filters[mod] = self.FILTER_DEFS.COVERAGE;
<a name="l1010"><span class="linenum">1010</span></a>                  });
<a name="l1011"><span class="linenum">1011</span></a>                  self.filterName = 'RAW';
<a name="l1012"><span class="linenum">1012</span></a>                  self.filter = self.FILTER_DEFS[self.filterName];
<a name="l1013"><span class="linenum">1013</span></a>              }
<a name="l1014"><span class="linenum">1014</span></a>          }
<a name="l1015"><span class="linenum">1015</span></a>  
<a name="l1016"><span class="linenum">1016</span></a>      },
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>      <span class="comment">/**</span>
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">     * Returns the skin module name for the specified skin name.  If a</span>
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment">     * module name is supplied, the returned skin module name is</span>
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">     * specific to the module passed in.</span>
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">     * @method formatSkin</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">     * @param {string} skin the name of the skin.</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">     * @param {string} mod optional: the name of a module to skin.</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">     * @return {string} the full skin module name.</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">     */</span>
<a name="l1027"><span class="linenum">1027</span></a>      formatSkin: function(skin, mod) {
<a name="l1028"><span class="linenum">1028</span></a>          var s = SKIN_PREFIX + skin;
<a name="l1029"><span class="linenum">1029</span></a>          if (mod) {
<a name="l1030"><span class="linenum">1030</span></a>              s = s + '-' + mod;
<a name="l1031"><span class="linenum">1031</span></a>          }
<a name="l1032"><span class="linenum">1032</span></a>  
<a name="l1033"><span class="linenum">1033</span></a>          return s;
<a name="l1034"><span class="linenum">1034</span></a>      },
<a name="l1035"><span class="linenum">1035</span></a>  
<a name="l1036"><span class="linenum">1036</span></a>      <span class="comment">/**</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment">     * Adds the skin def to the module info</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">     * @method _addSkin</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">     * @param {string} skin the name of the skin.</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">     * @param {string} mod the name of the module.</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">     * @param {string} parent parent module if this is a skin of a</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">     * submodule or plugin.</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">     * @return {string} the module name for the skin.</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment">     * @private</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment">     */</span>
<a name="l1046"><span class="linenum">1046</span></a>      _addSkin: function(skin, mod, parent) {
<a name="l1047"><span class="linenum">1047</span></a>          var pkg, name, nmod,
<a name="l1048"><span class="linenum">1048</span></a>              sinf = this.skin,
<a name="l1049"><span class="linenum">1049</span></a>              mdef = mod &amp;&amp; this.getModuleInfo(mod),
<a name="l1050"><span class="linenum">1050</span></a>              ext = mdef &amp;&amp; mdef.ext;
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment">        // Add a module definition for the module-specific skin css</span>
<a name="l1053"><span class="linenum">1053</span></a>          if (mod) {
<a name="l1054"><span class="linenum">1054</span></a>              name = this.formatSkin(skin, mod);
<a name="l1055"><span class="linenum">1055</span></a>              if (!this.getModuleInfo(name)) {
<a name="l1056"><span class="linenum">1056</span></a>                  pkg = mdef.pkg || mod;
<a name="l1057"><span class="linenum">1057</span></a>                  nmod = {
<a name="l1058"><span class="linenum">1058</span></a>                      skin: true,
<a name="l1059"><span class="linenum">1059</span></a>                      name: name,
<a name="l1060"><span class="linenum">1060</span></a>                      group: mdef.group,
<a name="l1061"><span class="linenum">1061</span></a>                      type: 'css',
<a name="l1062"><span class="linenum">1062</span></a>                      after: sinf.after,
<a name="l1063"><span class="linenum">1063</span></a>                      path: (parent || pkg) + '/' + sinf.base + skin +
<a name="l1064"><span class="linenum">1064</span></a>                            '/' + mod + '.css',
<a name="l1065"><span class="linenum">1065</span></a>                      ext: ext
<a name="l1066"><span class="linenum">1066</span></a>                  };
<a name="l1067"><span class="linenum">1067</span></a>                  if (mdef.base) {
<a name="l1068"><span class="linenum">1068</span></a>                      nmod.base = mdef.base;
<a name="l1069"><span class="linenum">1069</span></a>                  }
<a name="l1070"><span class="linenum">1070</span></a>                  if (mdef.configFn) {
<a name="l1071"><span class="linenum">1071</span></a>                      nmod.configFn = mdef.configFn;
<a name="l1072"><span class="linenum">1072</span></a>                  }
<a name="l1073"><span class="linenum">1073</span></a>                  this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(nmod, name);
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>              }
<a name="l1076"><span class="linenum">1076</span></a>          }
<a name="l1077"><span class="linenum">1077</span></a>  
<a name="l1078"><span class="linenum">1078</span></a>          return name;
<a name="l1079"><span class="linenum">1079</span></a>      },
<a name="l1080"><span class="linenum">1080</span></a>      <span class="comment">/**</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment">    * Adds an alias module to the system</span>
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment">    * @method addAlias</span>
<a name="l1083"><span class="linenum">1083</span></a>  <span class="comment">    * @param {Array} use An array of modules that makes up this alias</span>
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment">    * @param {String} name The name of the alias</span>
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment">    * @example</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment">    *       var loader = new Y.Loader({});</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">    *       loader.addAlias([ 'node', 'yql' ], 'davglass');</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment">    *       loader.require(['davglass']);</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment">    *       var out = loader.resolve(true);</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment">    *</span>
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">    *       //out.js will contain Node and YQL modules</span>
<a name="l1092"><span class="linenum">1092</span></a>  <span class="comment">    */</span>
<a name="l1093"><span class="linenum">1093</span></a>      addAlias: function(use, name) {
<a name="l1094"><span class="linenum">1094</span></a>          YUI.Env.aliases[name] = use;
<a name="l1095"><span class="linenum">1095</span></a>          this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>({
<a name="l1096"><span class="linenum">1096</span></a>              name: name,
<a name="l1097"><span class="linenum">1097</span></a>              use: use
<a name="l1098"><span class="linenum">1098</span></a>          });
<a name="l1099"><span class="linenum">1099</span></a>      },
<a name="l1100"><span class="linenum">1100</span></a>      <span class="comment">/**</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">     * Add a new module group</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">     * @method addGroup</span>
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">     * @param {Object} config An object containing the group configuration data</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment">     * @param {String} config.name required, the group name</span>
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment">     * @param {String} config.base The base directory for this module group</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment">     * @param {String} config.root The root path to add to each combo resource path</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment">     * @param {Boolean} config.combine Should the request be combined</span>
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment">     * @param {String} config.comboBase Combo service base path</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment">     * @param {Object} config.modules The group of modules</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment">     * @param {String} name the group name.</span>
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">     * @example</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">     *      var loader = new Y.Loader({});</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">     *      loader.addGroup({</span>
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">     *          name: 'davglass',</span>
<a name="l1115"><span class="linenum">1115</span></a>  <span class="comment">     *          combine: true,</span>
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">     *          comboBase: '/combo?',</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment">     *          root: '',</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">     *          modules: {</span>
<a name="l1119"><span class="linenum">1119</span></a>  <span class="comment">     *              //Module List here</span>
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">     *          }</span>
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment">     *      }, 'davglass');</span>
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">     */</span>
<a name="l1123"><span class="linenum">1123</span></a>      addGroup: function(o, name) {
<a name="l1124"><span class="linenum">1124</span></a>          var mods = o.modules,
<a name="l1125"><span class="linenum">1125</span></a>              self = this, i, v;
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>          name = name || o.name;
<a name="l1128"><span class="linenum">1128</span></a>          o.name = name;
<a name="l1129"><span class="linenum">1129</span></a>          self.groups[name] = o;
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>          if (o.patterns) {
<a name="l1132"><span class="linenum">1132</span></a>              for (i in o.patterns) {
<a name="l1133"><span class="linenum">1133</span></a>                  if (o.patterns.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1134"><span class="linenum">1134</span></a>                      o.patterns[i].group = name;
<a name="l1135"><span class="linenum">1135</span></a>                      self.patterns[i] = o.patterns[i];
<a name="l1136"><span class="linenum">1136</span></a>                  }
<a name="l1137"><span class="linenum">1137</span></a>              }
<a name="l1138"><span class="linenum">1138</span></a>          }
<a name="l1139"><span class="linenum">1139</span></a>  
<a name="l1140"><span class="linenum">1140</span></a>          if (mods) {
<a name="l1141"><span class="linenum">1141</span></a>              for (i in mods) {
<a name="l1142"><span class="linenum">1142</span></a>                  if (mods.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1143"><span class="linenum">1143</span></a>                      v = mods[i];
<a name="l1144"><span class="linenum">1144</span></a>                      if (typeof v === 'string') {
<a name="l1145"><span class="linenum">1145</span></a>                          v = { name: i, fullpath: v };
<a name="l1146"><span class="linenum">1146</span></a>                      }
<a name="l1147"><span class="linenum">1147</span></a>                      v.group = name;
<a name="l1148"><span class="linenum">1148</span></a>                      self.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(v, i);
<a name="l1149"><span class="linenum">1149</span></a>                  }
<a name="l1150"><span class="linenum">1150</span></a>              }
<a name="l1151"><span class="linenum">1151</span></a>          }
<a name="l1152"><span class="linenum">1152</span></a>      },
<a name="l1153"><span class="linenum">1153</span></a>  
<a name="l1154"><span class="linenum">1154</span></a>      <span class="comment">/**</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment">     * Add a new module to the component metadata.</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment">     * @method addModule</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">     * @param {Object} config An object containing the module data.</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">     * @param {String} config.name Required, the component name</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">     * @param {String} config.type Required, the component type (js or css)</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">     * @param {String} config.path Required, the path to the script from `base`</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment">     * @param {Array} config.requires Array of modules required by this component</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment">     * @param {Array} [config.optional] Array of optional modules for this component</span>
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment">     * @param {Array} [config.supersedes] Array of the modules this component replaces</span>
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment">     * @param {Array} [config.after] Array of modules the components which, if present, should be sorted above this one</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment">     * @param {Object} [config.after_map] Faster alternative to 'after' -- supply a hash instead of an array</span>
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment">     * @param {Number} [config.rollup] The number of superseded modules required for automatic rollup</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">     * @param {String} [config.fullpath] If `fullpath` is specified, this is used instead of the configured `base + path`</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment">     * @param {Boolean} [config.skinnable] Flag to determine if skin assets should automatically be pulled in</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment">     * @param {Object} [config.submodules] Hash of submodules</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment">     * @param {String} [config.group] The group the module belongs to -- this is set automatically when it is added as part of a group configuration.</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">     * @param {Array} [config.lang] Array of BCP 47 language tags of languages for which this module has localized resource bundles, e.g., `[&quot;en-GB&quot;, &quot;zh-Hans-CN&quot;]`</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">     * @param {Object} [config.condition] Specifies that the module should be loaded automatically if a condition is met. This is an object with up to four fields:</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">     * @param {String} [config.condition.trigger] The name of a module that can trigger the auto-load</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">     * @param {Function} [config.condition.test] A function that returns true when the module is to be loaded.</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">     * @param {String} [config.condition.ua] The UA name of &lt;a href=&quot;UA.html&quot;&gt;Y.UA&lt;/a&gt; object that returns true when the module is to be loaded. e.g., `&quot;ie&quot;`, `&quot;nodejs&quot;`.</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">     * @param {String} [config.condition.when] Specifies the load order of the conditional module</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment">     *  with regard to the position of the trigger module.</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">     *  This should be one of three values: `before`, `after`, or `instead`.  The default is `after`.</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">     * @param {Object} [config.testresults] A hash of test results from `Y.Features.all()`</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">     * @param {Function} [config.configFn] A function to exectute when configuring this module</span>
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">     * @param {Object} config.configFn.mod The module config, modifying this object will modify it's config. Returning false will delete the module's config.</span>
<a name="l1182"><span class="linenum">1182</span></a>  <span class="comment">     * @param {String[]} [config.optionalRequires] List of dependencies that</span>
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment">        may optionally be loaded by this loader. This is targeted mostly at</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment">        polyfills, since they should not be in the list of requires because</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">        polyfills are assumed to be available in the global scope.</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment">     * @param {Function} [config.test] Test to be called when this module is</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment">        added as an optional dependency of another module. If the test function</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment">        returns `false`, the module will be ignored and will not be attached to</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">        this YUI instance.</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">     * @param {String} [name] The module name, required if not in the module data.</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">     * @return {Object} the module definition or null if the object passed in did not provide all required attributes.</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">     */</span>
<a name="l1193"><span class="linenum">1193</span></a>      addModule: function(o, name) {
<a name="l1194"><span class="linenum">1194</span></a>          name = name || o.name;
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>          if (typeof o === 'string') {
<a name="l1197"><span class="linenum">1197</span></a>              o = { name: name, fullpath: o };
<a name="l1198"><span class="linenum">1198</span></a>          }
<a name="l1199"><span class="linenum">1199</span></a>  
<a name="l1200"><span class="linenum">1200</span></a>  
<a name="l1201"><span class="linenum">1201</span></a>          var subs, i, l, t, sup, s, smod, plugins, plug,
<a name="l1202"><span class="linenum">1202</span></a>              j, langs, packName, supName, flatSup, flatLang, lang, ret,
<a name="l1203"><span class="linenum">1203</span></a>              overrides, skinname, when, g, p,
<a name="l1204"><span class="linenum">1204</span></a>              modInfo = this.moduleInfo[name],
<a name="l1205"><span class="linenum">1205</span></a>              conditions = this.conditions, trigger;
<a name="l1206"><span class="linenum">1206</span></a>  
<a name="l1207"><span class="linenum">1207</span></a>  <span class="comment">        //Only merge this data if the temp flag is set</span>
<a name="l1208"><span class="linenum">1208</span></a>  <span class="comment">        //from an earlier pass from a pattern or else</span>
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment">        //an override module (YUI_config) can not be used to</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment">        //replace a default module.</span>
<a name="l1211"><span class="linenum">1211</span></a>          if (modInfo &amp;&amp; modInfo.temp) {
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment">            //This catches temp modules loaded via a pattern</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">            // The module will be added twice, once from the pattern and</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">            // Once from the actual add call, this ensures that properties</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">            // that were added to the module the first time around (group: gallery)</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment">            // are also added the second time around too.</span>
<a name="l1217"><span class="linenum">1217</span></a>              o = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(modInfo, o);
<a name="l1218"><span class="linenum">1218</span></a>          }
<a name="l1219"><span class="linenum">1219</span></a>  
<a name="l1220"><span class="linenum">1220</span></a>          o.name = name;
<a name="l1221"><span class="linenum">1221</span></a>  
<a name="l1222"><span class="linenum">1222</span></a>          if (!o || !o.name) {
<a name="l1223"><span class="linenum">1223</span></a>              return null;
<a name="l1224"><span class="linenum">1224</span></a>          }
<a name="l1225"><span class="linenum">1225</span></a>  
<a name="l1226"><span class="linenum">1226</span></a>          if (!o.type) {
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">            //Always assume it's javascript unless the CSS pattern is matched.</span>
<a name="l1228"><span class="linenum">1228</span></a>              o.type = JS;
<a name="l1229"><span class="linenum">1229</span></a>              p = o.path || o.fullpath;
<a name="l1230"><span class="linenum">1230</span></a>              if (p &amp;&amp; this.REGEX_CSS.test(p)) {
<a name="l1231"><span class="linenum">1231</span></a>                  o.type = CSS;
<a name="l1232"><span class="linenum">1232</span></a>              }
<a name="l1233"><span class="linenum">1233</span></a>          }
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>          if (!o.path &amp;&amp; !o.fullpath) {
<a name="l1236"><span class="linenum">1236</span></a>              o.path = _path(name, name, o.type);
<a name="l1237"><span class="linenum">1237</span></a>          }
<a name="l1238"><span class="linenum">1238</span></a>          o.supersedes = o.supersedes || o.use;
<a name="l1239"><span class="linenum">1239</span></a>  
<a name="l1240"><span class="linenum">1240</span></a>          o.ext = ('ext' in o) ? o.ext : (this._internal) ? false : true;
<a name="l1241"><span class="linenum">1241</span></a>  
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">        // Handle submodule logic</span>
<a name="l1243"><span class="linenum">1243</span></a>          subs = o.submodules;
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>          this.moduleInfo[name] = o;
<a name="l1246"><span class="linenum">1246</span></a>  
<a name="l1247"><span class="linenum">1247</span></a>          o.requires = o.requires || [];
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>          <span class="comment">/*</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment">        Only allowing the cascade of requires information, since</span>
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">        optional and supersedes are far more fine grained than</span>
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment">        a blanket requires is.</span>
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment">        */</span>
<a name="l1254"><span class="linenum">1254</span></a>          if (this.requires) {
<a name="l1255"><span class="linenum">1255</span></a>              for (i = 0; i &lt; this.requires.length; i++) {
<a name="l1256"><span class="linenum">1256</span></a>                  o.requires.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(this.requires[i]);
<a name="l1257"><span class="linenum">1257</span></a>              }
<a name="l1258"><span class="linenum">1258</span></a>          }
<a name="l1259"><span class="linenum">1259</span></a>          if (o.group &amp;&amp; this.groups &amp;&amp; this.groups[o.group]) {
<a name="l1260"><span class="linenum">1260</span></a>              g = this.groups[o.group];
<a name="l1261"><span class="linenum">1261</span></a>              if (g.requires) {
<a name="l1262"><span class="linenum">1262</span></a>                  for (i = 0; i &lt; g.requires.length; i++) {
<a name="l1263"><span class="linenum">1263</span></a>                      o.requires.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(g.requires[i]);
<a name="l1264"><span class="linenum">1264</span></a>                  }
<a name="l1265"><span class="linenum">1265</span></a>              }
<a name="l1266"><span class="linenum">1266</span></a>          }
<a name="l1267"><span class="linenum">1267</span></a>  
<a name="l1268"><span class="linenum">1268</span></a>  
<a name="l1269"><span class="linenum">1269</span></a>          if (!o.defaults) {
<a name="l1270"><span class="linenum">1270</span></a>              o.defaults = {
<a name="l1271"><span class="linenum">1271</span></a>                  requires: o.requires ? [].<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(o.requires) : null,
<a name="l1272"><span class="linenum">1272</span></a>                  supersedes: o.supersedes ? [].<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(o.supersedes) : null,
<a name="l1273"><span class="linenum">1273</span></a>                  optional: o.optional ? [].<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(o.optional) : null
<a name="l1274"><span class="linenum">1274</span></a>              };
<a name="l1275"><span class="linenum">1275</span></a>          }
<a name="l1276"><span class="linenum">1276</span></a>  
<a name="l1277"><span class="linenum">1277</span></a>          if (o.skinnable &amp;&amp; o.ext &amp;&amp; o.temp) {
<a name="l1278"><span class="linenum">1278</span></a>              skinname = this._addSkin(this.skin.defaultSkin, name);
<a name="l1279"><span class="linenum">1279</span></a>              o.requires.unshift(skinname);
<a name="l1280"><span class="linenum">1280</span></a>          }
<a name="l1281"><span class="linenum">1281</span></a>  
<a name="l1282"><span class="linenum">1282</span></a>          if (o.requires.length) {
<a name="l1283"><span class="linenum">1283</span></a>              o.requires = this.filterRequires(o.requires) || [];
<a name="l1284"><span class="linenum">1284</span></a>          }
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>          if (!o.langPack &amp;&amp; o.lang) {
<a name="l1287"><span class="linenum">1287</span></a>              langs = <a class="function" onClick="logFunction('yArray')" href="../../../../_functions/yarray.html" onMouseOver="funcPopup(event,'yarray')">yArray</a>(o.lang);
<a name="l1288"><span class="linenum">1288</span></a>              for (j = 0; j &lt; langs.length; j++) {
<a name="l1289"><span class="linenum">1289</span></a>                  lang = langs[j];
<a name="l1290"><span class="linenum">1290</span></a>                  packName = this.getLangPackName(lang, name);
<a name="l1291"><span class="linenum">1291</span></a>                  smod = this.getModuleInfo(packName);
<a name="l1292"><span class="linenum">1292</span></a>                  if (!smod) {
<a name="l1293"><span class="linenum">1293</span></a>                      smod = this._addLangPack(lang, o, packName);
<a name="l1294"><span class="linenum">1294</span></a>                  }
<a name="l1295"><span class="linenum">1295</span></a>              }
<a name="l1296"><span class="linenum">1296</span></a>          }
<a name="l1297"><span class="linenum">1297</span></a>  
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>          if (subs) {
<a name="l1300"><span class="linenum">1300</span></a>              sup = o.supersedes || [];
<a name="l1301"><span class="linenum">1301</span></a>              l = 0;
<a name="l1302"><span class="linenum">1302</span></a>  
<a name="l1303"><span class="linenum">1303</span></a>              for (i in subs) {
<a name="l1304"><span class="linenum">1304</span></a>                  if (subs.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1305"><span class="linenum">1305</span></a>                      s = subs[i];
<a name="l1306"><span class="linenum">1306</span></a>  
<a name="l1307"><span class="linenum">1307</span></a>                      s.path = s.path || _path(name, i, o.type);
<a name="l1308"><span class="linenum">1308</span></a>                      s.pkg = name;
<a name="l1309"><span class="linenum">1309</span></a>                      s.group = o.group;
<a name="l1310"><span class="linenum">1310</span></a>  
<a name="l1311"><span class="linenum">1311</span></a>                      if (s.supersedes) {
<a name="l1312"><span class="linenum">1312</span></a>                          sup = sup.<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(s.supersedes);
<a name="l1313"><span class="linenum">1313</span></a>                      }
<a name="l1314"><span class="linenum">1314</span></a>  
<a name="l1315"><span class="linenum">1315</span></a>                      smod = this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(s, i);
<a name="l1316"><span class="linenum">1316</span></a>                      sup.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(i);
<a name="l1317"><span class="linenum">1317</span></a>  
<a name="l1318"><span class="linenum">1318</span></a>                      if (smod.skinnable) {
<a name="l1319"><span class="linenum">1319</span></a>                          o.skinnable = true;
<a name="l1320"><span class="linenum">1320</span></a>                          overrides = this.skin.overrides;
<a name="l1321"><span class="linenum">1321</span></a>                          if (overrides &amp;&amp; overrides[i]) {
<a name="l1322"><span class="linenum">1322</span></a>                              for (j = 0; j &lt; overrides[i].length; j++) {
<a name="l1323"><span class="linenum">1323</span></a>                                  skinname = this._addSkin(overrides[i][j],
<a name="l1324"><span class="linenum">1324</span></a>                                           i, name);
<a name="l1325"><span class="linenum">1325</span></a>                                  sup.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(skinname);
<a name="l1326"><span class="linenum">1326</span></a>                              }
<a name="l1327"><span class="linenum">1327</span></a>                          }
<a name="l1328"><span class="linenum">1328</span></a>                          skinname = this._addSkin(this.skin.defaultSkin,
<a name="l1329"><span class="linenum">1329</span></a>                                          i, name);
<a name="l1330"><span class="linenum">1330</span></a>                          sup.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(skinname);
<a name="l1331"><span class="linenum">1331</span></a>                      }
<a name="l1332"><span class="linenum">1332</span></a>  
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">                    // looks like we are expected to work out the metadata</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment">                    // for the parent module language packs from what is</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment">                    // specified in the child modules.</span>
<a name="l1336"><span class="linenum">1336</span></a>                      if (s.lang &amp;&amp; s.lang.length) {
<a name="l1337"><span class="linenum">1337</span></a>  
<a name="l1338"><span class="linenum">1338</span></a>                          langs = <a class="function" onClick="logFunction('yArray')" href="../../../../_functions/yarray.html" onMouseOver="funcPopup(event,'yarray')">yArray</a>(s.lang);
<a name="l1339"><span class="linenum">1339</span></a>                          for (j = 0; j &lt; langs.length; j++) {
<a name="l1340"><span class="linenum">1340</span></a>                              lang = langs[j];
<a name="l1341"><span class="linenum">1341</span></a>                              packName = this.getLangPackName(lang, name);
<a name="l1342"><span class="linenum">1342</span></a>                              supName = this.getLangPackName(lang, i);
<a name="l1343"><span class="linenum">1343</span></a>                              smod = this.getModuleInfo(packName);
<a name="l1344"><span class="linenum">1344</span></a>  
<a name="l1345"><span class="linenum">1345</span></a>                              if (!smod) {
<a name="l1346"><span class="linenum">1346</span></a>                                  smod = this._addLangPack(lang, o, packName);
<a name="l1347"><span class="linenum">1347</span></a>                              }
<a name="l1348"><span class="linenum">1348</span></a>  
<a name="l1349"><span class="linenum">1349</span></a>                              flatSup = flatSup || yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(smod.supersedes);
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>                              if (!(supName in flatSup)) {
<a name="l1352"><span class="linenum">1352</span></a>                                  smod.supersedes.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(supName);
<a name="l1353"><span class="linenum">1353</span></a>                              }
<a name="l1354"><span class="linenum">1354</span></a>  
<a name="l1355"><span class="linenum">1355</span></a>                              o.lang = o.lang || [];
<a name="l1356"><span class="linenum">1356</span></a>  
<a name="l1357"><span class="linenum">1357</span></a>                              flatLang = flatLang || yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(o.lang);
<a name="l1358"><span class="linenum">1358</span></a>  
<a name="l1359"><span class="linenum">1359</span></a>                              if (!(lang in flatLang)) {
<a name="l1360"><span class="linenum">1360</span></a>                                  o.lang.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(lang);
<a name="l1361"><span class="linenum">1361</span></a>                              }
<a name="l1362"><span class="linenum">1362</span></a>  
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">// Add rollup file, need to add to supersedes list too</span>
<a name="l1364"><span class="linenum">1364</span></a>  
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">                            // default packages</span>
<a name="l1366"><span class="linenum">1366</span></a>                              packName = this.getLangPackName(ROOT_LANG, name);
<a name="l1367"><span class="linenum">1367</span></a>                              supName = this.getLangPackName(ROOT_LANG, i);
<a name="l1368"><span class="linenum">1368</span></a>  
<a name="l1369"><span class="linenum">1369</span></a>                              smod = this.getModuleInfo(packName);
<a name="l1370"><span class="linenum">1370</span></a>  
<a name="l1371"><span class="linenum">1371</span></a>                              if (!smod) {
<a name="l1372"><span class="linenum">1372</span></a>                                  smod = this._addLangPack(lang, o, packName);
<a name="l1373"><span class="linenum">1373</span></a>                              }
<a name="l1374"><span class="linenum">1374</span></a>  
<a name="l1375"><span class="linenum">1375</span></a>                              if (!(supName in flatSup)) {
<a name="l1376"><span class="linenum">1376</span></a>                                  smod.supersedes.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(supName);
<a name="l1377"><span class="linenum">1377</span></a>                              }
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">// Add rollup file, need to add to supersedes list too</span>
<a name="l1380"><span class="linenum">1380</span></a>  
<a name="l1381"><span class="linenum">1381</span></a>                          }
<a name="l1382"><span class="linenum">1382</span></a>                      }
<a name="l1383"><span class="linenum">1383</span></a>  
<a name="l1384"><span class="linenum">1384</span></a>                      l++;
<a name="l1385"><span class="linenum">1385</span></a>                  }
<a name="l1386"><span class="linenum">1386</span></a>              }
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment">            //o.supersedes = YObject.keys(yArray.hash(sup));</span>
<a name="l1388"><span class="linenum">1388</span></a>              o.supersedes = yArray.dedupe(sup);
<a name="l1389"><span class="linenum">1389</span></a>              if (this.allowRollup) {
<a name="l1390"><span class="linenum">1390</span></a>                  o.rollup = (l &lt; 4) ? l : Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(l - 1, 4);
<a name="l1391"><span class="linenum">1391</span></a>              }
<a name="l1392"><span class="linenum">1392</span></a>          }
<a name="l1393"><span class="linenum">1393</span></a>  
<a name="l1394"><span class="linenum">1394</span></a>          plugins = o.plugins;
<a name="l1395"><span class="linenum">1395</span></a>          if (plugins) {
<a name="l1396"><span class="linenum">1396</span></a>              for (i in plugins) {
<a name="l1397"><span class="linenum">1397</span></a>                  if (plugins.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1398"><span class="linenum">1398</span></a>                      plug = plugins[i];
<a name="l1399"><span class="linenum">1399</span></a>                      plug.pkg = name;
<a name="l1400"><span class="linenum">1400</span></a>                      plug.path = plug.path || _path(name, i, o.type);
<a name="l1401"><span class="linenum">1401</span></a>                      plug.requires = plug.requires || [];
<a name="l1402"><span class="linenum">1402</span></a>                      plug.group = o.group;
<a name="l1403"><span class="linenum">1403</span></a>                      this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(plug, i);
<a name="l1404"><span class="linenum">1404</span></a>                      if (o.skinnable) {
<a name="l1405"><span class="linenum">1405</span></a>                          this._addSkin(this.skin.defaultSkin, i, name);
<a name="l1406"><span class="linenum">1406</span></a>                      }
<a name="l1407"><span class="linenum">1407</span></a>  
<a name="l1408"><span class="linenum">1408</span></a>                  }
<a name="l1409"><span class="linenum">1409</span></a>              }
<a name="l1410"><span class="linenum">1410</span></a>          }
<a name="l1411"><span class="linenum">1411</span></a>  
<a name="l1412"><span class="linenum">1412</span></a>          if (o.condition) {
<a name="l1413"><span class="linenum">1413</span></a>              t = this._expandAliases(o.condition.trigger);
<a name="l1414"><span class="linenum">1414</span></a>              for (i = 0; i &lt; t.length; i++) {
<a name="l1415"><span class="linenum">1415</span></a>                  trigger = t[i];
<a name="l1416"><span class="linenum">1416</span></a>                  when = o.condition.when;
<a name="l1417"><span class="linenum">1417</span></a>                  conditions[trigger] = conditions[trigger] || {};
<a name="l1418"><span class="linenum">1418</span></a>                  conditions[trigger][name] = o.condition;
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment">                // the 'when' attribute can be 'before', 'after', or 'instead'</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment">                // the default is after.</span>
<a name="l1421"><span class="linenum">1421</span></a>                  if (when &amp;&amp; when !== 'after') {
<a name="l1422"><span class="linenum">1422</span></a>                      if (when === 'instead') { // replace the trigger
<a name="l1423"><span class="linenum">1423</span></a>                          o.supersedes = o.supersedes || [];
<a name="l1424"><span class="linenum">1424</span></a>                          o.supersedes.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(trigger);
<a name="l1425"><span class="linenum">1425</span></a>                      }
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment">                    // before the trigger</span>
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment">                        // the trigger requires the conditional mod,</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment">                        // so it should appear before the conditional</span>
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">                        // mod if we do not intersede.</span>
<a name="l1430"><span class="linenum">1430</span></a>                  } else { // after the trigger
<a name="l1431"><span class="linenum">1431</span></a>                      o.after = o.after || [];
<a name="l1432"><span class="linenum">1432</span></a>                      o.after.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(trigger);
<a name="l1433"><span class="linenum">1433</span></a>                  }
<a name="l1434"><span class="linenum">1434</span></a>              }
<a name="l1435"><span class="linenum">1435</span></a>          }
<a name="l1436"><span class="linenum">1436</span></a>  
<a name="l1437"><span class="linenum">1437</span></a>          if (o.supersedes) {
<a name="l1438"><span class="linenum">1438</span></a>              o.supersedes = this.filterRequires(o.supersedes);
<a name="l1439"><span class="linenum">1439</span></a>          }
<a name="l1440"><span class="linenum">1440</span></a>  
<a name="l1441"><span class="linenum">1441</span></a>          if (o.after) {
<a name="l1442"><span class="linenum">1442</span></a>              o.after = this.filterRequires(o.after);
<a name="l1443"><span class="linenum">1443</span></a>              o.after_map = yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(o.after);
<a name="l1444"><span class="linenum">1444</span></a>          }
<a name="l1445"><span class="linenum">1445</span></a>  
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment">        // this.dirty = true;</span>
<a name="l1447"><span class="linenum">1447</span></a>  
<a name="l1448"><span class="linenum">1448</span></a>          if (o.configFn) {
<a name="l1449"><span class="linenum">1449</span></a>              ret = o.configFn(o);
<a name="l1450"><span class="linenum">1450</span></a>              if (ret === false) {
<a name="l1451"><span class="linenum">1451</span></a>                  delete this.moduleInfo[name];
<a name="l1452"><span class="linenum">1452</span></a>                  delete GLOBAL_ENV._renderedMods[name];
<a name="l1453"><span class="linenum">1453</span></a>                  o = null;
<a name="l1454"><span class="linenum">1454</span></a>              }
<a name="l1455"><span class="linenum">1455</span></a>          }
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">        //Add to global cache</span>
<a name="l1457"><span class="linenum">1457</span></a>          if (o) {
<a name="l1458"><span class="linenum">1458</span></a>              if (!GLOBAL_ENV._renderedMods) {
<a name="l1459"><span class="linenum">1459</span></a>                  GLOBAL_ENV._renderedMods = {};
<a name="l1460"><span class="linenum">1460</span></a>              }
<a name="l1461"><span class="linenum">1461</span></a>              GLOBAL_ENV._renderedMods[name] = Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(GLOBAL_ENV._renderedMods[name] || {}, o);
<a name="l1462"><span class="linenum">1462</span></a>              GLOBAL_ENV._conditions = conditions;
<a name="l1463"><span class="linenum">1463</span></a>          }
<a name="l1464"><span class="linenum">1464</span></a>  
<a name="l1465"><span class="linenum">1465</span></a>          return o;
<a name="l1466"><span class="linenum">1466</span></a>      },
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>      <span class="comment">/**</span>
<a name="l1469"><span class="linenum">1469</span></a>  <span class="comment">     * Add a requirement for one or more module</span>
<a name="l1470"><span class="linenum">1470</span></a>  <span class="comment">     * @method require</span>
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment">     * @param {string[] | string*} what the modules to load.</span>
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">     */</span>
<a name="l1473"><span class="linenum">1473</span></a>      require: function(what) {
<a name="l1474"><span class="linenum">1474</span></a>          var a = (typeof what === 'string') ? <a class="function" onClick="logFunction('yArray')" href="../../../../_functions/yarray.html" onMouseOver="funcPopup(event,'yarray')">yArray</a>(arguments) : what;
<a name="l1475"><span class="linenum">1475</span></a>          this.dirty = true;
<a name="l1476"><span class="linenum">1476</span></a>          this.required = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(this.required, yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(this.filterRequires(a)));
<a name="l1477"><span class="linenum">1477</span></a>  
<a name="l1478"><span class="linenum">1478</span></a>          this._explodeRollups();
<a name="l1479"><span class="linenum">1479</span></a>      },
<a name="l1480"><span class="linenum">1480</span></a>      <span class="comment">/**</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">    * Grab all the items that were asked for, check to see if the Loader</span>
<a name="l1482"><span class="linenum">1482</span></a>  <span class="comment">    * meta-data contains a &quot;use&quot; array. If it doesm remove the asked item and replace it with</span>
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment">    * the content of the &quot;use&quot;.</span>
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment">    * This will make asking for: &quot;dd&quot;</span>
<a name="l1485"><span class="linenum">1485</span></a>  <span class="comment">    * Actually ask for: &quot;dd-ddm-base,dd-ddm,dd-ddm-drop,dd-drag,dd-proxy,dd-constrain,dd-drop,dd-scroll,dd-drop-plugin&quot;</span>
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">    * @private</span>
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment">    * @method _explodeRollups</span>
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment">    */</span>
<a name="l1489"><span class="linenum">1489</span></a>      _explodeRollups: function() {
<a name="l1490"><span class="linenum">1490</span></a>          var self = this, m, m2, i, a, v, len, len2,
<a name="l1491"><span class="linenum">1491</span></a>          r = self.required;
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>          if (!self.allowRollup) {
<a name="l1494"><span class="linenum">1494</span></a>              for (i in r) {
<a name="l1495"><span class="linenum">1495</span></a>                  if (r.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1496"><span class="linenum">1496</span></a>                      m = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(i);
<a name="l1497"><span class="linenum">1497</span></a>                      if (m &amp;&amp; m.use) {
<a name="l1498"><span class="linenum">1498</span></a>                          len = m.use.length;
<a name="l1499"><span class="linenum">1499</span></a>                          for (a = 0; a &lt; len; a++) {
<a name="l1500"><span class="linenum">1500</span></a>                              m2 = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(m.use[a]);
<a name="l1501"><span class="linenum">1501</span></a>                              if (m2 &amp;&amp; m2.use) {
<a name="l1502"><span class="linenum">1502</span></a>                                  len2 = m2.use.length;
<a name="l1503"><span class="linenum">1503</span></a>                                  for (v = 0; v &lt; len2; v++) {
<a name="l1504"><span class="linenum">1504</span></a>                                      r[m2.use[v]] = true;
<a name="l1505"><span class="linenum">1505</span></a>                                  }
<a name="l1506"><span class="linenum">1506</span></a>                              } else {
<a name="l1507"><span class="linenum">1507</span></a>                                  r[m.use[a]] = true;
<a name="l1508"><span class="linenum">1508</span></a>                              }
<a name="l1509"><span class="linenum">1509</span></a>                          }
<a name="l1510"><span class="linenum">1510</span></a>                      }
<a name="l1511"><span class="linenum">1511</span></a>                  }
<a name="l1512"><span class="linenum">1512</span></a>              }
<a name="l1513"><span class="linenum">1513</span></a>              self.required = r;
<a name="l1514"><span class="linenum">1514</span></a>          }
<a name="l1515"><span class="linenum">1515</span></a>  
<a name="l1516"><span class="linenum">1516</span></a>      },
<a name="l1517"><span class="linenum">1517</span></a>      <span class="comment">/**</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">    * Explodes the required array to remove aliases and replace them with real modules</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">    * @method filterRequires</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">    * @param {Array} r The original requires array</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">    * @return {Array} The new array of exploded requirements</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">    */</span>
<a name="l1523"><span class="linenum">1523</span></a>      filterRequires: function(r) {
<a name="l1524"><span class="linenum">1524</span></a>          if (r) {
<a name="l1525"><span class="linenum">1525</span></a>              if (!Y.Lang.<a class="function" onClick="logFunction('isArray')" href="../../../../_functions/isarray.html" onMouseOver="funcPopup(event,'isarray')">isArray</a>(r)) {
<a name="l1526"><span class="linenum">1526</span></a>                  r = [r];
<a name="l1527"><span class="linenum">1527</span></a>              }
<a name="l1528"><span class="linenum">1528</span></a>              r = Y.Array(r);
<a name="l1529"><span class="linenum">1529</span></a>              var c = [], i, mod, o, m;
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>              for (i = 0; i &lt; r.length; i++) {
<a name="l1532"><span class="linenum">1532</span></a>                  mod = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(r[i]);
<a name="l1533"><span class="linenum">1533</span></a>                  if (mod &amp;&amp; mod.use) {
<a name="l1534"><span class="linenum">1534</span></a>                      for (o = 0; o &lt; mod.use.length; o++) {
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">                        //Must walk the other modules in case a module is a rollup of rollups (datatype)</span>
<a name="l1536"><span class="linenum">1536</span></a>                          m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(mod.use[o]);
<a name="l1537"><span class="linenum">1537</span></a>                          if (m &amp;&amp; m.use &amp;&amp; (m.name !== mod.name)) {
<a name="l1538"><span class="linenum">1538</span></a>                              c = Y.Array.dedupe([].<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(c, this.filterRequires(m.use)));
<a name="l1539"><span class="linenum">1539</span></a>                          } else {
<a name="l1540"><span class="linenum">1540</span></a>                              c.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(mod.use[o]);
<a name="l1541"><span class="linenum">1541</span></a>                          }
<a name="l1542"><span class="linenum">1542</span></a>                      }
<a name="l1543"><span class="linenum">1543</span></a>                  } else {
<a name="l1544"><span class="linenum">1544</span></a>                      c.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(r[i]);
<a name="l1545"><span class="linenum">1545</span></a>                  }
<a name="l1546"><span class="linenum">1546</span></a>              }
<a name="l1547"><span class="linenum">1547</span></a>              r = c;
<a name="l1548"><span class="linenum">1548</span></a>          }
<a name="l1549"><span class="linenum">1549</span></a>          return r;
<a name="l1550"><span class="linenum">1550</span></a>      },
<a name="l1551"><span class="linenum">1551</span></a>  
<a name="l1552"><span class="linenum">1552</span></a>      <span class="comment">/**</span>
<a name="l1553"><span class="linenum">1553</span></a>  <span class="comment">    Returns `true` if the module can be attached to the YUI instance. Runs</span>
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">    the module's test if there is one and caches its result.</span>
<a name="l1555"><span class="linenum">1555</span></a>  <span class="comment"></span>
<a name="l1556"><span class="linenum">1556</span></a>  <span class="comment">    @method _canBeAttached</span>
<a name="l1557"><span class="linenum">1557</span></a>  <span class="comment">    @param {String} module Name of the module to check.</span>
<a name="l1558"><span class="linenum">1558</span></a>  <span class="comment">    @return {Boolean} Result of the module's test if it has one, or `true`.</span>
<a name="l1559"><span class="linenum">1559</span></a>  <span class="comment">    **/</span>
<a name="l1560"><span class="linenum">1560</span></a>      _canBeAttached: function (m) {
<a name="l1561"><span class="linenum">1561</span></a>          m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(m);
<a name="l1562"><span class="linenum">1562</span></a>          if (m &amp;&amp; m.test) {
<a name="l1563"><span class="linenum">1563</span></a>              if (!m.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>('_testResult')) {
<a name="l1564"><span class="linenum">1564</span></a>                  m._testResult = m.test(Y);
<a name="l1565"><span class="linenum">1565</span></a>              }
<a name="l1566"><span class="linenum">1566</span></a>              return m._testResult;
<a name="l1567"><span class="linenum">1567</span></a>          }
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment">        // return `true` for modules not registered as Loader will know what</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">        // to do with them later on</span>
<a name="l1570"><span class="linenum">1570</span></a>          return true;
<a name="l1571"><span class="linenum">1571</span></a>      },
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>      <span class="comment">/**</span>
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment">     * Returns an object containing properties for all modules required</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment">     * in order to load the requested module</span>
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment">     * @method getRequires</span>
<a name="l1577"><span class="linenum">1577</span></a>  <span class="comment">     * @param {object}  mod The module definition from moduleInfo.</span>
<a name="l1578"><span class="linenum">1578</span></a>  <span class="comment">     * @return {array} the expanded requirement list.</span>
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment">     */</span>
<a name="l1580"><span class="linenum">1580</span></a>      getRequires: function(mod) {
<a name="l1581"><span class="linenum">1581</span></a>  
<a name="l1582"><span class="linenum">1582</span></a>          if (!mod) {
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">            //console.log('returning no reqs for ' + mod.name);</span>
<a name="l1584"><span class="linenum">1584</span></a>              return NO_REQUIREMENTS;
<a name="l1585"><span class="linenum">1585</span></a>          }
<a name="l1586"><span class="linenum">1586</span></a>  
<a name="l1587"><span class="linenum">1587</span></a>          if (mod._parsed) {
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment">            //console.log('returning requires for ' + mod.name, mod.requires);</span>
<a name="l1589"><span class="linenum">1589</span></a>              return mod.expanded || NO_REQUIREMENTS;
<a name="l1590"><span class="linenum">1590</span></a>          }
<a name="l1591"><span class="linenum">1591</span></a>  
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">        //TODO add modue cache here out of scope..</span>
<a name="l1593"><span class="linenum">1593</span></a>  
<a name="l1594"><span class="linenum">1594</span></a>          var i, m, j, length, add, packName, lang, testresults = this.testresults,
<a name="l1595"><span class="linenum">1595</span></a>              name = mod.name, cond,
<a name="l1596"><span class="linenum">1596</span></a>              adddef = ON_PAGE[name] &amp;&amp; ON_PAGE[name].details,
<a name="l1597"><span class="linenum">1597</span></a>              optReqs = mod.optionalRequires,
<a name="l1598"><span class="linenum">1598</span></a>              d, go, def,
<a name="l1599"><span class="linenum">1599</span></a>              r, old_mod,
<a name="l1600"><span class="linenum">1600</span></a>              o, skinmod, skindef, skinpar, skinname,
<a name="l1601"><span class="linenum">1601</span></a>              intl = mod.lang || mod.intl,
<a name="l1602"><span class="linenum">1602</span></a>              ftests = Y.Features &amp;&amp; Y.Features.tests.load,
<a name="l1603"><span class="linenum">1603</span></a>              hash, reparse;
<a name="l1604"><span class="linenum">1604</span></a>  
<a name="l1605"><span class="linenum">1605</span></a>  <span class="comment">        // console.log(name);</span>
<a name="l1606"><span class="linenum">1606</span></a>  
<a name="l1607"><span class="linenum">1607</span></a>  <span class="comment">        // pattern match leaves module stub that needs to be filled out</span>
<a name="l1608"><span class="linenum">1608</span></a>          if (mod.temp &amp;&amp; adddef) {
<a name="l1609"><span class="linenum">1609</span></a>              old_mod = mod;
<a name="l1610"><span class="linenum">1610</span></a>              mod = this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(adddef, name);
<a name="l1611"><span class="linenum">1611</span></a>              mod.group = old_mod.group;
<a name="l1612"><span class="linenum">1612</span></a>              mod.pkg = old_mod.pkg;
<a name="l1613"><span class="linenum">1613</span></a>              delete mod.expanded;
<a name="l1614"><span class="linenum">1614</span></a>          }
<a name="l1615"><span class="linenum">1615</span></a>  
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">        // console.log('cache: ' + mod.langCache + ' == ' + this.lang);</span>
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">        //If a skin or a lang is different, reparse..</span>
<a name="l1619"><span class="linenum">1619</span></a>          reparse = !((!this.lang || mod.langCache === this.lang) &amp;&amp; (mod.skinCache === this.skin.defaultSkin));
<a name="l1620"><span class="linenum">1620</span></a>  
<a name="l1621"><span class="linenum">1621</span></a>          if (mod.expanded &amp;&amp; !reparse) {
<a name="l1622"><span class="linenum">1622</span></a>              return mod.expanded;
<a name="l1623"><span class="linenum">1623</span></a>          }
<a name="l1624"><span class="linenum">1624</span></a>  
<a name="l1625"><span class="linenum">1625</span></a>  <span class="comment">        // Optional dependencies are dependencies that may or may not be</span>
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment">        // available.</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment">        // This feature was designed specifically to be used when transpiling</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment">        // ES6 modules, in order to use polyfills and regular scripts that define</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment">        // global variables without having to import them since they should be</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">        // available in the global scope.</span>
<a name="l1631"><span class="linenum">1631</span></a>          if (optReqs) {
<a name="l1632"><span class="linenum">1632</span></a>              for (i = 0, length = optReqs.length; i &lt; length; i++) {
<a name="l1633"><span class="linenum">1633</span></a>                  if (this._canBeAttached(optReqs[i])) {
<a name="l1634"><span class="linenum">1634</span></a>                      mod.requires.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(optReqs[i]);
<a name="l1635"><span class="linenum">1635</span></a>                  }
<a name="l1636"><span class="linenum">1636</span></a>              }
<a name="l1637"><span class="linenum">1637</span></a>          }
<a name="l1638"><span class="linenum">1638</span></a>  
<a name="l1639"><span class="linenum">1639</span></a>          d = [];
<a name="l1640"><span class="linenum">1640</span></a>          hash = {};
<a name="l1641"><span class="linenum">1641</span></a>          r = this.filterRequires(mod.requires);
<a name="l1642"><span class="linenum">1642</span></a>          if (mod.lang) {
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment">            //If a module has a lang attribute, auto add the intl requirement.</span>
<a name="l1644"><span class="linenum">1644</span></a>              d.unshift('intl');
<a name="l1645"><span class="linenum">1645</span></a>              r.unshift('intl');
<a name="l1646"><span class="linenum">1646</span></a>              intl = true;
<a name="l1647"><span class="linenum">1647</span></a>          }
<a name="l1648"><span class="linenum">1648</span></a>          o = this.filterRequires(mod.optional);
<a name="l1649"><span class="linenum">1649</span></a>  
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>          mod._parsed = true;
<a name="l1652"><span class="linenum">1652</span></a>          mod.langCache = this.lang;
<a name="l1653"><span class="linenum">1653</span></a>          mod.skinCache = this.skin.defaultSkin;
<a name="l1654"><span class="linenum">1654</span></a>  
<a name="l1655"><span class="linenum">1655</span></a>          for (i = 0; i &lt; r.length; i++) {
<a name="l1656"><span class="linenum">1656</span></a>              if (!hash[r[i]]) {
<a name="l1657"><span class="linenum">1657</span></a>                  d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(r[i]);
<a name="l1658"><span class="linenum">1658</span></a>                  hash[r[i]] = true;
<a name="l1659"><span class="linenum">1659</span></a>                  m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(r[i]);
<a name="l1660"><span class="linenum">1660</span></a>                  if (m) {
<a name="l1661"><span class="linenum">1661</span></a>                      add = this.getRequires(m);
<a name="l1662"><span class="linenum">1662</span></a>                      intl = intl || (m.expanded_map &amp;&amp;
<a name="l1663"><span class="linenum">1663</span></a>                          (INTL in m.expanded_map));
<a name="l1664"><span class="linenum">1664</span></a>                      for (j = 0; j &lt; add.length; j++) {
<a name="l1665"><span class="linenum">1665</span></a>                          d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(add[j]);
<a name="l1666"><span class="linenum">1666</span></a>                      }
<a name="l1667"><span class="linenum">1667</span></a>                  }
<a name="l1668"><span class="linenum">1668</span></a>              }
<a name="l1669"><span class="linenum">1669</span></a>          }
<a name="l1670"><span class="linenum">1670</span></a>  
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">        // get the requirements from superseded modules, if any</span>
<a name="l1672"><span class="linenum">1672</span></a>          r = this.filterRequires(mod.supersedes);
<a name="l1673"><span class="linenum">1673</span></a>          if (r) {
<a name="l1674"><span class="linenum">1674</span></a>              for (i = 0; i &lt; r.length; i++) {
<a name="l1675"><span class="linenum">1675</span></a>                  if (!hash[r[i]]) {
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">                    // if this module has submodules, the requirements list is</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment">                    // expanded to include the submodules.  This is so we can</span>
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">                    // prevent dups when a submodule is already loaded and the</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment">                    // parent is requested.</span>
<a name="l1680"><span class="linenum">1680</span></a>                      if (mod.submodules) {
<a name="l1681"><span class="linenum">1681</span></a>                          d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(r[i]);
<a name="l1682"><span class="linenum">1682</span></a>                      }
<a name="l1683"><span class="linenum">1683</span></a>  
<a name="l1684"><span class="linenum">1684</span></a>                      hash[r[i]] = true;
<a name="l1685"><span class="linenum">1685</span></a>                      m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(r[i]);
<a name="l1686"><span class="linenum">1686</span></a>  
<a name="l1687"><span class="linenum">1687</span></a>                      if (m) {
<a name="l1688"><span class="linenum">1688</span></a>                          add = this.getRequires(m);
<a name="l1689"><span class="linenum">1689</span></a>                          intl = intl || (m.expanded_map &amp;&amp;
<a name="l1690"><span class="linenum">1690</span></a>                              (INTL in m.expanded_map));
<a name="l1691"><span class="linenum">1691</span></a>                          for (j = 0; j &lt; add.length; j++) {
<a name="l1692"><span class="linenum">1692</span></a>                              d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(add[j]);
<a name="l1693"><span class="linenum">1693</span></a>                          }
<a name="l1694"><span class="linenum">1694</span></a>                      }
<a name="l1695"><span class="linenum">1695</span></a>                  }
<a name="l1696"><span class="linenum">1696</span></a>              }
<a name="l1697"><span class="linenum">1697</span></a>          }
<a name="l1698"><span class="linenum">1698</span></a>  
<a name="l1699"><span class="linenum">1699</span></a>          if (o &amp;&amp; this.loadOptional) {
<a name="l1700"><span class="linenum">1700</span></a>              for (i = 0; i &lt; o.length; i++) {
<a name="l1701"><span class="linenum">1701</span></a>                  if (!hash[o[i]]) {
<a name="l1702"><span class="linenum">1702</span></a>                      d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(o[i]);
<a name="l1703"><span class="linenum">1703</span></a>                      hash[o[i]] = true;
<a name="l1704"><span class="linenum">1704</span></a>                      m = this.getModuleInfo(o[i]);
<a name="l1705"><span class="linenum">1705</span></a>                      if (m) {
<a name="l1706"><span class="linenum">1706</span></a>                          add = this.getRequires(m);
<a name="l1707"><span class="linenum">1707</span></a>                          intl = intl || (m.expanded_map &amp;&amp;
<a name="l1708"><span class="linenum">1708</span></a>                              (INTL in m.expanded_map));
<a name="l1709"><span class="linenum">1709</span></a>                          for (j = 0; j &lt; add.length; j++) {
<a name="l1710"><span class="linenum">1710</span></a>                              d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(add[j]);
<a name="l1711"><span class="linenum">1711</span></a>                          }
<a name="l1712"><span class="linenum">1712</span></a>                      }
<a name="l1713"><span class="linenum">1713</span></a>                  }
<a name="l1714"><span class="linenum">1714</span></a>              }
<a name="l1715"><span class="linenum">1715</span></a>          }
<a name="l1716"><span class="linenum">1716</span></a>  
<a name="l1717"><span class="linenum">1717</span></a>          cond = this.conditions[name];
<a name="l1718"><span class="linenum">1718</span></a>  
<a name="l1719"><span class="linenum">1719</span></a>          if (cond) {
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment">            //Set the module to not parsed since we have conditionals and this could change the dependency tree.</span>
<a name="l1721"><span class="linenum">1721</span></a>              mod._parsed = false;
<a name="l1722"><span class="linenum">1722</span></a>              if (testresults &amp;&amp; ftests) {
<a name="l1723"><span class="linenum">1723</span></a>                  oeach(testresults, function(result, id) {
<a name="l1724"><span class="linenum">1724</span></a>                      var condmod = ftests[id].name;
<a name="l1725"><span class="linenum">1725</span></a>                      if (!hash[condmod] &amp;&amp; ftests[id].trigger === name) {
<a name="l1726"><span class="linenum">1726</span></a>                          if (result &amp;&amp; ftests[id]) {
<a name="l1727"><span class="linenum">1727</span></a>                              hash[condmod] = true;
<a name="l1728"><span class="linenum">1728</span></a>                              d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(condmod);
<a name="l1729"><span class="linenum">1729</span></a>                          }
<a name="l1730"><span class="linenum">1730</span></a>                      }
<a name="l1731"><span class="linenum">1731</span></a>                  });
<a name="l1732"><span class="linenum">1732</span></a>              } else {
<a name="l1733"><span class="linenum">1733</span></a>                  for (i in cond) {
<a name="l1734"><span class="linenum">1734</span></a>                      if (cond.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1735"><span class="linenum">1735</span></a>                          if (!hash[i]) {
<a name="l1736"><span class="linenum">1736</span></a>                              def = cond[i];
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">                            //first see if they've specfied a ua check</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">                            //then see if they've got a test fn &amp; if it returns true</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">                            //otherwise just having a condition block is enough</span>
<a name="l1740"><span class="linenum">1740</span></a>                              go = def &amp;&amp; ((!def.ua &amp;&amp; !def.test) || (def.ua &amp;&amp; Y.UA[def.ua]) ||
<a name="l1741"><span class="linenum">1741</span></a>                                          (def.test &amp;&amp; def.test(Y, r)));
<a name="l1742"><span class="linenum">1742</span></a>  
<a name="l1743"><span class="linenum">1743</span></a>                              if (go) {
<a name="l1744"><span class="linenum">1744</span></a>                                  hash[i] = true;
<a name="l1745"><span class="linenum">1745</span></a>                                  d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(i);
<a name="l1746"><span class="linenum">1746</span></a>                                  m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(i);
<a name="l1747"><span class="linenum">1747</span></a>                                  if (m) {
<a name="l1748"><span class="linenum">1748</span></a>                                      add = this.getRequires(m);
<a name="l1749"><span class="linenum">1749</span></a>                                      for (j = 0; j &lt; add.length; j++) {
<a name="l1750"><span class="linenum">1750</span></a>                                          d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(add[j]);
<a name="l1751"><span class="linenum">1751</span></a>                                      }
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>                                  }
<a name="l1754"><span class="linenum">1754</span></a>                              }
<a name="l1755"><span class="linenum">1755</span></a>                          }
<a name="l1756"><span class="linenum">1756</span></a>                      }
<a name="l1757"><span class="linenum">1757</span></a>                  }
<a name="l1758"><span class="linenum">1758</span></a>              }
<a name="l1759"><span class="linenum">1759</span></a>          }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment">        // Create skin modules</span>
<a name="l1762"><span class="linenum">1762</span></a>          if (mod.skinnable) {
<a name="l1763"><span class="linenum">1763</span></a>              skindef = this.skin.overrides;
<a name="l1764"><span class="linenum">1764</span></a>              for (i in YUI.Env.aliases) {
<a name="l1765"><span class="linenum">1765</span></a>                  if (YUI.Env.aliases.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l1766"><span class="linenum">1766</span></a>                      if (Y.Array.<a class="function" onClick="logFunction('indexOf')" href="../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(YUI.Env.aliases[i], name) &gt; -1) {
<a name="l1767"><span class="linenum">1767</span></a>                          skinpar = i;
<a name="l1768"><span class="linenum">1768</span></a>                      }
<a name="l1769"><span class="linenum">1769</span></a>                  }
<a name="l1770"><span class="linenum">1770</span></a>              }
<a name="l1771"><span class="linenum">1771</span></a>              if (skindef &amp;&amp; (skindef[name] || (skinpar &amp;&amp; skindef[skinpar]))) {
<a name="l1772"><span class="linenum">1772</span></a>                  skinname = name;
<a name="l1773"><span class="linenum">1773</span></a>                  if (skindef[skinpar]) {
<a name="l1774"><span class="linenum">1774</span></a>                      skinname = skinpar;
<a name="l1775"><span class="linenum">1775</span></a>                  }
<a name="l1776"><span class="linenum">1776</span></a>                  for (i = 0; i &lt; skindef[skinname].length; i++) {
<a name="l1777"><span class="linenum">1777</span></a>                      skinmod = this._addSkin(skindef[skinname][i], name);
<a name="l1778"><span class="linenum">1778</span></a>                      if (!this.isCSSLoaded(skinmod, this._boot)) {
<a name="l1779"><span class="linenum">1779</span></a>                          d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(skinmod);
<a name="l1780"><span class="linenum">1780</span></a>                      }
<a name="l1781"><span class="linenum">1781</span></a>                  }
<a name="l1782"><span class="linenum">1782</span></a>              } else {
<a name="l1783"><span class="linenum">1783</span></a>                  skinmod = this._addSkin(this.skin.defaultSkin, name);
<a name="l1784"><span class="linenum">1784</span></a>                  if (!this.isCSSLoaded(skinmod, this._boot)) {
<a name="l1785"><span class="linenum">1785</span></a>                      d.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(skinmod);
<a name="l1786"><span class="linenum">1786</span></a>                  }
<a name="l1787"><span class="linenum">1787</span></a>              }
<a name="l1788"><span class="linenum">1788</span></a>          }
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>          mod._parsed = false;
<a name="l1791"><span class="linenum">1791</span></a>  
<a name="l1792"><span class="linenum">1792</span></a>          if (intl) {
<a name="l1793"><span class="linenum">1793</span></a>  
<a name="l1794"><span class="linenum">1794</span></a>              if (mod.lang &amp;&amp; !mod.langPack &amp;&amp; Y.Intl) {
<a name="l1795"><span class="linenum">1795</span></a>                  lang = Y.Intl.lookupBestLang(this.lang || ROOT_LANG, mod.lang);
<a name="l1796"><span class="linenum">1796</span></a>                  packName = this.getLangPackName(lang, name);
<a name="l1797"><span class="linenum">1797</span></a>                  if (packName) {
<a name="l1798"><span class="linenum">1798</span></a>                      d.unshift(packName);
<a name="l1799"><span class="linenum">1799</span></a>                  }
<a name="l1800"><span class="linenum">1800</span></a>              }
<a name="l1801"><span class="linenum">1801</span></a>              d.unshift(INTL);
<a name="l1802"><span class="linenum">1802</span></a>          }
<a name="l1803"><span class="linenum">1803</span></a>  
<a name="l1804"><span class="linenum">1804</span></a>          mod.expanded_map = yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(d);
<a name="l1805"><span class="linenum">1805</span></a>  
<a name="l1806"><span class="linenum">1806</span></a>          mod.expanded = YObject.keys(mod.expanded_map);
<a name="l1807"><span class="linenum">1807</span></a>  
<a name="l1808"><span class="linenum">1808</span></a>          return mod.expanded;
<a name="l1809"><span class="linenum">1809</span></a>      },
<a name="l1810"><span class="linenum">1810</span></a>      <span class="comment">/**</span>
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment">    * Check to see if named css module is already loaded on the page</span>
<a name="l1812"><span class="linenum">1812</span></a>  <span class="comment">    * @method isCSSLoaded</span>
<a name="l1813"><span class="linenum">1813</span></a>  <span class="comment">    * @param {String} name The name of the css file</span>
<a name="l1814"><span class="linenum">1814</span></a>  <span class="comment">    * @param {Boolean} skip To skip the short-circuit for ignoreRegister</span>
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment">    * @return Boolean</span>
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment">    */</span>
<a name="l1817"><span class="linenum">1817</span></a>      isCSSLoaded: function(name, skip) {
<a name="l1818"><span class="linenum">1818</span></a>  <span class="comment">        //TODO - Make this call a batching call with name being an array</span>
<a name="l1819"><span class="linenum">1819</span></a>          if (!name || !YUI.Env.cssStampEl || (!skip &amp;&amp; this.ignoreRegistered)) {
<a name="l1820"><span class="linenum">1820</span></a>              return false;
<a name="l1821"><span class="linenum">1821</span></a>          }
<a name="l1822"><span class="linenum">1822</span></a>          var el = YUI.Env.cssStampEl,
<a name="l1823"><span class="linenum">1823</span></a>              ret = false,
<a name="l1824"><span class="linenum">1824</span></a>              mod = YUI.Env._cssLoaded[name],
<a name="l1825"><span class="linenum">1825</span></a>              style = el.currentStyle; <span class="comment">//IE</span>
<a name="l1826"><span class="linenum">1826</span></a>  
<a name="l1827"><span class="linenum">1827</span></a>  
<a name="l1828"><span class="linenum">1828</span></a>          if (mod !== undefined) {
<a name="l1829"><span class="linenum">1829</span></a>              return mod;
<a name="l1830"><span class="linenum">1830</span></a>          }
<a name="l1831"><span class="linenum">1831</span></a>  
<a name="l1832"><span class="linenum">1832</span></a>  <span class="comment">        //Add the classname to the element</span>
<a name="l1833"><span class="linenum">1833</span></a>          el.className = name;
<a name="l1834"><span class="linenum">1834</span></a>  
<a name="l1835"><span class="linenum">1835</span></a>          if (!style) {
<a name="l1836"><span class="linenum">1836</span></a>              style = Y.config.doc.defaultView.getComputedStyle(el, null);
<a name="l1837"><span class="linenum">1837</span></a>          }
<a name="l1838"><span class="linenum">1838</span></a>  
<a name="l1839"><span class="linenum">1839</span></a>          if (style &amp;&amp; style.display === 'none') {
<a name="l1840"><span class="linenum">1840</span></a>              ret = true;
<a name="l1841"><span class="linenum">1841</span></a>          }
<a name="l1842"><span class="linenum">1842</span></a>  
<a name="l1843"><span class="linenum">1843</span></a>  
<a name="l1844"><span class="linenum">1844</span></a>          el.className = ''; <span class="comment">//Reset the classname to ''</span>
<a name="l1845"><span class="linenum">1845</span></a>  
<a name="l1846"><span class="linenum">1846</span></a>          YUI.Env._cssLoaded[name] = ret;
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>          return ret;
<a name="l1849"><span class="linenum">1849</span></a>      },
<a name="l1850"><span class="linenum">1850</span></a>  
<a name="l1851"><span class="linenum">1851</span></a>      <span class="comment">/**</span>
<a name="l1852"><span class="linenum">1852</span></a>  <span class="comment">     * Returns a hash of module names the supplied module satisfies.</span>
<a name="l1853"><span class="linenum">1853</span></a>  <span class="comment">     * @method getProvides</span>
<a name="l1854"><span class="linenum">1854</span></a>  <span class="comment">     * @param {string} name The name of the module.</span>
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment">     * @return {object} what this module provides.</span>
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment">     */</span>
<a name="l1857"><span class="linenum">1857</span></a>      getProvides: function(name) {
<a name="l1858"><span class="linenum">1858</span></a>          var m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(name), o, s;
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">            // supmap = this.provides;</span>
<a name="l1860"><span class="linenum">1860</span></a>  
<a name="l1861"><span class="linenum">1861</span></a>          if (!m) {
<a name="l1862"><span class="linenum">1862</span></a>              return NOT_FOUND;
<a name="l1863"><span class="linenum">1863</span></a>          }
<a name="l1864"><span class="linenum">1864</span></a>  
<a name="l1865"><span class="linenum">1865</span></a>          if (m &amp;&amp; !m.provides) {
<a name="l1866"><span class="linenum">1866</span></a>              o = {};
<a name="l1867"><span class="linenum">1867</span></a>              s = m.supersedes;
<a name="l1868"><span class="linenum">1868</span></a>  
<a name="l1869"><span class="linenum">1869</span></a>              if (s) {
<a name="l1870"><span class="linenum">1870</span></a>                  yArray.<a class="phpfunction" onClick="logFunction('each')" href="../../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(s, function(v) {
<a name="l1871"><span class="linenum">1871</span></a>                      Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(o, this.getProvides(v));
<a name="l1872"><span class="linenum">1872</span></a>                  }, this);
<a name="l1873"><span class="linenum">1873</span></a>              }
<a name="l1874"><span class="linenum">1874</span></a>  
<a name="l1875"><span class="linenum">1875</span></a>              o[name] = true;
<a name="l1876"><span class="linenum">1876</span></a>              m.provides = o;
<a name="l1877"><span class="linenum">1877</span></a>  
<a name="l1878"><span class="linenum">1878</span></a>          }
<a name="l1879"><span class="linenum">1879</span></a>  
<a name="l1880"><span class="linenum">1880</span></a>          return m.provides;
<a name="l1881"><span class="linenum">1881</span></a>      },
<a name="l1882"><span class="linenum">1882</span></a>  
<a name="l1883"><span class="linenum">1883</span></a>      <span class="comment">/**</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">     * Calculates the dependency tree, the result is stored in the sorted</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">     * property.</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment">     * @method calculate</span>
<a name="l1887"><span class="linenum">1887</span></a>  <span class="comment">     * @param {object} o optional options object.</span>
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">     * @param {string} type optional argument to prune modules.</span>
<a name="l1889"><span class="linenum">1889</span></a>  <span class="comment">     */</span>
<a name="l1890"><span class="linenum">1890</span></a>      calculate: function(o, type) {
<a name="l1891"><span class="linenum">1891</span></a>          if (o || type || this.dirty) {
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>              if (o) {
<a name="l1894"><span class="linenum">1894</span></a>                  this._config(o);
<a name="l1895"><span class="linenum">1895</span></a>              }
<a name="l1896"><span class="linenum">1896</span></a>  
<a name="l1897"><span class="linenum">1897</span></a>              if (!this._init) {
<a name="l1898"><span class="linenum">1898</span></a>                  this._setup();
<a name="l1899"><span class="linenum">1899</span></a>              }
<a name="l1900"><span class="linenum">1900</span></a>  
<a name="l1901"><span class="linenum">1901</span></a>              this._explode();
<a name="l1902"><span class="linenum">1902</span></a>  
<a name="l1903"><span class="linenum">1903</span></a>              if (this.allowRollup) {
<a name="l1904"><span class="linenum">1904</span></a>                  this._rollup();
<a name="l1905"><span class="linenum">1905</span></a>              } else {
<a name="l1906"><span class="linenum">1906</span></a>                  this._explodeRollups();
<a name="l1907"><span class="linenum">1907</span></a>              }
<a name="l1908"><span class="linenum">1908</span></a>              this.<a class="function" onClick="logFunction('_reduce')" href="../../../../_functions/_reduce.html" onMouseOver="funcPopup(event,'_reduce')">_reduce</a>();
<a name="l1909"><span class="linenum">1909</span></a>              this._sort();
<a name="l1910"><span class="linenum">1910</span></a>          }
<a name="l1911"><span class="linenum">1911</span></a>      },
<a name="l1912"><span class="linenum">1912</span></a>      <span class="comment">/**</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">    * Creates a &quot;psuedo&quot; package for languages provided in the lang array</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">    * @method _addLangPack</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment">    * @private</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment">    * @param {String} lang The language to create</span>
<a name="l1917"><span class="linenum">1917</span></a>  <span class="comment">    * @param {Object} m The module definition to create the language pack around</span>
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment">    * @param {String} packName The name of the package (e.g: lang/datatype-date-en-US)</span>
<a name="l1919"><span class="linenum">1919</span></a>  <span class="comment">    * @return {Object} The module definition</span>
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment">    */</span>
<a name="l1921"><span class="linenum">1921</span></a>      _addLangPack: function(lang, m, packName) {
<a name="l1922"><span class="linenum">1922</span></a>          var name = m.name,
<a name="l1923"><span class="linenum">1923</span></a>              packPath, conf,
<a name="l1924"><span class="linenum">1924</span></a>              existing = this.getModuleInfo(packName);
<a name="l1925"><span class="linenum">1925</span></a>  
<a name="l1926"><span class="linenum">1926</span></a>          if (!existing) {
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>              packPath = _path((m.pkg || name), packName, JS, true);
<a name="l1929"><span class="linenum">1929</span></a>  
<a name="l1930"><span class="linenum">1930</span></a>              conf = {
<a name="l1931"><span class="linenum">1931</span></a>                  path: packPath,
<a name="l1932"><span class="linenum">1932</span></a>                  intl: true,
<a name="l1933"><span class="linenum">1933</span></a>                  langPack: true,
<a name="l1934"><span class="linenum">1934</span></a>                  ext: m.ext,
<a name="l1935"><span class="linenum">1935</span></a>                  group: m.group,
<a name="l1936"><span class="linenum">1936</span></a>                  supersedes: []
<a name="l1937"><span class="linenum">1937</span></a>              };
<a name="l1938"><span class="linenum">1938</span></a>              if (m.root) {
<a name="l1939"><span class="linenum">1939</span></a>                  conf.root = m.root;
<a name="l1940"><span class="linenum">1940</span></a>              }
<a name="l1941"><span class="linenum">1941</span></a>              if (m.base) {
<a name="l1942"><span class="linenum">1942</span></a>                  conf.base = m.base;
<a name="l1943"><span class="linenum">1943</span></a>              }
<a name="l1944"><span class="linenum">1944</span></a>  
<a name="l1945"><span class="linenum">1945</span></a>              if (m.configFn) {
<a name="l1946"><span class="linenum">1946</span></a>                  conf.configFn = m.configFn;
<a name="l1947"><span class="linenum">1947</span></a>              }
<a name="l1948"><span class="linenum">1948</span></a>  
<a name="l1949"><span class="linenum">1949</span></a>              this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(conf, packName);
<a name="l1950"><span class="linenum">1950</span></a>  
<a name="l1951"><span class="linenum">1951</span></a>              if (lang) {
<a name="l1952"><span class="linenum">1952</span></a>                  Y.Env.lang = Y.Env.lang || {};
<a name="l1953"><span class="linenum">1953</span></a>                  Y.Env.lang[lang] = Y.Env.lang[lang] || {};
<a name="l1954"><span class="linenum">1954</span></a>                  Y.Env.lang[lang][name] = true;
<a name="l1955"><span class="linenum">1955</span></a>              }
<a name="l1956"><span class="linenum">1956</span></a>          }
<a name="l1957"><span class="linenum">1957</span></a>  
<a name="l1958"><span class="linenum">1958</span></a>          return this.getModuleInfo(packName);
<a name="l1959"><span class="linenum">1959</span></a>      },
<a name="l1960"><span class="linenum">1960</span></a>  
<a name="l1961"><span class="linenum">1961</span></a>      <span class="comment">/**</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment">     * Investigates the current YUI configuration on the page.  By default,</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment">     * modules already detected will not be loaded again unless a force</span>
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">     * option is encountered.  Called by calculate()</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment">     * @method _setup</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment">     * @private</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">     */</span>
<a name="l1968"><span class="linenum">1968</span></a>      _setup: function() {
<a name="l1969"><span class="linenum">1969</span></a>          var info = this.moduleInfo, name, i, j, m, l,
<a name="l1970"><span class="linenum">1970</span></a>              packName;
<a name="l1971"><span class="linenum">1971</span></a>  
<a name="l1972"><span class="linenum">1972</span></a>          for (name in info) {
<a name="l1973"><span class="linenum">1973</span></a>              if (info.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(name)) {
<a name="l1974"><span class="linenum">1974</span></a>                  m = info[name];
<a name="l1975"><span class="linenum">1975</span></a>                  if (m) {
<a name="l1976"><span class="linenum">1976</span></a>  
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment">                    // remove dups</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">                    //m.requires = YObject.keys(yArray.hash(m.requires));</span>
<a name="l1979"><span class="linenum">1979</span></a>                      m.requires = yArray.dedupe(m.requires);
<a name="l1980"><span class="linenum">1980</span></a>  
<a name="l1981"><span class="linenum">1981</span></a>  <span class="comment">                    // Create lang pack modules</span>
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment">                    //if (m.lang &amp;&amp; m.lang.length) {</span>
<a name="l1983"><span class="linenum">1983</span></a>                      if (m.lang) {
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment">                        // Setup root package if the module has lang defined,</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment">                        // it needs to provide a root language pack</span>
<a name="l1986"><span class="linenum">1986</span></a>                          packName = this.getLangPackName(ROOT_LANG, name);
<a name="l1987"><span class="linenum">1987</span></a>                          this._addLangPack(null, m, packName);
<a name="l1988"><span class="linenum">1988</span></a>                      }
<a name="l1989"><span class="linenum">1989</span></a>  
<a name="l1990"><span class="linenum">1990</span></a>                  }
<a name="l1991"><span class="linenum">1991</span></a>              }
<a name="l1992"><span class="linenum">1992</span></a>          }
<a name="l1993"><span class="linenum">1993</span></a>  
<a name="l1994"><span class="linenum">1994</span></a>  
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment">        //l = Y.merge(this.inserted);</span>
<a name="l1996"><span class="linenum">1996</span></a>          l = {};
<a name="l1997"><span class="linenum">1997</span></a>  
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment">        // available modules</span>
<a name="l1999"><span class="linenum">1999</span></a>          if (!this.ignoreRegistered) {
<a name="l2000"><span class="linenum">2000</span></a>              Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(l, GLOBAL_ENV.mods);
<a name="l2001"><span class="linenum">2001</span></a>          }
<a name="l2002"><span class="linenum">2002</span></a>  
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment">        // add the ignore list to the list of loaded packages</span>
<a name="l2004"><span class="linenum">2004</span></a>          if (this.ignore) {
<a name="l2005"><span class="linenum">2005</span></a>              Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(l, yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(this.ignore));
<a name="l2006"><span class="linenum">2006</span></a>          }
<a name="l2007"><span class="linenum">2007</span></a>  
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment">        // expand the list to include superseded modules</span>
<a name="l2009"><span class="linenum">2009</span></a>          for (j in l) {
<a name="l2010"><span class="linenum">2010</span></a>              if (l.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(j)) {
<a name="l2011"><span class="linenum">2011</span></a>                  Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(l, this.getProvides(j));
<a name="l2012"><span class="linenum">2012</span></a>              }
<a name="l2013"><span class="linenum">2013</span></a>          }
<a name="l2014"><span class="linenum">2014</span></a>  
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment">        // remove modules on the force list from the loaded list</span>
<a name="l2016"><span class="linenum">2016</span></a>          if (this.force) {
<a name="l2017"><span class="linenum">2017</span></a>              for (i = 0; i &lt; this.force.length; i++) {
<a name="l2018"><span class="linenum">2018</span></a>                  if (this.force[i] in l) {
<a name="l2019"><span class="linenum">2019</span></a>                      delete l[this.force[i]];
<a name="l2020"><span class="linenum">2020</span></a>                  }
<a name="l2021"><span class="linenum">2021</span></a>              }
<a name="l2022"><span class="linenum">2022</span></a>          }
<a name="l2023"><span class="linenum">2023</span></a>  
<a name="l2024"><span class="linenum">2024</span></a>          Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(this.loaded, l);
<a name="l2025"><span class="linenum">2025</span></a>  
<a name="l2026"><span class="linenum">2026</span></a>          this._init = true;
<a name="l2027"><span class="linenum">2027</span></a>      },
<a name="l2028"><span class="linenum">2028</span></a>  
<a name="l2029"><span class="linenum">2029</span></a>      <span class="comment">/**</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">     * Builds a module name for a language pack</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment">     * @method getLangPackName</span>
<a name="l2032"><span class="linenum">2032</span></a>  <span class="comment">     * @param {string} lang the language code.</span>
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">     * @param {string} mname the module to build it for.</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment">     * @return {string} the language pack module name.</span>
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment">     */</span>
<a name="l2036"><span class="linenum">2036</span></a>      getLangPackName: function(lang, mname) {
<a name="l2037"><span class="linenum">2037</span></a>          return ('lang/' + mname + ((lang) ? '_' + lang : ''));
<a name="l2038"><span class="linenum">2038</span></a>      },
<a name="l2039"><span class="linenum">2039</span></a>      <span class="comment">/**</span>
<a name="l2040"><span class="linenum">2040</span></a>  <span class="comment">     * Inspects the required modules list looking for additional</span>
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment">     * dependencies.  Expands the required list to include all</span>
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment">     * required modules.  Called by calculate()</span>
<a name="l2043"><span class="linenum">2043</span></a>  <span class="comment">     * @method _explode</span>
<a name="l2044"><span class="linenum">2044</span></a>  <span class="comment">     * @private</span>
<a name="l2045"><span class="linenum">2045</span></a>  <span class="comment">     */</span>
<a name="l2046"><span class="linenum">2046</span></a>      _explode: function() {
<a name="l2047"><span class="linenum">2047</span></a>  <span class="comment">        //TODO Move done out of scope</span>
<a name="l2048"><span class="linenum">2048</span></a>          var r = this.required, m, reqs, done = {},
<a name="l2049"><span class="linenum">2049</span></a>              self = this, name, expound;
<a name="l2050"><span class="linenum">2050</span></a>  
<a name="l2051"><span class="linenum">2051</span></a>  <span class="comment">        // the setup phase is over, all modules have been created</span>
<a name="l2052"><span class="linenum">2052</span></a>          self.dirty = false;
<a name="l2053"><span class="linenum">2053</span></a>  
<a name="l2054"><span class="linenum">2054</span></a>          self._explodeRollups();
<a name="l2055"><span class="linenum">2055</span></a>          r = self.required;
<a name="l2056"><span class="linenum">2056</span></a>  
<a name="l2057"><span class="linenum">2057</span></a>          for (name in r) {
<a name="l2058"><span class="linenum">2058</span></a>              if (r.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(name)) {
<a name="l2059"><span class="linenum">2059</span></a>                  if (!done[name]) {
<a name="l2060"><span class="linenum">2060</span></a>                      done[name] = true;
<a name="l2061"><span class="linenum">2061</span></a>                      m = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(name);
<a name="l2062"><span class="linenum">2062</span></a>                      if (m) {
<a name="l2063"><span class="linenum">2063</span></a>                          expound = m.expound;
<a name="l2064"><span class="linenum">2064</span></a>  
<a name="l2065"><span class="linenum">2065</span></a>                          if (expound) {
<a name="l2066"><span class="linenum">2066</span></a>                              r[expound] = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(expound);
<a name="l2067"><span class="linenum">2067</span></a>                              reqs = self.getRequires(r[expound]);
<a name="l2068"><span class="linenum">2068</span></a>                              Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(r, yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(reqs));
<a name="l2069"><span class="linenum">2069</span></a>                          }
<a name="l2070"><span class="linenum">2070</span></a>  
<a name="l2071"><span class="linenum">2071</span></a>                          reqs = self.getRequires(m);
<a name="l2072"><span class="linenum">2072</span></a>                          Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(r, yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(reqs));
<a name="l2073"><span class="linenum">2073</span></a>                      }
<a name="l2074"><span class="linenum">2074</span></a>                  }
<a name="l2075"><span class="linenum">2075</span></a>              }
<a name="l2076"><span class="linenum">2076</span></a>          }
<a name="l2077"><span class="linenum">2077</span></a>  
<a name="l2078"><span class="linenum">2078</span></a>      },
<a name="l2079"><span class="linenum">2079</span></a>      <span class="comment">/**</span>
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment">    * The default method used to test a module against a pattern</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment">    * @method _patternTest</span>
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment">    * @private</span>
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment">    * @param {String} mname The module being tested</span>
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment">    * @param {String} pname The pattern to match</span>
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment">    */</span>
<a name="l2086"><span class="linenum">2086</span></a>      _patternTest: function(mname, pname) {
<a name="l2087"><span class="linenum">2087</span></a>          return (mname.<a class="function" onClick="logFunction('indexOf')" href="../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(pname) &gt; -1);
<a name="l2088"><span class="linenum">2088</span></a>      },
<a name="l2089"><span class="linenum">2089</span></a>      <span class="comment">/**</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment">    * Get's the loader meta data for the requested module</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment">    * @method getModule</span>
<a name="l2092"><span class="linenum">2092</span></a>  <span class="comment">    * @param {String} mname The module name to get</span>
<a name="l2093"><span class="linenum">2093</span></a>  <span class="comment">    * @return {Object} The module metadata</span>
<a name="l2094"><span class="linenum">2094</span></a>  <span class="comment">    */</span>
<a name="l2095"><span class="linenum">2095</span></a>      getModule: function(mname) {
<a name="l2096"><span class="linenum">2096</span></a>  <span class="comment">        //TODO: Remove name check - it's a quick hack to fix pattern WIP</span>
<a name="l2097"><span class="linenum">2097</span></a>          if (!mname) {
<a name="l2098"><span class="linenum">2098</span></a>              return null;
<a name="l2099"><span class="linenum">2099</span></a>          }
<a name="l2100"><span class="linenum">2100</span></a>  
<a name="l2101"><span class="linenum">2101</span></a>          var p, found, pname,
<a name="l2102"><span class="linenum">2102</span></a>              m = this.getModuleInfo(mname),
<a name="l2103"><span class="linenum">2103</span></a>              patterns = this.patterns;
<a name="l2104"><span class="linenum">2104</span></a>  
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment">        // check the patterns library to see if we should automatically add</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment">        // the module with defaults</span>
<a name="l2107"><span class="linenum">2107</span></a>          if (!m || (m &amp;&amp; m.ext)) {
<a name="l2108"><span class="linenum">2108</span></a>              for (pname in patterns) {
<a name="l2109"><span class="linenum">2109</span></a>                  if (patterns.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(pname)) {
<a name="l2110"><span class="linenum">2110</span></a>                      p = patterns[pname];
<a name="l2111"><span class="linenum">2111</span></a>  
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment">                    //There is no test method, create a default one that tests</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment">                    // the pattern against the mod name</span>
<a name="l2114"><span class="linenum">2114</span></a>                      if (!p.test) {
<a name="l2115"><span class="linenum">2115</span></a>                          p.test = this._patternTest;
<a name="l2116"><span class="linenum">2116</span></a>                      }
<a name="l2117"><span class="linenum">2117</span></a>  
<a name="l2118"><span class="linenum">2118</span></a>                      if (p.test(mname, pname)) {
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment">                        // use the metadata supplied for the pattern</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment">                        // as the module definition.</span>
<a name="l2121"><span class="linenum">2121</span></a>                          found = p;
<a name="l2122"><span class="linenum">2122</span></a>                          break;
<a name="l2123"><span class="linenum">2123</span></a>                      }
<a name="l2124"><span class="linenum">2124</span></a>                  }
<a name="l2125"><span class="linenum">2125</span></a>              }
<a name="l2126"><span class="linenum">2126</span></a>          }
<a name="l2127"><span class="linenum">2127</span></a>  
<a name="l2128"><span class="linenum">2128</span></a>          if (!m) {
<a name="l2129"><span class="linenum">2129</span></a>              if (found) {
<a name="l2130"><span class="linenum">2130</span></a>                  if (p.action) {
<a name="l2131"><span class="linenum">2131</span></a>                      p.action.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this, mname, pname);
<a name="l2132"><span class="linenum">2132</span></a>                  } else {
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">                    // ext true or false?</span>
<a name="l2134"><span class="linenum">2134</span></a>                      m = this.<a class="function" onClick="logFunction('addModule')" href="../../../../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(found, {
<a name="l2135"><span class="linenum">2135</span></a>                          test: void 0,
<a name="l2136"><span class="linenum">2136</span></a>                          temp: true
<a name="l2137"><span class="linenum">2137</span></a>                      }), mname);
<a name="l2138"><span class="linenum">2138</span></a>                      if (found.configFn) {
<a name="l2139"><span class="linenum">2139</span></a>                          m.configFn = found.configFn;
<a name="l2140"><span class="linenum">2140</span></a>                      }
<a name="l2141"><span class="linenum">2141</span></a>                  }
<a name="l2142"><span class="linenum">2142</span></a>              }
<a name="l2143"><span class="linenum">2143</span></a>          } else {
<a name="l2144"><span class="linenum">2144</span></a>              if (found &amp;&amp; m &amp;&amp; found.configFn &amp;&amp; !m.configFn) {
<a name="l2145"><span class="linenum">2145</span></a>                  m.configFn = found.configFn;
<a name="l2146"><span class="linenum">2146</span></a>                  m.configFn(m);
<a name="l2147"><span class="linenum">2147</span></a>              }
<a name="l2148"><span class="linenum">2148</span></a>          }
<a name="l2149"><span class="linenum">2149</span></a>  
<a name="l2150"><span class="linenum">2150</span></a>          return m;
<a name="l2151"><span class="linenum">2151</span></a>      },
<a name="l2152"><span class="linenum">2152</span></a>  
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">    // impl in rollup submodule</span>
<a name="l2154"><span class="linenum">2154</span></a>      _rollup: function() { },
<a name="l2155"><span class="linenum">2155</span></a>  
<a name="l2156"><span class="linenum">2156</span></a>      <span class="comment">/**</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment">     * Remove superceded modules and loaded modules.  Called by</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment">     * calculate() after we have the mega list of all dependencies</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">     * @method _reduce</span>
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment">     * @return {object} the reduced dependency hash.</span>
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">     * @private</span>
<a name="l2162"><span class="linenum">2162</span></a>  <span class="comment">     */</span>
<a name="l2163"><span class="linenum">2163</span></a>      _reduce: function(r) {
<a name="l2164"><span class="linenum">2164</span></a>  
<a name="l2165"><span class="linenum">2165</span></a>          r = r || this.required;
<a name="l2166"><span class="linenum">2166</span></a>  
<a name="l2167"><span class="linenum">2167</span></a>          var i, j, s, m, type = this.loadType,
<a name="l2168"><span class="linenum">2168</span></a>          ignore = this.ignore ? yArray.<a class="function" onClick="logFunction('hash')" href="../../../../_functions/hash.html" onMouseOver="funcPopup(event,'hash')">hash</a>(this.ignore) : false;
<a name="l2169"><span class="linenum">2169</span></a>  
<a name="l2170"><span class="linenum">2170</span></a>          for (i in r) {
<a name="l2171"><span class="linenum">2171</span></a>              if (r.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l2172"><span class="linenum">2172</span></a>                  m = this.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(i);
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">                // remove if already loaded</span>
<a name="l2174"><span class="linenum">2174</span></a>                  if (((this.loaded[i] || ON_PAGE[i]) &amp;&amp;
<a name="l2175"><span class="linenum">2175</span></a>                          !this.forceMap[i] &amp;&amp; !this.ignoreRegistered) ||
<a name="l2176"><span class="linenum">2176</span></a>                          (type &amp;&amp; m &amp;&amp; m.type !== type)) {
<a name="l2177"><span class="linenum">2177</span></a>                      delete r[i];
<a name="l2178"><span class="linenum">2178</span></a>                  }
<a name="l2179"><span class="linenum">2179</span></a>                  if (ignore &amp;&amp; ignore[i]) {
<a name="l2180"><span class="linenum">2180</span></a>                      delete r[i];
<a name="l2181"><span class="linenum">2181</span></a>                  }
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment">                // remove anything this module supersedes</span>
<a name="l2183"><span class="linenum">2183</span></a>                  s = m &amp;&amp; m.supersedes;
<a name="l2184"><span class="linenum">2184</span></a>                  if (s) {
<a name="l2185"><span class="linenum">2185</span></a>                      for (j = 0; j &lt; s.length; j++) {
<a name="l2186"><span class="linenum">2186</span></a>                          if (s[j] in r) {
<a name="l2187"><span class="linenum">2187</span></a>                              delete r[s[j]];
<a name="l2188"><span class="linenum">2188</span></a>                          }
<a name="l2189"><span class="linenum">2189</span></a>                      }
<a name="l2190"><span class="linenum">2190</span></a>                  }
<a name="l2191"><span class="linenum">2191</span></a>              }
<a name="l2192"><span class="linenum">2192</span></a>          }
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>          return r;
<a name="l2195"><span class="linenum">2195</span></a>      },
<a name="l2196"><span class="linenum">2196</span></a>      <span class="comment">/**</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment">    * Handles the queue when a module has been loaded for all cases</span>
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">    * @method _finish</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment">    * @private</span>
<a name="l2200"><span class="linenum">2200</span></a>  <span class="comment">    * @param {String} msg The message from Loader</span>
<a name="l2201"><span class="linenum">2201</span></a>  <span class="comment">    * @param {Boolean} success A boolean denoting success or failure</span>
<a name="l2202"><span class="linenum">2202</span></a>  <span class="comment">    */</span>
<a name="l2203"><span class="linenum">2203</span></a>      _finish: function(msg, success) {
<a name="l2204"><span class="linenum">2204</span></a>  
<a name="l2205"><span class="linenum">2205</span></a>          _queue.running = false;
<a name="l2206"><span class="linenum">2206</span></a>  
<a name="l2207"><span class="linenum">2207</span></a>          var onEnd = this.onEnd;
<a name="l2208"><span class="linenum">2208</span></a>          if (onEnd) {
<a name="l2209"><span class="linenum">2209</span></a>              onEnd.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this.context, {
<a name="l2210"><span class="linenum">2210</span></a>                  msg: msg,
<a name="l2211"><span class="linenum">2211</span></a>                  data: this.data,
<a name="l2212"><span class="linenum">2212</span></a>                  success: success
<a name="l2213"><span class="linenum">2213</span></a>              });
<a name="l2214"><span class="linenum">2214</span></a>          }
<a name="l2215"><span class="linenum">2215</span></a>          this._continue();
<a name="l2216"><span class="linenum">2216</span></a>      },
<a name="l2217"><span class="linenum">2217</span></a>      <span class="comment">/**</span>
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">    * The default Loader onSuccess handler, calls this.onSuccess with a payload</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment">    * @method _onSuccess</span>
<a name="l2220"><span class="linenum">2220</span></a>  <span class="comment">    * @private</span>
<a name="l2221"><span class="linenum">2221</span></a>  <span class="comment">    */</span>
<a name="l2222"><span class="linenum">2222</span></a>      _onSuccess: function() {
<a name="l2223"><span class="linenum">2223</span></a>          var self = this, skipped = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(self.skipped), fn,
<a name="l2224"><span class="linenum">2224</span></a>              failed = [], rreg = self.requireRegistration,
<a name="l2225"><span class="linenum">2225</span></a>              success, msg, i, mod;
<a name="l2226"><span class="linenum">2226</span></a>  
<a name="l2227"><span class="linenum">2227</span></a>          for (i in skipped) {
<a name="l2228"><span class="linenum">2228</span></a>              if (skipped.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l2229"><span class="linenum">2229</span></a>                  delete self.inserted[i];
<a name="l2230"><span class="linenum">2230</span></a>              }
<a name="l2231"><span class="linenum">2231</span></a>          }
<a name="l2232"><span class="linenum">2232</span></a>  
<a name="l2233"><span class="linenum">2233</span></a>          self.skipped = {};
<a name="l2234"><span class="linenum">2234</span></a>  
<a name="l2235"><span class="linenum">2235</span></a>          for (i in self.inserted) {
<a name="l2236"><span class="linenum">2236</span></a>              if (self.inserted.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(i)) {
<a name="l2237"><span class="linenum">2237</span></a>                  mod = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(i);
<a name="l2238"><span class="linenum">2238</span></a>                  if (mod &amp;&amp; rreg &amp;&amp; mod.type === JS &amp;&amp; !(i in YUI.Env.mods)) {
<a name="l2239"><span class="linenum">2239</span></a>                      failed.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(i);
<a name="l2240"><span class="linenum">2240</span></a>                  } else {
<a name="l2241"><span class="linenum">2241</span></a>                      Y.<a class="function" onClick="logFunction('mix')" href="../../../../_functions/mix.html" onMouseOver="funcPopup(event,'mix')">mix</a>(self.loaded, self.getProvides(i));
<a name="l2242"><span class="linenum">2242</span></a>                  }
<a name="l2243"><span class="linenum">2243</span></a>              }
<a name="l2244"><span class="linenum">2244</span></a>          }
<a name="l2245"><span class="linenum">2245</span></a>  
<a name="l2246"><span class="linenum">2246</span></a>          fn = self.onSuccess;
<a name="l2247"><span class="linenum">2247</span></a>          msg = (failed.length) ? 'notregistered' : 'success';
<a name="l2248"><span class="linenum">2248</span></a>          success = !(failed.length);
<a name="l2249"><span class="linenum">2249</span></a>          if (fn) {
<a name="l2250"><span class="linenum">2250</span></a>              fn.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self.context, {
<a name="l2251"><span class="linenum">2251</span></a>                  msg: msg,
<a name="l2252"><span class="linenum">2252</span></a>                  data: self.data,
<a name="l2253"><span class="linenum">2253</span></a>                  success: success,
<a name="l2254"><span class="linenum">2254</span></a>                  failed: failed,
<a name="l2255"><span class="linenum">2255</span></a>                  skipped: skipped
<a name="l2256"><span class="linenum">2256</span></a>              });
<a name="l2257"><span class="linenum">2257</span></a>          }
<a name="l2258"><span class="linenum">2258</span></a>          self._finish(msg, success);
<a name="l2259"><span class="linenum">2259</span></a>      },
<a name="l2260"><span class="linenum">2260</span></a>      <span class="comment">/**</span>
<a name="l2261"><span class="linenum">2261</span></a>  <span class="comment">    * The default Loader onProgress handler, calls this.onProgress with a payload</span>
<a name="l2262"><span class="linenum">2262</span></a>  <span class="comment">    * @method _onProgress</span>
<a name="l2263"><span class="linenum">2263</span></a>  <span class="comment">    * @private</span>
<a name="l2264"><span class="linenum">2264</span></a>  <span class="comment">    */</span>
<a name="l2265"><span class="linenum">2265</span></a>      _onProgress: function(e) {
<a name="l2266"><span class="linenum">2266</span></a>          var self = this, i;
<a name="l2267"><span class="linenum">2267</span></a>  <span class="comment">        //set the internal cache to what just came in.</span>
<a name="l2268"><span class="linenum">2268</span></a>          if (e.data &amp;&amp; e.data.length) {
<a name="l2269"><span class="linenum">2269</span></a>              for (i = 0; i &lt; e.data.length; i++) {
<a name="l2270"><span class="linenum">2270</span></a>                  e.data[i] = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(e.data[i].name);
<a name="l2271"><span class="linenum">2271</span></a>              }
<a name="l2272"><span class="linenum">2272</span></a>          }
<a name="l2273"><span class="linenum">2273</span></a>          if (self.onProgress) {
<a name="l2274"><span class="linenum">2274</span></a>              self.onProgress.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self.context, {
<a name="l2275"><span class="linenum">2275</span></a>                  name: e.url,
<a name="l2276"><span class="linenum">2276</span></a>                  data: e.data
<a name="l2277"><span class="linenum">2277</span></a>              });
<a name="l2278"><span class="linenum">2278</span></a>          }
<a name="l2279"><span class="linenum">2279</span></a>      },
<a name="l2280"><span class="linenum">2280</span></a>      <span class="comment">/**</span>
<a name="l2281"><span class="linenum">2281</span></a>  <span class="comment">    * The default Loader onFailure handler, calls this.onFailure with a payload</span>
<a name="l2282"><span class="linenum">2282</span></a>  <span class="comment">    * @method _onFailure</span>
<a name="l2283"><span class="linenum">2283</span></a>  <span class="comment">    * @private</span>
<a name="l2284"><span class="linenum">2284</span></a>  <span class="comment">    */</span>
<a name="l2285"><span class="linenum">2285</span></a>      _onFailure: function(o) {
<a name="l2286"><span class="linenum">2286</span></a>          var f = this.onFailure, msg = [], i = 0, len = o.errors.length;
<a name="l2287"><span class="linenum">2287</span></a>  
<a name="l2288"><span class="linenum">2288</span></a>          for (i; i &lt; len; i++) {
<a name="l2289"><span class="linenum">2289</span></a>              msg.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(o.errors[i].error);
<a name="l2290"><span class="linenum">2290</span></a>          }
<a name="l2291"><span class="linenum">2291</span></a>  
<a name="l2292"><span class="linenum">2292</span></a>          msg = msg.<a class="function" onClick="logFunction('join')" href="../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',');
<a name="l2293"><span class="linenum">2293</span></a>  
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>          if (f) {
<a name="l2296"><span class="linenum">2296</span></a>              f.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this.context, {
<a name="l2297"><span class="linenum">2297</span></a>                  msg: msg,
<a name="l2298"><span class="linenum">2298</span></a>                  data: this.data,
<a name="l2299"><span class="linenum">2299</span></a>                  success: false
<a name="l2300"><span class="linenum">2300</span></a>              });
<a name="l2301"><span class="linenum">2301</span></a>          }
<a name="l2302"><span class="linenum">2302</span></a>  
<a name="l2303"><span class="linenum">2303</span></a>          this._finish(msg, false);
<a name="l2304"><span class="linenum">2304</span></a>  
<a name="l2305"><span class="linenum">2305</span></a>      },
<a name="l2306"><span class="linenum">2306</span></a>  
<a name="l2307"><span class="linenum">2307</span></a>      <span class="comment">/**</span>
<a name="l2308"><span class="linenum">2308</span></a>  <span class="comment">    * The default Loader onTimeout handler, calls this.onTimeout with a payload</span>
<a name="l2309"><span class="linenum">2309</span></a>  <span class="comment">    * @method _onTimeout</span>
<a name="l2310"><span class="linenum">2310</span></a>  <span class="comment">    * @param {Get.Transaction} transaction The Transaction object from `Y.Get`</span>
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment">    * @private</span>
<a name="l2312"><span class="linenum">2312</span></a>  <span class="comment">    */</span>
<a name="l2313"><span class="linenum">2313</span></a>      _onTimeout: function(transaction) {
<a name="l2314"><span class="linenum">2314</span></a>          var f = this.onTimeout;
<a name="l2315"><span class="linenum">2315</span></a>          if (f) {
<a name="l2316"><span class="linenum">2316</span></a>              f.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(this.context, {
<a name="l2317"><span class="linenum">2317</span></a>                  msg: 'timeout',
<a name="l2318"><span class="linenum">2318</span></a>                  data: this.data,
<a name="l2319"><span class="linenum">2319</span></a>                  success: false,
<a name="l2320"><span class="linenum">2320</span></a>                  transaction: transaction
<a name="l2321"><span class="linenum">2321</span></a>              });
<a name="l2322"><span class="linenum">2322</span></a>          }
<a name="l2323"><span class="linenum">2323</span></a>      },
<a name="l2324"><span class="linenum">2324</span></a>  
<a name="l2325"><span class="linenum">2325</span></a>      <span class="comment">/**</span>
<a name="l2326"><span class="linenum">2326</span></a>  <span class="comment">     * Sorts the dependency tree.  The last step of calculate()</span>
<a name="l2327"><span class="linenum">2327</span></a>  <span class="comment">     * @method _sort</span>
<a name="l2328"><span class="linenum">2328</span></a>  <span class="comment">     * @private</span>
<a name="l2329"><span class="linenum">2329</span></a>  <span class="comment">     */</span>
<a name="l2330"><span class="linenum">2330</span></a>      _sort: function() {
<a name="l2331"><span class="linenum">2331</span></a>          var name,
<a name="l2332"><span class="linenum">2332</span></a>  
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment">            // Object containing module names.</span>
<a name="l2334"><span class="linenum">2334</span></a>              required = this.required,
<a name="l2335"><span class="linenum">2335</span></a>  
<a name="l2336"><span class="linenum">2336</span></a>  <span class="comment">            // Keep track of whether we've visited a module.</span>
<a name="l2337"><span class="linenum">2337</span></a>              visited = {};
<a name="l2338"><span class="linenum">2338</span></a>  
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment">        // Will contain modules names, in the correct order,</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment">        // according to dependencies.</span>
<a name="l2341"><span class="linenum">2341</span></a>          this.sorted = [];
<a name="l2342"><span class="linenum">2342</span></a>  
<a name="l2343"><span class="linenum">2343</span></a>          for (name in required) {
<a name="l2344"><span class="linenum">2344</span></a>              if (!visited[name] &amp;&amp; required.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(name)) {
<a name="l2345"><span class="linenum">2345</span></a>                  this._visit(name, visited);
<a name="l2346"><span class="linenum">2346</span></a>              }
<a name="l2347"><span class="linenum">2347</span></a>          }
<a name="l2348"><span class="linenum">2348</span></a>      },
<a name="l2349"><span class="linenum">2349</span></a>  
<a name="l2350"><span class="linenum">2350</span></a>      <span class="comment">/**</span>
<a name="l2351"><span class="linenum">2351</span></a>  <span class="comment">     * Recursively visits the dependencies of the module name</span>
<a name="l2352"><span class="linenum">2352</span></a>  <span class="comment">     * passed in, and appends each module name to the `sorted` property.</span>
<a name="l2353"><span class="linenum">2353</span></a>  <span class="comment">     * @param {String} name The name of a module.</span>
<a name="l2354"><span class="linenum">2354</span></a>  <span class="comment">     * @param {Object} visited Keeps track of whether a module was visited.</span>
<a name="l2355"><span class="linenum">2355</span></a>  <span class="comment">     * @method _visit</span>
<a name="l2356"><span class="linenum">2356</span></a>  <span class="comment">     * @private</span>
<a name="l2357"><span class="linenum">2357</span></a>  <span class="comment">     */</span>
<a name="l2358"><span class="linenum">2358</span></a>      _visit: function (name, visited) {
<a name="l2359"><span class="linenum">2359</span></a>          var required, condition, moduleInfo, dependency, dependencies,
<a name="l2360"><span class="linenum">2360</span></a>              trigger, isAfter, i, l;
<a name="l2361"><span class="linenum">2361</span></a>  
<a name="l2362"><span class="linenum">2362</span></a>          visited[name] = true;
<a name="l2363"><span class="linenum">2363</span></a>          required = this.required;
<a name="l2364"><span class="linenum">2364</span></a>          moduleInfo = this.moduleInfo[name];
<a name="l2365"><span class="linenum">2365</span></a>          condition = this.conditions[name] || {};
<a name="l2366"><span class="linenum">2366</span></a>  
<a name="l2367"><span class="linenum">2367</span></a>          if (moduleInfo) {
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment">            // Recurse on each dependency of this module,</span>
<a name="l2369"><span class="linenum">2369</span></a>  <span class="comment">            // figuring out its dependencies, and so on.</span>
<a name="l2370"><span class="linenum">2370</span></a>              dependencies = moduleInfo.expanded || moduleInfo.requires;
<a name="l2371"><span class="linenum">2371</span></a>  
<a name="l2372"><span class="linenum">2372</span></a>              for (i = 0, l = dependencies.length; i &lt; l; ++i) {
<a name="l2373"><span class="linenum">2373</span></a>                  dependency = dependencies[i];
<a name="l2374"><span class="linenum">2374</span></a>                  trigger = condition[dependency];
<a name="l2375"><span class="linenum">2375</span></a>  
<a name="l2376"><span class="linenum">2376</span></a>  <span class="comment">                // We cannot process this dependency yet if it must</span>
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">                // appear after our current module.</span>
<a name="l2378"><span class="linenum">2378</span></a>                  isAfter = trigger &amp;&amp; (!trigger.when || trigger.when === &quot;after&quot;);
<a name="l2379"><span class="linenum">2379</span></a>  
<a name="l2380"><span class="linenum">2380</span></a>  <span class="comment">                // Is this module name in the required list of modules,</span>
<a name="l2381"><span class="linenum">2381</span></a>  <span class="comment">                // and have we not already visited it?</span>
<a name="l2382"><span class="linenum">2382</span></a>                  if (required[dependency] &amp;&amp; !visited[dependency] &amp;&amp; !isAfter) {
<a name="l2383"><span class="linenum">2383</span></a>                      this._visit(dependency, visited);
<a name="l2384"><span class="linenum">2384</span></a>                  }
<a name="l2385"><span class="linenum">2385</span></a>              }
<a name="l2386"><span class="linenum">2386</span></a>          }
<a name="l2387"><span class="linenum">2387</span></a>  
<a name="l2388"><span class="linenum">2388</span></a>          this.sorted.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(name);
<a name="l2389"><span class="linenum">2389</span></a>      },
<a name="l2390"><span class="linenum">2390</span></a>  
<a name="l2391"><span class="linenum">2391</span></a>      <span class="comment">/**</span>
<a name="l2392"><span class="linenum">2392</span></a>  <span class="comment">    * Handles the actual insertion of script/link tags</span>
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">    * @method _insert</span>
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">    * @private</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">    * @param {Object} source The YUI instance the request came from</span>
<a name="l2396"><span class="linenum">2396</span></a>  <span class="comment">    * @param {Object} o The metadata to include</span>
<a name="l2397"><span class="linenum">2397</span></a>  <span class="comment">    * @param {String} type JS or CSS</span>
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment">    * @param {Boolean} [skipcalc=false] Do a Loader.calculate on the meta</span>
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment">    */</span>
<a name="l2400"><span class="linenum">2400</span></a>      _insert: function(source, o, type, skipcalc) {
<a name="l2401"><span class="linenum">2401</span></a>  
<a name="l2402"><span class="linenum">2402</span></a>  
<a name="l2403"><span class="linenum">2403</span></a>  <span class="comment">        // restore the state at the time of the request</span>
<a name="l2404"><span class="linenum">2404</span></a>          if (source) {
<a name="l2405"><span class="linenum">2405</span></a>              this._config(source);
<a name="l2406"><span class="linenum">2406</span></a>          }
<a name="l2407"><span class="linenum">2407</span></a>  
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment">        // build the dependency list</span>
<a name="l2409"><span class="linenum">2409</span></a>  <span class="comment">        // don't include type so we can process CSS and script in</span>
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment">        // one pass when the type is not specified.</span>
<a name="l2411"><span class="linenum">2411</span></a>  
<a name="l2412"><span class="linenum">2412</span></a>          var modules = this.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>(!skipcalc),
<a name="l2413"><span class="linenum">2413</span></a>              self = this, comp = 0, actions = 0,
<a name="l2414"><span class="linenum">2414</span></a>              mods = {}, deps, complete;
<a name="l2415"><span class="linenum">2415</span></a>  
<a name="l2416"><span class="linenum">2416</span></a>          self._refetch = [];
<a name="l2417"><span class="linenum">2417</span></a>  
<a name="l2418"><span class="linenum">2418</span></a>          if (type) {
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment">            //Filter out the opposite type and reset the array so the checks later work</span>
<a name="l2420"><span class="linenum">2420</span></a>              modules[((type === JS) ? CSS : JS)] = [];
<a name="l2421"><span class="linenum">2421</span></a>          }
<a name="l2422"><span class="linenum">2422</span></a>          if (!self.fetchCSS) {
<a name="l2423"><span class="linenum">2423</span></a>              modules.css = [];
<a name="l2424"><span class="linenum">2424</span></a>          }
<a name="l2425"><span class="linenum">2425</span></a>          if (modules.js.length) {
<a name="l2426"><span class="linenum">2426</span></a>              comp++;
<a name="l2427"><span class="linenum">2427</span></a>          }
<a name="l2428"><span class="linenum">2428</span></a>          if (modules.css.length) {
<a name="l2429"><span class="linenum">2429</span></a>              comp++;
<a name="l2430"><span class="linenum">2430</span></a>          }
<a name="l2431"><span class="linenum">2431</span></a>  
<a name="l2432"><span class="linenum">2432</span></a>  <span class="comment">        //console.log('Resolved Modules: ', modules);</span>
<a name="l2433"><span class="linenum">2433</span></a>  
<a name="l2434"><span class="linenum">2434</span></a>          complete = function(d) {
<a name="l2435"><span class="linenum">2435</span></a>              actions++;
<a name="l2436"><span class="linenum">2436</span></a>              var errs = {}, i = 0, o = 0, u = '', fn,
<a name="l2437"><span class="linenum">2437</span></a>                  modName, resMods;
<a name="l2438"><span class="linenum">2438</span></a>  
<a name="l2439"><span class="linenum">2439</span></a>              if (d &amp;&amp; d.errors) {
<a name="l2440"><span class="linenum">2440</span></a>                  for (i = 0; i &lt; d.errors.length; i++) {
<a name="l2441"><span class="linenum">2441</span></a>                      if (d.errors[i].request) {
<a name="l2442"><span class="linenum">2442</span></a>                          u = d.errors[i].request.url;
<a name="l2443"><span class="linenum">2443</span></a>                      } else {
<a name="l2444"><span class="linenum">2444</span></a>                          u = d.errors[i];
<a name="l2445"><span class="linenum">2445</span></a>                      }
<a name="l2446"><span class="linenum">2446</span></a>                      errs[u] = u;
<a name="l2447"><span class="linenum">2447</span></a>                  }
<a name="l2448"><span class="linenum">2448</span></a>              }
<a name="l2449"><span class="linenum">2449</span></a>  
<a name="l2450"><span class="linenum">2450</span></a>              if (d &amp;&amp; d.data &amp;&amp; d.data.length &amp;&amp; (d.type === 'success')) {
<a name="l2451"><span class="linenum">2451</span></a>                  for (i = 0; i &lt; d.data.length; i++) {
<a name="l2452"><span class="linenum">2452</span></a>                      self.inserted[d.data[i].name] = true;
<a name="l2453"><span class="linenum">2453</span></a>  <span class="comment">                    //If the external module has a skin or a lang, reprocess it</span>
<a name="l2454"><span class="linenum">2454</span></a>                      if (d.data[i].lang || d.data[i].skinnable) {
<a name="l2455"><span class="linenum">2455</span></a>                          delete self.inserted[d.data[i].name];
<a name="l2456"><span class="linenum">2456</span></a>                          self._refetch.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(d.data[i].name);
<a name="l2457"><span class="linenum">2457</span></a>                      }
<a name="l2458"><span class="linenum">2458</span></a>                  }
<a name="l2459"><span class="linenum">2459</span></a>              }
<a name="l2460"><span class="linenum">2460</span></a>  
<a name="l2461"><span class="linenum">2461</span></a>              if (actions === comp) {
<a name="l2462"><span class="linenum">2462</span></a>                  self._loading = null;
<a name="l2463"><span class="linenum">2463</span></a>                  if (self._refetch.length) {
<a name="l2464"><span class="linenum">2464</span></a>  <span class="comment">                    //Get the deps for the new meta-data and reprocess</span>
<a name="l2465"><span class="linenum">2465</span></a>                      for (i = 0; i &lt; self._refetch.length; i++) {
<a name="l2466"><span class="linenum">2466</span></a>                          deps = self.getRequires(self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(self._refetch[i]));
<a name="l2467"><span class="linenum">2467</span></a>                          for (o = 0; o &lt; deps.length; o++) {
<a name="l2468"><span class="linenum">2468</span></a>                              if (!self.inserted[deps[o]]) {
<a name="l2469"><span class="linenum">2469</span></a>  <span class="comment">                                //We wouldn't be to this point without the module being here</span>
<a name="l2470"><span class="linenum">2470</span></a>                                  mods[deps[o]] = deps[o];
<a name="l2471"><span class="linenum">2471</span></a>                              }
<a name="l2472"><span class="linenum">2472</span></a>                          }
<a name="l2473"><span class="linenum">2473</span></a>                      }
<a name="l2474"><span class="linenum">2474</span></a>                      mods = Y.Object.keys(mods);
<a name="l2475"><span class="linenum">2475</span></a>                      if (mods.length) {
<a name="l2476"><span class="linenum">2476</span></a>                          self.<a class="function" onClick="logFunction('require')" href="../../../../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(mods);
<a name="l2477"><span class="linenum">2477</span></a>                          resMods = self.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>(true);
<a name="l2478"><span class="linenum">2478</span></a>                          if (resMods.cssMods.length) {
<a name="l2479"><span class="linenum">2479</span></a>                              for (i=0; i &lt;  resMods.cssMods.length; i++) {
<a name="l2480"><span class="linenum">2480</span></a>                                  modName = resMods.cssMods[i].name;
<a name="l2481"><span class="linenum">2481</span></a>                                  delete YUI.Env._cssLoaded[modName];
<a name="l2482"><span class="linenum">2482</span></a>                                  if (self.isCSSLoaded(modName)) {
<a name="l2483"><span class="linenum">2483</span></a>                                      self.inserted[modName] = true;
<a name="l2484"><span class="linenum">2484</span></a>                                      delete self.required[modName];
<a name="l2485"><span class="linenum">2485</span></a>                                  }
<a name="l2486"><span class="linenum">2486</span></a>                              }
<a name="l2487"><span class="linenum">2487</span></a>                              self.sorted = [];
<a name="l2488"><span class="linenum">2488</span></a>                              self._sort();
<a name="l2489"><span class="linenum">2489</span></a>                          }
<a name="l2490"><span class="linenum">2490</span></a>                          d = null; <span class="comment">//bail</span>
<a name="l2491"><span class="linenum">2491</span></a>                          self._insert(); <span class="comment">//insert the new deps</span>
<a name="l2492"><span class="linenum">2492</span></a>                      }
<a name="l2493"><span class="linenum">2493</span></a>                  }
<a name="l2494"><span class="linenum">2494</span></a>                  if (d &amp;&amp; d.fn) {
<a name="l2495"><span class="linenum">2495</span></a>                      fn = d.fn;
<a name="l2496"><span class="linenum">2496</span></a>                      delete d.fn;
<a name="l2497"><span class="linenum">2497</span></a>                      fn.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2498"><span class="linenum">2498</span></a>                  }
<a name="l2499"><span class="linenum">2499</span></a>              }
<a name="l2500"><span class="linenum">2500</span></a>          };
<a name="l2501"><span class="linenum">2501</span></a>  
<a name="l2502"><span class="linenum">2502</span></a>          this._loading = true;
<a name="l2503"><span class="linenum">2503</span></a>  
<a name="l2504"><span class="linenum">2504</span></a>          if (!modules.js.length &amp;&amp; !modules.css.length) {
<a name="l2505"><span class="linenum">2505</span></a>              actions = -1;
<a name="l2506"><span class="linenum">2506</span></a>              <a class="function" onClick="logFunction('complete')" href="../../../../_functions/complete.html" onMouseOver="funcPopup(event,'complete')">complete</a>({
<a name="l2507"><span class="linenum">2507</span></a>                  fn: self._onSuccess
<a name="l2508"><span class="linenum">2508</span></a>              });
<a name="l2509"><span class="linenum">2509</span></a>              return;
<a name="l2510"><span class="linenum">2510</span></a>          }
<a name="l2511"><span class="linenum">2511</span></a>  
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>          if (modules.css.length) { //Load CSS first
<a name="l2514"><span class="linenum">2514</span></a>              Y.Get.<a class="function" onClick="logFunction('css')" href="../../../../_functions/css.html" onMouseOver="funcPopup(event,'css')">css</a>(modules.css, {
<a name="l2515"><span class="linenum">2515</span></a>                  data: modules.cssMods,
<a name="l2516"><span class="linenum">2516</span></a>                  attributes: self.cssAttributes,
<a name="l2517"><span class="linenum">2517</span></a>                  insertBefore: self.insertBefore,
<a name="l2518"><span class="linenum">2518</span></a>                  charset: self.charset,
<a name="l2519"><span class="linenum">2519</span></a>                  timeout: self.timeout,
<a name="l2520"><span class="linenum">2520</span></a>                  context: self,
<a name="l2521"><span class="linenum">2521</span></a>                  onProgress: function(e) {
<a name="l2522"><span class="linenum">2522</span></a>                      self._onProgress.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, e);
<a name="l2523"><span class="linenum">2523</span></a>                  },
<a name="l2524"><span class="linenum">2524</span></a>                  onTimeout: function(d) {
<a name="l2525"><span class="linenum">2525</span></a>                      self._onTimeout.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2526"><span class="linenum">2526</span></a>                  },
<a name="l2527"><span class="linenum">2527</span></a>                  onSuccess: function(d) {
<a name="l2528"><span class="linenum">2528</span></a>                      d.type = 'success';
<a name="l2529"><span class="linenum">2529</span></a>                      d.fn = self._onSuccess;
<a name="l2530"><span class="linenum">2530</span></a>                      complete.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2531"><span class="linenum">2531</span></a>                  },
<a name="l2532"><span class="linenum">2532</span></a>                  onFailure: function(d) {
<a name="l2533"><span class="linenum">2533</span></a>                      d.type = 'failure';
<a name="l2534"><span class="linenum">2534</span></a>                      d.fn = self._onFailure;
<a name="l2535"><span class="linenum">2535</span></a>                      complete.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2536"><span class="linenum">2536</span></a>                  }
<a name="l2537"><span class="linenum">2537</span></a>              });
<a name="l2538"><span class="linenum">2538</span></a>          }
<a name="l2539"><span class="linenum">2539</span></a>  
<a name="l2540"><span class="linenum">2540</span></a>          if (modules.js.length) {
<a name="l2541"><span class="linenum">2541</span></a>              Y.Get.<a class="function" onClick="logFunction('js')" href="../../../../_functions/js.html" onMouseOver="funcPopup(event,'js')">js</a>(modules.js, {
<a name="l2542"><span class="linenum">2542</span></a>                  data: modules.jsMods,
<a name="l2543"><span class="linenum">2543</span></a>                  insertBefore: self.insertBefore,
<a name="l2544"><span class="linenum">2544</span></a>                  attributes: self.jsAttributes,
<a name="l2545"><span class="linenum">2545</span></a>                  charset: self.charset,
<a name="l2546"><span class="linenum">2546</span></a>                  timeout: self.timeout,
<a name="l2547"><span class="linenum">2547</span></a>                  autopurge: false,
<a name="l2548"><span class="linenum">2548</span></a>                  context: self,
<a name="l2549"><span class="linenum">2549</span></a>                  async: self.async,
<a name="l2550"><span class="linenum">2550</span></a>                  onProgress: function(e) {
<a name="l2551"><span class="linenum">2551</span></a>                      self._onProgress.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, e);
<a name="l2552"><span class="linenum">2552</span></a>                  },
<a name="l2553"><span class="linenum">2553</span></a>                  onTimeout: function(d) {
<a name="l2554"><span class="linenum">2554</span></a>                      self._onTimeout.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2555"><span class="linenum">2555</span></a>                  },
<a name="l2556"><span class="linenum">2556</span></a>                  onSuccess: function(d) {
<a name="l2557"><span class="linenum">2557</span></a>                      d.type = 'success';
<a name="l2558"><span class="linenum">2558</span></a>                      d.fn = self._onSuccess;
<a name="l2559"><span class="linenum">2559</span></a>                      complete.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2560"><span class="linenum">2560</span></a>                  },
<a name="l2561"><span class="linenum">2561</span></a>                  onFailure: function(d) {
<a name="l2562"><span class="linenum">2562</span></a>                      d.type = 'failure';
<a name="l2563"><span class="linenum">2563</span></a>                      d.fn = self._onFailure;
<a name="l2564"><span class="linenum">2564</span></a>                      complete.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>(self, d);
<a name="l2565"><span class="linenum">2565</span></a>                  }
<a name="l2566"><span class="linenum">2566</span></a>              });
<a name="l2567"><span class="linenum">2567</span></a>          }
<a name="l2568"><span class="linenum">2568</span></a>      },
<a name="l2569"><span class="linenum">2569</span></a>      <span class="comment">/**</span>
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment">    * Once a loader operation is completely finished, process any additional queued items.</span>
<a name="l2571"><span class="linenum">2571</span></a>  <span class="comment">    * @method _continue</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment">    * @private</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment">    */</span>
<a name="l2574"><span class="linenum">2574</span></a>      _continue: function() {
<a name="l2575"><span class="linenum">2575</span></a>          if (!(_queue.running) &amp;&amp; _queue.<a class="function" onClick="logFunction('size')" href="../../../../_functions/size.html" onMouseOver="funcPopup(event,'size')">size</a>() &gt; 0) {
<a name="l2576"><span class="linenum">2576</span></a>              _queue.running = true;
<a name="l2577"><span class="linenum">2577</span></a>              _queue.<a class="phpfunction" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>()();
<a name="l2578"><span class="linenum">2578</span></a>          }
<a name="l2579"><span class="linenum">2579</span></a>      },
<a name="l2580"><span class="linenum">2580</span></a>  
<a name="l2581"><span class="linenum">2581</span></a>      <span class="comment">/**</span>
<a name="l2582"><span class="linenum">2582</span></a>  <span class="comment">     * inserts the requested modules and their dependencies.</span>
<a name="l2583"><span class="linenum">2583</span></a>  <span class="comment">     * &lt;code&gt;type&lt;/code&gt; can be &quot;js&quot; or &quot;css&quot;.  Both script and</span>
<a name="l2584"><span class="linenum">2584</span></a>  <span class="comment">     * css are inserted if type is not provided.</span>
<a name="l2585"><span class="linenum">2585</span></a>  <span class="comment">     * @method insert</span>
<a name="l2586"><span class="linenum">2586</span></a>  <span class="comment">     * @param {object} o optional options object.</span>
<a name="l2587"><span class="linenum">2587</span></a>  <span class="comment">     * @param {string} type the type of dependency to insert.</span>
<a name="l2588"><span class="linenum">2588</span></a>  <span class="comment">     */</span>
<a name="l2589"><span class="linenum">2589</span></a>      insert: function(o, type, skipsort) {
<a name="l2590"><span class="linenum">2590</span></a>          var self = this, copy = Y.<a class="function" onClick="logFunction('merge')" href="../../../../_functions/merge.html" onMouseOver="funcPopup(event,'merge')">merge</a>(this);
<a name="l2591"><span class="linenum">2591</span></a>          delete copy.require;
<a name="l2592"><span class="linenum">2592</span></a>          delete copy.dirty;
<a name="l2593"><span class="linenum">2593</span></a>          _queue.<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(function() {
<a name="l2594"><span class="linenum">2594</span></a>              self._insert(copy, o, type, skipsort);
<a name="l2595"><span class="linenum">2595</span></a>          });
<a name="l2596"><span class="linenum">2596</span></a>          this._continue();
<a name="l2597"><span class="linenum">2597</span></a>      },
<a name="l2598"><span class="linenum">2598</span></a>  
<a name="l2599"><span class="linenum">2599</span></a>      <span class="comment">/**</span>
<a name="l2600"><span class="linenum">2600</span></a>  <span class="comment">     * Executed every time a module is loaded, and if we are in a load</span>
<a name="l2601"><span class="linenum">2601</span></a>  <span class="comment">     * cycle, we attempt to load the next script.  Public so that it</span>
<a name="l2602"><span class="linenum">2602</span></a>  <span class="comment">     * is possible to call this if using a method other than</span>
<a name="l2603"><span class="linenum">2603</span></a>  <span class="comment">     * Y.register to determine when scripts are fully loaded</span>
<a name="l2604"><span class="linenum">2604</span></a>  <span class="comment">     * @method loadNext</span>
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">     * @deprecated</span>
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">     * @param {string} mname optional the name of the module that has</span>
<a name="l2607"><span class="linenum">2607</span></a>  <span class="comment">     * been loaded (which is usually why it is time to load the next</span>
<a name="l2608"><span class="linenum">2608</span></a>  <span class="comment">     * one).</span>
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment">     */</span>
<a name="l2610"><span class="linenum">2610</span></a>      loadNext: function() {
<a name="l2611"><span class="linenum">2611</span></a>          return;
<a name="l2612"><span class="linenum">2612</span></a>      },
<a name="l2613"><span class="linenum">2613</span></a>  
<a name="l2614"><span class="linenum">2614</span></a>      <span class="comment">/**</span>
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment">     * Apply filter defined for this instance to a url/path</span>
<a name="l2616"><span class="linenum">2616</span></a>  <span class="comment">     * @method _filter</span>
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment">     * @param {string} u the string to filter.</span>
<a name="l2618"><span class="linenum">2618</span></a>  <span class="comment">     * @param {string} name the name of the module, if we are processing</span>
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment">     * a single module as opposed to a combined url.</span>
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment">     * @return {string} the filtered string.</span>
<a name="l2621"><span class="linenum">2621</span></a>  <span class="comment">     * @private</span>
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment">     */</span>
<a name="l2623"><span class="linenum">2623</span></a>      _filter: function(u, name, group) {
<a name="l2624"><span class="linenum">2624</span></a>          var f = this.filter,
<a name="l2625"><span class="linenum">2625</span></a>              hasFilter = name &amp;&amp; (name in this.filters),
<a name="l2626"><span class="linenum">2626</span></a>              modFilter = hasFilter &amp;&amp; this.filters[name],
<a name="l2627"><span class="linenum">2627</span></a>              groupName = group || (this.getModuleInfo(name) || {}).group || null;
<a name="l2628"><span class="linenum">2628</span></a>  
<a name="l2629"><span class="linenum">2629</span></a>          if (groupName &amp;&amp; this.groups[groupName] &amp;&amp; this.groups[groupName].filter) {
<a name="l2630"><span class="linenum">2630</span></a>              modFilter = this.groups[groupName].filter;
<a name="l2631"><span class="linenum">2631</span></a>              hasFilter = true;
<a name="l2632"><span class="linenum">2632</span></a>          }
<a name="l2633"><span class="linenum">2633</span></a>  
<a name="l2634"><span class="linenum">2634</span></a>          if (u) {
<a name="l2635"><span class="linenum">2635</span></a>              if (hasFilter) {
<a name="l2636"><span class="linenum">2636</span></a>                  f = (L.<a class="function" onClick="logFunction('isString')" href="../../../../_functions/isstring.html" onMouseOver="funcPopup(event,'isstring')">isString</a>(modFilter)) ? this.FILTER_DEFS[modFilter.toUpperCase()] || null : modFilter;
<a name="l2637"><span class="linenum">2637</span></a>              }
<a name="l2638"><span class="linenum">2638</span></a>              if (f) {
<a name="l2639"><span class="linenum">2639</span></a>                  u = u.<a class="function" onClick="logFunction('replace')" href="../../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(new RegExp(f.searchExp, 'g'), f.replaceStr);
<a name="l2640"><span class="linenum">2640</span></a>              }
<a name="l2641"><span class="linenum">2641</span></a>          }
<a name="l2642"><span class="linenum">2642</span></a>          return u;
<a name="l2643"><span class="linenum">2643</span></a>      },
<a name="l2644"><span class="linenum">2644</span></a>  
<a name="l2645"><span class="linenum">2645</span></a>      <span class="comment">/**</span>
<a name="l2646"><span class="linenum">2646</span></a>  <span class="comment">     * Generates the full url for a module</span>
<a name="l2647"><span class="linenum">2647</span></a>  <span class="comment">     * @method _url</span>
<a name="l2648"><span class="linenum">2648</span></a>  <span class="comment">     * @param {string} path the path fragment.</span>
<a name="l2649"><span class="linenum">2649</span></a>  <span class="comment">     * @param {String} name The name of the module</span>
<a name="l2650"><span class="linenum">2650</span></a>  <span class="comment">     * @param {String} [base] The base url to use. Defaults to self.base</span>
<a name="l2651"><span class="linenum">2651</span></a>  <span class="comment">     * @return {string} the full url.</span>
<a name="l2652"><span class="linenum">2652</span></a>  <span class="comment">     * @private</span>
<a name="l2653"><span class="linenum">2653</span></a>  <span class="comment">     */</span>
<a name="l2654"><span class="linenum">2654</span></a>      _url: function(path, name, base) {
<a name="l2655"><span class="linenum">2655</span></a>          return this._filter((base || this.base || '') + path, name);
<a name="l2656"><span class="linenum">2656</span></a>      },
<a name="l2657"><span class="linenum">2657</span></a>      <span class="comment">/**</span>
<a name="l2658"><span class="linenum">2658</span></a>  <span class="comment">    * Returns an Object hash of file arrays built from `loader.sorted` or from an arbitrary list of sorted modules.</span>
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment">    * @method resolve</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment">    * @param {Boolean} [calc=false] Perform a loader.calculate() before anything else</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">    * @param {Array} [sorted=loader.sorted] An override for the loader.sorted array</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment">    * @return {Object} Object hash (js and css) of two arrays of file lists</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment">    * @example This method can be used as an off-line dep calculator</span>
<a name="l2664"><span class="linenum">2664</span></a>  <span class="comment">    *</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment">    *        var Y = YUI();</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">    *        var loader = new Y.Loader({</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">    *            filter: 'debug',</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment">    *            base: '../../',</span>
<a name="l2669"><span class="linenum">2669</span></a>  <span class="comment">    *            root: 'build/',</span>
<a name="l2670"><span class="linenum">2670</span></a>  <span class="comment">    *            combine: true,</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">    *            require: ['node', 'dd', 'console']</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">    *        });</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">    *        var out = loader.resolve(true);</span>
<a name="l2674"><span class="linenum">2674</span></a>  <span class="comment">    *</span>
<a name="l2675"><span class="linenum">2675</span></a>  <span class="comment">    */</span>
<a name="l2676"><span class="linenum">2676</span></a>      resolve: function(calc, sorted) {
<a name="l2677"><span class="linenum">2677</span></a>          var self     = this,
<a name="l2678"><span class="linenum">2678</span></a>              resolved = { js: [], jsMods: [], css: [], cssMods: [] },
<a name="l2679"><span class="linenum">2679</span></a>              addSingle;
<a name="l2680"><span class="linenum">2680</span></a>  
<a name="l2681"><span class="linenum">2681</span></a>          if (self.skin.overrides || self.skin.defaultSkin !== DEFAULT_SKIN || self.ignoreRegistered) {
<a name="l2682"><span class="linenum">2682</span></a>              self._resetModules();
<a name="l2683"><span class="linenum">2683</span></a>          }
<a name="l2684"><span class="linenum">2684</span></a>  
<a name="l2685"><span class="linenum">2685</span></a>          if (calc) {
<a name="l2686"><span class="linenum">2686</span></a>              self.<a class="function" onClick="logFunction('calculate')" href="../../../../_functions/calculate.html" onMouseOver="funcPopup(event,'calculate')">calculate</a>();
<a name="l2687"><span class="linenum">2687</span></a>          }
<a name="l2688"><span class="linenum">2688</span></a>          sorted = sorted || self.sorted;
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>          addSingle = function(mod) {
<a name="l2691"><span class="linenum">2691</span></a>              if (mod) {
<a name="l2692"><span class="linenum">2692</span></a>                  var group = (mod.group &amp;&amp; self.groups[mod.group]) || NOT_FOUND,
<a name="l2693"><span class="linenum">2693</span></a>                      url;
<a name="l2694"><span class="linenum">2694</span></a>  
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment">                //Always assume it's async</span>
<a name="l2696"><span class="linenum">2696</span></a>                  if (group.async === false) {
<a name="l2697"><span class="linenum">2697</span></a>                      mod.async = group.async;
<a name="l2698"><span class="linenum">2698</span></a>                  }
<a name="l2699"><span class="linenum">2699</span></a>  
<a name="l2700"><span class="linenum">2700</span></a>                  url = (mod.fullpath) ? self._filter(mod.fullpath, mod.name) :
<a name="l2701"><span class="linenum">2701</span></a>                        self._url(mod.path, mod.name, group.base || mod.base);
<a name="l2702"><span class="linenum">2702</span></a>  
<a name="l2703"><span class="linenum">2703</span></a>                  if (mod.attributes || mod.async === false) {
<a name="l2704"><span class="linenum">2704</span></a>                      url = {
<a name="l2705"><span class="linenum">2705</span></a>                          url: url,
<a name="l2706"><span class="linenum">2706</span></a>                          async: mod.async
<a name="l2707"><span class="linenum">2707</span></a>                      };
<a name="l2708"><span class="linenum">2708</span></a>                      if (mod.attributes) {
<a name="l2709"><span class="linenum">2709</span></a>                          url.attributes = mod.attributes;
<a name="l2710"><span class="linenum">2710</span></a>                      }
<a name="l2711"><span class="linenum">2711</span></a>                  }
<a name="l2712"><span class="linenum">2712</span></a>                  resolved[mod.type].<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(url);
<a name="l2713"><span class="linenum">2713</span></a>                  resolved[mod.type + 'Mods'].<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(mod);
<a name="l2714"><span class="linenum">2714</span></a>              } else {
<a name="l2715"><span class="linenum">2715</span></a>              }
<a name="l2716"><span class="linenum">2716</span></a>  
<a name="l2717"><span class="linenum">2717</span></a>          };
<a name="l2718"><span class="linenum">2718</span></a>  
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">        /*jslint vars: true */</span>
<a name="l2720"><span class="linenum">2720</span></a>          var inserted     = (self.ignoreRegistered) ? {} : self.inserted,
<a name="l2721"><span class="linenum">2721</span></a>              comboSources = {},
<a name="l2722"><span class="linenum">2722</span></a>              maxURLLength,
<a name="l2723"><span class="linenum">2723</span></a>              comboMeta,
<a name="l2724"><span class="linenum">2724</span></a>              comboBase,
<a name="l2725"><span class="linenum">2725</span></a>              comboSep,
<a name="l2726"><span class="linenum">2726</span></a>              group,
<a name="l2727"><span class="linenum">2727</span></a>              mod,
<a name="l2728"><span class="linenum">2728</span></a>              len,
<a name="l2729"><span class="linenum">2729</span></a>              i;
<a name="l2730"><span class="linenum">2730</span></a>  <span class="comment">        /*jslint vars: false */</span>
<a name="l2731"><span class="linenum">2731</span></a>  
<a name="l2732"><span class="linenum">2732</span></a>          for (i = 0, len = sorted.length; i &lt; len; i++) {
<a name="l2733"><span class="linenum">2733</span></a>              mod = self.<a class="function" onClick="logFunction('getModule')" href="../../../../_functions/getmodule.html" onMouseOver="funcPopup(event,'getmodule')">getModule</a>(sorted[i]);
<a name="l2734"><span class="linenum">2734</span></a>              if (!mod || inserted[mod.name]) {
<a name="l2735"><span class="linenum">2735</span></a>                  continue;
<a name="l2736"><span class="linenum">2736</span></a>              }
<a name="l2737"><span class="linenum">2737</span></a>  
<a name="l2738"><span class="linenum">2738</span></a>              group = self.groups[mod.group];
<a name="l2739"><span class="linenum">2739</span></a>  
<a name="l2740"><span class="linenum">2740</span></a>              comboBase = self.comboBase;
<a name="l2741"><span class="linenum">2741</span></a>  
<a name="l2742"><span class="linenum">2742</span></a>              if (group) {
<a name="l2743"><span class="linenum">2743</span></a>                  if (!group.combine || mod.fullpath) {
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment">                    //This is not a combo module, skip it and load it singly later.</span>
<a name="l2745"><span class="linenum">2745</span></a>                      addSingle(mod);
<a name="l2746"><span class="linenum">2746</span></a>                      continue;
<a name="l2747"><span class="linenum">2747</span></a>                  }
<a name="l2748"><span class="linenum">2748</span></a>                  mod.combine = true;
<a name="l2749"><span class="linenum">2749</span></a>  
<a name="l2750"><span class="linenum">2750</span></a>                  if (typeof group.root === 'string') {
<a name="l2751"><span class="linenum">2751</span></a>                      mod.root = group.root;
<a name="l2752"><span class="linenum">2752</span></a>                  }
<a name="l2753"><span class="linenum">2753</span></a>  
<a name="l2754"><span class="linenum">2754</span></a>                  comboBase    = group.comboBase || comboBase;
<a name="l2755"><span class="linenum">2755</span></a>                  comboSep     = group.comboSep;
<a name="l2756"><span class="linenum">2756</span></a>                  maxURLLength = group.maxURLLength;
<a name="l2757"><span class="linenum">2757</span></a>              } else {
<a name="l2758"><span class="linenum">2758</span></a>                  if (!self.combine) {
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment">                    //This is not a combo module, skip it and load it singly later.</span>
<a name="l2760"><span class="linenum">2760</span></a>                      addSingle(mod);
<a name="l2761"><span class="linenum">2761</span></a>                      continue;
<a name="l2762"><span class="linenum">2762</span></a>                  }
<a name="l2763"><span class="linenum">2763</span></a>              }
<a name="l2764"><span class="linenum">2764</span></a>  
<a name="l2765"><span class="linenum">2765</span></a>              if (!mod.combine &amp;&amp; mod.ext) {
<a name="l2766"><span class="linenum">2766</span></a>                  addSingle(mod);
<a name="l2767"><span class="linenum">2767</span></a>                  continue;
<a name="l2768"><span class="linenum">2768</span></a>              }
<a name="l2769"><span class="linenum">2769</span></a>  
<a name="l2770"><span class="linenum">2770</span></a>              comboSources[comboBase] = comboSources[comboBase] ||
<a name="l2771"><span class="linenum">2771</span></a>                  { js: [], jsMods: [], css: [], cssMods: [] };
<a name="l2772"><span class="linenum">2772</span></a>  
<a name="l2773"><span class="linenum">2773</span></a>              comboMeta               = comboSources[comboBase];
<a name="l2774"><span class="linenum">2774</span></a>              comboMeta.group         = mod.group;
<a name="l2775"><span class="linenum">2775</span></a>              comboMeta.comboSep      = comboSep || self.comboSep;
<a name="l2776"><span class="linenum">2776</span></a>              comboMeta.maxURLLength  = maxURLLength || self.maxURLLength;
<a name="l2777"><span class="linenum">2777</span></a>  
<a name="l2778"><span class="linenum">2778</span></a>              comboMeta[mod.type + 'Mods'].<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(mod);
<a name="l2779"><span class="linenum">2779</span></a>          }
<a name="l2780"><span class="linenum">2780</span></a>  
<a name="l2781"><span class="linenum">2781</span></a>  <span class="comment">        // TODO: Refactor the encoding logic below into its own method.</span>
<a name="l2782"><span class="linenum">2782</span></a>  
<a name="l2783"><span class="linenum">2783</span></a>  <span class="comment">        /*jslint vars: true */</span>
<a name="l2784"><span class="linenum">2784</span></a>          var fragSubset,
<a name="l2785"><span class="linenum">2785</span></a>              modules,
<a name="l2786"><span class="linenum">2786</span></a>              tmpBase,
<a name="l2787"><span class="linenum">2787</span></a>              baseLen,
<a name="l2788"><span class="linenum">2788</span></a>              frags,
<a name="l2789"><span class="linenum">2789</span></a>              frag,
<a name="l2790"><span class="linenum">2790</span></a>              type;
<a name="l2791"><span class="linenum">2791</span></a>  <span class="comment">        /*jslint vars: false */</span>
<a name="l2792"><span class="linenum">2792</span></a>  
<a name="l2793"><span class="linenum">2793</span></a>          for (comboBase in comboSources) {
<a name="l2794"><span class="linenum">2794</span></a>              if (comboSources.<a class="function" onClick="logFunction('hasOwnProperty')" href="../../../../_functions/hasownproperty.html" onMouseOver="funcPopup(event,'hasownproperty')">hasOwnProperty</a>(comboBase)) {
<a name="l2795"><span class="linenum">2795</span></a>                  comboMeta    = comboSources[comboBase];
<a name="l2796"><span class="linenum">2796</span></a>                  comboSep     = comboMeta.comboSep;
<a name="l2797"><span class="linenum">2797</span></a>                  maxURLLength = comboMeta.maxURLLength;
<a name="l2798"><span class="linenum">2798</span></a>                  for (type in comboMeta) {
<a name="l2799"><span class="linenum">2799</span></a>                      if (type === JS || type === CSS) {
<a name="l2800"><span class="linenum">2800</span></a>                          modules = comboMeta[type + 'Mods'];
<a name="l2801"><span class="linenum">2801</span></a>                          frags = [];
<a name="l2802"><span class="linenum">2802</span></a>                          for (i = 0, len = modules.length; i &lt; len; i += 1) {
<a name="l2803"><span class="linenum">2803</span></a>                              mod = modules[i];
<a name="l2804"><span class="linenum">2804</span></a>                              frag = ((typeof mod.root === 'string') ? mod.root : self.root) + (mod.path || mod.fullpath);
<a name="l2805"><span class="linenum">2805</span></a>                              frags.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(
<a name="l2806"><span class="linenum">2806</span></a>                                  self._filter(frag, mod.name)
<a name="l2807"><span class="linenum">2807</span></a>                              );
<a name="l2808"><span class="linenum">2808</span></a>                          }
<a name="l2809"><span class="linenum">2809</span></a>                          tmpBase = comboBase + frags.<a class="function" onClick="logFunction('join')" href="../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(comboSep);
<a name="l2810"><span class="linenum">2810</span></a>                          baseLen = tmpBase.length;
<a name="l2811"><span class="linenum">2811</span></a>                          if (maxURLLength &lt;= comboBase.length) {
<a name="l2812"><span class="linenum">2812</span></a>                              maxURLLength = MAX_URL_LENGTH;
<a name="l2813"><span class="linenum">2813</span></a>                          }
<a name="l2814"><span class="linenum">2814</span></a>  
<a name="l2815"><span class="linenum">2815</span></a>                          if (frags.length) {
<a name="l2816"><span class="linenum">2816</span></a>                              if (baseLen &gt; maxURLLength) {
<a name="l2817"><span class="linenum">2817</span></a>                                  fragSubset = [];
<a name="l2818"><span class="linenum">2818</span></a>                                  for (i = 0, len = frags.length; i &lt; len; i++) {
<a name="l2819"><span class="linenum">2819</span></a>                                      fragSubset.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(frags[i]);
<a name="l2820"><span class="linenum">2820</span></a>                                      tmpBase = comboBase + fragSubset.<a class="function" onClick="logFunction('join')" href="../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(comboSep);
<a name="l2821"><span class="linenum">2821</span></a>  
<a name="l2822"><span class="linenum">2822</span></a>                                      if (tmpBase.length &gt; maxURLLength) {
<a name="l2823"><span class="linenum">2823</span></a>                                          frag = fragSubset.<a class="function" onClick="logFunction('pop')" href="../../../../_functions/pop.html" onMouseOver="funcPopup(event,'pop')">pop</a>();
<a name="l2824"><span class="linenum">2824</span></a>                                          tmpBase = comboBase + fragSubset.<a class="function" onClick="logFunction('join')" href="../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(comboSep);
<a name="l2825"><span class="linenum">2825</span></a>                                          resolved[type].<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(self._filter(tmpBase, null, comboMeta.group));
<a name="l2826"><span class="linenum">2826</span></a>                                          fragSubset = [];
<a name="l2827"><span class="linenum">2827</span></a>                                          if (frag) {
<a name="l2828"><span class="linenum">2828</span></a>                                              fragSubset.<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(frag);
<a name="l2829"><span class="linenum">2829</span></a>                                          }
<a name="l2830"><span class="linenum">2830</span></a>                                      }
<a name="l2831"><span class="linenum">2831</span></a>                                  }
<a name="l2832"><span class="linenum">2832</span></a>                                  if (fragSubset.length) {
<a name="l2833"><span class="linenum">2833</span></a>                                      tmpBase = comboBase + fragSubset.<a class="function" onClick="logFunction('join')" href="../../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(comboSep);
<a name="l2834"><span class="linenum">2834</span></a>                                      resolved[type].<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(self._filter(tmpBase, null, comboMeta.group));
<a name="l2835"><span class="linenum">2835</span></a>                                  }
<a name="l2836"><span class="linenum">2836</span></a>                              } else {
<a name="l2837"><span class="linenum">2837</span></a>                                  resolved[type].<a class="function" onClick="logFunction('push')" href="../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(self._filter(tmpBase, null, comboMeta.group));
<a name="l2838"><span class="linenum">2838</span></a>                              }
<a name="l2839"><span class="linenum">2839</span></a>                          }
<a name="l2840"><span class="linenum">2840</span></a>                          resolved[type + 'Mods'] = resolved[type + 'Mods'].<a class="function" onClick="logFunction('concat')" href="../../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">concat</a>(modules);
<a name="l2841"><span class="linenum">2841</span></a>                      }
<a name="l2842"><span class="linenum">2842</span></a>                  }
<a name="l2843"><span class="linenum">2843</span></a>              }
<a name="l2844"><span class="linenum">2844</span></a>          }
<a name="l2845"><span class="linenum">2845</span></a>  
<a name="l2846"><span class="linenum">2846</span></a>          return resolved;
<a name="l2847"><span class="linenum">2847</span></a>      },
<a name="l2848"><span class="linenum">2848</span></a>  
<a name="l2849"><span class="linenum">2849</span></a>      <span class="comment">/**</span>
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment">    Shortcut to calculate, resolve and load all modules.</span>
<a name="l2851"><span class="linenum">2851</span></a>  <span class="comment"></span>
<a name="l2852"><span class="linenum">2852</span></a>  <span class="comment">        var loader = new Y.Loader({</span>
<a name="l2853"><span class="linenum">2853</span></a>  <span class="comment">            ignoreRegistered: true,</span>
<a name="l2854"><span class="linenum">2854</span></a>  <span class="comment">            modules: {</span>
<a name="l2855"><span class="linenum">2855</span></a>  <span class="comment">                mod: {</span>
<a name="l2856"><span class="linenum">2856</span></a>  <span class="comment">                    path: 'mod.js'</span>
<a name="l2857"><span class="linenum">2857</span></a>  <span class="comment">                }</span>
<a name="l2858"><span class="linenum">2858</span></a>  <span class="comment">            },</span>
<a name="l2859"><span class="linenum">2859</span></a>  <span class="comment">            requires: [ 'mod' ]</span>
<a name="l2860"><span class="linenum">2860</span></a>  <span class="comment">        });</span>
<a name="l2861"><span class="linenum">2861</span></a>  <span class="comment">        loader.load(function() {</span>
<a name="l2862"><span class="linenum">2862</span></a>  <span class="comment">            console.log('All modules have loaded..');</span>
<a name="l2863"><span class="linenum">2863</span></a>  <span class="comment">        });</span>
<a name="l2864"><span class="linenum">2864</span></a>  <span class="comment"></span>
<a name="l2865"><span class="linenum">2865</span></a>  <span class="comment"></span>
<a name="l2866"><span class="linenum">2866</span></a>  <span class="comment">    @method load</span>
<a name="l2867"><span class="linenum">2867</span></a>  <span class="comment">    @param {Function} cb Executed after all load operations are complete</span>
<a name="l2868"><span class="linenum">2868</span></a>  <span class="comment">    */</span>
<a name="l2869"><span class="linenum">2869</span></a>      load: function(cb) {
<a name="l2870"><span class="linenum">2870</span></a>          if (!cb) {
<a name="l2871"><span class="linenum">2871</span></a>              return;
<a name="l2872"><span class="linenum">2872</span></a>          }
<a name="l2873"><span class="linenum">2873</span></a>          var self = this,
<a name="l2874"><span class="linenum">2874</span></a>              out = self.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>(true);
<a name="l2875"><span class="linenum">2875</span></a>  
<a name="l2876"><span class="linenum">2876</span></a>          self.data = out;
<a name="l2877"><span class="linenum">2877</span></a>  
<a name="l2878"><span class="linenum">2878</span></a>          self.onEnd = function() {
<a name="l2879"><span class="linenum">2879</span></a>              cb.<a class="function" onClick="logFunction('apply')" href="../../../../_functions/apply.html" onMouseOver="funcPopup(event,'apply')">apply</a>(self.context || self, arguments);
<a name="l2880"><span class="linenum">2880</span></a>          };
<a name="l2881"><span class="linenum">2881</span></a>  
<a name="l2882"><span class="linenum">2882</span></a>          self.<a class="function" onClick="logFunction('insert')" href="../../../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l2883"><span class="linenum">2883</span></a>      }
<a name="l2884"><span class="linenum">2884</span></a>  };
<a name="l2885"><span class="linenum">2885</span></a>  
<a name="l2886"><span class="linenum">2886</span></a>  
<a name="l2887"><span class="linenum">2887</span></a>  
<a name="l2888"><span class="linenum">2888</span></a>  }, '3.17.2', {&quot;requires&quot;: [&quot;get&quot;, &quot;features&quot;]});
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'concat': ['concat', 'concat ', [['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',1082],['lib/adodb/drivers','adodb-pdo.inc.php',205],['lib/adodb/drivers','adodb-mssql.inc.php',670],['lib/adodb/drivers','adodb-mysql.inc.php',434],['lib/adodb/drivers','adodb-mssqlnative.inc.php',520],['lib/adodb/drivers','adodb-pdo_mysql.inc.php',49],['lib/adodb','adodb.inc.php',2681],['lib/adodb/drivers','adodb-fbsql.inc.php',56],['lib/adodb/drivers','adodb-mysqli.inc.php',467]], 1012],
'resolve': ['resolve', '', [['lib/jquery','jquery-3.1.0.js',3494]], 175],
'mix': ['mix', '', [['lib/lessphp','Functions.php',401]], 934],
'call': ['call', 'TODO: This function needs simplifying. ', [['lib/google/src/Google/Service','Resource.php',74],['webservice/xmlrpc','lib.php',63],['webservice/xmlrpc/tests','lib_test.php',117],['lib/simplepie/library/SimplePie','Registry.php',194],['lib','flickrlib.php',254],['webservice/soap','lib.php',67],['lib/markdown','Readme.md',68],['webservice/rest','lib.php',69]], 5324],
'indexof': ['indexof', 'IndexOf - first version of find an element in the Array given returns the index of the *first* occurance ', [['backup/cc/cc_lib/gral_lib','functions.php',97]], 1500],
'hash': ['hash', 'Expose the hash function for testing, probing, and extension. ', [['lib/horde/framework/Horde/Support','ConsistentHash.php',218],['mod/assign/feedback/editpdf/classes','document_services.php',100],['filter/censor','filter.php',47],['lib','filterlib.php',393],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',288]], 195],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers.js',27],['lib/yuilib/3.17.2/timers','timers-debug.js',27]], 615],
'hasownproperty': ['hasownproperty', '', [['lib/lessphp','Colors.php',161]], 1772],
'size': ['size', 'Search for messages smaller/larger than a certain size. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',507],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',224]], 531],
'replace': ['replace', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/searchreplace/js','searchreplace.js',70],['lib/google/src/Google/Utils','URITemplate.php',83],['lib/adodb','adodb-active-record.inc.php',928],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',61],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',2448],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',49],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',55],['lib/adodb','adodb.inc.php',1853],['lib/adodb','adodb-active-recordx.inc.php',1061],['lib/phpexcel/PHPExcel/Calculation','TextData.php',503],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',70],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',48],['lib/lessphp','Functions.php',492]], 3264],
'insert': ['insert', 'Inserts a data transfer request. (transfers.insert) ', [['lib/google/src/Google/Service','DataTransfer.php',223],['lib/grade','grade_item.php',427],['lib/google/src/Google/Service','Replicapool.php',438],['lib/google/src/Google/Service','Tasks.php',337],['lib/google/src/Google/Service','Tasks.php',457],['lib/google/src/Google/Service','AndroidPublisher.php',1264],['lib/google/src/Google/Service','AndroidPublisher.php',2113],['lib/google/src/Google/Service','Reseller.php',310],['lib/google/src/Google/Service','Reseller.php',474],['lib/google/src/Google/Service','Computeaccounts.php',527],['lib/google/src/Google/Service','Computeaccounts.php',698],['lib/grade','grade_category.php',340],['lib/grade','grade_scale.php',111],['lib/adodb','adodb-active-record.inc.php',848],['lib/grade','grade_object.php',325],['lib/google/src/Google/Service','YouTubeAnalytics.php',379],['lib/google/src/Google/Service','YouTubeAnalytics.php',474],['lib/google/src/Google/Service','Admin.php',88],['lib/google/src/Google/Service','MapsEngine.php',2781],['lib/google/src/Google/Service','MapsEngine.php',3185],['completion','data_object.php',317],['lib/google/src/Google/Service','Urlshortener.php',125],['lib/google/src/Google/Service','AdExchangeBuyer.php',967],['lib/google/src/Google/Service','AdExchangeBuyer.php',1057],['lib/google/src/Google/Service','AdExchangeBuyer.php',1152],['lib/google/src/Google/Service','AdExchangeBuyer.php',1209],['lib/google/src/Google/Service','AdExchangeBuyer.php',1307],['lib/google/src/Google/Service','AdExchangeBuyer.php',1389],['lib/google/src/Google/Service','AdExchangeBuyer.php',1431],['lib/google/src/Google/Service','AdExchangeBuyer.php',1485],['lib/google/src/Google/Service','AdExchangeBuyer.php',1591],['lib/google/src/Google/Service','Books.php',1961],['lib/grade','grade_grade.php',997],['lib/grade','grade_outcome.php',120],['lib/google/src/Google/Service','Analytics.php',2179],['lib/google/src/Google/Service','Analytics.php',2325],['lib/google/src/Google/Service','Analytics.php',2439],['lib/google/src/Google/Service','Analytics.php',2567],['lib/google/src/Google/Service','Analytics.php',2685],['lib/google/src/Google/Service','Analytics.php',2780],['lib/google/src/Google/Service','Analytics.php',2907],['lib/google/src/Google/Service','Analytics.php',3017],['lib/google/src/Google/Service','Analytics.php',3124],['lib/google/src/Google/Service','Analytics.php',3263],['lib/google/src/Google/Service','Analytics.php',3441],['lib/google/src/Google/Service','Analytics.php',3548],['lib/google/src/Google/Service','Analytics.php',3646],['lib/google/src/Google/Service','Coordinate.php',524],['lib/google/src/Google/Service','DeploymentManager.php',483],['lib/google/src/Google/Service','Blogger.php',1258],['lib/google/src/Google/Service','Blogger.php',1510],['lib/google/src/Google/Service','CloudUserAccounts.php',674],['lib/google/src/Google/Service','CloudUserAccounts.php',939],['lib/google/src/Google/Service','Replicapoolupdater.php',355],['lib/google/src/Google/Service','Bigquery.php',567],['lib/google/src/Google/Service','Bigquery.php',709],['lib/google/src/Google/Service','Bigquery.php',897],['lib/google/src/Google/Service','ShoppingContent.php',1081],['lib/google/src/Google/Service','ShoppingContent.php',1479],['lib/google/src/Google/Service','ShoppingContent.php',2001],['lib/google/src/Google/Service','GroupsMigration.php',88],['lib/google/src/Google/Service','Storage.php',1077],['lib/google/src/Google/Service','Storage.php',1197],['lib/google/src/Google/Service','Storage.php',1367],['lib/google/src/Google/Service','Storage.php',1499],['lib/google/src/Google/Service','Storage.php',1737],['lib/google/src/Google/Service','Licensing.php',256],['lib/google/src/Google/Service','Gmail.php',1078],['lib/google/src/Google/Service','Taskqueue.php',324],['lib/adodb','adodb-active-recordx.inc.php',963],['lib/google/src/Google/Service','Doubleclicksearch.php',286],['lib/google/src/Google/Service','Autoscaler.php',347],['lib/google/src/Google/Service','Prediction.php',291],['lib/google/src/Google/Service','SiteVerification.php',181],['lib/google/src/Google/Service','Drive.php',1551],['lib/google/src/Google/Service','Drive.php',1635],['lib/google/src/Google/Service','Drive.php',1816],['lib/google/src/Google/Service','Drive.php',2069],['lib/google/src/Google/Service','Drive.php',2153],['lib/google/src/Google/Service','Drive.php',2273],['lib/google/src/Google/Service','Drive.php',2437],['lib/google/src/Google/Service','Directory.php',1945],['lib/google/src/Google/Service','Directory.php',2018],['lib/google/src/Google/Service','Directory.php',2086],['lib/google/src/Google/Service','Directory.php',2183],['lib/google/src/Google/Service','Directory.php',2253],['lib/google/src/Google/Service','Directory.php',2546],['lib/google/src/Google/Service','Directory.php',2681],['lib/google/src/Google/Service','Directory.php',2760],['lib/google/src/Google/Service','Directory.php',2865],['lib/google/src/Google/Service','Directory.php',3033],['lib/google/src/Google/Service','Directory.php',3213],['lib/google/src/Google/Service','Fusiontables.php',675],['lib/google/src/Google/Service','Fusiontables.php',841],['lib/google/src/Google/Service','Fusiontables.php',1011],['lib/google/src/Google/Service','Fusiontables.php',1217],['lib/google/src/Google/Service','AdSenseHost.php',787],['lib/google/src/Google/Service','AdSenseHost.php',1042],['lib/google/src/Google/Service','AdSenseHost.php',1183],['lib/google/src/Google/Service','Plus.php',466],['lib/google/src/Google/Service','Mirror.php',394],['lib/google/src/Google/Service','Mirror.php',452],['lib/google/src/Google/Service','Mirror.php',606],['lib/google/src/Google/Service','Mirror.php',688],['lib/google/src/Google/Service','Mirror.php',802],['lib/google/src/Google/Service','AndroidEnterprise.php',1017],['lib/google/src/Google/Service','AndroidEnterprise.php',1326],['lib/google/src/Google/Service','Calendar.php',936],['lib/google/src/Google/Service','Calendar.php',1102],['lib/google/src/Google/Service','Calendar.php',1301],['lib/google/src/Google/Service','Calendar.php',1481],['lib/google/src/Google/Service','PlusDomains.php',482],['lib/google/src/Google/Service','PlusDomains.php',607],['lib/google/src/Google/Service','PlusDomains.php',733],['lib/google/src/Google/Service','PlusDomains.php',782],['lib/google/src/Google/Service','GamesConfiguration.php',280],['lib/google/src/Google/Service','GamesConfiguration.php',419],['lib/google/src/Google/Service','Resourceviews.php',475],['lib/google/src/Google/Service','SQLAdmin.php',892],['lib/google/src/Google/Service','SQLAdmin.php',1111],['lib/google/src/Google/Service','SQLAdmin.php',1406],['lib/google/src/Google/Service','SQLAdmin.php',1501],['lib/google/src/Google/Service','Compute.php',4053],['lib/google/src/Google/Service','Compute.php',4183],['lib/google/src/Google/Service','Compute.php',4332],['lib/google/src/Google/Service','Compute.php',4606],['lib/google/src/Google/Service','Compute.php',4701],['lib/google/src/Google/Service','Compute.php',4861],['lib/google/src/Google/Service','Compute.php',4972],['lib/google/src/Google/Service','Compute.php',5063],['lib/google/src/Google/Service','Compute.php',5280],['lib/google/src/Google/Service','Compute.php',5410],['lib/google/src/Google/Service','Compute.php',5557],['lib/google/src/Google/Service','Compute.php',5744],['lib/google/src/Google/Service','Compute.php',6017],['lib/google/src/Google/Service','Compute.php',6186],['lib/google/src/Google/Service','Compute.php',6404],['lib/google/src/Google/Service','Compute.php',6747],['lib/google/src/Google/Service','Compute.php',7067],['lib/google/src/Google/Service','Compute.php',7238],['lib/google/src/Google/Service','Compute.php',7331],['lib/google/src/Google/Service','Compute.php',7441],['lib/google/src/Google/Service','Compute.php',7602],['lib/google/src/Google/Service','Compute.php',7785],['lib/google/src/Google/Service','Compute.php',7972],['lib/google/src/Google/Service','Compute.php',8065],['lib/google/src/Google/Service','Compute.php',8242],['lib/google/src/Google/Service','YouTube.php',1715],['lib/google/src/Google/Service','YouTube.php',1881],['lib/google/src/Google/Service','YouTube.php',2014],['lib/google/src/Google/Service','YouTube.php',2089],['lib/google/src/Google/Service','YouTube.php',2351],['lib/google/src/Google/Service','YouTube.php',2473],['lib/google/src/Google/Service','YouTube.php',2935],['lib/google/src/Google/Service','YouTube.php',3233],['lib/google/src/Google/Service','YouTube.php',3434],['lib/google/src/Google/Service','YouTube.php',3587],['lib/google/src/Google/Service','YouTube.php',3943],['lib/google/src/Google/Service','YouTube.php',4216],['lib/google/src/Google/Service','Dfareporting.php',4686],['lib/google/src/Google/Service','Dfareporting.php',4882],['lib/google/src/Google/Service','Dfareporting.php',5029],['lib/google/src/Google/Service','Dfareporting.php',5132],['lib/google/src/Google/Service','Dfareporting.php',5257],['lib/google/src/Google/Service','Dfareporting.php',5323],['lib/google/src/Google/Service','Dfareporting.php',5595],['lib/google/src/Google/Service','Dfareporting.php',5724],['lib/google/src/Google/Service','Dfareporting.php',5786],['lib/google/src/Google/Service','Dfareporting.php',5906],['lib/google/src/Google/Service','Dfareporting.php',6012],['lib/google/src/Google/Service','Dfareporting.php',6120],['lib/google/src/Google/Service','Dfareporting.php',6329],['lib/google/src/Google/Service','Dfareporting.php',6426],['lib/google/src/Google/Service','Dfareporting.php',6624],['lib/google/src/Google/Service','Dfareporting.php',6761],['lib/google/src/Google/Service','Dfareporting.php',7027],['lib/google/src/Google/Service','Dfareporting.php',7393],['lib/google/src/Google/Service','Dfareporting.php',7532],['lib/google/src/Google/Service','Dfareporting.php',7655],['lib/google/src/Google/Service','Dfareporting.php',8010],['lib/google/src/Google/Service','Dfareporting.php',8131],['lib/google/src/Google/Service','Dfareporting.php',8322],['lib/google/src/Google/Service','Dfareporting.php',8436],['lib/google/src/Google/Service','Dfareporting.php',8497],['lib/google/src/Google/Service','Dfareporting.php',8797],['lib/google/src/Google/Service','Manager.php',275],['lib/google/src/Google/Service','Manager.php',353]], 481],
'push': ['push', 'Push a new timer start on the stack. ', [['lib/horde/framework/Horde/Support','Timer.php',33],['lib/horde/framework/Horde/Support','Memory.php',44],['lib/evalmath','evalmath.class.php',462],['lib/horde/framework/Horde/Support','Stack.php',23],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',47],['lib/mustache/src/Mustache','Context.php',32],['lib','outputlib.php',2046],['lib/htmlpurifier/HTMLPurifier','Queue.php',43],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',54]], 4478],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'_reduce': ['_reduce', 'Tries to match a chunk of text and if successful removes the recognised chunk and any leading unparsed data. Empty strings will not be matched. ', [['lib','lexer.php',413]], 20],
'isstring': ['isstring', '', [['lib/lessphp','Functions.php',778]], 898],
'calculate': ['calculate', 'Analyse all the response data for for all the specified attempts at this question. ', [['question/classes/statistics/responses','analyser.php',111],['question/type/calculated/db','upgradelib.php',234],['question/classes/statistics/questions','calculator.php',86],['lib/phpexcel/PHPExcel/Shared/trend','trendClass.php',81],['mod/quiz/report/statistics/classes','calculator.php',46],['lib/phpexcel/PHPExcel','Calculation.php',2586],['question/type/calculated','question.php',415],['question/type/calculatedmulti/db','upgradelib.php',258]], 52],
'complete': ['complete', '', [['lib/yuilib/3.17.2/app-transitions-native','app-transitions-native-debug.js',241],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',2825],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',99],['completion/criteria','completion_criteria_role.php',89],['lib/yuilib/3.17.2/app-transitions-native','app-transitions-native.js',241],['completion/criteria','completion_criteria_self.php',80],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',279],['lib/jquery/ui-1.11.4','jquery-ui.js',13471]], 39],
'addalias': ['addalias', 'Defines a directive alias for backwards compatibility ', [['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',148]], 25],
'merge': ['merge', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',4835],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table','editor_plugin_src.js',279],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/lists','editor_plugin_src.js',115],['lib/horde/framework/Horde','Variables.php',285],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1163],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',4835],['lib/editor/atto/yui/src/rangy/js','rangy-classapplier.js',445],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',458]], 662],
'addmodule': ['addmodule', 'Adds a module to the current doctype by first registering it, and then tacking it on to the active doctype ', [['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',205]], 153],
'css': ['css', 'Minify CSS code. ', [['lib/classes','minify.php',93],['lib','outputrequirementslib.php',873]], 721],
'yarray': ['yarray', '', [['lib/yuilib/3.17.2/yui-core','yui-core.js',2383],['lib/yuilib/3.17.2/yui-base','yui-base-debug.js',2630],['lib/yuilib/3.17.2/yui','yui.js',2383],['lib/yuilib/3.17.2/yui-nodejs','yui-nodejs-debug.js',2630],['lib/yuilib/3.17.2/yui-base','yui-base.js',2383],['lib/yuilib/3.17.2/yui','yui-debug.js',2630],['lib/yuilib/3.17.2/yui-nodejs','yui-nodejs.js',2383],['lib/yuilib/3.17.2/yui-core','yui-core-debug.js',2630]], 44],
'pop': ['pop', 'Pop the latest timer start and return the difference with the current time. ', [['lib/horde/framework/Horde/Support','Timer.php',42],['lib/horde/framework/Horde/Support','Memory.php',58],['lib/evalmath','evalmath.class.php',467],['lib/horde/framework/Horde/Support','Stack.php',28],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',57],['lib/horde/framework/Horde/Support','Array.php',53],['lib/mustache/src/Mustache','Context.php',52],['lib','outputlib.php',2063],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',76]], 307],
'apply': ['apply', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16662]], 2690],
'getmodule': ['getmodule', '', [['lib/requirejs','require.js',497],['lib/google/src/Google/Service','Appengine.php',1665]], 221],
'isarray': ['isarray', '', [['lib/requirejs','require.js',47]], 856],
'addgroup': ['addgroup', 'Adds an element group ', [['lib/pear/HTML','QuickForm.php',717]], 111],
'js': ['js', 'Minify JS code. ', [['lib/classes','minify.php',31],['lib','outputrequirementslib.php',407],['grade/report/singleview/classes/local/screen','screen.php',245]], 68],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'each': ['each', '', [], 2670],
'next': ['next', '', [], 624],
'min': ['min', '', [], 898],
'substr': ['substr', '', [], 2823]};
CLASS_DATA={
};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
