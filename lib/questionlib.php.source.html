<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/questionlib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='questionlib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="questionlib.php.html">questionlib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="questionlib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="questionlib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Code for handling and processing questions</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * This is code that is module independent, i.e., can be used by any module that</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * uses questions, like quiz, lesson, ..</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * This script also loads the questiontype classes</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * Code for handling the editing of questions is in {@link question/editlib.php}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * TODO: separate those functions which form part of the API</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *       from the helper functions.</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @package moodlecore</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @subpackage questionbank</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas and others {@link http://moodle.com}</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/engine/lib.php.html">/question/engine/lib.php</a>');
<a name="l38"><span class="linenum">  38</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/type/questiontypebase.php.html">/question/type/questiontypebase.php</a>');
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">/// CONSTANTS ///////////////////////////////////</span>
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * Constant determines the number of answer boxes supplied in the editing</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * form for multiple choice and similar question types.</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> */</span>
<a name="l48"><span class="linenum">  48</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('QUESTION_NUMANS')" href="../_constants/QUESTION_NUMANS.html" onMouseOver="constPopup(event,'QUESTION_NUMANS')">QUESTION_NUMANS</a>&quot;, 10);
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">/**</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * Constant determines the number of answer boxes supplied in the editing</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * form for multiple choice and similar question types to start with, with</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * the option of adding QUESTION_NUMANS_ADD more answers.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> */</span>
<a name="l55"><span class="linenum">  55</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('QUESTION_NUMANS_START')" href="../_constants/QUESTION_NUMANS_START.html" onMouseOver="constPopup(event,'QUESTION_NUMANS_START')">QUESTION_NUMANS_START</a>&quot;, 3);
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * Constant determines the number of answer boxes to add in the editing</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * form for multiple choice and similar question types when the user presses</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * 'add form fields button'.</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> */</span>
<a name="l62"><span class="linenum">  62</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('QUESTION_NUMANS_ADD')" href="../_constants/QUESTION_NUMANS_ADD.html" onMouseOver="constPopup(event,'QUESTION_NUMANS_ADD')">QUESTION_NUMANS_ADD</a>&quot;, 3);
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">/**</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> * Move one question type in a list of question types. If you try to move one element</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> * off of the end, nothing will change.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> *</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * @param array $sortedqtypes An array $qtype =&gt; anything.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * @param string $tomove one of the keys from $sortedqtypes</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * @param integer $direction +1 or -1</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> * @return array an array $index =&gt; $qtype, with $index from 0 to n in order, and</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> *      the $qtypes in the same order as $sortedqtypes, except that $tomove will</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> *      have been moved one place.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> */</span>
<a name="l75"><span class="linenum">  75</span></a>  function <a class="function" onClick="logFunction('question_reorder_qtypes')" href="../_functions/question_reorder_qtypes.html" onMouseOver="funcPopup(event,'question_reorder_qtypes')">question_reorder_qtypes</a>(<a class="var it7804" onMouseOver="hilite(7804)" onMouseOut="lolite()" onClick="logVariable('sortedqtypes')" href="../_variables/sortedqtypes.html">$sortedqtypes</a>, <a class="var it22124" onMouseOver="hilite(22124)" onMouseOut="lolite()" onClick="logVariable('tomove')" href="../_variables/tomove.html">$tomove</a>, <a class="var it2573" onMouseOver="hilite(2573)" onMouseOut="lolite()" onClick="logVariable('direction')" href="../_variables/direction.html">$direction</a>) {
<a name="l76"><span class="linenum">  76</span></a>      <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7804" onMouseOver="hilite(7804)" onMouseOut="lolite()" onClick="logVariable('sortedqtypes')" href="../_variables/sortedqtypes.html">$sortedqtypes</a>);
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">    // Find the element to move.</span>
<a name="l78"><span class="linenum">  78</span></a>      <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it22124" onMouseOver="hilite(22124)" onMouseOut="lolite()" onClick="logVariable('tomove')" href="../_variables/tomove.html">$tomove</a>, <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>);
<a name="l79"><span class="linenum">  79</span></a>      if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> === false) {
<a name="l80"><span class="linenum">  80</span></a>          return <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>;
<a name="l81"><span class="linenum">  81</span></a>      }
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">    // Work out the other index.</span>
<a name="l83"><span class="linenum">  83</span></a>      <a class="var it22125" onMouseOver="hilite(22125)" onMouseOut="lolite()" onClick="logVariable('otherkey')" href="../_variables/otherkey.html">$otherkey</a> = <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> + <a class="var it2573" onMouseOver="hilite(2573)" onMouseOut="lolite()" onClick="logVariable('direction')" href="../_variables/direction.html">$direction</a>;
<a name="l84"><span class="linenum">  84</span></a>      if (!isset(<a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>[<a class="var it22125" onMouseOver="hilite(22125)" onMouseOut="lolite()" onClick="logVariable('otherkey')" href="../_variables/otherkey.html">$otherkey</a>])) {
<a name="l85"><span class="linenum">  85</span></a>          return <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>;
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">    // Do the swap.</span>
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it7681" onMouseOver="hilite(7681)" onMouseOut="lolite()" onClick="logVariable('swap')" href="../_variables/swap.html">$swap</a> = <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>[<a class="var it22125" onMouseOver="hilite(22125)" onMouseOut="lolite()" onClick="logVariable('otherkey')" href="../_variables/otherkey.html">$otherkey</a>];
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>[<a class="var it22125" onMouseOver="hilite(22125)" onMouseOut="lolite()" onClick="logVariable('otherkey')" href="../_variables/otherkey.html">$otherkey</a>] = <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l90"><span class="linenum">  90</span></a>      <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it7681" onMouseOver="hilite(7681)" onMouseOut="lolite()" onClick="logVariable('swap')" href="../_variables/swap.html">$swap</a>;
<a name="l91"><span class="linenum">  91</span></a>      return <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>;
<a name="l92"><span class="linenum">  92</span></a>  }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">/**</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> * Save a new question type order to the config_plugins table.</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment"> * @global object</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> * @param $neworder An arra $index =&gt; $qtype. Indices should start at 0 and be in order.</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment"> * @param $config get_config('question'), if you happen to have it around, to save one DB query.</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> */</span>
<a name="l100"><span class="linenum"> 100</span></a>  function <a class="function" onClick="logFunction('question_save_qtype_order')" href="../_functions/question_save_qtype_order.html" onMouseOver="funcPopup(event,'question_save_qtype_order')">question_save_qtype_order</a>(<a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a>, <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = null) {
<a name="l101"><span class="linenum"> 101</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>)) {
<a name="l104"><span class="linenum"> 104</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('question');
<a name="l105"><span class="linenum"> 105</span></a>      }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      foreach (<a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../_variables/neworder.html">$neworder</a> as <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a> =&gt; <a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>) {
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('sortvar')" href="../_variables/sortvar.html">$sortvar</a> = <a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a> . '_sortorder';
<a name="l109"><span class="linenum"> 109</span></a>          if (!isset(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('sortvar')" href="../_variables/sortvar.html">$sortvar</a>) || <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('sortvar')" href="../_variables/sortvar.html">$sortvar</a> != <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a> + 1) {
<a name="l110"><span class="linenum"> 110</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>(<a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('sortvar')" href="../_variables/sortvar.html">$sortvar</a>, <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a> + 1, 'question');
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>      }
<a name="l113"><span class="linenum"> 113</span></a>  }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">/// FUNCTIONS //////////////////////////////////////////////////////</span>
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">/**</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment"> * @param array $questionids of question ids.</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment"> * @return boolean whether any of these questions are being used by any part of Moodle.</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment"> */</span>
<a name="l121"><span class="linenum"> 121</span></a>  function <a class="function" onClick="logFunction('questions_in_use')" href="../_functions/questions_in_use.html" onMouseOver="funcPopup(event,'questions_in_use')">questions_in_use</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>) {
<a name="l122"><span class="linenum"> 122</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      if (question_engine::<a class="function" onClick="logFunction('questions_in_use')" href="../_functions/questions_in_use.html" onMouseOver="funcPopup(event,'questions_in_use')">questions_in_use</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>)) {
<a name="l125"><span class="linenum"> 125</span></a>          return true;
<a name="l126"><span class="linenum"> 126</span></a>      }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      foreach (<a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('mod') as <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> =&gt; <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it21160" onMouseOver="hilite(21160)" onMouseOut="lolite()" onClick="logVariable('lib')" href="../_variables/lib.html">$lib</a> = <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> . '/lib.php';
<a name="l130"><span class="linenum"> 130</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it21160" onMouseOver="hilite(21160)" onMouseOut="lolite()" onClick="logVariable('lib')" href="../_variables/lib.html">$lib</a>)) {
<a name="l131"><span class="linenum"> 131</span></a>              include_once(<a class="var it21160" onMouseOver="hilite(21160)" onMouseOut="lolite()" onClick="logVariable('lib')" href="../_variables/lib.html">$lib</a>);
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it3070" onMouseOver="hilite(3070)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../_variables/fn.html">$fn</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> . '_questions_in_use';
<a name="l134"><span class="linenum"> 134</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it3070" onMouseOver="hilite(3070)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../_variables/fn.html">$fn</a>)) {
<a name="l135"><span class="linenum"> 135</span></a>                  if (<a class="var it3070" onMouseOver="hilite(3070)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../_variables/fn.html">$fn</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>)) {
<a name="l136"><span class="linenum"> 136</span></a>                      return true;
<a name="l137"><span class="linenum"> 137</span></a>                  }
<a name="l138"><span class="linenum"> 138</span></a>              } else {
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">                // Fallback for legacy modules.</span>
<a name="l141"><span class="linenum"> 141</span></a>                  <a class="var it3070" onMouseOver="hilite(3070)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../_variables/fn.html">$fn</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> . '_question_list_instances';
<a name="l142"><span class="linenum"> 142</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it3070" onMouseOver="hilite(3070)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../_variables/fn.html">$fn</a>)) {
<a name="l143"><span class="linenum"> 143</span></a>                      foreach (<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a> as <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>) {
<a name="l144"><span class="linenum"> 144</span></a>                          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="var it3070" onMouseOver="hilite(3070)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../_variables/fn.html">$fn</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>);
<a name="l145"><span class="linenum"> 145</span></a>                          if (!empty(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>)) {
<a name="l146"><span class="linenum"> 146</span></a>                              return true;
<a name="l147"><span class="linenum"> 147</span></a>                          }
<a name="l148"><span class="linenum"> 148</span></a>                      }
<a name="l149"><span class="linenum"> 149</span></a>                  }
<a name="l150"><span class="linenum"> 150</span></a>              }
<a name="l151"><span class="linenum"> 151</span></a>          }
<a name="l152"><span class="linenum"> 152</span></a>      }
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>      return false;
<a name="l155"><span class="linenum"> 155</span></a>  }
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">/**</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment"> * Determine whether there arey any questions belonging to this context, that is whether any of its</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment"> * question categories contain any questions. This will return true even if all the questions are</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment"> * hidden.</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment"> *</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment"> * @param mixed $context either a context object, or a context id.</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment"> * @return boolean whether any of the question categories beloning to this context have</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment"> *         any questions in them.</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment"> */</span>
<a name="l166"><span class="linenum"> 166</span></a>  function <a class="function" onClick="logFunction('question_context_has_any_questions')" href="../_functions/question_context_has_any_questions.html" onMouseOver="funcPopup(event,'question_context_has_any_questions')">question_context_has_any_questions</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l167"><span class="linenum"> 167</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l168"><span class="linenum"> 168</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l170"><span class="linenum"> 170</span></a>      } else if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l172"><span class="linenum"> 172</span></a>      } else {
<a name="l173"><span class="linenum"> 173</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcontextinhasanyquestions', 'question');
<a name="l174"><span class="linenum"> 174</span></a>      }
<a name="l175"><span class="linenum"> 175</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;SELECT *
<a name="l176"><span class="linenum"> 176</span></a>                                       FROM {question} q
<a name="l177"><span class="linenum"> 177</span></a>                                       JOIN {question_categories} qc ON qc.id = q.category
<a name="l178"><span class="linenum"> 178</span></a>                                      WHERE qc.contextid = ? AND q.parent = 0&quot;, array(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l179"><span class="linenum"> 179</span></a>  }
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">/**</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment"> * Check whether a given grade is one of a list of allowed options. If not,</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment"> * depending on $matchgrades, either return the nearest match, or return false</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment"> * to signal an error.</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment"> * @param array $gradeoptionsfull list of valid options</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment"> * @param int $grade grade to be tested</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment"> * @param string $matchgrades 'error' or 'nearest'</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment"> * @return mixed either 'fixed' value or false if error.</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment"> */</span>
<a name="l190"><span class="linenum"> 190</span></a>  function <a class="function" onClick="logFunction('match_grade_options')" href="../_functions/match_grade_options.html" onMouseOver="funcPopup(event,'match_grade_options')">match_grade_options</a>(<a class="var it5874" onMouseOver="hilite(5874)" onMouseOut="lolite()" onClick="logVariable('gradeoptionsfull')" href="../_variables/gradeoptionsfull.html">$gradeoptionsfull</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a>, <a class="var it5860" onMouseOver="hilite(5860)" onMouseOut="lolite()" onClick="logVariable('matchgrades')" href="../_variables/matchgrades.html">$matchgrades</a> = 'error') {
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      if (<a class="var it5860" onMouseOver="hilite(5860)" onMouseOut="lolite()" onClick="logVariable('matchgrades')" href="../_variables/matchgrades.html">$matchgrades</a> == 'error') {
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">        // (Almost) exact match, or an error.</span>
<a name="l194"><span class="linenum"> 194</span></a>          foreach (<a class="var it5874" onMouseOver="hilite(5874)" onMouseOut="lolite()" onClick="logVariable('gradeoptionsfull')" href="../_variables/gradeoptionsfull.html">$gradeoptionsfull</a> as <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> =&gt; <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>) {
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">            // Slightly fuzzy test, never check floats for equality.</span>
<a name="l196"><span class="linenum"> 196</span></a>              if (<a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a> - <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) &lt; 0.00001) {
<a name="l197"><span class="linenum"> 197</span></a>                  return <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>; <span class="comment">// Be sure the return the proper value.</span>
<a name="l198"><span class="linenum"> 198</span></a>              }
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">        // Didn't find a match so that's an error.</span>
<a name="l201"><span class="linenum"> 201</span></a>          return false;
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>      } else if (<a class="var it5860" onMouseOver="hilite(5860)" onMouseOut="lolite()" onClick="logVariable('matchgrades')" href="../_variables/matchgrades.html">$matchgrades</a> == 'nearest') {
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">        // Work out nearest value</span>
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it8960" onMouseOver="hilite(8960)" onMouseOut="lolite()" onClick="logVariable('best')" href="../_variables/best.html">$best</a> = false;
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it22126" onMouseOver="hilite(22126)" onMouseOut="lolite()" onClick="logVariable('bestmismatch')" href="../_variables/bestmismatch.html">$bestmismatch</a> = 2;
<a name="l207"><span class="linenum"> 207</span></a>          foreach (<a class="var it5874" onMouseOver="hilite(5874)" onMouseOut="lolite()" onClick="logVariable('gradeoptionsfull')" href="../_variables/gradeoptionsfull.html">$gradeoptionsfull</a> as <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> =&gt; <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>) {
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it22127" onMouseOver="hilite(22127)" onMouseOut="lolite()" onClick="logVariable('newmismatch')" href="../_variables/newmismatch.html">$newmismatch</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../_variables/grade.html">$grade</a> - <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l209"><span class="linenum"> 209</span></a>              if (<a class="var it22127" onMouseOver="hilite(22127)" onMouseOut="lolite()" onClick="logVariable('newmismatch')" href="../_variables/newmismatch.html">$newmismatch</a> &lt; <a class="var it22126" onMouseOver="hilite(22126)" onMouseOut="lolite()" onClick="logVariable('bestmismatch')" href="../_variables/bestmismatch.html">$bestmismatch</a>) {
<a name="l210"><span class="linenum"> 210</span></a>                  <a class="var it8960" onMouseOver="hilite(8960)" onMouseOut="lolite()" onClick="logVariable('best')" href="../_variables/best.html">$best</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l211"><span class="linenum"> 211</span></a>                  <a class="var it22126" onMouseOver="hilite(22126)" onMouseOut="lolite()" onClick="logVariable('bestmismatch')" href="../_variables/bestmismatch.html">$bestmismatch</a> = <a class="var it22127" onMouseOver="hilite(22127)" onMouseOut="lolite()" onClick="logVariable('newmismatch')" href="../_variables/newmismatch.html">$newmismatch</a>;
<a name="l212"><span class="linenum"> 212</span></a>              }
<a name="l213"><span class="linenum"> 213</span></a>          }
<a name="l214"><span class="linenum"> 214</span></a>          return <a class="var it8960" onMouseOver="hilite(8960)" onMouseOut="lolite()" onClick="logVariable('best')" href="../_variables/best.html">$best</a>;
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>      } else {
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">        // Unknow option passed.</span>
<a name="l218"><span class="linenum"> 218</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unknown <a class="var it5860" onMouseOver="hilite(5860)" onMouseOut="lolite()" onClick="logVariable('matchgrades')" href="../_variables/matchgrades.html">$matchgrades</a> ' . <a class="var it5860" onMouseOver="hilite(5860)" onMouseOut="lolite()" onClick="logVariable('matchgrades')" href="../_variables/matchgrades.html">$matchgrades</a> .
<a name="l219"><span class="linenum"> 219</span></a>                  ' passed to match_grade_options');
<a name="l220"><span class="linenum"> 220</span></a>      }
<a name="l221"><span class="linenum"> 221</span></a>  }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">/**</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * Remove stale questions from a category.</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> *</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * While questions should not be left behind when they are not used any more,</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * it does happen, maybe via restore, or old logic, or uncovered scenarios. When</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> * this happens, the users are unable to delete the question category unless</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> * they move those stale questions to another one category, but to them the</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment"> * category is empty as it does not contain anything. The purpose of this function</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment"> * is to detect the questions that may have gone stale and remove them.</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment"> *</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment"> * You will typically use this prior to checking if the category contains questions.</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> *</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> * The stale questions (unused and hidden to the user) handled are:</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * - hidden questions</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> * - random questions</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment"> *</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment"> * @param int $categoryid The category ID.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment"> */</span>
<a name="l241"><span class="linenum"> 241</span></a>  function <a class="function" onClick="logFunction('question_remove_stale_questions_from_category')" href="../_functions/question_remove_stale_questions_from_category.html" onMouseOver="funcPopup(event,'question_remove_stale_questions_from_category')">question_remove_stale_questions_from_category</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l242"><span class="linenum"> 242</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = 'category = :categoryid AND (qtype = :qtype OR hidden = :hidden)';
<a name="l245"><span class="linenum"> 245</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = ['categoryid' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, 'qtype' =&gt; 'random', 'hidden' =&gt; 1];
<a name="l246"><span class="linenum"> 246</span></a>      <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_select')" href="../_functions/get_recordset_select.html" onMouseOver="funcPopup(event,'get_recordset_select')">get_recordset_select</a>(&quot;question&quot;, <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, '', 'id');
<a name="l247"><span class="linenum"> 247</span></a>      foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">        // The function question_delete_question does not delete questions in use.</span>
<a name="l249"><span class="linenum"> 249</span></a>          <a class="function" onClick="logFunction('question_delete_question')" href="../_functions/question_delete_question.html" onMouseOver="funcPopup(event,'question_delete_question')">question_delete_question</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l250"><span class="linenum"> 250</span></a>      }
<a name="l251"><span class="linenum"> 251</span></a>      <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l252"><span class="linenum"> 252</span></a>  }
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">/**</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment"> * Category is about to be deleted,</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment"> * 1/ All questions are deleted for this question category.</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment"> * 2/ Any questions that can't be deleted are moved to a new category</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment"> * NOTE: this function is called from lib/db/upgrade.php</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> *</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment"> * @param object|coursecat $category course category object</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment"> */</span>
<a name="l262"><span class="linenum"> 262</span></a>  function <a class="function" onClick="logFunction('question_category_delete_safe')" href="../_functions/question_category_delete_safe.html" onMouseOver="funcPopup(event,'question_category_delete_safe')">question_category_delete_safe</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l263"><span class="linenum"> 263</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l264"><span class="linenum"> 264</span></a>      <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('criteria')" href="../_variables/criteria.html">$criteria</a> = array('category' =&gt; <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l265"><span class="linenum"> 265</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l266"><span class="linenum"> 266</span></a>      <a class="var it22128" onMouseOver="hilite(22128)" onMouseOut="lolite()" onClick="logVariable('rescue')" href="../_variables/rescue.html">$rescue</a> = null; <span class="comment">// See the code around the call to question_save_from_deletion.</span>
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">    // Deal with any questions in the category.</span>
<a name="l269"><span class="linenum"> 269</span></a>      if (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('criteria')" href="../_variables/criteria.html">$criteria</a>, '', 'id,qtype')) {
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">        // Try to delete each question.</span>
<a name="l272"><span class="linenum"> 272</span></a>          foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l273"><span class="linenum"> 273</span></a>              <a class="function" onClick="logFunction('question_delete_question')" href="../_functions/question_delete_question.html" onMouseOver="funcPopup(event,'question_delete_question')">question_delete_question</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l274"><span class="linenum"> 274</span></a>          }
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">        // Check to see if there were any questions that were kept because</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">        // they are still in use somehow, even though quizzes in courses</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">        // in this category will already have been deleted. This could</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">        // happen, for example, if questions are added to a course,</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">        // and then that course is moved to another category (MDL-14802).</span>
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('question', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('criteria')" href="../_variables/criteria.html">$criteria</a>, '', 'id, 1');
<a name="l282"><span class="linenum"> 282</span></a>          if (!empty(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>)) {
<a name="l283"><span class="linenum"> 283</span></a>              <a class="var it2354" onMouseOver="hilite(2354)" onMouseOut="lolite()" onClick="logVariable('parentcontextid')" href="../_variables/parentcontextid.html">$parentcontextid</a> = <a class="constant" onClick="logConstant('SYSCONTEXTID')" href="../_constants/SYSCONTEXTID.html" onMouseOver="constPopup(event,'SYSCONTEXTID')">SYSCONTEXTID</a>;
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('unknown', 'question');
<a name="l285"><span class="linenum"> 285</span></a>              if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> !== false) {
<a name="l286"><span class="linenum"> 286</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>();
<a name="l287"><span class="linenum"> 287</span></a>                  <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context')" href="../_functions/get_parent_context.html" onMouseOver="funcPopup(event,'get_parent_context')">get_parent_context</a>();
<a name="l288"><span class="linenum"> 288</span></a>                  if (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>) {
<a name="l289"><span class="linenum"> 289</span></a>                      <a class="var it2354" onMouseOver="hilite(2354)" onMouseOut="lolite()" onClick="logVariable('parentcontextid')" href="../_variables/parentcontextid.html">$parentcontextid</a> = <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l290"><span class="linenum"> 290</span></a>                  }
<a name="l291"><span class="linenum"> 291</span></a>              }
<a name="l292"><span class="linenum"> 292</span></a>              <a class="function" onClick="logFunction('question_save_from_deletion')" href="../_functions/question_save_from_deletion.html" onMouseOver="funcPopup(event,'question_save_from_deletion')">question_save_from_deletion</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>), <a class="var it2354" onMouseOver="hilite(2354)" onMouseOut="lolite()" onClick="logVariable('parentcontextid')" href="../_variables/parentcontextid.html">$parentcontextid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it22128" onMouseOver="hilite(22128)" onMouseOut="lolite()" onClick="logVariable('rescue')" href="../_variables/rescue.html">$rescue</a>);
<a name="l293"><span class="linenum"> 293</span></a>          }
<a name="l294"><span class="linenum"> 294</span></a>      }
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">    // Now delete the category.</span>
<a name="l297"><span class="linenum"> 297</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('question_categories', array('id' =&gt; <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l298"><span class="linenum"> 298</span></a>  }
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">/**</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment"> * Tests whether any question in a category is used by any part of Moodle.</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment"> *</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment"> * @param integer $categoryid a question category id.</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment"> * @param boolean $recursive whether to check child categories too.</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment"> * @return boolean whether any question in this category is in use.</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment"> */</span>
<a name="l307"><span class="linenum"> 307</span></a>  function <a class="function" onClick="logFunction('question_category_in_use')" href="../_functions/question_category_in_use.html" onMouseOver="funcPopup(event,'question_category_in_use')">question_category_in_use</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('recursive')" href="../_variables/recursive.html">$recursive</a> = false) {
<a name="l308"><span class="linenum"> 308</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">    //Look at each question in the category</span>
<a name="l311"><span class="linenum"> 311</span></a>      if (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('question',
<a name="l312"><span class="linenum"> 312</span></a>              array('category' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>), '', 'id, 1')) {
<a name="l313"><span class="linenum"> 313</span></a>          if (<a class="function" onClick="logFunction('questions_in_use')" href="../_functions/questions_in_use.html" onMouseOver="funcPopup(event,'questions_in_use')">questions_in_use</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>))) {
<a name="l314"><span class="linenum"> 314</span></a>              return true;
<a name="l315"><span class="linenum"> 315</span></a>          }
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>      if (!<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('recursive')" href="../_variables/recursive.html">$recursive</a>) {
<a name="l318"><span class="linenum"> 318</span></a>          return false;
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">    //Look under child categories recursively</span>
<a name="l322"><span class="linenum"> 322</span></a>      if (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question_categories',
<a name="l323"><span class="linenum"> 323</span></a>              array('parent' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>), '', 'id, 1')) {
<a name="l324"><span class="linenum"> 324</span></a>          foreach (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l325"><span class="linenum"> 325</span></a>              if (<a class="function" onClick="logFunction('question_category_in_use')" href="../_functions/question_category_in_use.html" onMouseOver="funcPopup(event,'question_category_in_use')">question_category_in_use</a>(<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('id')" class="var it43449" onMouseOver="hilite(43449)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('recursive')" href="../_variables/recursive.html">$recursive</a>)) {
<a name="l326"><span class="linenum"> 326</span></a>                  return true;
<a name="l327"><span class="linenum"> 327</span></a>              }
<a name="l328"><span class="linenum"> 328</span></a>          }
<a name="l329"><span class="linenum"> 329</span></a>      }
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>      return false;
<a name="l332"><span class="linenum"> 332</span></a>  }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">/**</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * Deletes question and all associated data from the database</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> *</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> * It will not delete a question if it is used by an activity module</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * @param object $question  The question being deleted</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> */</span>
<a name="l340"><span class="linenum"> 340</span></a>  function <a class="function" onClick="logFunction('question_delete_question')" href="../_functions/question_delete_question.html" onMouseOver="funcPopup(event,'question_delete_question')">question_delete_question</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>) {
<a name="l341"><span class="linenum"> 341</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>('
<a name="l344"><span class="linenum"> 344</span></a>              SELECT q.*, qc.contextid
<a name="l345"><span class="linenum"> 345</span></a>              FROM {question} q
<a name="l346"><span class="linenum"> 346</span></a>              JOIN {question_categories} qc ON qc.id = q.category
<a name="l347"><span class="linenum"> 347</span></a>              WHERE q.id = ?', array(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>));
<a name="l348"><span class="linenum"> 348</span></a>      if (!<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">        // In some situations, for example if this was a child of a</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">        // Cloze question that was previously deleted, the question may already</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">        // have gone. In this case, just do nothing.</span>
<a name="l352"><span class="linenum"> 352</span></a>          return;
<a name="l353"><span class="linenum"> 353</span></a>      }
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">    // Do not delete a question if it is used by an activity module</span>
<a name="l356"><span class="linenum"> 356</span></a>      if (<a class="function" onClick="logFunction('questions_in_use')" href="../_functions/questions_in_use.html" onMouseOver="funcPopup(event,'questions_in_use')">questions_in_use</a>(array(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>))) {
<a name="l357"><span class="linenum"> 357</span></a>          return;
<a name="l358"><span class="linenum"> 358</span></a>      }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>      <a class="var it175" onMouseOver="hilite(175)" onMouseOut="lolite()" onClick="logVariable('dm')" href="../_variables/dm.html">$dm</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_engine_data_mapper')" href="../_classes/question_engine_data_mapper.html" onMouseOver="classPopup(event,'question_engine_data_mapper')">question_engine_data_mapper</a>();
<a name="l361"><span class="linenum"> 361</span></a>      <a class="var it175" onMouseOver="hilite(175)" onMouseOut="lolite()" onClick="logVariable('dm')" href="../_variables/dm.html">$dm</a>-&gt;<a class="function" onClick="logFunction('delete_previews')" href="../_functions/delete_previews.html" onMouseOver="funcPopup(event,'delete_previews')">delete_previews</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>);
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">    // delete questiontype-specific data</span>
<a name="l364"><span class="linenum"> 364</span></a>      question_bank::<a class="function" onClick="logFunction('get_qtype')" href="../_functions/get_qtype.html" onMouseOver="funcPopup(event,'get_qtype')">get_qtype</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/qtype.html">qtype</a>, false)-&gt;<a class="function" onClick="logFunction('delete_question')" href="../_functions/delete_question.html" onMouseOver="funcPopup(event,'delete_question')">delete_question</a>(
<a name="l365"><span class="linenum"> 365</span></a>              <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('contextid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>);
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">    // Delete all tag instances.</span>
<a name="l368"><span class="linenum"> 368</span></a>      <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('remove_all_item_tags')" href="../_functions/remove_all_item_tags.html" onMouseOver="funcPopup(event,'remove_all_item_tags')">remove_all_item_tags</a>('core_question', 'question', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l369"><span class="linenum"> 369</span></a>  
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">    // Now recursively delete all child questions</span>
<a name="l371"><span class="linenum"> 371</span></a>      if (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question',
<a name="l372"><span class="linenum"> 372</span></a>              array('parent' =&gt; <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>), '', 'id, qtype')) {
<a name="l373"><span class="linenum"> 373</span></a>          foreach (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l374"><span class="linenum"> 374</span></a>              if (<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('id')" class="var it43449" onMouseOver="hilite(43449)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>) {
<a name="l375"><span class="linenum"> 375</span></a>                  <a class="function" onClick="logFunction('question_delete_question')" href="../_functions/question_delete_question.html" onMouseOver="funcPopup(event,'question_delete_question')">question_delete_question</a>(<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('id')" class="var it43449" onMouseOver="hilite(43449)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l376"><span class="linenum"> 376</span></a>              }
<a name="l377"><span class="linenum"> 377</span></a>          }
<a name="l378"><span class="linenum"> 378</span></a>      }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">    // Finally delete the question record itself</span>
<a name="l381"><span class="linenum"> 381</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('question', array('id' =&gt; <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>));
<a name="l382"><span class="linenum"> 382</span></a>      question_bank::<a class="function" onClick="logFunction('notify_question_edited')" href="../_functions/notify_question_edited.html" onMouseOver="funcPopup(event,'notify_question_edited')">notify_question_edited</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>);
<a name="l383"><span class="linenum"> 383</span></a>  }
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">/**</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment"> * All question categories and their questions are deleted for this context id.</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment"> *</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment"> * @param object $contextid The contextid to delete question categories from</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment"> * @return array Feedback from deletes (if any)</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment"> */</span>
<a name="l391"><span class="linenum"> 391</span></a>  function <a class="function" onClick="logFunction('question_delete_context')" href="../_functions/question_delete_context.html" onMouseOver="funcPopup(event,'question_delete_context')">question_delete_context</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l392"><span class="linenum"> 392</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">    //To store feedback to be showed at the end of the process</span>
<a name="l395"><span class="linenum"> 395</span></a>      <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>   = array();
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">    //Cache some strings</span>
<a name="l398"><span class="linenum"> 398</span></a>      <a class="var it22130" onMouseOver="hilite(22130)" onMouseOut="lolite()" onClick="logVariable('strcatdeleted')" href="../_variables/strcatdeleted.html">$strcatdeleted</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('unusedcategorydeleted', 'question');
<a name="l399"><span class="linenum"> 399</span></a>      <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a> = 'id, parent, name, contextid';
<a name="l400"><span class="linenum"> 400</span></a>      if (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question_categories', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>), 'parent', <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>)) {
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">        //Sort categories following their tree (parent-child) relationships</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">        //this will make the feedback more readable</span>
<a name="l403"><span class="linenum"> 403</span></a>          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="function" onClick="logFunction('sort_categories_by_tree')" href="../_functions/sort_categories_by_tree.html" onMouseOver="funcPopup(event,'sort_categories_by_tree')">sort_categories_by_tree</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>);
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>          foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l406"><span class="linenum"> 406</span></a>              <a class="function" onClick="logFunction('question_category_delete_safe')" href="../_functions/question_category_delete_safe.html" onMouseOver="funcPopup(event,'question_category_delete_safe')">question_category_delete_safe</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">            //Fill feedback</span>
<a name="l409"><span class="linenum"> 409</span></a>              <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>[] = array(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it22130" onMouseOver="hilite(22130)" onMouseOut="lolite()" onClick="logVariable('strcatdeleted')" href="../_variables/strcatdeleted.html">$strcatdeleted</a>);
<a name="l410"><span class="linenum"> 410</span></a>          }
<a name="l411"><span class="linenum"> 411</span></a>      }
<a name="l412"><span class="linenum"> 412</span></a>      return <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>;
<a name="l413"><span class="linenum"> 413</span></a>  }
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">/**</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> * All question categories and their questions are deleted for this course.</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"> *</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment"> * @param stdClass $course an object representing the activity</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment"> * @param boolean $feedback to specify if the process must output a summary of its work</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment"> * @return boolean</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment"> */</span>
<a name="l422"><span class="linenum"> 422</span></a>  function <a class="function" onClick="logFunction('question_delete_course')" href="../_functions/question_delete_course.html" onMouseOver="funcPopup(event,'question_delete_course')">question_delete_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>=true) {
<a name="l423"><span class="linenum"> 423</span></a>      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l424"><span class="linenum"> 424</span></a>      <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a> = <a class="function" onClick="logFunction('question_delete_context')" href="../_functions/question_delete_context.html" onMouseOver="funcPopup(event,'question_delete_context')">question_delete_context</a>(<a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43118" onMouseOver="hilite(43118)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>);
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">    // Inform about changes performed if feedback is enabled.</span>
<a name="l427"><span class="linenum"> 427</span></a>      if (<a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a> &amp;&amp; <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>) {
<a name="l428"><span class="linenum"> 428</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a> = array(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('category', 'question'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action'));
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a> = <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>;
<a name="l431"><span class="linenum"> 431</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l432"><span class="linenum"> 432</span></a>      }
<a name="l433"><span class="linenum"> 433</span></a>      return true;
<a name="l434"><span class="linenum"> 434</span></a>  }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">/**</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment"> * Category is about to be deleted,</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment"> * 1/ All question categories and their questions are deleted for this course category.</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment"> * 2/ All questions are moved to new category</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"> *</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment"> * @param object|coursecat $category course category object</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> * @param object|coursecat $newcategory empty means everything deleted, otherwise id of</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> *      category where content moved</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"> * @param boolean $feedback to specify if the process must output a summary of its work</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment"> * @return boolean</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> */</span>
<a name="l447"><span class="linenum"> 447</span></a>  function <a class="function" onClick="logFunction('question_delete_course_category')" href="../_functions/question_delete_course_category.html" onMouseOver="funcPopup(event,'question_delete_course_category')">question_delete_course_category</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>, <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>=true) {
<a name="l448"><span class="linenum"> 448</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l451"><span class="linenum"> 451</span></a>      if (empty(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>)) {
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a> = <a class="function" onClick="logFunction('question_delete_context')" href="../_functions/question_delete_context.html" onMouseOver="funcPopup(event,'question_delete_context')">question_delete_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>);
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">        // Output feedback if requested.</span>
<a name="l455"><span class="linenum"> 455</span></a>          if (<a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a> &amp;&amp; <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>) {
<a name="l456"><span class="linenum"> 456</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l457"><span class="linenum"> 457</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a> = array(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questioncategory', 'question'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action'));
<a name="l458"><span class="linenum"> 458</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a> = <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>;
<a name="l459"><span class="linenum"> 459</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l460"><span class="linenum"> 460</span></a>          }
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>      } else {
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">        // Move question categories to the new context.</span>
<a name="l464"><span class="linenum"> 464</span></a>          if (!<a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../_variables/newcontext.html">$newcontext</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l465"><span class="linenum"> 465</span></a>              return false;
<a name="l466"><span class="linenum"> 466</span></a>          }
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">        // Update the contextid for any tag instances for questions in the old context.</span>
<a name="l469"><span class="linenum"> 469</span></a>          <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('move_context')" href="../_functions/move_context.html" onMouseOver="funcPopup(event,'move_context')">move_context</a>('core_question', 'question', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../_variables/newcontext.html">$newcontext</a>);
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('question_categories', 'contextid', <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../_variables/newcontext.html">$newcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44345" onMouseOver="hilite(44345)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>          if (<a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>) {
<a name="l474"><span class="linenum"> 474</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l475"><span class="linenum"> 475</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('oldplace')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/oldplace.html">oldplace</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>();
<a name="l476"><span class="linenum"> 476</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('newplace')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/newplace.html">newplace</a> = <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../_variables/newcontext.html">$newcontext</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>();
<a name="l477"><span class="linenum"> 477</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(
<a name="l478"><span class="linenum"> 478</span></a>                      <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('movedquestionsandcategories', 'question', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>), 'notifysuccess');
<a name="l479"><span class="linenum"> 479</span></a>          }
<a name="l480"><span class="linenum"> 480</span></a>      }
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>      return true;
<a name="l483"><span class="linenum"> 483</span></a>  }
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">/**</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"> * Enter description here...</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment"> *</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment"> * @param array $questionids of question ids</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment"> * @param object $newcontextid the context to create the saved category in.</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment"> * @param string $oldplace a textual description of the think being deleted,</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment"> *      e.g. from get_context_name</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment"> * @param object $newcategory</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment"> * @return mixed false on</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment"> */</span>
<a name="l495"><span class="linenum"> 495</span></a>  function <a class="function" onClick="logFunction('question_save_from_deletion')" href="../_functions/question_save_from_deletion.html" onMouseOver="funcPopup(event,'question_save_from_deletion')">question_save_from_deletion</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>, <a class="var it22131" onMouseOver="hilite(22131)" onMouseOut="lolite()" onClick="logVariable('oldplace')" href="../_variables/oldplace.html">$oldplace</a>,
<a name="l496"><span class="linenum"> 496</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = null) {
<a name="l497"><span class="linenum"> 497</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">    // Make a category in the parent context to move the questions to.</span>
<a name="l500"><span class="linenum"> 500</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>)) {
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a> = new stdClass();
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('parent')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = 0;
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('contextid')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>;
<a name="l504"><span class="linenum"> 504</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('name')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questionsrescuedfrom', 'question', <a class="var it22131" onMouseOver="hilite(22131)" onMouseOut="lolite()" onClick="logVariable('oldplace')" href="../_variables/oldplace.html">$oldplace</a>);
<a name="l505"><span class="linenum"> 505</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('info')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questionsrescuedfrominfo', 'question', <a class="var it22131" onMouseOver="hilite(22131)" onMouseOut="lolite()" onClick="logVariable('oldplace')" href="../_variables/oldplace.html">$oldplace</a>);
<a name="l506"><span class="linenum"> 506</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('sortorder')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = 999;
<a name="l507"><span class="linenum"> 507</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('stamp')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/stamp.html">stamp</a> = <a class="function" onClick="logFunction('make_unique_id_code')" href="../_functions/make_unique_id_code.html" onMouseOver="funcPopup(event,'make_unique_id_code')">make_unique_id_code</a>();
<a name="l508"><span class="linenum"> 508</span></a>          <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('question_categories', <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>);
<a name="l509"><span class="linenum"> 509</span></a>      }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">    // Move any remaining questions to the 'saved' category.</span>
<a name="l512"><span class="linenum"> 512</span></a>      if (!<a class="function" onClick="logFunction('question_move_questions_to_category')" href="../_functions/question_move_questions_to_category.html" onMouseOver="funcPopup(event,'question_move_questions_to_category')">question_move_questions_to_category</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>-&gt;<a onClick="logVariable('id')" class="var it43698" onMouseOver="hilite(43698)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l513"><span class="linenum"> 513</span></a>          return false;
<a name="l514"><span class="linenum"> 514</span></a>      }
<a name="l515"><span class="linenum"> 515</span></a>      return <a class="var it5881" onMouseOver="hilite(5881)" onMouseOut="lolite()" onClick="logVariable('newcategory')" href="../_variables/newcategory.html">$newcategory</a>;
<a name="l516"><span class="linenum"> 516</span></a>  }
<a name="l517"><span class="linenum"> 517</span></a>  
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">/**</span>
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment"> * All question categories and their questions are deleted for this activity.</span>
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment"> *</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment"> * @param object $cm the course module object representing the activity</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment"> * @param boolean $feedback to specify if the process must output a summary of its work</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment"> * @return boolean</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment"> */</span>
<a name="l525"><span class="linenum"> 525</span></a>  function <a class="function" onClick="logFunction('question_delete_activity')" href="../_functions/question_delete_activity.html" onMouseOver="funcPopup(event,'question_delete_activity')">question_delete_activity</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>=true) {
<a name="l526"><span class="linenum"> 526</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l527"><span class="linenum"> 527</span></a>  
<a name="l528"><span class="linenum"> 528</span></a>      <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l529"><span class="linenum"> 529</span></a>      <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a> = <a class="function" onClick="logFunction('question_delete_context')" href="../_functions/question_delete_context.html" onMouseOver="funcPopup(event,'question_delete_context')">question_delete_context</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a>);
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">    // Inform about changes performed if feedback is enabled.</span>
<a name="l531"><span class="linenum"> 531</span></a>      if (<a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../_variables/feedback.html">$feedback</a> &amp;&amp; <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>) {
<a name="l532"><span class="linenum"> 532</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a> = array(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('category', 'question'), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('action'));
<a name="l534"><span class="linenum"> 534</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a> = <a class="var it22129" onMouseOver="hilite(22129)" onMouseOut="lolite()" onClick="logVariable('feedbackdata')" href="../_variables/feedbackdata.html">$feedbackdata</a>;
<a name="l535"><span class="linenum"> 535</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l536"><span class="linenum"> 536</span></a>      }
<a name="l537"><span class="linenum"> 537</span></a>      return true;
<a name="l538"><span class="linenum"> 538</span></a>  }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">/**</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment"> * This function should be considered private to the question bank, it is called from</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment"> * question/editlib.php question/contextmoveq.php and a few similar places to to the</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment"> * work of acutally moving questions and associated data. However, callers of this</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment"> * function also have to do other work, which is why you should not call this method</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment"> * directly from outside the questionbank.</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment"> *</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment"> * @param array $questionids of question ids.</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment"> * @param integer $newcategoryid the id of the category to move to.</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment"> */</span>
<a name="l550"><span class="linenum"> 550</span></a>  function <a class="function" onClick="logFunction('question_move_questions_to_category')" href="../_functions/question_move_questions_to_category.html" onMouseOver="funcPopup(event,'question_move_questions_to_category')">question_move_questions_to_category</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="var it22133" onMouseOver="hilite(22133)" onMouseOut="lolite()" onClick="logVariable('newcategoryid')" href="../_variables/newcategoryid.html">$newcategoryid</a>) {
<a name="l551"><span class="linenum"> 551</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>      <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('question_categories', 'contextid',
<a name="l554"><span class="linenum"> 554</span></a>              array('id' =&gt; <a class="var it22133" onMouseOver="hilite(22133)" onMouseOut="lolite()" onClick="logVariable('newcategoryid')" href="../_variables/newcategoryid.html">$newcategoryid</a>));
<a name="l555"><span class="linenum"> 555</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it22134" onMouseOver="hilite(22134)" onMouseOut="lolite()" onClick="logVariable('questionidcondition')" href="../_variables/questionidcondition.html">$questionidcondition</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>);
<a name="l556"><span class="linenum"> 556</span></a>      <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l557"><span class="linenum"> 557</span></a>              SELECT q.id, q.qtype, qc.contextid
<a name="l558"><span class="linenum"> 558</span></a>                FROM {question} q
<a name="l559"><span class="linenum"> 559</span></a>                JOIN {question_categories} qc ON q.category = qc.id
<a name="l560"><span class="linenum"> 560</span></a>               WHERE  q.id <a class="var it22134" onMouseOver="hilite(22134)" onMouseOut="lolite()" onClick="logVariable('questionidcondition')" href="../_variables/questionidcondition.html">$questionidcondition</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l561"><span class="linenum"> 561</span></a>      foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l562"><span class="linenum"> 562</span></a>          if (<a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a> != <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('contextid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>) {
<a name="l563"><span class="linenum"> 563</span></a>              question_bank::<a class="function" onClick="logFunction('get_qtype')" href="../_functions/get_qtype.html" onMouseOver="funcPopup(event,'get_qtype')">get_qtype</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/qtype.html">qtype</a>)-&gt;<a class="function" onClick="logFunction('move_files')" href="../_functions/move_files.html" onMouseOver="funcPopup(event,'move_files')">move_files</a>(
<a name="l564"><span class="linenum"> 564</span></a>                      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('contextid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>, <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>);
<a name="l565"><span class="linenum"> 565</span></a>          }
<a name="l566"><span class="linenum"> 566</span></a>      }
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">    // Move the questions themselves.</span>
<a name="l569"><span class="linenum"> 569</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field_select')" href="../_functions/set_field_select.html" onMouseOver="funcPopup(event,'set_field_select')">set_field_select</a>('question', 'category', <a class="var it22133" onMouseOver="hilite(22133)" onMouseOut="lolite()" onClick="logVariable('newcategoryid')" href="../_variables/newcategoryid.html">$newcategoryid</a>,
<a name="l570"><span class="linenum"> 570</span></a>              &quot;id <a class="var it22134" onMouseOver="hilite(22134)" onMouseOut="lolite()" onClick="logVariable('questionidcondition')" href="../_variables/questionidcondition.html">$questionidcondition</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">    // Move any subquestions belonging to them.</span>
<a name="l573"><span class="linenum"> 573</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field_select')" href="../_functions/set_field_select.html" onMouseOver="funcPopup(event,'set_field_select')">set_field_select</a>('question', 'category', <a class="var it22133" onMouseOver="hilite(22133)" onMouseOut="lolite()" onClick="logVariable('newcategoryid')" href="../_variables/newcategoryid.html">$newcategoryid</a>,
<a name="l574"><span class="linenum"> 574</span></a>              &quot;parent <a class="var it22134" onMouseOver="hilite(22134)" onMouseOut="lolite()" onClick="logVariable('questionidcondition')" href="../_variables/questionidcondition.html">$questionidcondition</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l575"><span class="linenum"> 575</span></a>  
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">    // Update the contextid for any tag instances that may exist for these questions.</span>
<a name="l577"><span class="linenum"> 577</span></a>      <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('change_items_context')" href="../_functions/change_items_context.html" onMouseOver="funcPopup(event,'change_items_context')">change_items_context</a>('core_question', 'question', <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>);
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">    // TODO Deal with datasets.</span>
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">    // Purge these questions from the cache.</span>
<a name="l582"><span class="linenum"> 582</span></a>      foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l583"><span class="linenum"> 583</span></a>          question_bank::<a class="function" onClick="logFunction('notify_question_edited')" href="../_functions/notify_question_edited.html" onMouseOver="funcPopup(event,'notify_question_edited')">notify_question_edited</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l584"><span class="linenum"> 584</span></a>      }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>      return true;
<a name="l587"><span class="linenum"> 587</span></a>  }
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">/**</span>
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment"> * This function helps move a question cateogry to a new context by moving all</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment"> * the files belonging to all the questions to the new context.</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment"> * Also moves subcategories.</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment"> * @param integer $categoryid the id of the category being moved.</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment"> * @param integer $oldcontextid the old context id.</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment"> * @param integer $newcontextid the new context id.</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment"> */</span>
<a name="l597"><span class="linenum"> 597</span></a>  function <a class="function" onClick="logFunction('question_move_category_to_context')" href="../_functions/question_move_category_to_context.html" onMouseOver="funcPopup(event,'question_move_category_to_context')">question_move_category_to_context</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it5968" onMouseOver="hilite(5968)" onMouseOut="lolite()" onClick="logVariable('oldcontextid')" href="../_variables/oldcontextid.html">$oldcontextid</a>, <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>) {
<a name="l598"><span class="linenum"> 598</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>      <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('question',
<a name="l601"><span class="linenum"> 601</span></a>              array('category' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>), '', 'id,qtype');
<a name="l602"><span class="linenum"> 602</span></a>      foreach (<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a> as <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a> =&gt; <a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>) {
<a name="l603"><span class="linenum"> 603</span></a>          question_bank::<a class="function" onClick="logFunction('get_qtype')" href="../_functions/get_qtype.html" onMouseOver="funcPopup(event,'get_qtype')">get_qtype</a>(<a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>)-&gt;<a class="function" onClick="logFunction('move_files')" href="../_functions/move_files.html" onMouseOver="funcPopup(event,'move_files')">move_files</a>(
<a name="l604"><span class="linenum"> 604</span></a>                  <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>, <a class="var it5968" onMouseOver="hilite(5968)" onMouseOut="lolite()" onClick="logVariable('oldcontextid')" href="../_variables/oldcontextid.html">$oldcontextid</a>, <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>);
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">        // Purge this question from the cache.</span>
<a name="l606"><span class="linenum"> 606</span></a>          question_bank::<a class="function" onClick="logFunction('notify_question_edited')" href="../_functions/notify_question_edited.html" onMouseOver="funcPopup(event,'notify_question_edited')">notify_question_edited</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>);
<a name="l607"><span class="linenum"> 607</span></a>      }
<a name="l608"><span class="linenum"> 608</span></a>  
<a name="l609"><span class="linenum"> 609</span></a>      <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('change_items_context')" href="../_functions/change_items_context.html" onMouseOver="funcPopup(event,'change_items_context')">change_items_context</a>('core_question', 'question',
<a name="l610"><span class="linenum"> 610</span></a>              <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>), <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>);
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>      <a class="var it22135" onMouseOver="hilite(22135)" onMouseOut="lolite()" onClick="logVariable('subcatids')" href="../_variables/subcatids.html">$subcatids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('question_categories',
<a name="l613"><span class="linenum"> 613</span></a>              array('parent' =&gt; <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>), '', 'id,1');
<a name="l614"><span class="linenum"> 614</span></a>      foreach (<a class="var it22135" onMouseOver="hilite(22135)" onMouseOut="lolite()" onClick="logVariable('subcatids')" href="../_variables/subcatids.html">$subcatids</a> as <a class="var it22136" onMouseOver="hilite(22136)" onMouseOut="lolite()" onClick="logVariable('subcatid')" href="../_variables/subcatid.html">$subcatid</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('question_categories', 'contextid', <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>,
<a name="l616"><span class="linenum"> 616</span></a>                  array('id' =&gt; <a class="var it22136" onMouseOver="hilite(22136)" onMouseOut="lolite()" onClick="logVariable('subcatid')" href="../_variables/subcatid.html">$subcatid</a>));
<a name="l617"><span class="linenum"> 617</span></a>          <a class="function" onClick="logFunction('question_move_category_to_context')" href="../_functions/question_move_category_to_context.html" onMouseOver="funcPopup(event,'question_move_category_to_context')">question_move_category_to_context</a>(<a class="var it22136" onMouseOver="hilite(22136)" onMouseOut="lolite()" onClick="logVariable('subcatid')" href="../_variables/subcatid.html">$subcatid</a>, <a class="var it5968" onMouseOver="hilite(5968)" onMouseOut="lolite()" onClick="logVariable('oldcontextid')" href="../_variables/oldcontextid.html">$oldcontextid</a>, <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../_variables/newcontextid.html">$newcontextid</a>);
<a name="l618"><span class="linenum"> 618</span></a>      }
<a name="l619"><span class="linenum"> 619</span></a>  }
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">/**</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment"> * Generate the URL for starting a new preview of a given question with the given options.</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment"> * @param integer $questionid the question to preview.</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment"> * @param string $preferredbehaviour the behaviour to use for the preview.</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment"> * @param float $maxmark the maximum to mark the question out of.</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment"> * @param question_display_options $displayoptions the display options to use.</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment"> * @param int $variant the variant of the question to preview. If null, one will</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment"> *      be picked randomly.</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment"> * @param object $context context to run the preview in (affects things like</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment"> *      filter settings, theme, lang, etc.) Defaults to $PAGE-&gt;context.</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment"> * @return moodle_url the URL.</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment"> */</span>
<a name="l633"><span class="linenum"> 633</span></a>  function <a class="function" onClick="logFunction('question_preview_url')" href="../_functions/question_preview_url.html" onMouseOver="funcPopup(event,'question_preview_url')">question_preview_url</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>, <a class="var it9197" onMouseOver="hilite(9197)" onMouseOut="lolite()" onClick="logVariable('preferredbehaviour')" href="../_variables/preferredbehaviour.html">$preferredbehaviour</a> = null,
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('maxmark')" href="../_variables/maxmark.html">$maxmark</a> = null, <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a> = null, <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('variant')" href="../_variables/variant.html">$variant</a> = null, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = null) {
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('id' =&gt; <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>);
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l639"><span class="linenum"> 639</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l640"><span class="linenum"> 640</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l643"><span class="linenum"> 643</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['cmid'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>;
<a name="l644"><span class="linenum"> 644</span></a>      } else if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l645"><span class="linenum"> 645</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>;
<a name="l646"><span class="linenum"> 646</span></a>      }
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it9197" onMouseOver="hilite(9197)" onMouseOut="lolite()" onClick="logVariable('preferredbehaviour')" href="../_variables/preferredbehaviour.html">$preferredbehaviour</a>)) {
<a name="l649"><span class="linenum"> 649</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['behaviour'] = <a class="var it9197" onMouseOver="hilite(9197)" onMouseOut="lolite()" onClick="logVariable('preferredbehaviour')" href="../_variables/preferredbehaviour.html">$preferredbehaviour</a>;
<a name="l650"><span class="linenum"> 650</span></a>      }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('maxmark')" href="../_variables/maxmark.html">$maxmark</a>)) {
<a name="l653"><span class="linenum"> 653</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['maxmark'] = <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('maxmark')" href="../_variables/maxmark.html">$maxmark</a>;
<a name="l654"><span class="linenum"> 654</span></a>      }
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>)) {
<a name="l657"><span class="linenum"> 657</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['correctness']     = <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('correctness')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/correctness.html">correctness</a>;
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['marks']           = <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('marks')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/marks.html">marks</a>;
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['markdp']          = <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('markdp')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/markdp.html">markdp</a>;
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['feedback']        = (bool) <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('feedback')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/feedback.html">feedback</a>;
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['generalfeedback'] = (bool) <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('generalfeedback')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/generalfeedback.html">generalfeedback</a>;
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['rightanswer']     = (bool) <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('rightanswer')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/rightanswer.html">rightanswer</a>;
<a name="l663"><span class="linenum"> 663</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['history']         = (bool) <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../_variables/displayoptions.html">$displayoptions</a>-&gt;<a onClick="logVariable('history')" class="var it43542" onMouseOver="hilite(43542)" onMouseOut="lolite()" href="../_variables/history.html">history</a>;
<a name="l664"><span class="linenum"> 664</span></a>      }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>      if (<a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('variant')" href="../_variables/variant.html">$variant</a>) {
<a name="l667"><span class="linenum"> 667</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['variant'] = <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('variant')" href="../_variables/variant.html">$variant</a>;
<a name="l668"><span class="linenum"> 668</span></a>      }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>      return <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../question/preview.php.html">/question/preview.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l671"><span class="linenum"> 671</span></a>  }
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">/**</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment"> * @return array that can be passed as $params to the {@link popup_action} constructor.</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment"> */</span>
<a name="l676"><span class="linenum"> 676</span></a>  function <a class="function" onClick="logFunction('question_preview_popup_params')" href="../_functions/question_preview_popup_params.html" onMouseOver="funcPopup(event,'question_preview_popup_params')">question_preview_popup_params</a>() {
<a name="l677"><span class="linenum"> 677</span></a>      return array(
<a name="l678"><span class="linenum"> 678</span></a>          'height' =&gt; 600,
<a name="l679"><span class="linenum"> 679</span></a>          'width' =&gt; 800,
<a name="l680"><span class="linenum"> 680</span></a>      );
<a name="l681"><span class="linenum"> 681</span></a>  }
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">/**</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> * Given a list of ids, load the basic information about a set of questions from</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment"> * the questions table. The $join and $extrafields arguments can be used together</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment"> * to pull in extra data. See, for example, the usage in mod/quiz/attemptlib.php, and</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment"> * read the code below to see how the SQL is assembled. Throws exceptions on error.</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment"> *</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment"> * @param array $questionids array of question ids to load. If null, then all</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment"> * questions matched by $join will be loaded.</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment"> * @param string $extrafields extra SQL code to be added to the query.</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment"> * @param string $join extra SQL code to be added to the query.</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment"> * @param array $extraparams values for any placeholders in $join.</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment"> * You must use named placeholders.</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment"> * @param string $orderby what to order the results by. Optional, default is unspecified order.</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment"> *</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment"> * @return array partially complete question objects. You need to call get_question_options</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment"> * on them before they can be properly used.</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment"> */</span>
<a name="l700"><span class="linenum"> 700</span></a>  function <a class="function" onClick="logFunction('question_preload_questions')" href="../_functions/question_preload_questions.html" onMouseOver="funcPopup(event,'question_preload_questions')">question_preload_questions</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a> = null, <a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a> = '', <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a> = '',
<a name="l701"><span class="linenum"> 701</span></a>          <a class="var it7545" onMouseOver="hilite(7545)" onMouseOut="lolite()" onClick="logVariable('extraparams')" href="../_variables/extraparams.html">$extraparams</a> = array(), <a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a> = '') {
<a name="l702"><span class="linenum"> 702</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>      if (<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a> === null) {
<a name="l705"><span class="linenum"> 705</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = '';
<a name="l706"><span class="linenum"> 706</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l707"><span class="linenum"> 707</span></a>      } else {
<a name="l708"><span class="linenum"> 708</span></a>          if (empty(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>)) {
<a name="l709"><span class="linenum"> 709</span></a>              return array();
<a name="l710"><span class="linenum"> 710</span></a>          }
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it22134" onMouseOver="hilite(22134)" onMouseOut="lolite()" onClick="logVariable('questionidcondition')" href="../_variables/questionidcondition.html">$questionidcondition</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(
<a name="l713"><span class="linenum"> 713</span></a>                  <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'qid0000');
<a name="l714"><span class="linenum"> 714</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = 'WHERE q.id ' . <a class="var it22134" onMouseOver="hilite(22134)" onMouseOut="lolite()" onClick="logVariable('questionidcondition')" href="../_variables/questionidcondition.html">$questionidcondition</a>;
<a name="l715"><span class="linenum"> 715</span></a>      }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>      if (<a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a>) {
<a name="l718"><span class="linenum"> 718</span></a>          <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a> = 'JOIN ' . <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a>;
<a name="l719"><span class="linenum"> 719</span></a>      }
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>      if (<a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a>) {
<a name="l722"><span class="linenum"> 722</span></a>          <a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a> = ', ' . <a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a>;
<a name="l723"><span class="linenum"> 723</span></a>      }
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>      if (<a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a>) {
<a name="l726"><span class="linenum"> 726</span></a>          <a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a> = 'ORDER BY ' . <a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a>;
<a name="l727"><span class="linenum"> 727</span></a>      }
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT q.*, qc.contextid{<a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a>}
<a name="l730"><span class="linenum"> 730</span></a>                FROM {question} q
<a name="l731"><span class="linenum"> 731</span></a>                JOIN {question_categories} qc ON q.category = qc.id
<a name="l732"><span class="linenum"> 732</span></a>                {<a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a>}
<a name="l733"><span class="linenum"> 733</span></a>               {<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>}
<a name="l734"><span class="linenum"> 734</span></a>            {<a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a>}&quot;;
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">    // Load the questions.</span>
<a name="l737"><span class="linenum"> 737</span></a>      <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it7545" onMouseOver="hilite(7545)" onMouseOut="lolite()" onClick="logVariable('extraparams')" href="../_variables/extraparams.html">$extraparams</a> + <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l738"><span class="linenum"> 738</span></a>      foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l739"><span class="linenum"> 739</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('_partiallyloaded')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/_partiallyloaded.html">_partiallyloaded</a> = true;
<a name="l740"><span class="linenum"> 740</span></a>      }
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>      return <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>;
<a name="l743"><span class="linenum"> 743</span></a>  }
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">/**</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> * Load a set of questions, given a list of ids. The $join and $extrafields arguments can be used</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> * together to pull in extra data. See, for example, the usage in mod/quiz/attempt.php, and</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment"> * read the code below to see how the SQL is assembled. Throws exceptions on error.</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment"> *</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment"> * @param array $questionids array of question ids.</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment"> * @param string $extrafields extra SQL code to be added to the query.</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment"> * @param string $join extra SQL code to be added to the query.</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment"> * @param array $extraparams values for any placeholders in $join.</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment"> * You are strongly recommended to use named placeholder.</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment"> *</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment"> * @return array question objects.</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment"> */</span>
<a name="l758"><span class="linenum"> 758</span></a>  function <a class="function" onClick="logFunction('question_load_questions')" href="../_functions/question_load_questions.html" onMouseOver="funcPopup(event,'question_load_questions')">question_load_questions</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a> = '', <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a> = '') {
<a name="l759"><span class="linenum"> 759</span></a>      <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="function" onClick="logFunction('question_preload_questions')" href="../_functions/question_preload_questions.html" onMouseOver="funcPopup(event,'question_preload_questions')">question_preload_questions</a>(<a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../_variables/questionids.html">$questionids</a>, <a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../_variables/extrafields.html">$extrafields</a>, <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a>);
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">    // Load the question type specific information</span>
<a name="l762"><span class="linenum"> 762</span></a>      if (!<a class="function" onClick="logFunction('get_question_options')" href="../_functions/get_question_options.html" onMouseOver="funcPopup(event,'get_question_options')">get_question_options</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>)) {
<a name="l763"><span class="linenum"> 763</span></a>          return 'Could not load the question options';
<a name="l764"><span class="linenum"> 764</span></a>      }
<a name="l765"><span class="linenum"> 765</span></a>  
<a name="l766"><span class="linenum"> 766</span></a>      return <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>;
<a name="l767"><span class="linenum"> 767</span></a>  }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">/**</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment"> * Private function to factor common code out of get_question_options().</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment"> *</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment"> * @param object $question the question to tidy.</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment"> * @param boolean $loadtags load the question tags from the tags table. Optional, default false.</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment"> */</span>
<a name="l775"><span class="linenum"> 775</span></a>  function <a class="function" onClick="logFunction('_tidy_question')" href="../_functions/_tidy_question.html" onMouseOver="funcPopup(event,'_tidy_question')">_tidy_question</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>, <a class="var it22138" onMouseOver="hilite(22138)" onMouseOut="lolite()" onClick="logVariable('loadtags')" href="../_variables/loadtags.html">$loadtags</a> = false) {
<a name="l776"><span class="linenum"> 776</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">    // Load question-type specific fields.</span>
<a name="l779"><span class="linenum"> 779</span></a>      if (!question_bank::<a class="function" onClick="logFunction('is_qtype_installed')" href="../_functions/is_qtype_installed.html" onMouseOver="funcPopup(event,'is_qtype_installed')">is_qtype_installed</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/qtype.html">qtype</a>)) {
<a name="l780"><span class="linenum"> 780</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/questiontext.html">questiontext</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('p', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('warningmissingtype',
<a name="l781"><span class="linenum"> 781</span></a>                  'qtype_missingtype')) . <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/questiontext.html">questiontext</a>;
<a name="l782"><span class="linenum"> 782</span></a>      }
<a name="l783"><span class="linenum"> 783</span></a>      question_bank::<a class="function" onClick="logFunction('get_qtype')" href="../_functions/get_qtype.html" onMouseOver="funcPopup(event,'get_qtype')">get_qtype</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/qtype.html">qtype</a>)-&gt;<a class="function" onClick="logFunction('get_question_options')" href="../_functions/get_question_options.html" onMouseOver="funcPopup(event,'get_question_options')">get_question_options</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>);
<a name="l784"><span class="linenum"> 784</span></a>  
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">    // Convert numeric fields to float. (Prevents these being displayed as 1.0000000.)</span>
<a name="l786"><span class="linenum"> 786</span></a>      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('defaultmark')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/defaultmark.html">defaultmark</a> += 0;
<a name="l787"><span class="linenum"> 787</span></a>      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('penalty')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/penalty.html">penalty</a> += 0;
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>      if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('_partiallyloaded')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/_partiallyloaded.html">_partiallyloaded</a>)) {
<a name="l790"><span class="linenum"> 790</span></a>          unset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('_partiallyloaded')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/_partiallyloaded.html">_partiallyloaded</a>);
<a name="l791"><span class="linenum"> 791</span></a>      }
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>      if (<a class="var it22138" onMouseOver="hilite(22138)" onMouseOut="lolite()" onClick="logVariable('loadtags')" href="../_variables/loadtags.html">$loadtags</a> &amp;&amp; <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('is_enabled')" href="../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>('core_question', 'question')) {
<a name="l794"><span class="linenum"> 794</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('tags')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/tags.html">tags</a> = <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('get_item_tags_array')" href="../_functions/get_item_tags_array.html" onMouseOver="funcPopup(event,'get_item_tags_array')">get_item_tags_array</a>('core_question', 'question', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l795"><span class="linenum"> 795</span></a>      }
<a name="l796"><span class="linenum"> 796</span></a>  }
<a name="l797"><span class="linenum"> 797</span></a>  
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment">/**</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment"> * Updates the question objects with question type specific</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment"> * information by calling {@link get_question_options()}</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment"> *</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment"> * Can be called either with an array of question objects or with a single</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment"> * question object.</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> *</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment"> * @param mixed $questions Either an array of question objects to be updated</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment"> *         or just a single question object</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment"> * @param boolean $loadtags load the question tags from the tags table. Optional, default false.</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment"> * @return bool Indicates success or failure.</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment"> */</span>
<a name="l810"><span class="linenum"> 810</span></a>  function <a class="function" onClick="logFunction('get_question_options')" href="../_functions/get_question_options.html" onMouseOver="funcPopup(event,'get_question_options')">get_question_options</a>(&amp;<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>, <a class="var it22138" onMouseOver="hilite(22138)" onMouseOut="lolite()" onClick="logVariable('loadtags')" href="../_variables/loadtags.html">$loadtags</a> = false) {
<a name="l811"><span class="linenum"> 811</span></a>      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>)) { // deal with an array of questions
<a name="l812"><span class="linenum"> 812</span></a>          foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l813"><span class="linenum"> 813</span></a>              <a class="function" onClick="logFunction('_tidy_question')" href="../_functions/_tidy_question.html" onMouseOver="funcPopup(event,'_tidy_question')">_tidy_question</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>], <a class="var it22138" onMouseOver="hilite(22138)" onMouseOut="lolite()" onClick="logVariable('loadtags')" href="../_variables/loadtags.html">$loadtags</a>);
<a name="l814"><span class="linenum"> 814</span></a>          }
<a name="l815"><span class="linenum"> 815</span></a>      } else { // deal with single question
<a name="l816"><span class="linenum"> 816</span></a>          <a class="function" onClick="logFunction('_tidy_question')" href="../_functions/_tidy_question.html" onMouseOver="funcPopup(event,'_tidy_question')">_tidy_question</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>, <a class="var it22138" onMouseOver="hilite(22138)" onMouseOut="lolite()" onClick="logVariable('loadtags')" href="../_variables/loadtags.html">$loadtags</a>);
<a name="l817"><span class="linenum"> 817</span></a>      }
<a name="l818"><span class="linenum"> 818</span></a>      return true;
<a name="l819"><span class="linenum"> 819</span></a>  }
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">/**</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment"> * Print the icon for the question type</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment"> *</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment"> * @param object $question The question object for which the icon is required.</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment"> *       Only $question-&gt;qtype is used.</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment"> * @return string the HTML for the img tag.</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment"> */</span>
<a name="l828"><span class="linenum"> 828</span></a>  function <a class="function" onClick="logFunction('print_question_icon')" href="../_functions/print_question_icon.html" onMouseOver="funcPopup(event,'print_question_icon')">print_question_icon</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l829"><span class="linenum"> 829</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l830"><span class="linenum"> 830</span></a>      return <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('question', 'bank')-&gt;<a class="function" onClick="logFunction('qtype_icon')" href="../_functions/qtype_icon.html" onMouseOver="funcPopup(event,'qtype_icon')">qtype_icon</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/qtype.html">qtype</a>);
<a name="l831"><span class="linenum"> 831</span></a>  }
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment">/**</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment"> * Creates a stamp that uniquely identifies this version of the question</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment"> *</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> * In future we want this to use a hash of the question data to guarantee that</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> * identical versions have the same version stamp.</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment"> *</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment"> * @param object $question</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment"> * @return string A unique version stamp</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment"> */</span>
<a name="l842"><span class="linenum"> 842</span></a>  function <a class="function" onClick="logFunction('question_hash')" href="../_functions/question_hash.html" onMouseOver="funcPopup(event,'question_hash')">question_hash</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l843"><span class="linenum"> 843</span></a>      return <a class="function" onClick="logFunction('make_unique_id_code')" href="../_functions/make_unique_id_code.html" onMouseOver="funcPopup(event,'make_unique_id_code')">make_unique_id_code</a>();
<a name="l844"><span class="linenum"> 844</span></a>  }
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">/// CATEGORY FUNCTIONS /////////////////////////////////////////////////////////////////</span>
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">/**</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> * returns the categories with their names ordered following parent-child relationships</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment"> * finally it tries to return pending categories (those being orphaned, whose parent is</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment"> * incorrect) to avoid missing any category from original array.</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment"> */</span>
<a name="l853"><span class="linenum"> 853</span></a>  function <a class="function" onClick="logFunction('sort_categories_by_tree')" href="../_functions/sort_categories_by_tree.html" onMouseOver="funcPopup(event,'sort_categories_by_tree')">sort_categories_by_tree</a>(&amp;<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = 0, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a> = 1) {
<a name="l854"><span class="linenum"> 854</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>      <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = array();
<a name="l857"><span class="linenum"> 857</span></a>      <a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>);
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>      foreach (<a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l860"><span class="linenum"> 860</span></a>          if (!isset(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;processed) &amp;&amp; <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;parent == <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l861"><span class="linenum"> 861</span></a>              <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l862"><span class="linenum"> 862</span></a>              <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;processed = true;
<a name="l863"><span class="linenum"> 863</span></a>              <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> + <a class="function" onClick="logFunction('sort_categories_by_tree')" href="../_functions/sort_categories_by_tree.html" onMouseOver="funcPopup(event,'sort_categories_by_tree')">sort_categories_by_tree</a>(
<a name="l864"><span class="linenum"> 864</span></a>                      <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;id, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>+1);
<a name="l865"><span class="linenum"> 865</span></a>          }
<a name="l866"><span class="linenum"> 866</span></a>      }
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">    //If level = 1, we have finished, try to look for non processed categories</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">    // (bad parent) and sort them too</span>
<a name="l869"><span class="linenum"> 869</span></a>      if (<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a> == 1) {
<a name="l870"><span class="linenum"> 870</span></a>          foreach (<a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">            // If not processed and it's a good candidate to start (because its</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">            // parent doesn't exist in the course)</span>
<a name="l873"><span class="linenum"> 873</span></a>              if (!isset(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;processed) &amp;&amp; !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('question_categories',
<a name="l874"><span class="linenum"> 874</span></a>                      array('contextid' =&gt; <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;contextid,
<a name="l875"><span class="linenum"> 875</span></a>                              'id' =&gt; <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;parent))) {
<a name="l876"><span class="linenum"> 876</span></a>                  <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l877"><span class="linenum"> 877</span></a>                  <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;processed = true;
<a name="l878"><span class="linenum"> 878</span></a>                  <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> + <a class="function" onClick="logFunction('sort_categories_by_tree')" href="../_functions/sort_categories_by_tree.html" onMouseOver="funcPopup(event,'sort_categories_by_tree')">sort_categories_by_tree</a>(
<a name="l879"><span class="linenum"> 879</span></a>                          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;id, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a> + 1);
<a name="l880"><span class="linenum"> 880</span></a>              }
<a name="l881"><span class="linenum"> 881</span></a>          }
<a name="l882"><span class="linenum"> 882</span></a>      }
<a name="l883"><span class="linenum"> 883</span></a>      return <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>;
<a name="l884"><span class="linenum"> 884</span></a>  }
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">/**</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment"> * Private method, only for the use of add_indented_names().</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment"> *</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment"> * Recursively adds an indentedname field to each category, starting with the category</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment"> * with id $id, and dealing with that category and all its children, and</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment"> * return a new array, with those categories in the right order.</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> *</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> * @param array $categories an array of categories which has had childids</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment"> *          fields added by flatten_category_tree(). Passed by reference for</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment"> *          performance only. It is not modfied.</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment"> * @param int $id the category to start the indenting process from.</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment"> * @param int $depth the indent depth. Used in recursive calls.</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment"> * @return array a new array of categories, in the right order for the tree.</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment"> */</span>
<a name="l900"><span class="linenum"> 900</span></a>  function <a class="function" onClick="logFunction('flatten_category_tree')" href="../_functions/flatten_category_tree.html" onMouseOver="funcPopup(event,'flatten_category_tree')">flatten_category_tree</a>(&amp;<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a> = -1) {
<a name="l901"><span class="linenum"> 901</span></a>  
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">    // Indent the name of this category.</span>
<a name="l903"><span class="linenum"> 903</span></a>      <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a> = array();
<a name="l904"><span class="linenum"> 904</span></a>      <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>] = <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>];
<a name="l905"><span class="linenum"> 905</span></a>      <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;indentedname = <a class="phpfunction" onClick="logFunction('str_repeat')" href="../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>('&amp;nbsp;&amp;nbsp;&amp;nbsp;', <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>) .
<a name="l906"><span class="linenum"> 906</span></a>              <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;name;
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">    // Recursively indent the children.</span>
<a name="l909"><span class="linenum"> 909</span></a>      foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;childids as <a class="var it21457" onMouseOver="hilite(21457)" onMouseOut="lolite()" onClick="logVariable('childid')" href="../_variables/childid.html">$childid</a>) {
<a name="l910"><span class="linenum"> 910</span></a>          if (<a class="var it21457" onMouseOver="hilite(21457)" onMouseOut="lolite()" onClick="logVariable('childid')" href="../_variables/childid.html">$childid</a> != <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a>) {
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a> = <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a> + <a class="function" onClick="logFunction('flatten_category_tree')" href="../_functions/flatten_category_tree.html" onMouseOver="funcPopup(event,'flatten_category_tree')">flatten_category_tree</a>(
<a name="l912"><span class="linenum"> 912</span></a>                      <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it21457" onMouseOver="hilite(21457)" onMouseOut="lolite()" onClick="logVariable('childid')" href="../_variables/childid.html">$childid</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> + 1, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a>);
<a name="l913"><span class="linenum"> 913</span></a>          }
<a name="l914"><span class="linenum"> 914</span></a>      }
<a name="l915"><span class="linenum"> 915</span></a>  
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">    // Remove the childids array that were temporarily added.</span>
<a name="l917"><span class="linenum"> 917</span></a>      unset(<a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;childids);
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>      return <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a>;
<a name="l920"><span class="linenum"> 920</span></a>  }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">/**</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> * Format categories into an indented list reflecting the tree structure.</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> *</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> * @param array $categories An array of category objects, for example from the.</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> * @return array The formatted list of categories.</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> */</span>
<a name="l928"><span class="linenum"> 928</span></a>  function <a class="function" onClick="logFunction('add_indented_names')" href="../_functions/add_indented_names.html" onMouseOver="funcPopup(event,'add_indented_names')">add_indented_names</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a> = -1) {
<a name="l929"><span class="linenum"> 929</span></a>  
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">    // Add an array to each category to hold the child category ids. This array</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">    // will be removed again by flatten_category_tree(). It should not be used</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">    // outside these two functions.</span>
<a name="l933"><span class="linenum"> 933</span></a>      foreach (<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>) as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;childids = array();
<a name="l935"><span class="linenum"> 935</span></a>      }
<a name="l936"><span class="linenum"> 936</span></a>  
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment">    // Build the tree structure, and record which categories are top-level.</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">    // We have to be careful, because the categories array may include published</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">    // categories from other courses, but not their parents.</span>
<a name="l940"><span class="linenum"> 940</span></a>      <a class="var it22141" onMouseOver="hilite(22141)" onMouseOut="lolite()" onClick="logVariable('toplevelcategoryids')" href="../_variables/toplevelcategoryids.html">$toplevelcategoryids</a> = array();
<a name="l941"><span class="linenum"> 941</span></a>      foreach (<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>) as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l942"><span class="linenum"> 942</span></a>          if (!empty(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;parent) &amp;&amp;
<a name="l943"><span class="linenum"> 943</span></a>                  <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;parent, <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>)) {
<a name="l944"><span class="linenum"> 944</span></a>              <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]-&gt;parent]-&gt;childids[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l945"><span class="linenum"> 945</span></a>          } else {
<a name="l946"><span class="linenum"> 946</span></a>              <a class="var it22141" onMouseOver="hilite(22141)" onMouseOut="lolite()" onClick="logVariable('toplevelcategoryids')" href="../_variables/toplevelcategoryids.html">$toplevelcategoryids</a>[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l947"><span class="linenum"> 947</span></a>          }
<a name="l948"><span class="linenum"> 948</span></a>      }
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">    // Flatten the tree to and add the indents.</span>
<a name="l951"><span class="linenum"> 951</span></a>      <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a> = array();
<a name="l952"><span class="linenum"> 952</span></a>      foreach (<a class="var it22141" onMouseOver="hilite(22141)" onMouseOut="lolite()" onClick="logVariable('toplevelcategoryids')" href="../_variables/toplevelcategoryids.html">$toplevelcategoryids</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l953"><span class="linenum"> 953</span></a>          <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a> = <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a> + <a class="function" onClick="logFunction('flatten_category_tree')" href="../_functions/flatten_category_tree.html" onMouseOver="funcPopup(event,'flatten_category_tree')">flatten_category_tree</a>(
<a name="l954"><span class="linenum"> 954</span></a>                  <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, 0, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a>);
<a name="l955"><span class="linenum"> 955</span></a>      }
<a name="l956"><span class="linenum"> 956</span></a>  
<a name="l957"><span class="linenum"> 957</span></a>      return <a class="var it22140" onMouseOver="hilite(22140)" onMouseOut="lolite()" onClick="logVariable('newcategories')" href="../_variables/newcategories.html">$newcategories</a>;
<a name="l958"><span class="linenum"> 958</span></a>  }
<a name="l959"><span class="linenum"> 959</span></a>  
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">/**</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> * Output a select menu of question categories.</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment"> *</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment"> * Categories from this course and (optionally) published categories from other courses</span>
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment"> * are included. Optionally, only categories the current user may edit can be included.</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment"> *</span>
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment"> * @param integer $courseid the id of the course to get the categories for.</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment"> * @param integer $published if true, include publised categories from other courses.</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> * @param integer $only_editable if true, exclude categories this user is not allowed to edit.</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * @param integer $selected optionally, the id of a category to be selected by</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> *      default in the dropdown.</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> */</span>
<a name="l972"><span class="linenum"> 972</span></a>  function <a class="function" onClick="logFunction('question_category_select_menu')" href="../_functions/question_category_select_menu.html" onMouseOver="funcPopup(event,'question_category_select_menu')">question_category_select_menu</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>, <a class="var it6965" onMouseOver="hilite(6965)" onMouseOut="lolite()" onClick="logVariable('top')" href="../_variables/top.html">$top</a> = false, <a class="var it10900" onMouseOver="hilite(10900)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../_variables/currentcat.html">$currentcat</a> = 0,
<a name="l973"><span class="linenum"> 973</span></a>          <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a> = &quot;&quot;, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a> = -1) {
<a name="l974"><span class="linenum"> 974</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l975"><span class="linenum"> 975</span></a>      <a class="var it22142" onMouseOver="hilite(22142)" onMouseOut="lolite()" onClick="logVariable('categoriesarray')" href="../_variables/categoriesarray.html">$categoriesarray</a> = <a class="function" onClick="logFunction('question_category_options')" href="../_functions/question_category_options.html" onMouseOver="funcPopup(event,'question_category_options')">question_category_options</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>, <a class="var it6965" onMouseOver="hilite(6965)" onMouseOut="lolite()" onClick="logVariable('top')" href="../_variables/top.html">$top</a>, <a class="var it10900" onMouseOver="hilite(10900)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../_variables/currentcat.html">$currentcat</a>,
<a name="l976"><span class="linenum"> 976</span></a>              false, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a>);
<a name="l977"><span class="linenum"> 977</span></a>      if (<a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a>) {
<a name="l978"><span class="linenum"> 978</span></a>          <a class="var it10436" onMouseOver="hilite(10436)" onMouseOut="lolite()" onClick="logVariable('choose')" href="../_variables/choose.html">$choose</a> = '';
<a name="l979"><span class="linenum"> 979</span></a>      } else {
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it10436" onMouseOver="hilite(10436)" onMouseOut="lolite()" onClick="logVariable('choose')" href="../_variables/choose.html">$choose</a> = 'choosedots';
<a name="l981"><span class="linenum"> 981</span></a>      }
<a name="l982"><span class="linenum"> 982</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array();
<a name="l983"><span class="linenum"> 983</span></a>      foreach (<a class="var it22142" onMouseOver="hilite(22142)" onMouseOut="lolite()" onClick="logVariable('categoriesarray')" href="../_variables/categoriesarray.html">$categoriesarray</a> as <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> =&gt; <a class="var it5352" onMouseOver="hilite(5352)" onMouseOut="lolite()" onClick="logVariable('opts')" href="../_variables/opts.html">$opts</a>) {
<a name="l984"><span class="linenum"> 984</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>[] = array(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> =&gt; <a class="var it5352" onMouseOver="hilite(5352)" onMouseOut="lolite()" onClick="logVariable('opts')" href="../_variables/opts.html">$opts</a>);
<a name="l985"><span class="linenum"> 985</span></a>      }
<a name="l986"><span class="linenum"> 986</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('label')" href="../_functions/label.html" onMouseOver="funcPopup(event,'label')">label</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questioncategory', 'core_question'), 'id_movetocategory', false, array('class' =&gt; 'accesshide'));
<a name="l987"><span class="linenum"> 987</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('select')" href="../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, 'category', <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a>, <a class="var it10436" onMouseOver="hilite(10436)" onMouseOut="lolite()" onClick="logVariable('choose')" href="../_variables/choose.html">$choose</a>, array('id' =&gt; 'id_movetocategory'));
<a name="l988"><span class="linenum"> 988</span></a>  }
<a name="l989"><span class="linenum"> 989</span></a>  
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">/**</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment"> * @param integer $contextid a context id.</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment"> * @return object the default question category for that context, or false if none.</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment"> */</span>
<a name="l994"><span class="linenum"> 994</span></a>  function <a class="function" onClick="logFunction('question_get_default_category')" href="../_functions/question_get_default_category.html" onMouseOver="funcPopup(event,'question_get_default_category')">question_get_default_category</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l995"><span class="linenum"> 995</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l996"><span class="linenum"> 996</span></a>      <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question_categories',
<a name="l997"><span class="linenum"> 997</span></a>              array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>), 'id', '*', 0, 1);
<a name="l998"><span class="linenum"> 998</span></a>      if (!empty(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>)) {
<a name="l999"><span class="linenum"> 999</span></a>          return <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l1000"><span class="linenum">1000</span></a>      } else {
<a name="l1001"><span class="linenum">1001</span></a>          return false;
<a name="l1002"><span class="linenum">1002</span></a>      }
<a name="l1003"><span class="linenum">1003</span></a>  }
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">/**</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment"> * Gets the default category in the most specific context.</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment"> * If no categories exist yet then default ones are created in all contexts.</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment"> *</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment"> * @param array $contexts  The context objects for this context and all parent contexts.</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment"> * @return object The default category - the category in the course context</span>
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment"> */</span>
<a name="l1012"><span class="linenum">1012</span></a>  function <a class="function" onClick="logFunction('question_make_default_categories')" href="../_functions/question_make_default_categories.html" onMouseOver="funcPopup(event,'question_make_default_categories')">question_make_default_categories</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>) {
<a name="l1013"><span class="linenum">1013</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1014"><span class="linenum">1014</span></a>      static <a class="var it22143" onMouseOver="hilite(22143)" onMouseOut="lolite()" onClick="logVariable('preferredlevels')" href="../_variables/preferredlevels.html">$preferredlevels</a> = array(
<a name="l1015"><span class="linenum">1015</span></a>          <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a> =&gt; 4,
<a name="l1016"><span class="linenum">1016</span></a>          <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a> =&gt; 3,
<a name="l1017"><span class="linenum">1017</span></a>          <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a> =&gt; 2,
<a name="l1018"><span class="linenum">1018</span></a>          <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> =&gt; 1,
<a name="l1019"><span class="linenum">1019</span></a>      );
<a name="l1020"><span class="linenum">1020</span></a>  
<a name="l1021"><span class="linenum">1021</span></a>      <a class="var it22144" onMouseOver="hilite(22144)" onMouseOut="lolite()" onClick="logVariable('toreturn')" href="../_variables/toreturn.html">$toreturn</a> = null;
<a name="l1022"><span class="linenum">1022</span></a>      <a class="var it22145" onMouseOver="hilite(22145)" onMouseOut="lolite()" onClick="logVariable('preferredness')" href="../_variables/preferredness.html">$preferredness</a> = 0;
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">    // If it already exists, just return it.</span>
<a name="l1024"><span class="linenum">1024</span></a>      foreach (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1025"><span class="linenum">1025</span></a>          if (!<a class="var it2527" onMouseOver="hilite(2527)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../_variables/exists.html">$exists</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>(&quot;question_categories&quot;,
<a name="l1026"><span class="linenum">1026</span></a>                  array('contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">            // Otherwise, we need to make one</span>
<a name="l1028"><span class="linenum">1028</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = new stdClass();
<a name="l1029"><span class="linenum">1029</span></a>              <a class="var it3971" onMouseOver="hilite(3971)" onMouseOut="lolite()" onClick="logVariable('contextname')" href="../_variables/contextname.html">$contextname</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>(false, true);
<a name="l1030"><span class="linenum">1030</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('defaultfor', 'question', <a class="var it3971" onMouseOver="hilite(3971)" onMouseOut="lolite()" onClick="logVariable('contextname')" href="../_variables/contextname.html">$contextname</a>);
<a name="l1031"><span class="linenum">1031</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('info')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('defaultinfofor', 'question', <a class="var it3971" onMouseOver="hilite(3971)" onMouseOut="lolite()" onClick="logVariable('contextname')" href="../_variables/contextname.html">$contextname</a>);
<a name="l1032"><span class="linenum">1032</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1033"><span class="linenum">1033</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = 0;
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">            // By default, all categories get this number, and are sorted alphabetically.</span>
<a name="l1035"><span class="linenum">1035</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = 999;
<a name="l1036"><span class="linenum">1036</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('stamp')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/stamp.html">stamp</a> = <a class="function" onClick="logFunction('make_unique_id_code')" href="../_functions/make_unique_id_code.html" onMouseOver="funcPopup(event,'make_unique_id_code')">make_unique_id_code</a>();
<a name="l1037"><span class="linenum">1037</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('question_categories', <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l1038"><span class="linenum">1038</span></a>          } else {
<a name="l1039"><span class="linenum">1039</span></a>              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="function" onClick="logFunction('question_get_default_category')" href="../_functions/question_get_default_category.html" onMouseOver="funcPopup(event,'question_get_default_category')">question_get_default_category</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>          <a class="var it22146" onMouseOver="hilite(22146)" onMouseOut="lolite()" onClick="logVariable('thispreferredness')" href="../_variables/thispreferredness.html">$thispreferredness</a> = <a class="var it22143" onMouseOver="hilite(22143)" onMouseOut="lolite()" onClick="logVariable('preferredlevels')" href="../_variables/preferredlevels.html">$preferredlevels</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a>];
<a name="l1042"><span class="linenum">1042</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/question:usemine', 'moodle/question:useall'), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1043"><span class="linenum">1043</span></a>              <a class="var it22146" onMouseOver="hilite(22146)" onMouseOut="lolite()" onClick="logVariable('thispreferredness')" href="../_variables/thispreferredness.html">$thispreferredness</a> += 10;
<a name="l1044"><span class="linenum">1044</span></a>          }
<a name="l1045"><span class="linenum">1045</span></a>          if (<a class="var it22146" onMouseOver="hilite(22146)" onMouseOut="lolite()" onClick="logVariable('thispreferredness')" href="../_variables/thispreferredness.html">$thispreferredness</a> &gt; <a class="var it22145" onMouseOver="hilite(22145)" onMouseOut="lolite()" onClick="logVariable('preferredness')" href="../_variables/preferredness.html">$preferredness</a>) {
<a name="l1046"><span class="linenum">1046</span></a>              <a class="var it22144" onMouseOver="hilite(22144)" onMouseOut="lolite()" onClick="logVariable('toreturn')" href="../_variables/toreturn.html">$toreturn</a> = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l1047"><span class="linenum">1047</span></a>              <a class="var it22145" onMouseOver="hilite(22145)" onMouseOut="lolite()" onClick="logVariable('preferredness')" href="../_variables/preferredness.html">$preferredness</a> = <a class="var it22146" onMouseOver="hilite(22146)" onMouseOut="lolite()" onClick="logVariable('thispreferredness')" href="../_variables/thispreferredness.html">$thispreferredness</a>;
<a name="l1048"><span class="linenum">1048</span></a>          }
<a name="l1049"><span class="linenum">1049</span></a>      }
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it22144" onMouseOver="hilite(22144)" onMouseOut="lolite()" onClick="logVariable('toreturn')" href="../_variables/toreturn.html">$toreturn</a>)) {
<a name="l1052"><span class="linenum">1052</span></a>          <a class="var it22144" onMouseOver="hilite(22144)" onMouseOut="lolite()" onClick="logVariable('toreturn')" href="../_variables/toreturn.html">$toreturn</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it22144" onMouseOver="hilite(22144)" onMouseOut="lolite()" onClick="logVariable('toreturn')" href="../_variables/toreturn.html">$toreturn</a>);
<a name="l1053"><span class="linenum">1053</span></a>      }
<a name="l1054"><span class="linenum">1054</span></a>      return <a class="var it22144" onMouseOver="hilite(22144)" onMouseOut="lolite()" onClick="logVariable('toreturn')" href="../_variables/toreturn.html">$toreturn</a>;
<a name="l1055"><span class="linenum">1055</span></a>  }
<a name="l1056"><span class="linenum">1056</span></a>  
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">/**</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment"> * Get all the category objects, including a count of the number of questions in that category,</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment"> * for all the categories in the lists $contexts.</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment"> *</span>
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment"> * @param mixed $contexts either a single contextid, or a comma-separated list of context ids.</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment"> * @param string $sortorder used as the ORDER BY clause in the select statement.</span>
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment"> * @return array of category objects.</span>
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment"> */</span>
<a name="l1065"><span class="linenum">1065</span></a>  function <a class="function" onClick="logFunction('get_categories_for_contexts')" href="../_functions/get_categories_for_contexts.html" onMouseOver="funcPopup(event,'get_categories_for_contexts')">get_categories_for_contexts</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = 'parent, sortorder, name ASC') {
<a name="l1066"><span class="linenum">1066</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1067"><span class="linenum">1067</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l1068"><span class="linenum">1068</span></a>              SELECT c.*, (SELECT <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(1) FROM {question} q
<a name="l1069"><span class="linenum">1069</span></a>                          WHERE c.id = q.category AND q.hidden='0' AND q.parent='0') AS questioncount
<a name="l1070"><span class="linenum">1070</span></a>                FROM {question_categories} c
<a name="l1071"><span class="linenum">1071</span></a>               WHERE c.contextid IN (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>)
<a name="l1072"><span class="linenum">1072</span></a>            ORDER BY <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>&quot;);
<a name="l1073"><span class="linenum">1073</span></a>  }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment">/**</span>
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment"> * Output an array of question categories.</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment"> */</span>
<a name="l1078"><span class="linenum">1078</span></a>  function <a class="function" onClick="logFunction('question_category_options')" href="../_functions/question_category_options.html" onMouseOver="funcPopup(event,'question_category_options')">question_category_options</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>, <a class="var it6965" onMouseOver="hilite(6965)" onMouseOut="lolite()" onClick="logVariable('top')" href="../_variables/top.html">$top</a> = false, <a class="var it10900" onMouseOver="hilite(10900)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../_variables/currentcat.html">$currentcat</a> = 0,
<a name="l1079"><span class="linenum">1079</span></a>          <a class="var it22147" onMouseOver="hilite(22147)" onMouseOut="lolite()" onClick="logVariable('popupform')" href="../_variables/popupform.html">$popupform</a> = false, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a> = -1) {
<a name="l1080"><span class="linenum">1080</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1081"><span class="linenum">1081</span></a>      <a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a> = array();
<a name="l1082"><span class="linenum">1082</span></a>      foreach (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1083"><span class="linenum">1083</span></a>          <a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a>[] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1084"><span class="linenum">1084</span></a>      }
<a name="l1085"><span class="linenum">1085</span></a>      <a class="var it22149" onMouseOver="hilite(22149)" onMouseOut="lolite()" onClick="logVariable('contextslist')" href="../_variables/contextslist.html">$contextslist</a> = <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(<a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a>, ', ');
<a name="l1086"><span class="linenum">1086</span></a>  
<a name="l1087"><span class="linenum">1087</span></a>      <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="function" onClick="logFunction('get_categories_for_contexts')" href="../_functions/get_categories_for_contexts.html" onMouseOver="funcPopup(event,'get_categories_for_contexts')">get_categories_for_contexts</a>(<a class="var it22149" onMouseOver="hilite(22149)" onMouseOut="lolite()" onClick="logVariable('contextslist')" href="../_variables/contextslist.html">$contextslist</a>);
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>      <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="function" onClick="logFunction('question_add_context_in_key')" href="../_functions/question_add_context_in_key.html" onMouseOver="funcPopup(event,'question_add_context_in_key')">question_add_context_in_key</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>);
<a name="l1090"><span class="linenum">1090</span></a>  
<a name="l1091"><span class="linenum">1091</span></a>      if (<a class="var it6965" onMouseOver="hilite(6965)" onMouseOut="lolite()" onClick="logVariable('top')" href="../_variables/top.html">$top</a>) {
<a name="l1092"><span class="linenum">1092</span></a>          <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="function" onClick="logFunction('question_add_tops')" href="../_functions/question_add_tops.html" onMouseOver="funcPopup(event,'question_add_tops')">question_add_tops</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a>);
<a name="l1093"><span class="linenum">1093</span></a>      }
<a name="l1094"><span class="linenum">1094</span></a>      <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="function" onClick="logFunction('add_indented_names')" href="../_functions/add_indented_names.html" onMouseOver="funcPopup(event,'add_indented_names')">add_indented_names</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it22139" onMouseOver="hilite(22139)" onMouseOut="lolite()" onClick="logVariable('nochildrenof')" href="../_variables/nochildrenof.html">$nochildrenof</a>);
<a name="l1095"><span class="linenum">1095</span></a>  
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">    // sort cats out into different contexts</span>
<a name="l1097"><span class="linenum">1097</span></a>      <a class="var it22142" onMouseOver="hilite(22142)" onMouseOut="lolite()" onClick="logVariable('categoriesarray')" href="../_variables/categoriesarray.html">$categoriesarray</a> = array();
<a name="l1098"><span class="linenum">1098</span></a>      foreach (<a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a> as <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l1099"><span class="linenum">1099</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>);
<a name="l1100"><span class="linenum">1100</span></a>          <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>(true, true);
<a name="l1101"><span class="linenum">1101</span></a>          foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1102"><span class="linenum">1102</span></a>              if (<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> == <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l1103"><span class="linenum">1103</span></a>                  <a class="var it2797" onMouseOver="hilite(2797)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../_variables/cid.html">$cid</a> = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1104"><span class="linenum">1104</span></a>                  if (<a class="var it10900" onMouseOver="hilite(10900)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../_variables/currentcat.html">$currentcat</a> != <a class="var it2797" onMouseOver="hilite(2797)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../_variables/cid.html">$cid</a> || <a class="var it10900" onMouseOver="hilite(10900)" onMouseOut="lolite()" onClick="logVariable('currentcat')" href="../_variables/currentcat.html">$currentcat</a> == 0) {
<a name="l1105"><span class="linenum">1105</span></a>                      <a class="var it22150" onMouseOver="hilite(22150)" onMouseOut="lolite()" onClick="logVariable('countstring')" href="../_variables/countstring.html">$countstring</a> = !empty(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('questioncount')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/questioncount.html">questioncount</a>) ?
<a name="l1106"><span class="linenum">1106</span></a>                              &quot; (<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('questioncount')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/questioncount.html">questioncount</a>)&quot; : '';
<a name="l1107"><span class="linenum">1107</span></a>                      <a class="var it22142" onMouseOver="hilite(22142)" onMouseOut="lolite()" onClick="logVariable('categoriesarray')" href="../_variables/categoriesarray.html">$categoriesarray</a>[<a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a>][<a class="var it2797" onMouseOver="hilite(2797)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../_variables/cid.html">$cid</a>] =
<a name="l1108"><span class="linenum">1108</span></a>                              <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('indentedname')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/indentedname.html">indentedname</a>, true,
<a name="l1109"><span class="linenum">1109</span></a>                                  array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) . <a class="var it22150" onMouseOver="hilite(22150)" onMouseOut="lolite()" onClick="logVariable('countstring')" href="../_variables/countstring.html">$countstring</a>;
<a name="l1110"><span class="linenum">1110</span></a>                  }
<a name="l1111"><span class="linenum">1111</span></a>              }
<a name="l1112"><span class="linenum">1112</span></a>          }
<a name="l1113"><span class="linenum">1113</span></a>      }
<a name="l1114"><span class="linenum">1114</span></a>      if (<a class="var it22147" onMouseOver="hilite(22147)" onMouseOut="lolite()" onClick="logVariable('popupform')" href="../_variables/popupform.html">$popupform</a>) {
<a name="l1115"><span class="linenum">1115</span></a>          <a class="var it22152" onMouseOver="hilite(22152)" onMouseOut="lolite()" onClick="logVariable('popupcats')" href="../_variables/popupcats.html">$popupcats</a> = array();
<a name="l1116"><span class="linenum">1116</span></a>          foreach (<a class="var it22142" onMouseOver="hilite(22142)" onMouseOut="lolite()" onClick="logVariable('categoriesarray')" href="../_variables/categoriesarray.html">$categoriesarray</a> as <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> =&gt; <a class="var it22153" onMouseOver="hilite(22153)" onMouseOut="lolite()" onClick="logVariable('optgroup')" href="../_variables/optgroup.html">$optgroup</a>) {
<a name="l1117"><span class="linenum">1117</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = array();
<a name="l1118"><span class="linenum">1118</span></a>              foreach (<a class="var it22153" onMouseOver="hilite(22153)" onMouseOut="lolite()" onClick="logVariable('optgroup')" href="../_variables/optgroup.html">$optgroup</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1119"><span class="linenum">1119</span></a>                  <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>, '', <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l1120"><span class="linenum">1120</span></a>                  <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1121"><span class="linenum">1121</span></a>              }
<a name="l1122"><span class="linenum">1122</span></a>              <a class="var it22152" onMouseOver="hilite(22152)" onMouseOut="lolite()" onClick="logVariable('popupcats')" href="../_variables/popupcats.html">$popupcats</a>[] = array(<a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> =&gt; <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l1123"><span class="linenum">1123</span></a>          }
<a name="l1124"><span class="linenum">1124</span></a>          return <a class="var it22152" onMouseOver="hilite(22152)" onMouseOut="lolite()" onClick="logVariable('popupcats')" href="../_variables/popupcats.html">$popupcats</a>;
<a name="l1125"><span class="linenum">1125</span></a>      } else {
<a name="l1126"><span class="linenum">1126</span></a>          return <a class="var it22142" onMouseOver="hilite(22142)" onMouseOut="lolite()" onClick="logVariable('categoriesarray')" href="../_variables/categoriesarray.html">$categoriesarray</a>;
<a name="l1127"><span class="linenum">1127</span></a>      }
<a name="l1128"><span class="linenum">1128</span></a>  }
<a name="l1129"><span class="linenum">1129</span></a>  
<a name="l1130"><span class="linenum">1130</span></a>  function <a class="function" onClick="logFunction('question_add_context_in_key')" href="../_functions/question_add_context_in_key.html" onMouseOver="funcPopup(event,'question_add_context_in_key')">question_add_context_in_key</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>) {
<a name="l1131"><span class="linenum">1131</span></a>      <a class="var it22154" onMouseOver="hilite(22154)" onMouseOut="lolite()" onClick="logVariable('newcatarray')" href="../_variables/newcatarray.html">$newcatarray</a> = array();
<a name="l1132"><span class="linenum">1132</span></a>      foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1133"><span class="linenum">1133</span></a>          <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = &quot;<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>,<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>&quot;;
<a name="l1134"><span class="linenum">1134</span></a>          <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = &quot;<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>&quot;;
<a name="l1135"><span class="linenum">1135</span></a>          <a class="var it22154" onMouseOver="hilite(22154)" onMouseOut="lolite()" onClick="logVariable('newcatarray')" href="../_variables/newcatarray.html">$newcatarray</a>[&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>,<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>&quot;] = <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l1136"><span class="linenum">1136</span></a>      }
<a name="l1137"><span class="linenum">1137</span></a>      return <a class="var it22154" onMouseOver="hilite(22154)" onMouseOut="lolite()" onClick="logVariable('newcatarray')" href="../_variables/newcatarray.html">$newcatarray</a>;
<a name="l1138"><span class="linenum">1138</span></a>  }
<a name="l1139"><span class="linenum">1139</span></a>  
<a name="l1140"><span class="linenum">1140</span></a>  function <a class="function" onClick="logFunction('question_add_tops')" href="../_functions/question_add_tops.html" onMouseOver="funcPopup(event,'question_add_tops')">question_add_tops</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>, <a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a>) {
<a name="l1141"><span class="linenum">1141</span></a>      <a class="var it22155" onMouseOver="hilite(22155)" onMouseOut="lolite()" onClick="logVariable('topcats')" href="../_variables/topcats.html">$topcats</a> = array();
<a name="l1142"><span class="linenum">1142</span></a>      foreach (<a class="var it22148" onMouseOver="hilite(22148)" onMouseOut="lolite()" onClick="logVariable('pcontexts')" href="../_variables/pcontexts.html">$pcontexts</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1143"><span class="linenum">1143</span></a>          <a class="var it16195" onMouseOver="hilite(16195)" onMouseOut="lolite()" onClick="logVariable('newcat')" href="../_variables/newcat.html">$newcat</a> = new stdClass();
<a name="l1144"><span class="linenum">1144</span></a>          <a class="var it16195" onMouseOver="hilite(16195)" onMouseOut="lolite()" onClick="logVariable('newcat')" href="../_variables/newcat.html">$newcat</a>-&gt;<a onClick="logVariable('id')" class="var it44346" onMouseOver="hilite(44346)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = &quot;0,<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>&quot;;
<a name="l1145"><span class="linenum">1145</span></a>          <a class="var it16195" onMouseOver="hilite(16195)" onMouseOut="lolite()" onClick="logVariable('newcat')" href="../_variables/newcat.html">$newcat</a>-&gt;<a onClick="logVariable('name')" class="var it44346" onMouseOver="hilite(44346)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('top');
<a name="l1146"><span class="linenum">1146</span></a>          <a class="var it16195" onMouseOver="hilite(16195)" onMouseOut="lolite()" onClick="logVariable('newcat')" href="../_variables/newcat.html">$newcat</a>-&gt;<a onClick="logVariable('parent')" class="var it44346" onMouseOver="hilite(44346)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = -1;
<a name="l1147"><span class="linenum">1147</span></a>          <a class="var it16195" onMouseOver="hilite(16195)" onMouseOut="lolite()" onClick="logVariable('newcat')" href="../_variables/newcat.html">$newcat</a>-&gt;<a onClick="logVariable('contextid')" class="var it44346" onMouseOver="hilite(44346)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l1148"><span class="linenum">1148</span></a>          <a class="var it22155" onMouseOver="hilite(22155)" onMouseOut="lolite()" onClick="logVariable('topcats')" href="../_variables/topcats.html">$topcats</a>[&quot;0,<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>&quot;] = <a class="var it16195" onMouseOver="hilite(16195)" onMouseOut="lolite()" onClick="logVariable('newcat')" href="../_variables/newcat.html">$newcat</a>;
<a name="l1149"><span class="linenum">1149</span></a>      }
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment">    //put topcats in at beginning of array - they'll be sorted into different contexts later.</span>
<a name="l1151"><span class="linenum">1151</span></a>      return <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it22155" onMouseOver="hilite(22155)" onMouseOut="lolite()" onClick="logVariable('topcats')" href="../_variables/topcats.html">$topcats</a>, <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>);
<a name="l1152"><span class="linenum">1152</span></a>  }
<a name="l1153"><span class="linenum">1153</span></a>  
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">/**</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment"> * @return array of question category ids of the category and all subcategories.</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment"> */</span>
<a name="l1157"><span class="linenum">1157</span></a>  function <a class="function" onClick="logFunction('question_categorylist')" href="../_functions/question_categorylist.html" onMouseOver="funcPopup(event,'question_categorylist')">question_categorylist</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l1158"><span class="linenum">1158</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1159"><span class="linenum">1159</span></a>  
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">    // final list of category IDs</span>
<a name="l1161"><span class="linenum">1161</span></a>      <a class="var it22156" onMouseOver="hilite(22156)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a> = array();
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment">    // a list of category IDs to check for any sub-categories</span>
<a name="l1164"><span class="linenum">1164</span></a>      <a class="var it3663" onMouseOver="hilite(3663)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a> = array(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>);
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>      while (<a class="var it3663" onMouseOver="hilite(3663)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a>) {
<a name="l1167"><span class="linenum">1167</span></a>          foreach (<a class="var it3663" onMouseOver="hilite(3663)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a> as <a class="var it15766" onMouseOver="hilite(15766)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>) {
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment">            // if anything from the temporary list was added already, then we have a loop</span>
<a name="l1169"><span class="linenum">1169</span></a>              if (isset(<a class="var it22156" onMouseOver="hilite(22156)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a>[<a class="var it15766" onMouseOver="hilite(15766)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>])) {
<a name="l1170"><span class="linenum">1170</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Category id=<a class="var it15766" onMouseOver="hilite(15766)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a> is already on the list - loop of categories detected.&quot;);
<a name="l1171"><span class="linenum">1171</span></a>              }
<a name="l1172"><span class="linenum">1172</span></a>              <a class="var it22156" onMouseOver="hilite(22156)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a>[<a class="var it15766" onMouseOver="hilite(15766)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>] = <a class="var it15766" onMouseOver="hilite(15766)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>;
<a name="l1173"><span class="linenum">1173</span></a>          }
<a name="l1174"><span class="linenum">1174</span></a>  
<a name="l1175"><span class="linenum">1175</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a> (<a class="var it1810" onMouseOver="hilite(1810)" onMouseOut="lolite()" onClick="logVariable('in')" href="../_variables/in.html">$in</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it3663" onMouseOver="hilite(3663)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a>);
<a name="l1176"><span class="linenum">1176</span></a>  
<a name="l1177"><span class="linenum">1177</span></a>          <a class="var it3663" onMouseOver="hilite(3663)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select_menu')" href="../_functions/get_records_select_menu.html" onMouseOver="funcPopup(event,'get_records_select_menu')">get_records_select_menu</a>('question_categories',
<a name="l1178"><span class="linenum">1178</span></a>                  &quot;parent <a class="var it1810" onMouseOver="hilite(1810)" onMouseOut="lolite()" onClick="logVariable('in')" href="../_variables/in.html">$in</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, NULL, 'id,id AS id2');
<a name="l1179"><span class="linenum">1179</span></a>      }
<a name="l1180"><span class="linenum">1180</span></a>  
<a name="l1181"><span class="linenum">1181</span></a>      return <a class="var it22156" onMouseOver="hilite(22156)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a>;
<a name="l1182"><span class="linenum">1182</span></a>  }
<a name="l1183"><span class="linenum">1183</span></a>  
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment">//===========================</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">// Import/Export Functions</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment">//===========================</span>
<a name="l1187"><span class="linenum">1187</span></a>  
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment">/**</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment"> * Get list of available import or export formats</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment"> * @param string $type 'import' if import list, otherwise export list assumed</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment"> * @return array sorted list of import/export formats available</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment"> */</span>
<a name="l1193"><span class="linenum">1193</span></a>  function <a class="function" onClick="logFunction('get_import_export_formats')" href="../_functions/get_import_export_formats.html" onMouseOver="funcPopup(event,'get_import_export_formats')">get_import_export_formats</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l1194"><span class="linenum">1194</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1195"><span class="linenum">1195</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/format.php.html">/question/format.php</a>');
<a name="l1196"><span class="linenum">1196</span></a>  
<a name="l1197"><span class="linenum">1197</span></a>      <a class="var it22157" onMouseOver="hilite(22157)" onMouseOut="lolite()" onClick="logVariable('formatclasses')" href="../_variables/formatclasses.html">$formatclasses</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list_with_class')" href="../_functions/get_plugin_list_with_class.html" onMouseOver="funcPopup(event,'get_plugin_list_with_class')">get_plugin_list_with_class</a>('qformat', '', 'format.php');
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>      <a class="var it22158" onMouseOver="hilite(22158)" onMouseOut="lolite()" onClick="logVariable('fileformatname')" href="../_variables/fileformatname.html">$fileformatname</a> = array();
<a name="l1200"><span class="linenum">1200</span></a>      foreach (<a class="var it22157" onMouseOver="hilite(22157)" onMouseOut="lolite()" onClick="logVariable('formatclasses')" href="../_variables/formatclasses.html">$formatclasses</a> as <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> =&gt; <a class="var it10659" onMouseOver="hilite(10659)" onMouseOut="lolite()" onClick="logVariable('formatclass')" href="../_variables/formatclass.html">$formatclass</a>) {
<a name="l1201"><span class="linenum">1201</span></a>  
<a name="l1202"><span class="linenum">1202</span></a>          <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = new <a class="var it10659" onMouseOver="hilite(10659)" onMouseOut="lolite()" onClick="logVariable('formatclass')" href="../_variables/formatclass.html">$formatclass</a>();
<a name="l1203"><span class="linenum">1203</span></a>          if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == 'import') {
<a name="l1204"><span class="linenum">1204</span></a>              <a class="var it22159" onMouseOver="hilite(22159)" onMouseOut="lolite()" onClick="logVariable('provided')" href="../_variables/provided.html">$provided</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>-&gt;<a class="function" onClick="logFunction('provide_import')" href="../_functions/provide_import.html" onMouseOver="funcPopup(event,'provide_import')">provide_import</a>();
<a name="l1205"><span class="linenum">1205</span></a>          } else {
<a name="l1206"><span class="linenum">1206</span></a>              <a class="var it22159" onMouseOver="hilite(22159)" onMouseOut="lolite()" onClick="logVariable('provided')" href="../_variables/provided.html">$provided</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>-&gt;<a class="function" onClick="logFunction('provide_export')" href="../_functions/provide_export.html" onMouseOver="funcPopup(event,'provide_export')">provide_export</a>();
<a name="l1207"><span class="linenum">1207</span></a>          }
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>          if (<a class="var it22159" onMouseOver="hilite(22159)" onMouseOut="lolite()" onClick="logVariable('provided')" href="../_variables/provided.html">$provided</a>) {
<a name="l1210"><span class="linenum">1210</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>, <a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 2);
<a name="l1211"><span class="linenum">1211</span></a>              <a class="var it22161" onMouseOver="hilite(22161)" onMouseOut="lolite()" onClick="logVariable('fileformatnames')" href="../_variables/fileformatnames.html">$fileformatnames</a>[<a class="var it22160" onMouseOver="hilite(22160)" onMouseOut="lolite()" onClick="logVariable('fileformat')" href="../_variables/fileformat.html">$fileformat</a>] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l1212"><span class="linenum">1212</span></a>          }
<a name="l1213"><span class="linenum">1213</span></a>      }
<a name="l1214"><span class="linenum">1214</span></a>  
<a name="l1215"><span class="linenum">1215</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it22161" onMouseOver="hilite(22161)" onMouseOut="lolite()" onClick="logVariable('fileformatnames')" href="../_variables/fileformatnames.html">$fileformatnames</a>);
<a name="l1216"><span class="linenum">1216</span></a>      return <a class="var it22161" onMouseOver="hilite(22161)" onMouseOut="lolite()" onClick="logVariable('fileformatnames')" href="../_variables/fileformatnames.html">$fileformatnames</a>;
<a name="l1217"><span class="linenum">1217</span></a>  }
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>  
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment">/**</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> * Create a reasonable default file name for exporting questions from a particular</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment"> * category.</span>
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment"> * @param object $course the course the questions are in.</span>
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment"> * @param object $category the question category.</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment"> * @return string the filename.</span>
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment"> */</span>
<a name="l1227"><span class="linenum">1227</span></a>  function <a class="function" onClick="logFunction('question_default_export_filename')" href="../_functions/question_default_export_filename.html" onMouseOver="funcPopup(event,'question_default_export_filename')">question_default_export_filename</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment">    // We build a string that is an appropriate name (questions) from the lang pack,</span>
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment">    // then the corse shortname, then the question category name, then a timestamp.</span>
<a name="l1230"><span class="linenum">1230</span></a>  
<a name="l1231"><span class="linenum">1231</span></a>      <a class="var it1751" onMouseOver="hilite(1751)" onMouseOut="lolite()" onClick="logVariable('base')" href="../_variables/base.html">$base</a> = <a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exportfilename', 'question'));
<a name="l1232"><span class="linenum">1232</span></a>  
<a name="l1233"><span class="linenum">1233</span></a>      <a class="var it4188" onMouseOver="hilite(4188)" onMouseOut="lolite()" onClick="logVariable('dateformat')" href="../_variables/dateformat.html">$dateformat</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exportnameformat', 'question'));
<a name="l1234"><span class="linenum">1234</span></a>      <a class="var it1769" onMouseOver="hilite(1769)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../_variables/timestamp.html">$timestamp</a> = <a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it4188" onMouseOver="hilite(4188)" onMouseOut="lolite()" onClick="logVariable('dateformat')" href="../_variables/dateformat.html">$dateformat</a>, 99, false));
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>      <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> = <a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>);
<a name="l1237"><span class="linenum">1237</span></a>      if (<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> == '' || <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> == '_' ) {
<a name="l1238"><span class="linenum">1238</span></a>          <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1239"><span class="linenum">1239</span></a>      }
<a name="l1240"><span class="linenum">1240</span></a>  
<a name="l1241"><span class="linenum">1241</span></a>      <a class="var it906" onMouseOver="hilite(906)" onMouseOut="lolite()" onClick="logVariable('categoryname')" href="../_variables/categoryname.html">$categoryname</a> = <a class="function" onClick="logFunction('clean_filename')" href="../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>      return &quot;{<a class="var it1751" onMouseOver="hilite(1751)" onMouseOut="lolite()" onClick="logVariable('base')" href="../_variables/base.html">$base</a>}-{<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>}-{<a class="var it906" onMouseOver="hilite(906)" onMouseOut="lolite()" onClick="logVariable('categoryname')" href="../_variables/categoryname.html">$categoryname</a>}-{<a class="var it1769" onMouseOver="hilite(1769)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../_variables/timestamp.html">$timestamp</a>}&quot;;
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>      return <a class="var it22162" onMouseOver="hilite(22162)" onMouseOut="lolite()" onClick="logVariable('export_name')" href="../_variables/export_name.html">$export_name</a>;
<a name="l1246"><span class="linenum">1246</span></a>  }
<a name="l1247"><span class="linenum">1247</span></a>  
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">/**</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment"> * Converts contextlevels to strings and back to help with reading/writing contexts</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment"> * to/from import/export files.</span>
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment"> *</span>
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment"> */</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('context_to_string_translator')" href="../_classes/context_to_string_translator.html" onMouseOver="classPopup(event,'context_to_string_translator')">context_to_string_translator</a>{
<a name="l1256"><span class="linenum">1256</span></a>      <span class="comment">/**</span>
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment">     * @var array used to translate between contextids and strings for this context.</span>
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment">     */</span>
<a name="l1259"><span class="linenum">1259</span></a>      protected <a class="var it22163" onMouseOver="hilite(22163)" onMouseOut="lolite()" onClick="logVariable('contexttostringarray')" href="../_variables/contexttostringarray.html">$contexttostringarray</a> = array();
<a name="l1260"><span class="linenum">1260</span></a>  
<a name="l1261"><span class="linenum">1261</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>) {
<a name="l1262"><span class="linenum">1262</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_context_to_string_array')" href="../_functions/generate_context_to_string_array.html" onMouseOver="funcPopup(event,'generate_context_to_string_array')">generate_context_to_string_array</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>);
<a name="l1263"><span class="linenum">1263</span></a>      }
<a name="l1264"><span class="linenum">1264</span></a>  
<a name="l1265"><span class="linenum">1265</span></a>      public function <a class="function" onClick="logFunction('context_to_string')" href="../_functions/context_to_string.html" onMouseOver="funcPopup(event,'context_to_string')">context_to_string</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l1266"><span class="linenum">1266</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contexttostringarray')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contexttostringarray.html">contexttostringarray</a>[<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>];
<a name="l1267"><span class="linenum">1267</span></a>      }
<a name="l1268"><span class="linenum">1268</span></a>  
<a name="l1269"><span class="linenum">1269</span></a>      public function <a class="function" onClick="logFunction('string_to_context')" href="../_functions/string_to_context.html" onMouseOver="funcPopup(event,'string_to_context')">string_to_context</a>(<a class="var it3971" onMouseOver="hilite(3971)" onMouseOut="lolite()" onClick="logVariable('contextname')" href="../_variables/contextname.html">$contextname</a>) {
<a name="l1270"><span class="linenum">1270</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it3971" onMouseOver="hilite(3971)" onMouseOut="lolite()" onClick="logVariable('contextname')" href="../_variables/contextname.html">$contextname</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contexttostringarray')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contexttostringarray.html">contexttostringarray</a>);
<a name="l1271"><span class="linenum">1271</span></a>          return <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>;
<a name="l1272"><span class="linenum">1272</span></a>      }
<a name="l1273"><span class="linenum">1273</span></a>  
<a name="l1274"><span class="linenum">1274</span></a>      protected function <a class="function" onClick="logFunction('generate_context_to_string_array')" href="../_functions/generate_context_to_string_array.html" onMouseOver="funcPopup(event,'generate_context_to_string_array')">generate_context_to_string_array</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>) {
<a name="l1275"><span class="linenum">1275</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contexttostringarray')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contexttostringarray.html">contexttostringarray</a>) {
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it22164" onMouseOver="hilite(22164)" onMouseOut="lolite()" onClick="logVariable('catno')" href="../_variables/catno.html">$catno</a> = 1;
<a name="l1277"><span class="linenum">1277</span></a>              foreach (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1278"><span class="linenum">1278</span></a>                  switch (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a>) {
<a name="l1279"><span class="linenum">1279</span></a>                      case <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a> :
<a name="l1280"><span class="linenum">1280</span></a>                          <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> = 'module';
<a name="l1281"><span class="linenum">1281</span></a>                          break;
<a name="l1282"><span class="linenum">1282</span></a>                      case <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a> :
<a name="l1283"><span class="linenum">1283</span></a>                          <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> = 'course';
<a name="l1284"><span class="linenum">1284</span></a>                          break;
<a name="l1285"><span class="linenum">1285</span></a>                      case <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a> :
<a name="l1286"><span class="linenum">1286</span></a>                          <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> = &quot;cat<a class="var it22164" onMouseOver="hilite(22164)" onMouseOut="lolite()" onClick="logVariable('catno')" href="../_variables/catno.html">$catno</a>&quot;;
<a name="l1287"><span class="linenum">1287</span></a>                          <a class="var it22164" onMouseOver="hilite(22164)" onMouseOut="lolite()" onClick="logVariable('catno')" href="../_variables/catno.html">$catno</a>++;
<a name="l1288"><span class="linenum">1288</span></a>                          break;
<a name="l1289"><span class="linenum">1289</span></a>                      case <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> :
<a name="l1290"><span class="linenum">1290</span></a>                          <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a> = 'system';
<a name="l1291"><span class="linenum">1291</span></a>                          break;
<a name="l1292"><span class="linenum">1292</span></a>                  }
<a name="l1293"><span class="linenum">1293</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contexttostringarray')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contexttostringarray.html">contexttostringarray</a>[<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it5900" onMouseOver="hilite(5900)" onMouseOut="lolite()" onClick="logVariable('contextstring')" href="../_variables/contextstring.html">$contextstring</a>;
<a name="l1294"><span class="linenum">1294</span></a>              }
<a name="l1295"><span class="linenum">1295</span></a>          }
<a name="l1296"><span class="linenum">1296</span></a>      }
<a name="l1297"><span class="linenum">1297</span></a>  
<a name="l1298"><span class="linenum">1298</span></a>  }
<a name="l1299"><span class="linenum">1299</span></a>  
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">/**</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment"> * Check capability on category</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment"> *</span>
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment"> * @param mixed $question object or id</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment"> * @param string $cap 'add', 'edit', 'view', 'use', 'move'</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment"> * @param integer $cachecat useful to cache all question records in a category</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment"> * @return boolean this user has the capability $cap for this question $question?</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment"> */</span>
<a name="l1308"><span class="linenum">1308</span></a>  function <a class="function" onClick="logFunction('question_has_capability_on')" href="../_functions/question_has_capability_on.html" onMouseOver="funcPopup(event,'question_has_capability_on')">question_has_capability_on</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>, <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>, <a class="var it22165" onMouseOver="hilite(22165)" onMouseOut="lolite()" onClick="logVariable('cachecat')" href="../_variables/cachecat.html">$cachecat</a> = -1) {
<a name="l1309"><span class="linenum">1309</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1310"><span class="linenum">1310</span></a>  
<a name="l1311"><span class="linenum">1311</span></a>  <span class="comment">    // these are capabilities on existing questions capabilties are</span>
<a name="l1312"><span class="linenum">1312</span></a>  <span class="comment">    //set per category. Each of these has a mine and all version. Append 'mine' and 'all'</span>
<a name="l1313"><span class="linenum">1313</span></a>      <a class="var it22166" onMouseOver="hilite(22166)" onMouseOut="lolite()" onClick="logVariable('question_questioncaps')" href="../_variables/question_questioncaps.html">$question_questioncaps</a> = array('edit', 'view', 'use', 'move');
<a name="l1314"><span class="linenum">1314</span></a>      static <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = array();
<a name="l1315"><span class="linenum">1315</span></a>      static <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = array();
<a name="l1316"><span class="linenum">1316</span></a>      static <a class="var it22167" onMouseOver="hilite(22167)" onMouseOut="lolite()" onClick="logVariable('cachedcat')" href="../_variables/cachedcat.html">$cachedcat</a> = array();
<a name="l1317"><span class="linenum">1317</span></a>      if (<a class="var it22165" onMouseOver="hilite(22165)" onMouseOut="lolite()" onClick="logVariable('cachecat')" href="../_variables/cachecat.html">$cachecat</a> != -1 &amp;&amp; <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it22165" onMouseOver="hilite(22165)" onMouseOut="lolite()" onClick="logVariable('cachecat')" href="../_variables/cachecat.html">$cachecat</a>, <a class="var it22167" onMouseOver="hilite(22167)" onMouseOut="lolite()" onClick="logVariable('cachedcat')" href="../_variables/cachedcat.html">$cachedcat</a>) === false) {
<a name="l1318"><span class="linenum">1318</span></a>          <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> += <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question', array('category' =&gt; <a class="var it22165" onMouseOver="hilite(22165)" onMouseOut="lolite()" onClick="logVariable('cachecat')" href="../_variables/cachecat.html">$cachecat</a>), '', 'id,category,createdby');
<a name="l1319"><span class="linenum">1319</span></a>          <a class="var it22167" onMouseOver="hilite(22167)" onMouseOut="lolite()" onClick="logVariable('cachedcat')" href="../_variables/cachedcat.html">$cachedcat</a>[] = <a class="var it22165" onMouseOver="hilite(22165)" onMouseOut="lolite()" onClick="logVariable('cachecat')" href="../_variables/cachecat.html">$cachecat</a>;
<a name="l1320"><span class="linenum">1320</span></a>      }
<a name="l1321"><span class="linenum">1321</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>)) {
<a name="l1322"><span class="linenum">1322</span></a>          if (!isset(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>])) {
<a name="l1323"><span class="linenum">1323</span></a>              if (!<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('question',
<a name="l1324"><span class="linenum">1324</span></a>                      array('id' =&gt; <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>), 'id,category,createdby')) {
<a name="l1325"><span class="linenum">1325</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('questiondoesnotexist', 'question');
<a name="l1326"><span class="linenum">1326</span></a>              }
<a name="l1327"><span class="linenum">1327</span></a>          }
<a name="l1328"><span class="linenum">1328</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a> = <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>];
<a name="l1329"><span class="linenum">1329</span></a>      }
<a name="l1330"><span class="linenum">1330</span></a>      if (empty(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('category')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/category.html">category</a>)) {
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment">        // This can happen when we have created a fake 'missingtype' question to</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">        // take the place of a deleted question.</span>
<a name="l1333"><span class="linenum">1333</span></a>          return false;
<a name="l1334"><span class="linenum">1334</span></a>      }
<a name="l1335"><span class="linenum">1335</span></a>      if (!isset(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('category')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/category.html">category</a>])) {
<a name="l1336"><span class="linenum">1336</span></a>          if (!<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('category')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/category.html">category</a>] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('question_categories',
<a name="l1337"><span class="linenum">1337</span></a>                  array('id'=&gt;<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('category')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/category.html">category</a>))) {
<a name="l1338"><span class="linenum">1338</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcategory', 'question');
<a name="l1339"><span class="linenum">1339</span></a>          }
<a name="l1340"><span class="linenum">1340</span></a>      }
<a name="l1341"><span class="linenum">1341</span></a>      <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('category')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/category.html">category</a>];
<a name="l1342"><span class="linenum">1342</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>);
<a name="l1343"><span class="linenum">1343</span></a>  
<a name="l1344"><span class="linenum">1344</span></a>      if (<a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>, <a class="var it22166" onMouseOver="hilite(22166)" onMouseOut="lolite()" onClick="logVariable('question_questioncaps')" href="../_variables/question_questioncaps.html">$question_questioncaps</a>)!== false) {
<a name="l1345"><span class="linenum">1345</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/question:' . <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a> . 'all', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1346"><span class="linenum">1346</span></a>              if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('createdby')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../_variables/createdby.html">createdby</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1347"><span class="linenum">1347</span></a>                  return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/question:' . <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a> . 'mine', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1348"><span class="linenum">1348</span></a>              } else {
<a name="l1349"><span class="linenum">1349</span></a>                  return false;
<a name="l1350"><span class="linenum">1350</span></a>              }
<a name="l1351"><span class="linenum">1351</span></a>          } else {
<a name="l1352"><span class="linenum">1352</span></a>              return true;
<a name="l1353"><span class="linenum">1353</span></a>          }
<a name="l1354"><span class="linenum">1354</span></a>      } else {
<a name="l1355"><span class="linenum">1355</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/question:' . <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1356"><span class="linenum">1356</span></a>      }
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>  }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">/**</span>
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment"> * Require capability on question.</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment"> */</span>
<a name="l1363"><span class="linenum">1363</span></a>  function <a class="function" onClick="logFunction('question_require_capability_on')" href="../_functions/question_require_capability_on.html" onMouseOver="funcPopup(event,'question_require_capability_on')">question_require_capability_on</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>, <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>) {
<a name="l1364"><span class="linenum">1364</span></a>      if (!<a class="function" onClick="logFunction('question_has_capability_on')" href="../_functions/question_has_capability_on.html" onMouseOver="funcPopup(event,'question_has_capability_on')">question_has_capability_on</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>, <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>)) {
<a name="l1365"><span class="linenum">1365</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermissions', '', '', <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>);
<a name="l1366"><span class="linenum">1366</span></a>      }
<a name="l1367"><span class="linenum">1367</span></a>      return true;
<a name="l1368"><span class="linenum">1368</span></a>  }
<a name="l1369"><span class="linenum">1369</span></a>  
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment">/**</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment"> * @param object $context a context</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment"> * @return string A URL for editing questions in this context.</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment"> */</span>
<a name="l1374"><span class="linenum">1374</span></a>  function <a class="function" onClick="logFunction('question_edit_url')" href="../_functions/question_edit_url.html" onMouseOver="funcPopup(event,'question_edit_url')">question_edit_url</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1375"><span class="linenum">1375</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1376"><span class="linenum">1376</span></a>      if (!<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(<a class="function" onClick="logFunction('question_get_question_capabilities')" href="../_functions/question_get_question_capabilities.html" onMouseOver="funcPopup(event,'question_get_question_capabilities')">question_get_question_capabilities</a>(), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1377"><span class="linenum">1377</span></a>          return false;
<a name="l1378"><span class="linenum">1378</span></a>      }
<a name="l1379"><span class="linenum">1379</span></a>      <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/question/edit.php?';
<a name="l1380"><span class="linenum">1380</span></a>      <a class="var it7666" onMouseOver="hilite(7666)" onMouseOut="lolite()" onClick="logVariable('defaultcategory')" href="../_variables/defaultcategory.html">$defaultcategory</a> = <a class="function" onClick="logFunction('question_get_default_category')" href="../_functions/question_get_default_category.html" onMouseOver="funcPopup(event,'question_get_default_category')">question_get_default_category</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1381"><span class="linenum">1381</span></a>      if (<a class="var it7666" onMouseOver="hilite(7666)" onMouseOut="lolite()" onClick="logVariable('defaultcategory')" href="../_variables/defaultcategory.html">$defaultcategory</a>) {
<a name="l1382"><span class="linenum">1382</span></a>          <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> .= 'cat=' . <a class="var it7666" onMouseOver="hilite(7666)" onMouseOut="lolite()" onClick="logVariable('defaultcategory')" href="../_variables/defaultcategory.html">$defaultcategory</a>-&gt;<a onClick="logVariable('id')" class="var it44347" onMouseOver="hilite(44347)" onMouseOut="lolite()" href="../_variables/id.html">id</a> . ',' . <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a> . '&amp;amp;';
<a name="l1383"><span class="linenum">1383</span></a>      }
<a name="l1384"><span class="linenum">1384</span></a>      switch (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a>) {
<a name="l1385"><span class="linenum">1385</span></a>          case <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>:
<a name="l1386"><span class="linenum">1386</span></a>              return <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> . 'courseid=' . <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1387"><span class="linenum">1387</span></a>          case <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>:
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">            // This is nasty, becuase we can only edit questions in a course</span>
<a name="l1389"><span class="linenum">1389</span></a>  <span class="comment">            // context at the moment, so for now we just return false.</span>
<a name="l1390"><span class="linenum">1390</span></a>              return false;
<a name="l1391"><span class="linenum">1391</span></a>          case <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>:
<a name="l1392"><span class="linenum">1392</span></a>              return <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> . 'courseid=' . <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>;
<a name="l1393"><span class="linenum">1393</span></a>          case <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>:
<a name="l1394"><span class="linenum">1394</span></a>              return <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> . 'cmid=' . <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>;
<a name="l1395"><span class="linenum">1395</span></a>      }
<a name="l1396"><span class="linenum">1396</span></a>  
<a name="l1397"><span class="linenum">1397</span></a>  }
<a name="l1398"><span class="linenum">1398</span></a>  
<a name="l1399"><span class="linenum">1399</span></a>  <span class="comment">/**</span>
<a name="l1400"><span class="linenum">1400</span></a>  <span class="comment"> * Adds question bank setting links to the given navigation node if caps are met.</span>
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment"> *</span>
<a name="l1402"><span class="linenum">1402</span></a>  <span class="comment"> * @param navigation_node $navigationnode The navigation node to add the question branch to</span>
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment"> * @param object $context</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment"> * @return navigation_node Returns the question branch that was added</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment"> */</span>
<a name="l1406"><span class="linenum">1406</span></a>  function <a class="function" onClick="logFunction('question_extend_settings_navigation')" href="../_functions/question_extend_settings_navigation.html" onMouseOver="funcPopup(event,'question_extend_settings_navigation')">question_extend_settings_navigation</a>(navigation_node <a class="var it22168" onMouseOver="hilite(22168)" onMouseOut="lolite()" onClick="logVariable('navigationnode')" href="../_variables/navigationnode.html">$navigationnode</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1407"><span class="linenum">1407</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1408"><span class="linenum">1408</span></a>  
<a name="l1409"><span class="linenum">1409</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l1410"><span class="linenum">1410</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('courseid'=&gt;<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l1411"><span class="linenum">1411</span></a>      } else if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l1412"><span class="linenum">1412</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('cmid'=&gt;<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l1413"><span class="linenum">1413</span></a>      } else {
<a name="l1414"><span class="linenum">1414</span></a>          return;
<a name="l1415"><span class="linenum">1415</span></a>      }
<a name="l1416"><span class="linenum">1416</span></a>  
<a name="l1417"><span class="linenum">1417</span></a>      if ((<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('cat')) &amp;&amp; <a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('~\d+,\d+~', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>)) {
<a name="l1418"><span class="linenum">1418</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['cat'] = <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../_variables/cat.html">$cat</a>;
<a name="l1419"><span class="linenum">1419</span></a>      }
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>      <a class="var it22169" onMouseOver="hilite(22169)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../_variables/questionnode.html">$questionnode</a> = <a class="var it22168" onMouseOver="hilite(22168)" onMouseOut="lolite()" onClick="logVariable('navigationnode')" href="../_variables/navigationnode.html">$navigationnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questionbank', 'question'),
<a name="l1422"><span class="linenum">1422</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../question/edit.php.html">/question/edit.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>), <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER, null, 'questionbank');
<a name="l1423"><span class="linenum">1423</span></a>  
<a name="l1424"><span class="linenum">1424</span></a>      <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_edit_contexts')" href="../_classes/question_edit_contexts.html" onMouseOver="classPopup(event,'question_edit_contexts')">question_edit_contexts</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1425"><span class="linenum">1425</span></a>      if (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('have_one_edit_tab_cap')" href="../_functions/have_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'have_one_edit_tab_cap')">have_one_edit_tab_cap</a>('questions')) {
<a name="l1426"><span class="linenum">1426</span></a>          <a class="var it22169" onMouseOver="hilite(22169)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questions', 'question'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(
<a name="l1427"><span class="linenum">1427</span></a>                  '<a class="filename" href="../question/edit.php.html">/question/edit.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>), <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'questions');
<a name="l1428"><span class="linenum">1428</span></a>      }
<a name="l1429"><span class="linenum">1429</span></a>      if (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('have_one_edit_tab_cap')" href="../_functions/have_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'have_one_edit_tab_cap')">have_one_edit_tab_cap</a>('categories')) {
<a name="l1430"><span class="linenum">1430</span></a>          <a class="var it22169" onMouseOver="hilite(22169)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('categories', 'question'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(
<a name="l1431"><span class="linenum">1431</span></a>                  '<a class="filename" href="../question/category.php.html">/question/category.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>), <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'categories');
<a name="l1432"><span class="linenum">1432</span></a>      }
<a name="l1433"><span class="linenum">1433</span></a>      if (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('have_one_edit_tab_cap')" href="../_functions/have_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'have_one_edit_tab_cap')">have_one_edit_tab_cap</a>('import')) {
<a name="l1434"><span class="linenum">1434</span></a>          <a class="var it22169" onMouseOver="hilite(22169)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('import', 'question'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(
<a name="l1435"><span class="linenum">1435</span></a>                  '<a class="filename" href="../question/import.php.html">/question/import.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>), <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'import');
<a name="l1436"><span class="linenum">1436</span></a>      }
<a name="l1437"><span class="linenum">1437</span></a>      if (<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('have_one_edit_tab_cap')" href="../_functions/have_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'have_one_edit_tab_cap')">have_one_edit_tab_cap</a>('export')) {
<a name="l1438"><span class="linenum">1438</span></a>          <a class="var it22169" onMouseOver="hilite(22169)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('export', 'question'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(
<a name="l1439"><span class="linenum">1439</span></a>                  '<a class="filename" href="../question/export.php.html">/question/export.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>), <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'export');
<a name="l1440"><span class="linenum">1440</span></a>      }
<a name="l1441"><span class="linenum">1441</span></a>  
<a name="l1442"><span class="linenum">1442</span></a>      return <a class="var it22169" onMouseOver="hilite(22169)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../_variables/questionnode.html">$questionnode</a>;
<a name="l1443"><span class="linenum">1443</span></a>  }
<a name="l1444"><span class="linenum">1444</span></a>  
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">/**</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> * @return array all the capabilities that relate to accessing particular questions.</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment"> */</span>
<a name="l1448"><span class="linenum">1448</span></a>  function <a class="function" onClick="logFunction('question_get_question_capabilities')" href="../_functions/question_get_question_capabilities.html" onMouseOver="funcPopup(event,'question_get_question_capabilities')">question_get_question_capabilities</a>() {
<a name="l1449"><span class="linenum">1449</span></a>      return array(
<a name="l1450"><span class="linenum">1450</span></a>          'moodle/question:add',
<a name="l1451"><span class="linenum">1451</span></a>          'moodle/question:editmine',
<a name="l1452"><span class="linenum">1452</span></a>          'moodle/question:editall',
<a name="l1453"><span class="linenum">1453</span></a>          'moodle/question:viewmine',
<a name="l1454"><span class="linenum">1454</span></a>          'moodle/question:viewall',
<a name="l1455"><span class="linenum">1455</span></a>          'moodle/question:usemine',
<a name="l1456"><span class="linenum">1456</span></a>          'moodle/question:useall',
<a name="l1457"><span class="linenum">1457</span></a>          'moodle/question:movemine',
<a name="l1458"><span class="linenum">1458</span></a>          'moodle/question:moveall',
<a name="l1459"><span class="linenum">1459</span></a>      );
<a name="l1460"><span class="linenum">1460</span></a>  }
<a name="l1461"><span class="linenum">1461</span></a>  
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment">/**</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment"> * @return array all the question bank capabilities.</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment"> */</span>
<a name="l1465"><span class="linenum">1465</span></a>  function <a class="function" onClick="logFunction('question_get_all_capabilities')" href="../_functions/question_get_all_capabilities.html" onMouseOver="funcPopup(event,'question_get_all_capabilities')">question_get_all_capabilities</a>() {
<a name="l1466"><span class="linenum">1466</span></a>      <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a> = <a class="function" onClick="logFunction('question_get_question_capabilities')" href="../_functions/question_get_question_capabilities.html" onMouseOver="funcPopup(event,'question_get_question_capabilities')">question_get_question_capabilities</a>();
<a name="l1467"><span class="linenum">1467</span></a>      <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>[] = 'moodle/question:managecategory';
<a name="l1468"><span class="linenum">1468</span></a>      <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>[] = 'moodle/question:flag';
<a name="l1469"><span class="linenum">1469</span></a>      return <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>;
<a name="l1470"><span class="linenum">1470</span></a>  }
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>  
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">/**</span>
<a name="l1474"><span class="linenum">1474</span></a>  <span class="comment"> * Tracks all the contexts related to the one where we are currently editing</span>
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment"> * questions, and provides helper methods to check permissions.</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment"> *</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment"> * @copyright 2007 Jamie Pratt me@jamiep.org</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l1479"><span class="linenum">1479</span></a>  <span class="comment"> */</span>
<a name="l1480"><span class="linenum">1480</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('question_edit_contexts')" href="../_classes/question_edit_contexts.html" onMouseOver="classPopup(event,'question_edit_contexts')">question_edit_contexts</a> {
<a name="l1481"><span class="linenum">1481</span></a>  
<a name="l1482"><span class="linenum">1482</span></a>      public static <a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a> = array(
<a name="l1483"><span class="linenum">1483</span></a>          'editq' =&gt; array('moodle/question:add',
<a name="l1484"><span class="linenum">1484</span></a>              'moodle/question:editmine',
<a name="l1485"><span class="linenum">1485</span></a>              'moodle/question:editall',
<a name="l1486"><span class="linenum">1486</span></a>              'moodle/question:viewmine',
<a name="l1487"><span class="linenum">1487</span></a>              'moodle/question:viewall',
<a name="l1488"><span class="linenum">1488</span></a>              'moodle/question:usemine',
<a name="l1489"><span class="linenum">1489</span></a>              'moodle/question:useall',
<a name="l1490"><span class="linenum">1490</span></a>              'moodle/question:movemine',
<a name="l1491"><span class="linenum">1491</span></a>              'moodle/question:moveall'),
<a name="l1492"><span class="linenum">1492</span></a>          'questions'=&gt;array('moodle/question:add',
<a name="l1493"><span class="linenum">1493</span></a>              'moodle/question:editmine',
<a name="l1494"><span class="linenum">1494</span></a>              'moodle/question:editall',
<a name="l1495"><span class="linenum">1495</span></a>              'moodle/question:viewmine',
<a name="l1496"><span class="linenum">1496</span></a>              'moodle/question:viewall',
<a name="l1497"><span class="linenum">1497</span></a>              'moodle/question:movemine',
<a name="l1498"><span class="linenum">1498</span></a>              'moodle/question:moveall'),
<a name="l1499"><span class="linenum">1499</span></a>          'categories'=&gt;array('moodle/question:managecategory'),
<a name="l1500"><span class="linenum">1500</span></a>          'import'=&gt;array('moodle/question:add'),
<a name="l1501"><span class="linenum">1501</span></a>          'export'=&gt;array('moodle/question:viewall', 'moodle/question:viewmine'));
<a name="l1502"><span class="linenum">1502</span></a>  
<a name="l1503"><span class="linenum">1503</span></a>      protected <a class="var it22170" onMouseOver="hilite(22170)" onMouseOut="lolite()" onClick="logVariable('allcontexts')" href="../_variables/allcontexts.html">$allcontexts</a>;
<a name="l1504"><span class="linenum">1504</span></a>  
<a name="l1505"><span class="linenum">1505</span></a>      <span class="comment">/**</span>
<a name="l1506"><span class="linenum">1506</span></a>  <span class="comment">     * Constructor</span>
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">     * @param context the current context.</span>
<a name="l1508"><span class="linenum">1508</span></a>  <span class="comment">     */</span>
<a name="l1509"><span class="linenum">1509</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(context <a class="var it14619" onMouseOver="hilite(14619)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a>) {
<a name="l1510"><span class="linenum">1510</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcontexts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allcontexts.html">allcontexts</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it14619" onMouseOver="hilite(14619)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a>-&gt;<a class="function" onClick="logFunction('get_parent_contexts')" href="../_functions/get_parent_contexts.html" onMouseOver="funcPopup(event,'get_parent_contexts')">get_parent_contexts</a>(true));
<a name="l1511"><span class="linenum">1511</span></a>      }
<a name="l1512"><span class="linenum">1512</span></a>  
<a name="l1513"><span class="linenum">1513</span></a>      <span class="comment">/**</span>
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment">     * @return array all parent contexts</span>
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment">     */</span>
<a name="l1516"><span class="linenum">1516</span></a>      public function <a class="function" onClick="logFunction('all')" href="../_functions/all.html" onMouseOver="funcPopup(event,'all')">all</a>() {
<a name="l1517"><span class="linenum">1517</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcontexts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allcontexts.html">allcontexts</a>;
<a name="l1518"><span class="linenum">1518</span></a>      }
<a name="l1519"><span class="linenum">1519</span></a>  
<a name="l1520"><span class="linenum">1520</span></a>      <span class="comment">/**</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     * @return object lowest context which must be either the module or course context</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">     */</span>
<a name="l1523"><span class="linenum">1523</span></a>      public function <a class="function" onClick="logFunction('lowest')" href="../_functions/lowest.html" onMouseOver="funcPopup(event,'lowest')">lowest</a>() {
<a name="l1524"><span class="linenum">1524</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcontexts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allcontexts.html">allcontexts</a>[0];
<a name="l1525"><span class="linenum">1525</span></a>      }
<a name="l1526"><span class="linenum">1526</span></a>  
<a name="l1527"><span class="linenum">1527</span></a>      <span class="comment">/**</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment">     * @param string $cap capability</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">     * @return array parent contexts having capability, zero based index</span>
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment">     */</span>
<a name="l1531"><span class="linenum">1531</span></a>      public function <a class="function" onClick="logFunction('having_cap')" href="../_functions/having_cap.html" onMouseOver="funcPopup(event,'having_cap')">having_cap</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>) {
<a name="l1532"><span class="linenum">1532</span></a>          <a class="var it22171" onMouseOver="hilite(22171)" onMouseOut="lolite()" onClick="logVariable('contextswithcap')" href="../_variables/contextswithcap.html">$contextswithcap</a> = array();
<a name="l1533"><span class="linenum">1533</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcontexts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allcontexts.html">allcontexts</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1534"><span class="linenum">1534</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1535"><span class="linenum">1535</span></a>                  <a class="var it22171" onMouseOver="hilite(22171)" onMouseOut="lolite()" onClick="logVariable('contextswithcap')" href="../_variables/contextswithcap.html">$contextswithcap</a>[] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l1536"><span class="linenum">1536</span></a>              }
<a name="l1537"><span class="linenum">1537</span></a>          }
<a name="l1538"><span class="linenum">1538</span></a>          return <a class="var it22171" onMouseOver="hilite(22171)" onMouseOut="lolite()" onClick="logVariable('contextswithcap')" href="../_variables/contextswithcap.html">$contextswithcap</a>;
<a name="l1539"><span class="linenum">1539</span></a>      }
<a name="l1540"><span class="linenum">1540</span></a>  
<a name="l1541"><span class="linenum">1541</span></a>      <span class="comment">/**</span>
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment">     * @param array $caps capabilities</span>
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment">     * @return array parent contexts having at least one of $caps, zero based index</span>
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment">     */</span>
<a name="l1545"><span class="linenum">1545</span></a>      public function <a class="function" onClick="logFunction('having_one_cap')" href="../_functions/having_one_cap.html" onMouseOver="funcPopup(event,'having_one_cap')">having_one_cap</a>(<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>) {
<a name="l1546"><span class="linenum">1546</span></a>          <a class="var it22172" onMouseOver="hilite(22172)" onMouseOut="lolite()" onClick="logVariable('contextswithacap')" href="../_variables/contextswithacap.html">$contextswithacap</a> = array();
<a name="l1547"><span class="linenum">1547</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcontexts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allcontexts.html">allcontexts</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1548"><span class="linenum">1548</span></a>              foreach (<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a> as <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>) {
<a name="l1549"><span class="linenum">1549</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1550"><span class="linenum">1550</span></a>                      <a class="var it22172" onMouseOver="hilite(22172)" onMouseOut="lolite()" onClick="logVariable('contextswithacap')" href="../_variables/contextswithacap.html">$contextswithacap</a>[] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l1551"><span class="linenum">1551</span></a>                      break; <span class="comment">//done with caps loop</span>
<a name="l1552"><span class="linenum">1552</span></a>                  }
<a name="l1553"><span class="linenum">1553</span></a>              }
<a name="l1554"><span class="linenum">1554</span></a>          }
<a name="l1555"><span class="linenum">1555</span></a>          return <a class="var it22172" onMouseOver="hilite(22172)" onMouseOut="lolite()" onClick="logVariable('contextswithacap')" href="../_variables/contextswithacap.html">$contextswithacap</a>;
<a name="l1556"><span class="linenum">1556</span></a>      }
<a name="l1557"><span class="linenum">1557</span></a>  
<a name="l1558"><span class="linenum">1558</span></a>      <span class="comment">/**</span>
<a name="l1559"><span class="linenum">1559</span></a>  <span class="comment">     * @param string $tabname edit tab name</span>
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">     * @return array parent contexts having at least one of $caps, zero based index</span>
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment">     */</span>
<a name="l1562"><span class="linenum">1562</span></a>      public function <a class="function" onClick="logFunction('having_one_edit_tab_cap')" href="../_functions/having_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'having_one_edit_tab_cap')">having_one_edit_tab_cap</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>) {
<a name="l1563"><span class="linenum">1563</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('having_one_cap')" href="../_functions/having_one_cap.html" onMouseOver="funcPopup(event,'having_one_cap')">having_one_cap</a>(self::<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>[<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>]);
<a name="l1564"><span class="linenum">1564</span></a>      }
<a name="l1565"><span class="linenum">1565</span></a>  
<a name="l1566"><span class="linenum">1566</span></a>      <span class="comment">/**</span>
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment">     * @return those contexts where a user can add a question and then use it.</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment">     */</span>
<a name="l1569"><span class="linenum">1569</span></a>      public function <a class="function" onClick="logFunction('having_add_and_use')" href="../_functions/having_add_and_use.html" onMouseOver="funcPopup(event,'having_add_and_use')">having_add_and_use</a>() {
<a name="l1570"><span class="linenum">1570</span></a>          <a class="var it22171" onMouseOver="hilite(22171)" onMouseOut="lolite()" onClick="logVariable('contextswithcap')" href="../_variables/contextswithcap.html">$contextswithcap</a> = array();
<a name="l1571"><span class="linenum">1571</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcontexts')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allcontexts.html">allcontexts</a> as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1572"><span class="linenum">1572</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/question:add', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1573"><span class="linenum">1573</span></a>                  continue;
<a name="l1574"><span class="linenum">1574</span></a>              }
<a name="l1575"><span class="linenum">1575</span></a>              if (!<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/question:useall', 'moodle/question:usemine'), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1576"><span class="linenum">1576</span></a>                              continue;
<a name="l1577"><span class="linenum">1577</span></a>              }
<a name="l1578"><span class="linenum">1578</span></a>              <a class="var it22171" onMouseOver="hilite(22171)" onMouseOut="lolite()" onClick="logVariable('contextswithcap')" href="../_variables/contextswithcap.html">$contextswithcap</a>[] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l1579"><span class="linenum">1579</span></a>          }
<a name="l1580"><span class="linenum">1580</span></a>          return <a class="var it22171" onMouseOver="hilite(22171)" onMouseOut="lolite()" onClick="logVariable('contextswithcap')" href="../_variables/contextswithcap.html">$contextswithcap</a>;
<a name="l1581"><span class="linenum">1581</span></a>      }
<a name="l1582"><span class="linenum">1582</span></a>  
<a name="l1583"><span class="linenum">1583</span></a>      <span class="comment">/**</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     * Has at least one parent context got the cap $cap?</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     *</span>
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">     * @param string $cap capability</span>
<a name="l1587"><span class="linenum">1587</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment">     */</span>
<a name="l1589"><span class="linenum">1589</span></a>      public function <a class="function" onClick="logFunction('have_cap')" href="../_functions/have_cap.html" onMouseOver="funcPopup(event,'have_cap')">have_cap</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>) {
<a name="l1590"><span class="linenum">1590</span></a>          return (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('having_cap')" href="../_functions/having_cap.html" onMouseOver="funcPopup(event,'having_cap')">having_cap</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>)));
<a name="l1591"><span class="linenum">1591</span></a>      }
<a name="l1592"><span class="linenum">1592</span></a>  
<a name="l1593"><span class="linenum">1593</span></a>      <span class="comment">/**</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment">     * Has at least one parent context got one of the caps $caps?</span>
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment">     *</span>
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment">     * @param array $caps capability</span>
<a name="l1597"><span class="linenum">1597</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">     */</span>
<a name="l1599"><span class="linenum">1599</span></a>      public function <a class="function" onClick="logFunction('have_one_cap')" href="../_functions/have_one_cap.html" onMouseOver="funcPopup(event,'have_one_cap')">have_one_cap</a>(<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>) {
<a name="l1600"><span class="linenum">1600</span></a>          foreach (<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a> as <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>) {
<a name="l1601"><span class="linenum">1601</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('have_cap')" href="../_functions/have_cap.html" onMouseOver="funcPopup(event,'have_cap')">have_cap</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>)) {
<a name="l1602"><span class="linenum">1602</span></a>                  return true;
<a name="l1603"><span class="linenum">1603</span></a>              }
<a name="l1604"><span class="linenum">1604</span></a>          }
<a name="l1605"><span class="linenum">1605</span></a>          return false;
<a name="l1606"><span class="linenum">1606</span></a>      }
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>      <span class="comment">/**</span>
<a name="l1609"><span class="linenum">1609</span></a>  <span class="comment">     * Has at least one parent context got one of the caps for actions on $tabname</span>
<a name="l1610"><span class="linenum">1610</span></a>  <span class="comment">     *</span>
<a name="l1611"><span class="linenum">1611</span></a>  <span class="comment">     * @param string $tabname edit tab name</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">     */</span>
<a name="l1614"><span class="linenum">1614</span></a>      public function <a class="function" onClick="logFunction('have_one_edit_tab_cap')" href="../_functions/have_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'have_one_edit_tab_cap')">have_one_edit_tab_cap</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>) {
<a name="l1615"><span class="linenum">1615</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('have_one_cap')" href="../_functions/have_one_cap.html" onMouseOver="funcPopup(event,'have_one_cap')">have_one_cap</a>(self::<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>[<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>]);
<a name="l1616"><span class="linenum">1616</span></a>      }
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>      <span class="comment">/**</span>
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment">     * Throw error if at least one parent context hasn't got the cap $cap</span>
<a name="l1620"><span class="linenum">1620</span></a>  <span class="comment">     *</span>
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment">     * @param string $cap capability</span>
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">     */</span>
<a name="l1623"><span class="linenum">1623</span></a>      public function <a class="function" onClick="logFunction('require_cap')" href="../_functions/require_cap.html" onMouseOver="funcPopup(event,'require_cap')">require_cap</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>) {
<a name="l1624"><span class="linenum">1624</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('have_cap')" href="../_functions/have_cap.html" onMouseOver="funcPopup(event,'have_cap')">have_cap</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>)) {
<a name="l1625"><span class="linenum">1625</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermissions', '', '', <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>);
<a name="l1626"><span class="linenum">1626</span></a>          }
<a name="l1627"><span class="linenum">1627</span></a>      }
<a name="l1628"><span class="linenum">1628</span></a>  
<a name="l1629"><span class="linenum">1629</span></a>      <span class="comment">/**</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">     * Throw error if at least one parent context hasn't got one of the caps $caps</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment">     *</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment">     * @param array $cap capabilities</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment">     */</span>
<a name="l1634"><span class="linenum">1634</span></a>      public function <a class="function" onClick="logFunction('require_one_cap')" href="../_functions/require_one_cap.html" onMouseOver="funcPopup(event,'require_one_cap')">require_one_cap</a>(<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>) {
<a name="l1635"><span class="linenum">1635</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('have_one_cap')" href="../_functions/have_one_cap.html" onMouseOver="funcPopup(event,'have_one_cap')">have_one_cap</a>(<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>)) {
<a name="l1636"><span class="linenum">1636</span></a>              <a class="var it22173" onMouseOver="hilite(22173)" onMouseOut="lolite()" onClick="logVariable('capsstring')" href="../_variables/capsstring.html">$capsstring</a> = <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(<a class="var it9838" onMouseOver="hilite(9838)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../_variables/caps.html">$caps</a>, ', ');
<a name="l1637"><span class="linenum">1637</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermissions', '', '', <a class="var it22173" onMouseOver="hilite(22173)" onMouseOut="lolite()" onClick="logVariable('capsstring')" href="../_variables/capsstring.html">$capsstring</a>);
<a name="l1638"><span class="linenum">1638</span></a>          }
<a name="l1639"><span class="linenum">1639</span></a>      }
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>      <span class="comment">/**</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment">     * Throw error if at least one parent context hasn't got one of the caps $caps</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment">     *</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment">     * @param string $tabname edit tab name</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment">     */</span>
<a name="l1646"><span class="linenum">1646</span></a>      public function <a class="function" onClick="logFunction('require_one_edit_tab_cap')" href="../_functions/require_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'require_one_edit_tab_cap')">require_one_edit_tab_cap</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>) {
<a name="l1647"><span class="linenum">1647</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('have_one_edit_tab_cap')" href="../_functions/have_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'have_one_edit_tab_cap')">have_one_edit_tab_cap</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>)) {
<a name="l1648"><span class="linenum">1648</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermissions', '', '', 'access question edit tab '.<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('tabname')" href="../_variables/tabname.html">$tabname</a>);
<a name="l1649"><span class="linenum">1649</span></a>          }
<a name="l1650"><span class="linenum">1650</span></a>      }
<a name="l1651"><span class="linenum">1651</span></a>  }
<a name="l1652"><span class="linenum">1652</span></a>  
<a name="l1653"><span class="linenum">1653</span></a>  
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment">/**</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment"> * Helps call file_rewrite_pluginfile_urls with the right parameters.</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment"> *</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment"> * @package  core_question</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment"> * @category files</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment"> * @param string $text text being processed</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment"> * @param string $file the php script used to serve files</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment"> * @param int $contextid context ID</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment"> * @param string $component component</span>
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment"> * @param string $filearea filearea</span>
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment"> * @param array $ids other IDs will be used to check file permission</span>
<a name="l1665"><span class="linenum">1665</span></a>  <span class="comment"> * @param int $itemid item ID</span>
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment"> * @param array $options options</span>
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment"> * @return string</span>
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment"> */</span>
<a name="l1669"><span class="linenum">1669</span></a>  function <a class="function" onClick="logFunction('question_rewrite_question_urls')" href="../_functions/question_rewrite_question_urls.html" onMouseOver="funcPopup(event,'question_rewrite_question_urls')">question_rewrite_question_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>,
<a name="l1670"><span class="linenum">1670</span></a>          <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, array <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>=null) {
<a name="l1671"><span class="linenum">1671</span></a>  
<a name="l1672"><span class="linenum">1672</span></a>      <a class="var it22174" onMouseOver="hilite(22174)" onMouseOut="lolite()" onClick="logVariable('idsstr')" href="../_variables/idsstr.html">$idsstr</a> = '';
<a name="l1673"><span class="linenum">1673</span></a>      if (!empty(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>)) {
<a name="l1674"><span class="linenum">1674</span></a>          <a class="var it22174" onMouseOver="hilite(22174)" onMouseOut="lolite()" onClick="logVariable('idsstr')" href="../_variables/idsstr.html">$idsstr</a> .= <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../_variables/ids.html">$ids</a>);
<a name="l1675"><span class="linenum">1675</span></a>      }
<a name="l1676"><span class="linenum">1676</span></a>      if (<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> !== null) {
<a name="l1677"><span class="linenum">1677</span></a>          <a class="var it22174" onMouseOver="hilite(22174)" onMouseOut="lolite()" onClick="logVariable('idsstr')" href="../_variables/idsstr.html">$idsstr</a> .= '/' . <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>;
<a name="l1678"><span class="linenum">1678</span></a>      }
<a name="l1679"><span class="linenum">1679</span></a>      return <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>,
<a name="l1680"><span class="linenum">1680</span></a>              <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it22174" onMouseOver="hilite(22174)" onMouseOut="lolite()" onClick="logVariable('idsstr')" href="../_variables/idsstr.html">$idsstr</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1681"><span class="linenum">1681</span></a>  }
<a name="l1682"><span class="linenum">1682</span></a>  
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment">/**</span>
<a name="l1684"><span class="linenum">1684</span></a>  <span class="comment"> * Rewrite the PLUGINFILE urls in part of the content of a question, for use when</span>
<a name="l1685"><span class="linenum">1685</span></a>  <span class="comment"> * viewing the question outside an attempt (for example, in the question bank</span>
<a name="l1686"><span class="linenum">1686</span></a>  <span class="comment"> * listing or in the quiz statistics report).</span>
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment"> *</span>
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment"> * @param string $text the question text.</span>
<a name="l1689"><span class="linenum">1689</span></a>  <span class="comment"> * @param int $questionid the question id.</span>
<a name="l1690"><span class="linenum">1690</span></a>  <span class="comment"> * @param int $filecontextid the context id of the question being displayed.</span>
<a name="l1691"><span class="linenum">1691</span></a>  <span class="comment"> * @param string $filecomponent the component that owns the file area.</span>
<a name="l1692"><span class="linenum">1692</span></a>  <span class="comment"> * @param string $filearea the file area name.</span>
<a name="l1693"><span class="linenum">1693</span></a>  <span class="comment"> * @param int|null $itemid the file's itemid</span>
<a name="l1694"><span class="linenum">1694</span></a>  <span class="comment"> * @param int $previewcontextid the context id where the preview is being displayed.</span>
<a name="l1695"><span class="linenum">1695</span></a>  <span class="comment"> * @param string $previewcomponent component responsible for displaying the preview.</span>
<a name="l1696"><span class="linenum">1696</span></a>  <span class="comment"> * @param array $options text and file options ('forcehttps'=&gt;false)</span>
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment"> * @return string $questiontext with URLs rewritten.</span>
<a name="l1698"><span class="linenum">1698</span></a>  <span class="comment"> */</span>
<a name="l1699"><span class="linenum">1699</span></a>  function <a class="function" onClick="logFunction('question_rewrite_question_preview_urls')" href="../_functions/question_rewrite_question_preview_urls.html" onMouseOver="funcPopup(event,'question_rewrite_question_preview_urls')">question_rewrite_question_preview_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>,
<a name="l1700"><span class="linenum">1700</span></a>          <a class="var it22175" onMouseOver="hilite(22175)" onMouseOut="lolite()" onClick="logVariable('filecontextid')" href="../_variables/filecontextid.html">$filecontextid</a>, <a class="var it22176" onMouseOver="hilite(22176)" onMouseOut="lolite()" onClick="logVariable('filecomponent')" href="../_variables/filecomponent.html">$filecomponent</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>,
<a name="l1701"><span class="linenum">1701</span></a>          <a class="var it22177" onMouseOver="hilite(22177)" onMouseOut="lolite()" onClick="logVariable('previewcontextid')" href="../_variables/previewcontextid.html">$previewcontextid</a>, <a class="var it22178" onMouseOver="hilite(22178)" onMouseOut="lolite()" onClick="logVariable('previewcomponent')" href="../_variables/previewcomponent.html">$previewcomponent</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = null) {
<a name="l1702"><span class="linenum">1702</span></a>  
<a name="l1703"><span class="linenum">1703</span></a>      <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = &quot;preview/<a class="var it22177" onMouseOver="hilite(22177)" onMouseOut="lolite()" onClick="logVariable('previewcontextid')" href="../_variables/previewcontextid.html">$previewcontextid</a>/<a class="var it22178" onMouseOver="hilite(22178)" onMouseOut="lolite()" onClick="logVariable('previewcomponent')" href="../_variables/previewcomponent.html">$previewcomponent</a>/<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>&quot;;
<a name="l1704"><span class="linenum">1704</span></a>      if (<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>) {
<a name="l1705"><span class="linenum">1705</span></a>          <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> .= '/' . <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>;
<a name="l1706"><span class="linenum">1706</span></a>      }
<a name="l1707"><span class="linenum">1707</span></a>  
<a name="l1708"><span class="linenum">1708</span></a>      return <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '<a class="filename" href="../pluginfile.php.html">pluginfile.php</a>', <a class="var it22175" onMouseOver="hilite(22175)" onMouseOut="lolite()" onClick="logVariable('filecontextid')" href="../_variables/filecontextid.html">$filecontextid</a>,
<a name="l1709"><span class="linenum">1709</span></a>              <a class="var it22176" onMouseOver="hilite(22176)" onMouseOut="lolite()" onClick="logVariable('filecomponent')" href="../_variables/filecomponent.html">$filecomponent</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1710"><span class="linenum">1710</span></a>  }
<a name="l1711"><span class="linenum">1711</span></a>  
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment">/**</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment"> * Called by pluginfile.php to serve files related to the 'question' core</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment"> * component and for files belonging to qtypes.</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment"> *</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment"> * For files that relate to questions in a question_attempt, then we delegate to</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment"> * a function in the component that owns the attempt (for example in the quiz,</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment"> * or in core question preview) to get necessary inforation.</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment"> *</span>
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment"> * (Note that, at the moment, all question file areas relate to questions in</span>
<a name="l1721"><span class="linenum">1721</span></a>  <span class="comment"> * attempts, so the If at the start of the last paragraph is always true.)</span>
<a name="l1722"><span class="linenum">1722</span></a>  <span class="comment"> *</span>
<a name="l1723"><span class="linenum">1723</span></a>  <span class="comment"> * Does not return, either calls send_file_not_found(); or serves the file.</span>
<a name="l1724"><span class="linenum">1724</span></a>  <span class="comment"> *</span>
<a name="l1725"><span class="linenum">1725</span></a>  <span class="comment"> * @package  core_question</span>
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment"> * @category files</span>
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment"> * @param stdClass $course course settings object</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l1729"><span class="linenum">1729</span></a>  <span class="comment"> * @param string $component the name of the component we are serving files for.</span>
<a name="l1730"><span class="linenum">1730</span></a>  <span class="comment"> * @param string $filearea the name of the file area.</span>
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment"> * @param array $args the remaining bits of the file path.</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment"> * @param bool $forcedownload whether the user must be forced to download the file.</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment"> */</span>
<a name="l1735"><span class="linenum">1735</span></a>  function <a class="function" onClick="logFunction('question_pluginfile')" href="../_functions/question_pluginfile.html" onMouseOver="funcPopup(event,'question_pluginfile')">question_pluginfile</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>=array()) {
<a name="l1736"><span class="linenum">1736</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1737"><span class="linenum">1737</span></a>  
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">    // Special case, sending a question bank export.</span>
<a name="l1739"><span class="linenum">1739</span></a>      if (<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a> === 'export') {
<a name="l1740"><span class="linenum">1740</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1741"><span class="linenum">1741</span></a>          <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1742"><span class="linenum">1742</span></a>  
<a name="l1743"><span class="linenum">1743</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/editlib.php.html">/question/editlib.php</a>');
<a name="l1744"><span class="linenum">1744</span></a>          <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_edit_contexts')" href="../_classes/question_edit_contexts.html" onMouseOver="classPopup(event,'question_edit_contexts')">question_edit_contexts</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1745"><span class="linenum">1745</span></a>  <span class="comment">        // check export capability</span>
<a name="l1746"><span class="linenum">1746</span></a>          <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('require_one_edit_tab_cap')" href="../_functions/require_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'require_one_edit_tab_cap')">require_one_edit_tab_cap</a>('export');
<a name="l1747"><span class="linenum">1747</span></a>          <a class="var it22179" onMouseOver="hilite(22179)" onMouseOut="lolite()" onClick="logVariable('category_id')" href="../_variables/category_id.html">$category_id</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1748"><span class="linenum">1748</span></a>          <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>      = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1749"><span class="linenum">1749</span></a>          <a class="var it5863" onMouseOver="hilite(5863)" onMouseOut="lolite()" onClick="logVariable('cattofile')" href="../_variables/cattofile.html">$cattofile</a>   = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1750"><span class="linenum">1750</span></a>          <a class="var it5864" onMouseOver="hilite(5864)" onMouseOut="lolite()" onClick="logVariable('contexttofile')" href="../_variables/contexttofile.html">$contexttofile</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1751"><span class="linenum">1751</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>    = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment">        // load parent class for import/export</span>
<a name="l1754"><span class="linenum">1754</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/format.php.html">/question/format.php</a>');
<a name="l1755"><span class="linenum">1755</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/editlib.php.html">/question/editlib.php</a>');
<a name="l1756"><span class="linenum">1756</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/question/format/' . <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> . '/format.php');
<a name="l1757"><span class="linenum">1757</span></a>  
<a name="l1758"><span class="linenum">1758</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'qformat_' . <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>;
<a name="l1759"><span class="linenum">1759</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l1760"><span class="linenum">1760</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1761"><span class="linenum">1761</span></a>          }
<a name="l1762"><span class="linenum">1762</span></a>  
<a name="l1763"><span class="linenum">1763</span></a>          <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a> = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>();
<a name="l1764"><span class="linenum">1764</span></a>  
<a name="l1765"><span class="linenum">1765</span></a>          if (!<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('question_categories', array('id' =&gt; <a class="var it22179" onMouseOver="hilite(22179)" onMouseOut="lolite()" onClick="logVariable('category_id')" href="../_variables/category_id.html">$category_id</a>))) {
<a name="l1766"><span class="linenum">1766</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1767"><span class="linenum">1767</span></a>          }
<a name="l1768"><span class="linenum">1768</span></a>  
<a name="l1769"><span class="linenum">1769</span></a>          <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setCategory')" href="../_functions/setcategory.html" onMouseOver="funcPopup(event,'setcategory')">setCategory</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l1770"><span class="linenum">1770</span></a>          <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setContexts')" href="../_functions/setcontexts.html" onMouseOver="funcPopup(event,'setcontexts')">setContexts</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('having_one_edit_tab_cap')" href="../_functions/having_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'having_one_edit_tab_cap')">having_one_edit_tab_cap</a>('export'));
<a name="l1771"><span class="linenum">1771</span></a>          <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setCourse')" href="../_functions/setcourse.html" onMouseOver="funcPopup(event,'setcourse')">setCourse</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1772"><span class="linenum">1772</span></a>  
<a name="l1773"><span class="linenum">1773</span></a>          if (<a class="var it5863" onMouseOver="hilite(5863)" onMouseOut="lolite()" onClick="logVariable('cattofile')" href="../_variables/cattofile.html">$cattofile</a> == 'withcategories') {
<a name="l1774"><span class="linenum">1774</span></a>              <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setCattofile')" href="../_functions/setcattofile.html" onMouseOver="funcPopup(event,'setcattofile')">setCattofile</a>(true);
<a name="l1775"><span class="linenum">1775</span></a>          } else {
<a name="l1776"><span class="linenum">1776</span></a>              <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setCattofile')" href="../_functions/setcattofile.html" onMouseOver="funcPopup(event,'setcattofile')">setCattofile</a>(false);
<a name="l1777"><span class="linenum">1777</span></a>          }
<a name="l1778"><span class="linenum">1778</span></a>  
<a name="l1779"><span class="linenum">1779</span></a>          if (<a class="var it5864" onMouseOver="hilite(5864)" onMouseOut="lolite()" onClick="logVariable('contexttofile')" href="../_variables/contexttofile.html">$contexttofile</a> == 'withcontexts') {
<a name="l1780"><span class="linenum">1780</span></a>              <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setContexttofile')" href="../_functions/setcontexttofile.html" onMouseOver="funcPopup(event,'setcontexttofile')">setContexttofile</a>(true);
<a name="l1781"><span class="linenum">1781</span></a>          } else {
<a name="l1782"><span class="linenum">1782</span></a>              <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('setContexttofile')" href="../_functions/setcontexttofile.html" onMouseOver="funcPopup(event,'setcontexttofile')">setContexttofile</a>(false);
<a name="l1783"><span class="linenum">1783</span></a>          }
<a name="l1784"><span class="linenum">1784</span></a>  
<a name="l1785"><span class="linenum">1785</span></a>          if (!<a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('exportpreprocess')" href="../_functions/exportpreprocess.html" onMouseOver="funcPopup(event,'exportpreprocess')">exportpreprocess</a>()) {
<a name="l1786"><span class="linenum">1786</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1787"><span class="linenum">1787</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('exporterror', 'question', <a class="var it5764" onMouseOver="hilite(5764)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>());
<a name="l1788"><span class="linenum">1788</span></a>          }
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment">        // export data to moodle file pool</span>
<a name="l1791"><span class="linenum">1791</span></a>          if (!<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('exportprocess')" href="../_functions/exportprocess.html" onMouseOver="funcPopup(event,'exportprocess')">exportprocess</a>(true)) {
<a name="l1792"><span class="linenum">1792</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1793"><span class="linenum">1793</span></a>          }
<a name="l1794"><span class="linenum">1794</span></a>  
<a name="l1795"><span class="linenum">1795</span></a>          <a class="function" onClick="logFunction('send_file')" href="../_functions/send_file.html" onMouseOver="funcPopup(event,'send_file')">send_file</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, 0, 0, true, true, <a class="var it8531" onMouseOver="hilite(8531)" onMouseOut="lolite()" onClick="logVariable('qformat')" href="../_variables/qformat.html">$qformat</a>-&gt;<a class="function" onClick="logFunction('mime_type')" href="../_functions/mime_type.html" onMouseOver="funcPopup(event,'mime_type')">mime_type</a>());
<a name="l1796"><span class="linenum">1796</span></a>      }
<a name="l1797"><span class="linenum">1797</span></a>  
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment">    // Normal case, a file belonging to a question.</span>
<a name="l1799"><span class="linenum">1799</span></a>      <a class="var it22180" onMouseOver="hilite(22180)" onMouseOut="lolite()" onClick="logVariable('qubaidorpreview')" href="../_variables/qubaidorpreview.html">$qubaidorpreview</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1800"><span class="linenum">1800</span></a>  
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment">    // Two sub-cases: 1. A question being previewed outside an attempt/usage.</span>
<a name="l1802"><span class="linenum">1802</span></a>      if (<a class="var it22180" onMouseOver="hilite(22180)" onMouseOut="lolite()" onClick="logVariable('qubaidorpreview')" href="../_variables/qubaidorpreview.html">$qubaidorpreview</a> === 'preview') {
<a name="l1803"><span class="linenum">1803</span></a>          <a class="var it22177" onMouseOver="hilite(22177)" onMouseOut="lolite()" onClick="logVariable('previewcontextid')" href="../_variables/previewcontextid.html">$previewcontextid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1804"><span class="linenum">1804</span></a>          <a class="var it22178" onMouseOver="hilite(22178)" onMouseOut="lolite()" onClick="logVariable('previewcomponent')" href="../_variables/previewcomponent.html">$previewcomponent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1805"><span class="linenum">1805</span></a>          <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a> = (int) <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1806"><span class="linenum">1806</span></a>          <a class="var it22181" onMouseOver="hilite(22181)" onMouseOut="lolite()" onClick="logVariable('previewcontext')" href="../_variables/previewcontext.html">$previewcontext</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it22177" onMouseOver="hilite(22177)" onMouseOut="lolite()" onClick="logVariable('previewcontextid')" href="../_variables/previewcontextid.html">$previewcontextid</a>);
<a name="l1807"><span class="linenum">1807</span></a>  
<a name="l1808"><span class="linenum">1808</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('component_callback')" href="../_functions/component_callback.html" onMouseOver="funcPopup(event,'component_callback')">component_callback</a>(<a class="var it22178" onMouseOver="hilite(22178)" onMouseOut="lolite()" onClick="logVariable('previewcomponent')" href="../_variables/previewcomponent.html">$previewcomponent</a>, 'question_preview_pluginfile', array(
<a name="l1809"><span class="linenum">1809</span></a>                  <a class="var it22181" onMouseOver="hilite(22181)" onMouseOut="lolite()" onClick="logVariable('previewcontext')" href="../_variables/previewcontext.html">$previewcontext</a>, <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>,
<a name="l1810"><span class="linenum">1810</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>,
<a name="l1811"><span class="linenum">1811</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>), 'callbackmissing');
<a name="l1812"><span class="linenum">1812</span></a>  
<a name="l1813"><span class="linenum">1813</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> === 'callbackmissing') {
<a name="l1814"><span class="linenum">1814</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Component {<a class="var it22178" onMouseOver="hilite(22178)" onMouseOut="lolite()" onClick="logVariable('previewcomponent')" href="../_variables/previewcomponent.html">$previewcomponent</a>} does not define the callback &quot; .
<a name="l1815"><span class="linenum">1815</span></a>                      &quot;{<a class="var it22178" onMouseOver="hilite(22178)" onMouseOut="lolite()" onClick="logVariable('previewcomponent')" href="../_variables/previewcomponent.html">$previewcomponent</a>}_question_preview_pluginfile callback. &quot; .
<a name="l1816"><span class="linenum">1816</span></a>                      &quot;Which is required if you are using question_rewrite_question_preview_urls.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1817"><span class="linenum">1817</span></a>          }
<a name="l1818"><span class="linenum">1818</span></a>  
<a name="l1819"><span class="linenum">1819</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1820"><span class="linenum">1820</span></a>      }
<a name="l1821"><span class="linenum">1821</span></a>  
<a name="l1822"><span class="linenum">1822</span></a>  <span class="comment">    // 2. A question being attempted in the normal way.</span>
<a name="l1823"><span class="linenum">1823</span></a>      <a class="var it9207" onMouseOver="hilite(9207)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../_variables/qubaid.html">$qubaid</a> = (int)<a class="var it22180" onMouseOver="hilite(22180)" onMouseOut="lolite()" onClick="logVariable('qubaidorpreview')" href="../_variables/qubaidorpreview.html">$qubaidorpreview</a>;
<a name="l1824"><span class="linenum">1824</span></a>      <a class="var it935" onMouseOver="hilite(935)" onMouseOut="lolite()" onClick="logVariable('slot')" href="../_variables/slot.html">$slot</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1825"><span class="linenum">1825</span></a>  
<a name="l1826"><span class="linenum">1826</span></a>      <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('question_usages', 'component',
<a name="l1827"><span class="linenum">1827</span></a>              array('id' =&gt; <a class="var it9207" onMouseOver="hilite(9207)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../_variables/qubaid.html">$qubaid</a>));
<a name="l1828"><span class="linenum">1828</span></a>      if (!<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>) {
<a name="l1829"><span class="linenum">1829</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1830"><span class="linenum">1830</span></a>      }
<a name="l1831"><span class="linenum">1831</span></a>  
<a name="l1832"><span class="linenum">1832</span></a>      if (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> === 'core_question_preview') {
<a name="l1833"><span class="linenum">1833</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../question/previewlib.php.html">/question/previewlib.php</a>');
<a name="l1834"><span class="linenum">1834</span></a>          return <a class="function" onClick="logFunction('question_preview_question_pluginfile')" href="../_functions/question_preview_question_pluginfile.html" onMouseOver="funcPopup(event,'question_preview_question_pluginfile')">question_preview_question_pluginfile</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l1835"><span class="linenum">1835</span></a>                  <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it9207" onMouseOver="hilite(9207)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../_variables/qubaid.html">$qubaid</a>, <a class="var it935" onMouseOver="hilite(935)" onMouseOut="lolite()" onClick="logVariable('slot')" href="../_variables/slot.html">$slot</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1836"><span class="linenum">1836</span></a>  
<a name="l1837"><span class="linenum">1837</span></a>      } else {
<a name="l1838"><span class="linenum">1838</span></a>          <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>);
<a name="l1839"><span class="linenum">1839</span></a>          if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(&quot;<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>/lib.php&quot;)) {
<a name="l1840"><span class="linenum">1840</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1841"><span class="linenum">1841</span></a>          }
<a name="l1842"><span class="linenum">1842</span></a>          include_once(&quot;<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>/lib.php&quot;);
<a name="l1843"><span class="linenum">1843</span></a>  
<a name="l1844"><span class="linenum">1844</span></a>          <a class="var it9519" onMouseOver="hilite(9519)" onMouseOut="lolite()" onClick="logVariable('filefunction')" href="../_variables/filefunction.html">$filefunction</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> . '_question_pluginfile';
<a name="l1845"><span class="linenum">1845</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it9519" onMouseOver="hilite(9519)" onMouseOut="lolite()" onClick="logVariable('filefunction')" href="../_variables/filefunction.html">$filefunction</a>)) {
<a name="l1846"><span class="linenum">1846</span></a>              <a class="var it9519" onMouseOver="hilite(9519)" onMouseOut="lolite()" onClick="logVariable('filefunction')" href="../_variables/filefunction.html">$filefunction</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it9207" onMouseOver="hilite(9207)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../_variables/qubaid.html">$qubaid</a>, <a class="var it935" onMouseOver="hilite(935)" onMouseOut="lolite()" onClick="logVariable('slot')" href="../_variables/slot.html">$slot</a>,
<a name="l1847"><span class="linenum">1847</span></a>                  <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1848"><span class="linenum">1848</span></a>          }
<a name="l1849"><span class="linenum">1849</span></a>  
<a name="l1850"><span class="linenum">1850</span></a>  <span class="comment">        // Okay, we're here so lets check for function without 'mod_'.</span>
<a name="l1851"><span class="linenum">1851</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, 'mod_') === 0) {
<a name="l1852"><span class="linenum">1852</span></a>              <a class="var it9520" onMouseOver="hilite(9520)" onMouseOut="lolite()" onClick="logVariable('filefunctionold')" href="../_variables/filefunctionold.html">$filefunctionold</a>  = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, 4) . '_question_pluginfile';
<a name="l1853"><span class="linenum">1853</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it9520" onMouseOver="hilite(9520)" onMouseOut="lolite()" onClick="logVariable('filefunctionold')" href="../_variables/filefunctionold.html">$filefunctionold</a>)) {
<a name="l1854"><span class="linenum">1854</span></a>                  <a class="var it9520" onMouseOver="hilite(9520)" onMouseOut="lolite()" onClick="logVariable('filefunctionold')" href="../_variables/filefunctionold.html">$filefunctionold</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it9207" onMouseOver="hilite(9207)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../_variables/qubaid.html">$qubaid</a>, <a class="var it935" onMouseOver="hilite(935)" onMouseOut="lolite()" onClick="logVariable('slot')" href="../_variables/slot.html">$slot</a>,
<a name="l1855"><span class="linenum">1855</span></a>                      <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1856"><span class="linenum">1856</span></a>              }
<a name="l1857"><span class="linenum">1857</span></a>          }
<a name="l1858"><span class="linenum">1858</span></a>  
<a name="l1859"><span class="linenum">1859</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1860"><span class="linenum">1860</span></a>      }
<a name="l1861"><span class="linenum">1861</span></a>  }
<a name="l1862"><span class="linenum">1862</span></a>  
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">/**</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment"> * Serve questiontext files in the question text when they are displayed in this report.</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment"> *</span>
<a name="l1866"><span class="linenum">1866</span></a>  <span class="comment"> * @package  core_files</span>
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment"> * @category files</span>
<a name="l1868"><span class="linenum">1868</span></a>  <span class="comment"> * @param context $previewcontext the context in which the preview is happening.</span>
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment"> * @param int $questionid the question id.</span>
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment"> * @param context $filecontext the file (question) context.</span>
<a name="l1871"><span class="linenum">1871</span></a>  <span class="comment"> * @param string $filecomponent the component the file belongs to.</span>
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment"> * @param string $filearea the file area.</span>
<a name="l1873"><span class="linenum">1873</span></a>  <span class="comment"> * @param array $args remaining file args.</span>
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment"> * @param bool $forcedownload.</span>
<a name="l1875"><span class="linenum">1875</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving.</span>
<a name="l1876"><span class="linenum">1876</span></a>  <span class="comment"> */</span>
<a name="l1877"><span class="linenum">1877</span></a>  function <a class="function" onClick="logFunction('core_question_question_preview_pluginfile')" href="../_functions/core_question_question_preview_pluginfile.html" onMouseOver="funcPopup(event,'core_question_question_preview_pluginfile')">core_question_question_preview_pluginfile</a>(<a class="var it22181" onMouseOver="hilite(22181)" onMouseOut="lolite()" onClick="logVariable('previewcontext')" href="../_variables/previewcontext.html">$previewcontext</a>, <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>,
<a name="l1878"><span class="linenum">1878</span></a>          <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../_variables/filecontext.html">$filecontext</a>, <a class="var it22176" onMouseOver="hilite(22176)" onMouseOut="lolite()" onClick="logVariable('filecomponent')" href="../_variables/filecomponent.html">$filecomponent</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l1879"><span class="linenum">1879</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1880"><span class="linenum">1880</span></a>  
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">    // Verify that contextid matches the question.</span>
<a name="l1882"><span class="linenum">1882</span></a>      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>('
<a name="l1883"><span class="linenum">1883</span></a>              SELECT q.*, qc.contextid
<a name="l1884"><span class="linenum">1884</span></a>                FROM {question} q
<a name="l1885"><span class="linenum">1885</span></a>                JOIN {question_categories} qc ON qc.id = q.category
<a name="l1886"><span class="linenum">1886</span></a>               WHERE q.id = :id AND qc.contextid = :contextid',
<a name="l1887"><span class="linenum">1887</span></a>              array('id' =&gt; <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../_variables/questionid.html">$questionid</a>, 'contextid' =&gt; <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1888"><span class="linenum">1888</span></a>  
<a name="l1889"><span class="linenum">1889</span></a>  <span class="comment">    // Check the capability.</span>
<a name="l1890"><span class="linenum">1890</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it22181" onMouseOver="hilite(22181)" onMouseOut="lolite()" onClick="logVariable('previewcontext')" href="../_variables/previewcontext.html">$previewcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43671" onMouseOver="hilite(43671)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1891"><span class="linenum">1891</span></a>      <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>      <a class="function" onClick="logFunction('question_require_capability_on')" href="../_functions/question_require_capability_on.html" onMouseOver="funcPopup(event,'question_require_capability_on')">question_require_capability_on</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>, 'use');
<a name="l1894"><span class="linenum">1894</span></a>  
<a name="l1895"><span class="linenum">1895</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1896"><span class="linenum">1896</span></a>      <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1897"><span class="linenum">1897</span></a>      <a class="var it241" onMouseOver="hilite(241)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../_variables/fullpath.html">$fullpath</a> = &quot;/{<a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../_variables/id.html">id</a>}/{<a class="var it22176" onMouseOver="hilite(22176)" onMouseOut="lolite()" onClick="logVariable('filecomponent')" href="../_variables/filecomponent.html">$filecomponent</a>}/{<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>}/{<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a>}&quot;;
<a name="l1898"><span class="linenum">1898</span></a>      if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it241" onMouseOver="hilite(241)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../_variables/fullpath.html">$fullpath</a>)) or <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1899"><span class="linenum">1899</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1900"><span class="linenum">1900</span></a>      }
<a name="l1901"><span class="linenum">1901</span></a>  
<a name="l1902"><span class="linenum">1902</span></a>      <a class="function" onClick="logFunction('send_stored_file')" href="../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, 0, 0, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1903"><span class="linenum">1903</span></a>  }
<a name="l1904"><span class="linenum">1904</span></a>  
<a name="l1905"><span class="linenum">1905</span></a>  <span class="comment">/**</span>
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment"> * Create url for question export</span>
<a name="l1907"><span class="linenum">1907</span></a>  <span class="comment"> *</span>
<a name="l1908"><span class="linenum">1908</span></a>  <span class="comment"> * @param int $contextid, current context</span>
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment"> * @param int $categoryid, categoryid</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment"> * @param string $format</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment"> * @param string $withcategories</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment"> * @param string $ithcontexts</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment"> * @param moodle_url export file url</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment"> */</span>
<a name="l1915"><span class="linenum">1915</span></a>  function <a class="function" onClick="logFunction('question_make_export_url')" href="../_functions/question_make_export_url.html" onMouseOver="funcPopup(event,'question_make_export_url')">question_make_export_url</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it22182" onMouseOver="hilite(22182)" onMouseOut="lolite()" onClick="logVariable('withcategories')" href="../_variables/withcategories.html">$withcategories</a>,
<a name="l1916"><span class="linenum">1916</span></a>          <a class="var it22183" onMouseOver="hilite(22183)" onMouseOut="lolite()" onClick="logVariable('withcontexts')" href="../_variables/withcontexts.html">$withcontexts</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l1917"><span class="linenum">1917</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1918"><span class="linenum">1918</span></a>      <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/pluginfile.php&quot;;
<a name="l1919"><span class="linenum">1919</span></a>      return <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>,
<a name="l1920"><span class="linenum">1920</span></a>              &quot;/<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>/question/export/{<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>}/{<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>}/{<a class="var it22182" onMouseOver="hilite(22182)" onMouseOut="lolite()" onClick="logVariable('withcategories')" href="../_variables/withcategories.html">$withcategories</a>}&quot; .
<a name="l1921"><span class="linenum">1921</span></a>              &quot;/{<a class="var it22183" onMouseOver="hilite(22183)" onMouseOut="lolite()" onClick="logVariable('withcontexts')" href="../_variables/withcontexts.html">$withcontexts</a>}/{<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>}&quot;, true);
<a name="l1922"><span class="linenum">1922</span></a>  }
<a name="l1923"><span class="linenum">1923</span></a>  
<a name="l1924"><span class="linenum">1924</span></a>  <span class="comment">/**</span>
<a name="l1925"><span class="linenum">1925</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l1926"><span class="linenum">1926</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l1927"><span class="linenum">1927</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l1929"><span class="linenum">1929</span></a>  <span class="comment"> */</span>
<a name="l1930"><span class="linenum">1930</span></a>  function <a class="function" onClick="logFunction('question_page_type_list')" href="../_functions/question_page_type_list.html" onMouseOver="funcPopup(event,'question_page_type_list')">question_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l1931"><span class="linenum">1931</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1932"><span class="linenum">1932</span></a>      <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> = array(
<a name="l1933"><span class="linenum">1933</span></a>          'question-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-question-x', 'question'),
<a name="l1934"><span class="linenum">1934</span></a>          'question-edit'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-question-edit', 'question'),
<a name="l1935"><span class="linenum">1935</span></a>          'question-category'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-question-category', 'question'),
<a name="l1936"><span class="linenum">1936</span></a>          'question-export'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-question-export', 'question'),
<a name="l1937"><span class="linenum">1937</span></a>          'question-import'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-question-import', 'question')
<a name="l1938"><span class="linenum">1938</span></a>      );
<a name="l1939"><span class="linenum">1939</span></a>      if (<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it44219" onMouseOver="hilite(44219)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l1940"><span class="linenum">1940</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l1941"><span class="linenum">1941</span></a>          return <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="function" onClick="logFunction('course_page_type_list')" href="../_functions/course_page_type_list.html" onMouseOver="funcPopup(event,'course_page_type_list')">course_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>), <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>);
<a name="l1942"><span class="linenum">1942</span></a>      } else {
<a name="l1943"><span class="linenum">1943</span></a>          return <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>;
<a name="l1944"><span class="linenum">1944</span></a>      }
<a name="l1945"><span class="linenum">1945</span></a>  }
<a name="l1946"><span class="linenum">1946</span></a>  
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment">/**</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment"> * Does an activity module use the question bank?</span>
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment"> *</span>
<a name="l1950"><span class="linenum">1950</span></a>  <span class="comment"> * @param string $modname The name of the module (without mod_ prefix).</span>
<a name="l1951"><span class="linenum">1951</span></a>  <span class="comment"> * @return bool true if the module uses questions.</span>
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment"> */</span>
<a name="l1953"><span class="linenum">1953</span></a>  function <a class="function" onClick="logFunction('question_module_uses_questions')" href="../_functions/question_module_uses_questions.html" onMouseOver="funcPopup(event,'question_module_uses_questions')">question_module_uses_questions</a>(<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l1954"><span class="linenum">1954</span></a>      if (<a class="function" onClick="logFunction('plugin_supports')" href="../_functions/plugin_supports.html" onMouseOver="funcPopup(event,'plugin_supports')">plugin_supports</a>('mod', <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="constant" onClick="logConstant('FEATURE_USES_QUESTIONS')" href="../_constants/FEATURE_USES_QUESTIONS.html" onMouseOver="constPopup(event,'FEATURE_USES_QUESTIONS')">FEATURE_USES_QUESTIONS</a>)) {
<a name="l1955"><span class="linenum">1955</span></a>          return true;
<a name="l1956"><span class="linenum">1956</span></a>      }
<a name="l1957"><span class="linenum">1957</span></a>  
<a name="l1958"><span class="linenum">1958</span></a>      <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'mod_'.<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>;
<a name="l1959"><span class="linenum">1959</span></a>      if (<a class="function" onClick="logFunction('component_callback_exists')" href="../_functions/component_callback_exists.html" onMouseOver="funcPopup(event,'component_callback_exists')">component_callback_exists</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, 'question_pluginfile')) {
<a name="l1960"><span class="linenum">1960</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;{<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>} uses questions but doesn't declare <a class="constant" onClick="logConstant('FEATURE_USES_QUESTIONS')" href="../_constants/FEATURE_USES_QUESTIONS.html" onMouseOver="constPopup(event,'FEATURE_USES_QUESTIONS')">FEATURE_USES_QUESTIONS</a>&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1961"><span class="linenum">1961</span></a>          return true;
<a name="l1962"><span class="linenum">1962</span></a>      }
<a name="l1963"><span class="linenum">1963</span></a>  
<a name="l1964"><span class="linenum">1964</span></a>      return false;
<a name="l1965"><span class="linenum">1965</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'course_page_type_list': ['course_page_type_list', 'Return a list of page types ', [['course','lib.php',3296]], 4],
'question_move_category_to_context': ['question_move_category_to_context', 'This function helps move a question cateogry to a new context by moving all the files belonging to all the questions to the new context. Also moves subcategories. ', [['lib','questionlib.php',589]], 4],
'question_preview_question_pluginfile': ['question_preview_question_pluginfile', 'Called via pluginfile.php -> question_pluginfile to serve files belonging to a question in a question_attempt when that attempt is a preview. ', [['question','previewlib.php',218]], 1],
'question_categorylist': ['question_categorylist', '', [['lib','questionlib.php',1157]], 7],
'add_indented_names': ['add_indented_names', 'Format categories into an indented list reflecting the tree structure. ', [['lib','questionlib.php',922]], 1],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'question_has_capability_on': ['question_has_capability_on', 'Check capability on category ', [['lib','questionlib.php',1300]], 22],
'get_context_name': ['get_context_name', 'Returns human readable context identifier. ', [['lib','accesslib.php',5639],['lib','accesslib.php',6189],['lib','accesslib.php',6431],['lib','accesslib.php',6618],['lib','accesslib.php',6850],['lib','accesslib.php',7072],['lib','accesslib.php',7314]], 73],
'question_remove_stale_questions_from_category': ['question_remove_stale_questions_from_category', 'Remove stale questions from a category. ', [['lib','questionlib.php',223]], 4],
'flatten_category_tree': ['flatten_category_tree', 'Private method, only for the use of add_indented_names(). ', [['lib','questionlib.php',886]], 2],
'get_context_info_array': ['get_context_info_array', 'Returns context instance plus related course and cm instances ', [['lib','accesslib.php',1419]], 55],
'get_parent_context': ['get_parent_context', 'Returns parent context ', [['lib','accesslib.php',5746]], 31],
'provide_import': ['provide_import', '', [['question','format.php',61],['question/format/blackboard_six','formatbase.php',40],['question/format/aiken','format.php',56],['question/format/webct','format.php',172],['question/format/multianswer','format.php',38],['question/format/xml','format.php',49],['question/format/missingword','format.php',54],['mod/lesson','format.php',356],['question/format/gift','format.php',64],['question/format/examview','format.php',56]], 2],
'question_category_in_use': ['question_category_in_use', 'Tests whether any question in a category is used by any part of Moodle. ', [['lib','questionlib.php',300]], 1],
'question_delete_course': ['question_delete_course', 'All question categories and their questions are deleted for this course. ', [['lib','questionlib.php',415]], 2],
'print_question_icon': ['print_question_icon', 'Print the icon for the question type ', [['lib','questionlib.php',821]], 4],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'change_items_context': ['change_items_context', 'Moves all tags of the specified items to the new context ', [['tag/classes','tag.php',867]], 2],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'setcattofile': ['setcattofile', 'set cattofile ', [['question','format.php',182]], 2],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib','deprecatedlib.php',226],['lib/classes','component.php',1051]], 51],
'question_add_tops': ['question_add_tops', '', [['lib','questionlib.php',1140]], 1],
'question_load_questions': ['question_load_questions', 'Load a set of questions, given a list of ids. The $join and $extrafields arguments can be used together to pull in extra data. See, for example, the usage in mod/quiz/attempt.php, and read the code below to see how the SQL is assembled. Throws exceptions on error. ', [['lib','questionlib.php',745]], 12],
'remove_all_item_tags': ['remove_all_item_tags', 'Removes all tags from an item. ', [['tag/classes','tag.php',732]], 11],
'having_cap': ['having_cap', '', [['lib','questionlib.php',1531]], 9],
'table': ['table', 'Log a table in the firebug console ', [['lib/minify/lib','FirePHP.php',454],['lib/adodb','adodb-perf.inc.php',234],['lib','outputcomponents.php',1497]], 257],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'provide_export': ['provide_export', '', [['question','format.php',66],['question/format/xml','format.php',53],['question/format/xhtml','format.php',39],['question/format/gift','format.php',68]], 2],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'get_question_options': ['get_question_options', 'Loads the question type specific options for the question. ', [['question/type','questiontypebase.php',743],['question/type/calculated','questiontype.php',48],['question/type/multianswer','questiontype.php',44],['question/type/numerical','questiontype.php',55],['lib','questionlib.php',798],['question/type/multichoice','questiontype.php',40],['question/type/ddimageortext','questiontypebase.php',49],['question/type/truefalse','questiontype.php',111],['question/type/random','questiontype.php',118],['question/type/match','questiontype.php',40],['question/type/gapselect','questiontypebase.php',106],['question/type/randomsamatch','questiontype.php',54],['question/type/essay','questiontype.php',47]], 19],
'component_callback_exists': ['component_callback_exists', 'Determine if a component callback exists and return the function name to call. Note that this function will include the required library files so that the functioname returned can be called directly. ', [['lib','moodlelib.php',7438]], 9],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'delete_question': ['delete_question', 'Deletes the question-type specific data when a question is deleted. ', [['question/type','questiontypebase.php',951],['question/type/calculated','questiontype.php',676],['question/type/multianswer','questiontype.php',189],['question/type/numerical','questiontype.php',378],['question/type/multichoice','questiontype.php',182],['question/type/ddimageortext','questiontypebase.php',197],['question/type/truefalse','questiontype.php',152],['question/type/match','questiontype.php',146],['question/type/gapselect','questiontypebase.php',113],['question/type/randomsamatch','questiontype.php',100],['question/type/essay','questiontype.php',91]], 11],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'make_file_url': ['make_file_url', 'General moodle file url. ', [['lib','weblib.php',750]], 10],
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6575]], 58],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'get_recordset_select': ['get_recordset_select', 'Get a number of records as a moodle_recordset which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1224]], 45],
'sort_categories_by_tree': ['sort_categories_by_tree', 'returns the categories with their names ordered following parent-child relationships finally it tries to return pending categories (those being orphaned, whose parent is incorrect) to avoid missing any category from original array. ', [['lib','questionlib.php',848]], 3],
'question_hash': ['question_hash', 'Creates a stamp that uniquely identifies this version of the question ', [['lib','questionlib.php',833]], 2],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'have_one_cap': ['have_one_cap', 'Has at least one parent context got one of the caps $caps? ', [['lib','questionlib.php',1593]], 2],
'question_module_uses_questions': ['question_module_uses_questions', 'Does an activity module use the question bank? ', [['lib','questionlib.php',1947]], 2],
'get_item_tags_array': ['get_item_tags_array', 'Returns the list of display names of the tags that are associated with an item ', [['tag/classes','tag.php',643]], 35],
'question_category_delete_safe': ['question_category_delete_safe', 'Category is about to be deleted, 1/ All questions are deleted for this question category. 2/ Any questions that can\'t be deleted are moved to a new category NOTE: this function is called from lib/db/upgrade.php ', [['lib','questionlib.php',254]], 3],
'setcourse': ['setcourse', 'set the course class variable ', [['question','format.php',124]], 2],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',679]], 73],
'question_page_type_list': ['question_page_type_list', 'Return a list of page types ', [['lib','questionlib.php',1924]], 0],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'question_preview_popup_params': ['question_preview_popup_params', '', [['lib','questionlib.php',676]], 2],
'get_categories_for_contexts': ['get_categories_for_contexts', 'Get all the category objects, including a count of the number of questions in that category, for all the categories in the lists $contexts. ', [['lib','questionlib.php',1057]], 2],
'question_pluginfile': ['question_pluginfile', 'Called by pluginfile.php to serve files related to the \'question\' core component and for files belonging to qtypes. ', [['lib','questionlib.php',1712]], 16],
'question_get_question_capabilities': ['question_get_question_capabilities', '', [['lib','questionlib.php',1448]], 2],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'question_delete_question': ['question_delete_question', 'Deletes question and all associated data from the database ', [['lib','questionlib.php',334]], 8],
'require_one_edit_tab_cap': ['require_one_edit_tab_cap', 'Throw error if at least one parent context hasn\'t got one of the caps $caps ', [['lib','questionlib.php',1641]], 3],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_system.php',133],['mod/lesson/classes','file_info.php',94],['mod/imscp','locallib.php',328],['lib/filebrowser','file_info_context_coursecat.php',146],['mod/book','locallib.php',463],['lib/filebrowser','file_info_context_user.php',265],['lib/filebrowser','virtual_root_file.php',60],['mod/data','locallib.php',477],['lib/filebrowser','file_info_stored.php',267],['lib/filestorage','stored_file.php',310],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['lib/filebrowser','file_info_context_module.php',249],['mod/glossary','locallib.php',525],['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['mod/forum','locallib.php',463]], 140],
'having_one_edit_tab_cap': ['having_one_edit_tab_cap', '', [['lib','questionlib.php',1562]], 11],
'component_callback': ['component_callback', 'Invoke component\'s callback functions ', [['lib','moodlelib.php',7413]], 28],
'question_delete_context': ['question_delete_context', 'All question categories and their questions are deleted for this context id. ', [['lib','questionlib.php',385]], 4],
'move_context': ['move_context', 'Allows to move all tag instances from one context to another ', [['tag/classes','tag.php',847]], 1],
'setcontexttofile': ['setcontexttofile', 'set contexttofile ', [['question','format.php',190]], 2],
'get_import_export_formats': ['get_import_export_formats', 'Get list of available import or export formats ', [['lib','questionlib.php',1188]], 2],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'question_preload_questions': ['question_preload_questions', 'Given a list of ids, load the basic information about a set of questions from the questions table. The $join and $extrafields arguments can be used together to pull in extra data. See, for example, the usage in mod/quiz/attemptlib.php, and read the code below to see how the SQL is assembled. Throws exceptions on error. ', [['lib','questionlib.php',683]], 2],
'set_field_select': ['set_field_select', 'Set a single field in every table row where the select statement evaluates to true. ', [['lib/dml','pdo_moodle_database.php',492],['lib/dml','oci_native_moodle_database.php',1436],['lib/dml','pgsql_native_moodle_database.php',1121],['lib/dml','mssql_native_moodle_database.php',1097],['lib/dml','mysqli_native_moodle_database.php',1435],['lib/dml','sqlsrv_native_moodle_database.php',1178],['lib/dml/tests','dml_test.php',5552]], 67],
'exportprocess': ['exportprocess', 'Do the export For most types this should not need to be overrided ', [['question','format.php',756]], 1],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'plugin_supports': ['plugin_supports', 'Checks whether a plugin supports a specified feature. ', [['lib','moodlelib.php',7486]], 60],
'string_to_context': ['string_to_context', '', [['lib','questionlib.php',1269]], 1],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'exportpreprocess': ['exportpreprocess', 'Do any pre-processing that may be required ', [['question','format.php',737]], 1],
'question_category_select_menu': ['question_category_select_menu', 'Output a select menu of question categories. ', [['lib','questionlib.php',960]], 1],
'make_unique_id_code': ['make_unique_id_code', 'make_unique_id_code ', [['lib','moodlelib.php',8250]], 26],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'question_add_context_in_key': ['question_add_context_in_key', '', [['lib','questionlib.php',1130]], 1],
'question_context_has_any_questions': ['question_context_has_any_questions', 'Determine whether there arey any questions belonging to this context, that is whether any of its question categories contain any questions. This will return true even if all the questions are hidden. ', [['lib','questionlib.php',157]], 3],
'require_cap': ['require_cap', 'Throw error if at least one parent context hasn\'t got the cap $cap ', [['lib','questionlib.php',1618]], 0],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'setcontexts': ['setcontexts', 'set an array of contexts. ', [['question','format.php',132],['lib/google/src/Google/Service','AdExchangeBuyer.php',3003]], 2],
'get_records_menu': ['get_records_menu', 'Get the first two columns from a number of records as an associative array where all the given conditions met. ', [['lib/dml','moodle_database.php',1375]], 75],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'question_get_all_capabilities': ['question_get_all_capabilities', '', [['lib','questionlib.php',1465]], 1],
'question_save_qtype_order': ['question_save_qtype_order', 'Save a new question type order to the config_plugins table. ', [['lib','questionlib.php',94]], 2],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1073]], 1292],
'core_question_question_preview_pluginfile': ['core_question_question_preview_pluginfile', 'Serve questiontext files in the question text when they are displayed in this report. ', [['lib','questionlib.php',1863]], 0],
'question_preview_url': ['question_preview_url', 'Generate the URL for starting a new preview of a given question with the given options. ', [['lib','questionlib.php',621]], 6],
'all': ['all', '', [['lib','questionlib.php',1516]], 1415],
'question_get_default_category': ['question_get_default_category', '', [['lib','questionlib.php',994]], 2],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'_tidy_question': ['_tidy_question', 'Private function to factor common code out of get_question_options(). ', [['lib','questionlib.php',769]], 2],
'get_records_select_menu': ['get_records_select_menu', 'Get the first two columns from a number of records as an associative array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1407]], 15],
'get_plugin_list_with_class': ['get_plugin_list_with_class', 'Get a list of all the plugins of a given type that define a certain class in a certain file. The plugin component names and class names are returned. ', [['lib','deprecatedlib.php',169],['lib/classes','component.php',811]], 10],
'send_file_not_found': ['send_file_not_found', 'Requested file is not found or not accessible, does not return, terminates script ', [['lib','filelib.php',1787]], 135],
'question_require_capability_on': ['question_require_capability_on', 'Require capability on question. ', [['lib','questionlib.php',1360]], 11],
'delete_previews': ['delete_previews', 'Delete all the previews for a given question. ', [['question/engine','datalib.php',1041]], 1],
'have_cap': ['have_cap', 'Has at least one parent context got the cap $cap? ', [['lib','questionlib.php',1583]], 3],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'having_one_cap': ['having_one_cap', '', [['lib','questionlib.php',1545]], 1],
'qtype_icon': ['qtype_icon', 'Output the icon for a question type. ', [['question','renderer.php',38]], 1],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'question_delete_activity': ['question_delete_activity', 'All question categories and their questions are deleted for this activity. ', [['lib','questionlib.php',518]], 3],
'get_parent_contexts': ['get_parent_contexts', '', [['lib','deprecatedlib.php',1773],['lib','accesslib.php',5704]], 11],
'match_grade_options': ['match_grade_options', 'Check whether a given grade is one of a list of allowed options. If not, depending on $matchgrades, either return the nearest match, or return false to signal an error. ', [['lib','questionlib.php',181]], 10],
'question_edit_url': ['question_edit_url', '', [['lib','questionlib.php',1374]], 1],
'question_move_questions_to_category': ['question_move_questions_to_category', 'This function should be considered private to the question bank, it is called from question/editlib.php question/contextmoveq.php and a few similar places to to the work of acutally moving questions and associated data. However, callers of this function also have to do other work, which is why you should not call this method directly from outside the questionbank. ', [['lib','questionlib.php',540]], 5],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'question_make_default_categories': ['question_make_default_categories', 'Gets the default category in the most specific context. If no categories exist yet then default ones are created in all contexts. ', [['lib','questionlib.php',1005]], 6],
'move_files': ['move_files', 'Move all the files belonging to this question from one context to another. ', [['question/type','questiontypebase.php',1248],['question/type/calculated','questiontype.php',1797],['question/type/multianswer','questiontype.php',236],['question/type/numerical','questiontype.php',471],['question/type/multichoice','questiontype.php',243],['question/type/truefalse','questiontype.php',159],['question/type/match','questiontype.php',180],['question/type/ddmarker','questiontype.php',252],['question/type/shortanswer','questiontype.php',45],['question/type/gapselect','questiontypebase.php',316],['backup/cc','entities.class.php',200],['question/type/ddimageortext','questiontype.php',146],['question/type/randomsamatch','questiontype.php',107],['question/type/calculatedmulti','questiontype.php',296],['question/type/essay','questiontype.php',158]], 16],
'send_file': ['send_file', 'Repository method to serve the referenced file ', [['repository/boxnet','lib.php',482],['lib','filelib.php',2073],['repository/dropbox','lib.php',670],['repository','lib.php',1200],['repository/equella','lib.php',243],['lib/filestorage','stored_file.php',999],['lib','googleapi.php',142],['lib','googleapi.php',253],['repository/filesystem','lib.php',601],['lib/portfolio','plugin.php',811]], 26],
'question_make_export_url': ['question_make_export_url', 'Create url for question export ', [['lib','questionlib.php',1905]], 1],
'label': ['label', 'Renders form element label ', [['lib','outputcomponents.php',1741]], 107],
'question_extend_settings_navigation': ['question_extend_settings_navigation', 'Adds question bank setting links to the given navigation node if caps are met. ', [['lib','questionlib.php',1399]], 3],
'setcategory': ['setcategory', 'Set Category ', [['lib/phpexcel/PHPExcel','DocumentProperties.php',340],['question','format.php',99],['lib/google/src/Google/Service','Webmasters.php',904],['lib/google/src/Google/Service','Games.php',2857],['lib/google/src/Google/Service','Games.php',2983],['lib/phpexcel/PHPExcel/Calculation','Function.php',94],['lib/google/src/Google/Service','Drive.php',3256],['lib/google/src/Google/Service','Webfonts.php',120]], 7],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1846]], 52],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'get_qtype': ['get_qtype', 'Get the question type class for a particular question type. ', [['question/engine','bank.php',80],['question/format/xml','format.php',1009]], 113],
'questions_in_use': ['questions_in_use', 'Are any of these questions are currently in use? ', [['question/engine','datalib.php',1228],['question/engine','lib.php',157],['lib','questionlib.php',121]], 7],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'require_one_cap': ['require_one_cap', 'Throw error if at least one parent context hasn\'t got one of the caps $caps ', [['lib','questionlib.php',1629]], 0],
'question_save_from_deletion': ['question_save_from_deletion', 'Enter description here... ', [['lib','questionlib.php',485]], 1],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'question_rewrite_question_preview_urls': ['question_rewrite_question_preview_urls', 'Rewrite the PLUGINFILE urls in part of the content of a question, for use when viewing the question outside an attempt (for example, in the question bank listing or in the quiz statistics report). ', [['lib','questionlib.php',1683]], 3],
'is_qtype_installed': ['is_qtype_installed', '', [['question/engine','bank.php',75]], 5],
'mime_type': ['mime_type', '', [['question','format.php',71],['question/format/blackboard_six','formatbase.php',64],['question/format/webct','format.php',188],['question/format/xml','format.php',57],['question/format/examview','format.php',60]], 3],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'have_one_edit_tab_cap': ['have_one_edit_tab_cap', 'Has at least one parent context got one of the caps for actions on $tabname ', [['lib','questionlib.php',1608]], 6],
'question_reorder_qtypes': ['question_reorder_qtypes', 'Move one question type in a list of question types. If you try to move one element off of the end, nothing will change. ', [['lib','questionlib.php',64]], 9],
'having_add_and_use': ['having_add_and_use', '', [['lib','questionlib.php',1569]], 1],
'question_rewrite_question_urls': ['question_rewrite_question_urls', 'Helps call file_rewrite_pluginfile_urls with the right parameters. ', [['lib','questionlib.php',1654]], 2],
'notify_question_edited': ['notify_question_edited', 'This method needs to be called whenever a question is edited. ', [['question/engine','bank.php',241]], 5],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'question_category_options': ['question_category_options', 'Output an array of question categories. ', [['lib','questionlib.php',1075]], 4],
'lowest': ['lowest', '', [['lib','questionlib.php',1523]], 9],
'select': ['select', '', [['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845],['lib','outputcomponents.php',1265]], 591],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'context_to_string': ['context_to_string', '', [['lib','questionlib.php',1265]], 1],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'generate_context_to_string_array': ['generate_context_to_string_array', '', [['lib','questionlib.php',1274]], 1],
'question_delete_course_category': ['question_delete_course_category', 'Category is about to be deleted, 1/ All question categories and their questions are deleted for this course category. 2/ All questions are moved to new category ', [['lib','questionlib.php',436]], 4],
'question_default_export_filename': ['question_default_export_filename', 'Create a reasonable default file name for exporting questions from a particular category. ', [['lib','questionlib.php',1220]], 1],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2192]], 75],
'reset': ['reset', '', [], 1213],
'array_key_exists': ['array_key_exists', '', [], 1445],
'sha1': ['sha1', '', [], 186],
'array_keys': ['array_keys', '', [], 1256],
'str_replace': ['str_replace', '', [], 1648],
'preg_match': ['preg_match', '', [], 1286],
'is_readable': ['is_readable', '', [], 196],
'function_exists': ['function_exists', '', [], 419],
'defined': ['defined', '', [], 4731],
'array_merge': ['array_merge', '', [], 2944],
'class_exists': ['class_exists', '', [], 279],
'str_repeat': ['str_repeat', '', [], 156],
'abs': ['abs', '', [], 560],
'explode': ['explode', '', [], 1572],
'substr': ['substr', '', [], 2823],
'array_shift': ['array_shift', '', [], 700],
'is_object': ['is_object', '', [], 544],
'array_search': ['array_search', '', [], 170],
'is_null': ['is_null', '', [], 2003],
'asort': ['asort', '', [], 114],
'strpos': ['strpos', '', [], 1604],
'is_array': ['is_array', '', [], 1608],
'implode': ['implode', '', [], 1281],
'array_values': ['array_values', '', [], 342],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'define': ['define', '', [], 2373],
'is_numeric': ['is_numeric', '', [], 672],
'time': ['time', '', [], 1959]};
CLASS_DATA={
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 152],
'context_to_string_translator': ['context_to_string_translator', 'Converts contextlevels to strings and back to help with reading/writing contexts to/from import/export files. ', [['lib','questionlib.php',1248]], 1],
'core_tag_tag': ['core_tag_tag', 'Represents one tag and also contains lots of useful tag-related methods as static functions. ', [['tag/classes','tag.php',27]], 352],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'question_edit_contexts': ['question_edit_contexts', 'Tracks all the contexts related to the one where we are currently editing questions, and provides helper methods to check permissions. ', [['lib','questionlib.php',1473]], 9],
'html_table': ['html_table', 'Holds all the information required to render a <table> by {@link core_renderer::table()} ', [['lib','outputcomponents.php',2011]], 225],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 348],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'question_engine_data_mapper': ['question_engine_data_mapper', 'This class controls the loading and saving of question engine data to and from the database. ', [['question/engine','datalib.php',51]], 17],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6585]], 194],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'FEATURE_USES_QUESTIONS': ['FEATURE_USES_QUESTIONS', '', [['lib','moodlelib.php',440]], 6],
'QUESTION_NUMANS': ['QUESTION_NUMANS', '', [['lib','questionlib.php',48]], 1],
'QUESTION_NUMANS_ADD': ['QUESTION_NUMANS_ADD', '', [['lib','questionlib.php',62]], 4],
'SYSCONTEXTID': ['SYSCONTEXTID', '', [['lib','accesslib.php',6316]], 72],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'QUESTION_NUMANS_START': ['QUESTION_NUMANS_START', '', [['lib','questionlib.php',55]], 6],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'CONTEXT_COURSECAT': ['CONTEXT_COURSECAT', '', [['lib','accesslib.php',146]], 105],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
