<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of enrollib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='enrollib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="enrollib.php.source.html">enrollib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="enrollib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>This library includes the basic parts of enrol api. It is available on each page.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2010 Petr Skoda {@link http://skodak.org}</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>2514 lines (90 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 86 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#enrol_get_plugins">enrol_get_plugins</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_plugin">enrol_get_plugin</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_instances">enrol_get_instances</a>()<br>
&nbsp;&nbsp;<a href="#enrol_is_enabled">enrol_is_enabled</a>()<br>
&nbsp;&nbsp;<a href="#enrol_check_plugins">enrol_check_plugins</a>()<br>
&nbsp;&nbsp;<a href="#enrol_sharing_course">enrol_sharing_course</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_shared_courses">enrol_get_shared_courses</a>()<br>
&nbsp;&nbsp;<a href="#enrol_course_edit_form">enrol_course_edit_form</a>()<br>
&nbsp;&nbsp;<a href="#enrol_course_edit_validation">enrol_course_edit_validation</a>()<br>
&nbsp;&nbsp;<a href="#enrol_course_updated">enrol_course_updated</a>()<br>
&nbsp;&nbsp;<a href="#enrol_add_course_navigation">enrol_add_course_navigation</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_my_courses">enrol_get_my_courses</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_course_info_icons">enrol_get_course_info_icons</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_course_description_texts">enrol_get_course_description_texts</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_users_courses">enrol_get_users_courses</a>()<br>
&nbsp;&nbsp;<a href="#enrol_user_sees_own_courses">enrol_user_sees_own_courses</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_all_users_courses">enrol_get_all_users_courses</a>()<br>
&nbsp;&nbsp;<a href="#enrol_user_delete">enrol_user_delete</a>()<br>
&nbsp;&nbsp;<a href="#enrol_course_delete">enrol_course_delete</a>()<br>
&nbsp;&nbsp;<a href="#enrol_try_internal_enrol">enrol_try_internal_enrol</a>()<br>
&nbsp;&nbsp;<a href="#enrol_selfenrol_available">enrol_selfenrol_available</a>()<br>
&nbsp;&nbsp;<a href="#enrol_get_enrolment_end">enrol_get_enrolment_end</a>()<br>
&nbsp;&nbsp;<a href="#enrol_accessing_via_instance">enrol_accessing_via_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_name">get_name</a>()<br>
&nbsp;&nbsp;<a href="#get_instance_name">get_instance_name</a>()<br>
&nbsp;&nbsp;<a href="#get_info_icons">get_info_icons</a>()<br>
&nbsp;&nbsp;<a href="#get_description_text">get_description_text</a>()<br>
&nbsp;&nbsp;<a href="#load_config">load_config</a>()<br>
&nbsp;&nbsp;<a href="#get_config">get_config</a>()<br>
&nbsp;&nbsp;<a href="#set_config">set_config</a>()<br>
&nbsp;&nbsp;<a href="#roles_protected">roles_protected</a>()<br>
&nbsp;&nbsp;<a href="#allow_enrol">allow_enrol</a>()<br>
&nbsp;&nbsp;<a href="#allow_unenrol">allow_unenrol</a>()<br>
&nbsp;&nbsp;<a href="#allow_unenrol_user">allow_unenrol_user</a>()<br>
&nbsp;&nbsp;<a href="#allow_manage">allow_manage</a>()<br>
&nbsp;&nbsp;<a href="#show_enrolme_link">show_enrolme_link</a>()<br>
&nbsp;&nbsp;<a href="#try_autoenrol">try_autoenrol</a>()<br>
&nbsp;&nbsp;<a href="#try_guestaccess">try_guestaccess</a>()<br>
&nbsp;&nbsp;<a href="#enrol_user">enrol_user</a>()<br>
&nbsp;&nbsp;<a href="#update_user_enrol">update_user_enrol</a>()<br>
&nbsp;&nbsp;<a href="#unenrol_user">unenrol_user</a>()<br>
&nbsp;&nbsp;<a href="#sync_user_enrolments">sync_user_enrolments</a>()<br>
&nbsp;&nbsp;<a href="#use_standard_editing_ui">use_standard_editing_ui</a>()<br>
&nbsp;&nbsp;<a href="#can_add_instance">can_add_instance</a>()<br>
&nbsp;&nbsp;<a href="#can_edit_instance">can_edit_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_newinstance_link">get_newinstance_link</a>()<br>
&nbsp;&nbsp;<a href="#instance_deleteable">instance_deleteable</a>()<br>
&nbsp;&nbsp;<a href="#can_delete_instance">can_delete_instance</a>()<br>
&nbsp;&nbsp;<a href="#can_hide_show_instance">can_hide_show_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_manual_enrol_link">get_manual_enrol_link</a>()<br>
&nbsp;&nbsp;<a href="#get_unenrolself_link">get_unenrolself_link</a>()<br>
&nbsp;&nbsp;<a href="#course_edit_form">course_edit_form</a>()<br>
&nbsp;&nbsp;<a href="#edit_instance_form">edit_instance_form</a>()<br>
&nbsp;&nbsp;<a href="#edit_instance_validation">edit_instance_validation</a>()<br>
&nbsp;&nbsp;<a href="#course_edit_validation">course_edit_validation</a>()<br>
&nbsp;&nbsp;<a href="#course_updated">course_updated</a>()<br>
&nbsp;&nbsp;<a href="#add_instance">add_instance</a>()<br>
&nbsp;&nbsp;<a href="#update_instance">update_instance</a>()<br>
&nbsp;&nbsp;<a href="#add_default_instance">add_default_instance</a>()<br>
&nbsp;&nbsp;<a href="#update_status">update_status</a>()<br>
&nbsp;&nbsp;<a href="#delete_instance">delete_instance</a>()<br>
&nbsp;&nbsp;<a href="#enrol_page_hook">enrol_page_hook</a>()<br>
&nbsp;&nbsp;<a href="#can_self_enrol">can_self_enrol</a>()<br>
&nbsp;&nbsp;<a href="#get_enrol_info">get_enrol_info</a>()<br>
&nbsp;&nbsp;<a href="#add_course_navigation">add_course_navigation</a>()<br>
&nbsp;&nbsp;<a href="#get_action_icons">get_action_icons</a>()<br>
&nbsp;&nbsp;<a href="#is_cron_required">is_cron_required</a>()<br>
&nbsp;&nbsp;<a href="#cron">cron</a>()<br>
&nbsp;&nbsp;<a href="#user_delete">user_delete</a>()<br>
&nbsp;&nbsp;<a href="#get_manual_enrol_button">get_manual_enrol_button</a>()<br>
&nbsp;&nbsp;<a href="#get_user_enrolment_actions">get_user_enrolment_actions</a>()<br>
&nbsp;&nbsp;<a href="#has_bulk_operations">has_bulk_operations</a>()<br>
&nbsp;&nbsp;<a href="#get_bulk_operations">get_bulk_operations</a>()<br>
&nbsp;&nbsp;<a href="#process_expirations">process_expirations</a>()<br>
&nbsp;&nbsp;<a href="#send_expiry_notifications">send_expiry_notifications</a>()<br>
&nbsp;&nbsp;<a href="#get_enroller">get_enroller</a>()<br>
&nbsp;&nbsp;<a href="#notify_expiry_enrolled">notify_expiry_enrolled</a>()<br>
&nbsp;&nbsp;<a href="#notify_expiry_enroller">notify_expiry_enroller</a>()<br>
&nbsp;&nbsp;<a href="#backup_annotate_custom_fields">backup_annotate_custom_fields</a>()<br>
&nbsp;&nbsp;<a href="#restore_sync_course">restore_sync_course</a>()<br>
&nbsp;&nbsp;<a href="#restore_instance">restore_instance</a>()<br>
&nbsp;&nbsp;<a href="#restore_user_enrolment">restore_user_enrolment</a>()<br>
&nbsp;&nbsp;<a href="#restore_role_assignment">restore_role_assignment</a>()<br>
&nbsp;&nbsp;<a href="#restore_group_member">restore_group_member</a>()<br>
&nbsp;&nbsp;<a href="#get_instance_defaults">get_instance_defaults</a>()<br>
&nbsp;&nbsp;<a href="#validate_param_types">validate_param_types</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_plugins" onClick="logFunction('enrol_get_plugins', 'enrollib.php.source.html#l70')" href="enrollib.php.source.html#l70">enrol_get_plugins</a>(<a href="../_variables/enabled.html">$enabled</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_get_plugins.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns instances of enrol plugins<BR>
</b><BR><b>param:</b> bool $enabled return enabled only<br>
<b>return:</b> array of enrol plugins name=&gt;instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_plugin" onClick="logFunction('enrol_get_plugin', 'enrollib.php.source.html#l111')" href="enrollib.php.source.html#l111">enrol_get_plugin</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_get_plugin.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns instance of enrol plugin<BR>
</b><BR><b>param:</b> string $name name of enrol plugin ('manual', 'guest', ...)<br>
<b>return:</b> enrol_plugin<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_instances" onClick="logFunction('enrol_get_instances', 'enrollib.php.source.html#l140')" href="enrollib.php.source.html#l140">enrol_get_instances</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/enabled.html">$enabled</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_get_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns enrolment instances in given course.<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>param:</b> bool $enabled<br>
<b>return:</b> array of enrol instances<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_is_enabled" onClick="logFunction('enrol_is_enabled', 'enrollib.php.source.html#l171')" href="enrollib.php.source.html#l171">enrol_is_enabled</a>(<a href="../_variables/enrol.html">$enrol</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_is_enabled.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if a given plugin is in the list of enabled enrolment plugins.<BR>
</b><BR><b>param:</b> string $enrol Enrolment plugin name<br>
<b>return:</b> boolean Whether the plugin is enabled<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_check_plugins" onClick="logFunction('enrol_check_plugins', 'enrollib.php.source.html#l186')" href="enrollib.php.source.html#l186">enrol_check_plugins</a>(<a href="../_variables/user.html">$user</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_check_plugins.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check all the login enrolment information for the given user object<BR>
by querying the enrolment plugins<BR>
</b><BR>This function may be very slow, use only once after log-in or login-as.<BR>
<BR>
<b>param:</b> stdClass $user<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_sharing_course" onClick="logFunction('enrol_sharing_course', 'enrollib.php.source.html#l223')" href="enrollib.php.source.html#l223">enrol_sharing_course</a>(<a href="../_variables/user1.html">$user1</a>, <a href="../_variables/user2.html">$user2</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_sharing_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Do these two students share any course?<BR>
</b><BR>The courses has to be visible and enrolments has to be active,<BR>
timestart and timeend restrictions are ignored.<BR>
<BR>
This function calls {@see enrol_get_shared_courses()} setting checkexistsonly<BR>
to true.<BR>
<BR>
<b>param:</b> stdClass|int $user1<br>
<b>param:</b> stdClass|int $user2<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_shared_courses" onClick="logFunction('enrol_get_shared_courses', 'enrollib.php.source.html#l240')" href="enrollib.php.source.html#l240">enrol_get_shared_courses</a>(<a href="../_variables/user1.html">$user1</a>, <a href="../_variables/user2.html">$user2</a>, <a href="../_variables/preloadcontexts.html">$preloadcontexts</a> = false, <a href="../_variables/checkexistsonly.html">$checkexistsonly</a> = false)&nbsp;&nbsp;
<a href="../_functions/enrol_get_shared_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns any courses shared by the two users<BR>
</b><BR>The courses has to be visible and enrolments has to be active,<BR>
timestart and timeend restrictions are ignored.<BR>
<BR>
<b>param:</b> stdClass|int $user1<br>
<b>param:</b> stdClass|int $user2<br>
<b>param:</b> bool $preloadcontexts If set to true contexts for the returned courses<br>
<b>param:</b> bool $checkexistsonly If set to true then this function will return true<br>
<b>return:</b> array|bool An array of courses that both users are enrolled in OR if<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_course_edit_form" onClick="logFunction('enrol_course_edit_form', 'enrollib.php.source.html#l309')" href="enrollib.php.source.html#l309">enrol_course_edit_form</a>(MoodleQuickForm <a href="../_variables/mform.html">$mform</a>, <a href="../_variables/data.html">$data</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_course_edit_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function adds necessary enrol plugins UI into the course edit form.<BR>
</b><BR><b>param:</b> MoodleQuickForm $mform<br>
<b>param:</b> object $data course edit form data<br>
<b>param:</b> object $context context of existing course or parent category if course does not exist<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_course_edit_validation" onClick="logFunction('enrol_course_edit_validation', 'enrollib.php.source.html#l335')" href="enrollib.php.source.html#l335">enrol_course_edit_validation</a>(array <a href="../_variables/data.html">$data</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_course_edit_validation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validate course edit form data<BR>
</b><BR><b>param:</b> array $data raw form data<br>
<b>param:</b> object $context context of existing course or parent category if course does not exist<br>
<b>return:</b> array errors array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_course_updated" onClick="logFunction('enrol_course_updated', 'enrollib.php.source.html#l364')" href="enrollib.php.source.html#l364">enrol_course_updated</a>(<a href="../_variables/inserted.html">$inserted</a>, <a href="../_variables/course.html">$course</a>, <a href="../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_course_updated.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update enrol instances after course edit form submission<BR>
</b><BR><b>param:</b> bool $inserted true means new course added, false course already existed<br>
<b>param:</b> object $course<br>
<b>param:</b> object $data form data<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_add_course_navigation" onClick="logFunction('enrol_add_course_navigation', 'enrollib.php.source.html#l381')" href="enrollib.php.source.html#l381">enrol_add_course_navigation</a>(navigation_node <a href="../_variables/coursenode.html">$coursenode</a>, <a href="../_variables/course.html">$course</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_add_course_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add navigation nodes<BR>
</b><BR><b>param:</b> navigation_node $coursenode<br>
<b>param:</b> object $course<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_my_courses" onClick="logFunction('enrol_get_my_courses', 'enrollib.php.source.html#l512')" href="enrollib.php.source.html#l512">enrol_get_my_courses</a>(<a href="../_variables/fields.html">$fields</a> = NULL, <a href="../_variables/sort.html">$sort</a> = 'visible DESC,sortorder ASC', <a href="../_variables/limit.html">$limit</a> = 0)&nbsp;&nbsp;
<a href="../_functions/enrol_get_my_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of courses current $USER is enrolled in and can access<BR>
</b><BR>- $fields is an array of field names to ADD<BR>
so name the fields you really need, which will<BR>
be added and uniq'd<BR>
<BR>
<b>param:</b> string|array $fields<br>
<b>param:</b> string $sort<br>
<b>param:</b> int $limit max number of courses<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_course_info_icons" onClick="logFunction('enrol_get_course_info_icons', 'enrollib.php.source.html#l624')" href="enrollib.php.source.html#l624">enrol_get_course_info_icons</a>(<a href="../_variables/course.html">$course</a>, array <a href="../_variables/instances.html">$instances</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/enrol_get_course_info_icons.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns course enrolment information icons.<BR>
</b><BR><b>param:</b> object $course<br>
<b>param:</b> array $instances enrol instances of this course, improves performance<br>
<b>return:</b> array of pix_icon<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_course_description_texts" onClick="logFunction('enrol_get_course_description_texts', 'enrollib.php.source.html#l655')" href="enrollib.php.source.html#l655">enrol_get_course_description_texts</a>(<a href="../_variables/course.html">$course</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_get_course_description_texts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns course enrolment detailed information.<BR>
</b><BR><b>param:</b> object $course<br>
<b>return:</b> array of html fragments - can be used to construct lists<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_users_courses" onClick="logFunction('enrol_get_users_courses', 'enrollib.php.source.html#l679')" href="enrollib.php.source.html#l679">enrol_get_users_courses</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/onlyactive.html">$onlyactive</a> = false, <a href="../_variables/fields.html">$fields</a> = NULL, <a href="../_variables/sort.html">$sort</a> = 'visible DESC,sortorder ASC')&nbsp;&nbsp;
<a href="../_functions/enrol_get_users_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of courses user is enrolled into.<BR>
(Note: use enrol_get_all_users_courses if you want to use the list wihtout any cap checks )<BR>
</b><BR>- $fields is an array of fieldnames to ADD<BR>
so name the fields you really need, which will<BR>
be added and uniq'd<BR>
<BR>
<b>param:</b> int $userid<br>
<b>param:</b> bool $onlyactive return only active enrolments in courses user may see<br>
<b>param:</b> string|array $fields<br>
<b>param:</b> string $sort<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_user_sees_own_courses" onClick="logFunction('enrol_user_sees_own_courses', 'enrollib.php.source.html#l719')" href="enrollib.php.source.html#l719">enrol_user_sees_own_courses</a>(<a href="../_variables/user.html">$user</a> = null)&nbsp;&nbsp;
<a href="../_functions/enrol_user_sees_own_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Can user access at least one enrolled course?<BR>
</b><BR>Cheat if necessary, but find out as fast as possible!<BR>
<BR>
<b>param:</b> int|stdClass $user null means use current user<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_all_users_courses" onClick="logFunction('enrol_get_all_users_courses', 'enrollib.php.source.html#l769')" href="enrollib.php.source.html#l769">enrol_get_all_users_courses</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/onlyactive.html">$onlyactive</a> = false, <a href="../_variables/fields.html">$fields</a> = NULL, <a href="../_variables/sort.html">$sort</a> = 'visible DESC,sortorder ASC')&nbsp;&nbsp;
<a href="../_functions/enrol_get_all_users_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of courses user is enrolled into without any capability checks<BR>
- $fields is an array of fieldnames to ADD<BR>
so name the fields you really need, which will<BR>
be added and uniq'd<BR>
</b><BR><b>param:</b> int $userid<br>
<b>param:</b> bool $onlyactive return only active enrolments in courses user may see<br>
<b>param:</b> string|array $fields<br>
<b>param:</b> string $sort<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_user_delete" onClick="logFunction('enrol_user_delete', 'enrollib.php.source.html#l864')" href="enrollib.php.source.html#l864">enrol_user_delete</a>(<a href="../_variables/user.html">$user</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_user_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called when user is about to be deleted.<BR>
</b><BR><b>param:</b> object $user<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_course_delete" onClick="logFunction('enrol_course_delete', 'enrollib.php.source.html#l881')" href="enrollib.php.source.html#l881">enrol_course_delete</a>(<a href="../_variables/course.html">$course</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_course_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called when course is about to be deleted.<BR>
</b><BR><b>param:</b> stdClass $course<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_try_internal_enrol" onClick="logFunction('enrol_try_internal_enrol', 'enrollib.php.source.html#l903')" href="enrollib.php.source.html#l903">enrol_try_internal_enrol</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/roleid.html">$roleid</a> = null, <a href="../_variables/timestart.html">$timestart</a> = 0, <a href="../_variables/timeend.html">$timeend</a> = 0)&nbsp;&nbsp;
<a href="../_functions/enrol_try_internal_enrol.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Try to enrol user via default internal auth plugin.<BR>
</b><BR>For now this is always using the manual enrol plugin...<BR>
<BR>
<b>param:</b> $courseid<br>
<b>param:</b> $userid<br>
<b>param:</b> $roleid<br>
<b>param:</b> $timestart<br>
<b>param:</b> $timeend<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_selfenrol_available" onClick="logFunction('enrol_selfenrol_available', 'enrollib.php.source.html#l937')" href="enrollib.php.source.html#l937">enrol_selfenrol_available</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_selfenrol_available.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is there a chance users might self enrol<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_get_enrolment_end" onClick="logFunction('enrol_get_enrolment_end', 'enrollib.php.source.html#l964')" href="enrollib.php.source.html#l964">enrol_get_enrolment_end</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_get_enrolment_end.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function returns the end of current active user enrolment.<BR>
</b><BR>It deals correctly with multiple overlapping user enrolments.<BR>
<BR>
<b>param:</b> int $courseid<br>
<b>param:</b> int $userid<br>
<b>return:</b> int|bool timestamp when active enrolment ends, false means no active enrolment now, 0 means never<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_accessing_via_instance" onClick="logFunction('enrol_accessing_via_instance', 'enrollib.php.source.html#l1045')" href="enrollib.php.source.html#l1045">enrol_accessing_via_instance</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_accessing_via_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is current user accessing course via this enrolment method?<BR>
</b><BR>This is intended for operations that are going to affect enrol instances.<BR>
<BR>
<b>param:</b> stdClass $instance enrol instance<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_name" onClick="logFunction('get_name', 'enrollib.php.source.html#l1076')" href="enrollib.php.source.html#l1076">get_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns name of this enrol plugin<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_instance_name" onClick="logFunction('get_instance_name', 'enrollib.php.source.html#l1086')" href="enrollib.php.source.html#l1086">get_instance_name</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/get_instance_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns localised name of enrol instance<BR>
</b><BR><b>param:</b> object $instance (null is accepted too)<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_info_icons" onClick="logFunction('get_info_icons', 'enrollib.php.source.html#l1102')" href="enrollib.php.source.html#l1102">get_info_icons</a>(array <a href="../_variables/instances.html">$instances</a>)&nbsp;&nbsp;
<a href="../_functions/get_info_icons.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns optional enrolment information icons.<BR>
</b><BR>This is used in course list for quick overview of enrolment options.<BR>
<BR>
We are not using single instance parameter because sometimes<BR>
we might want to prevent icon repetition when multiple instances<BR>
of one type exist. One instance may also produce several icons.<BR>
<BR>
<b>param:</b> array $instances all enrol instances of this type in one course<br>
<b>return:</b> array of pix_icon<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_description_text" onClick="logFunction('get_description_text', 'enrollib.php.source.html#l1118')" href="enrollib.php.source.html#l1118">get_description_text</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/get_description_text.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns optional enrolment instance description text.<BR>
</b><BR>This is used in detailed course information.<BR>
<BR>
<BR>
<b>param:</b> object $instance<br>
<b>return:</b> string short html text<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_config" onClick="logFunction('load_config', 'enrollib.php.source.html#l1131')" href="enrollib.php.source.html#l1131">load_config</a>()&nbsp;&nbsp;
<a href="../_functions/load_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Makes sure config is loaded and cached.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_config" onClick="logFunction('get_config', 'enrollib.php.source.html#l1142')" href="enrollib.php.source.html#l1142">get_config</a>(<a href="../_variables/name.html">$name</a>, <a href="../_variables/default.html">$default</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/get_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns plugin config value<BR>
</b><BR><b>param:</b> string $name<br>
<b>param:</b> string $default value if config does not exist yet<br>
<b>return:</b> string value or default<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_config" onClick="logFunction('set_config', 'enrollib.php.source.html#l1153')" href="enrollib.php.source.html#l1153">set_config</a>(<a href="../_variables/name.html">$name</a>, <a href="../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../_functions/set_config.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets plugin config value<BR>
</b><BR><b>param:</b> string $name name of config<br>
<b>param:</b> string $value string config value, null means delete<br>
<b>return:</b> string value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="roles_protected" onClick="logFunction('roles_protected', 'enrollib.php.source.html#l1170')" href="enrollib.php.source.html#l1170">roles_protected</a>()&nbsp;&nbsp;
<a href="../_functions/roles_protected.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin assign protected roles are can they be manually removed?<BR>
</b><BR><b>return:</b> bool - false means anybody may tweak roles, it does not use itemid and component when assigning roles<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_enrol" onClick="logFunction('allow_enrol', 'enrollib.php.source.html#l1178')" href="enrollib.php.source.html#l1178">allow_enrol</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/allow_enrol.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin allow manual enrolments?<BR>
</b><BR><b>param:</b> stdClass $instance course enrol instance<br>
<b>return:</b> bool - true means user with 'enrol/xxx:enrol' may enrol others freely, false means nobody may add more enrolments manually<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_unenrol" onClick="logFunction('allow_unenrol', 'enrollib.php.source.html#l1190')" href="enrollib.php.source.html#l1190">allow_unenrol</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/allow_unenrol.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin allow manual unenrolment of all users?<BR>
All plugins allowing this must implement 'enrol/xxx:unenrol' capability<BR>
</b><BR><b>param:</b> stdClass $instance course enrol instance<br>
<b>return:</b> bool - true means user with 'enrol/xxx:unenrol' may unenrol others freely, false means nobody may touch user_enrolments<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_unenrol_user" onClick="logFunction('allow_unenrol_user', 'enrollib.php.source.html#l1201')" href="enrollib.php.source.html#l1201">allow_unenrol_user</a>(stdClass <a href="../_variables/instance.html">$instance</a>, stdClass <a href="../_variables/ue.html">$ue</a>)&nbsp;&nbsp;
<a href="../_functions/allow_unenrol_user.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin allow manual unenrolment of a specific user?<BR>
All plugins allowing this must implement 'enrol/xxx:unenrol' capability<BR>
</b><BR>This is useful especially for synchronisation plugins that<BR>
do suspend instead of full unenrolment.<BR>
<BR>
<b>param:</b> stdClass $instance course enrol instance<br>
<b>param:</b> stdClass $ue record from user_enrolments table, specifies user<br>
<b>return:</b> bool - true means user with 'enrol/xxx:unenrol' may unenrol this user, false means nobody may touch this user enrolment<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_manage" onClick="logFunction('allow_manage', 'enrollib.php.source.html#l1217')" href="enrollib.php.source.html#l1217">allow_manage</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/allow_manage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin allow manual changes in user_enrolments table?<BR>
</b><BR>All plugins allowing this must implement 'enrol/xxx:manage' capability<BR>
<BR>
<b>param:</b> stdClass $instance course enrol instance<br>
<b>return:</b> bool - true means it is possible to change enrol period and status in user_enrolments table<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="show_enrolme_link" onClick="logFunction('show_enrolme_link', 'enrollib.php.source.html#l1229')" href="enrollib.php.source.html#l1229">show_enrolme_link</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/show_enrolme_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does this plugin support some way to user to self enrol?<BR>
</b><BR><b>param:</b> stdClass $instance course enrol instance<br>
<b>return:</b> bool - true means show &quot;Enrol me in this course&quot; link in course UI<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="try_autoenrol" onClick="logFunction('try_autoenrol', 'enrollib.php.source.html#l1240')" href="enrollib.php.source.html#l1240">try_autoenrol</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/try_autoenrol.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Attempt to automatically enrol current user in course without any interaction,<BR>
calling code has to make sure the plugin and instance are active.<BR>
</b><BR>This should return either a timestamp in the future or false.<BR>
<BR>
<b>param:</b> stdClass $instance course enrol instance<br>
<b>return:</b> bool|int false means not enrolled, integer means timeend<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="try_guestaccess" onClick="logFunction('try_guestaccess', 'enrollib.php.source.html#l1255')" href="enrollib.php.source.html#l1255">try_guestaccess</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/try_guestaccess.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Attempt to automatically gain temporary guest access to course,<BR>
calling code has to make sure the plugin and instance are active.<BR>
</b><BR>This should return either a timestamp in the future or false.<BR>
<BR>
<b>param:</b> stdClass $instance course enrol instance<br>
<b>return:</b> bool|int false means no guest access, integer means timeend<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_user" onClick="logFunction('enrol_user', 'enrollib.php.source.html#l1270')" href="enrollib.php.source.html#l1270">enrol_user</a>(stdClass <a href="../_variables/instance.html">$instance</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/roleid.html">$roleid</a> = null, <a href="../_variables/timestart.html">$timestart</a> = 0, <a href="../_variables/timeend.html">$timeend</a> = 0, <a href="../_variables/status.html">$status</a> = null, <a href="../_variables/recovergrades.html">$recovergrades</a> = null)&nbsp;&nbsp;
<a href="../_functions/enrol_user.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Enrol user into course via enrol instance.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>param:</b> int $userid<br>
<b>param:</b> int $roleid optional role id<br>
<b>param:</b> int $timestart 0 means unknown<br>
<b>param:</b> int $timeend 0 means forever<br>
<b>param:</b> int $status default to ENROL_USER_ACTIVE for new enrolments, no change by default in updates<br>
<b>param:</b> bool $recovergrades restore grade history<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_user_enrol" onClick="logFunction('update_user_enrol', 'enrollib.php.source.html#l1367')" href="enrollib.php.source.html#l1367">update_user_enrol</a>(stdClass <a href="../_variables/instance.html">$instance</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/status.html">$status</a> = NULL, <a href="../_variables/timestart.html">$timestart</a> = NULL, <a href="../_variables/timeend.html">$timeend</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/update_user_enrol.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Store user_enrolments changes and trigger event.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>param:</b> int $userid<br>
<b>param:</b> int $status<br>
<b>param:</b> int $timestart<br>
<b>param:</b> int $timeend<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="unenrol_user" onClick="logFunction('unenrol_user', 'enrollib.php.source.html#l1434')" href="enrollib.php.source.html#l1434">unenrol_user</a>(stdClass <a href="../_variables/instance.html">$instance</a>, <a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/unenrol_user.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Unenrol user from course,<BR>
the last unenrolment removes all remaining roles.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>param:</b> int $userid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sync_user_enrolments" onClick="logFunction('sync_user_enrolments', 'enrollib.php.source.html#l1529')" href="enrollib.php.source.html#l1529">sync_user_enrolments</a>(<a href="../_variables/user.html">$user</a>)&nbsp;&nbsp;
<a href="../_functions/sync_user_enrolments.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Forces synchronisation of user enrolments.<BR>
</b><BR>This is important especially for external enrol plugins,<BR>
this function is called for all enabled enrol plugins<BR>
right after every user login.<BR>
<BR>
<b>param:</b> object $user user record<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="use_standard_editing_ui" onClick="logFunction('use_standard_editing_ui', 'enrollib.php.source.html#l1543')" href="enrollib.php.source.html#l1543">use_standard_editing_ui</a>()&nbsp;&nbsp;
<a href="../_functions/use_standard_editing_ui.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This returns false for backwards compatibility, but it is really recommended.<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_add_instance" onClick="logFunction('can_add_instance', 'enrollib.php.source.html#l1553')" href="enrollib.php.source.html#l1553">can_add_instance</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/can_add_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return whether or not, given the current state, it is possible to add a new instance<BR>
of this enrolment plugin to the course.<BR>
</b><BR>Default implementation is just for backwards compatibility.<BR>
<BR>
<b>param:</b> int $courseid<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_edit_instance" onClick="logFunction('can_edit_instance', 'enrollib.php.source.html#l1567')" href="enrollib.php.source.html#l1567">can_edit_instance</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/can_edit_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return whether or not, given the current state, it is possible to edit an instance<BR>
of this enrolment plugin in the course. Used by the standard editing UI<BR>
to generate a link to the edit instance form if editing is allowed.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_newinstance_link" onClick="logFunction('get_newinstance_link', 'enrollib.php.source.html#l1581')" href="enrollib.php.source.html#l1581">get_newinstance_link</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_newinstance_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns link to page which may be used to add new instance of enrolment plugin in course.<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> moodle_url page url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance_deleteable" onClick="logFunction('instance_deleteable', 'enrollib.php.source.html#l1594')" href="enrollib.php.source.html#l1594">instance_deleteable</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/instance_deleteable.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_delete_instance" onClick="logFunction('can_delete_instance', 'enrollib.php.source.html#l1599')" href="enrollib.php.source.html#l1599">can_delete_instance</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/can_delete_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is it possible to delete enrol instance via standard UI?<BR>
</b><BR><b>param:</b> stdClass&nbsp;&nbsp;$instance<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_hide_show_instance" onClick="logFunction('can_hide_show_instance', 'enrollib.php.source.html#l1609')" href="enrollib.php.source.html#l1609">can_hide_show_instance</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/can_hide_show_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is it possible to hide/show enrol instance via standard UI?<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_manual_enrol_link" onClick="logFunction('get_manual_enrol_link', 'enrollib.php.source.html#l1620')" href="enrollib.php.source.html#l1620">get_manual_enrol_link</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/get_manual_enrol_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns link to manual enrol UI if exists.<BR>
Does the access control tests automatically.<BR>
</b><BR><b>param:</b> object $instance<br>
<b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_unenrolself_link" onClick="logFunction('get_unenrolself_link', 'enrollib.php.source.html#l1631')" href="enrollib.php.source.html#l1631">get_unenrolself_link</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/get_unenrolself_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of unenrol links for all enrol instances in course.<BR>
</b><BR><b>param:</b> int $instance<br>
<b>return:</b> moodle_url or NULL if self unenrolment not supported<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="course_edit_form" onClick="logFunction('course_edit_form', 'enrollib.php.source.html#l1674')" href="enrollib.php.source.html#l1674">course_edit_form</a>(<a href="../_variables/instance.html">$instance</a>, MoodleQuickForm <a href="../_variables/mform.html">$mform</a>, <a href="../_variables/data.html">$data</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/course_edit_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds enrol instance UI to course edit form<BR>
</b><BR><b>param:</b> object $instance enrol instance or null if does not exist yet<br>
<b>param:</b> MoodleQuickForm $mform<br>
<b>param:</b> object $data<br>
<b>param:</b> object $context context of existing course or parent category if course does not exist<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="edit_instance_form" onClick="logFunction('edit_instance_form', 'enrollib.php.source.html#l1687')" href="enrollib.php.source.html#l1687">edit_instance_form</a>(<a href="../_variables/instance.html">$instance</a>, MoodleQuickForm <a href="../_variables/mform.html">$mform</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/edit_instance_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds form elements to add/edit instance form.<BR>
</b><BR><b>param:</b> object $instance enrol instance or null if does not exist yet<br>
<b>param:</b> MoodleQuickForm $mform<br>
<b>param:</b> context $context<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="edit_instance_validation" onClick="logFunction('edit_instance_validation', 'enrollib.php.source.html#l1700')" href="enrollib.php.source.html#l1700">edit_instance_validation</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/files.html">$files</a>, <a href="../_variables/instance.html">$instance</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/edit_instance_validation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Perform custom validation of the data used to edit the instance.<BR>
</b><BR><b>param:</b> array $data array of (&quot;fieldname&quot;=&gt;value) of submitted data<br>
<b>param:</b> array $files array of uploaded files &quot;element_name&quot;=&gt;tmp_file_path<br>
<b>param:</b> object $instance The instance data loaded from the DB.<br>
<b>param:</b> context $context The context of the instance we are editing<br>
<b>return:</b> array of &quot;element_name&quot;=&gt;&quot;error_description&quot; if there are errors,<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="course_edit_validation" onClick="logFunction('course_edit_validation', 'enrollib.php.source.html#l1717')" href="enrollib.php.source.html#l1717">course_edit_validation</a>(<a href="../_variables/instance.html">$instance</a>, array <a href="../_variables/data.html">$data</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/course_edit_validation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validates course edit form data<BR>
</b><BR><b>param:</b> object $instance enrol instance or null if does not exist yet<br>
<b>param:</b> array $data<br>
<b>param:</b> object $context context of existing course or parent category if course does not exist<br>
<b>return:</b> array errors array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="course_updated" onClick="logFunction('course_updated', 'enrollib.php.source.html#l1729')" href="enrollib.php.source.html#l1729">course_updated</a>(<a href="../_variables/inserted.html">$inserted</a>, <a href="../_variables/course.html">$course</a>, <a href="../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../_functions/course_updated.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called after updating/inserting course.<BR>
</b><BR><b>param:</b> bool $inserted true if course just inserted<br>
<b>param:</b> object $course<br>
<b>param:</b> object $data form data<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_instance" onClick="logFunction('add_instance', 'enrollib.php.source.html#l1745')" href="enrollib.php.source.html#l1745">add_instance</a>(<a href="../_variables/course.html">$course</a>, array <a href="../_variables/fields.html">$fields</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/add_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add new instance of enrol plugin.<BR>
</b><BR><b>param:</b> object $course<br>
<b>param:</b> array instance fields<br>
<b>return:</b> int id of new instance, null if can not be created<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_instance" onClick="logFunction('update_instance', 'enrollib.php.source.html#l1783')" href="enrollib.php.source.html#l1783">update_instance</a>(<a href="../_variables/instance.html">$instance</a>, <a href="../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../_functions/update_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update instance of enrol plugin.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>param:</b> stdClass $data modified instance fields<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_default_instance" onClick="logFunction('add_default_instance', 'enrollib.php.source.html#l1814')" href="enrollib.php.source.html#l1814">add_default_instance</a>(<a href="../_variables/course.html">$course</a>)&nbsp;&nbsp;
<a href="../_functions/add_default_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add new instance of enrol plugin with default settings,<BR>
called when adding new instance manually or when adding new course.<BR>
</b><BR>Not all plugins support this.<BR>
<BR>
<b>param:</b> object $course<br>
<b>return:</b> int id of new instance or null if no default supported<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_status" onClick="logFunction('update_status', 'enrollib.php.source.html#l1827')" href="enrollib.php.source.html#l1827">update_status</a>(<a href="../_variables/instance.html">$instance</a>, <a href="../_variables/newstatus.html">$newstatus</a>)&nbsp;&nbsp;
<a href="../_functions/update_status.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update instance status<BR>
</b><BR>Override when plugin needs to do some action when enabled or disabled.<BR>
<BR>
<b>param:</b> stdClass $instance<br>
<b>param:</b> int $newstatus ENROL_INSTANCE_ENABLED, ENROL_INSTANCE_DISABLED<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_instance" onClick="logFunction('delete_instance', 'enrollib.php.source.html#l1849')" href="enrollib.php.source.html#l1849">delete_instance</a>(<a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/delete_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete course enrol plugin instance, unenrol all users.<BR>
</b><BR><b>param:</b> object $instance<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="enrol_page_hook" onClick="logFunction('enrol_page_hook', 'enrollib.php.source.html#l1884')" href="enrollib.php.source.html#l1884">enrol_page_hook</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/enrol_page_hook.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates course enrol form, checks if form submitted<BR>
and enrols user if necessary. It can also redirect.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>return:</b> string html text, usually a form in a text box<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_self_enrol" onClick="logFunction('can_self_enrol', 'enrollib.php.source.html#l1895')" href="enrollib.php.source.html#l1895">can_self_enrol</a>(stdClass <a href="../_variables/instance.html">$instance</a>, <a href="../_variables/checkuserenrolment.html">$checkuserenrolment</a> = true)&nbsp;&nbsp;
<a href="../_functions/can_self_enrol.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if user can self enrol.<BR>
</b><BR><b>param:</b> stdClass $instance enrolment instance<br>
<b>param:</b> bool $checkuserenrolment if true will check if user enrolment is inactive.<br>
<b>return:</b> bool|string true if successful, else error message or false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_enrol_info" onClick="logFunction('get_enrol_info', 'enrollib.php.source.html#l1907')" href="enrollib.php.source.html#l1907">get_enrol_info</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/get_enrol_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return information for enrolment instance containing list of parameters required<BR>
for enrolment, name of enrolment plugin etc.<BR>
</b><BR><b>param:</b> stdClass $instance enrolment instance<br>
<b>return:</b> array instance info.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_course_navigation" onClick="logFunction('add_course_navigation', 'enrollib.php.source.html#l1918')" href="enrollib.php.source.html#l1918">add_course_navigation</a>(<a href="../_variables/instancesnode.html">$instancesnode</a>, stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/add_course_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds navigation links into course admin block.<BR>
</b><BR>By defaults looks for manage links only.<BR>
<BR>
<b>param:</b> navigation_node $instancesnode<br>
<b>param:</b> stdClass $instance<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_action_icons" onClick="logFunction('get_action_icons', 'enrollib.php.source.html#l1939')" href="enrollib.php.source.html#l1939">get_action_icons</a>(stdClass <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/get_action_icons.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns edit icons for the page with list of instances<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_cron_required" onClick="logFunction('is_cron_required', 'enrollib.php.source.html#l1957')" href="enrollib.php.source.html#l1957">is_cron_required</a>()&nbsp;&nbsp;
<a href="../_functions/is_cron_required.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reads version.php and determines if it is necessary<BR>
to execute the cron job now.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cron" onClick="logFunction('cron', 'enrollib.php.source.html#l1980')" href="enrollib.php.source.html#l1980">cron</a>()&nbsp;&nbsp;
<a href="../_functions/cron.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called for all enabled enrol plugins that returned true from is_cron_required().<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="user_delete" onClick="logFunction('user_delete', 'enrollib.php.source.html#l1987')" href="enrollib.php.source.html#l1987">user_delete</a>(<a href="../_variables/user.html">$user</a>)&nbsp;&nbsp;
<a href="../_functions/user_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called when user is about to be deleted<BR>
</b><BR><b>param:</b> object $user<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_manual_enrol_button" onClick="logFunction('get_manual_enrol_button', 'enrollib.php.source.html#l2008')" href="enrollib.php.source.html#l2008">get_manual_enrol_button</a>(course_enrolment_manager <a href="../_variables/manager.html">$manager</a>)&nbsp;&nbsp;
<a href="../_functions/get_manual_enrol_button.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an enrol_user_button that takes the user to a page where they are able to<BR>
enrol users into the managers course through this plugin.<BR>
</b><BR>Optional: If the plugin supports manual enrolments it can choose to override this<BR>
otherwise it shouldn't<BR>
<BR>
<b>param:</b> course_enrolment_manager $manager<br>
<b>return:</b> enrol_user_button|false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_enrolment_actions" onClick="logFunction('get_user_enrolment_actions', 'enrollib.php.source.html#l2022')" href="enrollib.php.source.html#l2022">get_user_enrolment_actions</a>(course_enrolment_manager <a href="../_variables/manager.html">$manager</a>, <a href="../_variables/ue.html">$ue</a>)&nbsp;&nbsp;
<a href="../_functions/get_user_enrolment_actions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets an array of the user enrolment actions<BR>
</b><BR><b>param:</b> course_enrolment_manager $manager<br>
<b>param:</b> stdClass $ue<br>
<b>return:</b> array An array of user_enrolment_actions<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_bulk_operations" onClick="logFunction('has_bulk_operations', 'enrollib.php.source.html#l2033')" href="enrollib.php.source.html#l2033">has_bulk_operations</a>(course_enrolment_manager <a href="../_variables/manager.html">$manager</a>)&nbsp;&nbsp;
<a href="../_functions/has_bulk_operations.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the plugin has one or more bulk operations that can be performed on<BR>
user enrolments.<BR>
</b><BR><b>param:</b> course_enrolment_manager $manager<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_bulk_operations" onClick="logFunction('get_bulk_operations', 'enrollib.php.source.html#l2044')" href="enrollib.php.source.html#l2044">get_bulk_operations</a>(course_enrolment_manager <a href="../_variables/manager.html">$manager</a>)&nbsp;&nbsp;
<a href="../_functions/get_bulk_operations.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return an array of enrol_bulk_enrolment_operation objects that define<BR>
the bulk actions that can be performed on user enrolments by the plugin.<BR>
</b><BR><b>param:</b> course_enrolment_manager $manager<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_expirations" onClick="logFunction('process_expirations', 'enrollib.php.source.html#l2055')" href="enrollib.php.source.html#l2055">process_expirations</a>(progress_trace <a href="../_variables/trace.html">$trace</a>, <a href="../_variables/courseid.html">$courseid</a> = null)&nbsp;&nbsp;
<a href="../_functions/process_expirations.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Do any enrolments need expiration processing.<BR>
</b><BR>Plugins that want to call this functionality must implement 'expiredaction' config setting.<BR>
<BR>
<b>param:</b> progress_trace $trace<br>
<b>param:</b> int $courseid one course, empty mean all<br>
<b>return:</b> bool true if any data processed, false if not<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_expiry_notifications" onClick="logFunction('send_expiry_notifications', 'enrollib.php.source.html#l2174')" href="enrollib.php.source.html#l2174">send_expiry_notifications</a>(<a href="../_variables/trace.html">$trace</a>)&nbsp;&nbsp;
<a href="../_functions/send_expiry_notifications.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Send expiry notifications.<BR>
</b><BR>Plugin that wants to have expiry notification MUST implement following:<BR>
- expirynotifyhour plugin setting,<BR>
- configuration options in instance edit form (expirynotify, notifyall and expirythreshold),<BR>
- notification strings (expirymessageenrollersubject, expirymessageenrollerbody,<BR>
expirymessageenrolledsubject and expirymessageenrolledbody),<BR>
- expiry_notification provider in db/messages.php,<BR>
- upgrade code that sets default thresholds for existing courses (should be 1 day),<BR>
- something that calls this method, such as cron.<BR>
<BR>
<b>param:</b> progress_trace $trace (accepts bool for backwards compatibility only)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_enroller" onClick="logFunction('get_enroller', 'enrollib.php.source.html#l2286')" href="enrollib.php.source.html#l2286">get_enroller</a>(<a href="../_variables/instanceid.html">$instanceid</a>)&nbsp;&nbsp;
<a href="../_functions/get_enroller.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the user who is responsible for enrolments for given instance.<BR>
</b><BR>Override if plugin knows anybody better than admin.<BR>
<BR>
<b>param:</b> int $instanceid enrolment instance id<br>
<b>return:</b> stdClass user record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="notify_expiry_enrolled" onClick="logFunction('notify_expiry_enrolled', 'enrollib.php.source.html#l2298')" href="enrollib.php.source.html#l2298">notify_expiry_enrolled</a>(<a href="../_variables/user.html">$user</a>, <a href="../_variables/ue.html">$ue</a>, progress_trace <a href="../_variables/trace.html">$trace</a>)&nbsp;&nbsp;
<a href="../_functions/notify_expiry_enrolled.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Notify user about incoming expiration of their enrolment,<BR>
it is called only if notification of enrolled users (aka students) is enabled in course.<BR>
</b><BR>This is executed only once for each expiring enrolment right<BR>
at the start of the expiration threshold.<BR>
<BR>
<b>param:</b> stdClass $user<br>
<b>param:</b> stdClass $ue<br>
<b>param:</b> progress_trace $trace<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="notify_expiry_enroller" onClick="logFunction('notify_expiry_enroller', 'enrollib.php.source.html#l2351')" href="enrollib.php.source.html#l2351">notify_expiry_enroller</a>(<a href="../_variables/eid.html">$eid</a>, <a href="../_variables/users.html">$users</a>, progress_trace <a href="../_variables/trace.html">$trace</a>)&nbsp;&nbsp;
<a href="../_functions/notify_expiry_enroller.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Notify person responsible for enrolments that some user enrolments will be expired soon,<BR>
it is called only if notification of enrollers (aka teachers) is enabled in course.<BR>
</b><BR>This is called repeatedly every day for each course if there are any pending expiration<BR>
in the expiration threshold.<BR>
<BR>
<b>param:</b> int $eid<br>
<b>param:</b> array $users<br>
<b>param:</b> progress_trace $trace<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="backup_annotate_custom_fields" onClick="logFunction('backup_annotate_custom_fields', 'enrollib.php.source.html#l2412')" href="enrollib.php.source.html#l2412">backup_annotate_custom_fields</a>(backup_enrolments_execution_step <a href="../_variables/step.html">$step</a>, stdClass <a href="../_variables/enrol.html">$enrol</a>)&nbsp;&nbsp;
<a href="../_functions/backup_annotate_custom_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Backup execution step hook to annotate custom fields.<BR>
</b><BR><b>param:</b> backup_enrolments_execution_step $step<br>
<b>param:</b> stdClass $enrol<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="restore_sync_course" onClick="logFunction('restore_sync_course', 'enrollib.php.source.html#l2422')" href="enrollib.php.source.html#l2422">restore_sync_course</a>(<a href="../_variables/course.html">$course</a>)&nbsp;&nbsp;
<a href="../_functions/restore_sync_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Automatic enrol sync executed during restore.<BR>
Useful for automatic sync by course-&gt;idnumber or course category.<BR>
</b><BR><b>param:</b> stdClass $course course record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="restore_instance" onClick="logFunction('restore_instance', 'enrollib.php.source.html#l2431')" href="enrollib.php.source.html#l2431">restore_instance</a>(restore_enrolments_structure_step <a href="../_variables/step.html">$step</a>, stdClass <a href="../_variables/data.html">$data</a>, <a href="../_variables/course.html">$course</a>, <a href="../_variables/oldid.html">$oldid</a>)&nbsp;&nbsp;
<a href="../_functions/restore_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restore instance and map settings.<BR>
</b><BR><b>param:</b> restore_enrolments_structure_step $step<br>
<b>param:</b> stdClass $data<br>
<b>param:</b> stdClass $course<br>
<b>param:</b> int $oldid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="restore_user_enrolment" onClick="logFunction('restore_user_enrolment', 'enrollib.php.source.html#l2444')" href="enrollib.php.source.html#l2444">restore_user_enrolment</a>(restore_enrolments_structure_step <a href="../_variables/step.html">$step</a>, <a href="../_variables/data.html">$data</a>, <a href="../_variables/instance.html">$instance</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/oldinstancestatus.html">$oldinstancestatus</a>)&nbsp;&nbsp;
<a href="../_functions/restore_user_enrolment.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restore user enrolment.<BR>
</b><BR><b>param:</b> restore_enrolments_structure_step $step<br>
<b>param:</b> stdClass $data<br>
<b>param:</b> stdClass $instance<br>
<b>param:</b> int $oldinstancestatus<br>
<b>param:</b> int $userid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="restore_role_assignment" onClick="logFunction('restore_role_assignment', 'enrollib.php.source.html#l2457')" href="enrollib.php.source.html#l2457">restore_role_assignment</a>(<a href="../_variables/instance.html">$instance</a>, <a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/contextid.html">$contextid</a>)&nbsp;&nbsp;
<a href="../_functions/restore_role_assignment.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restore role assignment.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>param:</b> int $roleid<br>
<b>param:</b> int $userid<br>
<b>param:</b> int $contextid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="restore_group_member" onClick="logFunction('restore_group_member', 'enrollib.php.source.html#l2469')" href="enrollib.php.source.html#l2469">restore_group_member</a>(<a href="../_variables/instance.html">$instance</a>, <a href="../_variables/groupid.html">$groupid</a>, <a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/restore_group_member.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restore user group membership.<BR>
</b><BR><b>param:</b> stdClass $instance<br>
<b>param:</b> int $groupid<br>
<b>param:</b> int $userid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_instance_defaults" onClick="logFunction('get_instance_defaults', 'enrollib.php.source.html#l2480')" href="enrollib.php.source.html#l2480">get_instance_defaults</a>()&nbsp;&nbsp;
<a href="../_functions/get_instance_defaults.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns defaults for new instances.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_param_types" onClick="logFunction('validate_param_types', 'enrollib.php.source.html#l2489')" href="enrollib.php.source.html#l2489">validate_param_types</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/rules.html">$rules</a>)&nbsp;&nbsp;
<a href="../_functions/validate_param_types.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validate a list of parameter names and types.<BR>
</b><BR><b>param:</b> array $data array of (&quot;fieldname&quot;=&gt;value) of submitted data<br>
<b>param:</b> array $rules array of (&quot;fieldname&quot;=&gt;PARAM_X types - or &quot;fieldname&quot;=&gt;array( list of valid options )<br>
<b>return:</b> array of &quot;element_name&quot;=&gt;&quot;error_description&quot; if there are errors,<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
